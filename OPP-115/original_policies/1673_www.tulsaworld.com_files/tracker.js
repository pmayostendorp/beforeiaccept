function TNStats_Tracker(e){this._domain=e;this._trackerDomain="stats.townnews.com";this._trackerURI="/shared-content/stats/common/tracker.gif";this._plugins=["DetectFlash","DetectRes","DetectVisitor","DetectPageTitle","DetectUniquePageview"];this._globalvars=[];this._trackvars=[];this._uriPrefix="";this._sessionTimeout=1800;this._cookieTimeout=43800;this._pageStart=new Date();this._ignoreURI=[];this._ignoreURI["/shared-content/firebuglite/firebug.html"]=1;this._cookiePath="/";this._crossDomainMessenger=false;this.crossDomain=true;if(document.getElementsByTagName){var c=document.getElementsByTagName("meta");for(var d=0;d<c.length;d++){if(c[d].name!=="murlinstats"){continue}if(c[d].content.substr(0,6)==="ignore"){var b=c[d].content.substr(7).split(",");for(var a=0;a<b.length;a++){this._ignoreURI[b[a]]=1}}}}this._setGlobalVar=function(g,f){this._globalvars[g]=f};this._getGlobalVar=function(f){if(this._globalvars[f]){return this._globalvars[f]}return""};this._addTrackVar=function(g,f){g=escape(g);f=escape(f);this._trackvars[g]=f};this._clearTrackVars=function(){this._trackvars=[]};this._joinGlobalVars=function(){var f=[];for(var g in this._globalvars){if(typeof(this._globalvars[g])==="string"){f[f.length]=(escape(g)+"="+escape(this._globalvars[g]))}}return f.join("&")};this._joinTrackVars=function(){var f=[];for(var g in this._trackvars){if(typeof(this._trackvars[g])==="string"){f[f.length]=(g+"="+this._trackvars[g])}}return f.join("&")};this._addCookie=function(m,g,f){if(typeof(window.sessionStorage)!=="undefined"&&typeof(window.localStorage)!=="undefined"){var k=(f)?window.localStorage:window.sessionStorage;try{k["tnms:"+this._domain+":"+m]=g}catch(h){k.clear()}}else{var j=m+"="+escape(g)+"; path="+this._cookiePath+";";if(f>0){var l=new Date();var i=l.getTime();l.setTime((f*3600*1000)+i);j=j+" expires="+l.toGMTString()+";"}document.cookie=j}};this._getCookie=function(k){var f=document.cookie;var h=f.split("; ");var i="";for(var j=0;j<h.length;j++){var g=h[j].split("=");if(g[0]===k){i=unescape(g[1]);break}}if(typeof(window.sessionStorage)!=="undefined"&&typeof(window.localStorage)!=="undefined"){if(window.localStorage["tnms:"+this._domain+":"+k]){i=window.localStorage["tnms:"+this._domain+":"+k]}if(window.sessionStorage["tnms:"+this._domain+":"+k]){i=window.sessionStorage["tnms:"+this._domain+":"+k]}}return i};this._sendTracker=function(){var h=new Date();var g="";if(window.location.protocol.indexOf("http:")===0?"s":""){g="http://"+this._trackerDomain+this._trackerURI}else{g="https://"+this._trackerDomain+this._trackerURI}g=g+"?"+this._joinTrackVars()+"&rt="+h.getTime();var f=new Image(1,1);f.src=g};this._hashString=function(q){function f(k,l){var n=k[0],h=k[1],g=k[2],m=k[3],n=p(n,h,g,m,l[0],7,-680876936),m=p(m,n,h,g,l[1],12,-389564586),g=p(g,m,n,h,l[2],17,606105819),h=p(h,g,m,n,l[3],22,-1044525330),n=p(n,h,g,m,l[4],7,-176418897),m=p(m,n,h,g,l[5],12,1200080426),g=p(g,m,n,h,l[6],17,-1473231341),h=p(h,g,m,n,l[7],22,-45705983),n=p(n,h,g,m,l[8],7,1770035416),m=p(m,n,h,g,l[9],12,-1958414417),g=p(g,m,n,h,l[10],17,-42063),h=p(h,g,m,n,l[11],22,-1990404162),n=p(n,h,g,m,l[12],7,1804603682),m=p(m,n,h,g,l[13],12,-40341101),g=p(g,m,n,h,l[14],17,-1502002290),h=p(h,g,m,n,l[15],22,1236535329),n=j(n,h,g,m,l[1],5,-165796510),m=j(m,n,h,g,l[6],9,-1069501632),g=j(g,m,n,h,l[11],14,643717713),h=j(h,g,m,n,l[0],20,-373897302),n=j(n,h,g,m,l[5],5,-701558691),m=j(m,n,h,g,l[10],9,38016083),g=j(g,m,n,h,l[15],14,-660478335),h=j(h,g,m,n,l[4],20,-405537848),n=j(n,h,g,m,l[9],5,568446438),m=j(m,n,h,g,l[14],9,-1019803690),g=j(g,m,n,h,l[3],14,-187363961),h=j(h,g,m,n,l[8],20,1163531501),n=j(n,h,g,m,l[13],5,-1444681467),m=j(m,n,h,g,l[2],9,-51403784),g=j(g,m,n,h,l[7],14,1735328473),h=j(h,g,m,n,l[12],20,-1926607734),n=o(h^g^m,n,h,l[5],4,-378558),m=o(n^h^g,m,n,l[8],11,-2022574463),g=o(m^n^h,g,m,l[11],16,1839030562),h=o(g^m^n,h,g,l[14],23,-35309556),n=o(h^g^m,n,h,l[1],4,-1530992060),m=o(n^h^g,m,n,l[4],11,1272893353),g=o(m^n^h,g,m,l[7],16,-155497632),h=o(g^m^n,h,g,l[10],23,-1094730640),n=o(h^g^m,n,h,l[13],4,681279174),m=o(n^h^g,m,n,l[0],11,-358537222),g=o(m^n^h,g,m,l[3],16,-722521979),h=o(g^m^n,h,g,l[6],23,76029189),n=o(h^g^m,n,h,l[9],4,-640364487),m=o(n^h^g,m,n,l[12],11,-421815835),g=o(m^n^h,g,m,l[15],16,530742520),h=o(g^m^n,h,g,l[2],23,-995338651),n=i(n,h,g,m,l[0],6,-198630844),m=i(m,n,h,g,l[7],10,1126891415),g=i(g,m,n,h,l[14],15,-1416354905),h=i(h,g,m,n,l[5],21,-57434055),n=i(n,h,g,m,l[12],6,1700485571),m=i(m,n,h,g,l[3],10,-1894986606),g=i(g,m,n,h,l[10],15,-1051523),h=i(h,g,m,n,l[1],21,-2054922799),n=i(n,h,g,m,l[8],6,1873313359),m=i(m,n,h,g,l[15],10,-30611744),g=i(g,m,n,h,l[6],15,-1560198380),h=i(h,g,m,n,l[13],21,1309151649),n=i(n,h,g,m,l[4],6,-145523070),m=i(m,n,h,g,l[11],10,-1120210379),g=i(g,m,n,h,l[2],15,718787259),h=i(h,g,m,n,l[9],21,-343485551);k[0]=n+k[0]&4294967295;k[1]=h+k[1]&4294967295;k[2]=g+k[2]&4294967295;k[3]=m+k[3]&4294967295}function i(m,n,s,k,h,r,l){return o(s^(n|~k),m,n,h,r,l)}function j(m,n,s,k,h,r,l){return o(n&k|s&~k,m,n,h,r,l)}function p(m,n,s,k,h,r,l){return o(n&s|~n&k,m,n,h,r,l)}function o(k,l,n,h,g,m){l=(l+k&4294967295)+(h+m&4294967295)&4294967295;return(l<<g|l>>>32-g)+n&4294967295}return function(k){for(var l=0;l<k.length;l++){for(var n=k[l],h="0123456789abcdef".split(""),g="",m=0;4>m;m++){g+=h[n>>8*m+4&15]+h[n>>8*m&15]}k[l]=g}return k.join("")}(function(m){var n=m.length,s=[1732584193,-271733879,-1732584194,271733878],k;for(k=64;k<=m.length;k+=64){for(var h=m.substring(k-64,k),r=[],l=void 0,l=0;64>l;l+=4){r[l>>2]=h.charCodeAt(l)+(h.charCodeAt(l+1)<<8)+(h.charCodeAt(l+2)<<16)+(h.charCodeAt(l+3)<<24)}f(s,r)}m=m.substring(k-64);h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(k=0;k<m.length;k++){h[k>>2]|=m.charCodeAt(k)<<(k%4<<3)}h[k>>2]|=128<<(k%4<<3);if(55<k){for(f(s,h),k=0;16>k;k++){h[k]=0}}h[14]=8*n;f(s,h);return s}(q))}}TNStats_Tracker.prototype.setTracker=function(){return};TNStats_Tracker.prototype.setTrackerDomain=function(a){this._trackerDomain=a};TNStats_Tracker.prototype.setTrackerURI=function(a){this._trackerURI=a};TNStats_Tracker.prototype.setURIPrefix=function(a){this._uriPrefix=a};TNStats_Tracker.prototype.ignoreURI=function(b,a){if(!a){this._ignoreURI[b]=1}else{this._ignoreURI[a+"-"+b]=1}};TNStats_Tracker.prototype.pluginDetectRes=function(){if(screen){this._addTrackVar("tnms_rs",screen.width+"x"+screen.height+"x"+screen.colorDepth)}};TNStats_Tracker.prototype.pluginDetectPageTitle=function(){var a=this._getCookie("tnms_pdt");var b=this._getGlobalVar("title");if(!b.length){b="(empty title)"}if(a){this._addTrackVar("tnms_pdt",a)}this._addTrackVar("tnms_dt",b);this._addCookie("tnms_pdt",b,this._cookieTimeout)};TNStats_Tracker.prototype.pluginDetectUniquePageview=function(){if(typeof(window.sessionStorage)==="undefined"){return}var c=this._getGlobalVar("uri");var d=this._getGlobalVar("domain");var b="tnmsup:"+this._hashString(d+c);var a=window.sessionStorage[b];if(!a){this._addTrackVar("tnms_upage",1);window.sessionStorage[b]=1}};TNStats_Tracker.prototype.pluginDetectVisitor=function(){var b=new Date();var c=0;var h=String(this._getCookie("tnms_vid"));var e=this._getCookie("tnms_vsst");var d=this._getCookie("tnms_vssl");var f=this._getCookie("tnms_vpuri");var g=0;if(!h.length){c=1;e=b.getTime()/1000;h+=b.getTime();if(window.screenX){h+=Math.abs(window.screenX)}else{if(window.screenLeft){h+=Math.abs(window.screenLeft)}}if(window.screenX){h+=Math.abs(window.screenY)}else{if(window.screenTop){h+=Math.abs(window.screenTop)}}if(document.body&&document.body.clientWidth){h+=document.body.clientWidth}else{if(window.innerWidth){h+=window.innerWidth}}if(document.body&&document.body.clientHeight){h+=document.body.clientHeight}else{if(window.innerHeight){h+=window.innerHeight}}h+=Math.floor(Math.random()*b.getTime())}else{if((!e)||(((b.getTime()/1000)-d)>this._sessionTimeout)){c=2;e=b.getTime()/1000}}this._addCookie("tnms_vsst",Math.ceil(e));this._addCookie("tnms_vssl",Math.ceil((b.getTime()/1000)));this._addCookie("tnms_vpuri",this._uri,this._cookieTimeout);this._addCookie("tnms_vid",h,this._cookieTimeout);var i=this._getCookie("tnms_vtumt");var a=String(b.getFullYear())+String(b.getMonth());if(i!==a){this._addTrackVar("tnms_vtum",1);this._addCookie("tnms_vtumt",a,this._cookieTimeout)}if(d){this._addTrackVar("tnms_vpuri",f);if(c){g=0}else{g=(b.getTime()/1000)-d}this._addTrackVar("tnms_vplen",Math.ceil(g))}this._addTrackVar("tnms_vt",c);this._addTrackVar("tnms_vid",h)};TNStats_Tracker.prototype.pluginDetectFlash=function(){var c=false;var d="";var b;if(navigator.plugins["Shockwave Flash"]&&navigator.plugins["Shockwave Flash"].description){d=String(navigator.plugins["Shockwave Flash"].description);b=d.split(" ");c=b[2]}else{if(window.ActiveXObject){var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.5");if(a){d=String(a.GetVariable("$version"));b=d.split(/[, ]/);c=b[1]+"."+b[2]}}}if(c){this._addTrackVar("tnms_fl",c)}};TNStats_Tracker.prototype.runPlugins=function(){for(var $x=0;$x<this._plugins.length;$x++){if(!this._ignoreURI[this._plugins[$x]+"-"+this._uri]){try{eval("this.plugin"+this._plugins[$x]+"();")}catch(e){}}}this._addTrackVar("tnms_do",this._domain);this._addTrackVar("tnms_uri",this._uri);this._addTrackVar("tnms_ref",this._getGlobalVar("referrer"));this._sendTracker()};TNStats_Tracker.prototype.trackPageView=function(b){var g=String(document.location);var e=g.match(/^(http|https):\/\/([^\/]{1,})(.*)$/);this._clearTrackVars();if(e){this._uri=this._uriPrefix+e[3];this._scheme=e[1]}if(b){this._uri=this._uriPrefix+b}if(this._ignoreURI[this._uri]){return}this._setGlobalVar("title",document.title);this._setGlobalVar("referrer",document.referrer);this._setGlobalVar("domain",this._domain);this._setGlobalVar("uri",this._uri);if(document.createElement&&this.crossDomain){if(!this._crossDomainMessenger){this._crossDomainMessenger=true;var f=window.addEventListener?"addEventListener":"attachEvent";var c=window[f];var a=f==="attachEvent"?"onmessage":"message";if(c){c(a,function(j){if(j.origin&&j.data&&j.data.tnms_event&&j.data.tnms_event==="trackPageview"&&j.data.tnms_domain&&j.data.tnms_uri){var k=j.origin.replace(/.*?:\/\//g,"");var i=new TNStats_Tracker(j.data.tnms_domain);i.crossDomain=false;i.setTrackerDomain(k);i.trackPageView(j.data.tnms_uri)}},false)}}var d=document.createElement("iframe");if(d&&d.src!==undefined){var h=this._scheme+"://"+this._trackerDomain+"/"+this._domain+"/?"+this._joinGlobalVars();document.write('<iframe src="'+h+'" width="0" height="0" frameBorder="0" style="position: absolute; width: 0px; height: 0px;"></iframe>')}else{this.runPlugins()}}else{this.runPlugins()}};TNStats_Tracker.prototype.trackPageViewCD=function(){var g=String(document.location);var b=g.match(/\?(.*)$/);if(!b||!b[1]){return}var i=b[1].split("&");for(var h=0;h<i.length;h++){var d=i[h].split("=");var c=unescape(d[0]);var a=unescape(d[1]);this._setGlobalVar(c,a);if(c==="uri"){this._uri=a}else{if(c==="domain"){this._domain=a}}}if(!this._uri||!this._domain){return}if(window.parent&&window.parent.postMessage){try{this._addCookie("tnms_cdc","1",1)}catch(f){window.parent.postMessage({tnms_event:"trackPageview",tnms_uri:this._uri,tnms_domain:this._domain},"*");return}}this._cookiePath="/"+this._domain+"/";this.runPlugins()};