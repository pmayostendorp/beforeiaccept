var requirejs,require,define;!function(ba){function G(b){return"[object Function]"===K.call(b)}function H(b){return"[object Array]"===K.call(b)}function v(b,c){if(b){var d;for(d=0;d<b.length&&(!b[d]||!c(b[d],d,b));d+=1);}}function T(b,c){if(b){var d;for(d=b.length-1;d>-1&&(!b[d]||!c(b[d],d,b));d-=1);}}function t(b,c){return fa.call(b,c)}function m(b,c){return t(b,c)&&b[c]}function B(b,c){for(var d in b)if(t(b,d)&&c(b[d],d))break}function U(b,c,d,e){return c&&B(c,function(c,g){(d||!t(b,g))&&(!e||"object"!=typeof c||!c||H(c)||G(c)||c instanceof RegExp?b[g]=c:(b[g]||(b[g]={}),U(b[g],c,d,e)))}),b}function u(b,c){return function(){return c.apply(b,arguments)}}function ca(b){throw b}function da(b){if(!b)return b;var c=ba;return v(b.split("."),function(b){c=c[b]}),c}function C(b,c,d,e){return c=Error(c+"\nhttp://requirejs.org/docs/errors.html#"+b),c.requireType=b,c.requireModules=e,d&&(c.originalError=d),c}function ga(b){function c(a,k,b){var f,l,c,d,e,g,i,p,k=k&&k.split("/"),h=j.map,n=h&&h["*"];if(a){for(a=a.split("/"),l=a.length-1,j.nodeIdCompat&&Q.test(a[l])&&(a[l]=a[l].replace(Q,"")),"."===a[0].charAt(0)&&k&&(l=k.slice(0,k.length-1),a=l.concat(a)),l=a,c=0;c<l.length;c++)d=l[c],"."===d?(l.splice(c,1),c-=1):".."===d&&0!==c&&(1!=c||".."!==l[2])&&".."!==l[c-1]&&c>0&&(l.splice(c-1,2),c-=2);a=a.join("/")}if(b&&h&&(k||n)){l=a.split("/"),c=l.length;a:for(;c>0;c-=1){if(e=l.slice(0,c).join("/"),k)for(d=k.length;d>0;d-=1)if((b=m(h,k.slice(0,d).join("/")))&&(b=m(b,e))){f=b,g=c;break a}!i&&n&&m(n,e)&&(i=m(n,e),p=c)}!f&&i&&(f=i,g=p),f&&(l.splice(0,g,f),a=l.join("/"))}return(f=m(j.pkgs,a))?f:a}function d(a){z&&v(document.getElementsByTagName("script"),function(k){return k.getAttribute("data-requiremodule")===a&&k.getAttribute("data-requirecontext")===i.contextName?(k.parentNode.removeChild(k),!0):void 0})}function e(a){var k=m(j.paths,a);return k&&H(k)&&1<k.length?(k.shift(),i.require.undef(a),i.makeRequire(null,{skipMap:!0})([a]),!0):void 0}function n(a){var k,c=a?a.indexOf("!"):-1;return c>-1&&(k=a.substring(0,c),a=a.substring(c+1,a.length)),[k,a]}function p(a,k,b,f){var l,d,e=null,g=k?k.name:null,j=a,p=!0,h="";return a||(p=!1,a="_@r"+(K+=1)),a=n(a),e=a[0],a=a[1],e&&(e=c(e,g,f),d=m(r,e)),a&&(e?h=d&&d.normalize?d.normalize(a,function(a){return c(a,g,f)}):-1===a.indexOf("!")?c(a,g,f):a:(h=c(a,g,f),a=n(h),e=a[0],h=a[1],b=!0,l=i.nameToUrl(h))),b=!e||d||b?"":"_unnormalized"+(O+=1),{prefix:e,name:h,parentMap:k,unnormalized:!!b,url:l,originalName:j,isDefine:p,id:(e?e+"!"+h:h)+b}}function s(a){var k=a.id,b=m(h,k);return b||(b=h[k]=new i.Module(a)),b}function q(a,k,b){var f=a.id,c=m(h,f);!t(r,f)||c&&!c.defineEmitComplete?(c=s(a),c.error&&"error"===k?b(c.error):c.on(k,b)):"defined"===k&&b(r[f])}function w(a,b){var c=a.requireModules,f=!1;b?b(a):(v(c,function(b){(b=m(h,b))&&(b.error=a,b.events.error&&(f=!0,b.emit("error",a)))}),f||g.onError(a))}function x(){R.length&&(ha.apply(A,[A.length,0].concat(R)),R=[])}function y(a){delete h[a],delete V[a]}function F(a,b,c){var f=a.map.id;a.error?a.emit("error",a.error):(b[f]=!0,v(a.depMaps,function(f,d){var e=f.id,g=m(h,e);g&&!a.depMatched[d]&&!c[e]&&(m(b,e)?(a.defineDep(d,r[e]),a.check()):F(g,b,c))}),c[f]=!0)}function D(){var a,b,c=(a=1e3*j.waitSeconds)&&i.startTime+a<(new Date).getTime(),f=[],l=[],g=!1,h=!0;if(!W){if(W=!0,B(V,function(a){var i=a.map,j=i.id;if(a.enabled&&(i.isDefine||l.push(a),!a.error))if(!a.inited&&c)e(j)?g=b=!0:(f.push(j),d(j));else if(!a.inited&&a.fetched&&i.isDefine&&(g=!0,!i.prefix))return h=!1}),c&&f.length)return a=C("timeout","Load timeout for modules: "+f,null,f),a.contextName=i.contextName,w(a);h&&v(l,function(a){F(a,{},{})}),c&&!b||!g||!z&&!ea||X||(X=setTimeout(function(){X=0,D()},50)),W=!1}}function E(a){t(r,a[0])||s(p(a[0],null,!0)).init(a[1],a[2])}function I(a){var a=a.currentTarget||a.srcElement,b=i.onScriptLoad;return a.detachEvent&&!Y?a.detachEvent("onreadystatechange",b):a.removeEventListener("load",b,!1),b=i.onScriptError,(!a.detachEvent||Y)&&a.removeEventListener("error",b,!1),{node:a,id:a&&a.getAttribute("data-requiremodule")}}function J(){var a;for(x();A.length;){if(a=A.shift(),null===a[0])return w(C("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));E(a)}}var W,Z,i,L,X,j={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},h={},V={},$={},A=[],r={},S={},aa={},K=1,O=1;return L={require:function(a){return a.require?a.require:a.require=i.makeRequire(a.map)},exports:function(a){return a.usingExports=!0,a.map.isDefine?a.exports?r[a.map.id]=a.exports:a.exports=r[a.map.id]={}:void 0},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){return m(j.config,a.map.id)||{}},exports:a.exports||(a.exports={})}}},Z=function(a){this.events=m($,a.id)||{},this.map=a,this.shim=m(j.shim,a.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},Z.prototype={init:function(a,b,c,f){f=f||{},this.inited||(this.factory=b,c?this.on("error",c):this.events.error&&(c=u(this,function(a){this.emit("error",a)})),this.depMaps=a&&a.slice(0),this.errback=c,this.inited=!0,this.ignore=f.ignore,f.enabled||this.enabled?this.enable():this.check())},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0,i.startTime=(new Date).getTime();var a=this.map;if(!this.shim)return a.prefix?this.callPlugin():this.load();i.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return a.prefix?this.callPlugin():this.load()}))}},load:function(){var a=this.map.url;S[a]||(S[a]=!0,i.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id;b=this.depExports;var f=this.exports,l=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(G(l)){if(this.events.error&&this.map.isDefine||g.onError!==ca)try{f=i.execCb(c,l,b,f)}catch(d){a=d}else f=i.execCb(c,l,b,f);if(this.map.isDefine&&void 0===f&&((b=this.module)?f=b.exports:this.usingExports&&(f=this.exports)),a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",w(this.error=a)}else f=l;this.exports=f,this.map.isDefine&&!this.ignore&&(r[c]=f,g.onResourceLoad)&&g.onResourceLoad(i,this.map,this.depMaps),y(c),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var a=this.map,b=a.id,d=p(a.prefix);this.depMaps.push(d),q(d,"defined",u(this,function(f){var l,d;d=m(aa,this.map.id);var e=this.map.name,P=this.map.parentMap?this.map.parentMap.name:null,n=i.makeRequire(a.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(f.normalize&&(e=f.normalize(e,function(a){return c(a,P,!0)})||""),f=p(a.prefix+"!"+e,this.map.parentMap),q(f,"defined",u(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),(d=m(h,f.id))&&(this.depMaps.push(f),this.events.error&&d.on("error",u(this,function(a){this.emit("error",a)})),d.enable())):d?(this.map.url=i.nameToUrl(d),this.load()):(l=u(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),l.error=u(this,function(a){this.inited=!0,this.error=a,a.requireModules=[b],B(h,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&y(a.map.id)}),w(a)}),l.fromText=u(this,function(f,c){var d=a.name,e=p(d),P=M;c&&(f=c),P&&(M=!1),s(e),t(j.config,b)&&(j.config[d]=j.config[b]);try{g.exec(f)}catch(h){return w(C("fromtexteval","fromText eval for "+b+" failed: "+h,h,[b]))}P&&(M=!0),this.depMaps.push(e),i.completeLoad(d),n([d],l)}),f.load(a.name,n,l,j))})),i.enable(d,this),this.pluginMaps[d.id]=d},enable:function(){V[this.map.id]=this,this.enabling=this.enabled=!0,v(this.depMaps,u(this,function(a,b){var c,f;if("string"==typeof a){if(a=p(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[b]=a,c=m(L,a.id))return void(this.depExports[b]=c(this));this.depCount+=1,q(a,"defined",u(this,function(a){this.defineDep(b,a),this.check()})),this.errback&&q(a,"error",u(this,this.errback))}c=a.id,f=h[c],!t(L,c)&&f&&!f.enabled&&i.enable(a,this)})),B(this.pluginMaps,u(this,function(a){var b=m(h,a.id);b&&!b.enabled&&i.enable(a,this)})),this.enabling=!1,this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){v(this.events[a],function(a){a(b)}),"error"===a&&delete this.events[a]}},i={config:j,contextName:b,registry:h,defined:r,urlFetched:S,defQueue:A,Module:Z,makeModuleMap:p,nextTick:g.nextTick,onError:w,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=j.shim,c={paths:!0,bundles:!0,config:!0,map:!0};B(a,function(a,b){c[b]?(j[b]||(j[b]={}),U(j[b],a,!0,!0)):j[b]=a}),a.bundles&&B(a.bundles,function(a,b){v(a,function(a){a!==b&&(aa[a]=b)})}),a.shim&&(B(a.shim,function(a,c){H(a)&&(a={deps:a}),!a.exports&&!a.init||a.exportsFn||(a.exportsFn=i.makeShimExports(a)),b[c]=a}),j.shim=b),a.packages&&v(a.packages,function(a){var b,a="string"==typeof a?{name:a}:a;b=a.name,a.location&&(j.paths[b]=a.location),j.pkgs[b]=a.name+"/"+(a.main||"main").replace(ia,"").replace(Q,"")}),B(h,function(a,b){!a.inited&&!a.map.unnormalized&&(a.map=p(b))}),(a.deps||a.callback)&&i.require(a.deps||[],a.callback)},makeShimExports:function(a){return function(){var b;return a.init&&(b=a.init.apply(ba,arguments)),b||a.exports&&da(a.exports)}},makeRequire:function(a,e){function j(c,d,m){var n,q;return e.enableBuildCallback&&d&&G(d)&&(d.__requireJsBuild=!0),"string"==typeof c?G(d)?w(C("requireargs","Invalid require call"),m):a&&t(L,c)?L[c](h[a.id]):g.get?g.get(i,c,a,j):(n=p(c,a,!1,!0),n=n.id,t(r,n)?r[n]:w(C("notloaded",'Module name "'+n+'" has not been loaded yet for context: '+b+(a?"":". Use require([])")))):(J(),i.nextTick(function(){J(),q=s(p(null,a)),q.skipMap=e.skipMap,q.init(c,d,m,{enabled:!0}),D()}),j)}return e=e||{},U(j,{isBrowser:z,toUrl:function(b){var d,e=b.lastIndexOf("."),k=b.split("/")[0];return-1!==e&&("."!==k&&".."!==k||e>1)&&(d=b.substring(e,b.length),b=b.substring(0,e)),i.nameToUrl(c(b,a&&a.id,!0),d,!0)},defined:function(b){return t(r,p(b,a,!1,!0).id)},specified:function(b){return b=p(b,a,!1,!0).id,t(r,b)||t(h,b)}}),a||(j.undef=function(b){x();var c=p(b,a,!0),e=m(h,b);d(b),delete r[b],delete S[c.url],delete $[b],T(A,function(a,c){a[0]===b&&A.splice(c,1)}),e&&(e.events.defined&&($[b]=e.events),y(b))}),j},enable:function(a){m(h,a.id)&&s(a).enable()},completeLoad:function(a){var b,c,d=m(j.shim,a)||{},g=d.exports;for(x();A.length;){if(c=A.shift(),null===c[0]){if(c[0]=a,b)break;b=!0}else c[0]===a&&(b=!0);E(c)}if(c=m(h,a),!b&&!t(r,a)&&c&&!c.inited){if(j.enforceDefine&&(!g||!da(g)))return e(a)?void 0:w(C("nodefine","No define call for "+a,null,[a]));E([a,d.deps||[],d.exportsFn])}D()},nameToUrl:function(a,b,c){var d,e,h;if((d=m(j.pkgs,a))&&(a=d),d=m(aa,a))return i.nameToUrl(d,b,c);if(g.jsExtRegExp.test(a))d=a+(b||"");else{for(d=j.paths,a=a.split("/"),e=a.length;e>0;e-=1)if(h=a.slice(0,e).join("/"),h=m(d,h)){H(h)&&(h=h[0]),a.splice(0,e,h);break}d=a.join("/"),d+=b||(/^data\:|\?/.test(d)||c?"":".js"),d=("/"===d.charAt(0)||d.match(/^[\w\+\.\-]+:/)?"":j.baseUrl)+d}return j.urlArgs?d+((-1===d.indexOf("?")?"?":"&")+j.urlArgs):d},load:function(a,b){g.load(i,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){("load"===a.type||ja.test((a.currentTarget||a.srcElement).readyState))&&(N=null,a=I(a),i.completeLoad(a.id))},onScriptError:function(a){var b=I(a);return e(b.id)?void 0:w(C("scripterror","Script error for: "+b.id,a,[b.id]))}},i.require=i.makeRequire(),i}var g,x,y,D,I,E,N,J,s,O,ka=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,la=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ia=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,ha=Array.prototype.splice,z=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),ea=!z&&"undefined"!=typeof importScripts,ja=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},q={},R=[],M=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(G(requirejs))return;q=requirejs,requirejs=void 0}"undefined"!=typeof require&&!G(require)&&(q=require,require=void 0),g=requirejs=function(b,c,d,e){var n,p="_";return!H(b)&&"string"!=typeof b&&(n=b,H(c)?(b=c,c=d,d=e):b=[]),n&&n.context&&(p=n.context),(e=m(F,p))||(e=F[p]=g.s.newContext(p)),n&&e.configure(n),e.require(b,c,d)},g.config=function(b){return g(b)},g.nextTick="undefined"!=typeof setTimeout?function(b){setTimeout(b,4)}:function(b){b()},require||(require=g),g.version="2.1.14",g.jsExtRegExp=/^\/|:|\?|\.js$/,g.isBrowser=z,x=g.s={contexts:F,newContext:ga},g({}),v(["toUrl","undef","defined","specified"],function(b){g[b]=function(){var c=F._;return c.require[b].apply(c,arguments)}}),z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(y=x.head=D.parentNode),g.onError=ca,g.createNode=function(b){var c=b.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return c.type=b.scriptType||"text/javascript",c.charset="utf-8",c.async=!0,c},g.load=function(b,c,d){var e=b&&b.config||{};if(z)return e=g.createNode(e,c,d),e.setAttribute("data-requirecontext",b.contextName),e.setAttribute("data-requiremodule",c),!e.attachEvent||e.attachEvent.toString&&0>e.attachEvent.toString().indexOf("[native code")||Y?(e.addEventListener("load",b.onScriptLoad,!1),e.addEventListener("error",b.onScriptError,!1)):(M=!0,e.attachEvent("onreadystatechange",b.onScriptLoad)),e.src=d,J=e,D?y.insertBefore(e,D):y.appendChild(e),J=null,e;if(ea)try{importScripts(d),b.completeLoad(c)}catch(m){b.onError(C("importscripts","importScripts failed for "+c+" at "+d,m,[c]))}},z&&!q.skipDataMain&&T(document.getElementsByTagName("script"),function(b){return y||(y=b.parentNode),(I=b.getAttribute("data-main"))?(s=I,q.baseUrl||(E=s.split("/"),s=E.pop(),O=E.length?E.join("/")+"/":"./",q.baseUrl=O),s=s.replace(Q,""),g.jsExtRegExp.test(s)&&(s=I),q.deps=q.deps?q.deps.concat(s):[s],!0):void 0}),define=function(b,c,d){var e,g;"string"!=typeof b&&(d=c,c=b,b=null),H(c)||(d=c,c=null),!c&&G(d)&&(c=[],d.length&&(d.toString().replace(ka,"").replace(la,function(b,d){c.push(d)}),c=(1===d.length?["require"]:["require","exports","module"]).concat(c))),M&&((e=J)||(N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),function(b){return"interactive"===b.readyState?N=b:void 0}),e=N),e&&(b||(b=e.getAttribute("data-requiremodule")),g=F[e.getAttribute("data-requirecontext")])),(g?g.defQueue:R).push([b,c,d])},define.amd={jQuery:!0},g.exec=function(b){return eval(b)},g(q)}}(this);var resourceRoot="/wp-content/themes/penguinrandomhouse/";if(require.config({baseUrl:resourceRoot+"js"}),!window.console){var noOp=function(){};console={log:noOp,warn:noOp,error:noOp}}Array.prototype.indexOf||(Array.prototype.indexOf=function(searchElement,fromIndex){var k;if(null==this)throw new TypeError('"this" is null or not defined');var O=Object(this),len=O.length>>>0;if(0===len)return-1;var n=+fromIndex||0;if(1/0===Math.abs(n)&&(n=0),n>=len)return-1;for(k=Math.max(n>=0?n:len-Math.abs(n),0);len>k;){if(k in O&&O[k]===searchElement)return k;k++}return-1}),window.View=window.View||{},function($,V){"use strict";V.Meta={flags:{excerpt:"#excerpt",tmpl:"tmpl-",lazyload:"deferred-view",railsorted:!1,infiniteScroll:"#infinite-scroll",stickynav:"#stickynav",stickyarrow:"#stickyarrow",stickyarrow_enabled:!0,no_inventory:"no-inventory",foucclass:"fouc-factor",faceting:"facet-list",tmpls_css:["product","category","series","guide","search-results","404","authors","contributor","author-events","sitehome","blog","faq","corporate","campaign-manager","newsletter-preferences"],tmpls_js:["product","category","series","guide","search-results","authors","contributor","author-events","sitehome","blog","faq","corporate","campaign-manager","newsletter-preferences","404","list","series-detail"]},tmpl:function(){for(var classes=$("#tmpl-indc").length?$("#tmpl-indc").attr("class"):"",allClasses=classes.split(" "),indicator=this.flags.tmpl,len=indicator.length,i=0,count=allClasses.length;count>i;i+=1)if(0===allClasses[i].indexOf(indicator)){var needle=allClasses[i];return needle.substring(len,needle.length)}return!1},width_cached:!1,width:function(flush){var e=window,a="inner";return"innerWidth"in window||(a="client",e=document.documentElement||document.body),this.width_cached=!this.width_cached||flush?e[a+"Width"]:this.width_cached},width_mediaquery_cached:!1,width_mediaquery:function(){return this.width_mediaquery_cached=this.width_mediaquery_cached?this.width_mediaquery_cached:$(".mq-view").width()},width_mediaquery_name:function(){this.width_mediaquery_cached=!1;var curWidth=this.width_mediaquery();return curWidth>=768?"desktop":768>curWidth&&curWidth>=480?"phablet":480>curWidth?"mobile":void 0},height_cached:!1,height:function(){return this.height_cached=this.height_cached?this.height_cached:$(window).height()},distanceScrolled:function(){return document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset||0}}}(window.jQuery,window.View),function(V){"use strict";V.Product={cached:{isbn:!1,format:!1,merchandise:!1,primaryauthors:!1,formatname:!1,categories:!1,imprint:!1,division:!1},defaulttext:"Read an Excerpt",audiotext:["Listen to a Clip"],audioformat:function(isbn){return isbn&&void 0!==excerpt_embed_html_list[isbn]?"soundcloud"===excerpt_embed_html_list[isbn].media_type:!1},productIsNotPhysical:function(){return this.audioformat(this.get("isbn"))},change:function(){var p=View.Product,isbn=p.get("isbn"),ttlImg=(p.get("format"),V.Management.images.covers(isbn));$("#coverFormat").fadeOut(100,function(){$("#coverFormat").attr("src",ttlImg),$(this).fadeIn(5),View.Meta.width()>481&&($("ul.ttl-data li a[isbn='"+isbn+"']").attr("best-seller")?$(".bs-seal").addClass("bs-show"):$(".bs-seal").removeClass("bs-show"))});var txt=this.audioformat(isbn)?this.audiotext[0]:this.defaulttext;$(".slot.product-title a.btn").text(txt),$(".slot .excerpt-button a.btn.excerpt").text(txt),$(".isbn-related").length&&$(".isbn-related").removeClass("show").addClass("hidden"),"undefined"!=typeof isbn&&$(".isbn-related."+isbn).length&&$(".isbn-related."+isbn).addClass("show").removeClass("hidden"),this.setShareAttributes(isbn,ttlImg);var sliderCount=$(".carousel").length;window.Slider&&Slider.carouselambras["slider-0"]?"Object"==typeof V.pageMeta?V.pageMeta.sliderCount<sliderCount&&(V.pageMeta.sliderCount=sliderCount,Slider.registerSliders(!1,!0)):(V.pageMeta=V.pageMeta||{},V.pageMeta.sliderCount=sliderCount,Slider.registerSliders(!1,!1)):sliderCount&&V.Utils.carouselSetup(!0)},set:function(key,value){var type=typeof key,p=View.Product;if("object"===type)for(var k in key)(p.cached[k]===!1||void 0!==p.cached[k])&&(p.cached[k]="isbn"===k||"workID"===k||"BISACs"===k?View.Utils.numbersonly(key[k]):key[k]);else if("string"===type&&(p.cached[key]===!1||void 0!==p.cached[key])){("isbn"===key||"workID"===key||"BISACs"===key)&&(value=View.Utils.numbersonly(value));var val=p.cached[key]=value?value:p.cached[key];if(!value)return val}p.page()&&(value||"object"===type)&&p.change()},get:function(key){return key?this.set(key):void 0},page:function(){return $("#tmpl-indc").length?$("#tmpl-indc").hasClass(V.Meta.flags.tmpl+"product"):!1},getFormatData:function(isbn,searchKey){return"undefined"!=typeof View.Product.formats&&"undefined"!=typeof View.Product.formats[isbn]?"undefined"!=typeof searchKey&&void 0!==typeof View.Product.formats[isbn][searchKey]?View.Product.formats[isbn][searchKey]:View.Product.formats[isbn]:null},setShareAttributes:function(isbn,shareImageUri,shareTypeId){require(["purl.min"],function(){var oUri=$.url(),shareUrl=oUri.attr("source").replace("#"+oUri.attr("fragment"),"");"/"===shareUrl.substr(-1)&&(shareUrl=shareUrl.substr(0,shareUrl.length-1)),shareUrl=shareUrl+"/"+isbn;var $shareItems=$("ul.share-items");$shareItems.attr("data-sharedimage",shareImageUri),$shareItems.attr("data-description",$(".product-about."+isbn+" .overview").children("*:not(h4)").text().substring(0,240)+"..."),$shareItems.attr("data-sharedlink",shareUrl);var strPrimaryAuthors,arrPrimaryAuthors=V.Product.get("primaryauthors").split("|");if(arrPrimaryAuthors.length<2)strPrimaryAuthors=arrPrimaryAuthors.join("");else{var lastContrib=arrPrimaryAuthors.pop();strPrimaryAuthors=arrPrimaryAuthors.join(", ")+" and "+lastContrib}if($shareItems.attr("data-authorname",strPrimaryAuthors),$shareItems.attr("data-isbn",isbn),"undefined"==typeof shareTypeId){var val="true"==V.Product.get("merchandise")?"6":"1";$shareItems.attr("data-sharetypeid",val)}else $shareItems.attr("data-sharetypeid",shareTypeId)})}}}(View),function($,V){"use strict";V.Utils={domain:function(){return"http://"+location.host},pageURLcheck:function(str){var pageUrl=location.pathname+location.hash;return pageUrl.indexOf(str)>-1?!0:!1},popoverRegistry:[],popoverViews:function(o){if(this.popoverRegistry.length>0)for(var selectorArray=this.popoverRegistry.join().split(","),i=0,count=selectorArray.length;count>i;i+=1)$(o).is(selectorArray[i])||$(selectorArray[i]).popover("hide")},browserCSSprefixes:function(){return["","-webkit-","-moz-","-ms-"]},SMS:{iPhone:function(){var userAgent=navigator.userAgent,litmus=/(iPhone)/g.test(userAgent);return litmus},Android:function(){var userAgent=navigator.userAgent,litmus=/(Android)/g.test(userAgent);return litmus}},nonRetinal:function(){var userAgent=navigator.userAgent,litmus=window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx), only screen and (min-resolution: 75.6dpcm)").matches||window.matchMedia("only screen and ( -webkit-min-device-pixel-ratio: 2 ), only screen and ( -o-min-device-pixel-ratio: 2/1 ), only screen and ( min--moz-device-pixel-ratio: 2 ), only screen and ( min-device-pixel-ratio: 2)").matches)||window.devicePixelRatio&&window.devicePixelRatio>2||/(iPad|iPhone|iPod)/g.test(userAgent)||/(Intel Mac OS X 10_10)/g.test(userAgent)&&/(Safari)/g.test(userAgent);return litmus===!1?!0:!1},cookieController:{checkCookie:function(name,getExpiration){for(var crumbs=!1,name=name+"=",ca=document.cookie.split(";"),i=0,count=ca.length;count>i;i+=1){var c=$.trim(ca[i]);if(0==c.indexOf(name))return getExpiration?c.substring(name.length,c.length)+";"+$.trim(ca[i+1]):c.substring(name.length,c.length)}return crumbs},setCookieVal:function(param,val,exdays){var current=(new Date).getTime(),offsetDate=(new Date).setTime(current+24*exdays*60*60*1e3),expires=new Date(offsetDate).toUTCString();document.cookie=param+"="+val+"; expires="+expires+"; path=/"}},transitions:function(){var b=document.body||document.documentElement,s=b.style,p="transition";if("string"==typeof s[p])return!0;var v=["Moz","webkit","Webkit","Khtml","O","ms"];p=p.charAt(0).toUpperCase()+p.substr(1);for(var i=0;i<v.length;i++)if("string"==typeof s[v[i]+p])return!0;return!1},makeSelectorFromClass:function(s,tag){return(tag?tag:"")+"."+s.split(" ").join(".")},touchUI:function(){return"ontouchstart"in document.documentElement},numbersonly:function(input){return String(input).replace(/[^0-9\.]+/g,"")},scrolling:{watcher:function(e){var x,y;"object"!=typeof e||"mousemove"!==e.type&&"touchmove"!==e.type||(x=e.clientX,y=e.clientY),this.coords.x=x,this.coords.y=y},coords:{x:!1,y:!1},toPosition:function(el,value,speed){{var el=el?el:"html, body",speed=speed?speed:500;V.Utils.touchUI()?"sweep":"sweep"}$(el).animate({scrollTop:value},speed)}},ScrollShare:{scrollEl:"undefined",animatePos:0,minYPos:0,maxYPos:0,currentPos:0,topOffset:0,init:function(options){this.scrollEl=options&&void 0!=options.el?options.el:this.scrollEl,this.minYPos=options&&options.minYPos?options.minYPos:this.minYPos,this.maxYPos=options&&options.maxYPos?options.maxYPos:this.maxYPos,this.topOffset=options&&options.topOffset?options.topOffset:this.topOffset,this.maxYPos<this.minYPos&&(this.maxYPos=this.minYPos),this.scrollEl.css({top:this.minYPos+"px"})},scroll:function(position){this.animatePos=position,this.animatePos>=this.minYPos||this.animatePos<=this.maxYPos?(this.scrollEl.css(this.animatePos<=this.minYPos?{position:"absolute",top:this.minYPos+"px"}:{position:"fixed",top:this.topOffset+"px"}),this.animatePos>=this.maxYPos+75&&this.scrollEl.css({position:"absolute",top:this.maxYPos+"px"})):this.scrollEl.css({position:"absolute",top:this.animatePos+"px"})}},asyncSlider:{variant:!1,controller:function(data,$node,type){var tmp=$node===!1?"":!1,d="also-by"===type?data.titles:data;return this.variant=type,$.each(d,function(counter){var dataObject=d[counter],type=V.Utils.asyncSlider.variant;if($node){var D=document;D.createElement("div")}var type="multiCategoryList"===type?"multiCategoryList":"multiCategory",divHtml=V.Utils.asyncSlider.factories[type](dataObject);counter+=1,$node?($node[0].innerHTML+=divHtml,counter===parseFloat(data.titles.length-1)&&V.pageMeta.sliderRegistration()):tmp+=divHtml}),$node===!1?tmp:void 0},factories:{scaffold:function(options){var D=document,classes="carousel",section=D.createElement("section");void 0!=options&&(options.classes&&"object"==typeof options.classes?(options.classes.push(classes," "),classes=options.classes.join(" ")):classes=[classes," ",options.classes].join("")),section.setAttribute("class",classes);var leftCtrol=D.createElement("a");leftCtrol.setAttribute("class","control left"),leftCtrol.setAttribute("href","javascript:;");var rightCtrol=D.createElement("a");rightCtrol.setAttribute("class","control right"),rightCtrol.setAttribute("href","javascript:;");var leftSpan=D.createElement("span"),rightSpan=D.createElement("span");leftSpan.setAttribute("class","arrow"),rightSpan.setAttribute("class","arrow"),leftSpan.innerHTML="&lsaquo;",rightSpan.innerHTML="&rsaquo;",leftCtrol.appendChild(leftSpan),rightCtrol.appendChild(rightSpan),section.appendChild(leftCtrol),section.appendChild(rightCtrol);var viewprtDiv=D.createElement("div");viewprtDiv.setAttribute("class","viewport");var sliderDiv=D.createElement("div");return sliderDiv.setAttribute("class","slider"),{section:section,viewport:viewprtDiv,slider:sliderDiv}},multiCategory:function(dataObject){var config={};return config.url="/books/"+dataObject.workId,config.txt=dataObject.title,['<div class="item"><div class="img"><a href="',config.url,'"><img alt="',dataObject.title,'" src="',V.Management.images.covers(dataObject.isbn),'?height=284&alt=cover_coming_soon.jpg" class="img-responsive" /></a></div><div class="title"><a href="',config.url,'">',config.txt,"</a></div></div>"].join("")},multiCategoryList:function(dataObject){var config={};return config.txt=dataObject.title,config.url=dataObject.url,config.bg=dataObject.background,['<div class="item"><div class="bg" style="background: transparent url(',config.bg,') 50% 0 no-repeat;background-size:cover;"></div><div class="img"><a href="',config.url,'"><img alt="',dataObject.title,'" src="',dataObject.image,'" class="img-responsive" /></a></div><div class="title"><a href="',config.url,'">',config.txt,"</a></div></div>"].join("")}}},getRelatedArticles:function(selector,dataNode,hideClass){var $relArtSelector=$(selector);if($relArtSelector.length){$relArtSelector.addClass(hideClass);var hideClass=hideClass?hideClass:"hidden",solrQuery=$relArtSelector.data(dataNode),url="/ajax/related-articles?solrquery=",foundRelatedItem=!1,doGetRelatedArticles=function(solrQuery){$.ajax({url:url+solrQuery,dataType:"json",async:!0,success:function(data){$.each(data,function(key,value){foundRelatedItem=!0;var newDiv=['<div class="related-item"><a href="',value.href,'" target="',value.target,'">',value.title,'<div class="exitLink">',value.exitLinkHref,"</div></a></div>"].join("");$relArtSelector.append(newDiv),$relArtSelector.removeClass(hideClass)})}})};doGetRelatedArticles(solrQuery)}},stickyNavSetup:function(){var $sticky=$(V.Meta.flags.stickynav);$sticky.length&&require(["bootstrap/affix.min"],function(){var config={offset:{top:$sticky.offset().top}};if($sticky.affix(config),$(".sticky-links .lnk").length>1)for(var lnks=$(".sticky-links .lnk a"),i=0,count=lnks.length;count>i;i+=1){var tall=parseFloat(lnks.eq(i).outerHeight()),mod=20>tall?.5*tall:1.5*tall;lnks.eq(i).parent("div.lnk").css("height",mod+"%")}})},StickyArrowSetup:function(){$(V.Meta.flags.stickyarrow).length&&(V.Meta.flags.stickyArrowTop=2*V.Meta.height()-$(V.Meta.flags.stickyarrow).outerHeight(!0)-15,V.Meta.flags.stickyArrowTop>$(document).height()&&(V.Meta.flags.stickyarrow_enabled=!1))},carouselSetup:function(skipRegistered,callback){V.Utils.Async.lazyload("carousel.min.css","link"),V.pageMeta=V.pageMeta||{},V.pageMeta.sliderCount=$(".carousel").length,this.touchUI()&&require(["./swipe.min"]),require(["./carouselambra.min"],function(){Slider.registerSliders(!1,skipRegistered,callback)})},seeMoreInstantiated:!1,seeMoreSetup:function(options){if(!(this instanceof View.Utils.seeMoreSetup))return this.seeMoreInstantiated=new View.Utils.seeMoreSetup(options);this.instantiated=!0,this.threshold=void 0!=options&&options.threshold?options.threshold:280,this.$seemore=$(".seemoreenable"),this.viewCtrl=".more-link-wrap";var index=void 0!=options&&options.index?options.index:!1;this.iterate(index)},Async:{path:function(type){var path=!1,utils=V.Utils;return"script"===type&&(path=utils.domain()+resourceRoot+"js/"),"link"===type&&(path=utils.domain()+resourceRoot+"css/"),path},payloads:function(mod){var num,winWide=V.Meta.width();return num=501>winWide?10:winWide>500&&601>winWide?10:winWide>600&&769>winWide?10:winWide>768&&992>winWide?20:20,mod?0>mod?num-mod:num+mod:num},lazyload:function(file,type,opts){if(file&&type){var d=document,source=opts&&opts.href?file:V.Utils.Async.path(type),n=d.createElement(type),f="link"===type?d.getElementsByTagName("head")[0]:d.getElementsByTagName(type)[0];if("script"===type&&(n.async=!0,n.src=source+file),"link"===type){if(null!==document.getElementById(file))return;n.media="only x",n.rel="stylesheet",n.type="text/css",n.id=file,n.href=opts&&opts.href?file:source+file}f.appendChild(n),"link"===type&&(n.media=opts&&opts.media?opts.media:"all")}return this}},GetShortenedUrl:function(url,callback,skip){if("undefined"!=typeof skip&&skip===!0)return callback.apply(this,[url]),!1;var encodedUrl=encodeURIComponent(url),serviceUrl="/ajax/shorten/";$.ajax({type:"GET",url:serviceUrl,dataType:"json",data:{url:encodedUrl}}).done(function(data,textStatus){"undefined"!=typeof data&&null!==data&&data.StatusCode<1?callback.apply(this,[data.ShortenedUrl]):(console.log("Error with url shorten request"),console.log(textStatus))}).fail(function(jqXHR,textStatus,errorThrown){console.log("Error getting shortened url"),console.log(jqXHR+" "+textStatus+" "+errorThrown)})},StripHtmlTags:function(html){var tmp=document.createElement("div");tmp.innerHTML=html;var returnVal=tmp.textContent||tmp.innerText;return returnVal},IsNullOrUndefined:function(v){return"undefined"==typeof v||null===v?!0:!1},GenerateRandomId:function(pattern){var randomId=pattern.replace(/[xy]/g,function(c){var r=16*Math.random()|0,v="x"==c?r:3&r|8;return v.toString(16)});return randomId},ToggleSideNav:function(show,useTransition){useTransition&&($(".page-wrap").removeClass("notransition"),$("#side-nav").removeClass("notransition"),$(".mobile-nav").removeClass("notransition")),show?($(".main-nav").appendTo("#side-nav"),$("#social-nav").appendTo("#side-nav"),$(".page-wrap").addClass("open"),$("#side-nav").addClass("open"),$(".mobile-nav").addClass("open"),$("#hamburger").removeClass("open-menu").addClass("close-menu"),$("#hamburger i.fa").removeClass("fa-bars").addClass("fa-times")):($(".desktop.container .row").after($(".main-nav")),$("#toolbar-nav").prepend($("#social-nav")),$(".page-wrap").removeClass("open"),$("#side-nav").removeClass("open"),$(".mobile-nav").removeClass("open"),$("#hamburger").addClass("open-menu").removeClass("close-menu"),$("#hamburger i.fa").removeClass("fa-times").addClass("fa-bars"))
},ToggleMobileSearch:function(show,useTransition){useTransition&&($(".page-wrap").removeClass("notransition"),$("#side-nav").removeClass("notransition"),$(".mobile-nav").removeClass("notransition")),show?($("div.search-controls").appendTo("#mobile-searchbox"),$("#search-box").focus(),$("#mobile-searchbox").addClass("open"),$(".page-wrap").addClass("search-open"),$("#search").addClass("close-menu"),$("#search i.fa").removeClass("fa-search").addClass("fa-times")):($("div.search-controls").appendTo(".desktop .search-box"),$("#mobile-searchbox").removeClass("open"),$(".page-wrap").removeClass("search-open"),$("#search").removeClass("close-menu"),$("#search i.fa").removeClass("fa-times").addClass("fa-search"))},UpdateCartItemCount:function(itemCount){(void 0===typeof itemCount||isNaN(itemCount))&&(itemCount=V.Utils.cookieController.checkCookie("NumberofCartItems")),$(".cart .item-count").text(itemCount?itemCount:"0")},PlaceholderIsSupported:function(){var test=document.createElement("input");return"placeholder"in test}},View.Utils.seeMoreSetup.prototype.display=function(index,display){if(index>-1){var el=this.$seemore.eq(index);display?(el.removeClass("flow"),el.find(this.viewCtrl).removeClass("decommission")):(el.addClass("flow"),el.find(this.viewCtrl).addClass("decommission"))}},View.Utils.seeMoreSetup.prototype.iterate=function(index){for(var i=index?index:0,count=index?index+1:this.$seemore.length;count>i;i+=1)this.id="seemore-"+i,this.$seemore.eq(i).attr("id",this.id),this.setup(i)},View.Utils.seeMoreSetup.prototype.contributorFunctionality=function(){return"object"==typeof View.pageMeta&&"function"==typeof View.pageMeta.viewCtrlManagement&&"object"==typeof View.pageMeta.custom&&"function"==typeof V.pageMeta.custom.inventory},View.Utils.seeMoreSetup.prototype.controller=function(obj,async){var parentObj=obj.closest(".seemoreenable"),notContribInventory=!0;if("inprogress"===parentObj.queue("fx")){{setTimeout(View.Utils.seeMoreSetup.prototype.controller(obj,async),200)}return!1}View.Contributor.page()&&parentObj.hasClass("contributor-books")&&this.contributorFunctionality()&&View.pageMeta.custom.inventory()&&(notContribInventory=!1),notContribInventory&&(obj.toggleClass("collapsed"),obj.parent().toggleClass("opened"));var naturalHeight=parseFloat(parentObj.attr("target-height")),heightFold=parseFloat(parentObj.attr("height-fold")),txt=obj.hasClass("collapsed")?"See More":"See Less";obj.text(txt);var opened=parentObj.hasClass("opened"),toHeight=opened?heightFold-20+"px":100===naturalHeight?"100%":naturalHeight+obj.outerHeight(!0)+"px";async&&(toHeight="100%");var speed=naturalHeight>600?naturalHeight:500,duration=opened?600:speed;View.Analytics.Global.SeeMore(parentObj,!opened),parentObj.animate({height:toHeight},duration,function(){(opened&&100===naturalHeight||async)&&parentObj.attr("target-height",parentObj.outerHeight(!0)+"px"),(!async||async&&View.Utils.seeMoreInstantiated.contributorFunctionality()&&!View.pageMeta.custom.inventory())&&parentObj.toggleClass("opened").dequeue(),opened&&V.Management.contentInView(".footer-wrap",!0)&&V.Utils.scrolling.toPosition(!1,V.Utils.scrolling.coords.y,333)})},View.Utils.seeMoreSetup.prototype.setup=function(index){for(var winWide=V.Meta.width(),buffer=20,totalBookCount=V.Contributor.page()?$("#tmpl-indc").attr("title-count"):0,i=index?index:0,count=index?index+1:this.$seemore.length;count>i;i+=1){var obj=this.$seemore.eq(i),moreLnk=obj.children(".more-link-wrap");obj.css("height")&&obj.css("height","100%");var sum=600,customHeight=!1;if(V.Contributor.page())if($(obj).hasClass("contributor-events")){var eventEls=obj.find(".event-details"),maxShow=winWide>=600?2:1,eventHeight=0;if(eventEls.length>maxShow){customHeight=!0,sum=76;for(var e=0;e<eventEls.length&&maxShow>e;e++)eventHeight=parseFloat(eventEls.eq(e).outerHeight(!0)),sum+=eventHeight}else this.display(i,!1)}else{var bookEls=obj.find(".carousel .slider .item"),bookElsLength=bookEls.length;if(bookElsLength){if(bookElsLength>3){customHeight=!0;for(var tallA=0,tallB=0,slides=0,count=bookElsLength>6?6:bookElsLength;count>slides;slides+=1){var elHeight=parseFloat(bookEls.eq(slides).css("height")?bookEls.eq(slides).css("height"):bookEls.eq(slides).outerHeight(!0));tallB=elHeight>=tallA?tallA:tallA>elHeight&&elHeight>tallB?elHeight:tallB,tallA=elHeight>tallA?elHeight:tallA}7>totalBookCount&&winWide>768&&this.display(i,!1)}else this.display(i,!1);obj.hasClass("contributor-books")&&winWide>768?sum=(bookElsLength>3?tallA+tallB+buffer:tallA)+100:obj.hasClass("contributor-books")&&769>winWide&&(sum=tallA+buffer+100)}}if(obj.hasClass("opened")&&obj.toggleClass("opened"),moreLnk.length){var ctrl=moreLnk.children("button");ctrl.hasClass("collapsed")||(ctrl.addClass("collapsed"),ctrl.text("See More")),moreLnk.hasClass("opened")||moreLnk.toggleClass("opened")}var heightFold=customHeight?sum:this.threshold,targetHeight=obj.outerHeight(!0);if(obj.attr("height-fold",heightFold),"none"===obj.css("display")&&(obj.css("display","block"),targetHeight=obj.outerHeight(!0),obj.css("display","none")),!obj.hasClass("flow")&&(targetHeight>heightFold||obj.hasClass("contributor-books")&&winWide>769)){if(!moreLnk.length){var D=document,div=D.createElement("div"),bttn=D.createElement("button"),txt=D.createTextNode("See More");div.setAttribute("class","more-link-wrap opened"),bttn.setAttribute("type","button"),bttn.setAttribute("class","btn btn-link more collapsed"),bttn.appendChild(txt),div.appendChild(bttn),obj[0].appendChild(div)}targetHeight=obj.hasClass("contributor-books")&&winWide>769?targetHeight>heightFold?targetHeight:"100%":targetHeight,obj.css({height:heightFold-buffer+"px"}),obj.attr("target-height",targetHeight)}else moreLnk.length&&heightFold>targetHeight&&moreLnk.remove()}}}(window.jQuery,window.View),function($,V){"use strict";V.Management={registry:[{slot:"body .slot .carousel",depth:0},{slot:"body .inner-facade .carousel",depth:2},{slot:"body .products-category .carousel",depth:0},{slot:"body .authors-category .carousel",depth:0},{slot:"body .products-category-grid",depth:0},{slot:"body .discovery-grid",depth:0},{slot:"body .authors-category-grid",depth:0},{slot:"body .container .deferred-view"}],scrollViewThreshold:"100",contentInView:function(el,top){if(!$(el).length)return!1;{var viewTop=V.Meta.distanceScrolled(),viewBottom=viewTop+V.Meta.height(),elTop=parseFloat($(el).offset().top),elBottom=elTop+parseFloat($(el).height());V.Management.scrollViewThreshold}return top?viewBottom>=elTop:viewBottom>=elBottom&&elTop>=viewTop},transitionConfig:function(selector,index,flag){for(var duration=flag===!1?"none":.01*V.Meta.width()*.175+"s",prefixes=V.Utils.browserCSSprefixes(),i=0,count=prefixes.length;count>i;i+=1){{prefixes[i]+"transition-duration"}isNaN(index)?$(selector).css({transition:duration}):$(selector+":eq("+index+")").css({transition:duration})}},images:{base:"http://images.randomhouse.com",covers:function(isbn){return[this.base,"/cover/",isbn].join("")},authors:function(authorId){return[this.base,"/author/",authorId].join("")},lazyload:function(){for(var tmp=V.Management,attr="data-src",i=0,count=tmp.registry.length;count>i;i+=1){var check=tmp.registry[i].slot?tmp.registry[i].slot:!1;if($(check).length>0)for(var images=$(tmp.registry[i].slot+" img"),j=tmp.registry[i].depth||0,count2=images.length;count2>j;j+=1){var $thisImg=$(images[j]),cachedSrc=$thisImg.attr(attr),lazy=V.Meta.flags.lazyload;cachedSrc&&($thisImg.hasClass(lazy)||$(check).hasClass(lazy))&&($thisImg.attr("src",$thisImg.attr(attr)).attr(attr,"").removeClass(lazy).removeAttr(attr),""===$thisImg.attr("class")?$thisImg.removeAttr("class"):"")}}},on:{methods:{assign:function(){V.Management.images.lazyload()}}}}}}(window.jQuery,window.View),function($,V){"use strict";V.Contributor={page:function(){return $("#tmpl-indc").length?$("#tmpl-indc").hasClass(V.Meta.flags.tmpl+"contributor"):!1}}}(window.jQuery,window.View),function(V,$){"use strict";V.Analytics={Global:{SeeMore:function(parentObject,bSeeMore){var slotheader=parentObject.find(".slot-header"),module_type="";slotheader.length<1&&(slotheader=parentObject.prev(".slot-header")),module_type=$(slotheader).clone().children().remove().end().text(),utag.link({event_type:"page_module",module_type:$.trim(module_type),module_variation:bSeeMore?"See More":"See Less"})},Carousel:function(event){event.stopPropagation();var event_type="page_module",carousel_item_number=$(event.target).parents("div.viewport").find($(event.target).parents("div.item")).index()+1,module_type=$.trim($(event.target).parents(".carousel").children("h2, h4").text()).toLowerCase(),module_variation="",callUtag=!0;""==module_type&&(module_type=$.trim($(event.target).parents(".carousel").prev("h2, h4").clone().children().remove().end().text()).toLowerCase()),$(event.target).parents(".img").length?module_variation="Cover | P"+carousel_item_number:$(event.target).parents(".title").length?module_variation="Title | P"+carousel_item_number:$(event.target).parents(".contributor").length?module_variation="Author | P"+carousel_item_number:callUtag=!1,callUtag&&utag.link({event_type:event_type,module_type:module_type,module_variation:module_variation})},RelatedArticles:function(event){event.stopPropagation();var event_type="page_module",module_type="Related Articles",article_item_number=$(event.target).parents(".articles").find($(event.target).parents("div.related-item")).index(),module_variation="Link"+article_item_number;article_item_number>-1&&utag.link({event_type:event_type,module_type:module_type,module_variation:module_variation})},CategoryTiles:function(){var event_type="page_module",module_type="Category Tiles",module_variation=$.trim($(this).find("div span").text());"search-results"===View.Meta.tmpl()&&(module_type="Discover More Books"),utag.link({event_type:event_type,module_type:module_type,module_variation:module_variation})},NewsletterSubscribe:function(responseData){if(responseData&&responseData.signupClient&&responseData.signupClient.Subs){for(var siteId,progId,arrSubs=responseData.signupClient.Subs.split(":"),matched=!1,signups=[],pid=responseData.meta.Pid,i=0;i<arrSubs.length;i++)if(arrSubs[i]=arrSubs[i].split(",").slice(0,2),siteId=arrSubs[i][0],progId=arrSubs[i][1],matched=!1,responseData.signupClient.Prefs){for(var arrPrefs=responseData.signupClient.Prefs.split(":"),y=0;y<arrPrefs.length;y++)arrPrefs[y]=arrPrefs[y].split(","),arrPrefs[y][0]===siteId&&arrPrefs[y][1]===progId&&(signups.push(arrPrefs[y].join(",")),matched=!0);matched||signups.push(siteId+","+progId)}else signups.push(siteId+","+progId);signups=signups.join(";").replace(/,/g,"|");var utobj={pid:pid,event_type:"newsletter_signup",newsletter_name:signups};if("undefined"!=typeof utag_data){var val=utag_data.product_isbn;"undefined"!=typeof val&&val.length>0&&(utobj.product_isbn=val),val=utag_data.product_author,"undefined"!=typeof val&&val.length>0&&(utobj.product_author=val),val=utag_data.product_format,"undefined"!=typeof val&&val.length>0&&(utobj.product_format=val),val=utag_data.product_work_id,"undefined"!=typeof val&&val.length>0&&(utobj.product_work_id=val),val=utag_data.product_category,"undefined"!=typeof val&&val.length>0&&(utobj.product_category=val)}utag.link(utobj)}}}},$(document).ready(function(){"sitehome"!==View.Meta.tmpl()&&$(".viewport .item").on("click",function(event){V.Analytics.Global.Carousel(event)}),$(".contributor-related.articles").on("click",function(event){V.Analytics.Global.RelatedArticles(event)}),$(".products-category .cat-box a").on("click",V.Analytics.Global.CategoryTiles)})}(View,jQuery),function(V,$){!function($,sr){var debounce=function(func,threshold,now){var timeout;return function(){function delayed(){now||func.apply(obj,args),timeout=null}var obj=this,args=arguments;timeout?clearTimeout(timeout):now&&func.apply(obj,args),timeout=setTimeout(delayed,threshold||300)}};$.fn[sr]=function(fn,threshold,now){return fn?this.bind("resize",debounce(fn,threshold,now)):this.trigger(sr)}}($,"smartresize"),$(document).ready(function(){var V=View,M=V.Meta,AsyncImgMethods=V.Management.images,lazyLoader=V.Utils.Async.lazyload;M.width(),V.Utils.SMS.iPhone()||V.Utils.SMS.Android()||!$("a.sms-share").length||$("a.sms-share").parent("li").remove();var cFunctions=V.Utils.cookieController,sessionTrack=cFunctions.checkCookie("prh_survey"),cookieCriteria=3;if(sessionTrack){var val=sessionTrack.split("expires=")[0],count=parseInt(val);cookieCriteria>count&&cFunctions.setCookieVal("prh_survey",count+1,1,"prh_survey")}else cFunctions.setCookieVal("prh_survey",1,1,"prh_survey");var noFlyin=cFunctions.checkCookie("no-flyin-one-day");if("undefined"!=typeof page_flyins&&page_flyins.length>0&&!noFlyin)for(var i=0;i<page_flyins.length;i+=1){var hasCk=cFunctions.checkCookie("prh_flyin_"+page_flyins[i]);if(!hasCk){require(["modal-survey.min"]),M.flyin_id=page_flyins[i];break}}V.Utils.getRelatedArticles(".product-related.articles","query");var tmpl=M.tmpl();$(".carousel").length&&($(".carousel").addClass("load-state"),lazyLoader("carousel.min.css","link"),V.Utils.touchUI()&&require(["./swipe.min"]));var onLoadImagesMethods=AsyncImgMethods.on.methods;for(var m in onLoadImagesMethods)"function"==typeof onLoadImagesMethods[m]?onLoadImagesMethods[m].call():"";tmpl&&tmpl.length>0&&M.flags.tmpls_js.indexOf(tmpl)>-1?require(["./"+tmpl+".min"],function(){setTimeout(function(){$("html").removeClass(View.Meta.flags.foucclass)},150)}):$("html").removeClass(M.flags.foucclass),$(".seemoreenable").length&&$(".seemoreenable").on("click","button.more",function(event){var obj=$(this),parentObj=obj.closest(".seemoreenable"),vU=(V.Meta,V.Utils);return obj.hasClass("collapsed")&&(vU.scrolling.coords.y=obj.offset().top-100-parentObj.height(),V.Contributor.page()&&parentObj.hasClass("contributor-books")&&View.Utils.seeMoreInstantiated.contributorFunctionality()&&V.pageMeta.custom.inventory())?void V.pageMeta.viewCtrlManagement(event):void V.Utils.seeMoreInstantiated.controller(obj)}),$("div.share-links").length>0&&require(["./social-share.min"]),$(".newsletter-signup").length>0&&(require(["./newsletter-form.min"]),lazyLoader("newsletter-form.min.css","link")),$(M.flags.infiniteScroll).length>0&&tmpl&&require(["purl.min","./infinite-scroll.min"],function(){View.InfiniteScroll.init(tmpl)}),V.Utils.PlaceholderIsSupported()||require(["lib/jquery.html5-placeholder-shim.min"]),$("#hamburger").on("click",function(){View.Utils.ToggleSideNav($(this).hasClass("open-menu"),!0)}),$("#mobile-nav #search").on("click",function(){View.Utils.ToggleMobileSearch(!$(this).hasClass("close-menu"),!0)}),$(V.Meta.flags.stickyarrow).length&&$(V.Meta.flags.stickyarrow).on("click",function(event){event.preventDefault(),V.Utils.scrolling.toPosition(!1,0,333)}),V.Utils.UpdateCartItemCount(),V.Utils.scrolling.toPosition(!1,V.Utils.scrolling.coords.y,333),$(window).smartresize(function(){var tmp=M.width_cached,width=M.width(!0);V.Utils.popoverViews();var seemoreHandler=function(){$(".seemoreenable").length&&(V.Utils.seeMoreInstantiated?V.Utils.seeMoreInstantiated.iterate():V.Utils.seeMoreInstantiated=V.Utils.seeMoreSetup()),V.Contributor.page()&&V.pageMeta.bgManagement()};if(tmp&&tmp!==width)if(window.Slider&&Slider.carouselambras["slider-0"]){var contributorCase=V.Contributor.page(),deferred=contributorCase?seemoreHandler:!1;V.Utils.carouselSetup(!1,deferred),contributorCase||seemoreHandler()}else seemoreHandler();$(".page-wrap").addClass("notransition"),$("#side-nav").addClass("notransition"),$(".mobile-nav").addClass("notransition"),$(".main-header .mobile").is(":visible")||(View.Utils.ToggleSideNav(!1,!1),View.Utils.ToggleMobileSearch(!1,!1)),View.Utils.StickyArrowSetup()},50,!1)}),$(window).load(function(){var V=View,caseContributor=V.Contributor.page();if($(".carousel").length){var afterInit=!1;caseContributor&&(afterInit=function(){View.Utils.seeMoreInstantiated=View.Utils.seeMoreSetup(),View.Utils.stickyNavSetup(),View.pageMeta.bgManagement()}),V.Utils.carouselSetup(!1,afterInit)}if($(".seemoreenable").length)if(caseContributor&&$(".carousel").length);else{setTimeout(function(){var options={};options.threshold="list"===V.Meta.tmpl()?180:!1,V.Utils.seeMoreInstantiated=V.Utils.seeMoreSetup(options)},150)}caseContributor||V.Utils.stickyNavSetup(),V.Utils.StickyArrowSetup(),$(".cat-wrap").length&&require(["category-tiling.min"])}),$(document).on("touchstart click",function(event){var t=event.target;$(".popover").length>0&&!$(t).closest(".popover").length&&!$(t).is("button[rel=popover]")&&!$(t).hasClass("product-format-mobile-link")&&View.Utils.popoverViews(),$(t).closest("#side-nav").length||$(t).closest("#hamburger").length||!$(".page-wrap").hasClass("open")||View.Utils.ToggleSideNav(!1,!0),$(t).closest("#mobile-searchbox").length||$(t).closest("#search").length||!$("#mobile-searchbox").hasClass("open")||View.Utils.ToggleMobileSearch(!1,!0)}),$(document).keyup(function(e){27===e.keyCode&&View.Utils.ToggleSideNav(!1,!0)}),$(document).on("scroll",function(){V.Meta.flags.stickyarrow_enabled&&($(window).scrollTop()>=V.Meta.flags.stickyArrowTop?$(V.Meta.flags.stickyarrow).fadeIn(200):$(V.Meta.flags.stickyarrow).fadeOut(200))})}(View,window.jQuery),function(V,$){require(["purl.min"]),V.Meta.sitesearch={typeAheadTimer:0,field:"input#search-box",submt:"input.search-submit",placeholder:"SEARCH BY TITLE, AUTHOR, OR KEYWORD",form:"header > form.search-form",searchcontainer:".search-typeahead-container",timeout:3500,searchformModClass:"active-search",minTypeAheadLength:3,hideTypeAhead:function(){$(this.searchcontainer).length>0&&$(V.Meta.sitesearch.field).popover("hide")}},require(["bootstrap/tooltip.min"],function(){var popovers={search:{selector:V.Meta.sitesearch.field,html:!0,trigger:"manual",placement:"bottom",content:"Loading..."}};require(["bootstrap/popover.min"],function(){for(var p in popovers){var popover={};for(var config in popovers[p])"selector"!==config&&(popover[config]=popovers[p][config]),"trigger"!==config||"click"!==popover[config]&&"manual"!==popover[config]||V.Utils.popoverRegistry.push(popovers[p].selector);$(popovers[p].selector).popover(popover)}V.Utils.popoverRegistry.length>0&&$(V.Utils.popoverRegistry.join()).on("click",function(){View.Utils.popoverViews(this)})})}),$.fn.selectRange=function(start,end){return end||(end=start),this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(start,end);else if(this.createTextRange){var range=this.createTextRange();range.collapse(!0),range.moveEnd("character",end),range.moveStart("character",start),range.select()}})},$.fn.DynamicDataLoader=function(options){function getResultsHTML(json){for(var resultType,arrResults,regex,match,host,resultWrap='<div class="search-typeahead-container">{0}</div>',resultTemplate='<div class="result-group {0}"><a href="{1}" target="{2}" class="result">{3}<div class="result-item">{4}</div></a></div>',resultText="",resultOut="",output="",i=0;i<json.data.length;i++){resultType=json.data[i],arrResults=resultType.results;for(var y=0;y<arrResults.length&&(resultText=View.Meta.width_mediaquery()<768?arrResults[y]["short-text"]:arrResults[y].text,regex=new RegExp(json.query,"gi"),match=resultText.match(regex),!View.Utils.IsNullOrUndefined(match)&&match.length>0&&(resultText=resultText.replace(regex,'<span class="highlight">'+match[0]+"</span>")),resultOut=resultTemplate.replace("{1}",arrResults[y].href).replace("{4}",resultText),resultOut=0==y?resultOut.replace("{3}",'<div class="result-type">'+resultType["result-type"]+"</div>"):resultOut.replace("{3}",""),host=$.url(arrResults[y].href).attr("host").toLowerCase(),resultOut=""!==host&&host.indexOf("randomhouse.com")<0?resultOut.replace("{2}","_blank"):resultOut.replace("{2}","_self"),resultOut="recommended"==resultType["result-type"]?resultOut.replace("{0}","recommended"):resultOut.replace("{0}",""),!(View.Meta.width_mediaquery()<768&&y>0));y++)output+=resultOut}return output=resultWrap.replace("{0}",output)}function success(requestData,data){if(data.length<1||$(V.Meta.sitesearch.field).val().length<V.Meta.sitesearch.minTypeAheadLength)return void V.Meta.sitesearch.hideTypeAhead();try{var d=$.parseJSON(data);if(!d||"object"!=typeof d||null===d)throw"Cannot parse JSON";$(".search-controls .popover").hasClass("in")||$(V.Meta.sitesearch.field).popover("show");var output=getResultsHTML(d);$(V.Meta.sitesearch.field).attr("data-content",output),$(".search-controls .popover .popover-content").html(output)}catch(e){return void console.log("Error parsing predictive search json")}}function error(xhr){window.console&&window.console.log&&console.log("Error! Status = "+xhr.status+" Message = "+error)}var settings=$.extend({getUrl:"",enableResultCache:!0},options);return settings.getUrl.indexOf("?")<0&&(settings.getUrl+="?"),{makeRequest:function(requestData){$.ajax({type:"GET",url:settings.getUrl+"&"+ +new Date,mimeType:"application/json",dataType:"html",data:requestData,success:function(data){success(requestData,data)},error:error,headers:requestData,global:!1})}}},$.fn.DynamicTypeAhead=function(options){function typeaheadKeyProcessor(inputField,maxCount,keyCode){var bIsControlKey=!1,currentSelected="undefined"==typeof $(inputField).attr("data-currentselected")?"-1":parseInt($(inputField).attr("data-currentselected"));return maxCount=$(".popover-content .result-group").length,$(".popover-content .result-group").removeClass("selected"),38===keyCode&&(bIsControlKey=!0,currentSelected-=1,0>currentSelected&&(currentSelected=0),$(inputField).selectRange($(inputField).val().length)),40===keyCode&&(bIsControlKey=!0,currentSelected+=1,currentSelected>=maxCount-1&&(currentSelected=maxCount-1)),27===keyCode&&(bIsControlKey=!0,currentSelected=-1),13===keyCode&&(-1!==currentSelected&&(bIsControlKey=!0,$(inputField).val($(".popover-content .result-group").eq(currentSelected).find(".result-item").text()),currentSelected=-1),V.Meta.sitesearch.hideTypeAhead()),$(inputField).data("currentSelected",currentSelected),bIsControlKey?($(inputField).attr("data-currentselected",currentSelected),$(".popover-content .result-group").eq(currentSelected).addClass("selected"),!1):($(inputField).attr("data-currentselected","-1"),$(".popover-content .result-group").removeClass("selected"),!0)}var resultElement=this,settings=$.extend({textInputElement:null,searchButtonElement:null,getUrl:"",searchType:0,selectorForTitle:"span.section-title",minTypeAheadLength:V.Meta.sitesearch.minTypeAheadLength,onSubmit:null,onSelect:function(selection){var datalink=$(selection).data("link");return"undefined"!=typeof datalink&&datalink.length>0&&(document.location.href=datalink),!0}},options);settings.textInputElement.blur(function(){resultElement.fadeOut()}),settings.searchButtonElement.click(function(){return settings.onSubmit?settings.onSubmit(settings.textInputElement.val()):!0}),settings.textInputElement.keydown(function(event){return 13===event.keyCode?!1:!0});var typeaheadRequester=resultElement.DynamicDataLoader({getUrl:settings.getUrl,onEmpty:function(){resultElement.empty(),V.Meta.sitesearch.hideTypeAhead()},onFailure:function(){resultElement.empty(),V.Meta.sitesearch.hideTypeAhead()},onPreProcess:function(data){return data.Results},onComplete:function(){var resultItems=resultElement.find("li");resultItems.length>0&&(resultElement.show(),resultItems.bind("click",function(){settings.onSelect&&settings.onSelect($(this)),settings.textInputElement.val($(this).children(settings.selectorForTitle).text()),V.Meta.sitesearch.hideTypeAhead(),settings.textInputElement.focus()}))},successTemplateId:"TypeAheadTemplate"}),typeheadMakeRequest=function(requestData){typeaheadRequester.makeRequest(requestData)};settings.textInputElement.keyup(function(event){var runSearch=typeaheadKeyProcessor(this,resultElement.find("li").length,event.keyCode);runSearch&&13!==event.keyCode&&($(this).val().length>=settings.minTypeAheadLength?(clearTimeout(V.Meta.sitesearch.typeAheadTimer),V.Meta.sitesearch.typeAheadTimer=setTimeout(function(){var requestData={q:settings.textInputElement.val(),search:settings.searchType};typeheadMakeRequest(requestData)},50)):V.Meta.sitesearch.hideTypeAhead()),runSearch&&13===event.keyCode&&settings.onSubmit&&settings.onSubmit(settings.textInputElement.val()),27===event.keyCode&&V.Meta.sitesearch.hideTypeAhead()})},$(document).ready(function(){var s=V.Meta.sitesearch;$(s.field).attr({autocomplete:"off",placeholder:s.placeholder}),$(s.form).on("focusout focusin",function(event){function check(){"off"==state&&($(s.field).attr({value:""}),s.hideTypeAhead())}var e=event.type,state="off";if("focusin"==e&&(state="on",t&&clearInterval(t)),"focusout"==e)var t=setTimeout(function(){check()},s.timeout)}),$(".row .search-form.inline").on("submit",function(e){e.preventDefault();var value=$(".row .search-form.inline .search-inline").val(),seoFriendly=value.toLowerCase().replace(/ +/g,"-").replace(/[0-9]/g,"").replace(/[^a-z0-9-_]/g,"").trim();document.location.href="/search/"+seoFriendly+"?q="+encodeURIComponent(value)}),$.fn.DynamicTypeAhead({textInputElement:$(V.Meta.sitesearch.field),searchButtonElement:$(V.Meta.sitesearch.submt),getUrl:"/wp-content/themes/penguinrandomhouse/predictive-search.php",onSubmit:function(value){if(""!==value&&value!==V.Meta.sitesearch.placeholder){var seoFriendly=value.toLowerCase().replace(/ +/g,"-").replace(/[^a-z0-9-_]/g,"").trim();document.location.href="/search/"+seoFriendly+"?q="+encodeURIComponent(value)}return!1},searchType:"All"}),$(document).on("click",".popover .search-typeahead-container .result-group a",function(){utag.link({internal_quick_select:$("#search-box").val()})})})}(window.View,window.jQuery);