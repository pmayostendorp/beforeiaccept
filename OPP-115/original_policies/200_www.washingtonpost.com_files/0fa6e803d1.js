(function($){$.fn.jqm=function(options){return this.each(function(){var e=$(this),jqm=e.data("jqm")||$.extend({ID:I++},$.jqm.params),o=$.extend(jqm,options);e.data("jqm",o).addClass("jqm-init");o.trigger&&e.jqmAddTrigger(o.trigger)})};$.fn.jqmAddTrigger=function(trigger){return this.each(function(){if(!addTrigger($(this),"jqmShow",trigger))err("jqmAddTrigger must be called on initialized modals")})};$.fn.jqmAddClose=function(trigger){return this.each(function(){if(!addTrigger($(this),"jqmHide",trigger))err("jqmAddClose must be called on initialized modals")})};
$.fn.jqmShow=function(trigger){return this.each(function(){!this._jqmShown&&show($(this),trigger)})};$.fn.jqmHide=function(trigger){return this.each(function(){this._jqmShown&&hide($(this),trigger)})};var err=function(msg){if(window.console&&window.console.error)window.console.error(msg)},show=function(e,t){var o=e.data("jqm"),t=t||window.event,z=parseInt(e.css("z-index")),z=z>0?z:3E3,v=$("\x3cdiv\x3e\x3c/div\x3e").addClass(o.overlayClass).css({height:"100%",width:"100%",position:"fixed",left:0,top:0,
"z-index":z-1,opacity:o.overlay/100}),h={w:e,c:o,o:v,t:t};e.css("z-index",z);if(o.ajax){var target=o.target||e,url=o.ajax;target=typeof target=="string"?$(target,e):$(target);if(url.substr(0,1)=="@")url=$(t).attr(url.substring(1));target.html(o.ajaxText).load(url,function(){o.onLoad&&o.onLoad.call(this,h);open(h)})}else open(h)},hide=function(e,t){var o=e.data("jqm"),t=t||window.event,h={w:e,c:o,o:e.data("jqmv"),t:t};close(h)},onShow=function(hash){if(hash.c.overlay>0)hash.o.prependTo("body");hash.w.show();
$.jqm.focusFunc(hash.w);return true},onHide=function(hash){hash.w.hide()&&hash.o&&hash.o.remove();return true},addTrigger=function(e,key,trigger){var jqm=e.data("jqm");if(!e.data("jqm"))return false;return $(trigger).each(function(){this[key]=this[key]||[];if($.inArray(jqm.ID,this[key])<0){this[key].push(jqm.ID);$(this).click(function(){var trigger=this;e[key](this);return false})}})},open=function(h){var e=h.w,v=h.o,o=h.c;if(o.onShow(h)!==false){e[0]._jqmShown=true;if(o.modal){!A[0]&&F("bind");A.push(e)}else e.jqmAddClose(v);
o.closeClass&&e.jqmAddClose($("."+o.closeClass,e));o.toTop&&v&&e.before('\x3cspan id\x3d"jqmP'+o.ID+'"\x3e\x3c/span\x3e').insertAfter(v);e.data("jqmv",v)}},close=function(h){var e=h.w,v=h.o,o=h.c;if(o.onHide(h)!==false){e[0]._jqmShown=false;if(o.modal){A.pop();!A[0]&&F("unbind")}o.toTop&&v&&$("#jqmP"+o.ID).after(e).remove()}},F=function(t){$(document)[t]("keypress keydown mousedown",X)},X=function(e){var modal=$(e.target).data("jqm")||$(e.target).parents(".jqm-init:first").data("jqm"),activeModal=
A[A.length-1].data("jqm");if(modal&&modal.ID==activeModal.ID)return true;return $.jqm.focusFunc(activeModal)},I=0,A=[];$.jqm={params:{overlay:50,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:false,target:false,ajaxText:"",modal:false,toTop:false,onShow:onShow,onHide:onHide,onLoad:false},focusFunc:function(e){$(":input:visible:first",e).focus();return false}}})(jQuery);
jQuery.ui||function($){$.ui={version:"1.8",plugin:{add:function(module,option,set){var proto=$.ui[module].prototype;for(var i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]])}},call:function(instance,name,args){var set=instance.plugins[name];if(!set||!instance.element[0].parentNode)return;for(var i=0;i<set.length;i++)if(instance.options[set[i][0]])set[i][1].apply(instance.element,args)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&
16:a!==b&&a.contains(b)},hasScroll:function(el,a){if($(el).css("overflow")=="hidden")return false;var scroll=a&&a=="left"?"scrollLeft":"scrollTop",has=false;if(el[scroll]>0)return true;el[scroll]=1;has=el[scroll]>0;el[scroll]=0;return has},isOverAxis:function(x,reference,size){return x>reference&&x<reference+size},isOver:function(y,x,top,left,height,width){return $.ui.isOverAxis(y,top,height)&&$.ui.isOverAxis(x,left,width)},keyCode:{BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,
END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}};$.fn.extend({_focus:$.fn.focus,focus:function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();fn&&fn.call(elem)},delay)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable",
"off").css("MozUserSelect","").unbind("selectstart.ui")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})},scrollParent:function(){var scrollParent;if($.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position")))scrollParent=this.parents().filter(function(){return/(relative|absolute|fixed)/.test($.curCSS(this,"position",1))&&/(auto|scroll)/.test($.curCSS(this,"overflow",
1)+$.curCSS(this,"overflow-y",1)+$.curCSS(this,"overflow-x",1))}).eq(0);else scrollParent=this.parents().filter(function(){return/(auto|scroll)/.test($.curCSS(this,"overflow",1)+$.curCSS(this,"overflow-y",1)+$.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!scrollParent.length?$(document):scrollParent},zIndex:function(zIndex){if(zIndex!==undefined)return this.css("zIndex",zIndex);if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=
elem.css("position");if(position=="absolute"||position=="relative"||position=="fixed"){value=parseInt(elem.css("zIndex"));if(!isNaN(value)&&value!=0)return value}elem=elem.parent()}}return 0}});$.extend($.expr[":"],{data:function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){var nodeName=element.nodeName.toLowerCase(),tabIndex=$.attr(element,"tabindex");return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"==nodeName||"area"==nodeName?element.href||
!isNaN(tabIndex):!isNaN(tabIndex))&&!$(element)["area"==nodeName?"parents":"closest"](":hidden").length},tabbable:function(element){var tabIndex=$.attr(element,"tabindex");return(isNaN(tabIndex)||tabIndex>=0)&&$(element).is(":focusable")}})}(jQuery);
(function($){var $article=$("#article-body,.primary-art-slot,#graphic-main"),$d=$(document),$w=$(window),$b=$("body");wp_pb.StaticMethods.updateImageRes($("img.unprocessed"),$article);$(".inline-content.inline-photo \x3e img",$article).each(function(i){var src=this.src;if(!!src){var $this=$(this);var img=new Image;img.onload=function(){if(!isNaN(img.width)&&!isNaN(img.height))if(img.width>=img.height)$this.closest(".inline-content.inline-photo").addClass("horizontal-photo");else $this.closest(".inline-content.inline-photo").addClass("vertical-photo")};
img.src=src}});$(".inline-content.inline-photo",$article).each(function(i){var $this=$(this);var $left=$("div.left",$this);var $leftImg=$("div.left \x3e img",$this);var $right=$("div.right",$this);var $rightImg=$("div.right \x3e img",$this);if(!!$left.size()&&!!$right.size()){var hL=$leftImg.height(),hR=$rightImg.height(),targetH=hL<hR?hL:hR;$left.children("br").remove();$leftImg.wrap('\x3cdiv class\x3d"double-wrap" style\x3d"height:'+targetH+'px;overflow:hidden;margin-bottom:8px;" /\x3e');$right.children("br").remove();
$rightImg.wrap('\x3cdiv class\x3d"double-wrap" style\x3d"height:'+targetH+'px;overflow:hidden;margin-bottom:8px;" /\x3e')}});$(".inline-content.inline-photo",$article).each(function(i){});var initModalsImageInFocus=function(){$(".overlay-image-in-focus").remove();$(".modal-image-in-focus").remove();$("div.inline-content \x3e img, div.inline-content .double-wrap \x3e img",$article).each(function(i){var $img=$(this);$("\x3cimg/\x3e").attr("src",$img.attr("src")).load(function(){var placeholder,defaultTopMargin=
$w.height()<480?0:40,defaultLeftMargin=$w.width()<760?0:40,rawWidth=this.width,rawHeight=this.height,displayWidth=$img.width(),displayHeight=$img.height(),bodyWidth=$b.width(),windowWidth=$w.width(),screenWidth=(bodyWidth<windowWidth?bodyWidth:windowWidth)-2*defaultLeftMargin,screenHeight=$w.height()-2*defaultTopMargin,isRawImageMoreHorizontalThanScreen=rawWidth/screenWidth>=rawHeight/screenHeight,isRawImageMoreVerticalThanScreen=!isRawImageMoreHorizontalThanScreen,isRawImageBig=rawWidth*rawHeight>
displayWidth*displayHeight,isRawImageTooWide=rawWidth>screenWidth,isRawImageTooTall=rawHeight>screenHeight,dimensions={w:screenWidth,h:screenHeight,t:defaultTopMargin,l:defaultLeftMargin};if(true||isRawImageBig){var $target=$img.parent(),modalClass="modal-"+i;$target.off("click.modal");if(isRawImageTooWide&&isRawImageTooTall)if(isRawImageMoreHorizontalThanScreen)dimensions.t+=Math.floor((screenHeight-rawHeight*(screenWidth/rawWidth))/2);else dimensions.l+=Math.floor((screenWidth-rawWidth*(screenHeight/
rawHeight))/2);else if(isRawImageTooWide)dimensions.t+=Math.floor((screenHeight-rawHeight*(screenWidth/rawWidth))/2);else if(isRawImageTooTall)dimensions.l+=Math.floor((screenWidth-rawWidth*(screenHeight/rawHeight))/2);else{dimensions.w=rawWidth;dimensions.h=rawHeight;dimensions.t+=Math.floor((screenHeight-rawHeight)/2);dimensions.l+=Math.floor((screenWidth-rawWidth)/2)}if(!$img.hasClass("zoom-prevent")){$img.addClass("zoom-in");$target.addClass(modalClass);var $modal=$('\x3cdiv class\x3d"modal-content modal-image-in-focus"\x3e\x3ci class\x3d"inline-content-img-full-close close"\x3e\x26#215;\x3c/i\x3e\x3cimg src\x3d"'+
$img.attr("src")+'" class\x3d"modal-closer zoom-out" style\x3d"max-width:'+dimensions.w+"px;max-height:"+dimensions.h+'px;"/\x3e\x3c/div\x3e');$("body").append($modal);$modal.jqm({overlayClass:"overlay-image-in-focus",overlay:100,closeClass:"modal-closer",trigger:false,onShow:function(obj){obj.o.prependTo("body");obj.w.css({"margin-top":dimensions.t+"px","margin-left":dimensions.l+"px"}).fadeIn("1000");$w.on("scroll."+modalClass,function(ev){$modal.jqmHide()});$d.on("keyup."+modalClass,function(ev){if(ev.which==
27)$modal.jqmHide()});$(obj.w).find(".inline-content-img-full-close").on("click."+modalClass,function(ev){$modal.jqmHide()});$(".modal-image-in-focus").addClass("zoom-out")},onHide:function(obj){obj.w.fadeOut("500");obj.o.fadeOut("1500",function(){obj.o.remove()});$w.off("scroll."+modalClass);$d.off("keyup."+modalClass);$(obj.w).find(".inline-content-img-full-close").off("click."+modalClass);$(".modal-image-in-focus").removeClass("zoom-out")}});$target.on("click.modal",function(ev){$modal.jqmShow()})}}})})};
initModalsImageInFocus();$w.resize(function(){initModalsImageInFocus()});var handleGifTap=function(event){var $button=$(this),$img=$button.parent().find("img"),src=$img.attr("src");if(src.indexOf("imrs.php")>=0)$img.attr("src",src.split("src\x3d")[1].split("\x26")[0]);$button.hide()};var handleImgTap=function(event){var $img=$(this),$button=$img.parent().find(".gif-overlay-play-wrapper"),src=$img.attr("data-low-res-src");$img.attr("src",src);$button.show()};$(".gif-overlay-play-wrapper").each(function(index,
item){var $item=$(item),$relImg=$item.parent().find("img");if($item.height()==0)$item.parent().find("img").on("load",function(){$item.height($(this).height())});var hammertime2=new Hammer($item[0],{prevent_mouseevents:true});hammertime2.on("tap",handleGifTap);var hammertime2=new Hammer($relImg[0],{prevent_mouseevents:true});hammertime2.on("tap",handleImgTap)})})(jQuery);
(function($){var _remove=$.fn.remove;$.fn.remove=function(selector,keepData){return this.each(function(){if(!keepData)if(!selector||$.filter(selector,[this]).length)$("*",this).add(this).each(function(){$(this).triggerHandler("remove")});return _remove.call($(this),selector,keepData)})};$.widget=function(name,base,prototype){var namespace=name.split(".")[0],fullName;name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget}$.expr[":"][fullName]=function(elem){return!!$.data(elem,
name)};$[namespace]=$[namespace]||{};$[namespace][name]=function(options,element){if(arguments.length)this._createWidget(options,element)};var basePrototype=new base;basePrototype.options=$.extend({},basePrototype.options);$[namespace][name].prototype=$.extend(true,basePrototype,{namespace:namespace,widgetName:name,widgetEventPrefix:$[namespace][name].prototype.widgetEventPrefix||name,widgetBaseClass:fullName},prototype);$.widget.bridge(name,$[namespace][name])};$.widget.bridge=function(name,object){$.fn[name]=
function(options){var isMethodCall=typeof options==="string",args=Array.prototype.slice.call(arguments,1),returnValue=this;options=!isMethodCall&&args.length?$.extend.apply(null,[true,options].concat(args)):options;if(isMethodCall&&options.substring(0,1)==="_")return returnValue;if(isMethodCall)this.each(function(){var instance=$.data(this,name),methodValue=instance&&$.isFunction(instance[options])?instance[options].apply(instance,args):instance;if(methodValue!==instance&&methodValue!==undefined){returnValue=
methodValue;return false}});else this.each(function(){var instance=$.data(this,name);if(instance){if(options)instance.option(options);instance._init()}else $.data(this,name,new object(options,this))});return returnValue}};$.Widget=function(options,element){if(arguments.length)this._createWidget(options,element)};$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(options,element){this.element=$(element).data(this.widgetName,this);this.options=
$.extend(true,{},this.options,$.metadata&&$.metadata.get(element)[this.widgetName],options);var self=this;this.element.bind("remove."+this.widgetName,function(){self.destroy()});this._create();this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled")},widget:function(){return this.element},
option:function(key,value){var options=key,self=this;if(arguments.length===0)return $.extend({},self.options);if(typeof key==="string"){if(value===undefined)return this.options[key];options={};options[key]=value}$.each(options,function(key,value){self._setOption(key,value)});return self},_setOption:function(key,value){this.options[key]=value;if(key==="disabled")this.widget()[value?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+this.namespace+"-state-disabled").attr("aria-disabled",
value);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(type,event,data){var callback=this.options[type];event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();data=data||{};if(event.originalEvent)for(var i=$.event.props.length,prop;i;){prop=$.event.props[--i];event[prop]=event.originalEvent[prop]}this.element.trigger(event,data);return!($.isFunction(callback)&&
callback.call(this.element[0],event,data)===false||event.isDefaultPrevented())}}})(jQuery);
(function($){$.widget("ui.rcarousel",{_create:function(){var data,$root=$(this.element),_self=this,options=this.options;this._checkOptionsValidity(this.options);this._createDataObject();data=$root.data("data");$root.addClass("ui-carousel").children().wrapAll("\x3cdiv class\x3d'wrapper'\x3e\x3c/div\x3e");this._saveElements();this._generatePages();this._loadElements();this._setCarouselWidth();this._setCarouselHeight();$(options.navigation.next).click(function(event){_self.next();event.preventDefault()});
$(options.navigation.prev).click(function(event){_self.prev();event.preventDefault()});data.navigation.next=$(options.navigation.next);data.navigation.prev=$(options.navigation.prev);$root.hover(function(){if(options.auto.enabled){clearInterval(data.interval);data.hoveredOver=true}},function(){if(options.auto.enabled){data.hoveredOver=false;_self._autoMode(options.auto.direction)}});this._setStep();if(options.auto.enabled)this._autoMode(options.auto.direction);this._trigger("start")},_addElement:function(jQueryElement,
direction){var $root=$(this.element),$content=$root.find("div.wrapper"),options=this.options;jQueryElement.width(options.width).height(options.height);if(options.orientation==="horizontal")$(jQueryElement).css("marginRight",options.margin);else $(jQueryElement).css({marginBottom:options.margin,"float":"none"});if(direction==="prev")$content.prepend(jQueryElement.clone(true,true));else $content.append(jQueryElement.clone(true,true))},append:function(jqElements){var $root=$(this.element),data=$root.data("data");
jqElements.each(function(i,el){data.paths.push($(el))});data.oldPage=data.pages[data.oldPageIndex].slice(0);data.appended=true;this._generatePages()},_autoMode:function(direction){var options=this.options,data=$(this.element).data("data");if(direction==="next")data.interval=setTimeout($.proxy(this.next,this),options.auto.interval);else data.interval=setTimeout($.proxy(this.prev,this),options.auto.interval)},_checkOptionsValidity:function(options){var i,self=this,_correctSteps="";$.each(options,function(key,
value){switch(key){case "visible":if(!value||typeof value!=="number"||value<=0||Math.ceil(value)-value>0)throw new Error("visible should be defined as a positive integer");break;case "step":if(!value||typeof value!=="number"||value<=0||Math.ceil(value)-value>0)throw new Error("step should be defined as a positive integer");else if(value>self.options.visible){for(i=1;i<=Math.floor(options.visible);i++)_correctSteps+=i<Math.floor(value)?i+", ":i;throw new Error("Only following step values are correct: "+
_correctSteps);}break;case "width":if(!value||typeof value!=="number"||value<=0||Math.ceil(value)-value>0)throw new Error("width should be defined as a positive integer");break;case "height":if(!value||typeof value!=="number"||value<=0||Math.ceil(value)-value>0)throw new Error("height should be defined as a positive integer");break;case "speed":if(!value&&value!==0)throw new Error("speed should be defined as a number or a string");if(typeof value==="number"&&value<0)throw new Error("speed should be a positive number");
else if(typeof value==="string"&&!(value==="slow"||value==="normal"||value==="fast"))throw new Error('Only "slow", "normal" and "fast" values are valid');break;case "navigation":if(!value||$.isPlainObject(value)===false)throw new Error("navigation should be defined as an object with at least one of the properties: 'prev' or 'next' in it");if(value.prev&&typeof value.prev!=="string")throw new Error("navigation.prev should be defined as a string and point to '.class' or '#id' of an element");if(value.next&&
typeof value.next!=="string")throw new Error(" navigation.next should be defined as a string and point to '.class' or '#id' of an element");break;case "auto":if(typeof value.direction!=="string")throw new Error("direction should be defined as a string");if(!(value.direction==="next"||value.direction==="prev"))throw new Error("direction: only 'right' and 'left' values are valid");if(isNaN(value.interval)||typeof value.interval!=="number"||value.interval<0||Math.ceil(value.interval)-value.interval>
0)throw new Error("interval should be a positive number");break;case "margin":if(isNaN(value)||typeof value!=="number"||value<0||Math.ceil(value)-value>0)throw new Error("margin should be a positive number");break}})},_createDataObject:function(){var $root=$(this.element);$root.data("data",{paths:[],pathsLen:0,pages:[],lastPage:[],oldPageIndex:0,pageIndex:0,navigation:{},animated:false,appended:false,hoveredOver:false})},_generatePages:function(){var self=this,options=this.options,data=$(this.element).data("data"),
_visible=options.visible,_pathsLen=data.paths.length;function _init(){data.pages=[];data.lastPage=[];data.pages[0]=[];for(var i=_pathsLen-1;i>=_pathsLen-_visible;i--)data.lastPage.unshift(data.paths[i]);for(var i=0;i<_visible;i++)data.pages[0][data.pages[0].length]=data.paths[i]}function _islastPage(page){var _isLast=false;for(var i=0;i<data.lastPage.length;i++)if(data.lastPage[i].get(0)===page[i].get(0))_isLast=true;else{_isLast=false;break}return _isLast}function _append(start,end,atIndex){var _index=
atIndex||data.pages.length;if(!atIndex)data.pages[_index]=[];for(var i=start;i<end;i++)data.pages[_index].push(data.paths[i]);return _index}function _paginate(){var _isBeginning=true,_complement=false,_start=options.step,_end,_index,_oldFirstEl,_oldLastEl;while(!_islastPage(data.pages[data.pages.length-1])||_isBeginning){_isBeginning=false;_end=_start+_visible;if(_end>_pathsLen)_end=_pathsLen;if(_end-_start<_visible)_complement=true;else _complement=false;if(_complement){_oldFirstEl=_start-(_visible-
(_end-_start));_oldLastEl=_oldFirstEl+(_visible-(_end-_start));_index=_append(_oldFirstEl,_oldLastEl);_append(_start,_end,_index)}else{_append(_start,_end);_start+=options.step}}}_init();_paginate()},getCurrentPage:function(){var data=$(this.element).data("data");return data.pageIndex+1},getTotalPages:function(){var data=$(this.element).data("data");return data.pages.length},goToPage:function(page){var _by,data=$(this.element).data("data");if(!data.animated&&page!==data.pageIndex){data.animated=true;
if(page>data.pages.length-1)page=data.pages.length-1;else if(page<0)page=0;data.pageIndex=page;_by=page-data.oldPageIndex;if(_by>=0)this._goToNextPage(_by);else this._goToPrevPage(_by);data.oldPageIndex=page}},_loadElements:function(elements,direction){var options=this.options,data=$(this.element).data("data"),_dir=direction||"next",_elem=elements||data.pages[options.startAtPage],_start=0,_end=_elem.length;if(_dir==="next")for(var i=_start;i<_end;i++)this._addElement(_elem[i],_dir);else for(var i=
_end-1;i>=_start;i--)this._addElement(_elem[i],_dir)},_goToPrevPage:function(by){var _page,_oldPage,_dist,_index,_animOpts,$lastEl,_unique,_pos,_theSame,$root=$(this.element),self=this,options=this.options,data=$(this.element).data("data");if(data.appended)_oldPage=data.oldPage;else _oldPage=data.pages[data.oldPageIndex];_index=data.oldPageIndex+by;_page=data.pages[_index].slice(0);$(_page).each(function(i,el){if(el.get(0)===$(_oldPage[i]).get(0))_theSame=true;else _theSame=false});if(data.appended&&
_theSame){if(data.pageIndex===0)_index=data.pageIndex=data.pages.length-1;else _index=--data.pageIndex;_page=data.pages[_index].slice(0)}$lastEl=_page[_page.length-1].get(0);for(var i=_oldPage.length-1;i>=0;i--)if($lastEl===$(_oldPage[i]).get(0)){_unique=false;_pos=i;break}else _unique=true;if(!_unique)while(_pos>=0){if(_page[_page.length-1].get(0)===_oldPage[_pos].get(0))_page.pop();--_pos}self._loadElements(_page,"prev");_dist=options.width*_page.length+options.margin*_page.length;if(options.orientation===
"horizontal"){_animOpts={scrollLeft:0};$root.scrollLeft(_dist)}else{_animOpts={scrollTop:0};$root.scrollTop(_dist)}$root.animate(_animOpts,options.speed,function(){self._removeOldElements("last",_page.length);data.animated=false;if(!data.hoveredOver&&options.auto.enabled){clearInterval(data.interval);self._autoMode(options.auto.direction)}self._trigger("pageLoaded",null,{page:_index})});data.appended=false},_goToNextPage:function(by){var _page,_oldPage,_dist,_index,_animOpts,$firstEl,_unique,_pos,
_theSame,$root=$(this.element),options=this.options,data=$root.data("data"),self=this;if(data.appended)_oldPage=data.oldPage;else _oldPage=data.pages[data.oldPageIndex];_index=data.oldPageIndex+by;_page=data.pages[_index].slice(0);$(_page).each(function(i,el){if(el.get(0)===$(_oldPage[i]).get(0))_theSame=true;else _theSame=false});if(data.appended&&_theSame)_page=data.pages[++data.pageIndex].slice(0);$firstEl=_page[0].get(0);for(var i=0;i<_page.length;i++)if($firstEl===$(_oldPage[i]).get(0)){_unique=
false;_pos=i;break}else _unique=true;if(!_unique)while(_pos<_oldPage.length){if(_page[0].get(0)===_oldPage[_pos].get(0))_page.shift();++_pos}this._loadElements(_page,"next");_dist=options.width*_page.length+options.margin*_page.length;if(options.orientation==="horizontal")_animOpts={scrollLeft:"+\x3d"+_dist};else _animOpts={scrollTop:"+\x3d"+_dist};$root.animate(_animOpts,options.speed,function(){self._removeOldElements("first",_page.length);if(options.orientation==="horizontal")$root.scrollLeft(0);
else $root.scrollTop(0);data.animated=false;if(!data.hoveredOver&&options.auto.enabled){clearInterval(data.interval);self._autoMode(options.auto.direction)}self._trigger("pageLoaded",null,{page:_index})});data.appended=false},next:function(){var options=this.options,data=$(this.element).data("data");if(!data.animated){data.animated=true;if(!data.appended)++data.pageIndex;if(data.pageIndex>data.pages.length-1)data.pageIndex=0;this._goToNextPage(data.pageIndex-data.oldPageIndex);data.oldPageIndex=data.pageIndex}},
prev:function(){var options=this.options,data=$(this.element).data("data");if(!data.animated){data.animated=true;if(!data.appended)--data.pageIndex;if(data.pageIndex<0)data.pageIndex=data.pages.length-1;this._goToPrevPage(data.pageIndex-data.oldPageIndex);data.oldPageIndex=data.pageIndex}},_removeOldElements:function(position,length){var $root=$(this.element);for(var i=0;i<length;i++)if(position==="first")$root.find("div.wrapper").children().first().remove();else $root.find("div.wrapper").children().last().remove()},
_saveElements:function(){var $el,$root=$(this.element),$elements=$root.find("div.wrapper").children(),data=$root.data("data");$elements.each(function(i,el){$el=$(el);data.paths.push($el.clone(true,true));$el.remove()})},_setOption:function(key,value){var _newOptions,options=this.options,data=$(this.element).data("data");switch(key){case "speed":this._checkOptionsValidity({speed:value});options.speed=value;$.Widget.prototype._setOption.apply(this,arguments);break;case "auto":_newOptions=$.extend(options.auto,
value);this._checkOptionsValidity({auto:_newOptions});if(options.auto.enabled)this._autoMode(options.auto.direction)}},_setStep:function(s){var _step,options=this.options,data=$(this.element).data("data");_step=s||options.step;options.step=_step;data.step=options.width*_step},_setCarouselHeight:function(){var _newHeight,$root=$(this.element),data=$(this.element).data("data"),options=this.options;if(options.orientation==="vertical")_newHeight=options.visible*options.height+options.margin*(options.visible-
1);else _newHeight=options.height;$root.height(_newHeight)},_setCarouselWidth:function(){var _newWidth,$root=$(this.element),options=this.options,data=$(this.element).data("data");if(options.orientation==="horizontal")_newWidth=options.visible*options.width+options.margin*(options.visible-1);else _newWidth=options.width;$root.css({width:_newWidth,overflow:"hidden"})},options:{visible:3,step:3,width:100,height:100,speed:1E3,margin:0,orientation:"horizontal",auto:{enabled:false,direction:"next",interval:5E3},
startAtPage:0,navigation:{next:"#ui-carousel-next",prev:"#ui-carousel-prev"}}})})(jQuery);