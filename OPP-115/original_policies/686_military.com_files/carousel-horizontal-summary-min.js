$(document).ready(function(){$(".carousel-horizontal-summary").each(function(){var thumbCount=4;var slideCount;var carouselPaused=false;var slideSlider,thumbSlider;
var carouselSummary=$(this);var slideSpeed=6000;var slideLis=carouselSummary.find(".slides ul li");if(slideLis){slideCount=slideLis.length;}if(slideCount<=thumbCount){carouselSummary.find(".thumbs .thumb-controls").hide();
var slideUL=carouselSummary.find(".slides ul");slideUL.children("li").each(function(){var li=$(this);slideUL.append(li.clone());});var slideUL=carouselSummary.find(".thumbs ul");
slideUL.children("li").each(function(){var li=$(this);slideUL.append(li.clone());});}slideSlider=carouselSummary.find(".slides ul").lightSlider({gallery:false,item:1,slideMargin:0,controls:false,auto:true,pager:false,loop:true,mode:"fade",pause:slideSpeed,slideEndAnimation:false,onBeforeStart:function(el){var slider=$(el);
slider.closest(".slides").show();},onAfterSlide:function(el){var i=slideSlider.getCurrentSlideCount();var e=$(el).children().eq(i-1);if(e.hasClass("asset-type-video")&&carouselPaused){var videoElem=e.find(".BrightcoveExperience");
var videoId=videoElem.attr("id");var carouselId=carouselSummary.attr("id");if(playerReady[carouselId+"-"+videoId]){var videoPlayer=videoPlayers[carouselId+"-"+videoId];
videoPlayer.play();activeVideoPlayerId=carouselId+"-"+videoId;}}else{if(playerReady[activeVideoPlayerId]){videoPlayers[activeVideoPlayerId].pause();}}}});
thumbSlider=carouselSummary.find(".thumbs ul").lightSlider({gallery:false,item:thumbCount,slideMargin:0,slideMove:1,controls:false,auto:true,pager:false,loop:true,pause:slideSpeed,enableDrag:false,onBeforeStart:function(el){$(el).closest(".thumbs").show();
},onSliderLoad:function(el){var thumbSlider=$(el);var thumbSliderHeight=thumbSlider.height();thumbSlider.css("height",thumbSliderHeight+"px");var slideSliderHeight=carouselSummary.find(".slides").height();
var thumbSliderTop=carouselSummary.find(".thumbs").position().top;var carouselHeight=slideSliderHeight+(thumbSliderHeight-(slideSliderHeight-thumbSliderTop));
carouselSummary.css("height",carouselHeight+"px");},onBeforeSlide:function(el){var i=thumbSlider.getCurrentSlideCount();if(slideCount<i){i-=slideCount;
}slideSlider.goToSlide(i);updateThumbIndicatorPosition(0);}});carouselSummary.hover(function(e){if(!carouselPaused){thumbSlider.pause();slideSlider.pause();
carouselPaused=true;}},function(e){if(carouselPaused){carouselPaused=false;setTimeout(function(){if(!carouselPaused){var activeSlide=slideSlider.find(".active");
var activeIndex=activeSlide.index()+1;thumbSlider.goToSlide(activeIndex);slideSlider.goToSlide(activeIndex);thumbSlider.play();}},slideSpeed);}});carouselSummary.find(".thumbs li").mouseenter(function(){var thumb=$(this);
var i=thumb.index();thumbSlider.find(".active").removeClass("active");thumb.addClass("active");var position=thumb.position();updateThumbIndicatorPosition(position.left);
var slideIndex=i-thumbCount+1;if(slideIndex>slideCount){slideIndex-=slideCount;}console.log("going to slide: "+slideIndex);slideSlider.goToSlide(slideIndex);
}).click(function(e){e.preventDefault();var link=$(this).find("a");if(link.length>0){var href=link.attr("href");if(href){window.location=href;}}});carouselSummary.find(".thumbs .thumb-controls .thumb-prev").click(function(){var leftThumbPos=thumbSlider.getCurrentSlideCount();
var nextIndex=leftThumbPos-thumbCount;if(nextIndex<1){nextIndex+=slideCount;}thumbSlider.goToSlide(nextIndex);});carouselSummary.find(".thumbs .thumb-controls .thumb-next").click(function(){var leftThumbPos=thumbSlider.getCurrentSlideCount();
var nextIndex=leftThumbPos+thumbCount;if(nextIndex>slideCount){nextIndex-=slideCount;}thumbSlider.goToSlide(nextIndex);});var updateThumbIndicatorPosition=function(left){var thumbSlider=carouselSummary.find(".thumbs");
var activeIndicator=thumbSlider.find(".thumb-indicator");activeIndicator.animate({left:left+"px"},100);};});});var players={},APIModules,videoPlayers={},playerReady={},activeVideoPlayerId;
var onTemplateLoadForCarouselHorizontalSummary=function(experienceID){var player=brightcove.api.getExperience(experienceID);var videoObject=$("#"+experienceID);
var carousel=videoObject.closest(".carousel-horizontal-summary");if(carousel){var carouselId=carousel.attr("id");players[carouselId+"-"+experienceID]=player;
APIModules=brightcove.api.modules.APIModules;}};var onTemplateReadyForCarouselHorizontalSummary=function(evt){var experienceID=evt.target.experience.id;
var videoObject=$("#"+experienceID);var carousel=videoObject.closest(".carousel-horizontal-summary");if(carousel){var carouselId=carousel.attr("id");var videoPlayer=players[carouselId+"-"+experienceID].getModule(APIModules.VIDEO_PLAYER);
videoPlayers[carouselId+"-"+experienceID]=videoPlayer;playerReady[carouselId+"-"+experienceID]=true;}};