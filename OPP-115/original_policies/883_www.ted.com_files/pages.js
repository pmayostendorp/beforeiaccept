!function(){define("Swipe",["exports"],function(){function t(t,e){"use strict";function n(){g=y.children,b=g.length,g.length<2&&(e.continuous=!1),f.transitions&&e.continuous&&g.length<3&&(y.appendChild(g[0].cloneNode(!0)),y.appendChild(y.children[1].cloneNode(!0)),g=y.children),m=new Array(g.length),v=t.getBoundingClientRect().width||t.offsetWidth,y.style.width=g.length*v+"px";for(var n=g.length;n--;){var i=g[n];i.style.width=v+"px",i.setAttribute("data-index",n),f.transitions&&(i.style.left=n*-v+"px",a(n,_>n?-v:n>_?v:0,0))}e.continuous&&f.transitions&&(a(r(_-1),-v,0),a(r(_+1),v,0)),f.transitions||(y.style.left=_*-v+"px"),t.style.visibility="visible"}function i(){e.continuous?o(_-1):_&&o(_-1)}function s(){e.continuous?o(_+1):_<g.length-1&&o(_+1)}function r(t){return(g.length+t%g.length)%g.length}function o(t,n){if(_!=t){if(f.transitions){var i=Math.abs(_-t)/(_-t);if(e.continuous){var s=i;i=-m[r(t)]/v,i!==s&&(t=-i*g.length+t)}for(var o=Math.abs(_-t)-1;o--;)a(r((t>_?t:_)-o-1),v*i,0);t=r(t),a(_,v*i,n||w),a(t,0,n||w),e.continuous&&a(r(t-i),-(v*i),0)}else t=r(t),u(_*-v,t*-v,n||w);_=t,d(e.callback&&e.callback(_,g[_]))}}function a(t,e,n){l(t,e,n),m[t]=e}function l(t,e,n){var i=g[t],s=i&&i.style;s&&(s.webkitTransitionDuration=s.MozTransitionDuration=s.msTransitionDuration=s.OTransitionDuration=s.transitionDuration=n+"ms",s.webkitTransform="translate("+e+"px,0)translateZ(0)",s.msTransform=s.MozTransform=s.OTransform="translateX("+e+"px)")}function u(t,n,i){if(!i)return void(y.style.left=n+"px");var s=+new Date,r=setInterval(function(){var o=+new Date-s;return o>i?(y.style.left=n+"px",S&&c(),e.transitionEnd&&e.transitionEnd.call(event,_,g[_]),void clearInterval(r)):void(y.style.left=(n-t)*(Math.floor(o/i*100)/100)+t+"px")},4)}function c(){k=setTimeout(s,S)}function h(){S=0,clearTimeout(k)}var p=function(){},d=function(t){setTimeout(t||p,0)},f={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(t){var e=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var n in e)if(void 0!==t.style[e[n]])return!0;return!1}(document.createElement("swipe"))};if(t){var g,m,v,b,y=t.children[0];e=e||{};var _=parseInt(e.startSlide,10)||0,w=e.speed||300;e.continuous=void 0!==e.continuous?e.continuous:!0;var k,x,S=e.auto||0,E={},C={},T={handleEvent:function(t){switch(t.type){case"touchstart":this.start(t);break;case"touchmove":this.move(t);break;case"touchend":d(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":d(this.transitionEnd(t));break;case"resize":d(n)}e.stopPropagation&&t.stopPropagation()},start:function(t){var e=t.touches[0];E={x:e.pageX,y:e.pageY,time:+new Date},x=void 0,C={},y.addEventListener("touchmove",this,!1),y.addEventListener("touchend",this,!1)},move:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale)){e.disableScroll&&t.preventDefault();var n=t.touches[0];C={x:n.pageX-E.x,y:n.pageY-E.y},"undefined"==typeof x&&(x=!!(x||Math.abs(C.x)<Math.abs(C.y))),x||(t.preventDefault(),h(),e.continuous?(l(r(_-1),C.x+m[r(_-1)],0),l(_,C.x+m[_],0),l(r(_+1),C.x+m[r(_+1)],0)):(C.x=C.x/(!_&&C.x>0||_==g.length-1&&C.x<0?Math.abs(C.x)/v+1:1),l(_-1,C.x+m[_-1],0),l(_,C.x+m[_],0),l(_+1,C.x+m[_+1],0)))}},end:function(){var t=+new Date-E.time,n=Number(t)<250&&Math.abs(C.x)>20||Math.abs(C.x)>v/2,i=!_&&C.x>0||_==g.length-1&&C.x<0;e.continuous&&(i=!1);var s=C.x<0;x||(n&&!i?(s?(e.continuous?(a(r(_-1),-v,0),a(r(_+2),v,0)):a(_-1,-v,0),a(_,m[_]-v,w),a(r(_+1),m[r(_+1)]-v,w),_=r(_+1)):(e.continuous?(a(r(_+1),v,0),a(r(_-2),-v,0)):a(_+1,v,0),a(_,m[_]+v,w),a(r(_-1),m[r(_-1)]+v,w),_=r(_-1)),e.callback&&e.callback(_,g[_])):e.continuous?(a(r(_-1),-v,w),a(_,0,w),a(r(_+1),v,w)):(a(_-1,-v,w),a(_,0,w),a(_+1,v,w))),y.removeEventListener("touchmove",T,!1),y.removeEventListener("touchend",T,!1)},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)==_&&(S&&c(),e.transitionEnd&&e.transitionEnd.call(t,_,g[_]))}};return n(),S&&c(),f.addEventListener?(f.touch&&y.addEventListener("touchstart",T,!1),f.transitions&&(y.addEventListener("webkitTransitionEnd",T,!1),y.addEventListener("msTransitionEnd",T,!1),y.addEventListener("oTransitionEnd",T,!1),y.addEventListener("otransitionend",T,!1),y.addEventListener("transitionend",T,!1)),window.addEventListener("resize",T,!1)):window.onresize=function(){n()},{setup:function(){n()},slide:function(t,e){h(),o(t,e)},prev:function(){h(),i()},next:function(){h(),s()},stop:function(){h()},getPos:function(){return _},getNumSlides:function(){return b},kill:function(){h(),y.style.width="",y.style.left="";for(var t=g.length;t--;){var e=g[t];e.style.width="",e.style.left="",f.transitions&&l(t,0,0)}f.addEventListener?(y.removeEventListener("touchstart",T,!1),y.removeEventListener("webkitTransitionEnd",T,!1),y.removeEventListener("msTransitionEnd",T,!1),y.removeEventListener("oTransitionEnd",T,!1),y.removeEventListener("otransitionend",T,!1),y.removeEventListener("transitionend",T,!1),window.removeEventListener("resize",T,!1)):window.onresize=null}}}}return(window.jQuery||window.Zepto)&&!function(e){e.fn.Swipe=function(n){return this.each(function(){e(this).data("Swipe",new t(e(this)[0],n))})}}(window.jQuery||window.Zepto),t}),define("hbs/handlebars",[],function(){var t=function(){var t=function(){"use strict";function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){"use strict";function e(t){return a[t]||"&amp;"}function n(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function i(t){return t instanceof o?t.toString():t||0===t?(t=""+t,u.test(t)?t.replace(l,e):t):""}function s(t){return t||0===t?p(t)&&0===t.length?!0:!1:!0}var r={},o=t,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,u=/[&<>"'`]/;r.extend=n;var c=Object.prototype.toString;r.toString=c;var h=function(t){return"function"==typeof t};h(/x/)&&(h=function(t){return"function"==typeof t&&"[object Function]"===c.call(t)});var h;r.isFunction=h;var p=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===c.call(t):!1};return r.isArray=p,r.escapeExpression=i,r.isEmpty=s,r}(t),n=function(){"use strict";function t(t,e){var i;e&&e.firstLine&&(i=e.firstLine,t+=" - "+i+":"+e.firstColumn);for(var s=Error.prototype.constructor.call(this,t),r=0;r<n.length;r++)this[n[r]]=s[n[r]];i&&(this.lineNumber=i,this.column=e.firstColumn)}var e,n=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,e=t}(),i=function(t,e){"use strict";function n(t,e){this.helpers=t||{},this.partials=e||{},i(this)}function i(t){t.registerHelper("helperMissing",function(t){if(2===arguments.length)return void 0;throw new a("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,n){var i=n.inverse||function(){},s=n.fn;return p(e)&&(e=e.call(this)),e===!0?s(this):e===!1||null==e?i(this):h(e)?e.length>0?t.helpers.each(e,n):i(this):s(e)}),t.registerHelper("each",function(t,e){var n,i=e.fn,s=e.inverse,r=0,o="";if(p(t)&&(t=t.call(this)),e.data&&(n=m(e.data)),t&&"object"==typeof t)if(h(t))for(var a=t.length;a>r;r++)n&&(n.index=r,n.first=0===r,n.last=r===t.length-1),o+=i(t[r],{data:n});else for(var l in t)t.hasOwnProperty(l)&&(n&&(n.key=l,n.index=r,n.first=0===r),o+=i(t[l],{data:n}),r++);return 0===r&&(o=s(this)),o}),t.registerHelper("if",function(t,e){return p(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||o.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),t.registerHelper("with",function(t,e){return p(t)&&(t=t.call(this)),o.isEmpty(t)?void 0:e.fn(t)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)})}function s(t,e){g.log(t,e)}var r={},o=t,a=e,l="1.3.0";r.VERSION=l;var u=4;r.COMPILER_REVISION=u;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};r.REVISION_CHANGES=c;var h=o.isArray,p=o.isFunction,d=o.toString,f="[object Object]";r.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:g,log:s,registerHelper:function(t,e,n){if(d.call(t)===f){if(n||e)throw new a("Arg not supported with multiple helpers");o.extend(this.helpers,t)}else n&&(e.not=n),this.helpers[t]=e},registerPartial:function(t,e){d.call(t)===f?o.extend(this.partials,t):this.partials[t]=e}};var g={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(g.level<=t){var n=g.methodMap[t];"undefined"!=typeof console&&console[n]&&console[n].call(console,e)}}};r.logger=g,r.log=s;var m=function(t){var e={};return o.extend(e,t),e};return r.createFrame=m,r}(e,n),s=function(t,e,n){"use strict";function i(t){var e=t&&t[0]||1,n=p;if(e!==n){if(n>e){var i=d[n],s=d[e];throw new h("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+s+").")}throw new h("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function s(t,e){if(!e)throw new h("No environment passed to template");var n=function(t,n,i,s,r,o){var a=e.VM.invokePartial.apply(this,arguments);if(null!=a)return a;if(e.compile){var l={helpers:s,partials:r,data:o};return r[n]=e.compile(t,{data:void 0!==o},e),r[n](i,l)}throw new h("The partial "+n+" could not be compiled when running in runtime-only mode")},i={escapeExpression:c.escapeExpression,invokePartial:n,programs:[],program:function(t,e,n){var i=this.programs[t];return n?i=o(t,e,n):i||(i=this.programs[t]=o(t,e)),i},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n={},c.extend(n,e),c.extend(n,t)),n},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(n,s){s=s||{};var r,o,a=s.partial?s:e;s.partial||(r=s.helpers,o=s.partials);var l=t.call(i,a,n,r,o,s.data);return s.partial||e.VM.checkRevision(i.compilerInfo),l}}function r(t,e,n){var i=Array.prototype.slice.call(arguments,3),s=function(t,s){return s=s||{},e.apply(this,[t,s.data||n].concat(i))};return s.program=t,s.depth=i.length,s}function o(t,e,n){var i=function(t,i){return i=i||{},e(t,i.data||n)};return i.program=t,i.depth=0,i}function a(t,e,n,i,s,r){var o={partial:!0,helpers:i,partials:s,data:r};if(void 0===t)throw new h("The partial "+e+" could not be found");return t instanceof Function?t(n,o):void 0}function l(){return""}var u={},c=t,h=e,p=n.COMPILER_REVISION,d=n.REVISION_CHANGES;return u.checkRevision=i,u.template=s,u.programWithDepth=r,u.program=o,u.invokePartial=a,u.noop=l,u}(e,n,i),r=function(t,e,n,i,s){"use strict";var r,o=t,a=e,l=n,u=i,c=s,h=function(){var t=new o.HandlebarsEnvironment;return u.extend(t,o),t.SafeString=a,t.Exception=l,t.Utils=u,t.VM=c,t.template=function(e){return c.template(e,t)},t},p=h();return p.create=h,r=p}(i,t,n,e,s),o=function(t){"use strict";function e(t){t=t||{},this.firstLine=t.first_line,this.firstColumn=t.first_column,this.lastColumn=t.last_column,this.lastLine=t.last_line}var n,i=t,s={ProgramNode:function(t,n,i,r){var o,a;3===arguments.length?(r=i,i=null):2===arguments.length&&(r=n,n=null),e.call(this,r),this.type="program",this.statements=t,this.strip={},i?(a=i[0],a?(o={first_line:a.firstLine,last_line:a.lastLine,last_column:a.lastColumn,first_column:a.firstColumn},this.inverse=new s.ProgramNode(i,n,o)):this.inverse=new s.ProgramNode(i,n),this.strip.right=n.left):n&&(this.strip.left=n.right)},MustacheNode:function(t,n,i,r,o){if(e.call(this,o),this.type="mustache",this.strip=r,null!=i&&i.charAt){var a=i.charAt(3)||i.charAt(2);this.escaped="{"!==a&&"&"!==a}else this.escaped=!!i;this.sexpr=t instanceof s.SexprNode?t:new s.SexprNode(t,n),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(t,n,i){e.call(this,i),this.type="sexpr",this.hash=n;var s=this.id=t[0],r=this.params=t.slice(1),o=this.eligibleHelper=s.isSimple;this.isHelper=o&&(r.length||n)},PartialNode:function(t,n,i,s){e.call(this,s),this.type="partial",this.partialName=t,this.context=n,this.strip=i},BlockNode:function(t,n,s,r,o){if(e.call(this,o),t.sexpr.id.original!==r.path.original)throw new i(t.sexpr.id.original+" doesn't match "+r.path.original,this);this.type="block",this.mustache=t,this.program=n,this.inverse=s,this.strip={left:t.strip.left,right:r.strip.right},(n||s).strip.left=t.strip.right,(s||n).strip.right=r.strip.left,s&&!n&&(this.isInverse=!0)},ContentNode:function(t,n){e.call(this,n),this.type="content",this.string=t},HashNode:function(t,n){e.call(this,n),this.type="hash",this.pairs=t},IdNode:function(t,n){e.call(this,n),this.type="ID";for(var s="",r=[],o=0,a=0,l=t.length;l>a;a++){var u=t[a].part;if(s+=(t[a].separator||"")+u,".."===u||"."===u||"this"===u){if(r.length>0)throw new i("Invalid path: "+s,this);".."===u?o++:this.isScoped=!0}else r.push(u)}this.original=s,this.parts=r,this.string=r.join("."),this.depth=o,this.isSimple=1===t.length&&!this.isScoped&&0===o,this.stringModeValue=this.string},PartialNameNode:function(t,n){e.call(this,n),this.type="PARTIAL_NAME",this.name=t.original},DataNode:function(t,n){e.call(this,n),this.type="DATA",this.id=t},StringNode:function(t,n){e.call(this,n),this.type="STRING",this.original=this.string=this.stringModeValue=t},IntegerNode:function(t,n){e.call(this,n),this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)},BooleanNode:function(t,n){e.call(this,n),this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},CommentNode:function(t,n){e.call(this,n),this.type="comment",this.comment=t}};return n=s}(n),a=function(){"use strict";var t,e=function(){function t(t,e){return{left:"~"===t.charAt(2),right:"~"===e.charAt(0)||"~"===e.charAt(1)}}function e(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(e,n,i,s,r,o){var a=o.length-1;switch(r){case 1:return new s.ProgramNode(o[a-1],this._$);case 2:return new s.ProgramNode([],this._$);case 3:this.$=new s.ProgramNode([],o[a-1],o[a],this._$);break;case 4:this.$=new s.ProgramNode(o[a-2],o[a-1],o[a],this._$);break;case 5:this.$=new s.ProgramNode(o[a-1],o[a],[],this._$);break;case 6:this.$=new s.ProgramNode(o[a],this._$);break;case 7:this.$=new s.ProgramNode([],this._$);break;case 8:this.$=new s.ProgramNode([],this._$);break;case 9:this.$=[o[a]];break;case 10:o[a-1].push(o[a]),this.$=o[a-1];break;case 11:this.$=new s.BlockNode(o[a-2],o[a-1].inverse,o[a-1],o[a],this._$);break;case 12:this.$=new s.BlockNode(o[a-2],o[a-1],o[a-1].inverse,o[a],this._$);break;case 13:this.$=o[a];break;case 14:this.$=o[a];break;case 15:this.$=new s.ContentNode(o[a],this._$);break;case 16:this.$=new s.CommentNode(o[a],this._$);break;case 17:this.$=new s.MustacheNode(o[a-1],null,o[a-2],t(o[a-2],o[a]),this._$);break;case 18:this.$=new s.MustacheNode(o[a-1],null,o[a-2],t(o[a-2],o[a]),this._$);break;case 19:this.$={path:o[a-1],strip:t(o[a-2],o[a])};break;case 20:this.$=new s.MustacheNode(o[a-1],null,o[a-2],t(o[a-2],o[a]),this._$);break;case 21:this.$=new s.MustacheNode(o[a-1],null,o[a-2],t(o[a-2],o[a]),this._$);break;case 22:this.$=new s.PartialNode(o[a-2],o[a-1],t(o[a-3],o[a]),this._$);break;case 23:this.$=t(o[a-1],o[a]);break;case 24:this.$=new s.SexprNode([o[a-2]].concat(o[a-1]),o[a],this._$);break;case 25:this.$=new s.SexprNode([o[a]],null,this._$);break;case 26:this.$=o[a];break;case 27:this.$=new s.StringNode(o[a],this._$);break;case 28:this.$=new s.IntegerNode(o[a],this._$);break;case 29:this.$=new s.BooleanNode(o[a],this._$);break;case 30:this.$=o[a];break;case 31:o[a-1].isHelper=!0,this.$=o[a-1];break;case 32:this.$=new s.HashNode(o[a],this._$);break;case 33:this.$=[o[a-2],o[a]];break;case 34:this.$=new s.PartialNameNode(o[a],this._$);break;case 35:this.$=new s.PartialNameNode(new s.StringNode(o[a],this._$),this._$);break;case 36:this.$=new s.PartialNameNode(new s.IntegerNode(o[a],this._$));break;case 37:this.$=new s.DataNode(o[a],this._$);break;case 38:this.$=new s.IdNode(o[a],this._$);break;case 39:o[a-2].push({part:o[a],separator:o[a-1]}),this.$=o[a-2];break;case 40:this.$=[{part:o[a]}];break;case 43:this.$=[];break;case 44:o[a-1].push(o[a]);break;case 47:this.$=[o[a]];break;case 48:o[a-1].push(o[a])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(t){throw new Error(t)},parse:function(t){function e(){var t;return t=n.lexer.lex()||1,"number"!=typeof t&&(t=n.symbols_[t]||t),t}var n=this,i=[0],s=[null],r=[],o=this.table,a="",l=0,u=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;r.push(h);var p=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,f,g,m,v,b,y,_,w,k={};;){if(g=i[i.length-1],this.defaultActions[g]?m=this.defaultActions[g]:((null===d||"undefined"==typeof d)&&(d=e()),m=o[g]&&o[g][d]),"undefined"==typeof m||!m.length||!m[0]){var x="";if(!c){w=[];for(b in o[g])this.terminals_[b]&&b>2&&w.push("'"+this.terminals_[b]+"'");x=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:h,expected:w})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+d);switch(m[0]){case 1:i.push(d),s.push(this.lexer.yytext),r.push(this.lexer.yylloc),i.push(m[1]),d=null,f?(d=f,f=null):(u=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,h=this.lexer.yylloc,c>0&&c--);break;case 2:if(y=this.productions_[m[1]][1],k.$=s[s.length-y],k._$={first_line:r[r.length-(y||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(y||1)].first_column,last_column:r[r.length-1].last_column},p&&(k._$.range=[r[r.length-(y||1)].range[0],r[r.length-1].range[1]]),v=this.performAction.call(k,a,u,l,this.yy,m[1],s,r),"undefined"!=typeof v)return v;y&&(i=i.slice(0,-1*y*2),s=s.slice(0,-1*y),r=r.slice(0,-1*y)),i.push(this.productions_[m[1]][0]),s.push(k.$),r.push(k._$),_=o[i[i.length-2]][i[i.length-1]],i.push(_);break;case 3:return!0}}return!0}},i=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,i,s;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;o<r.length&&(n=this._input.match(this.rules[r[o]]),!n||e&&!(n[0].length>e[0].length)||(e=n,i=o,this.options.flex));o++);return e?(s=e[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,r[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,n,i){function s(t,n){return e.yytext=e.yytext.substr(t,e.yyleng-n)}switch(n){case 0:if("\\\\"===e.yytext.slice(-2)?(s(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(s(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return s(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return s(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return e.yytext=s(1,2).replace(/\\"/g,'"'),32;case 24:return e.yytext=s(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return e.yytext=s(1,2),40;case 31:return"INVALID";case 32:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},t}();return n.lexer=i,e.prototype=n,n.Parser=e,new e}();return t=e}(),l=function(t,e){"use strict";function n(t){return t.constructor===r.ProgramNode?t:(s.yy=r,s.parse(t))}var i={},s=t,r=e;return i.parser=s,i.parse=n,i}(a,o),u=function(t){"use strict";function e(){}function n(t,e,n){if(null==t||"string"!=typeof t&&t.constructor!==n.AST.ProgramNode)throw new r("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var i=n.parse(t),s=(new n.Compiler).compile(i,e);return(new n.JavaScriptCompiler).compile(s,e)}function i(t,e,n){function i(){var i=n.parse(t),s=(new n.Compiler).compile(i,e),r=(new n.JavaScriptCompiler).compile(s,e,void 0,!0);return n.template(r)}if(null==t||"string"!=typeof t&&t.constructor!==n.AST.ProgramNode)throw new r("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var s;return function(t,e){return s||(s=i()),s.call(this,t,e)}}var s={},r=t;return s.Compiler=e,e.prototype={compiler:e,disassemble:function(){for(var t,e,n,i=this.opcodes,s=[],r=0,o=i.length;o>r;r++)if(t=i[r],"DECLARE"===t.opcode)s.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var a=0;a<t.args.length;a++)n=t.args[a],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),e.push(n);s.push(t.opcode+" "+e.join(" "))}return s.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;e>n;n++){var i=this.opcodes[n],s=t.opcodes[n];if(i.opcode!==s.opcode||i.args.length!==s.args.length)return!1;for(var r=0;r<i.args.length;r++)if(i.args[r]!==s.args[r])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(n=0;e>n;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=e;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];
return this.accept(t)},accept:function(t){var e,n=t.strip||{};return n.left&&this.opcode("strip"),e=this[t.type](t),n.right&&this.opcode("strip"),e},program:function(t){for(var e=t.statements,n=0,i=e.length;i>n;n++)this.accept(e[n]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,n=(new this.compiler).compile(t,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var s=0,r=n.depths.list.length;r>s;s++)e=n.depths.list[s],2>e||this.addDepth(e-1);return i},block:function(t){var e=t.mustache,n=t.program,i=t.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var s=e.sexpr,r=this.classifySexpr(s);"helper"===r?this.helperSexpr(s,n,i):"simple"===r?(this.simpleSexpr(s),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(s,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,n,i=t.pairs;this.opcode("pushHash");for(var s=0,r=i.length;r>s;s++)e=i[s],n=e[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type),"sexpr"===n.type&&this.sexpr(n)):this.accept(n),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){this.sexpr(t.sexpr),this.opcode(t.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(t,e,n){var i=t.id,s=i.parts[0],r=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",s,r)},simpleSexpr:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),s=t.id.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",i.length,s);else{if(this.options.knownHelpersOnly)throw new r("You specified knownHelpersOnly, but used the unknown helper "+s,t);this.opcode("invokeHelper",i.length,s,t.isRoot)}},sexpr:function(t){var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var n=1,i=t.parts.length;i>n;n++)this.opcode("lookup",t.parts[n])},DATA:function(t){if(this.options.data=!0,t.id.isScoped||t.id.depth)throw new r("Scoped data references are not supported: "+t.original,t);this.opcode("lookupData");for(var e=t.id.parts,n=0,i=e.length;i>n;n++)this.opcode("lookup",e[n])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifySexpr:function(t){var e=t.isHelper,n=t.eligibleHelper,i=this.options;if(n&&!e){var s=t.id.parts[0];i.knownHelpers[s]?e=!0:i.knownHelpersOnly&&(n=!1)}return e?"helper":n?"ambiguous":"simple"},pushParams:function(t){for(var e,n=t.length;n--;)e=t[n],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type),"sexpr"===e.type&&this.sexpr(e)):this[e.type](e)},setupFullMustacheParams:function(t,e,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.hash(t.hash):this.opcode("emptyHash"),i}},s.precompile=n,s.compile=i,s}(n),c=function(t,e){"use strict";function n(t){this.value=t}function i(){}var s,r=t.COMPILER_REVISION,o=t.REVISION_CHANGES,a=t.log,l=e;i.prototype={nameLookup:function(t,e){var n,s;return 0===t.indexOf("depth")&&(n=!0),s=/^[0-9]+$/.test(e)?t+"["+e+"]":i.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']",n?"("+t+" && "+s+")":s},compilerInfo:function(){var t=r,e=o[t];return"this.compilerInfo = ["+t+",'"+e+"'];\n"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,n,i){this.environment=t,this.options=e||{},a("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e);var s,r=t.opcodes;this.i=0;for(var o=r.length;this.i<o;this.i++)s=r[this.i],"DECLARE"===s.opcode?this[s.name]=s.value:this[s.opcode].apply(this,s.args),s.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new l("Compile completed with content left on stack");return this.createFunctionContext(i)},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,n="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(n+=" data = data || {};"),t.push(n)}t.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(t){var e=this.stackVars.concat(this.registers.list);if(e.length>0&&(this.source[1]=this.source[1]+", "+e.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],s=0,r=this.environment.depths.list.length;r>s;s++)i.push("depth"+this.environment.depths.list[s]);var o=this.mergeSource();if(this.isChild||(o=this.compilerInfo()+o),t)return i.push(o),Function.apply(this,i);var l="function "+(this.name||"")+"("+i.join(",")+") {\n  "+o+"}";return a("debug",l+"\n\n"),l},mergeSource:function(){for(var t,e="",n=0,i=this.source.length;i>n;n++){var s=this.source[n];s.appendToBuffer?t=t?t+"\n    + "+s.content:s.content:(t&&(e+="buffer += "+t+";\n  ",t=void 0),e+=s+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),this.pushSource("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.stripNext&&(t=t.replace(/^\s+/,"")),this.pendingContent=t},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var t=this.popStack();this.pushSource("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"sexpr"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+t.contexts.join(",")+"}"),this.push("{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){this.pushStackLiteral(null!=t?this.programExpression(t):null)},invokeHelper:function(t,e,n){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var i=this.lastHelper=this.setupHelper(t,e,!0),s=this.nameLookup("depth"+this.lastContext,e,"context"),r="helper = "+i.name+" || "+s;i.paramsInit&&(r+=","+i.paramsInit),this.push("("+r+",helper ? helper.call("+i.callParams+") : helperMissing.call("+i.helperMissingParams+"))"),n||this.flushInline()},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var n=this.setupHelper(0,t,e),i=this.lastHelper=this.nameLookup("helpers",t,"helper"),s=this.nameLookup("depth"+this.lastContext,t,"context"),r=this.nextStack();n.paramsInit&&this.pushSource(n.paramsInit),this.pushSource("if (helper = "+i+") { "+r+" = helper.call("+n.callParams+"); }"),this.pushSource("else { helper = "+s+"; "+r+" = typeof helper === functionType ? helper.call("+n.callParams+") : helper; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),e=this.popStack());var s=this.hash;e&&s.contexts.push("'"+t+"': "+e),n&&s.types.push("'"+t+"': "+n),s.values.push("'"+t+"': ("+i+")")},compiler:i,compileChildren:function(t,e){for(var n,i,s=t.children,r=0,o=s.length;o>r;r++){n=s[r],i=new this.compiler;var a=this.matchExistingProgram(n);null==a?(this.context.programs.push(""),a=this.context.programs.length,n.index=a,n.name="program"+a,this.context.programs[a]=i.compile(n,e,this.context),this.context.environments[a]=n):(n.index=a,n.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;n>e;e++){var i=this.context.environments[e];if(i&&i.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,n=this.environment.children[t],i=n.depths.list,s=[n.index,n.name,"data"],r=0,o=i.length;o>r;r++)e=i[r],s.push(1===e?"depth0":"depth"+(e-1));return(0===i.length?"self.program(":"self.programWithDepth(")+s.join(", ")+")"},register:function(t,e){this.useRegister(t),this.pushSource(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new n(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,i,s,r="",o=this.isInline();if(o){var a=this.popStack(!0);if(a instanceof n)e=a.value,s=!0;else{i=!this.stackSlot;var l=i?this.incrStack():this.topStackName();r="("+this.push(l)+" = "+a+"),",e=this.topStack()}}else e=this.topStack();var u=t.call(this,e);return o?(s||this.popStack(),i&&this.stackSlot--,this.push("("+r+u+")")):(/^stack/.test(e)||(e=this.nextStack()),this.pushSource(e+" = ("+r+u+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,i=t.length;i>e;e++){var s=t[e];s instanceof n?this.compileStack.push(s):this.pushStack(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),i=(e?this.inlineStack:this.compileStack).pop();if(!t&&i instanceof n)return i.value;if(!e){if(!this.stackSlot)throw new l("Invalid stack pop");this.stackSlot--}return i},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,i=e[e.length-1];return!t&&i instanceof n?i.value:i},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,n){var i=[],s=this.setupParams(t,i,n),r=this.nameLookup("helpers",e,"helper");return{params:i,paramsInit:s,name:r,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(e)].concat(i).join(", ")}},setupOptions:function(t,e){var n,i,s,r=[],o=[],a=[];r.push("hash:"+this.popStack()),this.options.stringParams&&(r.push("hashTypes:"+this.popStack()),r.push("hashContexts:"+this.popStack())),i=this.popStack(),s=this.popStack(),(s||i)&&(s||(this.context.aliases.self="this",s="self.noop"),i||(this.context.aliases.self="this",i="self.noop"),r.push("inverse:"+i),r.push("fn:"+s));for(var l=0;t>l;l++)n=this.popStack(),e.push(n),this.options.stringParams&&(a.push(this.popStack()),o.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+o.join(",")+"]"),r.push("types:["+a.join(",")+"]")),this.options.data&&r.push("data:data"),r},setupParams:function(t,e,n){var i="{"+this.setupOptions(t,e).join(",")+"}";return n?(this.useRegister("options"),e.push("options"),"options="+i):(e.push(i),"")}};for(var u="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),c=i.RESERVED_WORDS={},h=0,p=u.length;p>h;h++)c[u[h]]=!0;return i.isValidJavaScriptVariableName=function(t){return!i.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)?!0:!1},s=i}(i,n),h=function(t,e,n,i,s){"use strict";var r,o=t,a=e,l=n.parser,u=n.parse,c=i.Compiler,h=i.compile,p=i.precompile,d=s,f=o.create,g=function(){var t=f();return t.compile=function(e,n){return h(e,n,t)},t.precompile=function(e,n){return p(e,n,t)},t.AST=a,t.Compiler=c,t.JavaScriptCompiler=d,t.Parser=l,t.parse=u,t};return o=g(),o.create=g,r=o}(r,o,l,u,c);return h}();return t}),define("templates/helpers/icon",["Handlebars"],function(t){"use strict";function e(t,e,i){return t=n(t),e=n(e),i=n(i),'<i class="icon icon_'+t+" "+(i||"")+'">'+(e?"<span class=screen-reader-text>"+e+"</span>":"")+"</i>"}var n=t.Utils.escapeExpression;return t.registerHelper("icon",function(n,i,s){return new t.SafeString(e(n,i,s))}),e}),define("templates/helpers/pageNav",["Handlebars","templates/helpers/icon"],function(t,e){"use strict";function n(t,n){var i="";n!==!1&&(n=!0);var s='<a href="#prev" class=page-nav__prev>'+e("arrow-alt-left","Prev","page-nav__prev__icon")+"</a>",r='<a href="#next" class=page-nav__next>'+e("arrow-alt-right","Next","page-nav__next__icon")+"</a>";i+="<div class=page-nav>"+(n?s:"")+'<ul class="sl page-nav__dots">';for(var o=-1;++o<t;)i+='<li data-pageno="'+o+'" class="page-nav__dot"><a href="#" class="page-nav__dot__link">'+e("page-dot-off","Page "+(o+1),"page-nav__dot__icon")+"</a></li>";return i+="</ul>"+(n?r:"")+"</div>"}return t.registerHelper("pageNav",function(e,i){return new t.SafeString(n(e,i))}),n}),define("lib/Timer",["jquery","lodash"],function(t,e){"use strict";function n(e){this._intervalPeriod=e.interval||i,this._delayPeriod=e.delay||this._intervalPeriod,this._callbacks=new t.Callbacks}var i=3e3,s=window;return e.extend(n.prototype,{_advance:function(){this._stopped||(this._callbacks.fire(),this._passedDelay||(this._passedDelay=!0,this.start()))},start:function(){this._passedDelay?this._intervalId||(this._intervalId=s.setInterval(e.bind(this._advance,this),this._intervalPeriod)):this._timeoutId||(this._timeoutId=s.setTimeout(e.bind(this._advance,this),this._delayPeriod)),this._stopped=!1},stop:function(){this._stopped=!0,this._timeoutId&&(s.clearTimeout(this._timeoutId),this._timeoutId=null),this._intervalId&&(s.clearInterval(this._intervalId),this._intervalId=null)},add:function(t){return this._callbacks.add(t)},remove:function(t){return this._callbacks.remove(t)}}),n}),define("global/floodlight",["jquery","exports"],function(t,e){"use strict";e.close=function(){window.localStorage.setItem("floodlight","hide"),t("#floodlight").slideUp(240)},e.clear=function(){try{window.localStorage.removeItem("floodlight")}catch(t){}}}),define("deferLink",["jquery"],function(t){"use strict";function e(t){return function(e){return n.call(this,e,t)}}function n(e,n){function i(){var t=+s.data(a)-1;s.data(a,t),0>=t&&!s.data(u)&&(c.location.href=h)}var s="A"===this.nodeName?t(this):t(e.target).closest("a"),h=s.attr("href"),p=s.attr("target"),d=s.length&&h&&1===e.which&&!e.metaKey&&!e.shiftKey,f=n;if(t.isFunction(n)&&(f=n.call(this,e),f===!1))return!1;d&&e.isDefaultPrevented()&&!s.data(a)&&(d=!1),d&&p&&"_self"!==p&&(d=!1),d&&o&&s.is("[download]")&&(d=!1),d&&s.hasClass(r)&&(d=!1);var g=+(s.data(a)||0);d&&(s.data(a,g+1),f.when?("resolved"===f.state()&&i(),f.done(i)):t.isNumeric(f)?c.setTimeout(i,f):(d=!1,s.data(a,g))),d&&!g&&(e.preventDefault(),s.data(l,!0))}function i(i){return i.when||t.isNumeric(i)||t.isFunction(i)?e(i):void n.call(this,i,s)}var s=50,r="no-defer",o="download"in document.createElement("a"),a="defer-link-pends",l="defer-link-preventable",u="defer-link-prevented",c=window,h=t.Event.prototype.preventDefault;return t.Event.prototype.preventDefault=function(){var e=t(this.target);return e.data(l)&&e.data(u,!0),h.apply(this,Array.prototype.slice.call(arguments))},i}),define("utils/applyAll",["jquery"],function(t){"use strict";function e(n,i,s){var r,o;for(r=0,o=i.length;o>r;r++)t.isArray(i[r])?e(n,i[r],s):i[r].apply(n,s)}return e}),define("utils/throwError",[],function(){"use strict";return function(t){throw new Error("Error in TED: "+t)}}),define("lib/pubSub",["jquery","utils/applyAll","utils/throwError"],function(t,e,n){"use strict";function i(t){var i={publish:t.fire,subscribe:t.add,unsubscribe:t.remove},s=null;t.add(function(t){s=t}),i.read=function(){return s};var r;return i.publishUnique=function(){if(!window.JSON)return n("JSON object not available. You may need to shim it on this client."),!1;var e=Array.prototype.slice.call(arguments,0),i=JSON.stringify(e);i!==r&&(t.fire.apply(t,e),r=i)},i.once=function(){function n(){e(t,i,arguments),t.remove(n)}var i=arguments;return t.add(n)},i.future=function(){function n(){r&&e(t,s,arguments)}var i,s=arguments,r=!1;return i=t.add(n),r=!0,i},i}function s(e){var n,s=e&&r[e];return s||(n=t.Callbacks("memory"),s=i(n),e&&(r[e]=s)),s}var r={};return s._reset=function(){r={}},s}),define("lib/resize",["jquery","lodash","lib/pubSub"],function(t,e,n){"use strict";function i(t){for(var e,i=p;i--;)!e&&t>=h[i].at&&(e=h[i].its);n("sizeGroup").publishUnique(e)}function s(){var t=0,e=c;if(r=window.innerHeight,o=window.innerWidth||document.documentElement.clientWidth,u)t=l;else for(;e--;)!t&&o>=a[e]&&(t=a[e]);n("breakpoint").publishUnique(t),n("height").publishUnique(r),n("width").publishUnique(o)}var r,o,a=[320,480,600,768,1024,1200],l=1024,u=t("html").is(".oldie"),c=a.length,h=[{at:0,its:"oh"},{at:480,its:"xs"},{at:768,its:"sm"},{at:1024,its:"lg"}],p=h.length;return t(window).on("resize",e.throttle(s,100)),s(),n("breakpoint").subscribe(i),n}),define("lib/ga",["jquery","lodash","deferLink","lib/pubSub","lib/resize"],function(t,e,n,i){"use strict";function s(){var t=a.slice.call(arguments),i=this;return function(s){return i.apply(u,t),e.has(s,"originalEvent")&&e.has(this,"nodeName")&&"click"===s.type?n.call(this,s):void 0}}function r(){var t,e=0;i("breakpoint").subscribe(function(n){u("set","dimension1",n),e++&&u.sendEvent("breakpoint","change",t+"|"+n,e),t=n})}function o(e){var n=t(this),i="ga-";e=t.extend(e||{},{category:n.data(i+"category"),action:n.data(i+"action"),label:n.data(i+"label")}),u.sendEvent(e.category,e.action,e.label)}var a=[],l=window,u=l[l.GoogleAnalyticsObject]||t.noop;return e.assign(u,{send:e.partial(u,"send"),set:e.partial(u,"set"),sendEvent:e.partial(u,"send","event"),sendSocial:e.partial(u,"send","social")},function(t,e){return e.recall=s,e}),r(),u.send("pageview"),t(function(){t(document).on("click","a.ga-link",n(function(){return o.call(this,{action:"click",category:"site.link",label:this.href}),50}))}),u}),define("global/links",["jquery","deferLink","lib/ga"],function(t,e,n){"use strict";function i(t){if(t.match(location.origin))return!1;for(var e=-1;++e<a;)if(t.match(o[e].re))return o[e]}function s(e,n,i){e=t.extend({},l,e);for(var s in e)e.hasOwnProperty(s)&&t.isFunction(e[s])&&(e[s]=e[s].call(n,i));return e}function r(t){var r=i(this.href);return r?(n.send(s(r,this,t)),e.call(this,t)):!0}var o=[{re:/^https?:\/\/(?:.*\.)tedprize\.(org|com)/,eventCategory:"link.outbound.tedPrize"},{re:/^https?:\/\/ed\.ted\.com/,eventCategory:"link.outbound.tedEd"},{re:/^https?:\/\/tedfellows\.posterous\.com/,eventCategory:"link.outbound.fellowsBlog"},{re:/^https?:\/\/(?:.*\.)universalsubtitles\.org/,eventCategory:"link.outbound.translatorDashboard"},{re:/^https?:\/\/(?:.*\.)feedburner\.com/,eventCategory:"link.outbound.feedburner"},{re:/^https?:\/\//}],a=o.length,l={hitType:"event",eventCategory:"link.outbound.other",eventAction:"click",eventLabel:function(){return this.href}};return{init:function(){t("body").on("click","a[href]",r)}}}),define("Mailcheck",["exports"],function(){var t={mailcheck:{threshold:3,defaultDomains:["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com"],defaultTopLevelDomains:["co.uk","com","net","org","info","edu","gov","mil"],run:function(e){e.domains=e.domains||t.mailcheck.defaultDomains,e.topLevelDomains=e.topLevelDomains||t.mailcheck.defaultTopLevelDomains,e.distanceFunction=e.distanceFunction||t.sift3Distance;var n=t.mailcheck.suggest(encodeURI(e.email),e.domains,e.topLevelDomains,e.distanceFunction);n?e.suggested&&e.suggested(n):e.empty&&e.empty()},suggest:function(t,e,n,i){t=t.toLowerCase();var s=this.splitEmail(t),r=this.findClosestDomain(s.domain,e,i);if(r){if(r!=s.domain)return{address:s.address,domain:r,full:s.address+"@"+r}}else{var o=this.findClosestDomain(s.topLevelDomain,n);if(s.domain&&o&&o!=s.topLevelDomain){var a=s.domain;return r=a.substring(0,a.lastIndexOf(s.topLevelDomain))+o,{address:s.address,domain:r,full:s.address+"@"+r}}}return!1},findClosestDomain:function(t,e,n){var i,s=99,r=null;if(!t||!e)return!1;n||(n=this.sift3Distance);for(var o=0;o<e.length;o++){if(t===e[o])return t;i=n(t,e[o]),s>i&&(s=i,r=e[o])}return s<=this.threshold&&null!==r?r:!1},sift3Distance:function(t,e){if(null==t||0===t.length)return null==e||0===e.length?0:e.length;if(null==e||0===e.length)return t.length;for(var n=0,i=0,s=0,r=0,o=5;n+i<t.length&&n+s<e.length;){if(t.charAt(n+i)==e.charAt(n+s))r++;else{i=0,s=0;for(var a=0;o>a;a++){if(n+a<t.length&&t.charAt(n+a)==e.charAt(n)){i=a;break}if(n+a<e.length&&t.charAt(n)==e.charAt(n+a)){s=a;break}}}n++}return(t.length+e.length)/2-r},splitEmail:function(t){var e=t.split("@");if(e.length<2)return!1;for(var n=0;n<e.length;n++)if(""===e[n])return!1;var i=e.pop(),s=i.split("."),r="";if(0==s.length)return!1;if(1==s.length)r=s[0];else{for(var n=1;n<s.length;n++)r+=s[n]+".";s.length>=2&&(r=r.substring(0,r.length-1))}return{topLevelDomain:r,domain:i,address:e.join("@")}}}};return window.jQuery&&!function(e){e.fn.mailcheck=function(e){var n=this;if(e.suggested){var i=e.suggested;e.suggested=function(t){i(n,t)}}if(e.empty){var s=e.empty;e.empty=function(){s.call(null,n)}}e.email=this.val(),t.mailcheck.run(e)}}(jQuery),t}),define("lib/newsletter",["jquery","Mailcheck"],function(t,e){"use strict";function n(e){var n=[];return e.isDaily&&n.push("daily"),e.isWeekly&&n.push("weekly"),e.isFellows&&n.push("fellows"),t.getJSON("//www.ted.com/newsletter/signup.json?callback=?",{newsletterSignup:{email_address:e.email,subscription_list:n}})}function i(e){function i(t){"error"===t.status?l.rejectWith(e,[["uncaught"]]):l.resolveWith(e)}function r(){l.rejectWith(e,[["server"]])}function o(){n(e).then(i,r)}function a(t){l.rejectWith(this,[t])}var l=new t.Deferred;return s(e).then(o,a),l}function s(n){var i=[],s=new t.Deferred;return""===n.email&&i.push("blankemail"),(""+n.email).match(/.+@.+/)||i.push("email"),n.isDaily||n.isWeekly||n.isFellows||i.push("subscription"),e.mailcheck.run({email:n.email,suggested:function(t){if(i.push({type:"suggestion",data:t.full}),1===i.length){var n=this.email.match(/@(.+$)/)[1];e.mailcheck.defaultDomains.push(n)}}}),i.length?s.rejectWith(n,[i]):s.resolveWith(n),s.promise()}return e.mailcheck.defaultDomains.push("ted.com"),{ajax:n,subscribe:i,validate:s}}),define("global/subscribe",["jquery","lodash","lib/newsletter","lib/ga"],function(t,e,n,i){"use strict";function s(t){g(),i.sendEvent("newsletter","submit","footer"),a={email:h.val(),isDaily:u.is(":checked"),isWeekly:c.is(":checked")},n.subscribe(a).then(r,o),t.preventDefault()}function r(){i.sendEvent("newsletter","success",e.filter([a.isDaily?"daily":!1,a.isWeekly?"weekly":!1]).join(",")),t(d+"-details").slideUp(f),t(d+"-success").slideDown(f)}function o(e){var n,i,s,r=e[0];if(p.slideUp(f),"object"==typeof r?(n=r.type,i=r.data):n=r,s=t(d+"-error-"+n),s.slideDown(f),i){var o=s.find(".newsletter-signup-error__data");o.text(i),o.click(function(t){t.preventDefault(),h.val(i),p.slideUp(f)})}}var a,l,u,c,h,p,d="#newsletter-signup",f="fast",g=e.once(function(){u=t(d+"-daily"),c=t(d+"-weekly"),h=t(d+"-email"),p=l.find("p.footer-newsletter__error")});return{init:function(){l=t(d),l.on("submit",s)}}}),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define("spinjs",e):t.Spinner=e()}(this,function(){"use strict";function t(t,e){var n,i=document.createElement(t||"div");for(n in e)i[n]=e[n];return i}function e(t){for(var e=1,n=arguments.length;n>e;e++)t.appendChild(arguments[e]);return t}function n(t,e,n,i){var s=["opacity",e,~~(100*t),n,i].join("-"),r=.01+n/i*100,o=Math.max(1-(1-t)/e*(100-r),t),a=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return p[s]||(d.insertRule("@"+l+"keyframes "+s+"{0%{opacity:"+o+"}"+r+"%{opacity:"+t+"}"+(r+.01)+"%{opacity:1}"+(r+e)%100+"%{opacity:"+t+"}100%{opacity:"+o+"}}",d.cssRules.length),p[s]=1),s}function i(t,e){var n,i,s=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<h.length;i++)if(n=h[i]+e,void 0!==s[n])return n;return void 0!==s[e]?e:void 0}function s(t,e){for(var n in e)t.style[i(t,n)||n]=e[n];return t}function r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)void 0===t[i]&&(t[i]=n[i])}return t}function o(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function a(t,e){return"string"==typeof t?t:t[e%t.length]}function l(t){return"undefined"==typeof this?new l(t):void(this.opts=r(t||{},l.defaults,f))}function u(){function n(e,n){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}d.addRule(".spin-vml","behavior:url(#default#VML)"),l.prototype.lines=function(t,i){function r(){return s(n("group",{coordsize:c+" "+c,coordorigin:-u+" "+-u}),{width:c,height:c})}function o(t,o,l){e(p,e(s(r(),{rotation:360/i.lines*t+"deg",left:~~o}),e(s(n("roundrect",{arcsize:i.corners}),{width:u,height:i.width,left:i.radius,top:-i.width>>1,filter:l}),n("fill",{color:a(i.color,t),opacity:i.opacity}),n("stroke",{opacity:0}))))}var l,u=i.length+i.width,c=2*u,h=2*-(i.width+i.length)+"px",p=s(r(),{position:"absolute",top:h,left:h});if(i.shadow)for(l=1;l<=i.lines;l++)o(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=i.lines;l++)o(l);return e(t,p)},l.prototype.opacity=function(t,e,n,i){var s=t.firstChild;i=i.shadow&&i.lines||0,s&&e+i<s.childNodes.length&&(s=s.childNodes[e+i],s=s&&s.firstChild,s=s&&s.firstChild,s&&(s.opacity=n))}}var c,h=["webkit","Moz","ms","O"],p={},d=function(){var n=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),f={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};l.defaults={},r(l.prototype,{spin:function(e){this.stop();var n,i,r=this,a=r.opts,l=r.el=s(t(0,{className:a.className}),{position:a.position,width:0,zIndex:a.zIndex}),u=a.radius+a.length+a.width;if(e&&(e.insertBefore(l,e.firstChild||null),i=o(e),n=o(l),s(l,{left:("auto"==a.left?i.x-n.x+(e.offsetWidth>>1):parseInt(a.left,10)+u)+"px",top:("auto"==a.top?i.y-n.y+(e.offsetHeight>>1):parseInt(a.top,10)+u)+"px"})),l.setAttribute("role","progressbar"),r.lines(l,r.opts),!c){var h,p=0,d=(a.lines-1)*(1-a.direction)/2,f=a.fps,g=f/a.speed,m=(1-a.opacity)/(g*a.trail/100),v=g/a.lines;!function b(){p++;for(var t=0;t<a.lines;t++)h=Math.max(1-(p+(a.lines-t)*v)%g*m,a.opacity),r.opacity(l,t*a.direction+d,h,a);r.timeout=r.el&&setTimeout(b,~~(1e3/f))}()}return r},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(i,r){function o(e,n){return s(t(),{position:"absolute",width:r.length+r.width+"px",height:r.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*u+r.rotate)+"deg) translate("+r.radius+"px,0)",borderRadius:(r.corners*r.width>>1)+"px"})}for(var l,u=0,h=(r.lines-1)*(1-r.direction)/2;u<r.lines;u++)l=s(t(),{position:"absolute",top:1+~(r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:c&&n(r.opacity,r.trail,h+u*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&e(l,s(o("#000","0 0 4px #000"),{top:"2px"})),e(i,e(l,o(a(r.color,u),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)
}});var g=s(t("group"),{behavior:"url(#default#VML)"});return!i(g,"transform")&&g.adj?u():c=i(g,"animation"),l}),define("hbs/underscore",{}),define("hbs/i18nprecompile",["hbs/handlebars","hbs/underscore"],function(t,e){function n(i,s,r){return r=r||{},s=s||{},i&&"program"===i.type&&i.statements&&(e(i.statements).forEach(function(e,o){var a="<!-- i18n error -->";if("mustache"===e.type&&e.id&&"$"===e.id.original){if(e.params.length&&e.params[0].string){var l=e.params[0].string;a=s[l]||(r.originalKeyFallback?l:a)}i.statements[o]=new t.AST.ContentNode(a)}else e.program&&(e.program=n(e.program,s,r))}),i.inverse&&n(i.inverse,s,r)),i}return function(e,i,s){s=s||{};var r,o;return r=t.parse(e),i!==!1&&(r=n(r,i,s)),o=(new t.Compiler).compile(r,s),(new t.JavaScriptCompiler).compile(o,s)}}),function(window){var JSON=window.JSON||{};!function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,s,r,o,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;r>n;n+=1)o[n]=str(n,l)||"null";return s=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+a+"]":"["+o.join(",")+"]",gap=a,s}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;r>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],s=str(i,l),s&&o.push(quote(i)+(gap?": ":":")+s));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(s=str(i,l),s&&o.push(quote(i)+(gap?": ":":")+s));return s=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+a+"}":"{"+o.join(",")+"}",gap=a,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,s=t[e];if(s&&"object"==typeof s)for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(i=walk(s,n),void 0!==i?s[n]=i:delete s[n]);return reviver.call(t,e,s)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("hbs/json2",[],function(){return JSON})}.call(this,this),define("hbs",{load:function(t){throw new Error("Dynamic load not allowed: "+t)}}),define("hbs!templates/latcherFixture",["hbs","hbs/handlebars"],function(t,e){var n=e.template(function(t,e,n){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers);var i="";return i+='\n\n<div class="latcher">\n  <a class="latcher__back" href="#">Main</a>\n</div>\n'});return n}),define("global/navs",["jquery","lib/ga","lib/pubSub","spinjs","hbs!templates/latcherFixture","lib/resize"],function(t,e,n,i,s){"use strict";function r(){return l||(l=new i({className:"spinner spinner--centered"})),l}function o(e,n){var i=e.data("url");n.drillDown("findNext",i,function(e){if(e)e.element.drillDown("show");else{var o=t(s());r().spin(o.get(0)),o.find("a.latcher__back").on("click",function(){n.drillDown("show")}),n.drillDown("queue",o,{id:i}),o.drillDown("show"),t.ajax({url:i,xhrFields:{withCredentials:!0}}).done(function(e){r().stop(),o.append(t(e).find("#submenu").addClass("submenu--fixture").find("a.submenu__heading__link[href=#]").closest("h3").remove().end().end().find("li."+d).removeClass(d).end())})}})}function a(i){var s=n("breakpoint").read()>=1024,r=t(this),a=r.closest("li.nav__item"),l=a.siblings(),u=a.closest("div.shoji__fixture"),d=a.closest("div.drillDown"),f=a.children(h),g=a.hasClass(p),m=r.data("ga-label");if(!a.hasClass("nav__item--disabled")){if(a[s?"addClass":"toggleClass"](p),l.not(c).removeClass(p),!f.length)return void(d.length&&a.hasClass("nav__item--latch")&&(i.preventDefault(),o(r,d)));!g&&m&&a.hasClass(p)&&e.sendEvent("navigation.menu","open",m),(u.length||!s)&&(l.filter(c).removeClass(p).children(h).stop(!0,!0).animate({height:"hide"},200),f.stop(!0,!0).animate({height:"toggle"},200),i.preventDefault())}}var l,u={},c="li.nav__item--foldable",h="div.nav__folder",p="nav__item--active",d="submenu__item--active";return u.init=function(){t(document).on("click","a.nav__link",a)},u}),define("Modernizr",[],function(){"use strict";return window.Modernizr}),define("lib/shoji",["jquery","lodash","Modernizr","lib/pubSub","utils/throwError","lib/resize"],function(t,e,n,i,s){"use strict";function r(e){var n=t(e);return n.hasClass(f)||(n=n.closest("div."+f)),n.length||s("Could not find fixture "+e),n}function o(n,i){var s=t("<div class="+f+">"),r={};return e.defaults(r,i,{at:"left"}),b(),s.addClass(f+"--"+r.at),s.data("at",r.at),s.append(n),s.appendTo(p),s}function a(){return b(),n.csstransforms3d&&d>=320}function l(){b(),t(document.activeElement).blur(),h.removeClass(g+" "+m)}function u(t){var e=r(t);b(),p.children().removeClass(v),e.addClass(v),c(e.data("at"))}function c(t){l(),h.addClass("shoji--opened shoji--"+t)}var h,p,d,f="shoji__fixture",g="shoji--left",m="shoji--right",v=f+"--revealed",b=e.once(function(){h=t("#shoji"),p=t("#shoji-fixtures"),t("#shoji-lattice").on("click",function(){return l(),!1}),i("breakpoint").subscribe(function(t){d=t})});return{_getFixture:r,_init:b,addFixture:o,canSlide:a,concealFixture:l,revealFixture:u,slide:c}}),define("jqueryui/widget",["jquery"],function(t){return function(t,e){var n=0,i=Array.prototype.slice,s=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(r){}s(e)},t.widget=function(e,n,i){var s,r,o,a,l={},u=e.split(".")[0];e=e.split(".")[1],s=u+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][s.toLowerCase()]=function(e){return!!t.data(e,s)},t[u]=t[u]||{},r=t[u][e],o=t[u][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new o(t,e)},t.extend(o,r,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),a=new n,a.options=t.widget.extend({},a.options),t.each(i,function(e,i){return t.isFunction(i)?void(l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},s=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,r=this._superApply;return this._super=t,this._superApply=s,e=i.apply(this,arguments),this._super=n,this._superApply=r,e}}()):void(l[e]=i)}),o.prototype=t.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix||e:e},l,{constructor:o,namespace:u,widgetName:e,widgetFullName:s}),r?(t.each(r._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete r._childConstructors):n._childConstructors.push(o),t.widget.bridge(e,o)},t.widget.extend=function(n){for(var s,r,o=i.call(arguments,1),a=0,l=o.length;l>a;a++)for(s in o[a])r=o[a][s],o[a].hasOwnProperty(s)&&r!==e&&(n[s]=t.isPlainObject(r)?t.isPlainObject(n[s])?t.widget.extend({},n[s],r):t.widget.extend({},r):r);return n},t.widget.bridge=function(n,s){var r=s.prototype.widgetFullName||n;t.fn[n]=function(o){var a="string"==typeof o,l=i.call(arguments,1),u=this;return o=!a&&l.length?t.widget.extend.apply(null,[o].concat(l)):o,this.each(a?function(){var i,s=t.data(this,r);return s?t.isFunction(s[o])&&"_"!==o.charAt(0)?(i=s[o].apply(s,l),i!==s&&i!==e?(u=i&&i.jquery?u.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+o+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+o+"'")}:function(){var e=t.data(this,r);e?e.option(o||{})._init():t.data(this,r,new s(o,this))}),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,i){var s,r,o,a=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(a={},s=n.split("."),n=s.shift(),s.length){for(r=a[n]=t.widget.extend({},this.options[n]),o=0;o<s.length-1;o++)r[s[o]]=r[s[o]]||{},r=r[s[o]];if(n=s.pop(),1===arguments.length)return r[n]===e?null:r[n];r[n]=i}else{if(1===arguments.length)return this.options[n]===e?null:this.options[n];a[n]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,n,i){var s,r=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=s=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,s=this.widget()),t.each(i,function(i,o){function a(){return e||r.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof o?r[o]:o).apply(r,arguments):void 0}"string"!=typeof o&&(a.guid=o.guid=o.guid||a.guid||t.guid++);var l=i.match(/^(\w+)\s*(.*)$/),u=l[1]+r.eventNamespace,c=l[2];c?s.delegate(c,u,a):n.bind(u,a)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var s,r,o=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(s in r)s in n||(n[s]=r[s]);return this.element.trigger(n,i),!(t.isFunction(o)&&o.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,s,r){"string"==typeof s&&(s={effect:s});var o,a=s?s===!0||"number"==typeof s?n:s.effect||n:e;s=s||{},"number"==typeof s&&(s={duration:s}),o=!t.isEmptyObject(s),s.complete=r,s.delay&&i.delay(s.delay),o&&t.effects&&t.effects.effect[a]?i[e](s):a!==e&&i[a]?i[a](s.duration,s.easing,r):i.queue(function(n){t(this)[e](),r&&r.call(i[0]),n()})}})}(t),t}),define("widgets/fixture",["jquery","lodash","lib/shoji","jqueryui/widget"],function(t,e,n){"use strict";var i,s=e.once(function(){i=t("body,html")});return t.widget("ted.fixture",{options:{at:"left",autoReveal:!0,scrollAnimationDuration:200},_create:function(){s(),this.fixture=n.addFixture(this.element.remove(),{at:this.options.at}),this.options.autoReveal&&this.reveal()},reveal:function(){this.options.scrollAnimationDuration&&i.scrollTop()&&i.animate({scrollTop:0},this.options.scrollAnimationDuration),n.revealFixture(this.fixture)},conceal:function(){n.concealFixture()}}),function(e,n){return t(e).fixture(n)}}),define("widgets/drillDown",["jquery","lodash","jqueryui/widget"],function(t,e){"use strict";t.widget("ted.drillDown",{options:{id:null,prev:null,next:null,tense:null},_create:function(){var t=this.options,e=t.prev;t.next||(t.next=[]);var n=t.next.length,i=t.tense;i||(i="present",e&&(i="future"),n&&(i="past")),this.element.addClass("drillDown drillDown--"+i),e?t.prev.after(this.element):n&&t.next[0].element.before(this.element)},next:function(t){return t&&(this.options.next=t),this.options.next},prev:function(t,e){return arguments.length?this.options.prev=this._drify(t,{next:this.element},e):this.options.prev},queue:function(t,e){this.options.next.push(this._drify(t,{prev:this.element},e))},show:function(){var t=this.options;if(t.prev&&t.prev.addClass("drillDown--past"),this._nextEls().addClass("drillDown--future"),this._dShow)this._dShow();else{var n=this.element;this._dShow=function(){n.removeClass("drillDown--past drillDown--future")},e.defer(this._dShow)}},findNext:function(t,e){for(var n,i=this.options.next,s=i.length;s--&&!n;)i[s].options.id===t&&(n=i[s]);return e&&e.call(n,n),n},_drify:function(e,n,i){var s=t(e),r=this.widgetFullName;return s.data(r)||s.drillDown(t.extend(n,i||{})).data(r)},_nextEls:function(){for(var e=t(),n=this.options.next,i=n.length;i--;)e=e.add(n[i].element);return e}})}),define("menuAim",["jquery"],function(t){"use strict";function e(e){var n=t(this),i=null,s=[],r=null,o=null,a=t.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:t.noop,exit:t.noop,activate:t.noop,deactivate:t.noop,exitMenu:t.noop},e),l=3,u=300,c=200,h=function(t){s.push({x:t.pageX,y:t.pageY}),s.length>l&&s.shift()},p=function(){o&&clearTimeout(o),a.exitMenu(this)&&(i&&a.deactivate(i),i=null)},d=function(){o&&clearTimeout(o),a.enter(this),v(this)},f=function(){a.exit(this)},g=function(){m(this)},m=function(t){t!==i&&(i&&a.deactivate(i),a.activate(t),i=t)},v=function(t){var e=b();null===e?o=setTimeout(function(){m(t)},c):e?o=setTimeout(function(){v(t)},e):m(t)},b=function(){function e(t,e){return(e.y-t.y)/(e.x-t.x)}if(!i||!t(i).is(a.submenuSelector))return null;var o=n.offset(),l={x:o.left,y:o.top-a.tolerance},c={x:o.left+n.outerWidth(),y:l.y},h={x:o.left,y:o.top+n.outerHeight()+a.tolerance},p={x:o.left+n.outerWidth(),y:h.y},d=s[s.length-1],f=s[0];if(!d)return 0;if(f||(f=d),f.x<o.left||f.x>p.x||f.y<o.top||f.y>p.y)return 0;if(r&&d.x===r.x&&d.y===r.y)return 0;var g=c,m=p;"left"===a.submenuDirection?(g=h,m=l):"below"===a.submenuDirection?(g=p,m=h):"above"===a.submenuDirection&&(g=l,m=c);var v=e(d,g),b=e(d,m),y=e(f,g),_=e(f,m);return y>v&&b>_?(r=d,u):(r=null,0)};n.mouseleave(p).find(a.rowSelector).mouseenter(d).mouseleave(f).on("touchend",function(e){i&&t(i).is(a.submenuSelector)||(e.preventDefault(),g.apply(this,Array.prototype.slice.call(arguments,0)))}).click(g),t(document).mousemove(h)}return t.fn.menuAim=function(t){return this.each(function(){e.call(this,t)}),this},t}),define("global/mainNav",["jquery","lodash","lib/shoji","lib/pubSub","lib/ga","hbs!templates/latcherFixture","lib/resize","widgets/fixture","widgets/drillDown","menuAim"],function(t,e,n,i,s,r){"use strict";function o(e){if(e.preventDefault(),n.canSlide())if(u)u.fixture("reveal");else{u=t("#banner-core").clone(),u.find("nav.nav--main").removeClass("nav--main"),u.add("*[id]",u).removeAttr("id"),u.find("li.nav__item--latch a").attr("href",function(){var e=t(this),n=e.attr("href");return e.attr("data-url",n),"#"}),u.show(),u.fixture();var i=t("div.shoji__fixture--left #submenu");if(u.drillDown({tense:i.length?"past":"present"}),!i.length)return;var s=t(r()).append(i.clone().addClass("submenu--fixture"));s.find("a.latcher__back").on("click",function(){u.drillDown("show")}),u.drillDown("queue",s,{tense:"present"})}else t("#main-nav").toggleClass("nav--main--open")}function a(e){1024>e||(i("breakpoint").unsubscribe(a),t("#main-nav").find("ul:first > li > a").each(function(){var e=t(this);t('<span class="nav__link nav__link--placeholder" aria-hidden></span>').text(e.text()).insertAfter(e),e.addClass("nav__link--placeheld")}))}function l(){function n(){l=!0,f.trigger("mouseleave")}function r(){return p.read()>=1024}function o(i){1024>i||(p.unsubscribe(o),f.menuAim({activate:function(e){var n=t(e),i=n.find("a.nav__link"),o=i.data("ga-label");return r()?(o&&!n.hasClass(u)&&s.sendEvent("navigation.menu","open",o),n.addClass(u).removeClass(c),void g.addClass(h)):!1},deactivate:function(e){return r()?(t(e).removeClass(u).removeClass(c),void g.removeClass(h)):!1},exitMenu:function(i){return r()?l?(l=!1,!0):(t(i).find("li."+u).addClass(c),a=e.delay(n,d),!1):!1},enter:function(e){return r()?(t(e).removeClass(c),clearTimeout(a),void(a=null)):!1},submenuDirection:"below"}),g.on("click",n))}var a,l,u="nav__item--active",c="nav__item--deactivating",h="main-nav-screen--active",p=i("breakpoint"),d=250,f=t(this).children("ul"),g=t("#main-nav-screen");i("breakpoint").subscribe(o)}var u,c={};return c.init=function(){i("breakpoint").subscribe(a),t("#main-nav-toggle").on("click",o),t("nav.nav--main").each(l)},c}),define("templates/helpers/t",["Handlebars"],function(t){"use strict";t.registerHelper("t",function(t){return t})}),define("hbs!templates/login",["hbs","hbs/handlebars","templates/helpers/t"],function(t,e){var n=e.template(function(t,e,n){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers);var i,s,r="",o=n.helperMissing,a=this.escapeExpression;return r+='\n\n<div class="login-form">\n  <form class="form-vertical" action="https://auth.ted.com/session" method="post">\n    <label class="form-group">\n      <span class="form-label">'+a((i=n.t||e&&e.t,s={hash:{}},i?i.call(e,"Email:",s):o.call(e,"t","Email:",s)))+'</span>\n      <input class="form-control" name="user[email]" type="email">\n    </label>\n\n    <label class="form-group">\n      <span class="form-label">'+a((i=n.t||e&&e.t,s={hash:{}},i?i.call(e,"Password:",s):o.call(e,"t","Password:",s)))+'</span>\n      <input class="form-control" name="user[password]" type="password">\n    </label>\n\n    <div class="form-group">\n      <input class="button button--dark button--wide" type="submit" value="Log in">\n\n      <div>\n        <a class="l3" href="https://auth.ted.com/account/password/new">'+a((i=n.t||e&&e.t,s={hash:{}},i?i.call(e,"Need help logging in?",s):o.call(e,"t","Need help logging in?",s)))+'</a>\n      </div>\n    </div>\n  </form>\n\n  <div class="login-form__or"></div>\n\n  <div>\n    <a class="button button--wide button--dark button--facebook" href="/account/auth/facebook">'+a((i=n.t||e&&e.t,s={hash:{}},i?i.call(e,"Log in with Facebook",s):o.call(e,"t","Log in with Facebook",s)))+"</a>\n  </div>\n\n  <div>\n    "+a((i=n.t||e&&e.t,s={hash:{}},i?i.call(e,"Don't have a TED account?",s):o.call(e,"t","Don't have a TED account?",s)))+'\n    <a class="l3" href="https://auth.ted.com/users/new">'+a((i=n.t||e&&e.t,s={hash:{}},i?i.call(e,"Sign up",s):o.call(e,"t","Sign up",s)))+"</a>\n  </div>\n</div>\n"});return n}),define("jqueryui/position",["jquery"],function(t){return function(t,e){function n(t,e,n){return[parseFloat(t[0])*(d.test(t[0])?e/100:1),parseFloat(t[1])*(d.test(t[1])?n/100:1)]}function i(e,n){return parseInt(t.css(e,n),10)||0}function s(e){var n=e[0];return 9===n.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(n)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var r,o=Math.max,a=Math.abs,l=Math.round,u=/left|center|right/,c=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,p=/^\w+/,d=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(r!==e)return r;var n,i,s=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return t("body").append(s),n=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,n===i&&(i=s[0].clientWidth),s.remove(),r=n-i},getScrollInfo:function(e){var n=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),s="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth,r="scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight;return{width:r?t.position.scrollbarWidth():0,height:s?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=t.isWindow(n[0]),s=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:s,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var r,d,g,m,v,b,y=t(e.of),_=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(_),k=(e.collision||"flip").split(" "),x={};return b=s(y),y[0].preventDefault&&(e.at="left top"),d=b.width,g=b.height,m=b.offset,v=t.extend({},m),t.each(["my","at"],function(){var t,n,i=(e[this]||"").split(" ");1===i.length&&(i=u.test(i[0])?i.concat(["center"]):c.test(i[0])?["center"].concat(i):["center","center"]),i[0]=u.test(i[0])?i[0]:"center",i[1]=c.test(i[1])?i[1]:"center",t=h.exec(i[0]),n=h.exec(i[1]),x[this]=[t?t[0]:0,n?n[0]:0],e[this]=[p.exec(i[0])[0],p.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===e.at[0]?v.left+=d:"center"===e.at[0]&&(v.left+=d/2),"bottom"===e.at[1]?v.top+=g:"center"===e.at[1]&&(v.top+=g/2),r=n(x.at,d,g),v.left+=r[0],v.top+=r[1],this.each(function(){var s,u,c=t(this),h=c.outerWidth(),p=c.outerHeight(),f=i(this,"marginLeft"),b=i(this,"marginTop"),S=h+f+i(this,"marginRight")+w.width,E=p+b+i(this,"marginBottom")+w.height,C=t.extend({},v),T=n(x.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?C.left-=h:"center"===e.my[0]&&(C.left-=h/2),"bottom"===e.my[1]?C.top-=p:"center"===e.my[1]&&(C.top-=p/2),C.left+=T[0],C.top+=T[1],t.support.offsetFractions||(C.left=l(C.left),C.top=l(C.top)),s={marginLeft:f,marginTop:b},t.each(["left","top"],function(n,i){t.ui.position[k[n]]&&t.ui.position[k[n]][i](C,{targetWidth:d,targetHeight:g,elemWidth:h,elemHeight:p,collisionPosition:s,collisionWidth:S,collisionHeight:E,offset:[r[0]+T[0],r[1]+T[1]],my:e.my,at:e.at,within:_,elem:c})}),e.using&&(u=function(t){var n=m.left-C.left,i=n+d-h,s=m.top-C.top,r=s+g-p,l={target:{element:y,left:m.left,top:m.top,width:d,height:g},element:{element:c,left:C.left,top:C.top,width:h,height:p},horizontal:0>i?"left":n>0?"right":"center",vertical:0>r?"top":s>0?"bottom":"middle"};h>d&&a(n+i)<d&&(l.horizontal="center"),p>g&&a(s+r)<g&&(l.vertical="middle"),l.important=o(a(n),a(i))>o(a(s),a(r))?"horizontal":"vertical",e.using.call(this,t,l)}),c.offset(t.extend(C,{using:u}))})},t.ui.position={fit:{left:function(t,e){var n,i=e.within,s=i.isWindow?i.scrollLeft:i.offset.left,r=i.width,a=t.left-e.collisionPosition.marginLeft,l=s-a,u=a+e.collisionWidth-r-s;e.collisionWidth>r?l>0&&0>=u?(n=t.left+l+e.collisionWidth-r-s,t.left+=l-n):t.left=u>0&&0>=l?s:l>u?s+r-e.collisionWidth:s:l>0?t.left+=l:u>0?t.left-=u:t.left=o(t.left-a,t.left)},top:function(t,e){var n,i=e.within,s=i.isWindow?i.scrollTop:i.offset.top,r=e.within.height,a=t.top-e.collisionPosition.marginTop,l=s-a,u=a+e.collisionHeight-r-s;e.collisionHeight>r?l>0&&0>=u?(n=t.top+l+e.collisionHeight-r-s,t.top+=l-n):t.top=u>0&&0>=l?s:l>u?s+r-e.collisionHeight:s:l>0?t.top+=l:u>0?t.top-=u:t.top=o(t.top-a,t.top)}},flip:{left:function(t,e){var n,i,s=e.within,r=s.offset.left+s.scrollLeft,o=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,u=t.left-e.collisionPosition.marginLeft,c=u-l,h=u+e.collisionWidth-o-l,p="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,d="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(n=t.left+p+d+f+e.collisionWidth-o-r,(0>n||n<a(c))&&(t.left+=p+d+f)):h>0&&(i=t.left-e.collisionPosition.marginLeft+p+d+f-l,(i>0||a(i)<h)&&(t.left+=p+d+f))},top:function(t,e){var n,i,s=e.within,r=s.offset.top+s.scrollTop,o=s.height,l=s.isWindow?s.scrollTop:s.offset.top,u=t.top-e.collisionPosition.marginTop,c=u-l,h=u+e.collisionHeight-o-l,p="top"===e.my[1],d=p?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>c?(i=t.top+d+f+g+e.collisionHeight-o-r,t.top+d+f+g>c&&(0>i||i<a(c))&&(t.top+=d+f+g)):h>0&&(n=t.top-e.collisionPosition.marginTop+d+f+g-l,t.top+d+f+g>h&&(n>0||a(n)<h)&&(t.top+=d+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,n,i,s,r,o=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(o?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&t.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(r in i)e.style[r]=i[r];e.appendChild(a),n=o||document.documentElement,n.insertBefore(e,n.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",s=t(a).offset().left,t.support.offsetFractions=s>10&&11>s,e.innerHTML="",n.removeChild(e)}()}(t),t}),define("widgets/popup",["jquery","lodash","jqueryui/widget","jqueryui/position"],function(t,e){"use strict";function n(t,e){this.element.removeClass(o).css(t).addClass(s+e.horizontal+" "+s+("center"===e.vertical?"middle":e.vertical))}for(var i=300,s="popup--tailed--",r=["center","left","middle","right","bottom","top"],o="",a=r.length;a--;)o+=s+r[a]+" ";return t.widget("ted.popup",{options:{position:{my:"center bottom-20",at:"center top",of:window,collision:"fit flip"},inverse:!1,tail:!0},_create:function(){this.options.position.using||(this.options.position.using=e.bind(n,this)),this.element.addClass("popup"+(this.options.tail?" popup--tailed":"")+(this.options.inverse?" popup--inverse":" inverse"))},_isOpen:!1,open:function(t){var e=this;e._trigger("beforeOpen",t)!==!1&&(e.position(),e._isOpen=!0,e.element.removeClass("popup--hide").addClass("popup--show"),e._trigger("open"))},close:function(t){var e=this,n=e.element;e._trigger("beforeClose",t)!==!1&&(e._isOpen=!1,n.addClass("popup--hide"),setTimeout(function(){e._isOpen||n.removeClass("popup--show")},i),e._trigger("close"))},position:function(){this.element.addClass("popup--positioning").position(this.options.position).removeClass("popup--positioning")}}),function(e,n){return t(e).popup(n)}}),define("widgets/tooltip",["jquery","lodash","jqueryui/widget","widgets/popup"],function(t){"use strict";var e;return t.widget("ted.tooltip",{options:{content:"",interactive:!1,interactiveTolerance:350,position:{},openDelay:0,supportTouch:!0,allowClick:!1},_create:function(){var n;e||(e=t(document.body)),this.element.addClass("tooltip"),this.options.position.of=this.element,this.popupObject=t("<div class=tooltip__popup>").append(this.options.content).popup(this.options).insertAfter(this.element),n=this.element,this.options.interactive&&(n=n.add(this.popupObject)),this._on(n,this._handleEvents),this._on(t("#shoji"),{click:function(e){!this._isOpened||this.options.interactive&&t(e.target).closest(this.popupObject).length||(this._isOpened=!1,this.popupObject.popup("close"))}})},_isHoverClickEnabled:!1,_isFirstTouch:!1,_isTouched:!1,_isMousedOver:!1,_handleEvents:{touchstart:function(){this._isTouched=!0,this._isHoverClickEnabled||(this._isFirstTouch=!0)},mouseover:function(t){var e=this,n=e.options.openDelay||0;(this.options.supportTouch||!this._isTouched)&&(this._isMousedOver=!0,this._isOpened&&(n=0),clearTimeout(this.timeout),this.timeout=setTimeout(function(){e._isMousedOver&&e.openPopup(t)},n))},mouseout:function(t){var e=this,n=this.options.interactiveTolerance||0;this._isMousedOver=!1,this._isOpened||(n=0),clearTimeout(this.timeout),this.timeout=setTimeout(function(){e._isMousedOver||e.closePopup(t)},n)},click:function(e){t(e.target).closest(this.element).length&&((this.options.supportTouch||!this._isTouched)&&(this.openPopup(e),!this._isFirstTouch&&this._isHoverClickEnabled&&this._trigger("hoverclick",e),this._isFirstTouch=!1),this.options.allowClick||(e.preventDefault(),e.stopPropagation()))},popupopen:function(){this._isHoverClickEnabled=!0},popupclose:function(){this._isHoverClickEnabled=!1}},_setOption:function(t,e){"content"===t&&this.popupObject.html(e)},openPopup:function(t){this._isOpened=!0,this.popupObject.popup("open",t)},closePopup:function(t){this.popupObject.popup("close",t),this._off(e,"click"),this._isOpened=!1},popup:function(){return this.popupObject}}),function(e,n){return t(e).tooltip(n)}}),define("global/login",["jquery","lib/shoji","lib/pubSub","hbs!templates/login","lib/resize","widgets/fixture","widgets/tooltip"],function(t,e,n,i){"use strict";function s(s){var r=n("breakpoint").read()>=1024;if(u&&!r&&e.canSlide())return s.preventDefault(),a?void a.fixture("reveal"):void(a=t(i()).fixture({at:"right"}))}function r(t){1024>t||u&&(n("breakpoint").unsubscribe(r),o.tooltip({content:i(),interactive:!0,position:{my:"right bottom-20",at:"right top",of:window,collision:"fit flip"},beforeOpen:function(){return n("breakpoint").read()>=1024}}))}var o,a,l={},u=!1;return l.init=function(){o=t("#login-link"),o.on("click",s),n("breakpoint").subscribe(r)},l}),function(t){"use strict";var e=function(t,n,i){return 1===arguments.length?e.get(t):e.set(t,n,i)};e._document=document,e._navigator=navigator,e.defaults={path:"/"},e.get=function(t){return e._cachedDocumentCookie!==e._document.cookie&&e._renewCache(),e._cache[t]},e.set=function(n,i,s){return s=e._getExtendedOptions(s),s.expires=e._getExpiresDate(i===t?-1:s.expires),e._document.cookie=e._generateCookieString(n,i,s),e},e.expire=function(n,i){return e.set(n,t,i)},e._getExtendedOptions=function(n){return{path:n&&n.path||e.defaults.path,domain:n&&n.domain||e.defaults.domain,expires:n&&n.expires||e.defaults.expires,secure:n&&n.secure!==t?n.secure:e.defaults.secure}},e._isValidDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())},e._getExpiresDate=function(t,n){switch(n=n||new Date,typeof t){case"number":t=new Date(n.getTime()+1e3*t);
break;case"string":t=new Date(t)}if(t&&!e._isValidDate(t))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return t},e._generateCookieString=function(t,e,n){t=encodeURIComponent(t),e=(e+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),n=n||{};var i=t+"="+e;return i+=n.path?";path="+n.path:"",i+=n.domain?";domain="+n.domain:"",i+=n.expires?";expires="+n.expires.toGMTString():"",i+=n.secure?";secure":""},e._getCookieObjectFromString=function(n){for(var i={},s=n?n.split("; "):[],r=0;r<s.length;r++){var o=e._getKeyValuePairFromCookieString(s[r]);i[o.key]===t&&(i[o.key]=o.value)}return i},e._getKeyValuePairFromCookieString=function(t){var e=t.indexOf("=");return e=0>e?t.length:e,{key:decodeURIComponent(t.substr(0,e)),value:decodeURIComponent(t.substr(e+1))}},e._renewCache=function(){e._cache=e._getCookieObjectFromString(e._document.cookie),e._cachedDocumentCookie=e._document.cookie},e._areEnabled=function(){return e._navigator.cookieEnabled||"1"===e.set("cookies.js",1).get("cookies.js")},e.enabled=e._areEnabled(),"function"==typeof define&&define.amd?define("Cookies",[],function(){return e}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.Cookies=e):window.Cookies=e}(),define("lib/currentUserId",["Cookies"],function(t){"use strict";var e="_ted_user_id";return{get:function(){return t.get(e)}}}),define("lib/personalStorage",["lodash","Modernizr","exports","lib/currentUserId"],function(t,e,n,i){"use strict";function s(e,i){var s=t.toArray(arguments);return n.storageAdapter?(s[1]=n.getKey(i),e.apply(n.storageAdapter,s.slice(1))):!1}n.storageAdapter=e.localstorage?window.localStorage:void 0,n.getKey=function(t){var e=i.get();return e||(e="0"),e+"-"+t},n.getItem=t.wrap(function(t){return n.storageAdapter.getItem(t)},s),n.setItem=t.wrap(function(t,e){n.storageAdapter.setItem(t,e)},s),n.removeItem=t.wrap(function(t){n.storageAdapter.removeItem(t)},s)}),define("lib/currentUser",["jquery","lodash","lib/currentUserId","lib/personalStorage"],function(t,e,n,i){"use strict";function s(t){return e.isFinite(t)?+t:null}function r(t){return t?""+t:null}function o(t){return t=e.pick(t,E),e.forOwn(t,function(e,n){t[n]=S[n](e)}),t}function a(t){return t&&JSON.parse(t)}function l(){return o(a(w.storageAdapter.getItem(k)))}function u(){return t.ajax({dataType:"json",url:"/me",data:{c:n.get()+"-"+Math.round(+new Date/1e3/120)},timeout:3e3})}function c(t){u().then(e.bind(h,w,t),e.bind(p,w,t))}function h(t,e){if(!e)return void p(t,e);if(e.unavailable&&e.unavailable.length)for(var n=l(),i=e.unavailable,s=i.length;s--;)e[i[s]]=n[i[s]]||e[i[s]];e.lastDownloaded=(new Date).getTime(),v=o(e),m(t)&&w.storageAdapter.setItem(k,JSON.stringify(v))}function p(t){d(),t.reject()}function d(){v=null,w.storageAdapter.removeItem(k),t(document.documentElement).removeClass("loggedin").addClass("loggedout")}function f(t,e){var n=(new Date).getTime();return t>n-(e||0)}function g(){return w._check(v)}function m(t){var e=g();return e?t.resolve(v):(d(),t.reject()),e}var v,b=function(t){return!!t},y=function(t){return t},_=t.Deferred,w={},k="me",x=!0,S={id:s,profileId:s,firstName:r,lastName:r,avatarUrl:r,hasConferences:b,upcomingConferences:y,isCommentModerator:b,hasEdActivity:b,isTEDxOrganizer:b,lastDownloaded:s},E=e.keys(S);return w.storageAdapter=i,w.getDetails=function(){var t=new _;return v=v||l(),g()||(v=null),v?(t.resolve(v),x&&!f(18e4,v.lastDownloaded)&&(x=!1,c(new _))):n.get()?c(t):t.reject(),t.promise()},w._check=function(t){var i=864e5;return t&&+t.id===+n.get()&&E.length===e.keys(e.pick(t,E)).length&&f(i,t.lastDownloaded)},w._reset=function(){v=void 0,x=!0},w}),define("lib/watchLaterLocal",["exports","jquery","lodash","Modernizr","lib/currentUserId","lib/personalStorage"],function(t,e,n,i,s,r){"use strict";function o(t){return+t.split("|",1).pop()}function a(t){return(t.match(/(\|\d+)+/)||"|")[0]+"|"}function l(e){var n=new u,i=n.promise(),s=t._checkCapability();return s!==!0?(n.reject(s),i):(e.apply(n,Array.prototype.splice.call(arguments,1)),i)}var u=e.Deferred,c="wl",h=null,p=18e4,d=null;t.addPlaylist=function(e){return t._add("playlists",e)},t.addTalk=function(e){return t._add("talks",e)},t.checkPlaylist=function(e){return t._check("playlists",e)},t.checkTalk=function(e){return t._check("talks",e)},t.count=n.wrap(function(){var e=this;t._getCache().then(function(t){e.resolve({total:t.talksCount+t.playlistsCount,talks:t.talksCount,playlists:t.playlistsCount})},function(t){e.reject(t)})},l),t.removePlaylist=function(e){return t._remove("playlists",e)},t.removeTalk=function(e){return t._remove("talks",e)},t.sync=n.wrap(function(){if(d)return d;var i=this;return d=i.promise(),e.get("/saved_items/sync.txt").then(function(e){return e=+new Date+";"+e,(h=t._fromS(e))?(r.setItem(c,e),void i.resolve(h)):void i.reject(new Error("Invalid response"))},function(){i.reject(new Error("Rejected by server"))}).always(n.delay(function(){d=null},p)),d},l),t._add=n.wrap(function(e,n){var i=this;t._check(e,n).then(function(s){s||(h[e+"List"]+=n+"|",h[e+"Count"]++,r.setItem(c,t._toS(h))),i.resolve(h)},function(t){i.reject(t)})},l),t._check=n.wrap(function(e,n){var i=this;t._getCache().then(function(t){i.resolve(-1!==t[e+"List"].indexOf("|"+n+"|"))},function(t){i.reject(t)})},l),t._checkCapability=function(){return i.localstorage?s.get()?!0:new Error("Not logged in"):new Error("No localStorage")},t._getCache=function(){var e=new u,n=e.promise();return h?(e.resolve(h),n):(h=t._fromS(r.getItem(c)),h?(e.resolve(h),+new Date-+h.lastSync>p&&t.sync()):t.sync().then(function(){e.resolve(h)},function(t){e.reject(t)}),n)},t._remove=n.wrap(function(e,n){var i=this;t._check(e,n).then(function(s){s&&(h[e+"List"]=h[e+"List"].replace("|"+n+"|","|"),h[e+"Count"]--,r.setItem(c,t._toS(h))),i.resolve(h)},function(t){i.reject(t)})},l),t._reset=function(){h=null,d=null},t._fromS=function(t){if(!t)return null;if(!t.match(/^\d+;\d+(\|\d+)*;\d+(\|\d+)*$/))return null;var e=t.split(";");return{lastSync:+e[0],talksCount:o(e[1]),talksList:a(e[1]),playlistsCount:o(e[2]),playlistsList:a(e[2])}},t._toS=function(t){return t?[t.lastSync,t.talksCount+t.talksList.slice(0,-1),t.playlistsCount+t.playlistsList.slice(0,-1)].join(";"):null}}),define("utils/monogram",["jquery"],function(t){"use strict";return function(e){return(e=t.trim(e))?(e=e.split(",")[0],e=e.replace(/\s[a-z]\w+\s/g," "),e=e.replace(/\s\w+\.$/,""),e=e.replace(/\s[A-Z]+$/,""),e=e.replace(/[^\s\w]+([\w])/g,"$1"),e=t.trim(e).toUpperCase().split(/\s+/),e[0][0]+(e.length>1?e[e.length-1][0]:"")):""}}),define("hbs!templates/accountFixture",["hbs","hbs/handlebars","templates/helpers/t"],function(t,e){var n=e.template(function(t,e,n,i,s){function r(t,e){var i,s="";return s+="\n        ",i=n["if"].call(t,t&&t.items,{hash:{},inverse:y.program(10,h,e),fn:y.program(2,o,e)}),(i||0===i)&&(s+=i),s+="\n      "}function o(t,e){var i,s,r="";return r+='\n          <li class="nav__item nav__item--foldable ',i=n["if"].call(t,t&&t.open,{hash:{},inverse:y.noop,fn:y.program(3,a,e)}),(i||0===i)&&(r+=i),r+='">\n            <a class="nav__link" href="#">',(s=n.name)?i=s.call(t,{hash:{}}):(s=t&&t.name,i=typeof s===v?s.call(t,{hash:{}}):s),r+=b(i)+'</a>\n            <div class="nav__folder" ',i=n["if"].call(t,t&&t.open,{hash:{},inverse:y.noop,fn:y.program(5,l,e)}),(i||0===i)&&(r+=i),r+='>\n              <ul class="nav__menu">\n                ',i=n.each.call(t,t&&t.items,{hash:{},inverse:y.noop,fn:y.program(7,u,e)}),(i||0===i)&&(r+=i),r+="\n              </ul>\n            </div>\n          </li>\n        "}function a(){return"nav__item--active"}function l(){return'style="display:block"'}function u(t,e){var i,s,r="";return r+='\n                  <li class="nav__item">\n                    <a class="nav__link" href="',(s=n.url)?i=s.call(t,{hash:{}}):(s=t&&t.url,i=typeof s===v?s.call(t,{hash:{}}):s),r+=b(i)+'" ',i=n["if"].call(t,t&&t.external,{hash:{},inverse:y.noop,fn:y.program(8,c,e)}),(i||0===i)&&(r+=i),r+=">",(s=n.name)?i=s.call(t,{hash:{}}):(s=t&&t.name,i=typeof s===v?s.call(t,{hash:{}}):s),r+=b(i)+"</a>\n                  </li>\n                "}function c(){return'target="_blank"'}function h(t,e){var i,s,r="";return r+='\n          <li class="nav__item ',i=n["if"].call(t,t&&t.latch,{hash:{},inverse:y.noop,fn:y.program(11,p,e)}),(i||0===i)&&(r+=i),r+='">\n            <a class="nav__link" href="',(s=n.url)?i=s.call(t,{hash:{}}):(s=t&&t.url,i=typeof s===v?s.call(t,{hash:{}}):s),r+=b(i)+'" ',i=n["if"].call(t,t&&t.external,{hash:{},inverse:y.noop,fn:y.program(8,c,e)}),(i||0===i)&&(r+=i),r+=">",(s=n.name)?i=s.call(t,{hash:{}}):(s=t&&t.name,i=typeof s===v?s.call(t,{hash:{}}):s),r+=b(i)+"</a>\n          </li>\n        "}function p(){return"nav__item--latch"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers);var d,f,g,m="",v="function",b=this.escapeExpression,y=this,_=n.helperMissing;return m+='\n\n<div class="account__fixture">\n  <div class="account__fixture__welcome">\n    <h2 class="h6">'+b((f=n.t||e&&e.t,g={hash:{}},f?f.call(e,"Hi ",g):_.call(e,"t","Hi ",g)))+b((d=e&&e.user,d=null==d||d===!1?d:d.firstName,typeof d===v?d.apply(e):d))+",</h2>\n    <div>"+b((f=n.t||e&&e.t,g={hash:{}},f?f.call(e,"This is your stuff.",g):_.call(e,"t","This is your stuff.",g)))+'</div>\n  </div>\n\n  <nav class="nav">\n    <ul class="nav__menu">\n      ',d=n.each.call(e,e&&e.items,{hash:{},inverse:y.noop,fn:y.program(1,r,s)}),(d||0===d)&&(m+=d),m+="\n    </ul>\n  </nav>\n</div>\n"});return n}),define("hbs!templates/accountPoparoo",["hbs","hbs/handlebars","templates/helpers/t"],function(t,e){var n=e.template(function(t,e,n,i,s){function r(){return"account__poparoo__later--populated"}function o(t){var e,i,s,r="";return r+='\n      <li class="account__poparoo__item">\n        <a class="l3" href="/profiles/'+f((e=t&&t.user,e=null==e||e===!1?e:e.profileId,typeof e===d?e.apply(t):e))+'/tedx-event-management">\n          '+f((i=n.t||t&&t.t,s={hash:{}},i?i.call(t,"TEDx Events",s):g.call(t,"t","TEDx Events",s)))+"\n        </a>\n      </li>\n    "}function a(t){var e,i,s,r="";return r+='\n      <li class="account__poparoo__item">\n        <a class="l3" href="'+f((e=t&&t.itemUrls,e=null==e||e===!1?e:e.conferences,typeof e===d?e.apply(t):e))+'">\n          '+f((i=n.t||t&&t.t,s={hash:{}},i?i.call(t,"Conferences",s):g.call(t,"t","Conferences",s)))+"\n        </a>\n      </li>\n    "}function l(t){var e,i,s,r="";return r+='\n      <li class="account__poparoo__item">\n        <a class="l3" href="'+f((e=t&&t.itemUrls,e=null==e||e===!1?e:e.tedEdHistory,typeof e===d?e.apply(t):e))+'" target="_blank">\n          '+f((i=n.t||t&&t.t,s={hash:{}},i?i.call(t,"Your activity on TED-Ed",s):g.call(t,"t","Your activity on TED-Ed",s)))+"\n        </a>\n      </li>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers);var u,c,h,p="",d="function",f=this.escapeExpression,g=n.helperMissing,m=this;return p+='\n\n<div class="account__poparoo">\n  <h2>'+f((c=n.t||e&&e.t,h={hash:{}},c?c.call(e,"Hi ",h):g.call(e,"t","Hi ",h)))+f((u=e&&e.user,u=null==u||u===!1?u:u.firstName,typeof u===d?u.apply(e):u))+",</h2>\n  <div>"+f((c=n.t||e&&e.t,h={hash:{}},c?c.call(e,"This is your stuff.",h):g.call(e,"t","This is your stuff.",h)))+'</div>\n\n  <ul class="account__poparoo__menu">\n    <li class="account__poparoo__item" id="account-talks">\n      <a class="l3" href="'+f((u=e&&e.itemUrls,u=null==u||u===!1?u:u.savedTalks,typeof u===d?u.apply(e):u))+'">\n        '+f((c=n.t||e&&e.t,h={hash:{}},c?c.call(e,"Saved talks",h):g.call(e,"t","Saved talks",h)))+'\n      </a>\n\n      <a class="account__poparoo__later ',u=n["if"].call(e,e&&e.savedTalksCount,{hash:{},inverse:m.noop,fn:m.program(1,r,s)}),(u||0===u)&&(p+=u),p+='" href="'+f((u=e&&e.itemUrls,u=null==u||u===!1?u:u.savedTalks,typeof u===d?u.apply(e):u))+'">\n        <span class="account__poparoo__later__count">',(c=n.savedTalksCount)?u=c.call(e,{hash:{}}):(c=e&&e.savedTalksCount,u=typeof c===d?c.call(e,{hash:{}}):c),p+=f(u)+'</span>\n      </a>\n    </li>\n\n    <li class="account__poparoo__item" id="account-playlists">\n      <a class="l3" href="'+f((u=e&&e.itemUrls,u=null==u||u===!1?u:u.savedPlaylists,typeof u===d?u.apply(e):u))+'">\n        '+f((c=n.t||e&&e.t,h={hash:{}},c?c.call(e,"Saved playlists",h):g.call(e,"t","Saved playlists",h)))+'\n      </a>\n\n      <a class="account__poparoo__later ',u=n["if"].call(e,e&&e.savedPlaylistsCount,{hash:{},inverse:m.noop,fn:m.program(1,r,s)}),(u||0===u)&&(p+=u),p+='" href="'+f((u=e&&e.itemUrls,u=null==u||u===!1?u:u.savedPlaylists,typeof u===d?u.apply(e):u))+'">\n        <span class="account__poparoo__later__count">',(c=n.savedPlaylistsCount)?u=c.call(e,{hash:{}}):(c=e&&e.savedPlaylistsCount,u=typeof c===d?c.call(e,{hash:{}}):c),p+=f(u)+'</span>\n      </a>\n    </li>\n\n    <li class="account__poparoo__item">\n      <a class="l3" href="'+f((u=e&&e.itemUrls,u=null==u||u===!1?u:u.favoriteTalks,typeof u===d?u.apply(e):u))+'">\n        '+f((c=n.t||e&&e.t,h={hash:{}},c?c.call(e,"Favorite talks",h):g.call(e,"t","Favorite talks",h)))+'\n      </a>\n    </li>\n\n    <li class="account__poparoo__item">\n      <a class="l3" href="'+f((u=e&&e.itemUrls,u=null==u||u===!1?u:u.favoritePlaylists,typeof u===d?u.apply(e):u))+'">\n        '+f((c=n.t||e&&e.t,h={hash:{}},c?c.call(e,"Favorite playlists",h):g.call(e,"t","Favorite playlists",h)))+"\n      </a>\n    </li>\n\n    ",u=n["if"].call(e,(u=e&&e.user,null==u||u===!1?u:u.isTEDxOrganizer),{hash:{},inverse:m.noop,fn:m.program(3,o,s)}),(u||0===u)&&(p+=u),p+="\n\n    ",u=n["if"].call(e,(u=e&&e.user,null==u||u===!1?u:u.hasConferences),{hash:{},inverse:m.noop,fn:m.program(5,a,s)}),(u||0===u)&&(p+=u),p+="\n\n    ",u=n["if"].call(e,(u=e&&e.user,null==u||u===!1?u:u.hasEdActivity),{hash:{},inverse:m.noop,fn:m.program(7,l,s)}),(u||0===u)&&(p+=u),p+='\n\n    <li class="account__poparoo__item">\n      <a class="l3" href="'+f((u=e&&e.itemUrls,u=null==u||u===!1?u:u.settings,typeof u===d?u.apply(e):u))+'">\n        '+f((c=n.t||e&&e.t,h={hash:{}},c?c.call(e,"Settings",h):g.call(e,"t","Settings",h)))+'\n      </a>\n    </li>\n\n    <li class="account__poparoo__item">\n      <a class="l3" href="'+f((u=e&&e.itemUrls,u=null==u||u===!1?u:u.profile,typeof u===d?u.apply(e):u))+'">\n        '+f((c=n.t||e&&e.t,h={hash:{}},c?c.call(e,"Your profile",h):g.call(e,"t","Your profile",h)))+'\n      </a>\n    </li>\n  </ul>\n\n  <a class="account__poparoo__leave" href="'+f((u=e&&e.itemUrls,u=null==u||u===!1?u:u.logOut,typeof u===d?u.apply(e):u))+'">'+f((c=n.t||e&&e.t,h={hash:{}},c?c.call(e,"Log out",h):g.call(e,"t","Log out",h)))+"</a>\n</div>\n"});return n}),define("transit",["jquery"],function(t){return function(t){function e(t){if(t in h.style)return t;var e=["Moz","Webkit","O","ms"],n=t.charAt(0).toUpperCase()+t.substr(1);if(t in h.style)return t;for(var i=0;i<e.length;++i){var s=e[i]+n;if(s in h.style)return s}}function n(){return h.style[p.transform]="",h.style[p.transform]="rotateY(90deg)",""!==h.style[p.transform]}function i(t){return"string"==typeof t&&this.parse(t),this}function s(t,e,n){e===!0?t.queue(n):e?t.queue(e,n):n()}function r(e){var n=[];return t.each(e,function(e){e=t.camelCase(e),e=t.transit.propertyMap[e]||t.cssProps[e]||e,e=l(e),-1===t.inArray(e,n)&&n.push(e)}),n}function o(e,n,i,s){var o=r(e);t.cssEase[i]&&(i=t.cssEase[i]);var a=""+c(n)+" "+i;parseInt(s,10)>0&&(a+=" "+c(s));var l=[];return t.each(o,function(t,e){l.push(e+" "+a)}),l.join(", ")}function a(e,n){n||(t.cssNumber[e]=!0),t.transit.propertyMap[e]=p.transform,t.cssHooks[e]={get:function(n){var i=t(n).css("transit:transform");return i.get(e)},set:function(n,i){var s=t(n).css("transit:transform");s.setFromString(e,i),t(n).css({"transit:transform":s})}}}function l(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function u(t,e){return"string"!=typeof t||t.match(/^[\-0-9\.]+$/)?""+t+e:t}function c(e){var n=e;return t.fx.speeds[n]&&(n=t.fx.speeds[n]),u(n,"ms")}t.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var h=document.createElement("div"),p={},d=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;p.transition=e("transition"),p.transitionDelay=e("transitionDelay"),p.transform=e("transform"),p.transformOrigin=e("transformOrigin"),p.transform3d=n();var f={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},g=p.transitionEnd=f[p.transition]||null;for(var m in p)p.hasOwnProperty(m)&&"undefined"==typeof t.support[m]&&(t.support[m]=p[m]);h=null,t.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},t.cssHooks["transit:transform"]={get:function(e){return t(e).data("transform")||new i},set:function(e,n){var s=n;s instanceof i||(s=new i(s)),e.style[p.transform]="WebkitTransform"!==p.transform||d?s.toString():s.toString(!0),t(e).data("transform",s)}},t.cssHooks.transform={set:t.cssHooks["transit:transform"].set},t.fn.jquery<"1.8"&&(t.cssHooks.transformOrigin={get:function(t){return t.style[p.transformOrigin]},set:function(t,e){t.style[p.transformOrigin]=e}},t.cssHooks.transition={get:function(t){return t.style[p.transition]},set:function(t,e){t.style[p.transition]=e}}),a("scale"),a("translate"),a("rotate"),a("rotateX"),a("rotateY"),a("rotate3d"),a("perspective"),a("skewX"),a("skewY"),a("x",!0),a("y",!0),i.prototype={setFromString:function(t,e){var n="string"==typeof e?e.split(","):e.constructor===Array?e:[e];n.unshift(t),i.prototype.set.apply(this,n)},set:function(t){var e=Array.prototype.slice.apply(arguments,[1]);this.setter[t]?this.setter[t].apply(this,e):this[t]=e.join(",")},get:function(t){return this.getter[t]?this.getter[t].apply(this):this[t]||0},setter:{rotate:function(t){this.rotate=u(t,"deg")},rotateX:function(t){this.rotateX=u(t,"deg")},rotateY:function(t){this.rotateY=u(t,"deg")},scale:function(t,e){void 0===e&&(e=t),this.scale=t+","+e},skewX:function(t){this.skewX=u(t,"deg")},skewY:function(t){this.skewY=u(t,"deg")},perspective:function(t){this.perspective=u(t,"px")},x:function(t){this.set("translate",t,null)},y:function(t){this.set("translate",null,t)},translate:function(t,e){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==t&&void 0!==t&&(this._translateX=u(t,"px")),null!==e&&void 0!==e&&(this._translateY=u(e,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var t=(this.scale||"1,1").split(",");return t[0]&&(t[0]=parseFloat(t[0])),t[1]&&(t[1]=parseFloat(t[1])),t[0]===t[1]?t[0]:t},rotate3d:function(){for(var t=(this.rotate3d||"0,0,0,0deg").split(","),e=0;3>=e;++e)t[e]&&(t[e]=parseFloat(t[e]));return t[3]&&(t[3]=u(t[3],"deg")),t}},parse:function(t){var e=this;t.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(t,n,i){e.setFromString(n,i)})},toString:function(t){var e=[];for(var n in this)if(this.hasOwnProperty(n)){if(!p.transform3d&&("rotateX"===n||"rotateY"===n||"perspective"===n||"transformOrigin"===n))continue;"_"!==n[0]&&e.push(t&&"scale"===n?n+"3d("+this[n]+",1)":t&&"translate"===n?n+"3d("+this[n]+",0)":n+"("+this[n]+")")}return e.join(" ")}},t.fn.transition=t.fn.transit=function(e,n,i,r){var a=this,l=0,u=!0;"function"==typeof n&&(r=n,n=void 0),"function"==typeof i&&(r=i,i=void 0),"undefined"!=typeof e.easing&&(i=e.easing,delete e.easing),"undefined"!=typeof e.duration&&(n=e.duration,delete e.duration),"undefined"!=typeof e.complete&&(r=e.complete,delete e.complete),"undefined"!=typeof e.queue&&(u=e.queue,delete e.queue),"undefined"!=typeof e.delay&&(l=e.delay,delete e.delay),"undefined"==typeof n&&(n=t.fx.speeds._default),"undefined"==typeof i&&(i=t.cssEase._default),n=c(n);var h=o(e,n,i,l),d=t.transit.enabled&&p.transition,f=d?parseInt(n,10)+parseInt(l,10):0;if(0===f){var m=function(t){a.css(e),r&&r.apply(a),t&&t()};return s(a,u,m),a}var v={},b=function(n){var i=!1,s=function(){i&&a.unbind(g,s),f>0&&a.each(function(){this.style[p.transition]=v[this]||null}),"function"==typeof r&&r.apply(a),"function"==typeof n&&n()};f>0&&g&&t.transit.useTransitionEnd?(i=!0,a.bind(g,s)):window.setTimeout(s,f),a.each(function(){f>0&&(this.style[p.transition]=h),t(this).css(e)})},y=function(t){var e=0;"MozTransition"===p.transition&&25>e&&(e=25),window.setTimeout(function(){b(t)},e)};return s(a,u,y),this},t.transit.getTransitionValue=o}(t),t}),define("plugins/addClassFor",["jquery"],function(t){"use strict";t.fn.extend({addClassFor:function(t,e){var n=this;return window.setTimeout(function(){n.removeClass(t)},e),n.addClass(t)}})}),define("global/account",["jquery","lodash","lib/shoji","lib/pubSub","lib/currentUser","lib/personalStorage","lib/watchLaterLocal","utils/monogram","hbs!templates/accountFixture","hbs!templates/accountPoparoo","hbs!templates/latcherFixture","lib/resize","transit","widgets/fixture","plugins/addClassFor"],function(t,e,n,i,s,r,o,a,l,u,c){"use strict";function h(e){var s=i("breakpoint").read()>=1024;if(n.canSlide()&&(e.preventDefault(),!s)){if(y)return void y.fixture("reveal");y=t(l({items:E(w),user:w})).fixture({at:"right"}),y.find("li.nav__item--latch a").attr("href",function(){var e=t(this),n=e.attr("href");return e.attr("data-url",n),"#"});var r=t("div.shoji__fixture--right #submenu");if(y.drillDown({tense:r.length?"past":"present"}),r.length){r.find("h3.submenu__heading").remove();var o=t(c()).append(r.clone().addClass("submenu--fixture"));o.find("a.latcher__back").on("click",function(){y.drillDown("show")}),y.drillDown("queue",o,{tense:"present"})}}}function p(t){if(!(1024>t)){i("breakpoint").unsubscribe(p);var e=v.parent().find("div.nav__folder").html(u({itemUrls:S,user:w,savedTalksCount:!1,savedPlaylistsCount:!1}));_=e.find("a."+x),f()}}function d(){b||(b=t("#account-link").find("img.banner__account__image")),b.transition({opacity:0}).transition({opacity:1}).transition({opacity:0}).transition({opacity:1})}function f(){o.count().done(C)}function g(t,e){t.find("a.account__poparoo__later")[e?"addClass":"removeClass"]("account__poparoo__later--populated").find("span").text(e)}function m(e){var n;w=e,T(),f(),w.avatarUrl?(n=t("<img class=banner__account__image id=account-image>"),n.attr("src",w.avatarUrl),t("#account-image").replaceWith(n)):t("#account-image").text(a(w.firstName+" "+w.lastName))}var v,b,y,_,w,k={},x="account__poparoo__later",S={savedTalks:"/dashboard/saved_talks",savedPlaylists:"/dashboard/saved_playlists",favoriteTalks:"/dashboard/favorite_talks",favoritePlaylists:"/dashboard/favorite_playlists",watchHistory:"/dashboard/history",conferences:"/dashboard/conferences",tedEdHistory:"http://ed.ted.com/activity/lessons",settings:TED.settingsUrl,profile:"/profile",logOut:TED.signOutUrl},E=function(t){var e=[];if(e.push({name:"Talks",open:!0,items:[{name:"Saved talks",url:S.savedTalks},{name:"Saved playlists",url:S.savedPlaylists},{name:"Favorite talks",url:S.favoriteTalks},{name:"Favorite playlists",url:S.favoritePlaylists},{name:"Talks you've watched",url:S.watchHistory}]}),t&&t.isTEDxOrganizer&&e.push({name:"TEDx Events",url:"/profiles/"+t.profileId+"/tedx-event-management"}),t&&t.hasConferences){var n={name:"Conferences",open:!1,items:[]};t.upcomingConferences&&t.upcomingConferences.reduce(function(t,e){return t.push({name:e.name,url:"/dashboard/conferences/"+e.slug}),t},n.items),n.items.push({name:"Badge",url:"/dashboard/conferences/badge"}),n.items.push({name:"Contact us",url:"/dashboard/conferences/contact"}),e.push(n)}return t&&t.hasEdActivity&&e.push({name:"Your TED-Ed activity",url:S.tedEdHistory,external:!0}),e.push({latch:!0,name:"Settings",url:TED.settingsUrl}),e.push({name:"Your profile",url:"/profile"}),e.push({name:"Log out",url:TED.signOutUrl}),e},C=function(){var e,n,i;return function(s){var r,o=s.total,a=o>0;if(o!==e){var l;n&&s.talks!==n&&(r="talks",l=s.talks>n),i&&s.playlists!==i&&(r="playlists",l=s.playlists>i),r&&t("#account-"+r)[l?"addClass":"removeClass"]("account__poparoo__item--active"),s.talks!==n&&g(t("#account-talks"),s.talks),s.playlists!==i&&g(t("#account-playlists"),s.playlists);var u=t("#account-badge");u.text(s.total>99?99:s.total)[a?"addClass":"removeClass"]("badge--visible"),a&&null!==e&&s.total>e&&u.addClassFor("badge--notify",600),n=s.talks,i=s.playlists,e=o}}}(),T=e.once(function(){v=t("#account-link"),v.on("click",h),i("breakpoint").subscribe(p),i("favorite.add").subscribe(d),i("watchLater.add").subscribe(f),i("watchLater.remove").subscribe(f)});return k.init=e.once(function(){i("auth.login").subscribe(m),s.getDetails().done(m)}),k}),define("global/uconf",["jquery","Cookies"],function(t,e){"use strict";var n="#";return{init:function(i,s){t(n+s).on("click",function(s){s.preventDefault(),t(n+i).slideUp("fast"),e.expire("_uconf",{domain:"ted.com",path:"/"})})}}}),define("utils/query_param",[],function(){"use strict";return function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)"),n=e.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}}),define("widgets/ad",["lodash","jquery","jqueryui/widget"],function(t,e){"use strict";e.widget("ted.ad",{_rendered:!1,$image:null,$text:null,$link:null,blocked:function(){this.element.hide()},refreshJsonAd:function(){if(this.options.blocked)return void this.blocked();if(this._rendered||(this._addAdClass(),this.element.html(""),this.options.ad.houseAd||this._getAppreciationText().appendTo(this.element),this.$link=e('<a class="ad__unit" href="#" rel="nofollow" target="_blank">').appendTo(this.element),this.$image=e("<img>").appendTo(this.$link),this._rendered=!0),!this.options.ad)return void this.element.hide();var t=this._getRenderDetails();this.$link.attr("href",t.click),this.$image.attr({src:t.currentCreative.url,width:t.dimensions.width,height:t.dimensions.height}),this.element[this.options.ad.hasDisplay===!1?"hide":"show"](),this._impress()},refreshHtmlAd:function(){this._addAdClass(),this._getAppreciationText().prependTo(this.element)},_init:function(){this._rendered=!1,"json"==this.options.mode?this.refreshJsonAd():"html"==this.options.mode&&this.refreshHtmlAd()},_fireImpression:function(t){var e=new Image;e.src=t},_impress:function(){this._fireImpression(this.options.ad.impression),t.forEach(this.options.ad.thirdPartyImpressions,this._fireImpression)},_getCreative:function(){var e=t.filter(this.options.ad.creative,function(t){return""!==t.url}),n=Math.max(window.devicePixelRatio||1,1);return t.reduce(e,function(t,e){return e.density<=n?e:t||e},{})},_getRenderDetails:function(){return t.extend({currentCreative:this._getCreative()},this.options.ad)},_getAppreciationText:function(){return this.$text=e('<div class="ad__text">TED Talks are free thanks to support from</div>'),this.$text},_addAdClass:function(){this.element.addClass("ad")}})}),define("hbs!templates/sponsorshipBug",["hbs","hbs/handlebars"],function(t,e){var n=e.template(function(t,e,n){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers);var i="";return i+='\n\n<a class="sponsorship-bug__link media" href="#" rel="nofollow" target="_blank">\n  <div class="sponsorship-bug__image media__image media__image--alt">\n    <img src="" alt="">\n  </div>\n  <div class="sponsorship-bug__message media__message">\n    TED Talks are free<br>\n    thanks to support from\n  </div>\n</a>\n'});return n}),define("templates/helpers/assetUrl",["Handlebars"],function(t){"use strict";function e(t){return TED.assetHost+t}return t.registerHelper("assetUrl",e),e}),define("hbs!templates/sponsorshipBugBlocked",["hbs","hbs/handlebars","templates/helpers/assetUrl"],function(t,e){var n=e.template(function(t,e,n){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers);var i,s,r="",o=n.helperMissing,a=this.escapeExpression;return r+='\n\n<a class="sponsorship-bug__nag" href="http://support.ted.com/customer/portal/articles/1532436-how-can-i-support-ted-by-modifying-my-ad-blocker-settings" target="_blank">\n  <img class="sponsorship-bug__nag__image" src="'+a((i=n.assetUrl||e&&e.assetUrl,s={hash:{}},i?i.call(e,"/temp/ad-blocker-bug.png",s):o.call(e,"assetUrl","/temp/ad-blocker-bug.png",s)))+'" alt="Show your support by unblocking ted.com from ad blockers">\n</a>\n'});return n}),define("widgets/sponsorshipBug",["jquery","hbs!templates/sponsorshipBug","hbs!templates/sponsorshipBugBlocked","widgets/ad"],function(t,e,n){"use strict";t.widget("ted.sponsorshipBug",t.ted.ad,{blocked:function(){this.element.html(n()),this.element.show(),this._rendered=!1},refreshJsonAd:function(){return this.options.blocked?this.blocked():(this._rendered||(this.element.html(e()),this.$image=this.element.find("img"),this.$link=this.element.find("a.sponsorship-bug__link"),this._rendered=!0),void this._super())},_init:function(){this.element.addClass("sponsorship-bug"),this._super()}})}),define("lib/ads",["jquery","lodash","utils/query_param","widgets/ad","widgets/sponsorshipBug"],function(t,e,n){"use strict";function i(e){var n=c[e.type];"master"==e.type?h.deferred.resolve(e):void 0===n?window.console&&console.log&&(console.log("Unknown ad type"),console.log(e)):t(n.id)[n.widget]({ad:e,mode:"json"})}function s(n){e.forEach(h.companionAdSlots,function(e){if(e.gptSlot.setTargeting(e.key,n.target),e.displayed){var i=t("#"+e.containerId);i.data("tedAd")?i.ad("destroy"):i.data("sponsorshipBug")&&i.sponsorshipBug("destroy"),p.refreshAd(e.gptSlot)}else p.displayAd(e.containerId);e.displayed=!0}),l(n.impression)}function r(t){p.player.player("sendAds",{postroll:o(t.postrollURL),preroll:o(t.prerollURL)})}function o(t){return t.replace("{adUnit}",h.slot.adUnit)}function a(e){var n=p.player=e;if(n){var o=p.playerMode=n.player("mode");if("hls"==o)n.on({playerad:function(t,e){i(e.ad)}});else{h.deferred.done(s),n.on({playeradblock:function(){var e=c.bug;t(e.id)[e.widget]({blocked:!0})}});var a=!0;n.on({playertalk:function(t,e){a&&n.player("talks")[0].id==e.id?(a=!1,"flash"==o&&h.deferred.done(r)):p.refreshMasterAd({targeting:e.targeting}),a=!1}})}}}function l(t){var e=new Image;e.src=t}function u(){e.forEach(h.slot.targeting,function(t,n){h.slot.gptSlot.setTargeting(n,e.isArray(t)?t.join(","):t)});var t=n("dfptest");t&&h.slot.gptSlot.setTargeting("dfptest",t)}var c,h={companionAdSlots:[],deferred:t.Deferred(),slot:{adUnit:null,containerId:null,gptSlot:null,targeting:{}}},p={player:null};return window.googletag=window.googletag||{cmd:[]},c={bug:{id:"#sponsorship-bug-placeholder",widget:"sponsorshipBug"},companion:{id:"#ad-unit",widget:"ad"},"companion-mobile":{id:"#ad-unit-mobile",widget:"ad"},devil:{id:"#devil-ad",widget:"ad"},onPage:{id:"#ad-unit",widget:"ad"}},window.googletag.cmd.push(function(){googletag.pubads().addEventListener("slotRenderEnded",function(n){var i=e.find(h.companionAdSlots,function(t){return t.gptSlot==n.slot
});if(i&&"ad-unit"==i.containerId&&!n.isEmpty){var s=t("#ad-unit"),r=s.data("tedAd");r||s.ad({mode:"html"})}})}),p.displayMasterAd=function(t){h.slot.containerId=t.containerId,h.slot.adUnit=t.adUnit,window.googletag.cmd.push(function(){h.slot.gptSlot=googletag.defineOutOfPageSlot(h.slot.adUnit,h.slot.containerId).addService(googletag.pubads()),e.assign(h.slot.targeting,t.targeting),u(),p.displayAd(h.slot.containerId)})},p.refreshMasterAd=function(n){"hls"!=p.playerMode&&(h.deferred=t.Deferred(),h.deferred.done(s),"flash"==p.playerMode&&h.deferred.done(r),h.slot.gptSlot.clearTargeting(),e.forEach(h.companionAdSlots,function(t){t.gptSlot.clearTargeting()}),e.assign(h.slot.targeting,n.targeting),u(),p.refreshAd(h.slot.gptSlot))},p.displayAd=function(e){t(function(){window.googletag.cmd.push(function(){googletag.display(e)})})},p.refreshAd=function(t){window.googletag.cmd.push(function(){googletag.pubads().refresh([t])})},p.createCompanionSlot=function(t){window.googletag.cmd.push(function(){var e=googletag.defineSlot(t.adUnit,t.size,t.containerId).addService(googletag.pubads());h.companionAdSlots.push({containerId:t.containerId,gptSlot:e,key:t.key})})},p.initPlayer=a,p.gptAd=function(t){i(t.ad)},p}),define("lib/browserDetect",["exports"],function(t){"use strict";function e(t){for(var e=0;e<t.length;e++){var n=t[e].string,s=t[e].prop;if(i=t[e].versionSearch||t[e].identity,n){if(-1!=n.indexOf(t[e].subString))return t[e].identity}else if(s)return t[e].identity}}function n(t){var e=t.indexOf(i);if(-1!=e)return parseFloat(t.substring(e+i.length+1))}var i,s=window.navigator,r=[{string:s.userAgent,subString:"Chrome",identity:"Chrome"},{string:s.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:s.userAgent,subString:"Firefox",identity:"Firefox"},{string:s.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:s.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"}];t.browser=e(r)||"Unknown Browser",t.version=n(window.navigator.userAgent)||n(window.navigator.appVersion)||"Unknown Version"}),define("lib/errorCollector",["jquery","lodash","lib/browserDetect","lib/currentUserId","exports"],function(t,e,n,i,s){"use strict";s.post=e.throttle(function(e){t.post("/error_collector.php",{message:e})},5e3),s.log=function(e,r){s.post(t.extend({message:e,context:"js",uri:window.location.href,client_name:n.browser,client_version:n.version,elapsed_seconds:Math.floor((+new Date-TED.startTime)/1e3),profile_id:i.get()||"N/A",user_agent:window.navigator?window.navigator.userAgent:"Unknown User Agent"},r||{}))}}),define("global/errors",["lib/errorCollector"],function(t){"use strict";window.onerror=function(e,n,i){i&&n.match(/^https?:\/\/(?:.*\.)?(?:ted|tedcdn)\.com\//)&&(!n.match(/\.js/)&&5>i||t.log(e,{file:n,line:i}))}}),function(t,e){"undefined"!=typeof exports?e(t,exports,require("underscore")):"function"==typeof define&&define.amd?define("Backbone",["underscore","jquery","exports"],function(n,i,s){t.Backbone=e(t,s,n,i)}):t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,n,i){var s=t.Backbone,r=[],o=r.push,a=r.slice,l=r.splice;e.VERSION="1.0.0",e.$=i,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var u=e.Events={on:function(t,e,n){if(!h(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,i){if(!h(this,"once",t,[e,i])||!e)return this;var s=this,r=n.once(function(){s.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,i)},off:function(t,e,i){var s,r,o,a,l,u,c,p;if(!this._events||!h(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events={},this;for(a=t?[t]:n.keys(this._events),l=0,u=a.length;u>l;l++)if(t=a[l],o=this._events[t]){if(this._events[t]=s=[],e||i)for(c=0,p=o.length;p>c;c++)r=o[c],(e&&e!==r.callback&&e!==r.callback._callback||i&&i!==r.context)&&s.push(r);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!h(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&p(n,e),i&&p(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var s=!e&&!n;"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t);for(var r in i)i[r].off(e,n,this),s&&delete this._listeners[r];return this}},c=/\s+/,h=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var s in n)t[e].apply(t,[s,n[s]].concat(i));return!1}if(c.test(n)){for(var r=n.split(c),o=0,a=r.length;a>o;o++)t[e].apply(t,[r[o]].concat(i));return!1}return!0},p=function(t,e){var n,i=-1,s=t.length,r=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++i<s;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<s;)(n=t[i]).callback.call(n.ctx,r);return;case 2:for(;++i<s;)(n=t[i]).callback.call(n.ctx,r,o);return;case 3:for(;++i<s;)(n=t[i]).callback.call(n.ctx,r,o,a);return;default:for(;++i<s;)(n=t[i]).callback.apply(n.ctx,e)}},d={listenTo:"on",listenToOnce:"once"};n.each(d,function(t,e){u[e]=function(e,i,s){var r=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=n.uniqueId("l"));return r[o]=e,"object"==typeof i&&(s=this),e[t](i,s,this),this}}),u.bind=u.on,u.unbind=u.off,n.extend(e,u);var f=e.Model=function(t,e){var i,s=t||{};e||(e={}),this.cid=n.uniqueId("c"),this.attributes={},n.extend(this,n.pick(e,g)),e.parse&&(s=this.parse(s,e)||{}),(i=n.result(this,"defaults"))&&(s=n.defaults({},s,i)),this.set(s,e),this.changed={},this.initialize.apply(this,arguments)},g=["url","urlRoot","collection"];n.extend(f.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var s,r,o,a,l,u,c,h;if(null==t)return this;if("object"==typeof t?(r=t,i=e):(r={})[t]=e,i||(i={}),!this._validate(r,i))return!1;o=i.unset,l=i.silent,a=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={}),h=this.attributes,c=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(s in r)e=r[s],n.isEqual(h[s],e)||a.push(s),n.isEqual(c[s],e)?delete this.changed[s]:this.changed[s]=e,o?delete h[s]:h[s]=e;if(!l){a.length&&(this._pending=!0);for(var p=0,d=a.length;d>p;p++)this.trigger("change:"+a[p],this,h[a[p]],i)}if(u)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?n.clone(this.changed):!1;var e,i=!1,s=this._changing?this._previousAttributes:this.attributes;for(var r in t)n.isEqual(s[r],e=t[r])||((i||(i={}))[r]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,i=t.success;return t.success=function(n){return e.set(e.parse(n,t),t)?(i&&i(e,n,t),void e.trigger("sync",e,n,t)):!1},M(this,t),this.sync("read",this,t)},save:function(t,e,i){var s,r,o,a=this.attributes;if(null==t||"object"==typeof t?(s=t,i=e):(s={})[t]=e,!(!s||i&&i.wait||this.set(s,i)))return!1;if(i=n.extend({validate:!0},i),!this._validate(s,i))return!1;s&&i.wait&&(this.attributes=n.extend({},a,s)),void 0===i.parse&&(i.parse=!0);var l=this,u=i.success;return i.success=function(t){l.attributes=a;var e=l.parse(t,i);return i.wait&&(e=n.extend(s||{},e)),n.isObject(e)&&!l.set(e,i)?!1:(u&&u(l,t,i),void l.trigger("sync",l,t,i))},M(this,i),r=this.isNew()?"create":i.patch?"patch":"update","patch"===r&&(i.attrs=s),o=this.sync(r,this,i),s&&i.wait&&(this.attributes=a),o},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&s(),i&&i(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;M(this,t);var r=this.sync("delete",this,t);return t.wait||s(),r},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||L();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,n.extend(e||{},{validationError:i})),!1):!0}});var m=["keys","values","pairs","invert","pick","omit"];n.each(m,function(t){f.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),n[t].apply(n,e)}});var v=e.Collection=function(t,e){e||(e={}),e.url&&(this.url=e.url),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},b={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};n.extend(v.prototype,u,{model:f,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.defaults(e||{},y))},remove:function(t,e){t=n.isArray(t)?t.slice():[t],e||(e={});var i,s,r,o;for(i=0,s=t.length;s>i;i++)o=this.get(t[i]),o&&(delete this._byId[o.id],delete this._byId[o.cid],r=this.indexOf(o),this.models.splice(r,1),this.length--,e.silent||(e.index=r,o.trigger("remove",o,this,e)),this._removeReference(o));return this},set:function(t,e){e=n.defaults(e||{},b),e.parse&&(t=this.parse(t,e)),n.isArray(t)||(t=t?[t]:[]);var i,s,r,a,u,c=e.at,h=this.comparator&&null==c&&e.sort!==!1,p=n.isString(this.comparator)?this.comparator:null,d=[],f=[],g={};for(i=0,s=t.length;s>i;i++)(r=this._prepareModel(t[i],e))&&((a=this.get(r))?(e.remove&&(g[a.cid]=!0),e.merge&&(a.set(r.attributes,e),h&&!u&&a.hasChanged(p)&&(u=!0))):e.add&&(d.push(r),r.on("all",this._onModelEvent,this),this._byId[r.cid]=r,null!=r.id&&(this._byId[r.id]=r)));if(e.remove){for(i=0,s=this.length;s>i;++i)g[(r=this.models[i]).cid]||f.push(r);f.length&&this.remove(f,e)}if(d.length&&(h&&(u=!0),this.length+=d.length,null!=c?l.apply(this.models,[c,0].concat(d)):o.apply(this.models,d)),u&&this.sort({silent:!0}),e.silent)return this;for(i=0,s=d.length;s>i;i++)(r=d[i]).trigger("add",r,this,e);return u&&this.trigger("sort",this,e),this},reset:function(t,e){e||(e={});for(var i=0,s=this.models.length;s>i;i++)this._removeReference(this.models[i]);return e.previousModels=this.models,this._reset(),this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,n.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,n.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){return null==t?void 0:this._byId[null!=t.id?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(t,e){return n.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,e,i){e||(e=this.comparator);var s=n.isFunction(e)?e:function(t){return t.get(e)};return n.sortedIndex(this.models,t,s,i)},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,i=this;return t.success=function(n){var s=t.reset?"reset":"set";i[s](n,t),e&&e(i,n,t),i.trigger("sync",i,n,t)},M(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?n.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,s=e.success;return e.success=function(n){e.wait&&i.add(t,e),s&&s(t,n,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof f)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var n=new this.model(t,e);return n._validate(t,e)?n:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var _=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];n.each(_,function(t){v.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),n[t].apply(n,e)}});var w=["groupBy","countBy","sortBy"];n.each(w,function(t){v.prototype[t]=function(e,i){var s=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,s,i)}});var k=e.View=function(t){this.cid=n.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName","events"];n.extend(k.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[t[e]]),i){var s=e.match(x),r=s[1],o=s[2];i=n.bind(i,this),r+=".delegateEvents"+this.cid,""===o?this.$el.on(r,i):this.$el.on(r,o,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=n.extend({},n.result(this,"options"),t)),n.extend(this,n.pick(t,S)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t["class"]=n.result(this,"className"));var i=e.$("<"+n.result(this,"tagName")+">").attr(t);this.setElement(i,!1)}}}),e.sync=function(t,i,s){var r=E[t];n.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:r,dataType:"json"};if(s.url||(o.url=n.result(i,"url")||L()),null!=s.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(s.attrs||i.toJSON(s))),s.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){o.type="POST",s.emulateJSON&&(o.data._method=r);var a=s.beforeSend;s.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),a?a.apply(this,arguments):void 0}}"GET"===o.type||s.emulateJSON||(o.processData=!1),"PATCH"!==o.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=s.xhr=e.ajax(n.extend(o,s));return i.trigger("request",i,l,s),l};var E={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var C=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,D=/(\(\?)?:\w+/g,N=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,u,{initialize:function(){},route:function(t,i,s){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(s=i,i=""),s||(s=this[i]);var r=this;return e.history.route(t,function(n){var o=r._extractParameters(t,n);s&&s.apply(r,o),r.trigger.apply(r,["route:"+i].concat(o)),r.trigger("route",i,o),e.history.trigger("route",r,i,o)}),this},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(O,"\\$&").replace(T,"(?:$1)?").replace(D,function(t,e){return e?t:"([^/]+)"}).replace(N,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,function(t){return t?decodeURIComponent(t):null})}});var I=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,j=/^\/+|\/+$/g,A=/msie [\w.]+/,$=/\/$/;I.started=!1,n.extend(I.prototype,u,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace($,"");t.indexOf(n)||(t=t.substr(n.length))}else t=this.getHash();return t.replace(P,"")},start:function(t){if(I.started)throw new Error("Backbone.history has already been started");I.started=!0,this.options=n.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),s=document.documentMode,r=A.exec(navigator.userAgent.toLowerCase())&&(!s||7>=s);this.root=("/"+this.root+"/").replace(j,"/"),r&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var o=this.location,a=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!a?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&a&&o.hash&&(this.fragment=this.getHash().replace(P,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),I.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(t){var e=this.fragment=this.getFragment(t),i=n.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return i},navigate:function(t,e){if(!I.started)return!1;if(e&&e!==!0||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var n=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new I;var H=function(t,e){var i,s=this;i=t&&n.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},n.extend(i,s,e);var r=function(){this.constructor=i};return r.prototype=s.prototype,i.prototype=new r,t&&n.extend(i.prototype,t),i.__super__=s.prototype,i};f.extend=v.extend=C.extend=k.extend=I.extend=H;var L=function(){throw new Error('A "url" property or function must be specified')},M=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}};return e}),define("hbs!templates/authPromptModal",["hbs","hbs/handlebars","templates/helpers/icon"],function(t,e){var n=e.template(function(t,e,n){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers);var i,s,r,o="",a="function",l=this.escapeExpression,u=n.helperMissing;return o+='\n\n<div class="auth-prompt__section auth-prompt__header">\n  <h2 class="auth-prompt__header__title">\n    Log in to\n    TED\n  </h2>\n\n  <a href="#" class="modal__close auth-prompt__close">\n    <i class="g-button-modal-close">Close</i>\n  </a>\n</div>\n\n<div class="auth-prompt__section auth-prompt__options">\n  <form class="auth-prompt__option auth-prompt__option--standard">\n    <div class="auth-prompt__message">\n      Your email or password was incorrect.\n    </div>\n\n    <div class="m3">\n      <label class="form-label">Email</label>\n      <input class="form-control auth-prompt__email" name="user[email]" type="email">\n    </div>\n\n    <div class="m3">\n      <label class="form-label">Password</label>\n      <input class="form-control auth-prompt__password" name="user[password]" type="password">\n    </div>\n\n    <div class="m3">\n      <label>\n        <input class="auth-prompt__remember" type="checkbox" checked name="user[remember_me]">\n        <span class="form-label" style="display:inline; margin-left: 2px;">\n          Remember me\n        </span>\n      </label>\n    </div>\n\n    <div>\n      <button class="button button--dark auth-prompt__login">Log in</button>\n      <a class="l3 auth-prompt__halp" href="',(s=n.signInHelpUrl)?i=s.call(e,{hash:{}}):(s=e&&e.signInHelpUrl,i=typeof s===a?s.call(e,{hash:{}}):s),o+=l(i)+'" target="_blank">Need help logging in?</a>\n    </div>\n  </form>\n\n  <div class="auth-prompt__option auth-prompt__option--social">\n    <button class="button button--wide button--dark button--labeled button--facebook auth-prompt__facebook">\n      '+l((s=n.icon||e&&e.icon,r={hash:{}},s?s.call(e,"facebook","","button__icon",r):u.call(e,"icon","facebook","","button__icon",r)))+'\n      <span class="button__label">Log in with Facebook</span>\n    </button>\n  </div>\n</div>\n\n<div class="auth-prompt__section auth-prompt__footer">\n  <span class="auth-prompt__footer__question">Don\'t have an account yet?</span>\n  <a class="l3" href="',(s=n.signUpUrl)?i=s.call(e,{hash:{}}):(s=e&&e.signUpUrl,i=typeof s===a?s.call(e,{hash:{}}):s),o+=l(i)+'" target="_blank">Sign up</a>\n</div>\n\n<div class="auth-prompt__thinking"></div>\n'});return n}),define("hbs!templates/modalDefault",["hbs","hbs/handlebars","templates/helpers/t"],function(t,e){var n=e.template(function(t,e,n){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers);var i,s,r,o="",a=n.helperMissing,l=this.escapeExpression,u="function";return o+='\n\n<div class="modal__head">\n  <a class="modal__close modal__head__close" href="#">\n    <i class="g-button-modal-close">'+l((s=n.t||e&&e.t,r={hash:{}},s?s.call(e,"Close",r):a.call(e,"t","Close",r)))+'</i>\n  </a>\n  <h3 class="modal__head__title">',(s=n.title)?i=s.call(e,{hash:{}}):(s=e&&e.title,i=typeof s===u?s.call(e,{hash:{}}):s),o+=l(i)+"</h3>\n</div>\n"});return n}),define("widgets/modal",["jquery","lodash","hbs!templates/modalDefault","lib/pubSub","jqueryui/widget","lib/resize"],function(t,e,n,i){"use strict";function s(){c||(u=t(window),a=t(document.body),l=t("html"))}var r,o,a,l,u,c=0,h="modal-backdrop--show",p="modal--show",d="modal-open",f="modal__content",g=0;return o=["<div class=modal>","<div class=modal__outer>","<div class=modal__inner>"].join(""),i("breakpoint").subscribe(function(t){r=768>t}),t.widget("ted.modal",{options:{align:"middle",autoOpen:!0},_create:function(){var e=this;s(),this.options.title&&this.element.prepend(n(this.options)),this.modal=this.element.addClass(f).css("display","").wrap(o).closest("div.modal"),this.modal.addClass("modal--align-"+this.options.align),this.backdrop=t("<div class=modal-backdrop>"),this.wrapper=t("<div class=modal-wrapper>").append(this.backdrop).append(this.modal),this.wrapper.on("click",function(n){return r?!0:t(n.target).closest("div.modal__content").length?!0:(n.preventDefault(),void e.close())}),this._on("keyup",function(t){t.preventDefault(),27===t.keyCode&&e.close()}),a.append(this.wrapper),this._on("a.modal__close",{click:function(t){t.preventDefault(),e.close()}}),this.options.autoOpen&&e.open()},_destroy:function(){var t=this;e.defer(function(){t.wrapper.remove()})},open:function(){var t=this;return this._hasOpened?(t.backdrop.addClass(h),t.openedAt={y:u.scrollTop()},g++||l.addClass(d),r&&window.scrollTo(0,0),t.modal.addClass(p),void t._trigger("open")):void window.setTimeout(function(){t._hasOpened||(t._hasOpened=!0,t.open())},10)},close:function(){this.modal.removeClass(p),--g||l.removeClass(d),this.openedAt&&window.scrollTo(0,this.openedAt.y),this.backdrop.removeClass(h),this._trigger("close")}}),function(e,n){return t(e).modal(n)}}),define("views/AuthPromptView",["lodash","Modernizr","Backbone","lib/auth","hbs!templates/authPromptModal","spinjs","widgets/modal"],function(t,e,n,i,s,r){"use strict";function o(){i||(i=require("lib/auth"))}var a=n.View.extend({template:s,events:{"click button.auth-prompt__facebook":"facebook","click button.auth-prompt__login":"login","submit form.auth-prompt__option--standard":"login"},close:function(){this.$el.modal("close")},open:function(){this.$el.removeClass("auth-prompt--error"),this.$el.modal("open");var t=e.localstorage?window.localStorage.getItem("auth")||"":"";this.$email.val(t),this[t?"$password":"$email"].focus()},login:function(t){t&&t.preventDefault(),this._startThinking(),o(),i.login(this.$email.val(),this.$password.val()).then(this._loginSuccess,this._loginFailure).always(this._stopThinking),this.$password.val("")},facebook:function(t){t&&t.preventDefault(),this._startThinking(),o(),i.facebook().then(this._facebookSuccess,this._facebookFailure).always(this._stopThinking)},initialize:function(){var t=this;this._loginSuccess=function(){t.close();var n=t.$email.val();n&&e.localstorage&&window.localStorage.setItem("auth",t.$el.find("input.auth-prompt__remember").is(":checked")?n:""),t.trigger("login.success")},this._facebookSuccess=this._loginSuccess,this._loginFailure=function(){t.$el.addClass("auth-prompt--error"),t.trigger("login.failure")},this._facebookFailure=function(){t.trigger("login.failure")},this._stopThinking=function(){t.$thinkers.prop("disabled",!1),t.$el.removeClass("auth-prompt--thinking"),t._spinner&&t._spinner.stop()}},render:function(){var t=this;return this.$el.addClass("auth-prompt").html(t.template({signInHelpUrl:TED.signInHelpUrl,signUpUrl:TED.signUpUrl})).modal({autoOpen:!1}).on("modalclose",function(){t.trigger("close")}).on("modalopen",function(){t.trigger("open")}),this.$email=this.$el.find("input.auth-prompt__email"),this.$password=this.$el.find("input.auth-prompt__password"),this.$thinkers=this.$el.find(["form.auth-prompt__option--standard","button.auth-prompt__login","button.auth-prompt__facebook"].join(", ")).add(this.$email).add(this.$password),this},_startThinking:function(){this.$thinkers.prop("disabled",!0),this.$el.addClass("auth-prompt--thinking"),this._spinner||(this._spinner=new r({className:"spinner spinner--centered"})),this._spinner.spin(this.el)}});return a}),define("hbs!templates/authError",["hbs","hbs/handlebars","templates/helpers/t"],function(t,e){var n=e.template(function(t,e,n){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers);var i,s,r="",o=n.helperMissing,a=this.escapeExpression;return r+='\n\n<div>\n  <div class="modal__head">\n    <a class="modal__close modal__head__close" href="#">\n      <i class="g-button-modal-close">'+a((i=n.t||e&&e.t,s={hash:{}},i?i.call(e,"Close",s):o.call(e,"t","Close",s)))+'</i>\n    </a>\n    <h3 class="modal__head__title">'+a((i=n.t||e&&e.t,s={hash:{}},i?i.call(e,"Error",s):o.call(e,"t","Error",s)))+"</h3>\n  </div>\n\n  <p>"+a((i=n.t||e&&e.t,s={hash:{}},i?i.call(e,"Sorry, an error occurred. Please log in and try again.",s):o.call(e,"t","Sorry, an error occurred. Please log in and try again.",s)))+'</p>\n  <p><a class="l3" href="/session/new">'+a((i=n.t||e&&e.t,s={hash:{}},i?i.call(e,"Log in",s):o.call(e,"t","Log in",s)))+"</a></p>\n</div>\n"});return n}),define("utils/callback",["lodash"],function(t){"use strict";var e="tedc"+ +new Date,n=0;return function(i){var s=e+ ++n,r=this;return window[s]=function(){i.apply(r,t.toArray(arguments)),delete window[s]},s}}),define("utils/iframep",["jquery","utils/callback"],function(t,e){"use strict";return function(n){function i(){"pending"===r.state&&(r.reject(),delete window[o])}function s(){var t=l.contentDocument||l.contentWindow&&l.contentWindow.document;window[o]&&window.setTimeout("complete"===t.readyState?i:s,300)}var r=new t.Deferred,o=e(function(t){r.resolve(t)});n=n.replace("callback=?","callback="+o);var a=t("<iframe></iframe>").css({display:"none",width:0,height:0}).appendTo(document.body),l=a.get(0);return a.ready(s).attr("src",n),r.always(function(){a.remove()}),window.setTimeout(i,5e3),r.promise()}}),define("utils/origin",[],function(){"use strict";return window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}),define("lib/auth",["jquery","lodash","lib/currentUser","lib/errorCollector","Modernizr","views/AuthPromptView","hbs!templates/authError","utils/callback","utils/iframep","utils/origin","lib/pubSub","exports"],function(t,e,n,i,s,r,o,a,l,u,c,h){"use strict";function p(t){t.done(function(t){c("auth.login").publish(t)})}function d(){w?w.open():t(o()).modal()}function f(){if(!S)throw new Error("lib/auth: please check auth.capable() to ensure client support before using auth methods.");if(!h.capable())throw d(),new Error("lib/auth: this client is not capable of using auth methods.")}function g(){return l("/session/check?callback=?").done(m)}function m(e){t("head").append(v("csrf-param",e.csrf.param)+v("csrf-token",e.csrf.token))}function v(t,e){return'<meta name="'+t+'" content="'+e+'">'}function b(t,e){return function(){t.reject();var n="Auth error: "+e;i.log(n),E&&E.log&&E.log(n)}}function y(t){return n.getDetails().done(function(e){t.resolve(e)})}function _(){r||(r=require("views/AuthPromptView"))}var w,k,x,S=!1,E=window.console,C=function(){x||(_(),x=new r,x.on("close",function(){e.defer(function(){k&&"pending"!==k.state()&&k.reject()
})}).on("login.success",function(){y(k).fail(d)}).render()),x.open()};h.capable=function(){return S=!0,s.cors&&!document.location.port},h.facebook=function(){function e(t){t&&t.csrf&&m(t),"pending"===n.state()&&(p(n),y(n).fail(b(n,"unable to corroborate Facebook authentication")),s&&s.close())}f();var n=new t.Deferred,i=a(e),s=window.open(TED.authHost+"/account/auth/facebook?referer="+encodeURIComponent(u+"/session/check?callback="+i),"authfb",["scrollbars=1","resizable=1","height=480","width=640"].join(",")),r=0,o=300,l=1e4,c=window.setInterval(function(){r++,(s.closed||!s&&r*o>l)&&(e(),window[i]&&delete window[i],window.clearInterval(c),c=null)},o);return n.promise()},h.login=function(e,n){f();var i=new t.Deferred;return y(i).fail(function(){t.ajax({url:TED.authHost+"/session/new.json",timeout:3e3,type:"GET",xhrFields:{withCredentials:!0}}).then(function(s){p(i),t.ajax({url:TED.authHost+"/session.json",timeout:3e3,type:"POST",data:{authenticity_token:s.authenticity_token,user:{email:e,password:n}},xhrFields:{withCredentials:!0}}).then(function(){g().then(function(){y(i).fail(b(i,"unable to corroborate authentication"))},b(i,"session check timed out"))},b(i,"credentials rejected"))},b(i,"could not obtain token"))}),i.promise()},h.logout=function(){f()},h.prompt=function(){f();var e=new t.Deferred;return k=e,y(e).fail(C),e.promise()},c("auth.login").subscribe(function(){t(document.documentElement).addClass("loggedin").removeClass("loggedout")}),t(function(){t(document).on("click","a.auth-login",function(t){h.capable()&&(t.preventDefault(),h.prompt())})})}),require(["jquery","lodash","dq","global/floodlight","global/links","global/subscribe","global/navs","global/mainNav","global/login","global/account","global/uconf","lib/ads","global/errors","lib/auth","jqueryujs"],function(t,e,n,i,s,r,o,a,l,u,c,h){"use strict";e.defer(function(){s.init(),r.init(),o.init(),a.init(),l.init(),u.init()}),n({q:_g,modules:{ads:h,floodlight:i,uconf:c}})}),define("global",function(){}),define("utils/is_mobile",[],function(){"use strict";var t=navigator?navigator.userAgent:"",e=function(e){return e.test(t)},n=function(t){return function(){return e(t)}},i=function(){return i.isIOS()||i.isAndroid()};return i.isIOS=n(/(iPad|iPhone|iPod)/g),i.isAndroid=n(/Android/g),i}),define("utils/share",["jquery","lodash","lib/ga","utils/is_mobile"],function(t,e,n,i){"use strict";var s={media:t('meta[property="og:image"]').first().attr("content"),height:450,message:"",url:location.href,width:500},r=encodeURIComponent,o={email:{href:"//api.addthis.com/oexchange/0.8/forward/email/offer?url=<%= url %>&title=<%= message %>",ga:"email"},facebook:{href:"//www.facebook.com/sharer/sharer.php?u=<%= url %>",ga:"facebook"},gplus:{href:"//plus.google.com/share?url=<%= url %>",ga:"googlePlus"},linkedin:{href:"//www.linkedin.com/shareArticle?mini=true&url=<%= url %>&title=<%= message %>&source=TED",ga:"linkedIn",height:500},twitter:{href:"//twitter.com/intent/tweet?url=<%= url %>&text=<%= message %>",ga:"twitter"},pinterest:{href:"//pinterest.com/pin/create/button/?url=<%= url %>&media=<%= media %>",ga:"pinterest"}};return function(t,a,l){var u,c=o[t];if(!c)return!1;a=e.merge({},s,c,a),u=l?"":e.template(a.href,{url:r(a.url),message:r(a.message),media:r(a.media)});var h;return h=i.isIOS()&&!u?window:window.open(u,"sharingpopup",["scrollbars=1","resizable=1","height="+a.height,"width="+a.width].join(",")),n.sendSocial(t,"start",a.url),h.focus(),h.goToRightUrl=function(t){u=e.template(a.href,{url:r(t),message:r(a.message),media:r(a.media)}),h.location=u,h.focus()},h}}),define("hbs!templates/popupMenu",["hbs","hbs/handlebars"],function(t,e){var n=e.template(function(t,e,n,i,s){function r(t,e){var i,s,r="";return r+='\n      <li class="poup-menu__item">\n        <a href="',(s=n.url)?i=s.call(t,{hash:{}}):(s=t&&t.url,i=typeof s===u?s.call(t,{hash:{}}):s),r+=c(i)+'" ',i=n["if"].call(t,t&&t.blank,{hash:{},inverse:h.noop,fn:h.program(2,o,e)}),(i||0===i)&&(r+=i),r+=' class="l3 popup-menu__link">\n          ',(s=n.label)?i=s.call(t,{hash:{}}):(s=t&&t.label,i=typeof s===u?s.call(t,{hash:{}}):s),r+=c(i)+"\n        </a>\n      </li>\n    "}function o(){return'target="_blank"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers);var a,l="",u="function",c=this.escapeExpression,h=this;return l+='\n\n<div class="popup-menu">\n  <ul class="popup-menu__list">\n    ',a=n.each.call(e,e&&e.items,{hash:{},inverse:h.noop,fn:h.program(1,r,s)}),(a||0===a)&&(l+=a),l+="\n  </ul>\n</div>\n"});return n}),define("widgets/popupMenu",["jquery","lodash","hbs!templates/popupMenu","widgets/tooltip"],function(t,e,n){"use strict";return t.widget("ted.popupMenu",t.ted.tooltip,{options:{interactive:!0,inverse:!0,items:[],position:{my:"center top+10",at:"center bottom",of:window,collision:"fit flip"}},_create:function(){this.options.content||(this.options.content=n({items:this._items()})),this._super(),this._on(this.popupObject,{"click a.popup-menu__link":function(t){var e=this.popupObject.find("a.popup-menu__link").index(t.target),n=-1===e?null:this.options.items[e];n.url||t.preventDefault(),this._trigger("itemclick",t,n)!==!1&&n.callback&&n.callback.call(t.target,t,n)}})},_items:function(){return e.map(this.options.items,function(t){var n=t.url||"#",i=t.blank||n.match(/^(?:https?:)?\/\//);return e.merge({},t,{url:n,blank:i})})}}),function(e,n){return t(e).popupMenu(n)}}),define("widgets/share",["jquery","lodash","utils/share","jqueryui/widget","widgets/popupMenu"],function(t,e,n){"use strict";t.widget("ted.share",{options:{url:window.location.href,message:null},_create:function(){var e=this;e._createOther(),e._on({"click a.share__link":function(n){e._share(t(n.target).parent().data("service")),n.preventDefault()}})},_createOther:function(){var t=this.element.find("a.share__link--other");if(t.length){var n=e.filter([{label:"Google +",service:"gplus"},{label:"LinkedIn",service:"linkedin"}]),i=this;t.popupMenu({items:e.map(n,function(t){return e.merge(t,{callback:function(t,e){i._share(e.service),t.preventDefault()}})})})}},_share:function(t){n(t,{url:this.options.url,message:this.options.message})}})}),define("hbs!templates/tablePrefix",["hbs","hbs/handlebars","templates/helpers/icon"],function(t,e){var n=e.template(function(t,e,n){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers);var i,s,r="",o=n.helperMissing,a=this.escapeExpression;return r+='\n\n<div class="table-modal__return">\n  <a class="table-modal__return__link" href="#">\n    '+a((i=n.icon||e&&e.icon,s={hash:{}},i?i.call(e,"arrow-alt-left","Back","table-modal__return__link__icon",s):o.call(e,"icon","arrow-alt-left","Back","table-modal__return__link__icon",s)))+'\n    <span class="table-modal__return__link__text">Back</span>\n  </a>\n</div>\n'});return n}),define("hbs!templates/tableOpener",["hbs","hbs/handlebars"],function(t,e){var n=e.template(function(t,e,n){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers);var i,s,r="",o="function",a=this.escapeExpression;return r+='\n\n<div class="table-wrapper__helper button button--wide">\n  ',(s=n.buttonLabel)?i=s.call(e,{hash:{}}):(s=e&&e.buttonLabel,i=typeof s===o?s.call(e,{hash:{}}):s),r+=a(i)+"\n</div>\n"});return n}),define("widgets/table",["jquery","hbs!templates/tablePrefix","hbs!templates/tableOpener","widgets/modal"],function(t,e,n){"use strict";var i,s="table-wrapper",r=s+"__table",o="table-modal";t.widget("ted.table",{options:{buttonLabel:"View table"},open:function(){var t=this;this.modal?this.modal.modal("open"):(this.content=this.clone.wrap('<div class="module '+o+'__content"></div>').parent(),i||(i=e()),this.content.prepend(i),this._on(this.content.find("a.table-modal__return__link"),{click:function(e){e.preventDefault(),t.close()}}),this.modal=this.content.modal())},close:function(){this.modal.modal("close")},_click:function(t){t.preventDefault(),this.open()},_create:function(){this.clone=this.element.clone(),this.element.addClass(r),this.wrapper=this.element.wrap("<div class="+s+"></div>").parent(),this.opener=t(n({buttonLabel:this.options.buttonLabel||"View table"})).appendTo(this.wrapper),this._on(this.opener,{click:this._click})}})}),define("widgets/submenu",["jquery","lodash","lib/shoji","jqueryui/widget"],function(t,e,n){"use strict";var i,s="submenu",r=s+"--fixture",o=s+"--opened",a=e.once(function(){i=t("body,html")});return t.widget("ted.submenu",{options:{at:"left"},reveal:function(t){var e;this.element.hasClass(o)||(this.element.addClass(o),e=!0),t&&e&&t.preventDefault()},_create:function(){a(),this._on({"click a.submenu__heading__link":this.reveal}),n.canSlide()&&this._createFixture()},_createFixture:function(){var t=this.element.clone();t.addClass(o).addClass(r),this.fixture=n.addFixture(t,this.options)}}),function(e,n){return t(e).submenu(n)}}),define("pages",["jquery","dq","Swipe","templates/helpers/pageNav","lib/Timer","exports","global","widgets/share","widgets/table","widgets/submenu"],function(t,e,n,i,s,r){"use strict";function o(t,e){t.key="D2Tgc2wN+HGqQ28NhDkPUpXOjGSdsDJWgju5o4177IA=",t(e.id).setup({file:e.config.video.url,image:e.config.image.url,height:"100%",width:"100%"})}r.carousel=function(e){var r=t("#"+e.id),o=r.find("div.swipe"),a="page-nav__dot--active",l=t(i(r.find("div.swipe__page").length)).addClass("pages-carousel__nav").appendTo(r),u=l.find("li.page-nav__dot"),c=new n(o.get(0),{continuous:!0,stopPropagation:!0,callback:function(t){u.removeClass(a).eq(t).addClass(a)}});if(o.addClass("swipe--initialized"),u.on("click",function(t){t.preventDefault(),c.slide(u.index(this))}).eq(0).addClass(a),r.find("a.pages-carousel__flipper, a.page-nav__prev, a.page-nav__next").on("click",function(e){e.preventDefault(),c[t(this).attr("href").split("#").pop()]()}),e.auto){var h=new s({delay:e.delay,interval:e.interval});h.add(function(){c.next()}),h.start(),e.hoverPause&&r.on("mouseenter",function(){h.stop()}).on("mouseleave",function(){h.start()})}},r.dynamic=function(t){var e=Array.prototype.slice.call(arguments,1);require(["pages/dynamic/"+t],function(t){t.apply(this,e)})},r.share=function(e,n){t("#"+e).share(n)},r.submenu=function(){t("#submenu").submenu()},r.jwplayer=function(t){require(["jwplayer/jwplayer"],function(){o(window.jwplayer,t)})},r.table=function(e,n){t("#"+e).table(n)},r.newsletter=function(e){function n(e){e.preventDefault();var n=""+c.val();/.+@.+/.test(n)?t.ajax({type:o.attr("method"),url:o.attr("action"),timeout:3e3,data:o.serialize(),cache:!1,dataType:"jsonp",jsonp:"c",contentType:"application/json; charset=utf-8",error:function(t,e){"timeout"==e&&s("Unable to register for newsletter at this time")},success:function(t){"error"==t.result?s("An error occurred: "+t.msg):(i(t.msg),o.off("submit"))}}):s("Please check your details and try again.")}function i(t){l.slideUp("fast"),a.slideUp("fast"),u.slideDown("fast"),u.text(t)}function s(t){l.slideDown("fast"),l.text(t)}var r="#"+e.formId,o=t(r),a=t(r+"-details"),l=t(r+"-errors"),u=t(r+"-success"),c=t(r+"-email");o.on("submit",n)},e({modules:{pages:r}})})}();
//# sourceMappingURL=pages.js
//# sourceMappingURL=pages.js.map