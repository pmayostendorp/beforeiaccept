(function(){function k(a){return encodeURIComponent(a).replace(/%20/g,"+")}function l(){var a=document.cookie,b=[];""!==a&&(b=a.split(/; */));for(var a={},c=0;c<b.length;c++){var e=/([^=]+)=(.*)/.exec(b[c]);e&&(a[e[1]]=e[2])}return a}function d(a,b,c){void 0!==c&&null!==c&&a.push(b,c.toString())}function n(a){a=a.map(k);for(var b=[],c=0;c<a.length;c+=2)b.push(a[c]+"\x3d"+a[c+1]);return b.join("\x26")}function p(a,b,c){try{var e=n(b),d=document.createElement("img");d.src=a+"?"+e;d.onload=function(a){try{if("AdTruth"==
f.product){var b;a:{try{var e=l().DIResponse;if(!e)throw Error("No response data");var d=JSON.parse(decodeURIComponent(e.replace(/\+/g,"%20")));if(d.error)throw Error(d.error);b=d;break a}finally{var g=f.serviceBaseURL.match(/^https?:\/\/([^:/]+)/);if(g){var h="DIResponse\x3d;domain\x3d"+g[1].replace(/^[^\.]+/,"")+";path\x3d/",m=new Date;m.setTime(0);document.cookie=h.replace(/; *(?:expires|max-age)=[^;]*/g,"")+";expires\x3d"+m.toGMTString()}}b=void 0}c(b)}else c()}catch(k){c(k)}};d.onerror=function(a){try{var b=
Error("Submission failed");a&&a.error&&(b=a.error);throw b;}catch(d){c(d)}}}catch(g){c(g)}}var f={customerId:"1008",product:"AdTruth",serviceBaseURL:"http://otr2-demo.metrixclix.com/di-cloud-service/",resourceURL:"http://otr2-demo.metrixclix.com/di-cloud-service/dires",cookieName:""};window.fortyone.dicloud={};window.fortyone.dicloud.submit=function(a){var b=function(a){},c=a.callback;c instanceof Function&&(b=function(a){try{c(a)}catch(b){}});try{var e=a.requestData||{};if("AdTruth"===f.product&&
void 0!==f.cookieName){var h=l();if(void 0!==h[f.cookieName]){b(JSON.parse(decodeURIComponent(h[f.cookieName].replace(/\+/g,"%20"))));return}}fortyone.setResource(f.resourceURL,!0);a=[];d(a,"cid",f.customerId);d(a,"cpid",e.campaignId);d(a,"bm",e.benchmarkId);d(a,"eid",e.eventId);d(a,"pl",fortyone.collect());d(a,"ext",void 0===e.extra?void 0:JSON.stringify(e.extra));d(a,"_","");p(f.serviceBaseURL+"at",a,b)}catch(g){b(g)}}})();
