var PF_VERSION="2015-07-02-031354356",pfMod=window.pfMod||function(e,t){var n=e.document,i=n.location.protocol,o={environment:"production",protocol:i,dir:"ltr",usingBM:!1,hosts:{cdn:"https:"==i?"https://d3nekkt1lmmhms.cloudfront.net":"http://cdn.printnicer.com",pf:i+"//www.printfriendly.com",ds:i+"//ds.printfriendly.com",ds_cdn:"https:"===i?"https://ds.printfriendly.com":"http://cdn.ds.printfriendly.com",pdf:i+"//pdf.printfriendly.com",email:i+"//email-srv.printfriendly.com",page:e.location.host.split(":")[0]},domains:{page:e.location.host.split(":")[0].split("www.").pop()}},r={isReady:!1,readyBound:!1,addStyles:function(){var e="body * { z-index: 0 !important; }",t=document.getElementsByTagName("head")[0],n=document.createElement("style"),i;n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e));try{i=document.querySelector("meta[name=viewport]")}catch(o){c.log(o)}i||(i=document.createElement("meta"),i.name="viewport"),i.content="width=device-width, initial-scale=1",t.appendChild(n),t.appendChild(i)},setWidthOfImages:function(){for(var e=document.getElementsByTagName("img"),t=0;t<e.length;t++){var n=e[t];-1===n.className.indexOf("hidden-originally")&&(n.width=n.width)}},convertRelativetoAbsolute:function(e){for(var t=document.getElementsByTagName(e),n,i,o=0;o<t.length;o++){n=t[o];try{"img"===e?n.src=n.src:(i=n.getAttribute("href")||"","#"!==i.charAt(0)&&(n.href=n.href))}catch(r){}}},removeScripts:function(){for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++)("undefined"==typeof e[t].src||-1===e[t].src.indexOf("printfriendly"))&&e[t].parentNode&&(e[t].parentNode.removeChild(e[t]),t--)},processElements:function(){for(var t="|link|style|iframe|ins|noscript|object|embed|select|",n,i,o,r,s=document.body.getElementsByTagName("*"),a=0;a<s.length;a++)try{i=s[a],o=i.nodeName.toLowerCase(),-1!==t.indexOf("|"+o+"|")?(i.parentNode.removeChild(i),a--):(n="NA",n=i.currentStyle?i.currentStyle.display:e.getComputedStyle(i,null).getPropertyValue("display"),"none"===n&&(r=i.getAttribute("class"),r=r?r:"",r+=" hidden-originally",i.setAttribute("class",r))),"svg"===o?this.convertSvgToImage(i):"canvas"===o&&this.convertCanvasToImage(i)}catch(c){}},convertSvgToImage:function(t){var n,i,o;t.setAttribute("version",1.1),t.setAttribute("xmlns","http://www.w3.org/2000/svg"),i=t.outerHTML,n=t.getAttribute("class"),n=n?n:"",n+=" svg-png",o=new Image,o.src="data:image/svg+xml;base64,"+e.btoa(unescape(encodeURIComponent(i))),o.setAttribute("class",n),o.setAttribute("crossOrigin","anonymous"),t.parentNode.replaceChild(o,t)},convertCanvasToImage:function(e){var t;classNames=e.getAttribute("class"),classNames=classNames?classNames:"",classNames+=" canvas-png",t=new Image,t.src=e.toDataURL("image/png"),t.setAttribute("class",classNames),t.setAttribute("crossOrigin","anonymous"),e.parentNode.replaceChild(t,e)},ready:function(){if(!r.isReady){if(!document.body)return setTimeout(r.ready,13);r.isReady=!0,r.readyFunc.call()}},doScrollCheck:function(){if(!r.isReady){try{document.documentElement.doScroll("left")}catch(e){return setTimeout(r.doScrollCheck,50)}r.detach(),r.ready()}},detach:function(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",r.completed,!1),e.removeEventListener("load",r.completed,!1)):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",r.completed),e.detachEvent("onload",r.completed))},completed:function(e){(document.addEventListener||"load"===e.type||"complete"===document.readyState)&&(r.detach(),r.ready())},bindReady:function(){if(!r.readyBound){if(r.readyBound=!0,"complete"===document.readyState)return r.ready();if(document.addEventListener)document.addEventListener("DOMContentLoaded",r.completed,!1),e.addEventListener("load",r.completed,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",r.completed),e.attachEvent("onload",r.completed);var t=!1;try{t=null==e.frameElement&&document.documentElement}catch(n){}t&&t.doScroll&&r.doScrollCheck()}}},domReady:function(e){this.readyFunc=e,this.bindReady()},canonicalize:function(e){if(e){var t=document.createElement("div");return t.innerHTML="<a></a>",t.firstChild.href=e,t.innerHTML=t.innerHTML,t.firstChild.href}return e},processDocument:function(){this.processElements(),this.addStyles(),this.convertRelativetoAbsolute("a"),this.convertRelativetoAbsolute("img"),this.removeScripts(),this.setWidthOfImages()}},s={headerImageUrl:e.pfHeaderImgUrl,headerTagline:e.pfHeaderTagline,imageDisplayStyle:e.pfImageDisplayStyle,customCSSURL:r.canonicalize(e.pfCustomCSS),disableClickToDel:e.pfdisableClickToDel,disablePDF:e.pfDisablePDF,disablePrint:e.pfDisablePrint,disableEmail:e.pfDisableEmail,hideImages:e.pfHideImages},a={version:PF_VERSION,initialized:!1,messages:[],errors:[],init:function(t){try{this.initialized=!0,this.configure(t),this.setVariables(),this.detectBrowser(),this.startIfNecessary(),e.print=this.start}catch(n){c.log(n)}},configure:function(e){if(this.config=o,e){this.config.environment="development";for(var t in e.hosts)this.config.hosts[t]=e.hosts[t]}},startIfNecessary:function(){(e.pfstyle||this.urlHasAutoStartParams())&&this.start()},urlHasAutoStartParams:function(){return-1!==this.config.urls.page.indexOf("pfstyle=wp")},start:function(){a.isRedirectNecessary()?a.redirect():a.supportedSiteType()&&r.domReady(function(){try{a.startTime=(new Date).getTime(),r.processDocument(),a.detectPlatforms(),a.cacheBodyHTML(),a.createMask(),a.loadCore()}catch(e){c.log(e)}})},setVariables:function(){var t=this,n,o="production"===this.config.environment?this.version:Math.random();this.config.urls={js:{jquery:i+"//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js",jqueryBackup:t.config.hosts.cdn+"/javascripts/common/jquery/1.11.0/jquery.min.js",core:t.config.hosts.cdn+"/versions/"+t.version+"/js/core.js?_="+o,algo:t.config.hosts.cdn+"/versions/"+t.version+"/js/algo.js?_="+o},css:{page:t.config.hosts.cdn+"/versions/"+t.version+"/css/main.css?_="+o},pdfMake:t.config.hosts.pdf+"/pdfs/make",email:t.config.hosts.email+"/email/new"};try{n=top.location.href}catch(r){n=e.location.href}this.config.urls.page=n,this.userSettings=s,!e.pfstyle||"bk"!==e.pfstyle&&"nbk"!==e.pfstyle&&"cbk"!==e.pfstyle||(this.config.usingBM=!0)},detectBrowser:function(){this.browser={};var e=navigator.appVersion;-1!==e.indexOf("MSIE")?(this.browser.version=parseFloat(e.split("MSIE")[1]),this.browser.isIE=!0):this.browser.isIE=!1},detectPlatforms:function(){var t=document.styleSheets,n=/wp-content/i,i=/blogger.com/i;if("wikihow.com"===this.config.domains.page)this.config.isWikiHow=!0;else if("wsite"===e.STYLE_PREFIX)this.config.isWeebly=!0;else for(var o=0;o<t.length;o++){if(null!==t[o].href&&-1!==t[o].href.search(n)){this.config.isWP=!0;break}if(null!==t[o].href&&-1!==t[o].href.search(i)){this.config.isBlogger=!0;break}}},createIframe:function(e){var t=e.createElement("iframe");return t.src="javascript:false",t.frameBorder="0",t.allowTransparency="true",t},loadHtmlInIframe:function(e,t,n){var i,o;try{o=t.contentWindow.document}catch(r){i=e.domain,t.src="javascript:var d=document.open();d.domain='"+i+"';void(0);",o=t.contentWindow.document}o.write(n),o.close()},redirect:function(){var e=["source=cs","url="+encodeURIComponent(top.location.href)],t;for(var n in s)"undefined"!=typeof s[n]&&e.push(n+"="+encodeURIComponent(s[n]));t=this.config.hosts.pf+"/print/?"+e.join("&"),this.urlHasAutoStartParams()?top.location.replace(t):top.location.href=t},supportedSiteType:function(){return"about:blank"===a.config.urls.page||"http:"!==a.config.protocol&&"https:"!==a.config.protocol?!1:!0},isRedirectNecessary:function(){try{return navigator.userAgent.match(/(iphone|ipad|ipod|android|opera.mini)/i)||this.browser.isIE&&this.browser.version<8||this.browser.isIE&&e.adsbygoogle||"undefined"!=typeof $&&$.jcarousel&&this.browser.isIE||this.browser.isIE&&this.browser.version<9&&"skinnytaste.com"===this.config.domains.page?!0:!1}catch(t){return c.log(t),!1}},createMask:function(){var e=document.createElement("div");e.innerHTML='<div id="pf-mask" style="z-index: 2147483627!important; position: fixed !important; top: 0pt !important; left: 0pt !important; background-color: rgb(0, 0, 0) !important; opacity: 0.8 !important;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=80); height: 100% !important; width: 100% !important;"></div>',document.body.appendChild(e.firstChild)},cacheBodyHTML:function(){a.bodyCache='<div id="'+document.body.id+'" class="'+document.body.className+' pf-body-cache">'+document.body.innerHTML+"</div>",a.browser.isIE&&(document.body.innerHTML="<p></p>")},refresh:function(){var t=a.config.urls.page.replace("pfstyle=wp","").replace(/#(.*)$/,"");try{return document.body.innerHTML='<div style="position:absolute; top:0; bottom:0; left:0; right:0; padding:10%; text-align:center; background:#333;">&nbsp;</div>',this.urlHasAutoStartParams()?e.top.location.href=t:e.top.location.reload(),!1}catch(n){c.log(n),setTimeout(function(){e.top.location.replace(t)},100)}},removeDoubleSemiColon:function(e){return e.replace(/;{2}/g,";")},loadCore:function(){var e='<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta name="viewport" content="width=device-width, initial-scale=1"><script src="'+this.config.urls.js.jquery+'"></script><script src="'+this.config.urls.js.core+'"></script><link media="screen" type="text/css" rel="stylesheet" href="'+this.config.urls.css.page+'"></head><body onload="core.init();"></body>',t=this.createIframe(document);t.id="pf-core",t.name="pf-core",document.body.appendChild(t);var n=t.style.cssText+";width: 100% !important;max-width:100% !important;height: 100% !important; display: block !important; overflow: hidden !important; position: absolute !important; top: 0px !important; left: 0px !important; background-color: transparent !important; z-index: 2147483637!important";t.style.cssText=this.removeDoubleSemiColon(n),this.loadHtmlInIframe(document,t,e)}},c={_window:e.top,_doc:e.top.document,installInitiated:!1,validFile:/d3nekkt1lmmhms|printfriendly\.com|printnicer\.com|algo\.js|printfriendly\.js|core\.js/,setVars:function(){this._window.frames["pf-core"]&&this._window.frames["pf-core"].document&&(this._window=this._window.frames["pf-core"],this._doc=this._window.document)},install:function(){if(this.installInitiated)return!0;var t;t=e.JSON&&e.JSON.stringify?"//cdn.ravenjs.com/1.1.16/raven.min.js":a.config.hosts.cdn+"/javascripts/raven/1.1.16/json_raven.min.js",this.installInitiated=!0,this.setVars();var n=this._doc.createElement("script"),i=this._doc.getElementsByTagName("script")[0];n.src=t,i.parentNode.appendChild(n),this.wait()},wait:function(){return this._window.Raven?(this.configure(),void this.pushExistingErrors()):setTimeout(function(){c.wait()},100)},configure:function(){this._window.Raven.config("https://4b3437355eed4d3abf6ee3a5fea7aeca@app.getsentry.com/22091",{dataCallback:function(e){var t,n;try{t=e.stacktrace.frames[0],t.filename.match(c.validFile)&&"onload"!==t["function"]||e.stacktrace.frames.shift()}catch(i){}return e},shouldSendCallback:function(e){return e&&e.extra&&e.extra.file?!0:e&&e.culprit&&e.culprit.match(c.validFile)?!0:!1}}).install()},sendError:function(e,t){t="undefined"!=typeof t?{file:t.file}:{file:"printfriendly.js"},t.version=a.version,t.usingBM=a.config.usingBM,"production"===a.config.environment&&this._window.Raven.captureException(e,{extra:t})},pushExistingErrors:function(){for(var e=0;e<a.errors.length;e++)this.sendError(a.errors[e].err,a.errors[e].opts)},log:function(e,t){t=t||{file:"printfriendly.js"};try{this._window.Raven?this.sendError(e,t):(a.errors.push({err:e,opts:t}),this.install(),a.messages.push(e.name+" : "+e.message),a.messages.push(e.stack))}catch(n){}}};return a.exTracker=c,a}(window),priFri=pfMod;"algo"===window.name||"pf-core"===window.name||pfMod.initialized||pfMod.init(window.pfOptions);
//# sourceMappingURL=printfriendly.js.map