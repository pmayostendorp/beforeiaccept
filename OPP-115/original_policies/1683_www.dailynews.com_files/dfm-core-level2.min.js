extend(dfm,{$:jQuery,urls:new Array(),env:{loadTime:new Date(),width:jQuery(window).width(),height:0,geolocation:!!navigator.geolocation,canvas:!!document.createElement("canvas").getContext,html5:!!document.createElement("canvas").getContext&&!!navigator.geolocation,touch:(typeof(window.Touch)!="undefined")?true:false,device:"desktop",debug:true,version:"0",revision:"1",build:"1b",release:"alpha",codename:"asimov"},events:{aryWin:[],aryDoc:[],idx:{prep:0,preload:1,init:2,normal:3,postload:4,cleanup:5},add:function(){var a=((dfm.type(arguments[1])=="string")?(this.idx[arguments[1]]):(arguments[1]));var b=((a<4)?(this.aryDoc):(this.aryWin));b.push({event:arguments[0],order:a})},run:function(){var a=((arguments[0]=="document")?(this.aryDoc):(this.aryWin));a.sort(this.sort);dfm.$.each(a,function(){this.event()})},sort:function(d,c){if(d.order<c.order){return(-1)}if(d.order>c.order){return(1)}return(0)}},uuid:function(){for(var b="",a=0;a<6;a++){b+=((Math.random()*16777215<<0).toString(16))}b=b.split("");b[8]=b[13]=b[18]=b[23]="-";return(b.join(""))},convert:function(){try{if(typeof dfm.$[arguments[0]]=="function"){return(dfm.$[arguments[0]](arguments[1]))}}catch(a){}return("")},trace:function(){if(this.env.debug){var b=((arguments.length)?(arguments[0]):(""));var i=((typeof(console)=="object")&&(typeof(console.dir)=="function")&&(typeof(console.info)=="function")&&(typeof(console.trace)=="function"));var e="";if(i){if(typeof(b)=="object"){console.dir(b)}else{if(b){console.info(b)}else{console.trace()}}}else{var g=dfm.$("#trace");if(!g.length){dfm.$("body").append('<div id="trace"></div>')}if(typeof(b)=="object"){for(var f in b){e+="["+f+" = "+b[f]+"]<br />"}}else{e=b+"<br />"}dfm.$("#trace").append("<h5>Debugger</h5>"+e)}}},load:function(){try{if(dfm.type(arguments[0])=="object"){var obj=arguments[0];var type=obj.type;var load="jQuery.load"+obj.type.capitalize();eval(load)(obj)}else{switch(arguments[0]){case"event":if(dfm.type(arguments[1])=="function"){this.events.add(arguments[1],((arguments.length==3)?(arguments[2]):(3)))}break;case"embed":if(arguments[1]=="youtube"){if(dfm.$.inArray(arguments[3],dfm.urls)==-1){dfm.$.loadYoutube({what:"embed",type:arguments[1],parent:arguments[4],src:arguments[3],size:arguments[2]});dfm.urls.push(arguments[3])}}break;case"style":if(dfm.$.inArray(arguments[1],dfm.urls)==-1){dfm.$.loadStyle(arguments[1]);dfm.urls.push(arguments[1])}break;case"script":if(dfm.$.inArray(arguments[1],dfm.urls)==-1){dfm.$.loadScript(arguments[1],(arguments.length==3?arguments[2]:false));dfm.urls.push(arguments[1])}break;case"component":if(arguments[1].indexOf("|")>-1){var ary=arguments[1].split("|");dfm.$.ajax({url:ary[0],type:"HEAD",error:function(){dfm.$.loadAjax(ary[1],dfm.$(arguments[2]),function(data){if(data.results.length){this.append(data.results[0].replace(/<body>|<\/body>/gi,""))}},(arguments.length==4?arguments[3]:false))},success:function(){dfm.$.loadAjax(ary[0],dfm.$(arguments[2]),function(data){if(data.results.length){this.append(data.results[0].replace(/<body>|<\/body>/gi,""))}},(arguments.length==4?arguments[3]:false))}})}else{dfm.$.loadAjax(arguments[1],dfm.$(arguments[2]),function(data){if(data.results.length){this.append(data.results[0].replace(/<body>|<\/body>/gi,""))}},(arguments.length==4?arguments[3]:false))}break}}}catch(err){}},documentReady:function(){dfm.env.height=dfm.$(window).height();dfm.events.run("document")},windowLoaded:function(){dfm.env.height=dfm.$(window).height();dfm.env.loadTime=((new Date().getTime())-(dfm.env.loadTime))+"ms";dfm.events.run("window")},init:function(){if(this.env.phone){this.env.device="phone"}else{if(this.env.tablet){this.env.device="tablet"}else{this.env.device="desktop"}}dfm.$(document).ready(dfm.documentReady);dfm.$(window).load(dfm.windowLoaded)}});dfm.init();