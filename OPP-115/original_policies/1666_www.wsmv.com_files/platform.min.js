/* FrontEndFiles-v3-18-40 */  
/*! jQuery v1.11.0 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(d,c){"object"==typeof module&&"object"==typeof module.exports?module.exports=d.document?c(d,!0):function(b){if(!b.document){throw new Error("jQuery requires a window with a document")}return c(b)}:c(d)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k="".trim,l={},m="1.11.0",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++){if(null!=(e=arguments[h])){for(d in e){a=g[d],c=e[d],g!==c&&(j&&c&&(n.isPlainObject(c)||(b=n.isArray(c)))?(b?(b=!1,f=a&&n.isArray(a)?a:[]):f=a&&n.isPlainObject(a)?a:{},g[d]=n.extend(j,f,c)):void 0!==c&&(g[d]=c))}}}return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray||function(a){return"array"===n.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a){return !1}return !0},isPlainObject:function(a){var b;if(!a||"object"!==n.type(a)||a.nodeType||n.isWindow(a)){return !1}try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf")){return !1}}catch(c){return !1}if(l.ownLast){for(b in a){return j.call(a,b)}}for(b in a){}return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&n.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++){if(d=b.apply(a[e],c),d===!1){break}}}else{for(e in a){if(d=b.apply(a[e],c),d===!1){break}}}}else{if(g){for(;f>e;e++){if(d=b.call(a[e],e,a[e]),d===!1){break}}}else{for(e in a){if(d=b.call(a[e],e,a[e]),d===!1){break}}}}return a},trim:k&&!k.call("\ufeff\xa0")?function(a){return null==a?"":k.call(a)}:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g){return g.call(b,a,c)}for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++){if(c in b&&b[c]===a){return c}}}return -1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d){a[e++]=b[d++]}if(c!==c){while(void 0!==b[d]){a[e++]=b[d++]}}return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++){d=!b(a[f],f),d!==h&&e.push(a[f])}return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h){for(;g>f;f++){d=b(a[f],f,c),null!=d&&i.push(d)}}else{for(f in a){d=b(a[f],f,c),null!=d&&i.push(d)}}return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),n.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||n.guid++,e):void 0},now:function(){return +new Date},support:l}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s="sizzle"+-new Date,t=a.document,u=0,v=0,w=eb(),x=eb(),y=eb(),z=function(a,b){return a===b&&(j=!0),0},A="undefined",B=1<<31,C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=D.indexOf||function(a){for(var b=0,c=this.length;c>b;b++){if(this[b]===a){return b}}return -1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",M=L.replace("w","w#"),N="\\["+K+"*("+L+")"+K+"*(?:([*^$|!~]?=)"+K+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+M+")|)|)"+K+"*\\]",O=":("+L+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+N.replace(3,8)+")*)|.*)\\)|)",P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(O),U=new RegExp("^"+M+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L.replace("w","w*")+")"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=/'|\\/g,ab=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),bb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{G.apply(D=H.call(t.childNodes),t.childNodes),D[t.childNodes.length].nodeType}catch(cb){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]){}a.length=c-1}}}function db(a,b,d,e){var f,g,h,i,j,m,p,q,u,v;if((b?b.ownerDocument||b:t)!==l&&k(b),b=b||l,d=d||[],!a||"string"!=typeof a){return d}if(1!==(i=b.nodeType)&&9!==i){return[]}if(n&&!e){if(f=Z.exec(a)){if(h=f[1]){if(9===i){if(g=b.getElementById(h),!g||!g.parentNode){return d}if(g.id===h){return d.push(g),d}}else{if(b.ownerDocument&&(g=b.ownerDocument.getElementById(h))&&r(b,g)&&g.id===h){return d.push(g),d}}}else{if(f[2]){return G.apply(d,b.getElementsByTagName(a)),d}if((h=f[3])&&c.getElementsByClassName&&b.getElementsByClassName){return G.apply(d,b.getElementsByClassName(h)),d}}}if(c.qsa&&(!o||!o.test(a))){if(q=p=s,u=b,v=9===i&&a,1===i&&"object"!==b.nodeName.toLowerCase()){m=ob(a),(p=b.getAttribute("id"))?q=p.replace(_,"\\$&"):b.setAttribute("id",q),q="[id='"+q+"'] ",j=m.length;while(j--){m[j]=q+pb(m[j])}u=$.test(a)&&mb(b.parentNode)||b,v=m.join(",")}if(v){try{return G.apply(d,u.querySelectorAll(v)),d}catch(w){}finally{p||b.removeAttribute("id")}}}}return xb(a.replace(P,"$1"),b,d,e)}function eb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function fb(a){return a[s]=!0,a}function gb(a){var b=l.createElement("div");try{return !!a(b)}catch(c){return !1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function hb(a,b){var c=a.split("|"),e=a.length;while(e--){d.attrHandle[c[e]]=b}}function ib(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||B)-(~a.sourceIndex||B);if(d){return d}if(c){while(c=c.nextSibling){if(c===b){return -1}}}return a?1:-1}function jb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function kb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function lb(a){return fb(function(b){return b=+b,fb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--){c[e=f[g]]&&(c[e]=!(d[e]=c[e]))}})})}function mb(a){return a&&typeof a.getElementsByTagName!==A&&a}c=db.support={},f=db.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},k=db.setDocument=function(a){var b,e=a?a.ownerDocument||a:t,g=e.defaultView;return e!==l&&9===e.nodeType&&e.documentElement?(l=e,m=e.documentElement,n=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){k()},!1):g.attachEvent&&g.attachEvent("onunload",function(){k()})),c.attributes=gb(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=gb(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(e.getElementsByClassName)&&gb(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=gb(function(a){return m.appendChild(a).id=s,!e.getElementsByName||!e.getElementsByName(s).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==A&&n){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ab,bb);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ab,bb);return function(a){var c=typeof a.getAttributeNode!==A&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==A?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++]){1===c.nodeType&&d.push(c)}return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==A&&n?b.getElementsByClassName(a):void 0},p=[],o=[],(c.qsa=Y.test(e.querySelectorAll))&&(gb(function(a){a.innerHTML="<select t=''><option selected=''></option></select>",a.querySelectorAll("[t^='']").length&&o.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||o.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll(":checked").length||o.push(":checked")}),gb(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&o.push("name"+K+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||o.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),o.push(",.*:")})),(c.matchesSelector=Y.test(q=m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&gb(function(a){c.disconnectedMatch=q.call(a,"div"),q.call(a,"[s!='']:x"),p.push("!=",O)}),o=o.length&&new RegExp(o.join("|")),p=p.length&&new RegExp(p.join("|")),b=Y.test(m.compareDocumentPosition),r=b||Y.test(m.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b){while(b=b.parentNode){if(b===a){return !0}}}return !1},z=b?function(a,b){if(a===b){return j=!0,0}var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===t&&r(t,a)?-1:b===e||b.ownerDocument===t&&r(t,b)?1:i?I.call(i,a)-I.call(i,b):0:4&d?-1:1)}:function(a,b){if(a===b){return j=!0,0}var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],k=[b];if(!f||!g){return a===e?-1:b===e?1:f?-1:g?1:i?I.call(i,a)-I.call(i,b):0}if(f===g){return ib(a,b)}c=a;while(c=c.parentNode){h.unshift(c)}c=b;while(c=c.parentNode){k.unshift(c)}while(h[d]===k[d]){d++}return d?ib(h[d],k[d]):h[d]===t?-1:k[d]===t?1:0},e):l},db.matches=function(a,b){return db(a,null,null,b)},db.matchesSelector=function(a,b){if((a.ownerDocument||a)!==l&&k(a),b=b.replace(S,"='$1']"),!(!c.matchesSelector||!n||p&&p.test(b)||o&&o.test(b))){try{var d=q.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType){return d}}catch(e){}}return db(b,l,null,[a]).length>0},db.contains=function(a,b){return(a.ownerDocument||a)!==l&&k(a),r(a,b)},db.attr=function(a,b){(a.ownerDocument||a)!==l&&k(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!n):void 0;return void 0!==f?f:c.attributes||!n?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},db.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},db.uniqueSort=function(a){var b,d=[],e=0,f=0;if(j=!c.detectDuplicates,i=!c.sortStable&&a.slice(0),a.sort(z),j){while(b=a[f++]){b===a[f]&&(e=d.push(f))}while(e--){a.splice(d[e],1)}}return i=null,a},e=db.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent){return a.textContent}for(a=a.firstChild;a;a=a.nextSibling){c+=e(a)}}else{if(3===f||4===f){return a.nodeValue}}}else{while(b=a[d++]){c+=e(b)}}return c},d=db.selectors={cacheLength:50,createPseudo:fb,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ab,bb),a[3]=(a[4]||a[5]||"").replace(ab,bb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||db.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&db.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return V.CHILD.test(a[0])?null:(a[3]&&void 0!==a[4]?a[2]=a[4]:c&&T.test(c)&&(b=ob(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ab,bb).toLowerCase();return"*"===a?function(){return !0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=w[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&w(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==A&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=db.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return !!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),t=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p]){if(h?l.nodeName.toLowerCase()===r:1===l.nodeType){return !1}}o=p="only"===a&&!o&&"nextSibling"}return !0}if(o=[g?q.firstChild:q.lastChild],g&&t){k=q[s]||(q[s]={}),j=k[a]||[],n=j[0]===u&&j[1],m=j[0]===u&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop()){if(1===l.nodeType&&++m&&l===b){k[a]=[u,n,m];break}}}else{if(t&&(j=(b[s]||(b[s]={}))[a])&&j[0]===u){m=j[1]}else{while(l=++n&&l&&l[p]||(m=n=0)||o.pop()){if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(t&&((l[s]||(l[s]={}))[a]=[u,m]),l===b)){break}}}}return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||db.error("unsupported pseudo: "+a);return e[s]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?fb(function(a,c){var d,f=e(a,b),g=f.length;while(g--){d=I.call(a,f[g]),a[d]=!(c[d]=f[g])}}):function(a){return e(a,0,c)}):e}},pseudos:{not:fb(function(a){var b=[],c=[],d=g(a.replace(P,"$1"));return d[s]?fb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--){(f=g[h])&&(a[h]=!(b[h]=f))}}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:fb(function(a){return function(b){return db(a,b).length>0}}),contains:fb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:fb(function(a){return U.test(a||"")||db.error("unsupported lang: "+a),a=a.replace(ab,bb).toLowerCase(),function(b){var c;do{if(c=n?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang")){return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-")}}while((b=b.parentNode)&&1===b.nodeType);return !1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===m},focus:function(a){return a===l.activeElement&&(!l.hasFocus||l.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling){if(a.nodeType<6){return !1}}return !0},parent:function(a){return !d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:lb(function(){return[0]}),last:lb(function(a,b){return[b-1]}),eq:lb(function(a,b,c){return[0>c?c+b:c]}),even:lb(function(a,b){for(var c=0;b>c;c+=2){a.push(c)}return a}),odd:lb(function(a,b){for(var c=1;b>c;c+=2){a.push(c)}return a}),lt:lb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;){a.push(d)}return a}),gt:lb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;){a.push(d)}return a})}},d.pseudos.nth=d.pseudos.eq;for(b in {radio:!0,checkbox:!0,file:!0,password:!0,image:!0}){d.pseudos[b]=jb(b)}for(b in {submit:!0,reset:!0}){d.pseudos[b]=kb(b)}function nb(){}nb.prototype=d.filters=d.pseudos,d.setFilters=new nb;function ob(a,b){var c,e,f,g,h,i,j,k=x[a+" "];if(k){return b?0:k.slice(0)}h=a,i=[],j=d.preFilter;while(h){(!c||(e=Q.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter){!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length))}if(!c){break}}return b?h.length:h?db.error(a):x(a,i).slice(0)}function pb(a){for(var b=0,c=a.length,d="";c>b;b++){d+=a[b].value}return d}function qb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=v++;return b.first?function(b,c,f){while(b=b[d]){if(1===b.nodeType||e){return a(b,c,f)}}}:function(b,c,g){var h,i,j=[u,f];if(g){while(b=b[d]){if((1===b.nodeType||e)&&a(b,c,g)){return !0}}}else{while(b=b[d]){if(1===b.nodeType||e){if(i=b[s]||(b[s]={}),(h=i[d])&&h[0]===u&&h[1]===f){return j[2]=h[2]}if(i[d]=j,j[2]=a(b,c,g)){return !0}}}}}}function rb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--){if(!a[e](b,c,d)){return !1}}return !0}:a[0]}function sb(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++){(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h))}return g}function tb(a,b,c,d,e,f){return d&&!d[s]&&(d=tb(d)),e&&!e[s]&&(e=tb(e,f)),fb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||wb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:sb(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=sb(r,n),d(j,[],h,i),k=j.length;while(k--){(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}}if(f){if(e||a){if(e){j=[],k=r.length;while(k--){(l=r[k])&&j.push(q[k]=l)}e(null,r=[],j,i)}k=r.length;while(k--){(l=r[k])&&(j=e?I.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}}else{r=sb(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)}})}function ub(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],i=g||d.relative[" "],j=g?1:0,k=qb(function(a){return a===b},i,!0),l=qb(function(a){return I.call(b,a)>-1},i,!0),m=[function(a,c,d){return !g&&(d||c!==h)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>j;j++){if(c=d.relative[a[j].type]){m=[qb(rb(m),c)]}else{if(c=d.filter[a[j].type].apply(null,a[j].matches),c[s]){for(e=++j;f>e;e++){if(d.relative[a[e].type]){break}}return tb(j>1&&rb(m),j>1&&pb(a.slice(0,j-1).concat({value:" "===a[j-2].type?"*":""})).replace(P,"$1"),c,e>j&&ub(a.slice(j,e)),f>e&&ub(a=a.slice(e)),f>e&&pb(a))}m.push(c)}}return rb(m)}function vb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,i,j,k){var m,n,o,p=0,q="0",r=f&&[],s=[],t=h,v=f||e&&d.find.TAG("*",k),w=u+=null==t?1:Math.random()||0.1,x=v.length;for(k&&(h=g!==l&&g);q!==x&&null!=(m=v[q]);q++){if(e&&m){n=0;while(o=a[n++]){if(o(m,g,i)){j.push(m);break}}k&&(u=w)}c&&((m=!o&&m)&&p--,f&&r.push(m))}if(p+=q,c&&q!==p){n=0;while(o=b[n++]){o(r,s,g,i)}if(f){if(p>0){while(q--){r[q]||s[q]||(s[q]=E.call(j))}}s=sb(s)}G.apply(j,s),k&&!f&&s.length>0&&p+b.length>1&&db.uniqueSort(j)}return k&&(u=w,h=t),r};return c?fb(f):f}g=db.compile=function(a,b){var c,d=[],e=[],f=y[a+" "];if(!f){b||(b=ob(a)),c=b.length;while(c--){f=ub(b[c]),f[s]?d.push(f):e.push(f)}f=y(a,vb(e,d))}return f};function wb(a,b,c){for(var d=0,e=b.length;e>d;d++){db(a,b[d],c)}return c}function xb(a,b,e,f){var h,i,j,k,l,m=ob(a);if(!f&&1===m.length){if(i=m[0]=m[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&c.getById&&9===b.nodeType&&n&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(ab,bb),b)||[])[0],!b){return e}a=a.slice(i.shift().value.length)}h=V.needsContext.test(a)?0:i.length;while(h--){if(j=i[h],d.relative[k=j.type]){break}if((l=d.find[k])&&(f=l(j.matches[0].replace(ab,bb),$.test(i[0].type)&&mb(b.parentNode)||b))){if(i.splice(h,1),a=f.length&&pb(i),!a){return G.apply(e,f),e}break}}}return g(a,m)(f,b,!n,e,$.test(a)&&mb(b.parentNode)||b),e}return c.sortStable=s.split("").sort(z).join("")===s,c.detectDuplicates=!!j,k(),c.sortDetached=gb(function(a){return 1&a.compareDocumentPosition(l.createElement("div"))}),gb(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||hb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&gb(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||hb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),gb(function(a){return null==a.getAttribute("disabled")})||hb(J,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),db}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b)){return n.grep(a,function(a,d){return !!b.call(a,d,a)!==c})}if(b.nodeType){return n.grep(a,function(a){return a===b!==c})}if("string"==typeof b){if(w.test(b)){return n.filter(b,a,c)}b=n.filter(b,a)}return n.grep(a,function(a){return n.inArray(a,b)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a){return this.pushStack(n(a).filter(function(){for(b=0;e>b;b++){if(n.contains(d[b],this)){return !0}}}))}for(b=0;e>b;b++){n.find(a,d[b],c)}return c=this.pushStack(e>1?n.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return !!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=a.document,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,B=n.fn.init=function(a,b){var c,d;if(!a){return this}if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:A.exec(a),!c||!c[1]&&b){return !b||b.jquery?(b||y).find(a):this.constructor(b).find(a)}if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:z,!0)),v.test(c[1])&&n.isPlainObject(b)){for(c in b){n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c])}}return this}if(d=z.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2]){return y.find(a)}this.length=1,this[0]=d}return this.context=z,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};B.prototype=n.fn,y=n(z);var C=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!n(e).is(c))){1===e.nodeType&&d.push(e),e=e[b]}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling){1===a.nodeType&&a!==b&&c.push(a)}return c}}),n.fn.extend({has:function(a){var b,c=n(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++){if(n.contains(this,c[b])){return !0}}})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++){for(c=this[d];c&&c!==b;c=c.parentNode){if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}}}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?n.inArray(this[0],n(a)):n.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function E(a,b){do{a=a[b]}while(a&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return E(a,"nextSibling")},prev:function(a){return E(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return n.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(D[a]||(e=n.unique(e)),C.test(a)&&(e=e.reverse())),this.pushStack(e)}});var F=/\S+/g,G={};function H(a){var b=G[a]={};return n.each(a.match(F)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?G[a]||H(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++){if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&n.each(arguments,function(a,c){var d;while((d=n.inArray(c,h,d))>-1){h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return !h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return !i},fireWith:function(a,c){return !h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return !!d}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1){for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++){c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f}}return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){if(a===!0?!--n.readyWait:!n.isReady){if(!z.body){return setTimeout(n.ready)}n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(z,[n]),n.fn.trigger&&n(z).trigger("ready").off("ready"))}}});function J(){z.addEventListener?(z.removeEventListener("DOMContentLoaded",K,!1),a.removeEventListener("load",K,!1)):(z.detachEvent("onreadystatechange",K),a.detachEvent("onload",K))}function K(){(z.addEventListener||"load"===event.type||"complete"===z.readyState)&&(J(),n.ready())}n.ready.promise=function(b){if(!I){if(I=n.Deferred(),"complete"===z.readyState){setTimeout(n.ready)}else{if(z.addEventListener){z.addEventListener("DOMContentLoaded",K,!1),a.addEventListener("load",K,!1)}else{z.attachEvent("onreadystatechange",K),a.attachEvent("onload",K);var c=!1;try{c=null==a.frameElement&&z.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!n.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}J(),n.ready()}}()}}}return I.promise(b)};var L="undefined",M;for(M in n(l)){break}l.ownLast="0"!==M,l.inlineBlockNeedsLayout=!1,n(function(){var a,b,c=z.getElementsByTagName("body")[0];c&&(a=z.createElement("div"),a.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",b=z.createElement("div"),c.appendChild(a).appendChild(b),typeof b.style.zoom!==L&&(b.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(l.inlineBlockNeedsLayout=3===b.offsetWidth)&&(c.style.zoom=1)),c.removeChild(a),a=b=null)}),function(){var a=z.createElement("div");if(null==l.deleteExpando){l.deleteExpando=!0;try{delete a.test}catch(b){l.deleteExpando=!1}}a=null}(),n.acceptData=function(a){var b=n.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(O,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}n.data(a,b,c)}else{c=void 0}}return c}function Q(a){var b;for(b in a){if(("data"!==b||!n.isEmptyObject(a[b]))&&"toJSON"!==b){return !1}}return !0}function R(a,b,d,e){if(n.acceptData(a)){var f,g,h=n.expando,i=a.nodeType,j=i?n.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b){return k||(k=i?a[h]=c.pop()||n.guid++:h),j[k]||(j[k]=i?{}:{toJSON:n.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=n.extend(j[k],b):j[k].data=n.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[n.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[n.camelCase(b)])):f=g,f}}}function S(a,b,c){if(n.acceptData(a)){var d,e,f=a.nodeType,g=f?n.cache:a,h=f?a[n.expando]:n.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){n.isArray(b)?b=b.concat(n.map(b,n.camelCase)):b in d?b=[b]:(b=n.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--){delete d[b[e]]}if(c?!Q(d):!n.isEmptyObject(d)){return}}(c||(delete g[h].data,Q(g[h])))&&(f?n.cleanData([a],!0):l.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}n.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?n.cache[a[n.expando]]:a[n.expando],!!a&&!Q(a)},data:function(a,b,c){return R(a,b,c)},removeData:function(a,b){return S(a,b)},_data:function(a,b,c){return R(a,b,c,!0)},_removeData:function(a,b){return S(a,b,!0)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=n.data(f),1===f.nodeType&&!n._data(f,"parsedAttrs"))){c=g.length;while(c--){d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d]))}n._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){n.data(this,a)}):arguments.length>1?this.each(function(){n.data(this,a,b)}):f?P(f,a,n.data(f,a)):void 0},removeData:function(a){return this.each(function(){n.removeData(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=n._data(a,b),c&&(!d||n.isArray(c)?d=n._data(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return n._data(a,c)||n._data(a,c,{empty:n.Callbacks("once memory").add(function(){n._removeData(a,b+"queue"),n._removeData(a,c)})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--){c=n._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h))}return h(),e.promise(b)}});var T=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,U=["Top","Right","Bottom","Left"],V=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},W=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c){n.access(a,b,h,c[h],!0,f,g)}}else{if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b)){for(;i>h;h++){b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)))}}}return e?a:j?b.call(a):i?b(a[0],c):f},X=/^(?:checkbox|radio)$/i;!function(){var a=z.createDocumentFragment(),b=z.createElement("div"),c=z.createElement("input");if(b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a>",l.leadingWhitespace=3===b.firstChild.nodeType,l.tbody=!b.getElementsByTagName("tbody").length,l.htmlSerialize=!!b.getElementsByTagName("link").length,l.html5Clone="<:nav></:nav>"!==z.createElement("nav").cloneNode(!0).outerHTML,c.type="checkbox",c.checked=!0,a.appendChild(c),l.appendChecked=c.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,a.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,l.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){l.noCloneEvent=!1}),b.cloneNode(!0).click()),null==l.deleteExpando){l.deleteExpando=!0;try{delete b.test}catch(d){l.deleteExpando=!1}}a=b=c=null}(),function(){var b,c,d=z.createElement("div");for(b in {submit:!0,change:!0,focusin:!0}){c="on"+b,(l[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),l[b+"Bubbles"]=d.attributes[c].expando===!1)}d=null}();var Y=/^(?:input|select|textarea)$/i,Z=/^key/,$=/^(?:mouse|contextmenu)|click/,_=/^(?:focusinfocus|focusoutblur)$/,ab=/^([^.]*)(?:\.(.+)|)$/;function bb(){return !0}function cb(){return !1}function db(){try{return z.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=n.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof n===L||a&&n.event.triggered===a.type?void 0:n.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(F)||[""],h=b.length;while(h--){f=ab.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=n.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=n.event.special[o]||{},l=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},i),(m=g[o])||(m=g[o]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),n.event.global[o]=!0)}a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n.hasData(a)&&n._data(a);if(r&&(k=r.events)){b=(b||"").match(F)||[""],j=b.length;while(j--){if(h=ab.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;while(f--){g=m[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g))}i&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete k[o])}else{for(o in k){n.event.remove(a,o+b[j],c,d,!0)}}}n.isEmptyObject(k)&&(delete r.handle,n._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,m,o=[d||z],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||z,3!==d.nodeType&&8!==d.nodeType&&!_.test(p+n.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[n.expando]?b:new n.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),k=n.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!n.isWindow(d)){for(i=k.delegateType||p,_.test(i+p)||(h=h.parentNode);h;h=h.parentNode){o.push(h),l=h}l===(d.ownerDocument||z)&&o.push(l.defaultView||l.parentWindow||a)}m=0;while((h=o[m++])&&!b.isPropagationStopped()){b.type=m>1?i:k.bindType||p,f=(n._data(h,"events")||{})[b.type]&&n._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&n.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault())}if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&n.acceptData(d)&&g&&d[p]&&!n.isWindow(d)){l=d[g],l&&(d[g]=null),n.event.triggered=p;try{d[p]()}catch(r){}n.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(n._data(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped()){(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((n.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type)){for(;i!=this;i=i.parentNode||this){if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++){d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?n(c,this).index(i)>=0:n.find(c,this,null,[i]).length),e[c]&&e.push(d)}e.length&&g.push({elem:i,handlers:e})}}}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[n.expando]){return a}var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=$.test(e)?this.mouseHooks:Z.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--){c=d[b],a[c]=f[c]}return a.target||(a.target=f.srcElement||z),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||z,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==db()&&this.focus){try{return this.focus(),!1}catch(a){}}},delegateType:"focusin"},blur:{trigger:function(){return this===db()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return n.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=z.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===L&&(a[d]=null),a.detachEvent(d,c))},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&(a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault())?bb:cb):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void (this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:cb,isPropagationStopped:cb,isImmediatePropagationStopped:cb,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=bb,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=bb,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=bb,this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),l.submitBubbles||(n.event.special.submit={setup:function(){return n.nodeName(this,"form")?!1:void n.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=n.nodeName(b,"input")||n.nodeName(b,"button")?b.form:void 0;c&&!n._data(c,"submitBubbles")&&(n.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),n._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&n.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return n.nodeName(this,"form")?!1:void n.event.remove(this,"._submit")}}),l.changeBubbles||(n.event.special.change={setup:function(){return Y.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(n.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),n.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),n.event.simulate("change",this,a,!0)})),!1):void n.event.add(this,"beforeactivate._change",function(a){var b=a.target;Y.test(b.nodeName)&&!n._data(b,"changeBubbles")&&(n.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||n.event.simulate("change",this.parentNode,a,!0)}),n._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return n.event.remove(this,"._change"),!Y.test(this.nodeName)}}),l.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=n._data(d,b);e||d.addEventListener(a,c,!0),n._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=n._data(d,b)-1;e?n._data(d,b,e):(d.removeEventListener(a,c,!0),n._removeData(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a){this.on(f,b,c,a[f],e)}return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1){d=cb}else{if(!d){return this}}return 1===e&&(g=d,d=function(a){return n().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj){return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this}if("object"==typeof a){for(e in a){this.off(e,b,a[e])}return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=cb),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});function eb(a){var b=fb.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop())}}return c}var fb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gb=/ jQuery\d+="(?:null|\d+)"/g,hb=new RegExp("<(?:"+fb+")[\\s/>]","i"),ib=/^\s+/,jb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,kb=/<([\w:]+)/,lb=/<tbody/i,mb=/<|&#?\w+;/,nb=/<(?:script|style|link)/i,ob=/checked\s*(?:[^=]|=\s*.checked.)/i,pb=/^$|\/(?:java|ecma)script/i,qb=/^true\/(.*)/,rb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,sb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},tb=eb(z),ub=tb.appendChild(z.createElement("div"));sb.optgroup=sb.option,sb.tbody=sb.tfoot=sb.colgroup=sb.caption=sb.thead,sb.th=sb.td;function vb(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==L?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==L?a.querySelectorAll(b||"*"):void 0;if(!f){for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++){!b||n.nodeName(d,b)?f.push(d):n.merge(f,vb(d,b))}}return void 0===b||b&&n.nodeName(a,b)?n.merge([a],f):f}function wb(a){X.test(a.type)&&(a.defaultChecked=a.checked)}function xb(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function yb(a){return a.type=(null!==n.find.attr(a,"type"))+"/"+a.type,a}function zb(a){var b=qb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ab(a,b){for(var c,d=0;null!=(c=a[d]);d++){n._data(c,"globalEval",!b||n._data(b[d],"globalEval"))}}function Bb(a,b){if(1===b.nodeType&&n.hasData(a)){var c,d,e,f=n._data(a),g=n._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h){for(d=0,e=h[c].length;e>d;d++){n.event.add(b,c,h[c][d])}}}g.data&&(g.data=n.extend({},g.data))}}function Cb(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!l.noCloneEvent&&b[n.expando]){e=n._data(b);for(d in e.events){n.removeEvent(b,d,e.handle)}b.removeAttribute(n.expando)}"script"===c&&b.text!==a.text?(yb(b).text=a.text,zb(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),l.html5Clone&&a.innerHTML&&!n.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&X.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}n.extend({clone:function(a,b,c){var d,e,f,g,h,i=n.contains(a.ownerDocument,a);if(l.html5Clone||n.isXMLDoc(a)||!hb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ub.innerHTML=a.outerHTML,ub.removeChild(f=ub.firstChild)),!(l.noCloneEvent&&l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a))){for(d=vb(f),h=vb(a),g=0;null!=(e=h[g]);++g){d[g]&&Cb(e,d[g])}}if(b){if(c){for(h=h||vb(a),d=d||vb(f),g=0;null!=(e=h[g]);g++){Bb(e,d[g])}}else{Bb(a,f)}}return d=vb(f,"script"),d.length>0&&Ab(d,!i&&vb(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,m=a.length,o=eb(b),p=[],q=0;m>q;q++){if(f=a[q],f||0===f){if("object"===n.type(f)){n.merge(p,f.nodeType?[f]:f)}else{if(mb.test(f)){h=h||o.appendChild(b.createElement("div")),i=(kb.exec(f)||["",""])[1].toLowerCase(),k=sb[i]||sb._default,h.innerHTML=k[1]+f.replace(jb,"<$1></$2>")+k[2],e=k[0];while(e--){h=h.lastChild}if(!l.leadingWhitespace&&ib.test(f)&&p.push(b.createTextNode(ib.exec(f)[0])),!l.tbody){f="table"!==i||lb.test(f)?"<table>"!==k[1]||lb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--){n.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}}n.merge(p,h.childNodes),h.textContent="";while(h.firstChild){h.removeChild(h.firstChild)}h=o.lastChild}else{p.push(b.createTextNode(f))}}}}h&&o.removeChild(h),l.appendChecked||n.grep(vb(p,"input"),wb),q=0;while(f=p[q++]){if((!d||-1===n.inArray(f,d))&&(g=n.contains(f.ownerDocument,f),h=vb(o.appendChild(f),"script"),g&&Ab(h),c)){e=0;while(f=h[e++]){pb.test(f.type||"")&&c.push(f)}}}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=n.expando,j=n.cache,k=l.deleteExpando,m=n.event.special;null!=(d=a[h]);h++){if((b||n.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events){for(e in g.events){m[e]?n.event.remove(d,e):n.removeEvent(d,e,g.handle)}}j[f]&&(delete j[f],k?delete d[i]:typeof d.removeAttribute!==L?d.removeAttribute(i):d[i]=null,c.push(f))}}}}),n.fn.extend({text:function(a){return W(this,function(a){return void 0===a?n.text(this):this.empty().append((this[0]&&this[0].ownerDocument||z).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=xb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=xb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++){b||1!==c.nodeType||n.cleanData(vb(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&Ab(vb(c,"script")),c.parentNode.removeChild(c))}return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&n.cleanData(vb(a,!1));while(a.firstChild){a.removeChild(a.firstChild)}a.options&&n.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return W(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a){return 1===b.nodeType?b.innerHTML.replace(gb,""):void 0}if(!("string"!=typeof a||nb.test(a)||!l.htmlSerialize&&hb.test(a)||!l.leadingWhitespace&&ib.test(a)||sb[(kb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(jb,"<$1></$2>");try{for(;d>c;c++){b=this[c]||{},1===b.nodeType&&(n.cleanData(vb(b,!1)),b.innerHTML=a)}b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(vb(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,k=this.length,m=this,o=k-1,p=a[0],q=n.isFunction(p);if(q||k>1&&"string"==typeof p&&!l.checkClone&&ob.test(p)){return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)})}if(k&&(i=n.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=n.map(vb(i,"script"),yb),f=g.length;k>j;j++){d=i,j!==o&&(d=n.clone(d,!0,!0),f&&n.merge(g,vb(d,"script"))),b.call(this[j],d,j)}if(f){for(h=g[g.length-1].ownerDocument,n.map(g,zb),j=0;f>j;j++){d=g[j],pb.test(d.type||"")&&!n._data(d,"globalEval")&&n.contains(h,d)&&(d.src?n._evalUrl&&n._evalUrl(d.src):n.globalEval((d.text||d.textContent||d.innerHTML||"").replace(rb,"")))}}i=c=null}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=0,e=[],g=n(a),h=g.length-1;h>=d;d++){c=d===h?this:this.clone(!0),n(g[d])[b](c),f.apply(e,c.get())}return this.pushStack(e)}});var Db,Eb={};function Fb(b,c){var d=n(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle?a.getDefaultComputedStyle(d[0]).display:n.css(d[0],"display");return d.detach(),e}function Gb(a){var b=z,c=Eb[a];return c||(c=Fb(a,b),"none"!==c&&c||(Db=(Db||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Db[0].contentWindow||Db[0].contentDocument).document,b.write(),b.close(),c=Fb(a,b),Db.detach()),Eb[a]=c),c}!function(){var a,b,c=z.createElement("div"),d="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=c.getElementsByTagName("a")[0],a.style.cssText="float:left;opacity:.5",l.opacity=/^0.5/.test(a.style.opacity),l.cssFloat=!!a.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===c.style.backgroundClip,a=c=null,l.shrinkWrapBlocks=function(){var a,c,e,f;if(null==b){if(a=z.getElementsByTagName("body")[0],!a){return}f="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",c=z.createElement("div"),e=z.createElement("div"),a.appendChild(c).appendChild(e),b=!1,typeof e.style.zoom!==L&&(e.style.cssText=d+";width:1px;padding:1px;zoom:1",e.innerHTML="<div></div>",e.firstChild.style.width="5px",b=3!==e.offsetWidth),a.removeChild(c),a=c=e=null}return b}}();var Hb=/^margin/,Ib=new RegExp("^("+T+")(?!px)[a-z%]+$","i"),Jb,Kb,Lb=/^(top|right|bottom|left)$/;a.getComputedStyle?(Jb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},Kb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Jb(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),Ib.test(g)&&Hb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):z.documentElement.currentStyle&&(Jb=function(a){return a.currentStyle},Kb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Jb(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Ib.test(g)&&!Lb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Mb(a,b){return{get:function(){var c=a();if(null!=c){return c?void delete this.get:(this.get=b).apply(this,arguments)}}}}!function(){var b,c,d,e,f,g,h=z.createElement("div"),i="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",j="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",b=h.getElementsByTagName("a")[0],b.style.cssText="float:left;opacity:.5",l.opacity=/^0.5/.test(b.style.opacity),l.cssFloat=!!b.style.cssFloat,h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===h.style.backgroundClip,b=h=null,n.extend(l,{reliableHiddenOffsets:function(){if(null!=c){return c}var a,b,d,e=z.createElement("div"),f=z.getElementsByTagName("body")[0];if(f){return e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=z.createElement("div"),a.style.cssText=i,f.appendChild(a).appendChild(e),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",b=e.getElementsByTagName("td"),b[0].style.cssText="padding:0;margin:0;border:0;display:none",d=0===b[0].offsetHeight,b[0].style.display="",b[1].style.display="none",c=d&&0===b[0].offsetHeight,f.removeChild(a),e=f=null,c}},boxSizing:function(){return null==d&&k(),d},boxSizingReliable:function(){return null==e&&k(),e},pixelPosition:function(){return null==f&&k(),f},reliableMarginRight:function(){var b,c,d,e;if(null==g&&a.getComputedStyle){if(b=z.getElementsByTagName("body")[0],!b){return}c=z.createElement("div"),d=z.createElement("div"),c.style.cssText=i,b.appendChild(c).appendChild(d),e=d.appendChild(z.createElement("div")),e.style.cssText=d.style.cssText=j,e.style.marginRight=e.style.width="0",d.style.width="1px",g=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight),b.removeChild(c)}return g}});function k(){var b,c,h=z.getElementsByTagName("body")[0];h&&(b=z.createElement("div"),c=z.createElement("div"),b.style.cssText=i,h.appendChild(b).appendChild(c),c.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",n.swap(h,null!=h.style.zoom?{zoom:1}:{},function(){d=4===c.offsetWidth}),e=!0,f=!1,g=!0,a.getComputedStyle&&(f="1%"!==(a.getComputedStyle(c,null)||{}).top,e="4px"===(a.getComputedStyle(c,null)||{width:"4px"}).width),h.removeChild(b),c=h=null)}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b){g[f]=a.style[f],a.style[f]=b[f]}e=c.apply(a,d||[]);for(f in b){a.style[f]=g[f]}return e};var Nb=/alpha\([^)]*\)/i,Ob=/opacity\s*=\s*([^)]*)/,Pb=/^(none|table(?!-c[ea]).+)/,Qb=new RegExp("^("+T+")(.*)$","i"),Rb=new RegExp("^([+-])=("+T+")","i"),Sb={position:"absolute",visibility:"hidden",display:"block"},Tb={letterSpacing:0,fontWeight:400},Ub=["Webkit","O","Moz","ms"];function Vb(a,b){if(b in a){return b}var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Ub.length;while(e--){if(b=Ub[e]+c,b in a){return b}}return d}function Wb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++){d=a[g],d.style&&(f[g]=n._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&V(d)&&(f[g]=n._data(d,"olddisplay",Gb(d.nodeName)))):f[g]||(e=V(d),(c&&"none"!==c||!e)&&n._data(d,"olddisplay",e?c:n.css(d,"display"))))}for(g=0;h>g;g++){d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"))}return a}function Xb(a,b,c){var d=Qb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Yb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2){"margin"===c&&(g+=n.css(a,c+U[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+U[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+U[f]+"Width",!0,e))):(g+=n.css(a,"padding"+U[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+U[f]+"Width",!0,e)))}return g}function Zb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Jb(a),g=l.boxSizing()&&"border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Kb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ib.test(e)){return e}d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Yb(a,b,c||(g?"border":"content"),d,f)+"px"}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Kb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":l.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;if(b=n.cssProps[h]||(n.cssProps[h]=Vb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c){return g&&"get" in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]}if(f=typeof c,"string"===f&&(e=Rb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set" in g&&void 0===(c=g.set(a,c,d))))){try{i[b]="",i[b]=c}catch(j){}}}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Vb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get" in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Kb(a,b,d)),"normal"===f&&b in Tb&&(f=Tb[b]),""===c||c?(e=parseFloat(f),c===!0||n.isNumeric(e)?e||0:f):f}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&Pb.test(n.css(a,"display"))?n.swap(a,Sb,function(){return Zb(a,b,d)}):Zb(a,b,d):void 0},set:function(a,c,d){var e=d&&Jb(a);return Xb(a,c,d?Yb(a,b,d,l.boxSizing()&&"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),l.opacity||(n.cssHooks.opacity={get:function(a,b){return Ob.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=n.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===n.trim(f.replace(Nb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Nb.test(f)?f.replace(Nb,e):f+" "+e)}}),n.cssHooks.marginRight=Mb(l.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},Kb,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++){e[a+U[d]+b]=f[d]||f[d-2]||f[0]}return e}},Hb.test(a)||(n.cssHooks[a+b].set=Xb)}),n.fn.extend({css:function(a,b){return W(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Jb(a),e=b.length;e>g;g++){f[b[g]]=n.css(a,b[g],!1,d)}return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Wb(this,!0)},hide:function(){return Wb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){V(this)?n(this).show():n(this).hide()})}});function $b(a,b,c,d,e){return new $b.prototype.init(a,b,c,d,e)}n.Tween=$b,$b.prototype={constructor:$b,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=$b.propHooks[this.prop];return a&&a.get?a.get(this):$b.propHooks._default.get(this)},run:function(a){var b,c=$b.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):$b.propHooks._default.set(this),this}},$b.prototype.init.prototype=$b.prototype,$b.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},$b.propHooks.scrollTop=$b.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}},n.fx=$b.prototype.init,n.fx.step={};var _b,ac,bc=/^(?:toggle|show|hide)$/,cc=new RegExp("^(?:([+-])=|)("+T+")([a-z%]*)$","i"),dc=/queueHooks$/,ec=[jc],fc={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=cc.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&cc.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do{h=h||".5",g/=h,n.style(c.elem,a,g+f)}while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function gc(){return setTimeout(function(){_b=void 0}),_b=n.now()}function hc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b){c=U[e],d["margin"+c]=d["padding"+c]=a}return b&&(d.opacity=d.width=a),d}function ic(a,b,c){for(var d,e=(fc[b]||[]).concat(fc["*"]),f=0,g=e.length;g>f;f++){if(d=e[f].call(c,b,a)){return d}}}function jc(a,b,c){var d,e,f,g,h,i,j,k,m=this,o={},p=a.style,q=a.nodeType&&V(a),r=n._data(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height" in b||"width" in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=n.css(a,"display"),k=Gb(a.nodeName),"none"===j&&(j=k),"inline"===j&&"none"===n.css(a,"float")&&(l.inlineBlockNeedsLayout&&"inline"!==k?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",l.shrinkWrapBlocks()||m.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b){if(e=b[d],bc.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d]){continue}q=!0}o[d]=r&&r[d]||n.style(a,d)}}if(!n.isEmptyObject(o)){r?"hidden" in r&&(q=r.hidden):r=n._data(a,"fxshow",{}),f&&(r.hidden=!q),q?n(a).show():m.done(function(){n(a).hide()}),m.done(function(){var b;n._removeData(a,"fxshow");for(b in o){n.style(a,b,o[b])}});for(d in o){g=ic(q?r[d]:0,d,m),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}}function kc(a,b){var c,d,e,f,g;for(c in a){if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand" in g){f=g.expand(f),delete a[d];for(c in f){c in a||(a[c]=f[c],b[c]=e)}}else{b[d]=e}}}function lc(a,b,c){var d,e,f=0,g=ec.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e){return !1}for(var b=_b||gc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++){j.tweens[g].run(f)}return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:_b||gc(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e){return this}for(e=!0;d>c;c++){j.tweens[c].run(1)}return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(kc(k,j.opts.specialEasing);g>f;f++){if(d=ec[f].call(j,a,k,j.opts)){return d}}return n.map(k,ic,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(lc,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++){c=a[d],fc[c]=fc[c]||[],fc[c].unshift(b)}},prefilter:function(a,b){b?ec.unshift(a):ec.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(V).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=lc(this,n.extend({},a),f);(e||n._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=n._data(this);if(e){g[e]&&g[e].stop&&d(g[e])}else{for(e in g){g[e]&&g[e].stop&&dc.test(e)&&d(g[e])}}for(e=f.length;e--;){f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1))}(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=n._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;){f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1))}for(b=0;g>b;b++){d[b]&&d[b].finish&&d[b].finish.call(this)}delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(hc(b,!0),a,d,e)}}),n.each({slideDown:hc("show"),slideUp:hc("hide"),slideToggle:hc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=n.timers,c=0;for(_b=n.now();c<b.length;c++){a=b[c],a()||b[c]!==a||b.splice(c--,1)}b.length||n.fx.stop(),_b=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){ac||(ac=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(ac),ac=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e=z.createElement("div");e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=e.getElementsByTagName("a")[0],c=z.createElement("select"),d=c.appendChild(z.createElement("option")),b=e.getElementsByTagName("input")[0],a.style.cssText="top:1px",l.getSetAttribute="t"!==e.className,l.style=/top/.test(a.getAttribute("style")),l.hrefNormalized="/a"===a.getAttribute("href"),l.checkOn=!!b.value,l.optSelected=d.selected,l.enctype=!!z.createElement("form").enctype,c.disabled=!0,l.optDisabled=!d.disabled,b=z.createElement("input"),b.setAttribute("value",""),l.input=""===b.getAttribute("value"),b.value="t",b.setAttribute("type","radio"),l.radioValue="t"===b.value,a=b=c=d=e=null}();var mc=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];if(arguments.length){return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set" in b&&void 0!==b.set(this,e,"value")||(this.value=e))})}if(e){return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get" in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(mc,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.text(a)}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++){if(c=d[i],!(!c.selected&&i!==e||(l.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f){return b}g.push(b)}}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--){if(d=e[g],n.inArray(n.valHooks.option.get(d),f)>=0){try{d.selected=c=!0}catch(h){d.scrollHeight}}else{d.selected=!1}}return c||(a.selectedIndex=-1),e}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var nc,oc,pc=n.expr.attrHandle,qc=/^(?:checked|selected)$/i,rc=l.getSetAttribute,sc=l.input;n.fn.extend({attr:function(a,b){return W(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f){return typeof a.getAttribute===L?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?oc:nc)),void 0===c?d&&"get" in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set" in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(F);if(f&&1===a.nodeType){while(c=f[e++]){d=n.propFix[c]||c,n.expr.match.bool.test(c)?sc&&rc||!qc.test(c)?a[d]=!1:a[n.camelCase("default-"+c)]=a[d]=!1:n.attr(a,c,""),a.removeAttribute(rc?c:d)}}},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),oc={set:function(a,b,c){return b===!1?n.removeAttr(a,c):sc&&rc||!qc.test(c)?a.setAttribute(!rc&&n.propFix[c]||c,c):a[n.camelCase("default-"+c)]=a[c]=!0,c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=pc[b]||n.find.attr;pc[b]=sc&&rc||!qc.test(b)?function(a,b,d){var e,f;return d||(f=pc[b],pc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,pc[b]=f),e}:function(a,b,c){return c?void 0:a[n.camelCase("default-"+b)]?b.toLowerCase():null}}),sc&&rc||(n.attrHooks.value={set:function(a,b,c){return n.nodeName(a,"input")?void (a.defaultValue=b):nc&&nc.set(a,b,c)}}),rc||(nc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},pc.id=pc.name=pc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},n.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:nc.set},n.attrHooks.contenteditable={set:function(a,b,c){nc.set(a,""===b?!1:b,c)}},n.each(["width","height"],function(a,b){n.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),l.style||(n.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var tc=/^(?:input|select|textarea|button|object)$/i,uc=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return W(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return a=n.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set" in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get" in e&&null!==(d=e.get(a,b))?d:a[b]}},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):tc.test(a.nodeName)||uc.test(a.nodeName)&&a.href?0:-1}}}}),l.hrefNormalized||n.each(["href","src"],function(a,b){n.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this}),l.enctype||(n.propFix.enctype="encoding");var vc=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(n.isFunction(a)){return this.each(function(b){n(this).addClass(a.call(this,b,this.className))})}if(j){for(b=(a||"").match(F)||[];i>h;h++){if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(vc," "):" ")){f=0;while(e=b[f++]){d.indexOf(" "+e+" ")<0&&(d+=e+" ")}g=n.trim(d),c.className!==g&&(c.className=g)}}}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(n.isFunction(a)){return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))})}if(j){for(b=(a||"").match(F)||[];i>h;h++){if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(vc," "):"")){f=0;while(e=b[f++]){while(d.indexOf(" "+e+" ")>=0){d=d.replace(" "+e+" "," ")}}g=a?n.trim(d):"",c.className!==g&&(c.className=g)}}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(F)||[];while(b=f[d++]){e.hasClass(b)?e.removeClass(b):e.addClass(b)}}else{(c===L||"boolean"===c)&&(this.className&&n._data(this,"__className__",this.className),this.className=this.className||a===!1?"":n._data(this,"__className__")||"")}})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++){if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(vc," ").indexOf(b)>=0){return !0}}return !1}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var wc=n.now(),xc=/\?/,yc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;n.parseJSON=function(b){if(a.JSON&&a.JSON.parse){return a.JSON.parse(b+"")}var c,d=null,e=n.trim(b+"");return e&&!n.trim(e.replace(yc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():n.error("Invalid JSON: "+b)},n.parseXML=function(b){var c,d;if(!b||"string"!=typeof b){return null}try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var zc,Ac,Bc=/#.*$/,Cc=/([?&])_=[^&]*/,Dc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ec=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Fc=/^(?:GET|HEAD)$/,Gc=/^\/\//,Hc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ic={},Jc={},Kc="*/".concat("*");try{Ac=location.href}catch(Lc){Ac=z.createElement("a"),Ac.href="",Ac=Ac.href}zc=Hc.exec(Ac.toLowerCase())||[];function Mc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(F)||[];if(n.isFunction(c)){while(d=f[e++]){"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}}}function Nc(a,b,c,d){var e={},f=a===Jc;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Oc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(d in b){void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d])}return c&&n.extend(!0,a,c),a}function Pc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0]){i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"))}if(e){for(g in h){if(h[g]&&h[g].test(e)){i.unshift(g);break}}}if(i[0] in c){f=i[0]}else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Qc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1]){for(g in a.converters){j[g.toLowerCase()]=a.converters[g]}}f=k.shift();while(f){if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift()){if("*"===f){f=i}else{if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g){for(e in j){if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}}}if(g!==!0){if(g&&a["throws"]){b=g(b)}else{try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}}}}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ac,type:"GET",isLocal:Ec.test(zc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Oc(Oc(a,n.ajaxSettings),b):Oc(n.ajaxSettings,a)},ajaxPrefilter:Mc(Ic),ajaxTransport:Mc(Jc),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Dc.exec(f)){j[b[1].toLowerCase()]=b[2]}}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a){if(2>t){for(b in a){q[b]=[q[b],a[b]]}}else{v.always(a[v.status])}}return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||Ac)+"").replace(Bc,"").replace(Gc,zc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(F)||[""],null==k.crossDomain&&(c=Hc.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===zc[1]&&c[2]===zc[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(zc[3]||("http:"===zc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),Nc(Ic,k,b,v),2===t){return v}h=k.global,h&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Fc.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(xc.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Cc.test(e)?e.replace(Cc,"$1_="+wc++):e+(xc.test(e)?"&":"?")+"_="+wc++)),k.ifModified&&(n.lastModified[e]&&v.setRequestHeader("If-Modified-Since",n.lastModified[e]),n.etag[e]&&v.setRequestHeader("If-None-Match",n.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Kc+"; q=0.01":""):k.accepts["*"]);for(d in k.headers){v.setRequestHeader(d,k.headers[d])}if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t)){return v.abort()}u="abort";for(d in {success:1,error:1,complete:1}){v[d](k[d])}if(i=Nc(Jc,k,b,v)){v.readyState=1,h&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t)){throw w}x(-1,w)}}else{x(-1,"No Transport")}function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Pc(k,v,c)),u=Qc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(n.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){if(n.isFunction(a)){return this.each(function(b){n(this).wrapAll(a.call(this,b))})}if(this[0]){var b=n(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType){a=a.firstChild}return a}).append(this)}return this},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!l.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||n.css(a,"display"))},n.expr.filters.visible=function(a){return !n.expr.filters.hidden(a)};var Rc=/%20/g,Sc=/\[\]$/,Tc=/\r?\n/g,Uc=/^(?:submit|button|image|reset|file)$/i,Vc=/^(?:input|select|textarea|keygen)/i;function Wc(a,b,c,d){var e;if(n.isArray(b)){n.each(b,function(b,e){c||Sc.test(a)?d(a,e):Wc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)})}else{if(c||"object"!==n.type(b)){d(a,b)}else{for(e in b){Wc(a+"["+e+"]",b[e],c,d)}}}}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a)){n.each(a,function(){e(this.name,this.value)})}else{for(c in a){Wc(c,a[c],b,e)}}return d.join("&").replace(Rc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Vc.test(this.nodeName)&&!Uc.test(a)&&(this.checked||!X.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(Tc,"\r\n")}}):{name:b.name,value:c.replace(Tc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return !this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&$c()||_c()}:$c;var Xc=0,Yc={},Zc=n.ajaxSettings.xhr();a.ActiveXObject&&n(a).on("unload",function(){for(var a in Yc){Yc[a](void 0,!0)}}),l.cors=!!Zc&&"withCredentials" in Zc,Zc=l.ajax=!!Zc,Zc&&n.ajaxTransport(function(a){if(!a.crossDomain||l.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Xc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields){for(e in a.xhrFields){f[e]=a.xhrFields[e]}}a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c){void 0!==c[e]&&f.setRequestHeader(e,c[e]+"")}f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState)){if(delete Yc[g],b=void 0,f.onreadystatechange=n.noop,e){4!==f.readyState&&f.abort()}else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Yc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function $c(){try{return new a.XMLHttpRequest}catch(b){}}function _c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=z.head||n("head")[0]||z.documentElement;return{send:function(d,e){b=z.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var ad=[],bd=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ad.pop()||n.expando+"_"+wc++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(bd.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&bd.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(bd,"$1"+e):b.jsonp!==!1&&(b.url+=(xc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,ad.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a){return null}"boolean"==typeof b&&(c=b,b=!1),b=b||z;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var cd=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&cd){return cd.apply(this,arguments)}var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=a.slice(h,a.length),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&n.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var dd=a.document.documentElement;function ed(a){return n.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&n.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using" in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length){return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)})}var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f){return b=f.documentElement,n.contains(b,e)?(typeof e.getBoundingClientRect!==L&&(d=e.getBoundingClientRect()),c=ed(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d}},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===n.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(c=a.offset()),c.top+=n.css(a[0],"borderTopWidth",!0),c.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-n.css(d,"marginTop",!0),left:b.left-c.left-n.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||dd;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position")){a=a.offsetParent}return a||dd})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);n.fn[a]=function(d){return W(this,function(a,d,e){var f=ed(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void (f?f.scrollTo(c?n(f).scrollLeft():e,c?e:n(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Mb(l.pixelPosition,function(a,c){return c?(c=Kb(a,b),Ib.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return W(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var fd=a.jQuery,gd=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=gd),b&&a.jQuery===n&&(a.jQuery=fd),n},typeof b===L&&(a.jQuery=a.$=n),n});var $wn=jQuery;
/*!
 * jQuery Migrate - v1.2.1 - 2013-05-08
 * https://github.com/jquery/jquery-migrate
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors; Licensed MIT
 */
(function(w,t,m){var H={};w.migrateWarnings=[];if(!w.migrateMute&&t.console&&t.console.log){t.console.log("JQMIGRATE: Logging is active")}if(w.migrateTrace===m){w.migrateTrace=true}w.migrateReset=function(){H={};w.migrateWarnings.length=0};function k(M){var K=t.console;if(!H[M]){H[M]=true;w.migrateWarnings.push(M);if(K&&K.warn&&!w.migrateMute){K.warn("JQMIGRATE: "+M);if(w.migrateTrace&&K.trace){K.trace()}}}}function a(N,P,M,O){if(Object.defineProperty){try{Object.defineProperty(N,P,{configurable:true,enumerable:true,get:function(){k(O);return M},set:function(Q){k(O);M=Q}});return}catch(K){}}w._definePropertyBroken=true;N[P]=M}if(document.compatMode==="BackCompat"){k("jQuery is not compatible with Quirks Mode")}var g=w("<input/>",{size:1}).attr("size")&&w.attrFn,B=w.attr,A=w.attrHooks.value&&w.attrHooks.value.get||function(){return null},n=w.attrHooks.value&&w.attrHooks.value.set||function(){return m},x=/^(?:input|button)$/i,C=/^[238]$/,F=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,o=/^(?:checked|selected)$/i;a(w,"attrFn",g||{},"jQuery.attrFn is deprecated");w.attr=function(P,N,Q,O){var M=N.toLowerCase(),K=P&&P.nodeType;if(O){if(B.length<4){k("jQuery.fn.attr( props, pass ) is deprecated")}if(P&&!C.test(K)&&(g?N in g:w.isFunction(w.fn[N]))){return w(P)[N](Q)}}if(N==="type"&&Q!==m&&x.test(P.nodeName)&&P.parentNode){k("Can't change the 'type' of an input or button in IE 6/7/8")}if(!w.attrHooks[M]&&F.test(M)){w.attrHooks[M]={get:function(S,R){var U,T=w.prop(S,R);return T===true||typeof T!=="boolean"&&(U=S.getAttributeNode(R))&&U.nodeValue!==false?R.toLowerCase():m},set:function(S,U,R){var T;if(U===false){w.removeAttr(S,R)}else{T=w.propFix[R]||R;if(T in S){S[T]=true}S.setAttribute(R,R.toLowerCase())}return R}};if(o.test(M)){k("jQuery.fn.attr('"+M+"') may use property instead of attribute")}}return B.call(w,P,N,Q)};w.attrHooks.value={get:function(M,K){var N=(M.nodeName||"").toLowerCase();if(N==="button"){return A.apply(this,arguments)}if(N!=="input"&&N!=="option"){k("jQuery.fn.attr('value') no longer gets properties")}return K in M?M.value:null},set:function(K,M){var N=(K.nodeName||"").toLowerCase();if(N==="button"){return n.apply(this,arguments)}if(N!=="input"&&N!=="option"){k("jQuery.fn.attr('value', val) no longer sets properties")}K.value=M}};var u,I,D=w.fn.init,E=w.parseJSON,z=/^([^<]*)(<[\w\W]+>)([^>]*)$/;w.fn.init=function(K,O,N){var M;if(K&&typeof K==="string"&&!w.isPlainObject(O)&&(M=z.exec(w.trim(K)))&&M[0]){if(K.charAt(0)!=="<"){k("$(html) HTML strings must start with '<' character")}if(M[3]){k("$(html) HTML text after last tag is ignored")}if(M[0].charAt(0)==="#"){k("HTML string cannot start with a '#' character");w.error("JQMIGRATE: Invalid selector string (XSS)")}if(O&&O.context){O=O.context}if(w.parseHTML){return D.call(this,w.parseHTML(M[2],O,true),O,N)}}return D.apply(this,arguments)};w.fn.init.prototype=w.fn;w.parseJSON=function(K){if(!K&&K!==null){k("jQuery.parseJSON requires a valid JSON string");return null}return E.apply(this,arguments)};w.uaMatch=function(M){M=M.toLowerCase();var K=/(chrome)[ \/]([\w.]+)/.exec(M)||/(webkit)[ \/]([\w.]+)/.exec(M)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(M)||/(msie) ([\w.]+)/.exec(M)||M.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(M)||[];return{browser:K[1]||"",version:K[2]||"0"}};if(!w.browser){u=w.uaMatch(navigator.userAgent);I={};if(u.browser){I[u.browser]=true;I.version=u.version}if(I.chrome){I.webkit=true}else{if(I.webkit){I.safari=true}}w.browser=I}a(w,"browser",w.browser,"jQuery.browser is deprecated");w.sub=function(){function K(O,P){return new K.fn.init(O,P)}w.extend(true,K,this);K.superclass=this;K.fn=K.prototype=this();K.fn.constructor=K;K.sub=this.sub;K.fn.init=function N(O,P){if(P&&P instanceof w&&!(P instanceof K)){P=K(P)}return w.fn.init.call(this,O,P,M)};K.fn.init.prototype=K.fn;var M=K(document);k("jQuery.sub() is deprecated");return K};w.ajaxSetup({converters:{"text json":w.parseJSON}});var r=w.fn.data;w.fn.data=function(N){var M,K,O=this[0];if(O&&N==="events"&&arguments.length===1){M=w.data(O,N);K=w._data(O,N);if((M===m||M===K)&&K!==m){k("Use of jQuery.fn.data('events') is deprecated");return K}}return r.apply(this,arguments)};var s=/\/(java|ecma)script/i,y=w.fn.andSelf||w.fn.addBack;w.fn.andSelf=function(){k("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()");return y.apply(this,arguments)};if(!w.clean){w.clean=function(K,M,S,O){M=M||document;M=!M.nodeType&&M[0]||M;M=M.ownerDocument||M;k("jQuery.clean() is deprecated");var P,N,Q,T,R=[];w.merge(R,w.buildFragment(K,M).childNodes);if(S){Q=function(U){if(!U.type||s.test(U.type)){return O?O.push(U.parentNode?U.parentNode.removeChild(U):U):S.appendChild(U)}};for(P=0;(N=R[P])!=null;P++){if(!(w.nodeName(N,"script")&&Q(N))){S.appendChild(N);if(typeof N.getElementsByTagName!=="undefined"){T=w.grep(w.merge([],N.getElementsByTagName("script")),Q);R.splice.apply(R,[P+1,0].concat(T));P+=T.length}}}}return R}}var c=w.event.add,b=w.event.remove,h=w.event.trigger,v=w.fn.toggle,d=w.fn.live,q=w.fn.die,G="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",f=new RegExp("\\b(?:"+G+")\\b"),J=/(?:^|\s)hover(\.\S+|)\b/,p=function(K){if(typeof(K)!=="string"||w.event.special.hover){return K}if(J.test(K)){k("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'")}return K&&K.replace(J,"mouseenter$1 mouseleave$1")};if(w.event.props&&w.event.props[0]!=="attrChange"){w.event.props.unshift("attrChange","attrName","relatedNode","srcElement")}if(w.event.dispatch){a(w.event,"handle",w.event.dispatch,"jQuery.event.handle is undocumented and deprecated")}w.event.add=function(O,M,N,P,K){if(O!==document&&f.test(M)){k("AJAX events should be attached to document: "+M)}c.call(this,O,p(M||""),N,P,K)};w.event.remove=function(P,N,O,K,M){b.call(this,P,p(N)||"",O,K,M)};w.fn.error=function(){var K=Array.prototype.slice.call(arguments,0);k("jQuery.fn.error() is deprecated");K.splice(0,0,"error");if(arguments.length){return this.bind.apply(this,K)}this.triggerHandler.apply(this,K);return this};w.fn.toggle=function(P,N){if(!w.isFunction(P)||!w.isFunction(N)){return v.apply(this,arguments)}k("jQuery.fn.toggle(handler, handler...) is deprecated");var M=arguments,K=P.guid||w.guid++,O=0,Q=function(R){var S=(w._data(this,"lastToggle"+P.guid)||0)%O;w._data(this,"lastToggle"+P.guid,S+1);R.preventDefault();return M[S].apply(this,arguments)||false};Q.guid=K;while(O<M.length){M[O++].guid=K}return this.click(Q)};w.fn.live=function(K,N,M){k("jQuery.fn.live() is deprecated");if(d){return d.apply(this,arguments)}w(this.context).on(K,this.selector,N,M);return this};w.fn.die=function(K,M){k("jQuery.fn.die() is deprecated");if(q){return q.apply(this,arguments)}w(this.context).off(K,this.selector||"**",M);return this};w.event.trigger=function(N,O,M,K){if(!M&&!f.test(N)){k("Global events are undocumented and deprecated")}return h.call(this,N,O,M||document,K)};w.each(G.split("|"),function(M,K){w.event.special[K]={setup:function(){var N=this;if(N!==document){w.event.add(document,K+"."+w.guid,function(){w.event.trigger(K,null,N,true)});w._data(this,K,w.guid++)}return false},teardown:function(){if(this!==document){w.event.remove(document,K+"."+w._data(this,K))}return false}}})})(jQuery,window);(function(f){var d={regex:function(){var t,p,o,n,h,g,q=arguments;for(p=0;p<q.length;p+=2){var s=q[p],r=q[p+1];if(typeof t==="undefined"){t={};for(n=0;n<r.length;n++){if(typeof r[n]==="object"){t[r[n][0]]=f}else{t[r[n]]=f}}if(this.getUA().toString()===""){return t}}for(o=0;o<s.length;o++){h=s[o].exec(this.getUA());if(!!h){for(n=0;n<r.length;n++){g=h[n+1];if(typeof r[n]==="object"&&r[n].length===2){t[r[n][0]]=r[n][1]}else{if(typeof r[n]==="object"&&r[n].length===3){if(typeof r[n][1]==="function"&&!(r[n][1].exec&&r[n][1].test)){t[r[n][0]]=g?r[n][1].call(this,g,r[n][2]):f}else{t[r[n][0]]=g?g.replace(r[n][1],r[n][2]):f}}else{t[r[n]]=g?g:f}}}break}}if(!!h){break}}return t},string:function(m,k){for(var h in k){if(k.hasOwnProperty(h)){if(typeof k[h]==="object"&&k[h].length>0){for(var g=0;g<k[h].length;g++){if(m.toLowerCase().indexOf(k[h][g].toLowerCase())!==-1){return h}}}else{if(m.toLowerCase().indexOf(k[h].toLowerCase())!==-1){return h}}}}return m}};var c={os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0","2000":"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0","7":"NT 6.1","8":"NT 6.2"}}}};var a={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\smobi)\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i,/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)/i,/(avant\sbrowser|iemobile|slimbrowser)[\/\s]?((\d+)?[\w\.]*)/i,/ms(ie)\s((\d+)?[\w\.]+)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|series60|bolt)\/((\d+)?[\w\.]+)/i,/(chrome|omniweb|arora|dolfin|[tizenoka]{5}\s?browser)\/((\d+)?[\w\.]+)/i,],["name","version","major"],[/(?:android.+(crmo|crios))\/((\d+)?[\w\.]+)/i,],[["name","Chrome"],"version","major"],[/(mobile\ssafari|safari|konqueror)\/((\d+)?[\w\.]+)/i,/(applewebkit|khtml)\/((\d+)?[\w\.]+)/i,/(iceweasel|camino|fennec|maemo\sbrowser|minimo)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|netscape|navigator|k-meleon|icecat|iceape)\/((\d+)?[\w\.]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(lynx|dillo|icab|doris)[\/\s]?((\d+)?[\w\.]+)/i,/(gobrowser)\/?[\d\.]*/i],["name","version","major"]],device:[[/\(((ipad|playbook));/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],["vendor","model",["type","Tablet"]],[/\(((ip[honed]+));/i,/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],["vendor","model",["type","Mobile"]],[/android.+((transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+))/i],[["vendor","Asus"],"model",["type","Tablet"]],[/(sony)\s(tablet\s[ps])/i],["vendor","model",["type","Tablet"]],[/(nintendo|playstation)\s([wids3portablev]+)/i],["vendor","model",["type","Console"]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i],["vendor",["model",/_/g," "],["type","Mobile"]],[/\s((milestone|droid[2x]?))[globa\s]*\sbuild\//i,/(mot)[\s-]?(\w+)*/i],[["vendor","Motorola"],"model",["type","Mobile"]],[/android.+\s((mz60\d|xoom[\s2]{0,2}))\sbuild\//i],[["vendor","Motorola"],"model",["type","Tablet"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9))/i],[["vendor","Samsung"],"model",["type","Tablet"]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[["vendor","Samsung"],"model",["type","Mobile"]],[/(sie)-(\w+)*/i],[["vendor","Siemens"],"model",["type","Mobile"]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[["vendor","Nokia"],"model",["type","Mobile"]],[/android\s3\.[\s\w-;]{10}((a\d{3}))/i],[["vendor","Acer"],"model",["type","Tablet"]],[/android\s3\.[\s\w-;]{10}(lg?)-([06cv9]{3,4})/i],[["vendor","LG"],"model",["type","Tablet"]],[/(lg)[e;\s-\/]+(\w+)*/i],[["vendor","LG"],"model",["type","Mobile"]]],engine:[[/(presto)\/([\w\.]+)/i,/([aple]*webkit|trident|netfront)\/([\w\.]+)/i,/(khtml)\/([\w\.]+)/i],["name","version"],[/rv\:([\w\.]+).*(gecko)/i],["version","name"]],os:[[/(windows\sphone\sos|windows\s?[mobile]*)[\s\/]?([ntce\d\.\s]+\w)/i],["name",["version",d.string,c.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[["name","Windows"],["version",d.string,c.os.windows.version]],[/(blackberry).+version\/([\w\.]+)/i,/(tizen)\/([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i],["name","version"],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[["name","Symbian"],"version"],[/(nintendo|playstation)\s([wids3portable]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i,/(gnu|linux)\s?([\w\.]+)*/i],["name","version"],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[["name","Chromium OS"],"version"],[/(sunos)\s?([\w\.\s]+\d)*/i],[["name","Solaris"],"version"],[/\s(\w*bsd|dragonfly)\s?([\w\.]+)*/i,],["name","version"],[/(ip[honead]+).*os\s*([\w]+)*\slike\smac/i],[["name","iOS"],["version",/_/g,"."]],[/(mac\sos\sx)\s([\w\s\.]+\w)/i,],["name",["version",/_/g,"."]],[/(haiku)\s(\w+)/i,/(macintosh|unix|minix|beos)[\/\s]?()*/i],["name","version"]]};var b=function b(g){var h=g||((window&&window.navigator&&window.navigator.userAgent)?window.navigator.userAgent:"");this.getBrowser=function(){return d.regex.apply(this,a.browser)};this.getDevice=function(){return d.regex.apply(this,a.device)};this.getEngine=function(){return d.regex.apply(this,a.engine)};this.getOS=function(){return d.regex.apply(this,a.os)};this.getResult=function(){return{browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice()}};this.getUA=function(){return h};this.setUA=function(k){h=k;return this};this.setUA(h)};if(typeof exports!=="undefined"&&this.toString()!=="[object DOMWindow]"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=b}exports.UAParser=b}else{window.UAParser=b}})();if(typeof(wng_includesTracker)=="undefined"){var wng_includesTracker={}}var PLATFORM="worldnow";wng_includesTracker["/global/interface/globals.js"]=1;var WNG_OBJTYPE_EVENT="WNEvent";var WNG_OBJTYPE_OBJECT="WNObject";var WNG_STATE_ON="on",WNG_STATE_OFF="off";var wng_doc=document,wng_win=window,wng_sById=(wng_doc.getElementById)?true:false;var WNClass={create:function(){var a=Array.prototype.shift.call(arguments);return a.apply(a,arguments)},createSingleton:function(){var b=[Array.prototype.shift.call(arguments)];var d=Array.prototype.shift.call(arguments)||[];if(wnTypeOf(d)!="array"){d=[d]}var b=b.concat(d);var c=this.create.apply(this,b);var a=new c();if(a.initialize){a.initialize.apply(a,arguments)}return a},extend:function(c,b){var a=c.prototype;c.prototype=new b;c.prototype.constructor=c;c.baseConstructor=b;c.superClass=b.prototype;for(var d in a){c.prototype[d]=a[d]}}};var WNElement=WNClass.createSingleton(function(){var h=1;var c=WNG_STATE_OFF;var g={frame:1,iframe:1,img:1};var d={vertical:{top:1,middle:1,bottom:1},horizontal:{left:1,center:1,right:1}};var b="vertical";var f="horizontal";var a=function(){};a.prototype={getElement:function(k,n){try{n=n||wng_doc;if(typeof(k)=="string"){var k=(wng_sById)?n.getElementById(k):null}if(!k||k.nodeType!=h){return null}return k}catch(m){}return k},getDimensions:function(m,p){try{if(p&&m.dimensions){return m.dimensions}var n=0,k=0;if(m.offsetWidth){n=m.offsetWidth;k=m.offsetHeight}else{n=m.clientWidth||0;k=m.clientHeight||0}m.dimensions={width:n,height:k};return m.dimensions}catch(o){return{width:0,height:0}}},getWidth:function(k,m){return this.getDimensions(k,m).width},getHeight:function(k,m){return this.getDimensions(k,m).height},getWidthStyleOffset:function(k){return((parseInt(this.getStyle(k,"padding-left"))||0)+(parseInt(this.getStyle(k,"padding-right"))||0)+(parseInt(this.getStyle(k,"border-left"))||0)+(parseInt(this.getStyle(k,"border-right"))||0))},getHeightStyleOffset:function(k){return((parseInt(this.getStyle(k,"padding-top"))||0)+(parseInt(this.getStyle(k,"padding-bottom"))||0)+(parseInt(this.getStyle(k,"border-top"))||0)+(parseInt(this.getStyle(k,"border-bottom"))||0))},setMaxHeight:function(m,n){n=parseInt(n)||0;if(n&&!isNaN(n)){m=this.getElement(m);if(m){var k=this.getHeight(m)+this.getHeightStyleOffset(m);if(k>n){m.style.height=n+"px"}}}},getPosition:function(m,p){try{if(p&&m.position){return m.position}var k=0,q=0;var n=m;if(n.offsetParent){do{k+=n.offsetLeft;q+=n.offsetTop}while(n=n.offsetParent)}else{if(m.x){k=m.x;q=m.y}}m.position={x:k,y:q};return m.position}catch(o){return{x:0,y:0}}},getPositionX:function(k,m){return(this.getPosition(k,m)).x},getPositionY:function(k,m){return(this.getPosition(k,m)).y},addClassName:function(m,k){try{if(!k){return false}if(this.hasClassName(m,k,true)){return false}if(m.className){k=" "+k}m.className+=k;return true}catch(n){return false}},hasClassName:function(m,k){try{if(!k){return false}return(" "+m.className+" ").indexOf(" "+k+" ")!=-1}catch(n){return false}},removeClassName:function(n,m){try{if(!m){return false}var k=n.className;if(typeof(k)=="undefined"){return false}m=" "+m+" ";className=" "+k+" ";while(className.indexOf(m)!=-1){className=className.replace(m," ")}className=className.substr(1,className.length-2);n.className=className;return k!=className}catch(o){return false}},getClassNameFromPrefix:function(m,o){try{if(o&&m){var n=" "+m.className+" ";var q=n.indexOf(" "+o);if(q!=-1){var k=n.indexOf(" ",q);k=(k!=-1)?k:n.length;return n.substring(q,k)}}}catch(p){}return""},getStyle:function(k,o){var n=null;if(k){if(k.currentStyle){var m=o.indexOf("-");if(m!=-1){o=o.substr(0,m)+o.substr(m+1,1).toUpperCase()+o.substr(m+2)}n=k.currentStyle[o]}else{if(wng_win.getComputedStyle){n=wng_doc.defaultView.getComputedStyle(k,null).getPropertyValue(o)}}}return n},reload:function(o,u){var p=false;if(typeof(u)!="object"||u instanceof Array){u={}}var m=u.interval;if(m){u.interval=null;setInterval(this.reload.wnbind(this,o,u),m);return u.returnValue}var q="";if(u.bustCache){q=(new Date()).getTime()}if(o&&o.window==o){var k=u.url||o.location.href;if(q&&k){k=this.updateQuerystringVar(k,"rand",q)}o.location.href=k;p=true}else{var n=o;o=this.getElement(o);if(o&&o.nodeName){if(g[o.nodeName.toLowerCase()]){var k=u.url||o.src;if(q&&k){k=this.updateQuerystringVar(k,"rand",q)}if(o.src){o.src=k;p=true}}else{if(o.nodeName.toLowerCase()=="div"){var t=null;for(var s in g){var r="#"+n.toString()+" > "+s.toString();t=$wn("#"+n.toString()+" > "+s.toString())[0];if(t){break}}if(t){this.reload(t,u)}}}}}if(p&&u.scrollToTop){window.scrollTo(0,0)}return u.returnValue},updateQuerystringVar:function(n,s,r){if(n&&n.length>0&&s&&s.length>0){try{var m=s.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var p=new RegExp("[\\?&]"+m+"(?:=([^&]*))?","i");var o=p.exec(n);var k=(o==null?"":o[1]);if(k&&k.length>0){n=n.replace(s+"="+o[1],s+"="+r)}else{n+=((n.indexOf("?")==-1)?"?":"&")+s+"="+r}}catch(q){}}return n},imageSwap:function(k,m,o){try{k=this.getElement(k);if(k.nodeName.toLowerCase()!="img"){return null}if(m==c){o=k.origsrc}else{if(!k.origsrc){k.origsrc=k.getAttribute("src")}if(!o){o=k.getAttribute("onsrc")}}if(!o){return null}k.src=o;return o}catch(n){}return null},positionOver:function(q,k,z){var s=this.getElement(q);var w=this.getElement(k);if(!s||!w||(s.parentNode!=w.parentNode)){return false}if(typeof(z)!="object"||z instanceof Array){z={}}z.counter=z.counter||0;var r=this.getDimensions(w);if(!r.width){if(z.counter<5){z.counter++;setTimeout(this.positionOver.wnbind(this,q,k,z),10)}return}if(!d.vertical[z.vertical]){z.vertical=_POSITION_OVER_VERTICAL}if(!d.horizontal[z.horizontal]){z.horizontal=_POSITION_OVER_HORIZONTAL}var m=this.getDimensions(s);var t=this.getPosition(w);var p=this.getPosition(s.parentNode);var o=WNBrowser.getScreenSize();var v,u=0;switch(z.horizontal){case"left":v=t.x;break;case"middle":v=Math.floor(t.x+((r.width-m.width)/2));break;case"right":v=t.x+r.width-m.width;break}switch(z.vertical){case"top":u=position.y;break;case"middle":u=Math.floor(t.y+((r.height-m.height)/2));break;case"bottom":u=t.y+r.height-m.height;break}if(v+m.width>o.width){v=o.width-m.width}if(v<0){v=0}if(u+m.height>o.height){u=o.height-m.height}if(u<0){u=0}v-=p.x;u-=p.y;s.parentNode.style.position="relative";var n=s.style;n.left=v+"px";n.top=u+"px";n.position="absolute"}};return a});if(typeof(WNEvent)=="undefined"){var WNEvent=WNClass.createSingleton(function(){var m=false;var k="on";var g="unload";var p="#";var o={element:0,type:1,handler:2};var d=[];var r={};var q=0;function h(w,x){return new WNEventObj(w,x)}function f(){return q++}function v(x,w){return x+p+w}function b(){var A=r;var x=o;var w=x.element,C=x.type,y=x.handler;var B;for(var z in A){B=A[z];WNEvent.removeListener(B[w],B[C],B[y],true)}r={}}function s(x,z,y){var w=f();x[v(z,y)]=w;r[w]=[x,z,y]}function c(x,z,y){try{var A=v(z,y);var w=x[A];delete r[w]}catch(B){}}function u(w,x){d.push(new a(w,x))}function n(x,z){var y=d,w=y.length-1;var A;if(w>-1){do{A=y[w];if(x===A.element&&z===A.handler){d.splice(w,1);break}}while(w--)}}function a(w,x){this.element=w;this.handler=x}a.prototype={fire:function(w){this.handler(w)}};var t=function(){};t.prototype={addListener:function(z,D,F,G){try{if(!z||!D||!F){return false}if(!G){G=z}var w;if(arguments.length<5){w=function(H){return F.call(G,h(H,z),z)}}else{var B=[];for(var A=4,x=arguments.length;A<x;A++){B[A-4]=arguments[A]}w=function(H){var I=[h(H,z),z];I=I.concat(B);return F.apply(G,I)}}if(D==g&&G!==this){u(z,w)}else{if(z.addEventListener){z.addEventListener(D,w,m)}else{if(z.attachEvent){z.attachEvent(k+D,w)}else{var y=z[k+D];if(!y){z[k+D]=w}else{var E=w;w=function(I){var H=E(I);return H&&y(I)};z[k+D]=w}}}}s(z,D,F);return true}catch(C){return false}},removeListener:function(x,z,y,w){return},unload:function(w){try{var y=d,A=y.length;if(A){var x=0;while(x<A){y[x].fire(w);x++}}d=[];b();WNClosureTracker.clearClosures()}catch(z){}}};return t})}function WNEventObj(a,b){this.event=a||wng_win.event||{};this.type=this.event.type;this.currentTarget=b}WNEventObj.prototype={MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",objectType:WNG_OBJTYPE_EVENT,getTarget:function(){var b=this.target;if(b){return b}var a=this.event;b=a.target;if(!b){b=a.srcElement}if(b&&b.nodeType==3){b=b.parentNode}this.target=b;return b},getRelatedTarget:function(){var b=this.relatedTarget;if(b){return b}var a=this.event;b=a.relatedTarget;if(!b){b=(this.type==this.MOUSEOUT)?a.toElement:a.fromElement}this.relatedTarget=b;return b},stopPropagation:function(){var a=this.event;a.cancelBubble=true;if(a.stopPropagation){a.stopPropagation()}},preventDefault:function(){var a=this.event;a.returnValue=false;if(a.preventDefault){a.preventDefault()}return false}};if(typeof(WNClosureTracker)=="undefined"){var WNClosureTracker=WNClass.createSingleton(function(){var c={OBJECT:0,PROPERTY:1,DODELETE:2};var b=[];var a=function(){};a.prototype={add:function(d,h,g){try{var f=typeof(h);if(typeof(d)!="object"||(f!="string"&&f!="number")){return false}b.push([d,h,g]);return true}catch(k){return false}},clearClosures:function(){try{var m=b,f=m.length-1;if(f>-1){var o;var d=c;var h=d.OBJECT,k=d.PROPERTY,g=d.DODELETE;do{o=m[f];if(!o[g]){o[h][o[k]]=null}else{delete o[h][o[k]]}m[f]=null}while(f--)}m=null;b=[]}catch(n){}}};return a})}var WNCookie={set:function(c,f,b){if(c&&typeof(f)=="undefined"){return false}var d=c+"="+f;if(typeof(b)!="object"||b instanceof Array){b={}}var a=b.expires;if(typeof(a)=="object"&&a.toGMTString){d+=";expires="+a.toGMTString()}if(b.path){d+=";path="+b.path}if(b.domain){d+=";domain="+b.domain}if(b.secure){d+=";secure"}document.cookie=d;return true},get:function(c){if(!c){return null}var b=document.cookie,f=c+"=",d=b.indexOf("; "+f);if(d==-1){d=b.indexOf(f);if(d!=0){return null}}else{d+=2}var a=b.indexOf(";",d);if(a==-1){a=b.length}return b.substring(d+f.length,a)},remove:function(b,c){c=(typeof(c)=="string")?c:"/";var a=new Date(0);return this.set(b,"",{expires:a,path:c})}};function wnTypeOf(a){try{if(a.constructor==Array){return"array"}}catch(b){}return typeof(a)}function WNObject(){}WNObject.prototype={objectType:WNG_OBJTYPE_OBJECT,inheritFrom:function(b){for(var a in b){if(!this[a]){this[a]=b[a]}}}};Function.prototype.wnbind=function(){var f=this;var b=[];for(var c=0,a;a=arguments[c];c++){b.push(arguments[c])}var d=b.shift();return function(){if(arguments.length){for(var h=0,g=arguments.length;h<g;h++){b.push(arguments[h])}}return f.apply(d,b)}};if(typeof(Function.prototype.call)=="undefined"){Function.prototype.call=function(){var oObject=arguments[0];oObject._this_func=this;var aArgs=[];for(var i=1,l=arguments.length;i<l;i++){aArgs.push("arguments["+i+"]")}eval("oObject._this_func("+aArgs.join(",")+")");oObject._this_func=null}}if(typeof(Function.prototype.apply)=="undefined"){Function.prototype.apply=function(){var oObject=arguments[0];oObject._this_func=this;var aArgs=[];var args=arguments[1];for(var i=0,l=args.length;i<l;i++){aArgs.push("args["+i+"]")}eval("oObject._this_func("+aArgs.join(",")+")");oObject._this_func=null}}if(typeof(Array.prototype.push)=="undefined"){Array.prototype.push=function(){for(var g=0,c=this.length,f=arguments,d=f.length;g<d;g++){this[c+g]=f[g]}return this.length}}if(typeof(Array.prototype.splice)=="undefined"){Array.prototype.splice=function(g,o){var h=0,m=arguments,k=g,b=this.length;var n=[],h=this.length;while(h--){n[h]=this[h]}if(!o){o=b-g}for(h;h<m.length-2;h++){this[g+h]=m[h+2]}for(g;g<b-o;g++){this[g+m.length-2]=n[g-o]}this.length-=o-m.length+2;return n.slice(k,k+o)}}if(typeof(Array.prototype.slice)=="undefined"){Array.prototype.slice=function(d,h){var b=this.length,g=[];if(!h){h=b}if(h<0){h=b+h}if(d<0){d=b-d}if(h<d){f=d;d=h;h=f}for(var f=0;f<h-d;f++){g[f]=this[d+f]}return g}}if(typeof(Array.prototype.shift)=="undefined"){Array.prototype.shift=function(){for(var d=0,a=this[0],c=this.length-1;d<c;d++){this[d]=this[d+c]}this.length--;return a}}if(typeof(Array.prototype.concat)=="undefined"){Array.prototype.concat=function(f){var c=[];for(var g=0,d=this.length;g<d;g++){c[g]=this[g]}d=c.length;for(var g=0,h=f.length;g<h;g++){c[g+d]=f[g]}return c}}!(function(a){var b;if(!a){return}b={};a.time=function(c){if(c){b[c]=Date.now()}};a.timeEnd=function(c){if(b[c]){a.log(c+": "+(Date.now()-b[c])+"ms");delete b[c]}}}(window.console));Date.prototype.customFormat=function(k,u){k=String(k);if(isNaN(this.getTime())){return""}if(u){this.fixTime()}if(k.indexOf("%Y")!=-1){var d=this.getFullYear()+"";k=k.replace("%YYYY%",d).replace("%YY%",d.substr(2,2))}if(k.indexOf("%M")!=-1){var r=this.getMonth()+1;var p=["January","February","March","April","May","June","July","August","September","October","November","December"][r-1];k=k.replace("%MMMM%",p).replace("%MMM%",p.substr(0,3)).replace("%MM%",(r<10?("0"+r):r)).replace("%M%",r)}var f=k.indexOf("%th%")!=-1;if(k.indexOf("%D")!=-1||f){var a=this.getDate();var n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][this.getDay()];k=k.replace("%DDDD%",n).replace("%DDD%",n.substr(0,3)).replace("%DD%",(a<10?("0"+a):a)).replace("%D%",a);if(f){var b=(a>=10&&a<=20)?"th":((dMod=a%10)==1)?"st":(dMod==2)?"nd":(dMod==3)?"rd":"th";k=k.replace("%th%",b)}}if(k.indexOf("%h")!=-1||k.indexOf("%ampm%")!=-1||k.indexOf("%AMPM%")!=-1){var o=(hhh=this.getHours());if(o==0){o=24}if(o>12){o-=12}var t=(hhh<12)?"am":"pm";k=k.replace("%hhhh%",(hhh<10?("0"+hhh):hhh)).replace("%hhh%",hhh).replace("%hh%",(o<10?("0"+o):o)).replace("%h%",o).replace("%ampm%",t).replace("%AMPM%",t.toUpperCase())}if(k.indexOf("%m")!=-1){var c=this.getMinutes();k=k.replace("%mm%",(c<10?("0"+c):c)).replace("%m%",c)}if(k.indexOf("%s")!=-1){var w=this.getSeconds();k=k.replace("%ss%",(w<10?("0"+w):w)).replace("%s%",w)}if(k.indexOf("%tz%")!=-1){var g="";var v=this.toString();var q=v.match(new RegExp("(\\w+(D|S)T)\\s+"+this.getFullYear()));if(q&&q.length>1){g=q[1]}else{q=v.match(new RegExp("\\d+\\s\\((\\w+\\s\\w+\\s\\w+)\\)"));if(q){q=q[1].split(" ");g=q[0].substr(0,1)+q[1].substr(0,1)+q[2].substr(0,1)}else{q=v.match(new RegExp("\\(([A-Z]+)\\)$"));if(q&&q.length>1){g=q[1]}}}k=k.replace("%tz%",g)}return k};Date.prototype.fixTime=function(b){if(this.fixedTime){return}var f=this.getFullYear();var a=this.getHours();var d=(new Date(f,6,1)).getTimezoneOffset();var c=d!=(new Date(f,1,1)).getTimezoneOffset();if((c&&this.getTimezoneOffset()==d)||this._inDaylightSavings(b)){this.setTime(this.getTime()-3600000)}this.fixedTime=true};Date.prototype._inDaylightSavings=function(n){var m=this.getFullYear();var q=m>2006;var u=(q)?2:3;var r=(q)?10:9;var t=this.getMonth();if(t<u||t>r){return false}var h=1,w=0,o=2,p=7,c=86400000,g=60000;if(typeof(n)!="number"){n=300}var f=(n-this.getTimezoneOffset())*g;var a=new Date(m,u,h,o);var k=a.getDay();if(k!=w){a=new Date(a.getTime()+((p-k)*c))}if(q){a=new Date(a.getTime()+(p*c))}a=new Date(a.getTime()+f);var v=(q)?1:31;var s=new Date(m,r,v,o);var b=s.getDay();if(b!=w){var d=(q)?p-b:-b;s=new Date(s.getTime()+(d*c))}s=new Date(s.getTime()+f);return s>this&&this>=a};var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function encode64(c){c=escape(c);var a="";var n,k,g="";var m,h,f,d="";var b=0;do{n=c.charCodeAt(b++);k=c.charCodeAt(b++);g=c.charCodeAt(b++);m=n>>2;h=((n&3)<<4)|(k>>4);f=((k&15)<<2)|(g>>6);d=g&63;if(isNaN(k)){f=d=64}else{if(isNaN(g)){d=64}}a=a+keyStr.charAt(m)+keyStr.charAt(h)+keyStr.charAt(f)+keyStr.charAt(d);n=k=g="";m=h=f=d=""}while(b<c.length);return a}function decode64(d){var b="";var o,m,h="";var n,k,g,f="";var c=0;var a=/[^A-Za-z0-9\+\/\=]/g;if(a.exec(d)){Worldnow.ErrorMan.add("There were invalid base64 characters in the input text. Expect errors in decoding.",d)}d=d.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{n=keyStr.indexOf(d.charAt(c++));k=keyStr.indexOf(d.charAt(c++));g=keyStr.indexOf(d.charAt(c++));f=keyStr.indexOf(d.charAt(c++));o=(n<<2)|(k>>4);m=((k&15)<<4)|(g>>2);h=((g&3)<<6)|f;b=b+String.fromCharCode(o);if(g!=64){b=b+String.fromCharCode(m)}if(f!=64){b=b+String.fromCharCode(h)}o=m=h="";n=k=g=f=""}while(c<d.length);return unescape(b)}WNEvent.addListener(wng_win,"unload",WNEvent.unload,WNEvent);var Worldnow=(function(a){var b={errors:[],add:function(f,d){this.errors.push(new c(f,d))}};var c=function(f,d){this.init(f,d)};c.prototype={constructor:c,msg:"",error:null,init:function(f,d){this.msg=f;this.error=d}};a.ErrorMan=b;return a}(Worldnow||{}));window.WNlog=function(){WNlog.history=WNlog.history||[];WNlog.history.push(arguments);if(this.console){console.log(Array.prototype.slice.call(arguments))}};var WNErrorHandle={allErrorMsgs:[],defaultMethodName:"N/A",validMethodName:function(a){return(!a||a=="undefined"||a.length<1)?this.defaultMethodName:a},addErrorMsg:function(f,b){b=this.validMethodName(b);var a=new RegExp("[^a-z]+","gi");var c=b.replace(a,"_").toUpperCase();if(!this.allErrorMsgs[c]){this.allErrorMsgs[c]=[]}var d=this.allErrorMsgs[c].length;this.allErrorMsgs[c][d+1]=f},console:function(b,a){a=this.validMethodName(a);WNlog("Method: ("+a+"). "+b)}};var Worldnow=(function(a){a.EventMan=(function(){var h={};var d=function(s){this.name=s;this.actions=[];this.errors=[];this.addAction=function(w,t){var v=w.toString();var u=v.split("{")[0];this.actions.push({fn:w,id:v,name:u,surfaceException:t})};this.clearActions=function(){this.actions=[]};this.duplicateCheck=function(u){for(var t=0;t<this.actions.length;t++){if(this.actions[t].id==u){return false}}return true};this.triggerActions=function(w){var u;for(var t=0;t<this.actions.length;t++){u=this.actions[t];if(u.hasOwnProperty("surfaceException")&&u.surfaceException){u.fn(w)}else{try{u.fn(w)}catch(v){this.debug(u,v)}}}};this.triggerActionsDebug=function(w){a.Helpers.debug("Firing events for "+this.name,"events-"+this.name);var u,v=[];for(var t=0;t<this.actions.length;t++){u=this.actions[t];if(u.hasOwnProperty("surfaceException")&&u.surfaceException){u.fn(w)}else{u.fn(w)}v.push(u.name)}a.Helpers.debug("Firing events completed for "+this.name+". "+v.join()+". ","events-"+this.name)};this.debug=function(t,u){this.errors.push({name:this.name,action:t,msg:u})};this.report=function(){if(this.errors.length>0){console.log(this.errors)}return this.errors}};var n=function(s){return new String(s).toLowerCase()};var g=function(){var s={};for(var t in h){if(h.hasOwnProperty(t)){if(h[t].errors.length>0){s[t]=h[t].report()}}}return s};var q=function(t,u,s){var t=n(t);if(!h.hasOwnProperty(t)){h[t]=new d(t)}h[t].addAction(u,s)};var f=function(t,s){a.Helpers.debug("registerToEvent method is deprecated");q(s,t)};var k=function(s){var s=n(s);if(h.hasOwnProperty(s)){h[s].clearActions()}};var c=function(s,t){var s=n(s);if(h.hasOwnProperty(s)){h[s].triggerActions(t)}};var p=function(s,t){var s=n(s);if(h.hasOwnProperty(s)){h[s].triggerActionsDebug(t)}};var o=function(s,t){c(s,t)};var b=function(t,u,s){if(typeof u=="function"){q(t,u,s)}else{if(typeof u!="undefined"){c(t,u)}else{c(t)}}};var m=function(t,u,s){if(typeof u=="function"){q(t,u,s)}else{if(typeof u!="undefined"){p(t,u)}else{p(t)}}};var r=(wng_pageInfo&&wng_pageInfo.hasOwnProperty("build")&&wng_pageInfo.build=="Local-Debug");return{events:h,register:q,registerToEvent:f,trigger:r?p:c,triggerEvent:o,report:g,event:r?m:b}}());return a})(Worldnow||{});var Worldnow=(function(b){b.CookieMan=window.WNCookieManager=new Object();WNCookieManager.debug=function(){var c=document.cookie;alert("Client Cookie info: "+c);return false};WNCookieManager.setCookie=function(d,h,c,m,g,k){if(d&&typeof(h)!="undefined"){var f=d+"="+escape(h);if(typeof(c)=="object"&&c.toGMTString){f+=";expires="+c.toGMTString()}if(m){f+=";path="+m}if(g){f+=";domain="+g}if(k){f+=";secure"}document.cookie=f;return true}return false};WNCookieManager.getCookie=function a(f){var d=document.cookie,h=f+"=",g=d.indexOf("; "+h);if(g==-1){g=d.indexOf(h);if(g!=0){return null}}else{g+=2}var c=d.indexOf(";",g);if(c==-1){c=d.length}return unescape(d.substring(g+h.length,c))};WNCookieManager.deleteCookie=function(d,g){var c=new Date();var f=new Date();f.setDate(c.getDate()-1);this.setCookie(d,"",f,g)};b.CookieMan.set=function(f,h,d){if(f&&typeof(h)=="undefined"){return false}var g=f+"="+h;if(typeof(d)!="object"||d instanceof Array){d={}}var c=d.expires;if(typeof(c)=="object"&&c.toGMTString){g+=";expires="+c.toGMTString()}if(d.path){g+=";path="+d.path}if(d.domain){g+=";domain="+d.domain}if(d.secure){g+=";secure"}document.cookie=g;return true};b.CookieMan.get=function(f){if(!f){return null}var d=document.cookie,h=f+"=",g=d.indexOf("; "+h);if(g==-1){g=d.indexOf(h);if(g!=0){return null}}else{g+=2}var c=d.indexOf(";",g);if(c==-1){c=d.length}return d.substring(g+h.length,c)};b.CookieMan.remove=function(d,f){f=(typeof(f)=="string")?f:"/";var c=new Date(0);return this.set(d,"",{expires:c,path:f})};b.LocalStorage=function(){var h="wn-array-sep";var n=function(o){switch(typeof o){case"object":if(o instanceof Array){return o.join(h)}else{return JSON.stringify(o)}break;default:return""+o;break}};var g=function(o){if(o){if(/^{/.test(o)){return JSON.parse(o)}else{if(o.indexOf(h)>-1){return o.split(h)}else{if(o.toLowerCase()=="true"){return true}else{if(o.toLowerCase()=="false"){return false}else{if(o.toLowerCase()=="null"){return null}else{return o}}}}}}else{return null}};var f=window.localStorage||b.CookieMan;var m=f.setItem||setterClass.set;var c=f.getItem||getterClass.get;var k=function(o,p){return m.call(f,o,n(p))};var d=function(o){return g(c.call(f,o))};return{set:k,get:d}}();return b})(Worldnow||{});var Worldnow=(function(b){var c={getElementsByClassName:function(n){if(document.getElementsByClassName){return document.getElementsByClassName(n)}else{if(document.querySelectorAll){return document.querySelectorAll("."+n)}else{var k=document.body.getElementsByTagName("DIV"),m=k.length,f=new RegExp("(^| )"+n+"($| )"),h=[];for(var g=0;g<m;g++){if(f.test(k[g].className)){h.push(k[g])}}return h}}},attach:function(f,k,h){h=h||"append";f=(f instanceof jQuery)?f:$(f);var g=function(m,o,n){switch(n){case"prepend":m.prepend(o);break;case"before":m.before(o);break;case"after":m.after(o);break;default:m.append(o);break}};if(f.length>0){g(f,k,h)}else{$(document).ready(function(){g(f,k,h)})}},extend:function(g){for(var k=1,f=arguments.length,h,m;k<f;k++){m=arguments[k];if(typeof m==="object"){for(h in m){if(m.hasOwnProperty(h)){g[h]=m[h]}}}}return g},addEvent:function(h,g,f){var g=g.toLowerCase(),g=(g.indexOf("on")!=0)?"on"+g:g;if(h.attachEvent){h.attachEvent(g,f)}else{if(h.addEventListener){g=g.replace(/^on/,"");h.addEventListener(g,f,false)}else{h[g]=f}}return h},loadJavascriptAsync:function(n){var m=document,f="script",p=n.id,k=n.src,g,h;if(!k||(p&&m.getElementById(p))){return}g=m.getElementsByTagName(f)[0];h=m.createElement(f);h.id=p||"Script-"+Math.floor(Math.random()*100000+1);h.async=1;h.src=k;if(n.load){h=Worldnow.Helpers.addEvent(h,"load",n.load)}g.parentNode.insertBefore(h,g)},loadJavascriptInline:function(f,g){g=g?' id="'+g+'"':"";document.writeln('<script type="text/javascript" src="'+f+'"'+g+"><\/script>");this.debug("Should not use Worldnow.Helpers.loadJavascriptInline for "+f)},debug:function(g,h){if(window.wng_pageInfo&&wng_pageInfo.build&&wng_pageInfo.build=="Local-Debug"){console.log("Notice from Worldnow.Helpers.debug =====================");if(h){var f=window.DEBUG_TIMERS||[];if(f.indexOf(h)>-1){console.log("Timer "+h+" ended. "+g);console.timeEnd(h)}else{f.push(h);console.log("Timer "+h+" started. "+g);console.time(h)}window.DEBUG_TIMERS=f}else{console.log(g)}console.log("========================================================")}}};var a=function(f){this.ua=new UAParser();this.win=window;this.helpers=c;this.cookies=b.CookieMan;this.storage=b.LocalStorage;this.data=f;this.clientType=(wng_pageInfo&&wng_pageInfo.isMobile)?"smartdevice":"desktop";this.page=window.wng_pageInfo||{}};var d={loadAssets:function(){if(!window.addthis){var f=window.addthis_config||{},g=f.pubid||null;if(g){c.loadJavascriptAsync({src:"//s7.addthis.com/js/300/addthis_widget.js#pubid="+g+"&domready=1",id:"addthis-widget"})}else{}}},addConfig:function(h){window.addthis_config=window.addthis_config||{};var g,f;for(g in h){if(h.hasOwnProperty(g)){f=h[g];switch(typeof f){case"string":case"number":case"boolean":window.addthis_config[g]=f;break;default:break}}}}};b.SDKModule=a;b.Helpers=c;b.AddThisHelpers=d;if(b.InitSDK){b.InitSDK()}return b}(Worldnow||{}));(function(d){var c={all:0,past_year:1,past_month:2,past_week:3,past_24_hrs:4};var b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var f=["January","February","March","April","May","June","July","August","September","October","November","December"];var a=[];a.Jan="01";a.Feb="02";a.Mar="03";a.Apr="04";a.May="05";a.Jun="06";a.Jul="07";a.Aug="08";a.Sep="09";a.Oct="10";a.Nov="11";a.Dec="12";d.dateRanges=(function(){return c})();d.format=(function(){function n(p){return b[parseInt(p,10)]||p}function o(q){var p=parseInt(q,10)-1;return g[p]||q}function m(q){var p=parseInt(q,10)-1;return f[p]||q}var h=function(p){return a[p]||p};var k=function(s){var t=s;var q="";if(t.indexOf(".")!==-1){var r=t.split(".");t=r[0];q=r[1]}var p=t.split(":");if(p.length===3){hour=p[0];minute=p[1];second=p[2];return{time:t,hour:hour,minute:minute,second:second,millis:q}}else{return{time:"",hour:"",minute:"",second:"",millis:""}}};return{date:function(D,C){try{var q=null;var z=null;var w=null;var F=null;var r=null;var p=null;var y=null;var u=null;if(typeof D.getFullYear==="function"){z=D.getFullYear();w=D.getMonth()+1;F=D.getDate();r=D.getDay();p=k(D.toTimeString());y=new Date(z,0,1);u=Math.ceil((((D-y)/86400000)+y.getDay()+1)/7)}else{if(D.search(/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d{0,3}[-+]?\d{2}:\d{2}/)!=-1){var E=D.split(/[T\+-]/);z=E[0];w=E[1];F=E[2];p=k(E[3].split(".")[0]);q=new Date(z,w-1,F);r=q.getDay();y=new Date(z,0,1);u=Math.ceil((((D-y)/86400000)+y.getDay()+1)/7)}else{var E=D.split(" ");switch(E.length){case 6:z=E[5];w=h(E[1]);F=E[2];p=k(E[3]);q=new Date(z,w-1,F);r=q.getDay();y=new Date(z,0,1);u=Math.ceil((((D-y)/86400000)+y.getDay()+1)/7);break;case 2:var B=E[0].split("-");z=B[0];w=B[1];F=B[2];p=k(E[1]);q=new Date(z,w-1,F);r=q.getDay();y=new Date(z,0,1);u=Math.ceil((((D-y)/86400000)+y.getDay()+1)/7);break;case 7:case 9:case 10:z=E[3];w=h(E[1]);F=E[2];p=k(E[4]);q=new Date(z,w-1,F);r=q.getDay();y=new Date(z,0,1);u=Math.ceil((((D-y)/86400000)+y.getDay()+1)/7);break;default:return D}}}var x="";var t="";for(var s=0;s<C.length;s++){var A=C.charAt(s);x+=A;switch(x){case"ddd":t+=n(r);x="";break;case"dd":if(C.charAt(s+1)=="d"){break}if(String(F).length===1){F="0"+F}t+=F;x="";break;case"MMMM":t+=m(w);x="";break;case"MMM":if(C.charAt(s+1)==="M"){break}t+=o(w);x="";break;case"MM":if(C.charAt(s+1)=="M"){break}if(String(w).length===1){w="0"+w}t+=w;x="";break;case"yyyy":t+=z;x="";break;case"HH":t+=p.hour;x="";break;case"hh":t+=(p.hour==0?12:p.hour<13?p.hour:p.hour-12);x="";break;case"mm":t+=p.minute;x="";break;case"ss":t+=p.second.substring(0,2);x="";break;case"SSS":t+=p.millis.substring(0,3);x="";break;case"a":t+=p.hour>=12?"PM":"AM";x="";break;case"ww":if(String(u).length===1){u="0"+u}t+=u;x="";break;case" ":t+=A;x="";break;case"/":t+=A;x="";break;case":":t+=A;x="";break;default:if(x.length===2&&x.indexOf("y")!==0&&x!="SS"){t+=x.substring(0,1);x=x.substring(1,2)}else{if((x.length===3&&x.indexOf("yyy")===-1)){x=""}}}}return t}catch(v){return D}}}})();d.range=(function(){function h(k){var m=new Date();var n="";switch(k){case 1:m.setFullYear(m.getUTCFullYear()-1);n=m.toString();break;case 2:m.setMonth(m.getMonth()-1);n=m.toString();break;case 3:m.setDate(m.getDate()-6);n=m.toString();break;case 4:m.setDate(m.getDate());n=m.toString();break;default:n="";break}return n}return{dates:function(k,p){try{var o=h(k);var m=(k&&k!=k.all)?new Date().toString():"";return{startDate:(o.length>0?d.format.date(o,p):o),endDate:(m.length>0?d.format.date(m,p):m)}}catch(n){return{startDate:"",endDate:""}}}}})()})($wn||$||jQuery);(function(d){var a=d.event.special,c="D"+(+new Date()),b="D"+(+new Date()+1);a.scrollstart={setup:function(){var g,f=function(m){var h=this,k=arguments;if(g){clearTimeout(g)}else{m.type="scrollstart";d.event.handle.apply(h,k)}g=setTimeout(function(){g=null},a.scrollstop.latency)};d(this).bind("scroll",f).data(c,f)},teardown:function(){d(this).unbind("scroll",d(this).data(c))}};a.scrollstop={latency:200,setup:function(){var g,f=function(m){var h=this,k=arguments;if(g){clearTimeout(g)}g=setTimeout(function(){g=null;m.type="scrollstop";d.event.handle.apply(h,k)},a.scrollstop.latency)};d(this).bind("scroll",f).data(b,f)},teardown:function(){d(this).unbind("scroll",d(this).data(b))}}})($wn);(function(a){a.belowthefold=function(c,d){var b=a(window).height()+a(window).scrollTop();return b<=a(c).offset().top-d.threshold};a.abovethetop=function(b,c){var d=a(window).scrollTop();return d>=a(b).offset().top+a(b).height()-c.threshold};a.rightofscreen=function(c,d){var b=a(window).width()+a(window).scrollLeft();return b<=a(c).offset().left-d.threshold};a.leftofscreen=function(b,c){var d=a(window).scrollLeft();return d>=a(b).offset().left+a(b).width()-c.threshold};a.inviewport=function(b,c){return !a.rightofscreen(b,c)&&!a.leftofscreen(b,c)&&!a.belowthefold(b,c)&&!a.abovethetop(b,c)};a.extend(a.expr[":"],{"below-the-fold":function(c,d,b){return a.belowthefold(c,{threshold:0})},"above-the-top":function(c,d,b){return a.abovethetop(c,{threshold:0})},"left-of-screen":function(c,d,b){return a.leftofscreen(c,{threshold:0})},"right-of-screen":function(c,d,b){return a.rightofscreen(c,{threshold:0})},"in-viewport":function(c,d,b){return a.inviewport(c,{threshold:100})}})})($wn);
/*!
* jQuery imagesLoaded plugin v1.1.0
* http://github.com/desandro/imagesloaded
*
* MIT License. by Paul Irish et al.
*/
(function(a,b){a.fn.imagesLoaded=function(n){var k=this,g=k.find("img").add(k.filter("img")),c=g.length,m="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",f=[];function h(){n.call(k,g)}function d(o){if(o.target.src!==m&&a.inArray(this,f)===-1){f.push(this);if(--c<=0){setTimeout(h);g.unbind(".imagesLoaded",d)}}}if(!c){h()}g.bind("load.imagesLoaded error.imagesLoaded",d).each(function(){var o=this.src;this.src=m;this.src=o});return k}})($wn);$wn.fn.liScroll=function(a){a=$wn.extend({travelocity:0.07},a);return this.each(function(){var b=$wn(this);b.addClass("newsticker");var c=0;var m=b.wrap("<div class='tickermask'></div>");var f=b.parent().wrap("<div class='tickercontainer'></div>");var g=b.parent().parent().width();b.find("li").each(function(o){c+=$wn(this,o).width()+1});b.width(c);var h=c/a.travelocity;var n=c+g;function d(p,o){b.animate({left:"-="+p},o,"linear",function(){b.css("left",g);var q=$wn(this).offset().left+c;d(q,q/a.travelocity)})}var k=$wn(this).offset().left+c;d(k,k/a.travelocity);b.hover(function(){$wn(this).stop()},function(){var q=$wn(this).offset();var o=q.left+c;var p=o/a.travelocity;d(o,p)})})};(function(G){if(G().fancybox){return null}var S,aa,X,T,d,r,Q,F,V,E,H=0,N={},o=[],f=0,M={},D=[],h=null,t=new Image(),n=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,p=/[^\.]\.(swf)\s*$/i,u,U=1,m=0,y="",b,c,W=false,x=G.extend(G("<div/>")[0],{prop:0}),P=new UAParser(),g=P.getBrowser(),Z=g.name=="IE"&&parseInt(g.major)<7,w=function(){aa.hide();t.onerror=t.onload=null;if(h){h.abort()}S.empty()},C=function(){if(false===N.onError(o,H,N)){aa.hide();W=false;return}N.titleShow=false;N.width="auto";N.height="auto";S.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>');s()},B=function(){var ag=o[H],ad,af,ai,ah,ac,ae;w();N=G.extend({},G.fn.fancybox.defaults,(typeof G(ag).data("fancybox")=="undefined"?N:G(ag).data("fancybox")));ae=N.onStart(o,H,N);if(ae===false){W=false;return}else{if(typeof ae=="object"){N=G.extend(N,ae)}}ai=N.title||(ag.nodeName?G(ag).attr("title"):ag.title)||"";if(ag.nodeName&&!N.orig){N.orig=G(ag).children("img:first").length?G(ag).children("img:first"):G(ag)}if(ai===""&&N.orig&&N.titleFromAlt){ai=N.orig.attr("alt")}ad=N.href||(ag.nodeName?G(ag).attr("href"):ag.href)||null;if((/^(?:javascript)/i).test(ad)||ad=="#"){ad=null}if(N.type){af=N.type;if(!ad){ad=N.content}}else{if(N.content){af="html"}else{if(ad){if(ad.match(n)){af="image"}else{if(ad.match(p)){af="swf"}else{if(G(ag).hasClass("iframe")){af="iframe"}else{if(ad.indexOf("#")===0){af="inline"}else{af="ajax"}}}}}}}if(!af){C();return}if(af=="inline"){ag=ad.substr(ad.indexOf("#"));af=G(ag).length>0?"inline":"ajax"}N.type=af;N.href=ad;N.title=ai;if(N.autoDimensions){if(N.type=="html"||N.type=="inline"||N.type=="ajax"){N.width="auto";N.height="auto"}else{N.autoDimensions=false}}if(N.modal){N.overlayShow=true;N.hideOnOverlayClick=false;N.hideOnContentClick=false;N.enableEscapeButton=false;N.showCloseButton=false}N.padding=parseInt(N.padding,10);N.margin=parseInt(N.margin,10);S.css("padding",(N.padding+N.margin));G(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){G(this).replaceWith(r.children())});switch(af){case"html":S.html(N.content);s();break;case"inline":if(G(ag).parent().is("#fancybox-content")===true){W=false;return}G('<div class="fancybox-inline-tmp" />').hide().insertBefore(G(ag)).bind("fancybox-cleanup",function(){G(this).replaceWith(r.children())}).bind("fancybox-cancel",function(){G(this).replaceWith(S.children())});G(ag).appendTo(S);s();break;case"image":W=false;G.fancybox.showActivity();t=new Image();t.onerror=function(){C()};t.onload=function(){W=true;t.onerror=t.onload=null;K()};t.src=ad;break;case"swf":N.scrolling="no";ah='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+N.width+'" height="'+N.height+'"><param name="movie" value="'+ad+'"></param>';ac="";G.each(N.swf,function(aj,ak){ah+='<param name="'+aj+'" value="'+ak+'"></param>';ac+=" "+aj+'="'+ak+'"'});ah+='<embed src="'+ad+'" type="application/x-shockwave-flash" width="'+N.width+'" height="'+N.height+'"'+ac+"></embed></object>";S.html(ah);s();break;case"ajax":W=false;G.fancybox.showActivity();N.ajax.win=N.ajax.success;h=G.ajax(G.extend({},N.ajax,{url:ad,data:N.ajax.data||{},error:function(aj,al,ak){if(aj.status>0){C()}},success:function(ak,am,aj){var al=typeof aj=="object"?aj:h;if(al.status==200){if(typeof N.ajax.win=="function"){ae=N.ajax.win(ad,ak,am,aj);if(ae===false){aa.hide();return}else{if(typeof ae=="string"||typeof ae=="object"){ak=ae}}}S.html(ak);s()}}}));break;case"iframe":J();break}},s=function(){var ac=N.width,ad=N.height;if(ac.toString().indexOf("%")>-1){ac=parseInt((G(window).width()-(N.margin*2))*parseFloat(ac)/100,10)+"px"}else{ac=ac=="auto"?"auto":ac+"px"}if(ad.toString().indexOf("%")>-1){ad=parseInt((G(window).height()-(N.margin*2))*parseFloat(ad)/100,10)+"px"}else{ad=ad=="auto"?"auto":ad+"px"}S.wrapInner('<div style="width:'+ac+";height:"+ad+";overflow: "+(N.scrolling=="auto"?"auto":(N.scrolling=="yes"?"scroll":"hidden"))+';position:relative;"></div>');N.width=S.width();N.height=S.height();J()},K=function(){N.width=t.width;N.height=t.height;G("<img />").attr({id:"fancybox-img",src:t.src,alt:N.title}).appendTo(S);J()},J=function(){var ad,ac;aa.hide();if(T.is(":visible")&&false===M.onCleanup(D,f,M)){G.event.trigger("fancybox-cancel");W=false;return}W=true;G(r.add(X)).unbind();G(window).unbind("resize.fb scroll.fb");G(document).unbind("keydown.fb");if(T.is(":visible")&&M.titlePosition!=="outside"){T.css("height",T.height())}D=o;f=H;M=N;if(M.overlayShow){X.css({"background-color":M.overlayColor,opacity:M.overlayOpacity,cursor:M.hideOnOverlayClick?"pointer":"auto",height:G(document).height()});if(!X.is(":visible")){if(Z){G("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"})}X.show()}}else{X.hide()}c=Y();q();if(T.is(":visible")){G(Q.add(V).add(E)).hide();ad=T.position(),b={top:ad.top,left:ad.left,width:T.width(),height:T.height()};ac=(b.width==c.width&&b.height==c.height);r.fadeTo(M.changeFade,0.3,function(){var ae=function(){r.html(S.contents()).fadeTo(M.changeFade,1,A)};G.event.trigger("fancybox-change");r.empty().removeAttr("filter").css({"border-width":M.padding,width:c.width-M.padding*2,height:N.autoDimensions?"auto":c.height-m-M.padding*2});if(ac){ae()}else{x.prop=0;G(x).animate({prop:1},{duration:M.changeSpeed,easing:M.easingChange,step:ab,complete:ae})}});return}T.removeAttr("style");r.css("border-width",M.padding);if(M.transitionIn=="elastic"){b=O();r.html(S.contents());T.show();if(M.opacity){c.opacity=0}x.prop=0;G(x).animate({prop:1},{duration:M.speedIn,easing:M.easingIn,step:ab,complete:A});return}if(M.titlePosition=="inside"&&m>0){F.show()}r.css({width:c.width-M.padding*2,height:N.autoDimensions?"auto":c.height-m-M.padding*2}).html(S.contents());T.css(c).fadeIn(M.transitionIn=="none"?0:M.speedIn,A)},I=function(ac){if(ac&&ac.length){if(M.titlePosition=="float"){return'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+ac+'</td><td id="fancybox-title-float-right"></td></tr></table>'}return'<div id="fancybox-title-'+M.titlePosition+'">'+ac+"</div>"}return false},q=function(){y=M.title||"";m=0;F.empty().removeAttr("style").removeClass();if(M.titleShow===false){F.hide();return}y=G.isFunction(M.titleFormat)?M.titleFormat(y,D,f,M):I(y);if(!y||y===""){F.hide();return}F.addClass("fancybox-title-"+M.titlePosition).html(y).appendTo("body").show();switch(M.titlePosition){case"inside":F.css({width:c.width-(M.padding*2),marginLeft:M.padding,marginRight:M.padding});m=F.outerHeight(true);F.appendTo(d);c.height+=m;break;case"over":F.css({marginLeft:M.padding,width:c.width-(M.padding*2),bottom:M.padding}).appendTo(d);break;case"float":F.css("left",parseInt((F.width()-c.width-40)/2,10)*-1).appendTo(T);break;default:F.css({width:c.width-(M.padding*2),paddingLeft:M.padding,paddingRight:M.padding}).appendTo(T);break}F.hide()},k=function(){if(M.enableEscapeButton||M.enableKeyboardNav){G(document).bind("keydown.fb",function(ac){if(ac.keyCode==27&&M.enableEscapeButton){ac.preventDefault();G.fancybox.close()}else{if((ac.keyCode==37||ac.keyCode==39)&&M.enableKeyboardNav&&ac.target.tagName!=="INPUT"&&ac.target.tagName!=="TEXTAREA"&&ac.target.tagName!=="SELECT"){ac.preventDefault();G.fancybox[ac.keyCode==37?"prev":"next"]()}}})}if(!M.showNavArrows){V.hide();E.hide();return}if((M.cyclic&&D.length>1)||f!==0){V.show()}if((M.cyclic&&D.length>1)||f!=(D.length-1)){E.show()}},A=function(){if(!G.support.opacity){r.get(0).style.removeAttribute("filter");T.get(0).style.removeAttribute("filter")}if(N.autoDimensions){r.css("height","auto")}T.css("height","auto");if(y&&y.length){F.show()}if(M.showCloseButton){Q.show()}k();if(M.hideOnContentClick){r.bind("click",G.fancybox.close)}if(M.hideOnOverlayClick){X.bind("click",G.fancybox.close)}G(window).bind("resize.fb",G.fancybox.resize);if(M.centerOnScroll){G(window).bind("scroll.fb",G.fancybox.center)}if(M.type=="iframe"){G('<iframe id="fancybox-frame" name="fancybox-frame'+new Date().getTime()+'" frameborder="0" hspace="0" '+(g.name=="IE"?'allowtransparency="true""':"")+' scrolling="'+N.scrolling+'" src="'+M.href+'"></iframe>').appendTo(r)}T.show();W=false;G.fancybox.center();M.onComplete(D,f,M);R()},R=function(){var ac,ad;if((D.length-1)>f){ac=D[f+1].href;if(typeof ac!=="undefined"&&ac.match(n)){ad=new Image();ad.src=ac}}if(f>0){ac=D[f-1].href;if(typeof ac!=="undefined"&&ac.match(n)){ad=new Image();ad.src=ac}}},ab=function(ad){var ac={width:parseInt(b.width+(c.width-b.width)*ad,10),height:parseInt(b.height+(c.height-b.height)*ad,10),top:parseInt(b.top+(c.top-b.top)*ad,10),left:parseInt(b.left+(c.left-b.left)*ad,10)};if(typeof c.opacity!=="undefined"){ac.opacity=ad<0.5?0.5:ad}T.css(ac);r.css({width:ac.width-M.padding*2,height:ac.height-(m*ad)-M.padding*2})},z=function(){return[G(window).width()-(M.margin*2),G(window).height()-(M.margin*2),G(document).scrollLeft()+M.margin,G(document).scrollTop()+M.margin]},Y=function(){var ac=z(),ag={},ad=M.autoScale,ae=M.padding*2,af;if(M.width.toString().indexOf("%")>-1){ag.width=parseInt((ac[0]*parseFloat(M.width))/100,10)}else{ag.width=M.width+ae}if(M.height.toString().indexOf("%")>-1){ag.height=parseInt((ac[1]*parseFloat(M.height))/100,10)}else{ag.height=M.height+ae}if(ad&&(ag.width>ac[0]||ag.height>ac[1])){if(N.type=="image"||N.type=="swf"){af=(M.width)/(M.height);if((ag.width)>ac[0]){ag.width=ac[0];ag.height=parseInt(((ag.width-ae)/af)+ae,10)}if((ag.height)>ac[1]){ag.height=ac[1];ag.width=parseInt(((ag.height-ae)*af)+ae,10)}}else{ag.width=Math.min(ag.width,ac[0]);ag.height=Math.min(ag.height,ac[1])}}ag.top=parseInt(Math.max(ac[3]-20,ac[3]+((ac[1]-ag.height-40)*0.5)),10);ag.left=parseInt(Math.max(ac[2]-20,ac[2]+((ac[0]-ag.width-40)*0.5)),10);return ag},v=function(ac){var ad=ac.offset();ad.top+=parseInt(ac.css("paddingTop"),10)||0;ad.left+=parseInt(ac.css("paddingLeft"),10)||0;ad.top+=parseInt(ac.css("border-top-width"),10)||0;ad.left+=parseInt(ac.css("border-left-width"),10)||0;ad.width=ac.width();ad.height=ac.height();return ad},O=function(){var af=N.orig?G(N.orig):false,ae={},ad,ac;if(af&&af.length){ad=v(af);ae={width:ad.width+(M.padding*2),height:ad.height+(M.padding*2),top:ad.top-M.padding-20,left:ad.left-M.padding-20}}else{ac=z();ae={width:M.padding*2,height:M.padding*2,top:parseInt(ac[3]+ac[1]*0.5,10),left:parseInt(ac[2]+ac[0]*0.5,10)}}return ae},a=function(){if(!aa.is(":visible")){clearInterval(u);return}G("div",aa).css("top",(U*-40)+"px");U=(U+1)%12};G.fn.fancybox=function(ac){if(!G(this).length){return this}G(this).data("fancybox",G.extend({},ac,(G.metadata?G(this).metadata():{}))).unbind("click.fb").bind("click.fb",function(ae){ae.preventDefault();if(W){return}W=true;G(this).blur();o=[];H=0;var ad=G(this).attr("rel")||"";if(!ad||ad==""||ad==="nofollow"){o.push(this)}else{o=G("a[rel="+ad+"], area[rel="+ad+"]");H=o.index(this)}B();return});return this};G.fancybox=function(af){var ae;if(W){return}W=true;ae=typeof arguments[1]!=="undefined"?arguments[1]:{};o=[];H=parseInt(ae.index,10)||0;if(G.isArray(af)){for(var ad=0,ac=af.length;ad<ac;ad++){if(typeof af[ad]=="object"){G(af[ad]).data("fancybox",G.extend({},ae,af[ad]))}else{af[ad]=G({}).data("fancybox",G.extend({content:af[ad]},ae))}}o=jQuery.merge(o,af)}else{if(typeof af=="object"){G(af).data("fancybox",G.extend({},ae,af))}else{af=G({}).data("fancybox",G.extend({content:af},ae))}o.push(af)}if(H>o.length||H<0){H=0}B()};G.fancybox.showActivity=function(){clearInterval(u);aa.show();u=setInterval(a,66)};G.fancybox.hideActivity=function(){aa.hide()};G.fancybox.next=function(){return G.fancybox.pos(f+1)};G.fancybox.prev=function(){return G.fancybox.pos(f-1)};G.fancybox.pos=function(ac){if(W){return}ac=parseInt(ac);o=D;if(ac>-1&&ac<D.length){H=ac;B()}else{if(M.cyclic&&D.length>1){H=ac>=D.length?0:D.length-1;B()}}return};G.fancybox.cancel=function(){if(W){return}W=true;G.event.trigger("fancybox-cancel");w();N.onCancel(o,H,N);W=false};G.fancybox.close=function(){if(W||T.is(":hidden")){return}W=true;if(M&&false===M.onCleanup(D,f,M)){W=false;return}w();G(Q.add(V).add(E)).hide();G(r.add(X)).unbind();G(window).unbind("resize.fb scroll.fb");G(document).unbind("keydown.fb");r.find("iframe").attr("src",Z&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank");if(M.titlePosition!=="inside"){F.empty()}T.stop();function ac(){X.fadeOut("fast");F.empty().hide();T.hide();G.event.trigger("fancybox-cleanup");r.empty();M.onClosed(D,f,M);D=N=[];f=H=0;M=N={};W=false}if(M.transitionOut=="elastic"){b=O();var ad=T.position();c={top:ad.top,left:ad.left,width:T.width(),height:T.height()};if(M.opacity){c.opacity=1}F.empty().hide();x.prop=1;G(x).animate({prop:0},{duration:M.speedOut,easing:M.easingOut,step:ab,complete:ac})}else{T.fadeOut(M.transitionOut=="none"?0:M.speedOut,ac)}};G.fancybox.resize=function(){if(X.is(":visible")){X.css("height",G(document).height())}G.fancybox.center(true)};G.fancybox.center=function(){var ac,ad;if(W){return}ad=arguments[0]===true?1:0;ac=z();if(!ad&&(T.width()>ac[0]||T.height()>ac[1])){return}T.stop().animate({top:parseInt(Math.max(ac[3]-20,ac[3]+((ac[1]-r.height()-40)*0.5)-M.padding)),left:parseInt(Math.max(ac[2]-20,ac[2]+((ac[0]-r.width()-40)*0.5)-M.padding))},typeof arguments[0]=="number"?arguments[0]:200)};G.fancybox.init=function(){if(G("#fancybox-wrap").length){return}G("body").append(S=G('<div id="fancybox-tmp"></div>'),aa=G('<div id="fancybox-loading"><div></div></div>'),X=G('<div id="fancybox-overlay"></div>'),T=G('<div id="fancybox-wrap"></div>'));d=G('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(T);d.append(r=G('<div id="fancybox-content"></div>'),Q=G('<a id="fancybox-close"></a>'),F=G('<div id="fancybox-title"></div>'),V=G('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),E=G('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));Q.click(G.fancybox.close);aa.click(G.fancybox.cancel);V.click(function(ac){ac.preventDefault();G.fancybox.prev()});E.click(function(ac){ac.preventDefault();G.fancybox.next()});if(G.fn.mousewheel){T.bind("mousewheel.fb",function(ac,ad){if(W){ac.preventDefault()}else{if(G(ac.target).get(0).clientHeight==0||G(ac.target).get(0).scrollHeight===G(ac.target).get(0).clientHeight){ac.preventDefault();G.fancybox[ad>0?"prev":"next"]()}}})}if(!G.support.opacity){T.addClass("fancybox-ie")}if(Z){aa.addClass("fancybox-ie6");T.addClass("fancybox-ie6");G('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(d)}};G.fn.fancybox.defaults={padding:10,margin:40,opacity:false,modal:false,cyclic:false,scrolling:"auto",width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:0.7,overlayColor:"#777",titleShow:true,titlePosition:"float",titleFormat:null,titleFromAlt:false,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,enableKeyboardNav:true,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};G(document).ready(function(){G.fancybox.init()})})($wn||jQuery);!function(D,C,B,A){function z(a,d){this.settings=null,this.options=D.extend({},z.Defaults,d),this.$element=D(a),this.drag=D.extend({},r),this.state=D.extend({},q),this.e=D.extend({},p),this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._invalidated={},this._pipe=[],D.each(z.Plugins,D.proxy(function(f,c){this._plugins[f[0].toLowerCase()+f.slice(1)]=new c(this)},this)),D.each(z.Pipe,D.proxy(function(f,g){this._pipe.push({filter:g.filter,run:D.proxy(g.run,this)})},this)),this.setup(),this.initialize()}function y(b){if(b.touches!==A){return{x:b.touches[0].pageX,y:b.touches[0].pageY}}if(b.touches===A){if(b.pageX!==A){return{x:b.pageX,y:b.pageY}}if(b.pageX===A){return{x:b.clientX,y:b.clientY}}}}function x(g){var c,m,k=B.createElement("div"),h=g;for(c in h){if(m=h[c],"undefined"!=typeof k.style[m]){return k=null,[m,c]}}return[!1]}function w(){return x(["transition","WebkitTransition","MozTransition","OTransition"])[1]}function v(){return x(["transform","WebkitTransform","MozTransform","OTransform","msTransform"])[0]}function u(){return x(["perspective","webkitPerspective","MozPerspective","OPerspective","MsPerspective"])[0]}function t(){return"ontouchstart" in C||!!navigator.msMaxTouchPoints}function s(){return C.navigator.msPointerEnabled}var r,q,p;r={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,offsetX:0,offsetY:0,distance:null,startTime:0,endTime:0,updatedX:0,targetEl:null},q={isTouch:!1,isScrolling:!1,isSwiping:!1,direction:!1,inMotion:!1},p={_onDragStart:null,_onDragMove:null,_onDragEnd:null,_transitionEnd:null,_resizer:null,_responsiveCall:null,_goToLoop:null,_checkVisibile:null},z.Defaults={items:3,loop:!1,center:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:C,responsiveClass:!1,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",themeClass:"owl-theme",baseClass:"owl-carousel",itemClass:"owl-item",centerClass:"center",activeClass:"active"},z.Width={Default:"default",Inner:"inner",Outer:"outer"},z.Plugins={},z.Pipe=[{filter:["width","items","settings"],run:function(b){b.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){var d=this._clones,c=this.$stage.children(".cloned");(c.length!==d.length||!this.settings.loop&&d.length>0)&&(this.$stage.children(".cloned").remove(),this._clones=[])}},{filter:["items","settings"],run:function(){var g,f,m=this._clones,k=this._items,h=this.settings.loop?m.length-Math.max(2*this.settings.items,4):0;for(g=0,f=Math.abs(h/2);f>g;g++){h>0?(this.$stage.children().eq(k.length+m.length-1).remove(),m.pop(),this.$stage.children().eq(0).remove(),m.pop()):(m.push(m.length/2),this.$stage.append(k[m[m.length-1]].clone().addClass("cloned")),m.push(k.length-1-(m.length-1)/2),this.$stage.prepend(k[m[m.length-1]].clone().addClass("cloned")))}}},{filter:["width","items","settings"],run:function(){var h,g,o,n=this.settings.rtl?1:-1,m=(this.width()/this.settings.items).toFixed(3),k=0;for(this._coordinates=[],g=0,o=this._clones.length+this._items.length;o>g;g++){h=this._mergers[this.relative(g)],h=this.settings.mergeFit&&Math.min(h,this.settings.items)||h,k+=(this.settings.autoWidth?this._items[this.relative(g)].width()+this.settings.margin:m*h)*n,this._coordinates.push(k)}}},{filter:["width","items","settings"],run:function(){var a,h,g=(this.width()/this.settings.items).toFixed(3),f={width:Math.abs(this._coordinates[this._coordinates.length-1])+2*this.settings.stagePadding,"padding-left":this.settings.stagePadding||"","padding-right":this.settings.stagePadding||""};if(this.$stage.css(f),f={width:this.settings.autoWidth?"auto":g-this.settings.margin},f[this.settings.rtl?"margin-left":"margin-right"]=this.settings.margin,!this.settings.autoWidth&&D.grep(this._mergers,function(b){return b>1}).length>0){for(a=0,h=this._coordinates.length;h>a;a++){f.width=Math.abs(this._coordinates[a])-Math.abs(this._coordinates[a-1]||0)-this.settings.margin,this.$stage.children().eq(a).css(f)}}else{this.$stage.children().css(f)}}},{filter:["width","items","settings"],run:function(b){b.current&&this.reset(this.$stage.children().index(b.current))}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var I,H,G,F,E=this.settings.rtl?1:-1,o=2*this.settings.stagePadding,n=this.coordinates(this.current())+o,m=n+this.width()*E,k=[];for(G=0,F=this._coordinates.length;F>G;G++){I=this._coordinates[G-1]||0,H=Math.abs(this._coordinates[G])+o*E,(this.op(I,"<=",n)&&this.op(I,">",m)||this.op(H,"<",n)&&this.op(H,">",m))&&k.push(G)}this.$stage.children("."+this.settings.activeClass).removeClass(this.settings.activeClass),this.$stage.children(":eq("+k.join("), :eq(")+")").addClass(this.settings.activeClass),this.settings.center&&(this.$stage.children("."+this.settings.centerClass).removeClass(this.settings.centerClass),this.$stage.children().eq(this.current()).addClass(this.settings.centerClass))}}],z.prototype.initialize=function(){if(this.trigger("initialize"),this.$element.addClass(this.settings.baseClass).addClass(this.settings.themeClass).toggleClass("owl-rtl",this.settings.rtl),this.browserSupport(),this.settings.autoWidth&&this.state.imagesLoaded!==!0){var a,f,d;if(a=this.$element.find("img"),f=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:A,d=this.$element.children(f).width(),a.length&&0>=d){return this.preloadAutoWidthImages(a),!1}}this.$element.addClass("owl-loading"),this.$stage=D("<"+this.settings.stageElement+' class="owl-stage"/>').wrap('<div class="owl-stage-outer">'),this.$element.append(this.$stage.parent()),this.replace(this.$element.children().not(this.$stage.parent())),this._width=this.$element.width(),this.refresh(),this.$element.removeClass("owl-loading").addClass("owl-loaded"),this.eventsCall(),this.internalEvents(),this.addTriggerableEvents(),this.trigger("initialized")},z.prototype.setup=function(){var a=this.viewport(),h=this.options.responsive,g=-1,f=null;h?(D.each(h,function(b){a>=b&&b>g&&(g=Number(b))}),f=D.extend({},this.options,h[g]),delete f.responsive,f.responsiveClass&&this.$element.attr("class",function(d,c){return c.replace(/\b owl-responsive-\S+/g,"")}).addClass("owl-responsive-"+g)):f=D.extend({},this.options),(null===this.settings||this._breakpoint!==g)&&(this.trigger("change",{property:{name:"settings",value:f}}),this._breakpoint=g,this.settings=f,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}}))},z.prototype.optionsLogic=function(){this.$element.toggleClass("owl-center",this.settings.center),this.settings.loop&&this._items.length<this.settings.items&&(this.settings.loop=!1),this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},z.prototype.prepare=function(a){var d=this.trigger("prepare",{content:a});return d.data||(d.data=D("<"+this.settings.itemElement+"/>").addClass(this.settings.itemClass).append(a)),this.trigger("prepared",{content:d.data}),d.data},z.prototype.update=function(){for(var a=0,h=this._pipe.length,g=D.proxy(function(b){return this[b]},this._invalidated),f={};h>a;){(this._invalidated.all||D.grep(this._pipe[a].filter,g).length>0)&&this._pipe[a].run(f),a++}this._invalidated={}},z.prototype.width=function(b){switch(b=b||z.Width.Default){case z.Width.Inner:case z.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},z.prototype.refresh=function(){if(0===this._items.length){return !1}(new Date).getTime();this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$stage.addClass("owl-refresh"),this.update(),this.$stage.removeClass("owl-refresh"),this.state.orientation=C.orientation,this.watchVisibility(),this.trigger("refreshed")},z.prototype.eventsCall=function(){this.e._onDragStart=D.proxy(function(b){this.onDragStart(b)},this),this.e._onDragMove=D.proxy(function(b){this.onDragMove(b)},this),this.e._onDragEnd=D.proxy(function(b){this.onDragEnd(b)},this),this.e._onResize=D.proxy(function(b){this.onResize(b)},this),this.e._transitionEnd=D.proxy(function(b){this.transitionEnd(b)},this),this.e._preventClick=D.proxy(function(b){this.preventClick(b)},this)},z.prototype.onThrottledResize=function(){C.clearTimeout(this.resizeTimer),this.resizeTimer=C.setTimeout(this.e._onResize,this.settings.responsiveRefreshRate)},z.prototype.onResize=function(){return this._items.length?this._width===this.$element.width()?!1:this.trigger("resize").isDefaultPrevented()?!1:(this._width=this.$element.width(),this.invalidate("width"),this.refresh(),void this.trigger("resized")):!1},z.prototype.eventsRouter=function(d){var c=d.type;"mousedown"===c||"touchstart"===c?this.onDragStart(d):"mousemove"===c||"touchmove"===c?this.onDragMove(d):"mouseup"===c||"touchend"===c?this.onDragEnd(d):"touchcancel"===c&&this.onDragEnd(d)},z.prototype.internalEvents=function(){var a=(t(),s());this.settings.mouseDrag?(this.$stage.on("mousedown",D.proxy(function(b){this.eventsRouter(b)},this)),this.$stage.on("dragstart",function(){return !1}),this.$stage.get(0).onselectstart=function(){return !1}):this.$element.addClass("owl-text-select-on"),this.settings.touchDrag&&!a&&this.$stage.on("touchstart touchcancel",D.proxy(function(b){this.eventsRouter(b)},this)),this.transitionEndVendor&&this.on(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd,!1),this.settings.responsive!==!1&&this.on(C,"resize",D.proxy(this.onThrottledResize,this))},z.prototype.onDragStart=function(k){var f,c,b,a;if(f=k.originalEvent||k||C.event,3===f.which||this.state.isTouch){return !1}if("mousedown"===f.type&&this.$stage.addClass("owl-grab"),this.trigger("drag"),this.drag.startTime=(new Date).getTime(),this.speed(0),this.state.isTouch=!0,this.state.isScrolling=!1,this.state.isSwiping=!1,this.drag.distance=0,c=y(f).x,b=y(f).y,this.drag.offsetX=this.$stage.position().left,this.drag.offsetY=this.$stage.position().top,this.settings.rtl&&(this.drag.offsetX=this.$stage.position().left+this.$stage.width()-this.width()+this.settings.margin),this.state.inMotion&&this.support3d){a=this.getTransformProperty(),this.drag.offsetX=a,this.animate(a),this.state.inMotion=!0}else{if(this.state.inMotion&&!this.support3d){return this.state.inMotion=!1,!1}}this.drag.startX=c-this.drag.offsetX,this.drag.startY=b-this.drag.offsetY,this.drag.start=c-this.drag.startX,this.drag.targetEl=f.target||f.srcElement,this.drag.updatedX=this.drag.start,("IMG"===this.drag.targetEl.tagName||"A"===this.drag.targetEl.tagName)&&(this.drag.targetEl.draggable=!1),D(B).on("mousemove.owl.dragEvents mouseup.owl.dragEvents touchmove.owl.dragEvents touchend.owl.dragEvents",D.proxy(function(d){this.eventsRouter(d)},this))},z.prototype.onDragMove=function(b){var o,n,m,k,f,d;this.state.isTouch&&(this.state.isScrolling||(o=b.originalEvent||b||C.event,n=y(o).x,m=y(o).y,this.drag.currentX=n-this.drag.startX,this.drag.currentY=m-this.drag.startY,this.drag.distance=this.drag.currentX-this.drag.offsetX,this.drag.distance<0?this.state.direction=this.settings.rtl?"right":"left":this.drag.distance>0&&(this.state.direction=this.settings.rtl?"left":"right"),this.settings.loop?this.op(this.drag.currentX,">",this.coordinates(this.minimum()))&&"right"===this.state.direction?this.drag.currentX-=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length):this.op(this.drag.currentX,"<",this.coordinates(this.maximum()))&&"left"===this.state.direction&&(this.drag.currentX+=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length)):(k=this.coordinates(this.settings.rtl?this.maximum():this.minimum()),f=this.coordinates(this.settings.rtl?this.minimum():this.maximum()),d=this.settings.pullDrag?this.drag.distance/5:0,this.drag.currentX=Math.max(Math.min(this.drag.currentX,k+d),f+d)),(this.drag.distance>8||this.drag.distance<-8)&&(o.preventDefault!==A?o.preventDefault():o.returnValue=!1,this.state.isSwiping=!0),this.drag.updatedX=this.drag.currentX,(this.drag.currentY>16||this.drag.currentY<-16)&&this.state.isSwiping===!1&&(this.state.isScrolling=!0,this.drag.updatedX=this.drag.start),this.animate(this.drag.updatedX)))},z.prototype.onDragEnd=function(a){var h,g,c;if(this.state.isTouch){if("mouseup"===a.type&&this.$stage.removeClass("owl-grab"),this.trigger("dragged"),this.drag.targetEl.removeAttribute("draggable"),this.state.isTouch=!1,this.state.isScrolling=!1,this.state.isSwiping=!1,0===this.drag.distance&&this.state.inMotion!==!0){return this.state.inMotion=!1,!1}this.drag.endTime=(new Date).getTime(),h=this.drag.endTime-this.drag.startTime,g=Math.abs(this.drag.distance),(g>3||h>300)&&this.removeClick(this.drag.targetEl),c=this.closest(this.drag.updatedX),this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(c),this.invalidate("position"),this.update(),this.settings.pullDrag||this.drag.updatedX!==this.coordinates(c)||this.transitionEnd(),this.drag.distance=0,D(B).off(".owl.dragEvents")}},z.prototype.removeClick=function(a){this.drag.targetEl=a,D(a).on("click.preventClick",this.e._preventClick),C.setTimeout(function(){D(a).off("click.preventClick")},300)},z.prototype.preventClick=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation&&a.stopPropagation(),D(a.target).off("click.preventClick")},z.prototype.getTransformProperty=function(){var b,d;return b=C.getComputedStyle(this.$stage.get(0),null).getPropertyValue(this.vendorName+"transform"),b=b.replace(/matrix(3d)?\(|\)/g,"").split(","),d=16===b.length,d!==!0?b[4]:b[12]},z.prototype.closest=function(a){var m=-1,k=30,h=this.width(),g=this.coordinates();return this.settings.freeDrag||D.each(g,D.proxy(function(b,c){return a>c-k&&c+k>a?m=b:this.op(a,"<",c)&&this.op(a,">",g[b+1]||c-h)&&(m="left"===this.state.direction?b+1:b),-1===m},this)),this.settings.loop||(this.op(a,">",g[this.minimum()])?m=a=this.minimum():this.op(a,"<",g[this.maximum()])&&(m=a=this.maximum())),m},z.prototype.animate=function(a){this.trigger("translate"),this.state.inMotion=this.speed()>0,this.support3d?this.$stage.css({transform:"translate3d("+a+"px,0px, 0px)",transition:this.speed()/1000+"s"}):this.state.isTouch?this.$stage.css({left:a+"px"}):this.$stage.animate({left:a},this.speed()/1000,this.settings.fallbackEasing,D.proxy(function(){this.state.inMotion&&this.transitionEnd()},this))},z.prototype.current=function(d){if(d===A){return this._current}if(0===this._items.length){return A}if(d=this.normalize(d),this._current!==d){var c=this.trigger("change",{property:{name:"position",value:d}});c.data!==A&&(d=this.normalize(c.data)),this._current=d,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},z.prototype.invalidate=function(b){this._invalidated[b]=!0},z.prototype.reset=function(b){b=this.normalize(b),b!==A&&(this._speed=0,this._current=b,this.suppress(["translate","translated"]),this.animate(this.coordinates(b)),this.release(["translate","translated"]))},z.prototype.normalize=function(a,f){var d=f?this._items.length:this._items.length+this._clones.length;return !D.isNumeric(a)||1>d?A:a=this._clones.length?(a%d+d)%d:Math.max(this.minimum(f),Math.min(this.maximum(f),a))},z.prototype.relative=function(b){return b=this.normalize(b),b-=this._clones.length/2,this.normalize(b,!0)},z.prototype.maximum=function(h){var g,o,n,m=0,k=this.settings;if(h){return this._items.length-1}if(!k.loop&&k.center){g=this._items.length-1}else{if(k.loop||k.center){if(k.loop||k.center){g=this._items.length+k.items}else{if(!k.autoWidth&&!k.merge){throw"Can not detect maximum absolute position."}for(revert=k.rtl?1:-1,o=this.$stage.width()-this.$element.width();(n=this.coordinates(m))&&!(n*revert>=o);){g=++m}}}else{g=this._items.length-k.items}}return g},z.prototype.minimum=function(b){return b?0:this._clones.length/2},z.prototype.items=function(b){return b===A?this._items.slice():(b=this.normalize(b,!0),this._items[b])},z.prototype.mergers=function(b){return b===A?this._mergers.slice():(b=this.normalize(b,!0),this._mergers[b])},z.prototype.clones=function(a){var h=this._clones.length/2,g=h+this._items.length,d=function(b){return b%2===0?g+b/2:h-(b+1)/2};return a===A?D.map(this._clones,function(f,c){return d(c)}):D.map(this._clones,function(b,f){return b===a?d(f):null})},z.prototype.speed=function(b){return b!==A&&(this._speed=b),this._speed},z.prototype.coordinates=function(a){var d=null;return a===A?D.map(this._coordinates,D.proxy(function(f,c){return this.coordinates(c)},this)):(this.settings.center?(d=this._coordinates[a],d+=(this.width()-d+(this._coordinates[a-1]||0))/2*(this.settings.rtl?-1:1)):d=this._coordinates[a-1]||0,d)},z.prototype.duration=function(f,d,g){return Math.min(Math.max(Math.abs(d-f),1),6)*Math.abs(g||this.settings.smartSpeed)},z.prototype.to=function(F,E){if(this.settings.loop){var o=F-this.relative(this.current()),n=this.current(),m=this.current(),k=this.current()+o,b=0>m-k?!0:!1,a=this._clones.length+this._items.length;k<this.settings.items&&b===!1?(n=m+this._items.length,this.reset(n)):k>=a-this.settings.items&&b===!0&&(n=m-this._items.length,this.reset(n)),C.clearTimeout(this.e._goToLoop),this.e._goToLoop=C.setTimeout(D.proxy(function(){this.speed(this.duration(this.current(),n+o,E)),this.current(n+o),this.update()},this),30)}else{this.speed(this.duration(this.current(),F,E)),this.current(F),this.update()}},z.prototype.next=function(b){b=b||!1,this.to(this.relative(this.current())+1,b)},z.prototype.prev=function(b){b=b||!1,this.to(this.relative(this.current())-1,b)},z.prototype.transitionEnd=function(b){return b!==A&&(b.stopPropagation(),(b.target||b.srcElement||b.originalTarget)!==this.$stage.get(0))?!1:(this.state.inMotion=!1,void this.trigger("translated"))},z.prototype.viewport=function(){var a;if(this.options.responsiveBaseElement!==C){a=D(this.options.responsiveBaseElement).width()}else{if(C.innerWidth){a=C.innerWidth}else{if(!B.documentElement||!B.documentElement.clientWidth){throw"Can not detect viewport width."}a=B.documentElement.clientWidth}}return a},z.prototype.replace=function(a){this.$stage.empty(),this._items=[],a&&(a=a instanceof jQuery?a:D(a)),this.settings.nestedItemSelector&&(a=a.find("."+this.settings.nestedItemSelector)),a.filter(function(){return 1===this.nodeType}).each(D.proxy(function(d,c){c=this.prepare(c),this.$stage.append(c),this._items.push(c),this._mergers.push(1*c.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)},this)),this.reset(D.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},z.prototype.add=function(d,c){c=c===A?this._items.length:this.normalize(c,!0),this.trigger("add",{content:d,position:c}),0===this._items.length||c===this._items.length?(this.$stage.append(d),this._items.push(d),this._mergers.push(1*d.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)):(this._items[c].before(d),this._items.splice(c,0,d),this._mergers.splice(c,0,1*d.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)),this.invalidate("items"),this.trigger("added",{content:d,position:c})},z.prototype.remove=function(b){b=this.normalize(b,!0),b!==A&&(this.trigger("remove",{content:this._items[b],position:b}),this._items[b].remove(),this._items.splice(b,1),this._mergers.splice(b,1),this.invalidate("items"),this.trigger("removed",{content:null,position:b}))},z.prototype.addTriggerableEvents=function(){var a=D.proxy(function(d,f){return D.proxy(function(b){b.relatedTarget!==this&&(this.suppress([f]),d.apply(this,[].slice.call(arguments,1)),this.release([f]))},this)},this);D.each({next:this.next,prev:this.prev,to:this.to,destroy:this.destroy,refresh:this.refresh,replace:this.replace,add:this.add,remove:this.remove},D.proxy(function(b,d){this.$element.on(b+".owl.carousel",a(d,b+".owl.carousel"))},this))},z.prototype.watchVisibility=function(){function b(c){return c.offsetWidth>0&&c.offsetHeight>0}function a(){b(this.$element.get(0))&&(this.$element.removeClass("owl-hidden"),this.refresh(),C.clearInterval(this.e._checkVisibile))}b(this.$element.get(0))||(this.$element.addClass("owl-hidden"),C.clearInterval(this.e._checkVisibile),this.e._checkVisibile=C.setInterval(D.proxy(a,this),500))},z.prototype.preloadAutoWidthImages=function(a){var m,k,h,g;m=0,k=this,a.each(function(c,b){h=D(b),g=new Image,g.onload=function(){m++,h.attr("src",g.src),h.css("opacity",1),m>=a.length&&(k.state.imagesLoaded=!0,k.initialize())},g.src=h.attr("src")||h.attr("data-src")||h.attr("data-src-retina")})},z.prototype.destroy=function(){this.$element.hasClass(this.settings.themeClass)&&this.$element.removeClass(this.settings.themeClass),this.settings.responsive!==!1&&D(C).off("resize.owl.carousel"),this.transitionEndVendor&&this.off(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd);for(var a in this._plugins){this._plugins[a].destroy()}(this.settings.mouseDrag||this.settings.touchDrag)&&(this.$stage.off("mousedown touchstart touchcancel"),D(B).off(".owl.dragEvents"),this.$stage.get(0).onselectstart=function(){},this.$stage.off("dragstart",function(){return !1})),this.$element.off(".owl"),this.$stage.children(".cloned").remove(),this.e=null,this.$element.removeData("owlCarousel"),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.unwrap()},z.prototype.op=function(g,f,k){var h=this.settings.rtl;switch(f){case"<":return h?g>k:k>g;case">":return h?k>g:g>k;case">=":return h?k>=g:g>=k;case"<=":return h?g>=k:k>=g}},z.prototype.on=function(g,f,k,h){g.addEventListener?g.addEventListener(f,k,h):g.attachEvent&&g.attachEvent("on"+f,k)},z.prototype.off=function(g,f,k,h){g.removeEventListener?g.removeEventListener(f,k,h):g.detachEvent&&g.detachEvent("on"+f,k)},z.prototype.trigger=function(a,o,n){var m={item:{count:this._items.length,index:this.current()}},k=D.camelCase(D.grep(["on",a,n],function(b){return b}).join("-").toLowerCase()),h=D.Event([a,"owl",n||"carousel"].join(".").toLowerCase(),D.extend({relatedTarget:this},m,o));return this._supress[a]||(D.each(this._plugins,function(d,c){c.onTrigger&&c.onTrigger(h)}),this.$element.trigger(h),this.settings&&"function"==typeof this.settings[k]&&this.settings[k].apply(this,h)),h},z.prototype.suppress=function(a){D.each(a,D.proxy(function(d,c){this._supress[c]=!0},this))},z.prototype.release=function(a){D.each(a,D.proxy(function(d,c){delete this._supress[c]},this))},z.prototype.browserSupport=function(){if(this.support3d=u(),this.support3d){this.transformVendor=v();var b=["transitionend","webkitTransitionEnd","transitionend","oTransitionEnd"];this.transitionEndVendor=b[w()],this.vendorName=this.transformVendor.replace(/Transform/i,""),this.vendorName=""!==this.vendorName?"-"+this.vendorName.toLowerCase()+"-":""}this.state.orientation=C.orientation},D.fn.owlCarousel=function(a){return this.each(function(){D(this).data("owlCarousel")||D(this).data("owlCarousel",new z(this,a))})},D.fn.owlCarousel.Constructor=z}(window.Zepto||window.jQuery,window,document),function(f,d){var g=function(a){this._core=a,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel":f.proxy(function(k){if(k.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(k.property&&"position"==k.property.name||"initialized"==k.type)){for(var r=this._core.settings,q=r.center&&Math.ceil(r.items/2)||r.items,p=r.center&&-1*q||0,o=(k.property&&k.property.value||this._core.current())+p,n=this._core.clones().length,m=f.proxy(function(h,c){this.load(c)},this);p++<q;){this.load(n/2+this._core.relative(o)),n&&f.each(this._core.clones(this._core.relative(o++)),m)}}},this)},this._core.options=f.extend({},g.Defaults,this._core.options),this._core.$element.on(this._handlers)};g.Defaults={lazyLoad:!1},g.prototype.load=function(h){var b=this._core.$stage.children().eq(h),a=b&&b.find(".owl-lazy");!a||f.inArray(b.get(0),this._loaded)>-1||(a.each(f.proxy(function(p,o){var n,m=f(o),k=d.devicePixelRatio>1&&m.attr("data-src-retina")||m.attr("data-src");this._core.trigger("load",{element:m,url:k},"lazy"),m.is("img")?m.one("load.owl.lazy",f.proxy(function(){m.css("opacity",1),this._core.trigger("loaded",{element:m,url:k},"lazy")},this)).attr("src",k):(n=new Image,n.onload=f.proxy(function(){m.css({"background-image":"url("+k+")",opacity:"1"}),this._core.trigger("loaded",{element:m,url:k},"lazy")},this),n.src=k)},this)),this._loaded.push(b.get(0)))},g.prototype.destroy=function(){var h,c;for(h in this.handlers){this._core.$element.off(h,this.handlers[h])}for(c in Object.getOwnPropertyNames(this)){"function"!=typeof this[c]&&(this[c]=null)}},f.fn.owlCarousel.Constructor.Plugins.Lazy=g}(window.Zepto||window.jQuery,window,document),function(d){var c=function(a){this._core=a,this._handlers={"initialized.owl.carousel":d.proxy(function(){this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":d.proxy(function(b){this._core.settings.autoHeight&&"position"==b.property.name&&this.update()},this),"loaded.owl.lazy":d.proxy(function(b){this._core.settings.autoHeight&&b.element.closest("."+this._core.settings.itemClass)===this._core.$stage.children().eq(this._core.current())&&this.update()},this)},this._core.options=d.extend({},c.Defaults,this._core.options),this._core.$element.on(this._handlers)};c.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},c.prototype.update=function(){this._core.$stage.parent().height(this._core.$stage.children().eq(this._core.current()).height()).addClass(this._core.settings.autoHeightClass)},c.prototype.destroy=function(){var g,f;for(g in this._handlers){this._core.$element.off(g,this._handlers[g])}for(f in Object.getOwnPropertyNames(this)){"function"!=typeof this[f]&&(this[f]=null)}},d.fn.owlCarousel.Constructor.Plugins.AutoHeight=c}(window.Zepto||window.jQuery,window,document),function(g,f,k){var h=function(a){this._core=a,this._videos={},this._playing=null,this._fullscreen=!1,this._handlers={"resize.owl.carousel":g.proxy(function(b){this._core.settings.video&&!this.isInFullScreen()&&b.preventDefault()},this),"refresh.owl.carousel changed.owl.carousel":g.proxy(function(){this._playing&&this.stop()},this),"prepared.owl.carousel":g.proxy(function(d){var m=g(d.content).find(".owl-video");m.length&&(m.css("display","none"),this.fetch(m,g(d.content)))},this)},this._core.options=g.extend({},h.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",g.proxy(function(b){this.play(b)},this))};h.Defaults={video:!1,videoHeight:!1,videoWidth:!1},h.prototype.fetch=function(n,m){var s=n.attr("data-vimeo-id")?"vimeo":"youtube",r=n.attr("data-vimeo-id")||n.attr("data-youtube-id"),q=n.attr("data-width")||this._core.settings.videoWidth,p=n.attr("data-height")||this._core.settings.videoHeight,o=n.attr("href");if(!o){throw new Error("Missing video URL.")}if(r=o.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),r[3].indexOf("youtu")>-1){s="youtube"}else{if(!(r[3].indexOf("vimeo")>-1)){throw new Error("Video URL not supported.")}s="vimeo"}r=r[6],this._videos[o]={type:s,id:r,width:q,height:p},m.attr("data-video",o),this.thumbnail(n,this._videos[o])},h.prototype.thumbnail=function(v,u){var t,s,r,q=u.width&&u.height?'style="width:'+u.width+"px;height:"+u.height+'px;"':"",p=v.find("img"),o="src",n="",m=this._core.settings,a=function(b){s='<div class="owl-video-play-icon"></div>',t=m.lazyLoad?'<div class="owl-video-tn '+n+'" '+o+'="'+b+'"></div>':'<div class="owl-video-tn" style="opacity:1;background-image:url('+b+')"></div>',v.after(t),v.after(s)};return v.wrap('<div class="owl-video-wrapper"'+q+"></div>"),this._core.settings.lazyLoad&&(o="data-src",n="owl-lazy"),p.length?(a(p.attr(o)),p.remove(),!1):void ("youtube"===u.type?(r="http://img.youtube.com/vi/"+u.id+"/hqdefault.jpg",a(r)):"vimeo"===u.type&&g.ajax({type:"GET",url:"http://vimeo.com/api/v2/video/"+u.id+".json",jsonp:"callback",dataType:"jsonp",success:function(b){r=b[0].thumbnail_large,a(r)}}))},h.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null},h.prototype.play=function(a){this._core.trigger("play",null,"video"),this._playing&&this.stop();var s,r,q=g(a.target||a.srcElement),p=q.closest("."+this._core.settings.itemClass),o=this._videos[p.attr("data-video")],n=o.width||"100%",m=o.height||this._core.$stage.height();"youtube"===o.type?s='<iframe width="'+n+'" height="'+m+'" src="http://www.youtube.com/embed/'+o.id+"?autoplay=1&v="+o.id+'" frameborder="0" allowfullscreen></iframe>':"vimeo"===o.type&&(s='<iframe src="http://player.vimeo.com/video/'+o.id+'?autoplay=1" width="'+n+'" height="'+m+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),p.addClass("owl-video-playing"),this._playing=p,r=g('<div style="height:'+m+"px; width:"+n+'px" class="owl-video-frame">'+s+"</div>"),q.after(r)},h.prototype.isInFullScreen=function(){var a=k.fullscreenElement||k.mozFullScreenElement||k.webkitFullscreenElement;return a&&g(a).parent().hasClass("owl-video-frame")&&(this._core.speed(0),this._fullscreen=!0),a&&this._fullscreen&&this._playing?!1:this._fullscreen?(this._fullscreen=!1,!1):this._playing&&this._core.state.orientation!==f.orientation?(this._core.state.orientation=f.orientation,!1):!0},h.prototype.destroy=function(){var d,c;this._core.$element.off("click.owl.video");for(d in this._handlers){this._core.$element.off(d,this._handlers[d])}for(c in Object.getOwnPropertyNames(this)){"function"!=typeof this[c]&&(this[c]=null)}},g.fn.owlCarousel.Constructor.Plugins.Video=h}(window.Zepto||window.jQuery,window,document),function(g,f,m,k){var h=function(a){this.core=a,this.core.options=g.extend({},h.Defaults,this.core.options),this.swapping=!0,this.previous=k,this.next=k,this.handlers={"change.owl.carousel":g.proxy(function(b){"position"==b.property.name&&(this.previous=this.core.current(),this.next=b.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":g.proxy(function(b){this.swapping="translated"==b.type},this),"translate.owl.carousel":g.proxy(function(){this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};h.Defaults={animateOut:!1,animateIn:!1},h.prototype.swap=function(){if(1===this.core.settings.items&&this.core.support3d){this.core.speed(0);var a,r=g.proxy(this.clear,this),q=this.core.$stage.children().eq(this.previous),p=this.core.$stage.children().eq(this.next),o=this.core.settings.animateIn,n=this.core.settings.animateOut;this.core.current()!==this.previous&&(n&&(a=this.core.coordinates(this.previous)-this.core.coordinates(this.next),q.css({left:a+"px"}).addClass("animated owl-animated-out").addClass(n).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",r)),o&&p.addClass("animated owl-animated-in").addClass(o).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",r))}},h.prototype.clear=function(a){g(a.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.transitionEnd()},h.prototype.destroy=function(){var d,c;for(d in this.handlers){this.core.$element.off(d,this.handlers[d])}for(c in Object.getOwnPropertyNames(this)){"function"!=typeof this[c]&&(this[c]=null)}},g.fn.owlCarousel.Constructor.Plugins.Animate=h}(window.Zepto||window.jQuery,window,document),function(g,f,k){var h=function(a){this.core=a,this.core.options=g.extend({},h.Defaults,this.core.options),this.handlers={"translated.owl.carousel refreshed.owl.carousel":g.proxy(function(){this.autoplay()},this),"play.owl.autoplay":g.proxy(function(m,d,n){this.play(d,n)},this),"stop.owl.autoplay":g.proxy(function(){this.stop()},this),"mouseover.owl.autoplay":g.proxy(function(){this.core.settings.autoplayHoverPause&&this.pause()},this),"mouseleave.owl.autoplay":g.proxy(function(){this.core.settings.autoplayHoverPause&&this.autoplay()},this)},this.core.$element.on(this.handlers)};h.Defaults={autoplay:!1,autoplayTimeout:5000,autoplayHoverPause:!1,autoplaySpeed:!1},h.prototype.autoplay=function(){this.core.settings.autoplay&&!this.core.state.videoPlay?(f.clearInterval(this.interval),this.interval=f.setInterval(g.proxy(function(){this.play()},this),this.core.settings.autoplayTimeout)):f.clearInterval(this.interval)},h.prototype.play=function(){return k.hidden===!0||this.core.state.isTouch||this.core.state.isScrolling||this.core.state.isSwiping||this.core.state.inMotion?void 0:this.core.settings.autoplay===!1?void f.clearInterval(this.interval):void this.core.next(this.core.settings.autoplaySpeed)},h.prototype.stop=function(){f.clearInterval(this.interval)},h.prototype.pause=function(){f.clearInterval(this.interval)},h.prototype.destroy=function(){var b,d;f.clearInterval(this.interval);for(b in this.handlers){this.core.$element.off(b,this.handlers[b])}for(d in Object.getOwnPropertyNames(this)){"function"!=typeof this[d]&&(this[d]=null)}},g.fn.owlCarousel.Constructor.Plugins.autoplay=h}(window.Zepto||window.jQuery,window,document),function(d){var c=function(a){this._core=a,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":d.proxy(function(f){this._core.settings.dotsData&&this._templates.push(d(f.content).find("[data-dot]").andSelf("[data-dot]").attr("data-dot"))},this),"add.owl.carousel":d.proxy(function(f){this._core.settings.dotsData&&this._templates.splice(f.position,0,d(f.content).find("[data-dot]").andSelf("[data-dot]").attr("data-dot"))},this),"remove.owl.carousel prepared.owl.carousel":d.proxy(function(b){this._core.settings.dotsData&&this._templates.splice(b.position,1)},this),"change.owl.carousel":d.proxy(function(g){if("position"==g.property.name&&!this._core.state.revert&&!this._core.settings.loop&&this._core.settings.navRewind){var f=this._core.current(),k=this._core.maximum(),h=this._core.minimum();g.data=g.property.value>k?f>=k?h:k:g.property.value<h?k:g.property.value}},this),"changed.owl.carousel":d.proxy(function(b){"position"==b.property.name&&this.draw()},this),"refreshed.owl.carousel":d.proxy(function(){this._initialized||(this.initialize(),this._initialized=!0),this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation")},this)},this._core.options=d.extend({},c.Defaults,this._core.options),this.$element.on(this._handlers)};c.Defaults={nav:!0,navRewind:!0,navText:["prev","next"],navSpeed:!1,navElement:"div",navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotData:!1,dotsSpeed:!1,dotsContainer:!1,controlsClass:"owl-controls"},c.prototype.initialize=function(){var a,g,f=this._core.settings;f.dotsData||(this._templates=[d("<div>").addClass(f.dotClass).append(d("<span>")).prop("outerHTML")]),f.navContainer&&f.dotsContainer||(this._controls.$container=d("<div>").addClass(f.controlsClass).appendTo(this.$element)),this._controls.$indicators=f.dotsContainer?d(f.dotsContainer):d("<div>").hide().addClass(f.dotsClass).appendTo(this._controls.$container),this._controls.$indicators.on("click","div",d.proxy(function(h){var k=d(h.target).parent().is(this._controls.$indicators)?d(h.target).index():d(h.target).parent().index();h.preventDefault(),this.to(k,f.dotsSpeed)},this)),a=f.navContainer?d(f.navContainer):d("<div>").addClass(f.navContainerClass).prependTo(this._controls.$container),this._controls.$next=d("<"+f.navElement+">"),this._controls.$previous=this._controls.$next.clone(),this._controls.$previous.addClass(f.navClass[0]).html(f.navText[0]).hide().prependTo(a).on("click",d.proxy(function(){this.prev(f.navSpeed)},this)),this._controls.$next.addClass(f.navClass[1]).html(f.navText[1]).hide().appendTo(a).on("click",d.proxy(function(){this.next(f.navSpeed)},this));for(g in this._overrides){this._core[g]=d.proxy(this[g],this)}},c.prototype.destroy=function(){var g,f,k,h;for(g in this._handlers){this.$element.off(g,this._handlers[g])}for(f in this._controls){this._controls[f].remove()}for(h in this.overides){this._core[h]=this._overrides[h]}for(k in Object.getOwnPropertyNames(this)){"function"!=typeof this[k]&&(this[k]=null)}},c.prototype.update=function(){var k,h,q,p=this._core.settings,o=this._core.clones().length/2,n=o+this._core.items().length,m=p.center||p.autoWidth||p.dotData?1:p.dotsEach||p.items;if("page"!==p.slideBy&&(p.slideBy=Math.min(p.slideBy,p.items)),p.dots||"page"==p.slideBy){for(this._pages=[],k=o,h=0,q=0;n>k;k++){(h>=m||0===h)&&(this._pages.push({start:k-o,end:k-o+m-1}),h=0,++q),h+=this._core.mergers(this._core.relative(k))}}},c.prototype.draw=function(){var a,m,k="",h=this._core.settings,g=(this._core.$stage.children(),this._core.relative(this._core.current()));if(!h.nav||h.loop||h.navRewind||(this._controls.$previous.toggleClass("disabled",0>=g),this._controls.$next.toggleClass("disabled",g>=this._core.maximum())),this._controls.$previous.toggle(h.nav),this._controls.$next.toggle(h.nav),h.dots){if(a=this._pages.length-this._controls.$indicators.children().length,h.dotData&&0!==a){for(m=0;m<this._controls.$indicators.children().length;m++){k+=this._templates[this._core.relative(m)]}this._controls.$indicators.html(k)}else{a>0?(k=new Array(a+1).join(this._templates[0]),this._controls.$indicators.append(k)):0>a&&this._controls.$indicators.children().slice(a).remove()}this._controls.$indicators.find(".active").removeClass("active"),this._controls.$indicators.children().eq(d.inArray(this.current(),this._pages)).addClass("active")}this._controls.$indicators.toggle(h.dots)},c.prototype.onTrigger=function(a){var f=this._core.settings;a.page={index:d.inArray(this.current(),this._pages),count:this._pages.length,size:f&&(f.center||f.autoWidth||f.dotData?1:f.dotsEach||f.items)}},c.prototype.current=function(){var a=this._core.relative(this._core.current());return d.grep(this._pages,function(b){return b.start<=a&&b.end>=a}).pop()},c.prototype.getPosition=function(a){var h,g,f=this._core.settings;return"page"==f.slideBy?(h=d.inArray(this.current(),this._pages),g=this._pages.length,a?++h:--h,h=this._pages[(h%g+g)%g].start):(h=this._core.relative(this._core.current()),g=this._core.items().length,a?h+=f.slideBy:h-=f.slideBy),h},c.prototype.next=function(a){d.proxy(this._overrides.to,this._core)(this.getPosition(!0),a)},c.prototype.prev=function(a){d.proxy(this._overrides.to,this._core)(this.getPosition(!1),a)},c.prototype.to=function(a,h,g){var f;g?d.proxy(this._overrides.to,this._core)(a,h):(f=this._pages.length,d.proxy(this._overrides.to,this._core)(this._pages[(a%f+f)%f].start,h))},d.fn.owlCarousel.Constructor.Plugins.Navigation=c}(window.Zepto||window.jQuery,window,document),function(f,d){var g=function(a){this._core=a,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":f.proxy(function(){"URLHash"==this._core.settings.startPosition&&f(d).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":f.proxy(function(h){var k=f(h.content).find("[data-hash]").andSelf("[data-hash]").attr("data-hash");this._hashes[k]=h.content},this)},this._core.options=f.extend({},g.Defaults,this._core.options),this.$element.on(this._handlers),f(d).on("hashchange.owl.navigation",f.proxy(function(){var b=d.location.hash.substring(1),k=this._core.$stage.children(),h=this._hashes[b]&&k.index(this._hashes[b])||0;return b?void this._core.to(h,!1,!0):!1},this))};g.Defaults={URLhashListener:!1},g.prototype.destroy=function(){var b,a;f(d).off("hashchange.owl.navigation");for(b in this._handlers){this._core.$element.off(b,this._handlers[b])}for(a in Object.getOwnPropertyNames(this)){"function"!=typeof this[a]&&(this[a]=null)}},f.fn.owlCarousel.Constructor.Plugins.Hash=g}(window.Zepto||window.jQuery,window,document);!function(H,B){function q(g,p,v){var h=g.children(),u=!1;g.empty();for(var f=0,s=h.length;s>f;f++){var c=h.eq(f);if(g.append(c),v&&g.append(v),x(g,p)){c.remove(),u=!0;break}v&&v.detach()}return u}function b(p,v,g,r,f){var o=!1,t="a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",h="script, .dotdotdot-keep";return p.contents().detach().each(function(){var c=this,a=H(c);if("undefined"==typeof c){return !0}if(a.is(h)){p.append(a)}else{if(o){return !0}p.append(a),!f||a.is(r.after)||a.find(r.after).length||p[p.is(t)?"after":"append"](f),x(g,r)&&(o=3==c.nodeType?m(a,v,g,r,f):b(a,v,g,r,f),o||(a.detach(),o=!0)),o||f&&f.detach()}}),o}function m(P,u,a,t,Q){var R=P[0];if(!R){return !1}var O=I(R),M=-1!==O.indexOf(" ")?" ":"　",s="letter"==t.wrap?"":M,N=O.split(s),X=-1,W=-1,U=0,S=N.length-1;for(t.fallbackToLetter&&0==U&&0==S&&(s="",N=O.split(s),S=N.length-1);S>=U&&(0!=U||0!=S);){var J=Math.floor((U+S)/2);if(J==W){break}W=J,w(R,N.slice(0,W+1).join(s)+t.ellipsis),x(a,t)?(S=W,t.fallbackToLetter&&0==U&&0==S&&(s="",N=N[0].split(s),X=-1,W=-1,U=0,S=N.length-1)):(X=W,U=W)}if(-1==X||1==N.length&&0==N[0].length){var V=P.parent();P.detach();var K=Q&&Q.closest(V).length?Q.length:0;V.contents().length>K?R=G(V.contents().eq(-1-K),u):(R=G(V,u,!0),K||V.detach()),R&&(O=E(I(R),t),w(R,O),K&&Q&&H(R).parent().append(Q))}else{O=E(N.slice(0,X+1).join(s),t),w(R,O)}return !0}function x(a,c){return a.innerHeight()>c.maxHeight}function E(a,c){for(;H.inArray(a.slice(-1),c.lastCharacter.remove)>-1;){a=a.slice(0,-1)}return H.inArray(a.slice(-1),c.lastCharacter.noEllipsis)<0&&(a+=c.ellipsis),a}function C(a){return{width:a.innerWidth(),height:a.innerHeight()}}function w(a,c){a.innerText?a.innerText=c:a.nodeValue?a.nodeValue=c:a.textContent&&(a.textContent=c)}function I(a){return a.innerText?a.innerText:a.nodeValue?a.nodeValue:a.textContent?a.textContent:""}function D(a){do{a=a.previousSibling}while(a&&1!==a.nodeType&&3!==a.nodeType);return a}function G(d,g,c){var f,a=d&&d[0];if(a){if(!c){if(3===a.nodeType){return a}if(H.trim(d.text())){return G(d.contents().last(),g)}}for(f=D(a);!f;){if(d=d.parent(),d.is(g)||!d.length){return !1}f=D(d[0])}if(f){return G(H(f),g)}}return !1}function A(a,c){return a?"string"==typeof a?(a=H(a,c),a.length?a:!1):a.jquery?a:!1:!1}function y(c){for(var f=c.innerHeight(),h=["paddingTop","paddingBottom"],d=0,g=h.length;g>d;d++){var a=parseInt(c.css(h[d]),10);isNaN(a)&&(a=0),f-=a}return f}if(!H.fn.dotdotdot){H.fn.dotdotdot=function(r){if(0==this.length){return H.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this}if(this.length>1){return this.each(function(){H(this).dotdotdot(r)})}var t=this;t.data("dotdotdot")&&t.trigger("destroy.dot"),t.data("dotdotdot-style",t.attr("style")||""),t.css("word-wrap","break-word"),"nowrap"===t.css("white-space")&&t.css("white-space","normal"),t.bind_events=function(){return t.bind("update.dot",function(g,o){g.preventDefault(),g.stopPropagation(),d.maxHeight="number"==typeof d.height?d.height:y(t),d.maxHeight+=d.tolerance,"undefined"!=typeof o&&(("string"==typeof o||"nodeType" in o&&1===o.nodeType)&&(o=H("<div />").append(o).contents()),o instanceof H&&(f=o)),p=t.wrapInner('<div class="dotdotdot" />').children(),p.contents().detach().end().append(f.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var s=!1,a=!1;return n.afterElement&&(s=n.afterElement.clone(!0),s.show(),n.afterElement.detach()),x(p,d)&&(a="children"==d.wrap?q(p,d,s):b(p,t,p,d,s)),p.replaceWith(p.contents()),p=null,H.isFunction(d.callback)&&d.callback.call(t[0],a,f),n.isTruncated=a,a}).bind("isTruncated.dot",function(a,c){return a.preventDefault(),a.stopPropagation(),"function"==typeof c&&c.call(t[0],n.isTruncated),n.isTruncated}).bind("originalContent.dot",function(a,c){return a.preventDefault(),a.stopPropagation(),"function"==typeof c&&c.call(t[0],f),f}).bind("destroy.dot",function(a){a.preventDefault(),a.stopPropagation(),t.unwatch().unbind_events().contents().detach().end().append(f).attr("style",t.data("dotdotdot-style")||"").data("dotdotdot",!1)}),t},t.unbind_events=function(){return t.unbind(".dot"),t},t.watch=function(){if(t.unwatch(),"window"==d.watch){var c=H(window),g=c.width(),a=c.height();c.bind("resize.dot"+n.dotId,function(){g==c.width()&&a==c.height()&&d.windowResizeFix||(g=c.width(),a=c.height(),h&&clearInterval(h),h=setTimeout(function(){t.trigger("update.dot")},100))})}else{v=C(t),h=setInterval(function(){if(t.is(":visible")){var o=C(t);(v.width!=o.width||v.height!=o.height)&&(t.trigger("update.dot"),v=o)}},500)}return t},t.unwatch=function(){return H(window).unbind("resize.dot"+n.dotId),h&&clearInterval(h),t};var f=t.contents(),d=H.extend(!0,{},H.fn.dotdotdot.defaults,r),n={},v={},h=null,p=null;return d.lastCharacter.remove instanceof Array||(d.lastCharacter.remove=H.fn.dotdotdot.defaultArrays.lastCharacter.remove),d.lastCharacter.noEllipsis instanceof Array||(d.lastCharacter.noEllipsis=H.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),n.afterElement=A(d.after,t),n.isTruncated=!1,n.dotId=k++,t.data("dotdotdot",!0).bind_events().trigger("update.dot"),d.watch&&t.watch(),t},H.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},H.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","　",",",";",".","!","?"],noEllipsis:[]}},H.fn.dotdotdot.debug=function(){};var k=1,z=H.fn.html;H.fn.html=function(a){return a!=B&&!H.isFunction(a)&&this.data("dotdotdot")?this.trigger("update",[a]):z.apply(this,arguments)};var F=H.fn.text;H.fn.text=function(a){return a!=B&&!H.isFunction(a)&&this.data("dotdotdot")?(a=H("<div />").text(a).html(),this.trigger("update",[a])):F.apply(this,arguments)}}}(jQuery);(function(f){f.wxc=function(p,k,h,o,n,m){return a.call(this,p,k,h,o,n,m)};f.wxc.VERSION="2.2.0.5";f.wxc.ENVIRONMENT=document.URL.indexOf("local.itk.wxc.com")>-1?"local":"static";f.wxc.VERSION_ROOT="http://{0}.itk.wxc.com/{1}".replace("{0}",f.wxc.ENVIRONMENT).replace("{1}",f.wxc.VERSION);f.wxc.ICON_ROOT=f.wxc.VERSION_ROOT+"/icons/";f.wxc.TEST_ROOT=f.wxc.VERSION_ROOT+"/test/";f.wxc.CURRENT="current";f.wxc.DAILY="daily";f.wxc.DAILY_TAILOR_1="dailyTailor1";f.wxc.HOURLY="hourly";f.wxc.HOURLY_TAILOR_1="hourlyTailor1";f.wxc.MET="met";f.wxc.NWS_REPORT="nwsReport";f.wxc.HURRICANES="hurricanes";f.wxc.HURRICANES_TEST="hurricanesTest";f.wxc.NWS_REPORT_STATE="nwsReportState";f.wxc.NWS_REPORT_FIPS="nwsReportFips";f.wxc.NWS_REPORT_MERC="nwsReportMerc";f.wxc.ENGLISH="english";f.wxc.METRIC="metric";f.wxc.URLS=[];f.wxc.URLS[f.wxc.CURRENT]="http://elb-01.myweatherapi.com/currents_1/currents_1.svc?lat={lat}&lon={lon}&output=json&iconformat=mywxc0.9&metric=0";f.wxc.URLS[f.wxc.DAILY]="http://cp.wxc.com/tailor2/getForecastJSON.ashx?format=daily&host={host}&lat={lat}&lon={lon}&steps={steps}&metric=0";f.wxc.URLS[f.wxc.DAILY_TAILOR_1]="http://cp.wxc.com/tailor/GetForecastJSON.ashx?ndays={ndays}&lat={lat}&lon={lon}&host={host}&format=nday&metric=0";f.wxc.URLS[f.wxc.HOURLY]="http://cp.wxc.com/tailor2/getForecastJSON.ashx?format=hourly&host={host}&lat={lat}&lon={lon}&steps={steps}&metric=0";f.wxc.URLS[f.wxc.HOURLY_TAILOR_1]="http://cp.wxc.com/tailor/GetForecastJSON.ashx?lat={lat}&lon={lon}&format=xhour&host={host}&nhours={nhours}&metric=0";f.wxc.URLS[f.wxc.MET]="http://cp.wxc.com/parameterservice?format=jsonp&host={host}&metric=0";f.wxc.URLS[f.wxc.NWS_REPORT]="http://elb-01.myweatherapi.com/alertsProxy/json/?vs=1.0&passkey=myweather_dev&datatype=alertsbeta&type=point&var=summary&lat={lat}&lon={lon}&time=now&format=alerts";f.wxc.URLS[f.wxc.NWS_REPORT_STATE]="http://servicebus.myweather.com/alerts_1/alertsjson/state/{state}?verbose={verbose}&metric=0";f.wxc.URLS[f.wxc.NWS_REPORT_FIPS]="http://servicebus.myweather.com/alerts_1/alertsjson/fips/{fips}?verbose={verbose}&metric=0";f.wxc.URLS[f.wxc.NWS_REPORT_MERC]="http://servicebus.myweather.com/alerts_1/alertsjson/legacy/?latLower={latLower}&latUpper={latUpper}&lonCenter={lonCenter}&width={width}&height={height}&verbose={verbose}&metric=0";f.wxc.URLS[f.wxc.HURRICANES]="http://mediaprod.wxc.com/com.wxc/servlets/GetTropicalStormSituation?format=jsonp";f.wxc.URLS[f.wxc.HURRICANES_TEST]=f.wxc.URLS[f.wxc.HURRICANES]+"&storm=AL1205,AL0112&forcecurrent=true";f.wxc.URLS.easyXDM_name="/easyXDM/name.html";f.wxc.URLS.easyXDM_swf="/easyXDM/easyxdm.swf";f.wxc.URLS.bingImageryAttribution="{0}/map/bing/bingImageryAttribution.html".replace("{0}",f.wxc.VERSION_ROOT);f.wxc.URLS.bingLogo="{0}/map/bing/logo.png".replace("{0}",f.wxc.VERSION_ROOT);var g={host:"itk",passkey:"",systemOfMeasure:f.wxc.ENGLISH};var d="{0}_wxc_locations";var b=null;var c=[];function a(p,k,h,o,n,m){if((typeof p==="object")||(!p)){f.wxc.DEFAULTS=f.extend(g,p||{});d=d.wxcFormat(g.host);return this}else{if(this._methods[p]){return this._methods[p].call(this,k,h,o,n,m)}else{f.error("Method "+p+" does not exist on jQuery.wxc")}}}f.wxc.getUrl=function(h){return(f.wxc.getSystemOfMeasure()==f.wxc.ENGLISH)?f.wxc.getEnglishUrl(h):f.wxc.getMetricUrl(h)};f.wxc.getEnglishUrl=function(h){return f.wxc.URLS[h]};f.wxc.getMetricUrl=function(k){var h=f.wxc.getEnglishUrl(k);h=h.wxcReplace("metric=0","metric=1");h=h.wxcReplace("metric=false","metric=true");return h};f.wxc.setSystemOfMeasure=function(h){g.systemOfMeasure=h;return this};f.wxc.getSystemOfMeasure=function(){return g.systemOfMeasure};f.wxc.data=function(k){var h=function(n){var m=f.wxc.getRawDataUrl(n.dataVar,n.dataParams);if((n)&&(n.dataParams)){f.each(n.dataParams,function(o,p){m=m.wxcReplace("{"+o+"}",p)});m=m.wxcReplace("{host}",g.host);if(g.passkey){m=m.wxcReplace("{passkey}",g.passkey)}}return m}(k);f.ajax({url:h,dataType:"jsonp",success:function(m){k.successCallback(f.wxc.fixJson(m))},error:k.errorCallback});return this};f.wxc.getRawDataUrl=function(k,h){if(k.wxcContains(f.wxc.NWS_REPORT)){if(h.state){k=f.wxc.NWS_REPORT_STATE}if(h.fips){k=f.wxc.NWS_REPORT_FIPS}if(h.lonCenter){k=f.wxc.NWS_REPORT_MERC}h.verbose=((h.verbose===true)||(h.verbose===1))?1:0}return f.wxc.getUrl(k)};f.wxc.fixJson=function(k){function h(s,r,p){for(var q in s){if(s.hasOwnProperty(q)){var n=q;if(q.wxcContains(r)){n=q.wxcReplace(r,p);s[n]=s[q];delete s[q]}if(Object.prototype.toString.call(s[n])==="[object Object]"){s[n]=h(s[n],r,p)}}}return s}var m=h(k,"-","");return m};f.wxc.template=function(o){o.dataParams=o.dataParams||{};var k=!!((o.dataParams.lat)&&(o.dataParams.lon));o.isWxcListener=o.isWxcListener==null?false:o.isWxcListener;var p=(o.dataVar==f.wxc.MET);function n(r){if(!r){return}function q(t){return t.replace(/\r\n|\r|\n/g,"<br/>")}if(f.wxc.isObject(r)||f.wxc.isArray(r)){f.each(r,function(s,t){if(f.wxc.isString(t)){r[s]=q(t)}else{n(t)}})}}function h(q){o.target.html("");n(q);o.template.tmpl(q).appendTo(o.target);if(o.dataCallback){o.dataCallback(q)}}function m(q){if(q){o.dataParams.lat=q.lat;o.dataParams.lon=q.lon}f.wxc.templateWait(o.target);f.wxc.data({dataVar:o.dataVar,dataParams:o.dataParams,successCallback:h,errorCallback:function(r){}})}if(o.data){f.wxc.templateWait(o.target);h(o.data)}else{if(k||p){m()}}if(o.isWxcListener){f.wxc.registerLocationListener(function(q){m(q)},!k)}return this};f.wxc.templateWait=function(h){h.html("<div style='padding:5px;'>please wait...</div>")};f.wxc.saveLocation=function(k){if(!k){return}k.id=new Date().getTime();var h=f.wxc.getLocations();h.push(k);f.wxc.saveLocations(h)};f.wxc.getLocations=function(){var h=f.jStorage.get(d);h=h||[];return h};f.wxc.saveLocations=function(h){if(!h){return}h.sort(function(m,k){if(m.name.toLowerCase()==k.name.toLowerCase()){return 0}if(m.name.toLowerCase()<k.name.toLowerCase()){return -1}return 1});f.jStorage.set(d,h)};f.wxc.deleteLocation=function(h){if(!h){return}var n=h.id?h.id:h;var k=f.wxc.getLocations();var m=[];f.each(k,function(o,p){if(p.id==n){return true}m.push(p)});f.wxc.saveLocations(m)};f.wxc.clearLocations=function(){f.jStorage.deleteKey(d)};f.wxc.getLocation=function(m){var k=null;var h=f.wxc.getLocations();f.each(h,function(o,n){if(n.id==m){k=n;return false}});return k};f.wxc.setLocation=function(h){if(!h){return}if(!isNaN(h)){locationId=h;h=f.wxc.getLocation(locationId)}if(!h){return}b=h;f.each(c,function(k,m){m(b)})};f.wxc.registerLocationListener=function(k,h){c.push(k);if(h&&b){k(b)}};f.wxc.ajax=function(m,n){var k=((n)||(!f.wxc.checkCorsSupport()));if(!m.xdmProvider){k=false}if(k){m.dataType=m.dataType||"text";var p=new easyXDM.Rpc({remote:m.xdmProvider,swf:f.wxc.URLS.easyXDM_swf,local:f.wxc.URLS.easyXDM_name},{swf:f.wxc.URLS.easyXDM_swf,local:f.wxc.URLS.easyXDM_name,remote:{ajax:{}}});p.ajax(m,function(q){if(m.success){if(m.dataType=="xml"){var r=f.parseXML(jQuery.trim(q));m.success(r)}else{if((m.dataType=="json")&&(typeof q=="string")){q=JSON.parse(q)}m.success(q)}p.destroy()}},function(q){if(m.error){m.error(q)}p.destroy()})}else{var h=m;h.error=function(r,q){f.wxc.ajax(m,true)};if(h.dataType=="xml"){var o=m.success;h.success=function(q){var r=f.parseXML(jQuery.trim(q));o(r)};h.dataType="text"}f.ajax(h)}};f.wxc.checkCorsSupport=function(){if((typeof XMLHttpRequest!=="undefined")&&("withCredentials" in new XMLHttpRequest())){return true}else{if(typeof XDomainRequest!=="undefined"){return false}else{return false}}};f.wxc.isIE=function(){return navigator.appName.indexOf("Microsoft")!=-1};f.wxc.getIEVersion=function(){var n=navigator.appName.indexOf("Microsoft")!=-1;var m=null;if(n){var h=navigator.userAgent;var k=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(k.exec(h)!=null){m=parseFloat(RegExp.$1)}}return m};f.wxc.getQuerystringValue=function(k,o){k=k.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var h="[\\?&]"+k+"=([^&#]*)";var n=new RegExp(h,"i");var m=n.exec(window.location.href);if(m){return decodeURIComponent(m[1].replace(/\+/g," "))}return o};f.wxc.isObject=function(h){if(!h){return false}return(Object.prototype.toString.call(h)==="[object Object]")};f.wxc.isString=function(h){if(!h){return false}return typeof(h)=="string"};f.wxc.isArray=function(h){if(!h){return false}return f.isArray(h)};f.wxc.isLatLonSame=function(n,m){if(n==m){return true}if((n.lat==m.lat)&&(n.lon==m.lon)){return true}var h=0.005;if(Math.abs(n.lat-m.lat)>h){return false}var k=0.04;if(Math.abs(n.lon-m.lon)>k){return false}return true};f.wxc.hashToArray=function(k){var h=[];if(!k){return h}f.each(k,function(m,n){h.push(n)});return h};f.wxc.dateFormat=function(){var h=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,k=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,m=function(p,o){p=String(p);o=o||2;while(p.length<o){p="0"+p}return p};return function(u,G,B){var r=f.wxc.dateFormat;if(arguments.length==1&&Object.prototype.toString.call(u)=="[object String]"&&!/\d/.test(u)){G=u;u=undefined}u=u?new Date(u):new Date;if(isNaN(u)){throw SyntaxError("invalid date")}G=String(r.masks[G]||G||r.masks["default"]);if(G.slice(0,4)=="UTC:"){G=G.slice(4);B=true}var E=B?"getUTC":"get",x=u[E+"Date"](),p=u[E+"Day"](),v=u[E+"Month"](),A=u[E+"FullYear"](),C=u[E+"Hours"](),w=u[E+"Minutes"](),F=u[E+"Seconds"](),z=u[E+"Milliseconds"](),q=B?0:u.getTimezoneOffset(),t={d:x,dd:m(x),ddd:r.i18n.dayNames[p],dddd:r.i18n.dayNames[p+7],m:v+1,mm:m(v+1),mmm:r.i18n.monthNames[v],mmmm:r.i18n.monthNames[v+12],yy:String(A).slice(2),yyyy:A,h:C%12||12,hh:m(C%12||12),H:C,HH:m(C),M:w,MM:m(w),s:F,ss:m(F),l:m(z,3),L:m(z>99?Math.round(z/10):z),t:C<12?"a":"p",tt:C<12?"am":"pm",T:C<12?"A":"P",TT:C<12?"AM":"PM",Z:B?"UTC":(String(u).match(k)||[""]).pop().replace(n,""),o:(q>0?"-":"+")+m(Math.floor(Math.abs(q)/60)*100+Math.abs(q)%60,4),S:["th","st","nd","rd"][x%10>3?0:(x%100-x%10!=10)*x%10]};return G.replace(h,function(o){return o in t?t[o]:o.slice(1,o.length-1)})}}();f.wxc.dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};f.wxc.dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]}})(jQuery);Date.prototype.wxcFormat=function(a,b){return $.wxc.dateFormat(this,a,b)};String.prototype.wxcContains=function(a){return(this.indexOf(a)>-1)};String.prototype.wxcReplace=function(c,b){var a=this;if(c!=b){while(a.indexOf(c)>-1){a=a.replace(c,b);if(b.toString().indexOf(c.toString())>-1){break}}}return a.toString()};String.prototype.wxcFormat=function(){var b=this;for(var a=0;a<arguments.length;a++){while(b.indexOf("{"+a+"}")>-1){b=b.replace("{"+a+"}",arguments[a])}}return b.toString()};String.prototype.wxcTrim=function(){var a=this;while(a.indexOf(" ")==0){a=a.substr(1)}while((a!="")&&(a.lastIndexOf(" ")==(a.length-1))){a=a.substring(0,a.length-2)}return a.toString()};(function($){$.toJSON=function(o){if(typeof(JSON)=="object"&&JSON.stringify){return JSON.stringify(o)}var type=typeof(o);if(o===null){return"null"}if(type=="undefined"){return undefined}if(type=="number"||type=="boolean"){return o+""}if(type=="string"){return $.quoteString(o)}if(type=="object"){if(typeof o.toJSON=="function"){return $.toJSON(o.toJSON())}if(o.constructor===Date){var month=o.getUTCMonth()+1;if(month<10){month="0"+month}var day=o.getUTCDate();if(day<10){day="0"+day}var year=o.getUTCFullYear();var hours=o.getUTCHours();if(hours<10){hours="0"+hours}var minutes=o.getUTCMinutes();if(minutes<10){minutes="0"+minutes}var seconds=o.getUTCSeconds();if(seconds<10){seconds="0"+seconds}var milli=o.getUTCMilliseconds();if(milli<100){milli="0"+milli}if(milli<10){milli="0"+milli}return'"'+year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"'}if(o.constructor===Array){var ret=[];for(var i=0;i<o.length;i++){ret.push($.toJSON(o[i])||"null")}return"["+ret.join(",")+"]"}var pairs=[];for(var k in o){var name;var type=typeof k;if(type=="number"){name='"'+k+'"'}else{if(type=="string"){name=$.quoteString(k)}else{continue}}if(typeof o[k]=="function"){continue}var val=$.toJSON(o[k]);pairs.push(name+":"+val)}return"{"+pairs.join(", ")+"}"}};$.evalJSON=function(src){if(typeof(JSON)=="object"&&JSON.parse){return JSON.parse(src)}return eval("("+src+")")};$.secureEvalJSON=function(src){if(typeof(JSON)=="object"&&JSON.parse){return JSON.parse(src)}var filtered=src;filtered=filtered.replace(/\\["\\\/bfnrtu]/g,"@");filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered)){return eval("("+src+")")}else{throw new SyntaxError("Error parsing JSON, source is not valid.")}};$.quoteString=function(string){if(string.match(_escapeable)){return'"'+string.replace(_escapeable,function(a){var c=_meta[a];if(typeof c==="string"){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+string+'"'};var _escapeable=/["\\\x00-\x1f\x7f-\x9f]/g;var _meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}})(jQuery);(function(x){function r(){if(z.jStorage){try{B=q(""+z.jStorage)}catch(c){z.jStorage="{}"}}else{z.jStorage="{}"}u=z.jStorage?(""+z.jStorage).length:0}function w(){try{z.jStorage=b(B),A&&(A.setAttribute("jStorage",z.jStorage),A.save("jStorage")),u=z.jStorage?(""+z.jStorage).length:0}catch(c){}}function v(c){if(!c||"string"!=typeof c&&"number"!=typeof c){throw new TypeError("Key name must be string or numeric")}if("__jstorage_meta"==c){throw new TypeError("Reserved key name")}return !0}function t(){var g,c,m,k=Infinity,h=!1;clearTimeout(a);if(B.__jstorage_meta&&"object"==typeof B.__jstorage_meta.TTL){g=+new Date;m=B.__jstorage_meta.TTL;for(c in m){m.hasOwnProperty(c)&&(m[c]<=g?(delete m[c],delete B[c],h=!0):m[c]<k&&(k=m[c]))}Infinity!=k&&(a=setTimeout(t,k-g));h&&w()}}if(!x||!x.toJSON&&!Object.toJSON&&!window.JSON){throw Error("jQuery, MooTools or Prototype needs to be loaded before jStorage!")}var B={},z={jStorage:"{}"},A=null,u=0,b=x.toJSON||Object.toJSON||window.JSON&&(JSON.encode||JSON.stringify),q=x.evalJSON||window.JSON&&(JSON.decode||JSON.parse)||function(c){return(""+c).evalJSON()},y=!1,a,s={isXML:function(c){return(c=(c?c.ownerDocument||c:0).documentElement)?"HTML"!==c.nodeName:!1},encode:function(f){if(!this.isXML(f)){return !1}try{return(new XMLSerializer).serializeToString(f)}catch(d){try{return f.xml}catch(g){}}return !1},decode:function(d){var c="DOMParser" in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(g){var f=new ActiveXObject("Microsoft.XMLDOM");f.async="false";f.loadXML(g);return f};if(!c){return !1}d=c.call("DOMParser" in window&&new DOMParser||window,d,"text/xml");return this.isXML(d)?d:!1}};x.jStorage={version:"0.1.6.1",set:function(d,c){v(d);s.isXML(c)?c={_is_xml:!0,xml:s.encode(c)}:"function"==typeof c?c=null:c&&"object"==typeof c&&(c=q(b(c)));B[d]=c;w();return c},get:function(d,c){v(d);return d in B?B[d]&&"object"==typeof B[d]&&B[d]._is_xml&&B[d]._is_xml?s.decode(B[d].xml):B[d]:"undefined"==typeof c?null:c},deleteKey:function(c){v(c);return c in B?(delete B[c],B.__jstorage_meta&&"object"==typeof B.__jstorage_meta.TTL&&c in B.__jstorage_meta.TTL&&delete B.__jstorage_meta.TTL[c],w(),!0):!1},setTTL:function(f,c){var g=+new Date;v(f);c=Number(c)||0;if(f in B){if(!B.__jstorage_meta){B.__jstorage_meta={}}if(!B.__jstorage_meta.TTL){B.__jstorage_meta.TTL={}}0<c?B.__jstorage_meta.TTL[f]=g+c:delete B.__jstorage_meta.TTL[f];w();t();return !0}return !1},flush:function(){B={};w();return !0},storageObj:function(){function c(){}c.prototype=B;return new c},index:function(){var d=[],c;for(c in B){B.hasOwnProperty(c)&&"__jstorage_meta"!=c&&d.push(c)}return d},storageSize:function(){return u},currentBackend:function(){return y},storageAvailable:function(){return !!y},reInit:function(){var d;if(A&&A.addBehavior){d=document.createElement("link");A.parentNode.replaceChild(d,A);A=d;A.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(A);A.load("jStorage");d="{}";try{d=A.getAttribute("jStorage")}catch(c){}z.jStorage=d;y="userDataBehavior"}r()}};(function(){var f=!1;if("localStorage" in window){try{window.localStorage.setItem("_tmptest","tmpval"),f=!0,window.localStorage.removeItem("_tmptest")}catch(d){}}if(f){try{if(window.localStorage){z=window.localStorage,y="localStorage"}}catch(n){}}else{if("globalStorage" in window){try{window.globalStorage&&(z=window.globalStorage[window.location.hostname],y="globalStorage")}catch(m){}}else{if(A=document.createElement("link"),A.addBehavior){A.style.behavior="url(#default#userData)";document.getElementsByTagName("head")[0].appendChild(A);A.load("jStorage");f="{}";try{f=A.getAttribute("jStorage")}catch(k){}z.jStorage=f;y="userDataBehavior"}else{A=null;return}}}r();t()})()})(window.jQuery||window.$);(function(X){function T(k,d,m,n){n={data:n||0===n||!1===n?n:d?d.data:{},_wrap:d?d._wrap:null,tmpl:null,parent:d||null,nodes:[],calls:O,nest:M,wrap:K,html:I,update:h};k&&X.extend(n,k,{nodes:[],parent:d});if(m){n.tmpl=m,n._ctnt=n._ctnt||n.tmpl(X,n),n.key=++S,(H.length?R:W)[S]=n}return n}function P(k,d,m){var n,m=m?X.map(m,function(o){return"string"===typeof o?k.key?o.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+U+'="'+k.key+'" $2'):o:P(o,k,o._ctnt)}):k;if(d){return m}m=m.join("");m.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(o,p,r,q){n=X(r).get();g(n);p&&(n=G(p).concat(n));q&&(n=n.concat(G(q)))});return n?n:G(m)}function G(k){var d=document.createElement("div");d.innerHTML=k;return X.makeArray(d.childNodes)}function f(d){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+X.trim(d).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(k,q,r,o,n,p,m){k=X.tmpl.tag[r];if(!k){throw"Unknown template tag: "+r}r=k._default||[];p&&!/\w$/.test(n)&&(n+=p,p="");n?(n=N(n),m=m?","+N(m)+")":p?")":"",m=p?-1<n.indexOf(".")?n+N(p):"("+n+").call($item"+m:n,p=p?m:"(typeof("+n+")==='function'?("+n+").call($item):("+n+"))"):p=m=r.$1||"null";o=N(o);return"');"+k[q?"close":"open"].split("$notnull_1").join(n?"typeof("+n+")!=='undefined' && ("+n+")!=null":"true").split("$1a").join(p).split("$1").join(m).split("$2").join(o||r.$2||"")+"__.push('"})+"');}return __;")}function c(k,d){k._wrap=P(k,!0,X.isArray(d)?d:[b.test(d)?d:X(d).html()]).join("")}function N(d){return d?d.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function g(s){function r(u){function t(z){var A;z+=p;A=m[z]=m[z]||T(x,W[x.parent.key+p]||x.parent),x=A}var y,w=u,x,v;if(v=u.getAttribute(U)){for(;w.parentNode&&1===(w=w.parentNode).nodeType&&!(y=w.getAttribute(U));){}if(y!==v){w=w.parentNode?11===w.nodeType?0:w.getAttribute(U)||0:0;if(!(x=W[v])){x=R[v],x=T(x,W[w]||R[w]),x.key=++S,W[S]=x}V&&t(v)}u.removeAttribute(U)}else{if(V&&(x=X.data(u,"tmplItem"))){t(x.key),W[x.key]=x,w=(w=X.data(u.parentNode,"tmplItem"))?w.key:0}}if(x){for(y=x;y&&y.key!=w;){y.nodes.push(u),y=y.parent}delete x._ctnt;delete x._wrap;X.data(u,"tmplItem",x)}}var p="_"+V,q,n,m={},o,k,d;for(o=0,k=s.length;o<k;o++){if(1===(q=s[o]).nodeType){n=q.getElementsByTagName("*");for(d=n.length-1;0<=d;d--){r(n[d])}r(q)}}}function O(m,k,n,o){if(!m){return H.pop()}H.push({_:m,tmpl:k,item:this,data:n,options:o})}function M(k,d,m){return X.tmpl(X.template(k),d,m,this)}function K(k,d){var m=k.options||{};m.wrapped=d;return X.tmpl(X.template(k.tmpl),k.data,m,k.item)}function I(k,d){var m=this._wrap;return X.map(X(X.isArray(m)?m.join(""):m).filter(k||"*"),function(n){if(d){n=n.innerText||n.textContent}else{var o;if(!(o=n.outerHTML)){o=document.createElement("div"),o.appendChild(n.cloneNode(!0)),o=o.innerHTML}n=o}return n})}function h(){var d=this.nodes;X.tmpl(null,null,null,this).insertBefore(d[0]);X(d).remove()}var a=X.fn.domManip,U="_tmplitem",b=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,W={},R={},J,Q={key:0,data:{}},S=0,V=0,H=[];X.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(k,d){X.fn[k]=function(p){var q=[],p=X(p),n,m,o;n=1===this.length&&this[0].parentNode;J=W||{};if(n&&11===n.nodeType&&1===n.childNodes.length&&1===p.length){p[d](this[0]),q=this}else{for(m=0,o=p.length;m<o;m++){V=m,n=(0<m?this.clone(!0):this).get(),X(p[m])[d](n),q=q.concat(n)}V=0;q=this.pushStack(q,k,p.selector)}p=J;J=null;X.tmpl.complete(p);return q}});X.fn.extend({tmpl:function(k,d,m){return X.tmpl(this[0],k,d,m)},tmplItem:function(){return X.tmplItem(this[0])},template:function(d){return X.template(d,this[0])},domManip:function(s,r,p,q){if(s[0]&&X.isArray(s[0])){for(var n=X.makeArray(arguments),m=s[0],o=m.length,k=0,d;k<o&&!(d=X.data(m[k++],"tmplItem"));){}d&&V&&(n[2]=function(t){X.tmpl.afterManip(this,t,p)});a.apply(this,n)}else{a.apply(this,arguments)}V=0;J||X.tmpl.complete(W);return this}});X.extend({tmpl:function(k,d,n,o){var m=!o;if(m){o=Q,k=X.template[k]||X.template(null,k),R={}}else{if(!k){return k=o.tmpl,W[o.key]=o,o.nodes=[],o.wrapped&&c(o,o.wrapped),X(P(o,null,o.tmpl(X,o)))}}if(!k){return[]}"function"===typeof d&&(d=d.call(o||{}));n&&n.wrapped&&c(n,n.wrapped);d=X.isArray(d)?X.map(d,function(p){return p?T(n,o,k,p):null}):[T(n,o,k,d)];return m?X(P(o,null,d)):d},tmplItem:function(k){var d;for(k instanceof X&&(k=k[0]);k&&1===k.nodeType&&!(d=X.data(k,"tmplItem"))&&(k=k.parentNode);){}return d||Q},template:function(k,d){return d?("string"===typeof d?d=f(d):d instanceof X&&(d=d[0]||{}),d.nodeType&&(d=X.data(d,"tmpl")||X.data(d,"tmpl",f(d.innerHTML))),"string"===typeof k?X.template[k]=d:d):k?"string"!==typeof k?X.template(null,k):X.template[k]||X.template(null,b.test(k)?k:X(k)):null},encode:function(d){return(""+d).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});X.extend(X.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){W={}},afterManip:function(k,d,m){var n=11===d.nodeType?X.makeArray(d.childNodes):1===d.nodeType?[d]:[];m.call(k,d);g(n);V++}})})(jQuery);(function(ag,aR,aF,aj,aK,am){var aT=this;var aH=Math.floor(Math.random()*10000);var aE=Function.prototype;var ad=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/;var ac=/[\-\w]+\/\.\.\//;var ao=/([^:])\/\//g;var al="";var aG={};var ah=ag.easyXDM;var Z="easyXDM_";var ap;var aw=false;var aM;var aN;function ar(c,a){var b=typeof c[a];return b=="function"||(!!(b=="object"&&c[a]))||b=="unknown"}function aA(b,a){return !!(typeof(b[a])=="object"&&b[a])}function aD(a){return Object.prototype.toString.call(a)==="[object Array]"}function aS(){try{var b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");aM=Array.prototype.slice.call(b.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1);aN=parseInt(aM[0],10)>9&&parseInt(aM[1],10)>0;b=null;return true}catch(a){return false}}var az,ax;if(ar(ag,"addEventListener")){az=function(a,c,b){a.addEventListener(c,b,false)};ax=function(a,c,b){a.removeEventListener(c,b,false)}}else{if(ar(ag,"attachEvent")){az=function(c,a,b){c.attachEvent("on"+a,b)};ax=function(c,a,b){c.detachEvent("on"+a,b)}}else{throw new Error("Browser not supported")}}var X=false,ak=[],ai;if("readyState" in aR){ai=aR.readyState;X=ai=="complete"||(~navigator.userAgent.indexOf("AppleWebKit/")&&(ai=="loaded"||ai=="interactive"))}else{X=!!aR.body}function aC(){if(X){return}X=true;for(var a=0;a<ak.length;a++){ak[a]()}ak.length=0}if(!X){if(ar(ag,"addEventListener")){az(aR,"DOMContentLoaded",aC)}else{az(aR,"readystatechange",function(){if(aR.readyState=="complete"){aC()}});if(aR.documentElement.doScroll&&ag===top){var aO=function(){if(X){return}try{aR.documentElement.doScroll("left")}catch(a){aj(aO,1);return}aC()};aO()}}az(ag,"load",aC)}function an(a,b){if(X){a.call(b);return}ak.push(function(){a.call(b)})}function aI(){var a=parent;if(al!==""){for(var c=0,b=al.split(".");c<b.length;c++){a=a[b[c]]}}return a.easyXDM}function aQ(a){ag.easyXDM=ah;al=a;if(al){Z="easyXDM_"+al.replace(".","_")+"_"}return aG}function av(a){return a.match(ad)[3]}function aP(a){return a.match(ad)[4]||""}function aL(c){var f=c.toLowerCase().match(ad);var b=f[2],a=f[3],d=f[4]||"";if((b=="http:"&&d==":80")||(b=="https:"&&d==":443")){d=""}return b+"//"+a+d}function at(b){b=b.replace(ao,"$1/");if(!b.match(/^(http||https):\/\//)){var a=(b.substring(0,1)==="/")?"":aF.pathname;if(a.substring(a.length-1)!=="/"){a=a.substring(0,a.lastIndexOf("/")+1)}b=aF.protocol+"//"+aF.host+a+b}while(ac.test(b)){b=b.replace(ac,"")}return b}function ae(g,d){var a="",c=g.indexOf("#");if(c!==-1){a=g.substring(c);g=g.substring(0,c)}var b=[];for(var f in d){if(d.hasOwnProperty(f)){b.push(f+"="+am(d[f]))}}return g+(aw?"#":(g.indexOf("?")==-1?"?":"&"))+b.join("&")+a}var ab=(function(d){d=d.substring(1).split("&");var b={},a,c=d.length;while(c--){a=d[c].split("=");b[a[0]]=aK(a[1])}return b}(/xdm_e=/.test(aF.search)?aF.search:aF.hash));function aB(a){return typeof a==="undefined"}var af=function(){var b={};var a={a:[1,2,3]},c='{"a":[1,2,3]}';if(typeof JSON!="undefined"&&typeof JSON.stringify==="function"&&JSON.stringify(a).replace((/\s/g),"")===c){return JSON}if(Object.toJSON){if(Object.toJSON(a).replace((/\s/g),"")===c){b.stringify=Object.toJSON}}if(typeof String.prototype.evalJSON==="function"){a=c.evalJSON();if(a.a&&a.a.length===3&&a.a[2]===3){b.parse=function(d){return d.evalJSON()}}}if(b.stringify&&b.parse){af=function(){return b};return b}return null};function aa(f,d,c){var a;for(var b in d){if(d.hasOwnProperty(b)){if(b in f){a=d[b];if(typeof a==="object"){aa(f[b],a,c)}else{if(!c){f[b]=d[b]}}}else{f[b]=d[b]}}}return f}function aU(){var a=aR.body.appendChild(aR.createElement("form")),b=a.appendChild(aR.createElement("input"));b.name=Z+"TEST"+aH;ap=b!==a.elements[b.name];aR.body.removeChild(a)}function au(c){if(aB(ap)){aU()}var a;if(ap){a=aR.createElement('<iframe name="'+c.props.name+'"/>')}else{a=aR.createElement("IFRAME");a.name=c.props.name}a.id=a.name=c.props.name;delete c.props.name;if(c.onLoad){az(a,"load",c.onLoad)}if(typeof c.container=="string"){c.container=aR.getElementById(c.container)}if(!c.container){aa(a.style,{position:"absolute",top:"-2000px"});c.container=aR.body}var b=c.props.src;delete c.props.src;aa(a,c.props);a.border=a.frameBorder=0;a.allowTransparency=true;c.container.appendChild(a);a.src=b;c.props.src=b;return a}function Y(b,a){if(typeof b=="string"){b=[b]}var c,d=b.length;while(d--){c=b[d];c=new RegExp(c.substr(0,1)=="^"?c:("^"+c.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"));if(c.test(a)){return true}}return false}function aJ(g){var a=g.protocol,h;g.isHost=g.isHost||aB(ab.xdm_p);aw=g.hash||false;if(!g.props){g.props={}}if(!g.isHost){g.channel=ab.xdm_c;g.secret=ab.xdm_s;g.remote=ab.xdm_e;a=ab.xdm_p;if(g.acl&&!Y(g.acl,g.remote)){throw new Error("Access denied for "+g.remote)}}else{g.remote=at(g.remote);g.channel=g.channel||"default"+aH++;g.secret=Math.random().toString(16).substring(2);if(aB(a)){if(aL(aF.href)==aL(g.remote)){a="4"}else{if(ar(ag,"postMessage")||ar(aR,"postMessage")){a="1"}else{if(g.swf&&ar(ag,"ActiveXObject")&&aS()){a="6"}else{if(navigator.product==="Gecko"&&"frameElement" in ag&&navigator.userAgent.indexOf("WebKit")==-1){a="5"}else{if(g.remoteHelper){g.remoteHelper=at(g.remoteHelper);a="2"}else{a="0"}}}}}}}g.protocol=a;switch(a){case"0":aa(g,{interval:100,delay:2000,useResize:true,useParent:false,usePolling:false},true);if(g.isHost){if(!g.local){var c=aF.protocol+"//"+aF.host,k=aR.body.getElementsByTagName("img"),b;var f=k.length;while(f--){b=k[f];if(b.src.substring(0,c.length)===c){g.local=b.src;break}}if(!g.local){g.local=ag}}var d={xdm_c:g.channel,xdm_p:0};if(g.local===ag){g.usePolling=true;g.useParent=true;g.local=aF.protocol+"//"+aF.host+aF.pathname+aF.search;d.xdm_e=g.local;d.xdm_pa=1}else{d.xdm_e=at(g.local)}if(g.container){g.useResize=false;d.xdm_po=1}g.remote=ae(g.remote,d)}else{aa(g,{channel:ab.xdm_c,remote:ab.xdm_e,useParent:!aB(ab.xdm_pa),usePolling:!aB(ab.xdm_po),useResize:g.useParent?false:g.useResize})}h=[new aG.stack.HashTransport(g),new aG.stack.ReliableBehavior({}),new aG.stack.QueueBehavior({encode:true,maxLength:4000-g.remote.length}),new aG.stack.VerifyBehavior({initiate:g.isHost})];break;case"1":h=[new aG.stack.PostMessageTransport(g)];break;case"2":h=[new aG.stack.NameTransport(g),new aG.stack.QueueBehavior(),new aG.stack.VerifyBehavior({initiate:g.isHost})];break;case"3":h=[new aG.stack.NixTransport(g)];break;case"4":h=[new aG.stack.SameOriginTransport(g)];break;case"5":h=[new aG.stack.FrameElementTransport(g)];break;case"6":if(!aM){aS()}h=[new aG.stack.FlashTransport(g)];break}h.push(new aG.stack.QueueBehavior({lazy:g.lazy,remove:true}));return h}function aq(c){var a,b={incoming:function(g,h){this.up.incoming(g,h)},outgoing:function(h,g){this.down.outgoing(h,g)},callback:function(g){this.up.callback(g)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(var d=0,f=c.length;d<f;d++){a=c[d];aa(a,b,true);if(d!==0){a.down=c[d-1]}if(d!==f-1){a.up=c[d+1]}}return a}function ay(a){a.up.down=a.down;a.down.up=a.up;a.up=a.down=null}aa(aG,{version:"2.4.15.118",query:ab,stack:{},apply:aa,getJSONObject:af,whenReady:an,noConflict:aQ});aG.DomHelper={on:az,un:ax,requiresJSON:function(a){if(!aA(ag,"JSON")){aR.write('<script type="text/javascript" src="'+a+'"><\/script>')}}};(function(){var a={};aG.Fn={set:function(c,b){a[c]=b},get:function(c,d){var b=a[c];if(d){delete a[c]}return b}}}());aG.Socket=function(b){var c=aq(aJ(b).concat([{incoming:function(d,f){b.onMessage(d,f)},callback:function(d){if(b.onReady){b.onReady(d)}}}])),a=aL(b.remote);this.origin=aL(b.remote);this.destroy=function(){c.destroy()};this.postMessage=function(d){c.outgoing(d,a)};c.init()};aG.Rpc=function(c,d){if(d.local){for(var a in d.local){if(d.local.hasOwnProperty(a)){var b=d.local[a];if(typeof b==="function"){d.local[a]={method:b}}}}}var f=aq(aJ(c).concat([new aG.stack.RpcBehavior(this,d),{callback:function(g){if(c.onReady){c.onReady(g)}}}]));this.origin=aL(c.remote);this.destroy=function(){f.destroy()};f.init()};aG.stack.SameOriginTransport=function(d){var c,a,b,f;return(c={outgoing:function(h,g,k){b(h);if(k){k()}},destroy:function(){if(a){a.parentNode.removeChild(a);a=null}},onDOMReady:function(){f=aL(d.remote);if(d.isHost){aa(d.props,{src:ae(d.remote,{xdm_e:aF.protocol+"//"+aF.host+aF.pathname,xdm_c:d.channel,xdm_p:4}),name:Z+d.channel+"_provider"});a=au(d);aG.Fn.set(d.channel,function(g){b=g;aj(function(){c.up.callback(true)},0);return function(h){c.up.incoming(h,f)}})}else{b=aI().Fn.get(d.channel,true)(function(g){c.up.incoming(g,f)});aj(function(){c.up.callback(true)},0)}},init:function(){an(c.onDOMReady,c)}})};aG.stack.FlashTransport=function(a){var k,d,m,h,c,g;function f(n,o){aj(function(){k.up.incoming(n,h)},0)}function b(o){var p=a.swf+"?host="+a.isHost;var q="easyXDM_swf_"+Math.floor(Math.random()*10000);aG.Fn.set("flash_loaded"+o.replace(/[\-.]/g,"_"),function(){aG.stack.FlashTransport[o].swf=c=g.firstChild;var s=aG.stack.FlashTransport[o].queue;for(var r=0;r<s.length;r++){s[r]()}s.length=0});if(a.swfContainer){g=(typeof a.swfContainer=="string")?aR.getElementById(a.swfContainer):a.swfContainer}else{g=aR.createElement("div");aa(g.style,aN&&a.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0});aR.body.appendChild(g)}var n="callback=flash_loaded"+o.replace(/[\-.]/g,"_")+"&proto="+aT.location.protocol+"&domain="+av(aT.location.href)+"&port="+aP(aT.location.href)+"&ns="+al;g.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+q+"' data='"+p+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+p+"'></param><param name='flashvars' value='"+n+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+n+"' allowScriptAccess='always' wmode='transparent' src='"+p+"' height='1' width='1'></embed></object>"}return(k={outgoing:function(o,n,p){c.postMessage(a.channel,o.toString());if(p){p()}},destroy:function(){try{c.destroyChannel(a.channel)}catch(n){}c=null;if(d){d.parentNode.removeChild(d);d=null}},onDOMReady:function(){h=a.remote;aG.Fn.set("flash_"+a.channel+"_init",function(){aj(function(){k.up.callback(true)})});aG.Fn.set("flash_"+a.channel+"_onMessage",f);a.swf=at(a.swf);var n=av(a.swf);var o=function(){aG.stack.FlashTransport[n].init=true;c=aG.stack.FlashTransport[n].swf;c.createChannel(a.channel,a.secret,aL(a.remote),a.isHost);if(a.isHost){if(aN&&a.swfNoThrottle){aa(a.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"})}aa(a.props,{src:ae(a.remote,{xdm_e:aL(aF.href),xdm_c:a.channel,xdm_p:6,xdm_s:a.secret}),name:Z+a.channel+"_provider"});d=au(a)}};if(aG.stack.FlashTransport[n]&&aG.stack.FlashTransport[n].init){o()}else{if(!aG.stack.FlashTransport[n]){aG.stack.FlashTransport[n]={queue:[o]};b(n)}else{aG.stack.FlashTransport[n].queue.push(o)}}},init:function(){an(k.onDOMReady,k)}})};aG.stack.PostMessageTransport=function(f){var b,a,g,d;function h(k){if(k.origin){return aL(k.origin)}if(k.uri){return aL(k.uri)}if(k.domain){return aF.protocol+"//"+k.domain}throw"Unable to retrieve the origin of the event"}function c(k){var m=h(k);if(m==d&&k.data.substring(0,f.channel.length+1)==f.channel+" "){b.up.incoming(k.data.substring(f.channel.length+1),m)}}return(b={outgoing:function(m,k,n){g.postMessage(f.channel+" "+m,k||d);if(n){n()}},destroy:function(){ax(ag,"message",c);if(a){g=null;a.parentNode.removeChild(a);a=null}},onDOMReady:function(){d=aL(f.remote);if(f.isHost){var k=function(m){if(m.data==f.channel+"-ready"){g=("postMessage" in a.contentWindow)?a.contentWindow:a.contentWindow.document;ax(ag,"message",k);az(ag,"message",c);aj(function(){b.up.callback(true)},0)}};az(ag,"message",k);aa(f.props,{src:ae(f.remote,{xdm_e:aL(aF.href),xdm_c:f.channel,xdm_p:1}),name:Z+f.channel+"_provider"});a=au(f)}else{az(ag,"message",c);g=("postMessage" in ag.parent)?ag.parent:ag.parent.document;g.postMessage(f.channel+"-ready",d);aj(function(){b.up.callback(true)},0)}},init:function(){an(b.onDOMReady,b)}})};aG.stack.FrameElementTransport=function(d){var c,a,b,f;return(c={outgoing:function(h,g,k){b.call(this,h);if(k){k()}},destroy:function(){if(a){a.parentNode.removeChild(a);a=null}},onDOMReady:function(){f=aL(d.remote);if(d.isHost){aa(d.props,{src:ae(d.remote,{xdm_e:aL(aF.href),xdm_c:d.channel,xdm_p:5}),name:Z+d.channel+"_provider"});a=au(d);a.fn=function(g){delete a.fn;b=g;aj(function(){c.up.callback(true)},0);return function(h){c.up.incoming(h,f)}}}else{if(aR.referrer&&aL(aR.referrer)!=ab.xdm_e){ag.top.location=ab.xdm_e}b=ag.frameElement.fn(function(g){c.up.incoming(g,f)});c.up.callback(true)}},init:function(){an(c.onDOMReady,c)}})};aG.stack.NameTransport=function(q){var p;var n,g,a,k,h,c,d;function m(r){var s=q.remoteHelper+(n?"#_3":"#_2")+q.channel;g.contentWindow.sendMessage(r,s)}function o(){if(n){if(++k===2||!n){p.up.callback(true)}}else{m("ready");p.up.callback(true)}}function f(r){p.up.incoming(r,c)}function b(){if(h){aj(function(){h(true)},0)}}return(p={outgoing:function(s,r,t){h=t;m(s)},destroy:function(){g.parentNode.removeChild(g);g=null;if(n){a.parentNode.removeChild(a);a=null}},onDOMReady:function(){n=q.isHost;k=0;c=aL(q.remote);q.local=at(q.local);if(n){aG.Fn.set(q.channel,function(s){if(n&&s==="ready"){aG.Fn.set(q.channel,f);o()}});d=ae(q.remote,{xdm_e:q.local,xdm_c:q.channel,xdm_p:2});aa(q.props,{src:d+"#"+q.channel,name:Z+q.channel+"_provider"});a=au(q)}else{q.remoteHelper=q.remote;aG.Fn.set(q.channel,f)}g=au({props:{src:q.local+"#_4"+q.channel},onLoad:function r(){var t=g||this;ax(t,"load",r);aG.Fn.set(q.channel+"_load",b);(function s(){if(typeof t.contentWindow.sendMessage=="function"){o()}else{aj(s,50)}}())}})},init:function(){an(p.onDOMReady,p)}})};aG.stack.HashTransport=function(b){var s;var n=this,p,a,d,r,f,t,g;var o,c;function h(u){if(!g){return}var v=b.remote+"#"+(f++)+"_"+u;((p||!o)?g.contentWindow:g).location=v}function q(u){r=u;s.up.incoming(r.substring(r.indexOf("_")+1),c)}function k(){if(!t){return}var w=t.location.href,u="",v=w.indexOf("#");if(v!=-1){u=w.substring(v)}if(u&&u!=r){q(u)}}function m(){a=setInterval(k,d)}return(s={outgoing:function(v,u){h(v)},destroy:function(){ag.clearInterval(a);if(p||!o){g.parentNode.removeChild(g)}g=null},onDOMReady:function(){p=b.isHost;d=b.interval;r="#"+b.channel;f=0;o=b.useParent;c=aL(b.remote);if(p){b.props={src:b.remote,name:Z+b.channel+"_provider"};if(o){b.onLoad=function(){t=ag;m();s.up.callback(true)}}else{var u=0,w=b.delay/50;(function v(){if(++u>w){throw new Error("Unable to reference listenerwindow")}try{t=g.contentWindow.frames[Z+b.channel+"_consumer"]}catch(x){}if(t){m();s.up.callback(true)}else{aj(v,50)}}())}g=au(b)}else{t=ag;m();if(o){g=parent;s.up.callback(true)}else{aa(b,{props:{src:b.remote+"#"+b.channel+new Date(),name:Z+b.channel+"_consumer"},onLoad:function(){s.up.callback(true)}});g=au(b)}}},init:function(){an(s.onDOMReady,s)}})};aG.stack.ReliableBehavior=function(f){var d,a;var b=0,g=0,c="";return(d={incoming:function(k,n){var m=k.indexOf("_"),h=k.substring(0,m).split(",");k=k.substring(m+1);if(h[0]==b){c="";if(a){a(true)}}if(k.length>0){d.down.outgoing(h[1]+","+b+"_"+c,n);if(g!=h[1]){g=h[1];d.up.incoming(k,n)}}},outgoing:function(h,m,k){c=h;a=k;d.down.outgoing(g+","+(++b)+"_"+h,m)}})};aG.stack.QueueBehavior=function(b){var m,k=[],f=true,a="",g,d=0,c=false,n=false;function h(){if(b.remove&&k.length===0){ay(m);return}if(f||k.length===0||g){return}f=true;var o=k.shift();m.down.outgoing(o.data,o.origin,function(p){f=false;if(o.callback){aj(function(){o.callback(p)},0)}h()})}return(m={init:function(){if(aB(b)){b={}}if(b.maxLength){d=b.maxLength;n=true}if(b.lazy){c=true}else{m.down.init()}},callback:function(o){f=false;var p=m.up;h();p.callback(o)},incoming:function(q,o){if(n){var r=q.indexOf("_"),p=parseInt(q.substring(0,r),10);a+=q.substring(r+1);if(p===0){if(b.encode){a=aK(a)}m.up.incoming(a,o);a=""}}else{m.up.incoming(q,o)}},outgoing:function(q,o,r){if(b.encode){q=am(q)}var p=[],s;if(n){while(q.length!==0){s=q.substring(0,d);q=q.substring(s.length);p.push(s)}while((s=p.shift())){k.push({data:p.length+"_"+s,origin:o,callback:p.length===0?r:null})}}else{k.push({data:q,origin:o,callback:r})}if(c){m.down.init()}else{h()}},destroy:function(){g=true;m.down.destroy()}})};aG.stack.VerifyBehavior=function(b){var a,d,f,c=false;function g(){d=Math.random().toString(16).substring(2);a.down.outgoing(d)}return(a={incoming:function(h,m){var k=h.indexOf("_");if(k===-1){if(h===d){a.up.callback(true)}else{if(!f){f=h;if(!b.initiate){g()}a.down.outgoing(h)}}}else{if(h.substring(0,k)===f){a.up.incoming(h.substring(k+1),m)}}},outgoing:function(h,m,k){a.down.outgoing(d+"_"+h,m,k)},callback:function(h){if(b.initiate){g()}}})};aG.stack.RpcBehavior=function(h,c){var a,f=c.serializer||af();var g=0,k={};function d(n){n.jsonrpc="2.0";a.down.outgoing(f.stringify(n))}function m(p,n){var o=Array.prototype.slice;return function(){var s=arguments.length,q,r={method:n};if(s>0&&typeof arguments[s-1]==="function"){if(s>1&&typeof arguments[s-2]==="function"){q={success:arguments[s-2],error:arguments[s-1]};r.params=o.call(arguments,0,s-2)}else{q={success:arguments[s-1]};r.params=o.call(arguments,0,s-1)}k[""+(++g)]=q;r.id=g}else{r.params=o.call(arguments,0)}if(p.namedParams&&r.params.length===1){r.params=r.params[0]}d(r)}}function b(q,r,n,s){if(!n){if(r){d({id:r,error:{code:-32601,message:"Procedure not found."}})}return}var t,o;if(r){t=function(v){t=aE;d({id:r,result:v})};o=function(x,w){o=aE;var v={id:r,error:{code:-32099,message:x}};if(w){v.error.data=w}d(v)}}else{t=o=aE}if(!aD(s)){s=[s]}try{var p=n.method.apply(n.scope,s.concat([t,o]));if(!aB(p)){t(p)}}catch(u){o(u.message)}}return(a={incoming:function(o,p){var n=f.parse(o);if(n.method){if(c.handle){c.handle(n,d)}else{b(n.method,n.id,c.local[n.method],n.params)}}else{var q=k[n.id];if(n.error){if(q.error){q.error(n.error)}}else{if(q.success){q.success(n.result)}}delete k[n.id]}},init:function(){if(c.remote){for(var n in c.remote){if(c.remote.hasOwnProperty(n)){h[n]=m(c.remote[n],n)}}}a.down.init()},destroy:function(){for(var n in c.remote){if(c.remote.hasOwnProperty(n)&&h.hasOwnProperty(n)){delete h[n]}}a.down.destroy()}})};aT.easyXDM=aG})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent);if(!this.JSON){this.JSON={}}(function(){function k(a){return 10>a?"0"+a:a}function o(a){p.lastIndex=0;return p.test(a)?'"'+a.replace(p,function(a){var c=r[a];return"string"===typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function m(a,i){var c,d,h,n,g=e,f,b=i[a];b&&"object"===typeof b&&"function"===typeof b.toJSON&&(b=b.toJSON(a));"function"===typeof j&&(b=j.call(i,a,b));switch(typeof b){case"string":return o(b);case"number":return isFinite(b)?""+b:"null";case"boolean":case"null":return""+b;case"object":if(!b){return"null"}e+=l;f=[];if("[object Array]"===Object.prototype.toString.apply(b)){n=b.length;for(c=0;c<n;c+=1){f[c]=m(c,b)||"null"}h=0===f.length?"[]":e?"[\n"+e+f.join(",\n"+e)+"\n"+g+"]":"["+f.join(",")+"]";e=g;return h}if(j&&"object"===typeof j){n=j.length;for(c=0;c<n;c+=1){d=j[c],"string"===typeof d&&(h=m(d,b))&&f.push(o(d)+(e?": ":":")+h)}}else{for(d in b){Object.hasOwnProperty.call(b,d)&&(h=m(d,b))&&f.push(o(d)+(e?": ":":")+h)}}h=0===f.length?"{}":e?"{\n"+e+f.join(",\n"+e)+"\n"+g+"}":"{"+f.join(",")+"}";e=g;return h}}if("function"!==typeof Date.prototype.toJSON){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+k(this.getUTCMonth()+1)+"-"+k(this.getUTCDate())+"T"+k(this.getUTCHours())+":"+k(this.getUTCMinutes())+":"+k(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var q=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,p=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,l,r={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j;if("function"!==typeof JSON.stringify){JSON.stringify=function(a,i,c){var d;l=e="";if("number"===typeof c){for(d=0;d<c;d+=1){l+=" "}}else{"string"===typeof c&&(l=c)}if((j=i)&&"function"!==typeof i&&("object"!==typeof i||"number"!==typeof i.length)){throw Error("JSON.stringify")}return m("",{"":a})}}if("function"!==typeof JSON.parse){JSON.parse=function(a,e){function c(a,d){var g,f,b=a[d];if(b&&"object"===typeof b){for(g in b){Object.hasOwnProperty.call(b,g)&&(f=c(b,g),void 0!==f?b[g]=f:delete b[g])}}return e.call(a,d,b)}var d,a=""+a;q.lastIndex=0;q.test(a)&&(a=a.replace(q,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return d=eval("("+a+")"),"function"===typeof e?c({"":d},""):d}throw new SyntaxError("JSON.parse")}}})();eval(function(h,b,m,d,g,f){g=function(a){return(a<b?"":g(parseInt(a/b)))+((a=a%b)>35?String.fromCharCode(a+29):a.toString(36))};if(!"".replace(/^/,String)){while(m--){f[g(m)]=d[m]||g(m)}d=[function(a){return f[a]}];g=function(){return"\\w+"};m=1}while(m--){if(d[m]){h=h.replace(new RegExp("\\b"+g(m)+"\\b","g"),d[m])}}return h}(";5(10.M)(w($){$.N({11:w(j,k){5(!j)t{};w B(d,e){5(!d)t y;6 f='',2=y,E=y;6 g=d.x,12=l(d.O||d.P);6 h=d.v||d.F||'';5(d.G){5(d.G.7>0){$.Q(d.G,w(n,a){6 b=a.x,u=l(a.O||a.P);6 c=a.v||a.F||'';5(b==8){t}z 5(b==3||b==4||!u){5(c.13(/^\\s+$/)){t};f+=c.H(/^\\s+/,'').H(/\\s+$/,'')}z{2=2||{};5(2[u]){5(!2[u].7)2[u]=p(2[u]);2[u][2[u].7]=B(a,R);2[u].7=2[u].7}z{2[u]=B(a)}}})}};5(d.I){5(d.I.7>0){E={};2=2||{};$.Q(d.I,w(a,b){6 c=l(b.14),C=b.15;E[c]=C;5(2[c]){5(!2[c].7)2[c]=p(2[c]);2[c][2[c].7]=C;2[c].7=2[c].7}z{2[c]=C}})}};5(2){2=$.N((f!=''?A J(f):{}),2||{});f=(2.v)?(D(2.v)=='16'?2.v:[2.v||'']).17([f]):f;5(f)2.v=f;f=''};6 i=2||f;5(k){5(f)i={};f=i.v||f||'';5(f)i.v=f;5(!e)i=p(i)};t i};6 l=w(s){t J(s||'').H(/-/g,\"18\")};6 m=w(s){t(D s==\"19\")||J((s&&D s==\"K\")?s:'').1a(/^((-)?([0-9]*)((\\.{0,1})([0-9]+))?$)/)};6 p=w(o){5(!o.7)o=[o];o.7=o.7;t o};5(D j=='K')j=$.S(j);5(!j.x)t;5(j.x==3||j.x==4)t j.F;6 q=(j.x==9)?j.1b:j;6 r=B(q,R);j=y;q=y;t r},S:w(a){6 b;T{6 c=($.U.V)?A 1c(\"1d.1e\"):A 1f();c.1g=W}X(e){Y A L(\"Z 1h 1i 1j 1k 1l\")};T{5($.U.V)b=(c.1m(a))?c:W;z b=c.1n(a,\"v/1o\")}X(e){Y A L(\"L 1p Z K\")};t b}})})(M);",62,88,"||obj|||if|var|length||||||||||||||||||||||return|cnn|text|function|nodeType|null|else|new|parseXML|atv|typeof|att|nodeValue|childNodes|replace|attributes|String|string|Error|jQuery|extend|localName|nodeName|each|true|text2xml|try|browser|msie|false|catch|throw|XML|window|xml2json|nn|match|name|value|object|concat|_|number|test|documentElement|ActiveXObject|Microsoft|XMLDOM|DOMParser|async|Parser|could|not|be|instantiated|loadXML|parseFromString|xml|parsing".split("|"),0,{}));eval(function(o,q,v){var x=o([]),t=o.resize=o.extend(o.resize,{}),p,m="setTimeout",n="resize",u=n+"-special-event",w="delay",s="throttleWindow";t[w]=200;t[s]=true;o.event.special[n]={setup:function(){if(!t[s]&&this[m]){return false}var a=o(this);x=x.add(a);o.data(this,u,{w:a.width(),h:a.height()});if(x.length===1){r()}},teardown:function(){if(!t[s]&&this[m]){return false}var a=o(this);x=x.not(a);a.removeData(u);if(!x.length){clearTimeout(p)}},add:function(b){if(!t[s]&&this[m]){return false}var c;function a(d,k,h){var g=o(this),f=o.data(this,u);if(!f){return}f.w=k!==v?k:g.width();f.h=h!==v?h:g.height();c.apply(this,arguments)}if(o.isFunction(b)){c=b;return a}else{c=b.handler;b.handler=a}}};function r(){p=q[m](function(){x.each(function(){var d=o(this),a=d.width(),b=d.height(),c=o.data(this,u);if((c)&&(a!==c.w||b!==c.h)){d.trigger(n,[c.w=a,c.h=b])}});r()},t[w])}})(jQuery,this);$.wxc.i18n={};$.wxc.i18n.defaultLanguage="en";$.wxc.i18n.languages={};$.wxc.i18n.addPhrases=function(c,b){if(typeof $.wxc.i18n.languages[c]=="undefined"){$.wxc.i18n.languages[c]={}}for(var a in b){$.wxc.i18n.languages[c][a]=b[a]}};$.wxc.i18n.translate=function(a,f,d){d=(typeof d=="undefined")?((typeof f=="string")?f:$.wxc.i18n.defaultLanguage):d;f=(typeof f=="object")?f:{};var b=(typeof $.wxc.i18n.languages[d]=="undefined")?a:((typeof $.wxc.i18n.languages[d][a]=="undefined")?a:$.wxc.i18n.languages[d][a]);for(var c in f){b=b.replace("{"+c+"}",f[c])}return b};$.wxc.i18n.translatePage=function(){$(".i18n").each(function(){var a=$.wxc.i18n.translate($(this).html());if(this.tagName=="TITLE"){document.title=a}else{$(this).html(a)}});return null};$.wxc.i18n.translateBlob=function(b,a){a=a||",";var c=b.split(a);$.each(c,function(f,d){if(isNaN(d)){var g=$.wxc.i18n.translate(d);b=b.wxcReplace(d,g)}});return b};(function(f){function d(a,o,n,m,k,c){if(typeof a=="object"||!a){g.initMap.call(this,a);return this}if(g[a]){return g[a].call(this,o,n,m,k,c)}f.error("Method "+a+" does not exist on jQuery.wxcMap")}f.fn.wxcMap=function(b,o,n,m,k,h){return d.call(this,b,o,n,m,k,h)},f.wxcMap={},f.wxcMap.MAP_RESIZE="MAP_RESIZE",f.wxcMap.MAP_CLICK="MAP_CLICK",f.wxcMap.MAP_DBLCLICK="MAP_DBLCLICK",f.wxcMap.MAP_MOUSEDOWN="MAP_MOUSEDOWN",f.wxcMap.MAP_LOAD="MAP_LOAD",f.wxcMap.MAP_VIEW_RESET="MAP_VIEW_RESET",f.wxcMap.MAP_MOVE_START="MAP_MOVE_START",f.wxcMap.MAP_MOVE="MAP_MOVE",f.wxcMap.MAP_MOVE_END="MAP_MOVE_END",f.wxcMap.MAP_DRAG_START="MAP_DRAG_START",f.wxcMap.MAP_DRAG="MAP_DRAG",f.wxcMap.MAP_DRAG_END="MAP_DRAG_END",f.wxcMap.MAP_ZOOM_END="MAP_ZOOM_END",f.wxcMap.MAP_LAYER_ADD="MAP_LAYER_ADD",f.wxcMap.MAP_LAYER_REMOVE="MAP_LAYER_REMOVE",f.wxcMap.MAP_LOCATION_FOUND="MAP_LOCATION_FOUND",f.wxcMap.MAP_LOCATION_ERROR="MAP_LOCATION_ERROR",f.wxcMap.MAP_LAYER_INVENTORY_LOAD_BEGIN="MAP_LAYER_INVENTORY_LOAD_BEGIN",f.wxcMap.MAP_LAYER_INVENTORY_LOAD_COMPLETE="MAP_LAYER_INVENTORY_LOAD_COMPLETE",f.wxcMap.MAP_ERROR="MAP_ERROR",f.wxcMap.MAP_LAYER_STATE_CHANGED="MAP_LAYER_STATE_CHANGED",f.wxcMap.MAP_TYPE_CHANGED="MAP_TYPE_CHANGED",f.wxcMap.MAP_LAYER_FRAME_CHANGED="MAP_LAYER_FRAME_CHANGED",f.wxcMap.MAP_LAYER_ANIMATION_LOAD_BEGIN="MAP_LAYER_ANIMATION_LOAD_BEGIN",f.wxcMap.MAP_LAYER_ANIMATION_LOAD_PROGRESS="MAP_LAYER_ANIMATION_LOAD_PROGRESS",f.wxcMap.MAP_LAYER_ANIMATION_LOAD_COMPLETE="MAP_LAYER_ANIMATION_LOAD_COMPLETE",f.wxcMap.MAP_LAYER_ACTIVATED="MAP_LAYER_ACTIVATED",f.wxcMap.MAP_LAYER_DEACTIVATED="MAP_LAYER_DEACTIVATED",f.wxcMap.MAP_LAYER_KML_LOAD_BEGIN="MAP_LAYER_KML_LOAD_BEGIN",f.wxcMap.MAP_LAYER_KML_LOAD_COMPLETE="MAP_LAYER_KML_LOAD_COMPLETE",f.wxcMap.MAP_LAYER_ICON_CLICK="MAP_LAYER_ICON_CLICK",f.wxcMap.MAP_LAYER_ICON_DBLCLICK="MAP_LAYER_ICON_DBLCLICK",f.wxcMap.MAP_LAYER_ICON_DRAG_START="MAP_LAYER_ICON_DRAG_START",f.wxcMap.MAP_LAYER_ICON_DRAG="MAP_LAYER_ICON_DRAG",f.wxcMap.MAP_LAYER_ICON_DRAG_END="MAP_LAYER_ICON_DRAG_END",f.wxcMap.MAP_LAYER_POLYGON_CLICK="MAP_LAYER_POLYGON_CLICK",f.wxcMap.MAP_LAYER_POLYGON_DBLCLICK="MAP_LAYER_POLYGON_DBLCLICK",f.wxcMap.MAP_LAYER_LINE_CLICK="MAP_LAYER_LINE_CLICK",f.wxcMap.MAP_LAYER_LINE_DBLCLICK="MAP_LAYER_LINE_DBLCLICK",f.wxcMap.MAP_DATA_REFRESH_BEGIN="MAP_DATA_REFRESH_BEGIN",f.wxcMap.MAP_DATA_REFRESH_COMPLETE="MAP_DATA_REFRESH_COMPLETE",f.wxcMap.MAP_LAYER_OUT_OF_ZOOM_RANGE="MAP_LAYER_OUT_OF_ZOOM_RANGE",f.wxcMap.MAP_LAYER_INTO_ZOOM_RANGE="MAP_LAYER_INTO_ZOOM_RANGE",f.wxcMap.ROAD="http://ecn.t{s}.tiles.virtualearth.net/tiles/r{q}.jpeg?g=1251",f.wxcMap.AERIAL="http://ecn.t{s}.tiles.virtualearth.net/tiles/a{q}.jpeg?g=1251",f.wxcMap.HYBRID="http://ecn.t{s}.tiles.virtualearth.net/tiles/h{q}.jpeg?g=1251",f.wxcMap.BASE_MAP="baseMap",f.wxcMap.FIRST="first",f.wxcMap.LAST="last",f.wxcMap.IDLE="IDLE",f.wxcMap.PLAYING="PLAYING",f.wxcMap.LOADING="LOADING",f.wxcMap.TOP_LEFT="TOP_LEFT",f.wxcMap.TOP_CENTER="TOP_CENTER",f.wxcMap.TOP_RIGHT="TOP_RIGHT",f.wxcMap.MIDDLE_LEFT="MIDDLE_LEFT",f.wxcMap.MIDDLE_CENTER="MIDDLE_CENTER",f.wxcMap.MIDDLE_RIGHT="MIDDLE_RIGHT",f.wxcMap.BOTTOM_LEFT="BOTTOM_LEFT",f.wxcMap.BOTTOM_CENTER="BOTTOM_CENTER",f.wxcMap.BOTTOM_RIGHT="BOTTOM_RIGHT",f.wxcMap.BING="bing",f.wxcMap.GOOGLE="google",f.wxcMap.KML="kml",f.wxcMap.TILES="tiles",f.wxcMap.DEFAULTS={validBounds:null,isWxcListener:!1,dataRefreshMinutes:null,bingImageryAttribution:f.wxc.URLS.bingImageryAttribution,baseMap:f.wxcMap.BING,bingKey:null,baseMapType:f.wxcMap.HYBRID,errorTileUrl:"",attributionPrefix:"",attributionSuffix:null,minZoom:3,maxZoom:18,center:null,zoom:4,layers:[],dragging:!0,doubleClickZoom:!0,shiftDragZoom:!0,zoomControl:!0,legendStack:!0,attributionControl:!0,trackResize:!0,closePopupOnClick:!0,eventHandler:null};var g={initMap:function(a){this.data("defaults",f.extend(f.extend({},f.wxcMap.DEFAULTS),a||{})),f.wxcMap.setLayerProviders();var h=this;this.resize(function(){var k=h.data("map");!k||(k.fire(f.wxcMap.MAP_RESIZE),h._sizeTimer||(h._lastCenter=k.getCenter()),clearTimeout(h._sizeTimer),h._sizeTimer=setTimeout(function(){k.setView(h._lastCenter,k.getZoom()),clearTimeout(h._sizeTimer),k._legendStack&&k._legendStack.resize(),h._sizeTimer=null},250))}),this.data("map",new L.Map(this[0],{zIndex:-1,minZoom:this.data("defaults").minZoom,maxZoom:this.data("defaults").maxZoom,crs:L.CRS.EPSG3857||L.CRS.EPSG4326,scale:function(b){return 256*(1<<b)},layers:this.data("defaults").layers,dragging:this.data("defaults").dragging,touchZoom:L.Browser.mobileWebkit&&!L.Browser.android,scrollWheelZoom:!L.Browser.mobileWebkit,doubleClickZoom:this.data("defaults").doubleClickZoom,shiftDragZoom:this.data("defaults").shiftDragZoom,zoomControl:this.data("defaults").zoomControl,legendStack:this.data("defaults").legendStack,attributionControl:this.data("defaults").attributionControl,fadeAnimation:L.DomUtil.TRANSITION&&!L.Browser.android,zoomAnimation:L.DomUtil.TRANSITION&&!L.Browser.android&&!L.Browser.mobileOpera&&!L.Browser.ie,trackResize:this.data("defaults").trackResize,closePopupOnClick:this.data("defaults").closePopupOnClick})),this.data("map").$wxcMap=this,this.data("layers",{}),this.data("defaults").baseMap==f.wxcMap.BING&&(g.addTileLayer.call(this,{id:f.wxcMap.BASE_MAP,zIndex:-1,tileUrl:this.data("defaults").baseMapType,minZoom:this.data("defaults").minZoom,maxZoom:this.data("defaults").maxZoom,tileSize:256,subdomains:"0123",errorTileUrl:this.data("defaults").errorTileUrl,attribution:this.data("defaults").attribution,opacity:1,scheme:"xyz",noWrap:!1,unloadInvisibleTiles:L.Browser.mobileWebkit,updateWhenIdle:L.Browser.mobileWebkit}),this.data("baseMapType",this.data("defaults").baseMapType),this.data("defaults").attributionSuffix!=""&&(this.data("defaults").attributionSuffix=this.data("defaults").attributionSuffix||"<a target='#' onclick='$(\"{0}\").wxcMap(\"showDataProviders\", \"{1}\");' style='text-decoration:underline; cursor:pointer;'>data providers</a>".wxcFormat(this.selector,f.wxcMap.BING)),this.data("defaults").attributionPrefix&&(this.data("defaults").attributionPrefix+=", "),this.data("defaults").attributionPrefix+=this.data("defaults").attributionSuffix,this.data("map").attributionControl&&(this.data("map").attributionControl.setPrefix(this.data("defaults").attributionPrefix),this.data("map").attributionControl._update()),this.data("map").addControl(new L.Control.ImageLogo({position:L.Control.Position.BOTTOM_LEFT,src:f.wxc.URLS.bingLogo,"class":"wxc-bing-logo"}))),this.data("map").addEventListener("click",function(k){g.handleThis.call(h,f.wxcMap.MAP_CLICK,k)}),this.data("map").addEventListener("dblclick",function(k){g.handleThis.call(h,f.wxcMap.MAP_DBLCLICK,k)}),this.data("map").addEventListener("mousedown",function(k){g.handleThis.call(h,f.wxcMap.MAP_MOUSEDOWN,k)}),this.data("map").addEventListener("load",function(k){g.handleThis.call(h,f.wxcMap.MAP_LOAD,k)}),this.data("map").addEventListener("viewreset",function(k){g.handleThis.call(h,f.wxcMap.MAP_VIEW_RESET,k)}),this.data("map").addEventListener("movestart",function(k){g.handleThis.call(h,f.wxcMap.MAP_MOVE_START,k)}),this.data("map").addEventListener("move",function(k){g.handleThis.call(h,f.wxcMap.MAP_MOVE,k)}),this.data("map").addEventListener("moveend",function(k){g.handleThis.call(h,f.wxcMap.MAP_MOVE_END,k)}),this.data("map").addEventListener("dragstart",function(k){g.handleThis.call(h,f.wxcMap.MAP_DRAG_START,k)}),this.data("map").addEventListener("drag",function(k){g.handleThis.call(h,f.wxcMap.MAP_DRAG,k)}),this.data("map").addEventListener("dragend",function(k){g.handleThis.call(h,f.wxcMap.MAP_DRAG_END,k)}),this.data("map").addEventListener("zoomend",function(k){g.handleThis.call(h,f.wxcMap.MAP_ZOOM_END,k)}),this.data("map").addEventListener("layeradd",function(k){g.handleThis.call(h,f.wxcMap.MAP_LAYER_ADD,k)}),this.data("map").addEventListener("layerremove",function(k){g.handleThis.call(h,f.wxcMap.MAP_LAYER_REMOVE,k)}),this.data("map").addEventListener("locationfound",function(k){g.handleThis.call(h,f.wxcMap.MAP_LOCATION_FOUND,k)}),this.data("map").addEventListener("locationerror",function(k){g.handleThis.call(h,f.wxcMap.MAP_LOCATION_ERROR,k)}),this.data("map").addEventListener("MAP_LAYER_INVENTORY_LOAD_BEGIN",function(k){g.handleThis.call(h,f.wxcMap.MAP_LAYER_INVENTORY_LOAD_BEGIN,k)}),this.data("map").addEventListener("MAP_LAYER_INVENTORY_LOAD_COMPLETE",function(k){g.handleThis.call(h,f.wxcMap.MAP_LAYER_INVENTORY_LOAD_COMPLETE,k)}),this.data("map").addEventListener("MAP_ERROR",function(k){g.handleThis.call(h,f.wxcMap.MAP_ERROR,k)}),this.data("map").addEventListener("MAP_LAYER_STATE_CHANGED",function(k){g.handleThis.call(h,f.wxcMap.MAP_LAYER_STATE_CHANGED,k)}),this.data("map").addEventListener("MAP_TYPE_CHANGED",function(k){g.handleThis.call(h,f.wxcMap.MAP_TYPE_CHANGED,k)}),this.data("map").addEventListener("MAP_LAYER_FRAME_CHANGED",function(k){g.handleThis.call(h,f.wxcMap.MAP_LAYER_FRAME_CHANGED,k)}),this.data("map").addEventListener("MAP_LAYER_ANIMATION_LOAD_BEGIN",function(k){g.handleThis.call(h,f.wxcMap.MAP_LAYER_ANIMATION_LOAD_BEGIN,k)}),this.data("map").addEventListener("MAP_LAYER_ANIMATION_LOAD_PROGRESS",function(k){g.handleThis.call(h,f.wxcMap.MAP_LAYER_ANIMATION_LOAD_PROGRESS,k)}),this.data("map").addEventListener("MAP_LAYER_ANIMATION_LOAD_COMPLETE",function(k){g.handleThis.call(h,f.wxcMap.MAP_LAYER_ANIMATION_LOAD_COMPLETE,k)}),this.data("map").addEventListener("MAP_LAYER_ACTIVATED",function(k){g.handleThis.call(h,f.wxcMap.MAP_LAYER_ACTIVATED,k)}),this.data("map").addEventListener("MAP_LAYER_DEACTIVATED",function(k){g.handleThis.call(h,f.wxcMap.MAP_LAYER_DEACTIVATED,k)}),this.data("map").addEventListener("MAP_LAYER_KML_LOAD_BEGIN",function(k){g.handleThis.call(h,f.wxcMap.MAP_LAYER_KML_LOAD_BEGIN,k)}),this.data("map").addEventListener("MAP_LAYER_KML_LOAD_COMPLETE",function(k){g.handleThis.call(h,f.wxcMap.MAP_LAYER_KML_LOAD_COMPLETE,k)}),this.data("map").addEventListener("MAP_DATA_REFRESH_BEGIN",function(k){g.handleThis.call(h,f.wxcMap.MAP_DATA_REFRESH_BEGIN,k)}),this.data("map").addEventListener("MAP_DATA_REFRESH_COMPLETE",function(k){g.handleThis.call(h,f.wxcMap.MAP_DATA_REFRESH_COMPLETE,k)}),this.data("map").addEventListener("MAP_LAYER_OUT_OF_ZOOM_RANGE",function(k){g.handleThis.call(h,f.wxcMap.MAP_LAYER_OUT_OF_ZOOM_RANGE,k)}),this.data("map").addEventListener("MAP_LAYER_INTO_ZOOM_RANGE",function(k){g.handleThis.call(h,f.wxcMap.MAP_LAYER_INTO_ZOOM_RANGE,k)}),this.data("map").addEventListener("MAP_RESIZE",function(k){g.handleThis.call(h,f.wxcMap.MAP_RESIZE,k)});if(this.data("defaults").dataRefreshMinutes&&!isNaN(this.data("defaults").dataRefreshMinutes)){var c=this.data("defaults").dataRefreshMinutes*60*1000;window.setInterval(function(){g.refreshData.call(h)},c)}this.data("defaults").center&&this.data("defaults").zoom&&g.setView.call(this,{lat:this.data("defaults").center.lat,lon:this.data("defaults").center.lon,zoom:this.data("defaults").zoom}),this.data("defaults").isWxcListener&&f.wxc.registerLocationListener(function(b){g.setView.call(h,b)});return this},handleThis:function(a,c){if(!this.data("mapLoaded")&&a!=f.wxcMap.MAP_LOAD){return this}c=c?c:{};switch(a){case f.wxcMap.MAP_CLICK:this.data("layers")&&f.each(this.data("layers"),function(k,h){h.mapClickHandler&&h.mapClickHandler(c)});break;case f.wxcMap.MAP_LOAD:g.enforceViewBounds.call(this,this.data("defaults").validBounds),this.data("mapLoaded",!0);break;case f.wxcMap.MAP_MOVE_START:c={mapState:g.getState.call(this)};break;case f.wxcMap.MAP_MOVE:c={mapState:g.getState.call(this)};break;case f.wxcMap.MAP_MOVE_END:c={mapState:g.getState.call(this)};break;case f.wxcMap.MAP_DRAG_END:g.enforceViewBounds.call(this,this.data("defaults").validBounds),c={mapState:g.getState.call(this)};break;case f.wxcMap.MAP_ZOOM_END:g.enforceViewBounds.call(this,this.data("defaults").validBounds),c={mapState:g.getState.call(this)};break;case f.wxcMap.MAP_LAYER_ADD:if(!c.layer){return this}if(!c.layer.options){return this}if(!c.layer.options.type){return this}if(c.layer.options.type=="MultiPolyline"){return this}if(c.layer.options.type=="KmlLayerGroup"){return this}if(c.layer.options.type=="KmlMarker"){return this}if(c.layer.options.type=="KmlShape"){return this}if(c.layer.options.type=="AnimationImageOverlay"){return this}c={id:c.layer.options.id,layer:c.layer.options};break;case f.wxcMap.MAP_LAYER_REMOVE:if(!c.layer){return this}if(!c.layer.options){return this}if(!c.layer.options.type){return this}if(c.layer.options.type=="MultiPolyline"){return this}if(c.layer.options.type=="KmlMarker"){return this}if(c.layer.options.type=="KmlShape"){return this}c={id:c.layer.options.id,layer:c.layer.options};break;case f.wxcMap.MAP_LAYER_INVENTORY_LOAD_BEGIN:c={id:c.layer.options.id};break;case f.wxcMap.MAP_LAYER_INVENTORY_LOAD_COMPLETE:c={id:c.layer.options.id};break;case f.wxcMap.MAP_LAYER_STATE_CHANGED:c={id:c.layer.options.id,state:c.layer._state};break;case f.wxcMap.MAP_LAYER_FRAME_CHANGED:c={id:c.layer.options.id,frame:c.frame};break;case f.wxcMap.MAP_LAYER_ANIMATION_LOAD_BEGIN:c={id:c.layer.options.id};break;case f.wxcMap.MAP_LAYER_ANIMATION_LOAD_COMPLETE:c={id:c.layer.options.id};break;case f.wxcMap.MAP_LAYER_ANIMATION_LOAD_PROGRESS:c={id:c.layer.options.id,delta:c.delta};break;case f.wxcMap.MAP_LAYER_ACTIVATED:c={id:c.layer.options.id};break;case f.wxcMap.MAP_LAYER_DEACTIVATED:c={id:c.layer.options.id};break;case f.wxcMap.MAP_LAYER_KML_LOAD_BEGIN:c={id:c.layer.options.id};break;case f.wxcMap.MAP_LAYER_KML_LOAD_COMPLETE:c={id:c.layer.options.id};break;case f.wxcMap.MAP_LAYER_OUT_OF_ZOOM_RANGE:c={id:c.layer.options.id};break;case f.wxcMap.MAP_LAYER_INTO_ZOOM_RANGE:c={id:c.layer.options.id}}this.data("mapLoaded")&&this.data("defaults").eventHandler&&(delete c.type,delete c.target,c=c.layer&&c.layer.type?c:f.wxcMap.toWxcLatLon(c),this.data("defaults").eventHandler(a,c));return this},showDataProviders:function(a){if(a==f.wxcMap.BING){var o=g.getState.call(this),n="{0},{1}".wxcFormat(o.center.lat,o.center.lon),m=o.zoom,k="Road";this.data("baseMapType")==f.wxcMap.AERIAL&&(k="Aerial"),this.data("baseMapType")==f.wxcMap.HYBRID&&(k="AerialWithLabels");var c="{0}?imagerySet={1}&centerPoint={2}&zoom={3}".wxcFormat(this.data("defaults").bingImageryAttribution,k,n,m);window.open(c,"_blank")}return this},notify:function(a){if(!a){return this}f("#jGrowl").size()==0&&f('<div id="jGrowl"></div>').addClass("top-right").appendTo(this[0]),a=f.extend({header:"Header",sticky:!1,glue:"after",theme:"default",corners:"10px",check:1000,life:6000,speed:"normal",easing:"swing",closer:!0,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(m,k,n){},beforeOpen:function(m,k,n){},open:function(m,k,n){},beforeClose:function(m,k,n){},close:function(m,k,n){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},a);var h=f.jGrowl(a.text,a);return this},popup:function(a){if(!a){return this}a.map=this.data("map"),new f.wxcMap.Popup(a);return this},addLegend:function(b){this.data("map")._legendStack&&this.data("map")._legendStack.add(b);return this},removeLegend:function(b){if(!this.data("map")._legendStack){return this}this.data("map")._legendStack.remove(b);return this},refreshData:function(a){var k=this;k.data("map").fire(f.wxcMap.MAP_DATA_REFRESH_BEGIN);if(!!k.data("layers")){var h=[];f.each(k.data("layers"),function(m,n){if(n.options&&n.options.id&&n.options.id==f.wxcMap.BASE_MAP){return !0}n.refreshData&&h.push(n.refreshData())}),f.when.apply(f,h).then(function(){k.data("map").fire(f.wxcMap.MAP_DATA_REFRESH_COMPLETE)});return k}},addPinpointContent:function(a){function c(b){g.getLayer.call(k,b.layerId)||(g.addKmlLayer.call(k,{id:b.layerId,active:b.selected,zIndex:b.iconDepth,anchorPoint:f.wxcMap.MIDDLE_CENTER,iconDir:"http://imp.wxc.com/mapsupport/pinpoint/",kmlUrl:n.wxcReplace("{cat}",b.categoryId),xdmProvider:m,minZoom:b.minZoom,maxZoom:b.maxZoom,click:function(h){g.popup.call(k,{width:h.data.popwidth,height:h.data.popheight,url:"http://imp.wxc.com/{0}".wxcFormat(h.data.popurl),latlon:h.latlon})}}),a.onAdd&&a.onAdd(b))}var o="http://imp.wxc.com/mapsupport/pinpoint/xml/hostcategories.xml?host={host}",n="http://imp.wxc.com/mapsupport/pinpoint/kml/category.xml?cat={cat}",m="http://imp.wxc.com/easyXDM/ajaxProvider.html",k=f(this);f.wxc.ajax({url:o.wxcReplace("{host}",f.wxc.DEFAULTS.host),xdmProvider:m,dataType:"xml",success:function(h){h&&f(h).find("row").each(function(){var p=parseInt(f(this).attr("categoryid"));c({host:f(this).attr("host"),categoryId:p,layerId:"pinpointContent_Cat_{0}".wxcFormat(p),label:f(this).attr("label"),selected:!!parseInt(f(this).attr("selected")),showLabel:!!parseInt(f(this).attr("showlabel")),iconDepth:parseInt(f(this).attr("icondepth")),guiOrder:parseInt(f(this).attr("GuiOrder")),minZoom:parseInt(f(this).attr("minzoom")),maxZoom:parseInt(f(this).attr("maxzoom"))})})},error:function(p,h,q){}});return this},addTileLayer:function(a){var k;if(a&&a.tileUrl){var h={id:(new Date).getTime().toString(),minZoom:this.data("defaults").minZoom,maxZoom:this.data("defaults").maxZoom};f.extend(h,a),this.data("layers")[h.id]?k=this.data("layers")[h.id]:(k=new L.TileLayer(h.tileUrl,h),this.data("map").addLayer(k),this.data("layers")[h.id]=k)}return this},addLayer:function(a,c){if(!!f.wxcMap.LAYER_PROVIDERS[a]){c=f.extend({},f.wxcMap.LAYER_PROVIDERS[a],c?c:{});switch(c.layerType){case f.wxcMap.KML:return g.addKmlLayer.call(this,c);case f.wxcMap.TILES:return g.addTileLayer.call(this,c)}return this}},removeLayer:function(a){if(a){var h=a;f.wxc.isObject(a)&&(a.id?h=a.id:a.options&&a.options.id&&(h=a.options.id)),this.data("layers")[h]&&(this.data("map").removeLayer(this.data("layers")[h]),delete this.data("layers")[h])}return this},addKmlLayer:function(a){var k;if(a&&a.kmlUrl){var h={id:(new Date).getTime().toString(),kmlUrl:"",iconDir:null,refreshOnViewChange:!1,minZoom:this.data("defaults").minZoom,maxZoom:this.data("defaults").maxZoom};f.extend(h,a),this.data("layers")[h.id]?k=this.data("layers")[h.id]:(k=new L.KmlLayer(h.kmlUrl,h),this.data("map").addLayer(k),this.data("layers")[h.id]=k)}return this},addMarkerIcon:function(a){var n;if(a&&a.iconUrl){var m={id:(new Date).getTime().toString(),minZoom:null,maxZoom:null,anchorPoint:f.wxcMap.MIDDLE_CENTER,tooltip:"",zIndex:0,iconUrl:"",latlon:null,click:null,dragend:null};f.extend(m,a);if(!this.data("layers")[m.id]){var k=f.extend(new L.Icon,{iconUrl:m.iconUrl,anchorPoint:m.anchorPoint}),h=f.wxcMap.toLeafletLatLng(m.latlon);n=new L.Marker(h,{title:m.tooltip,minZoom:m.minZoom,maxZoom:m.maxZoom,icon:k,type:"MarkerIcon",zIndex:m.zIndex,id:m.id,click:m.click,dragend:m.dragend}),this.data("map").addLayer(n),this.data("layers")[m.id]=n}else{n=this.data("layers")[m.id]}}return this},enforceViewBounds:function(D){var C=this;if(D){var B=new L.LatLng(D.southLat,D.westLon),A=new L.LatLng(D.northLat,D.eastLon),z=new L.LatLngBounds(B,A),y=this.data("map").getBounds(),C=this;function x(){return y._northEast.lat<z._southWest.lat?!0:y._southWest.lat>z._northEast.lat?!0:y._northEast.lng<z._southWest.lng?!0:y._southWest.lng>z._northEast.lng?!0:!1}if(!z.contains(y)){if(y.contains(z)){window.setTimeout(function(){C.data("map").fitBounds(z)},10)}else{if(x()){window.setTimeout(function(){C.data("map").fitBounds(z)},10)}else{var w=this.data("map").getCenter(),v=0,u=0,t=y._northEast.lat>D.northLat,s=y._southWest.lat<D.southLat,r=y._southWest.lng<D.westLon,q=y._northEast.lng>D.eastLon;t?v-=y._northEast.lat-D.northLat:s&&(v+=D.southLat-y._southWest.lat),r?u-=y._southWest.lng-D.westLon:q&&(u+=D.eastLon-y._northEast.lng);if(v!=0||u!=0){var c=z.getCenter();w.lat+=v,w.lng+=u,r&&w.lng>c.lng&&(w.lng=c.lng),q&&w.lng<c.lng&&(w.lng=c.lng),t&&w.lat<c.lat&&(w.lat=c.lat),s&&w.lat>c.lat&&(w.lat=c.lat),window.setTimeout(function(){g.setView.call(C,w,!1)},10)}}}}}return this},isCurrentView:function(a){a.zoom=a.zoom||this.data("map").getZoom();if(a.zoom==this.data("map").getZoom()){var h=f.wxcMap.toWxcLatLon(this.data("map").getCenter());if(f.wxc.isLatLonSame(h,f.wxcMap.toWxcLatLon(a))){return !0}}return !1},setMapType:function(a){if(this.data("layers")[f.wxcMap.BASE_MAP]){this.data("layers")[f.wxcMap.BASE_MAP].updateTileUrl(a,!0),this.data("baseMapType",a);switch(a){case f.wxcMap.ROAD:a="road";break;case f.wxcMap.AERIAL:a="aerial";break;case f.wxcMap.HYBRID:a="hybrid"}this.data("map").fire(f.wxcMap.MAP_TYPE_CHANGED,{mapType:a})}return this},setView:function(a,k){var h=f.wxcMap.toLeafletLatLng(a),c=a.zoom||this.data("map").getZoom()||this.data("defaults").zoom;g.isCurrentView.call(this,{lat:h.lat,lon:h.lng,zoom:c})||this.data("map").setView(h,c,!!k);return this},panTo:function(a){a=f.wxcMap.toWxcLatLon(a),g.isCurrentView.call(this,a)||this.data("map").panTo(f.wxcMap.toLeafletLatLng(a));return this},setLocation:function(h,c){return g.setView.call(this,h,c)},fitBounds:function(k){if(!k){return this}var h=new L.LatLng(k.southLat,k.westLon),n=new L.LatLng(k.northLat,k.eastLon),m=new L.LatLngBounds(h,n);this.data("map").fitBounds(m);return this},setValidBounds:function(b){this.data("defaults").validBounds=b,g.enforceViewBounds.call(this,this.data("defaults").validBounds);return this},removeValidBounds:function(){this.data("defaults").validBounds=null;return this},setZoom:function(b){b<=this.data("defaults").maxZoom&&b>=this.data("defaults").minZoom&&b!=this.data("map").getZoom()&&this.data("map").setZoom(b);return this},zoomIn:function(){this.data("map").getZoom()<this.data("defaults").maxZoom&&this.data("map").zoomIn();return this},zoomOut:function(){this.data("map").getZoom()>this.data("defaults").minZoom&&this.data("map").zoomOut();return this},getState:function(){var a={center:this.data("map").getCenter(),zoom:this.data("map").getZoom(),minZoom:this.data("map").getMinZoom(),maxZoom:this.data("map").getMaxZoom(),bounds:this.data("map").getBounds(),size:this.data("map").getSize()};return f.wxcMap.toWxcLatLon(a)},getLayer:function(a){if(!a){return null}var h=a;f.wxc.isObject(a)&&(a.id?h=a.id:a.options&&a.options.id&&(h=a.options.id));if(this.data("layers")&&this.data("layers")[h]){return this.data("layers")[h]}this.data("map").fire(f.wxcMap.MAP_ERROR,{msg:"layer with id '"+h+"' not found."});return null},getLayers:function(){return this.data("layers")}};f.wxcMap.toWxcView=function(a,k){var h=f.wxcMap.toWxcLatLon(a);h.zoom=k;return h},f.wxcMap.toWxcLatLon=function(a){var k={};for(var h in a){a.hasOwnProperty(h)&&(h==="latlng"?k.latlon={lat:a[h].lat,lon:a[h].lng}:h==="lng"?k.lon=a[h]:f.wxc.isObject(a[h])?k[h]=f.wxcMap.toWxcLatLon(a[h]):k[h]=a[h])}return k},f.wxcMap.toLeafletLatLng=function(h){h.lon=h.lon?h.lon:h.lng;var c=new L.LatLng(h.lat,h.lon);return c},f.wxcMap.Popup=function(s){if(s&&s.map&&s.latlon){var r=s.url,q=s.html,p=s.template,o,n={maxWidth:300};if(p){s.html="";var m=f(s.template.tmpl(s.data));m.each(function(h,b){s.html+=f(b).clone().wrap("<div>").parent().html()}),s.html=s.html.wxcReplace("{lat}",s.latlon.lat),s.html=s.html.wxcReplace("%7Blat%7D",s.latlon.lat),s.html=s.html.wxcReplace("{lon}",s.latlon.lon),s.html=s.html.wxcReplace("%7Blon%7D",s.latlon.lon),q=!0}if(r){var k=s.url;s.width||(s.width=200),s.height||(s.height=200),o='<iframe src="{0}" frameBorder="0" style="width:{1}px; height:{2}px;"></iframe>'.wxcFormat(s.url,s.width-12,s.height-10),n.maxWidth=s.width>n.maxWidth?s.width:n.maxWidth}else{q&&(o=s.html,s.width&&s.height&&(o="<div style='width:{0}px; height:{1}px'>{2}</div>".wxcFormat(s.width-12,s.height-10,o),n.maxWidth=s.width>n.maxWidth?s.width:n.maxWidth))}if(o){var a=new L.Popup(n);a.setContent(o),a.setLatLng(f.wxcMap.toLeafletLatLng(s.latlon)),s.map.openPopup(a)}}},f.wxcMap.TextLabel=function(x){function a(c){switch(c){case f.wxcMap.TOP_LEFT:return new L.Point(t.x+n,t.y+n);case f.wxcMap.TOP_CENTER:return new L.Point(t.x-q,t.y+n);case f.wxcMap.TOP_RIGHT:return new L.Point(t.x-r-n,t.y+n);case f.wxcMap.MIDDLE_LEFT:return new L.Point(t.x+n,t.y-o);case f.wxcMap.MIDDLE_CENTER:return new L.Point(t.x-q,t.y-o);case f.wxcMap.MIDDLE_RIGHT:return new L.Point(t.x-r-n,t.y-o);case f.wxcMap.BOTTOM_LEFT:return new L.Point(t.x+n,t.y-p-n);case f.wxcMap.BOTTOM_CENTER:return new L.Point(t.x-q,t.y-p-n);case f.wxcMap.BOTTOM_RIGHT:return new L.Point(t.x-r-n,t.y-p-n);default:return a(f.wxcMap.MIDDLE_CENTER)}}var w={latlon:new L.LatLng(43,-89),text:"default text",anchorPoint:f.wxcMap.MIDDLE_CENTER,"class":"",zIndex:0,ieOffset:new L.Point(0,0)};f.extend(w,x||{}),this._lbl=null;var v="",u="wxc-text-label "+v+" "+w["class"],t=w.map.latLngToLayerPoint(w.latlon);this._lbl=L.DomUtil.create("div",u,w.mapPane,w.zIndex);var s=L.DomUtil.create("span","",this._lbl);f(s).css("margin","0px"),f(s).css("padding","0px"),f(s).html(w.text),f(this._lbl).width(f(s).width()),f(this._lbl).height(f(s).height());var r=f(s).width(),q=r*0.5,p=f(s).height(),o=p*0.5,n=9;L.Browser.ie&&(t=new L.Point(t.x+w.ieOffset.x,t.y+w.ieOffset.y)),t=a(w.anchorPoint),f(this._lbl).css("top",t.y),f(this._lbl).css("left",t.x),this.kill=function(){this._lbl&&f(this._lbl).remove()};return this},f.wxcMap.MarkerProjectedPath=function(a){function h(){this._active?this.draw():this._map.off("zoomend",h)}this._marker=a,this._layers=[],this._map=a._map,this._minutes=60,this._shadows=!0,this._active=!0,this._map.on("zoomend",h,this),this.draw=function(al){al&&this._activate();if(!!this._active){if(!this._marker){return}if(!this._marker.options){return}if(!this._marker.options.projectedPath){return}this.kill(),this._layers=[],this._labels=[];var ak=[],aj=a._latlng,ai=new L.LatLng(this._marker.options.projectedPath.plat,this._marker.options.projectedPath.plon),ah=this.getRadians(this.toMapXY(aj),this.toMapXY(ai)),ag=this.getLength(this.toMapXY(aj),this.toMapXY(ai));if(ag<26){return}var af=12,ae=0,ad=!1,ac=15,ab=0.4,aa=50,Z=22,Y=Math.floor(ag/aa),W={stroke:!0,color:"#ccddee",weight:3,opacity:1,clickable:!1,smoothFactor:1,noClip:!1,type:"MultiPolyline",pane:this._map._panes.topPane,zIndex:this._marker.options.zIndex},U=this.getRenderEnd(aj,ai),S=[aj,U];ak.push(S);var Q=this.getPointOnCircle(ac,ah+Math.PI+ab),O=this._map.layerPointToLatLng(this.addXY(this.toMapXY(ai),Q)),M=[O,ai];ak.push(M);var J=this.getPointOnCircle(ac,ah+Math.PI-ab),I=this._map.layerPointToLatLng(this.addXY(this.toMapXY(ai),J)),H=[I,ai];ak.push(H);var b=!1;for(var X=1;X<=Y;X++){var V=aa*X,T=Math.floor(V/ag*this._minutes),R={radians:ah,mapPane:this._map._panes.topPane,minutes:T,zIndex:this._marker.options.zIndex,lineOptions:W},P=this.getCircleSegment(ak,V,this.toMapXY(aj),this.radiansToDegrees(ah)-Z*0.5,Z,R);!P&&!b&&(b=!0,Y=Math.min(Y,X+2))}var N=new L.MultiPolyline(ak,W);if(this._shadows){f.extend(W,{weight:W.weight+4,color:"#000000"});var K=new L.MultiPolyline(ak,W);this._layers.push(K),this._map.addLayer(K)}this._layers.push(N),this._map.addLayer(N)}},this.getRenderEnd=function(m,k){var p=new L.LatLng(k.lat,k.lng),o=this._map.getBounds();while(!o.contains(p)){var n=this.getInterpolatedLatLng(m,p,0.5);if(o.contains(n)){break}p=n}return p},this.kill=function(k){k&&this._deactivate();var m=this;this._layers&&f.each(this._layers,function(n,c){m._map.removeLayer(c)}),this._layers=[],this._labels&&f.each(this._labels,function(n,c){c.kill()}),this._labels=[]},this.getCircleSegment=function(X,W,V,U,T,S){var R=this.degreesToRadians(U),Q=this.degreesToRadians(U+T),P=this.degreesToRadians(U+T*0.5),O=Q-R,N=2,M=O/N,K=R,J=[];for(var I=1;I<=N;I++){var H=this.getPointOnCircle(W,K),G=this.getPointOnCircle(W,K+M);H=this.addXY(V,H),G=this.addXY(V,G),H=this._map.layerPointToLatLng(H),G=this._map.layerPointToLatLng(G),J.push(H),J.push(G),X.push([H,G]),K=K+M}if(S){P=P<0?Math.PI*2-Math.abs(P):P;var F=J[J.length-1],E=f.wxcMap.MIDDLE_CENTER;P<Math.PI*0.25?E=f.wxcMap.MIDDLE_LEFT:P<Math.PI*0.5?E=f.wxcMap.TOP_CENTER:P<Math.PI*0.75?E=f.wxcMap.TOP_CENTER:P<Math.PI?E=f.wxcMap.MIDDLE_RIGHT:P<Math.PI*1.25?E=f.wxcMap.MIDDLE_RIGHT:P<Math.PI*1.5?E=f.wxcMap.BOTTOM_CENTER:P<Math.PI*1.75?E=f.wxcMap.BOTTOM_CENTER:E=f.wxcMap.MIDDLE_LEFT;var D=new f.wxcMap.TextLabel({latlon:F,text:(S.minutes||"<1")+" min",anchorPoint:E,"class":"wxc-text-label-projection",mapPane:S.mapPane,zIndex:S.zIndex,map:this._map,ieOffset:new L.Point(-5,-5)});this._labels.push(D)}if(J&&J.length>1){var C=this._map.getBounds(),B=J[0];if(!C.contains(B)){var A=J[Math.ceil(J.length*0.5)];if(!C.contains(A)){var z=J[J.length-1];if(!C.contains(z)){return !1}}}}return !0},this._activate=function(){this._active=!0},this._deactivate=function(){this._active=!1},this.addXY=function(k,c){return new L.Point(k.x+c.x,k.y+c.y)},this.toMapXY=function(b){return this._map.latLngToLayerPoint(b)},this.getRadians=function(k,c){return Math.atan2(c.y-k.y,c.x-k.x)+Math.PI/2},this.getLength=function(k,c){return Math.sqrt(Math.pow(k.x-c.x,2)+Math.pow(k.y-c.y,2))},this.getInterpolatedLatLng=function(m,k,r){var q=this._map.latLngToLayerPoint(m),p=this._map.latLngToLayerPoint(k),o=this.getInterpolatedPoint(q,p,r),n=this._map.layerPointToLatLng(o);return n},this.getInterpolatedPoint=function(m,k,p){var o=m.x+(k.x-m.x)*p,n=m.y+(k.y-m.y)*p;return new L.Point(o,n)},this.getPointOnCircle=function(k,c){c-=Math.PI/2;return new L.Point(k*Math.cos(c),k*Math.sin(c))},this.radiansToDegrees=function(b){return b*(180/Math.PI)},this.degreesToRadians=function(b){return b*(Math.PI/180)}}})(jQuery),function(d){var c={VERSION:"0.2",ROOT_URL:function(){var h=document.getElementsByTagName("script"),g=/^(.*\/)leaflet-?([\w-]*)\.js.*$/;for(var o=0,n=h.length;o<n;o++){var m=h[o].src,k=m&&m.match(g);if(k){if(k[2]=="include"){break}return k[1]}}return"../../dist/"}(),noConflict:function(){d.L=this._originalL;return this},_originalL:d.L};window.L=c}(this),L.Util={extend:function(h){var g=Array.prototype.slice.call(arguments,1);for(var o=0,n=g.length,m;o<n;o++){m=g[o]||{};for(var k in m){m.hasOwnProperty(k)&&(h[k]=m[k])}}return h},bind:function(d,c){return function(){return d.apply(c,arguments)}},stamp:function(){var d=0,c="_leaflet_id";return function(a){a[c]=a[c]||++d;return a[c]}}(),requestAnimFrame:function(){function d(b){window.setTimeout(b,1000/60)}var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||d;return function(f,b,a){f=b?L.Util.bind(f,b):b,a&&c===d?f():c(f)}}(),limitExecByInterval:function(k,h,q){function m(){p=!1,o&&(n.callee.apply(q,n),o=!1)}var p,o,n;return function(){n=arguments,p?o=!0:(p=!0,setTimeout(m,h),k.apply(q,n))}},falseFn:function(){return !1},formatNum:function(f,d){var g=Math.pow(10,d||5);return Math.round(f*g)/g},setOptions:function(d,c){d.options=L.Util.extend({},d.options,c)},getParamString:function(f){var d=[];for(var g in f){f.hasOwnProperty(g)&&d.push(g+"="+f[g])}return"?"+d.join("&")}},L.Class=function(){},L.Class.extend=function(g){var f=function(){!L.Class._prototyping&&this.initialize&&this.initialize.apply(this,arguments)};L.Class._prototyping=!0;var k=new this;L.Class._prototyping=!1,k.constructor=f,f.prototype=k,k.superclass=this.prototype,g.statics&&(L.Util.extend(f,g.statics),delete g.statics),g.includes&&(L.Util.extend.apply(null,[k].concat(g.includes)),delete g.includes),g.options&&k.options&&(g.options=L.Util.extend({},k.options,g.options)),L.Util.extend(k,g),f.extend=arguments.callee,f.include=function(b){L.Util.extend(this.prototype,b)};for(var h in this){this.hasOwnProperty(h)&&h!="prototype"&&(f[h]=this[h])}return f},L.Mixin={},L.Mixin.Events={addEventListener:function(g,f,k){var h=this._leaflet_events=this._leaflet_events||{};h[g]=h[g]||[],h[g].push({action:f,context:k});return this},hasEventListeners:function(d){var c="_leaflet_events";return c in this&&d in this[c]&&this[c][d].length>0},removeEventListener:function(h,g,o){if(!this.hasEventListeners(h)){return this}for(var n=0,m=this._leaflet_events,k=m[h].length;n<k;n++){if(m[h][n].action===g&&(!o||m[h][n].context===o)){m[h].splice(n,1);return this}}return this},fireEvent:function(h,g){if(!!this.hasEventListeners(h)){var o=L.Util.extend({type:h,target:this},g),n=this._leaflet_events[h].slice();for(var m=0,k=n.length;m<k;m++){n[m].action.call(n[m].context||this,o)}return this}}},L.Mixin.Events.on=L.Mixin.Events.addEventListener,L.Mixin.Events.off=L.Mixin.Events.removeEventListener,L.Mixin.Events.fire=L.Mixin.Events.fireEvent,function(){var h=navigator.userAgent.toLowerCase(),g=!!window.ActiveXObject||window.ActiveXObject!==undefined,o=h.indexOf("webkit")!=-1,n=h.indexOf("mobi")!=-1,m=h.indexOf("android")!=-1,k=window.opera;L.Browser={ie:g,ie6:g&&!window.XMLHttpRequest,webkit:o,webkit3d:o&&"WebKitCSSMatrix" in window&&"m11" in new WebKitCSSMatrix&&!m,mobileWebkit:o&&(n||m),mobileOpera:n&&k,gecko:h.indexOf("gecko")!=-1,android:m,chrome:o&&/chrome/.test(navigator.userAgent.toLowerCase())},L.Browser.touch=L.Browser.mobileWebkit||L.Browser.mobileOpera}(),L.Point=function(f,d,g){this.x=g?Math.round(f):f,this.y=g?Math.round(d):d},L.Point.prototype={add:function(b){return this.clone()._add(b)},_add:function(b){this.x+=b.x,this.y+=b.y;return this},subtract:function(b){return this.clone()._subtract(b)},_subtract:function(b){this.x-=b.x,this.y-=b.y;return this},divideBy:function(d,c){return new L.Point(this.x/d,this.y/d,c)},multiplyBy:function(b){return new L.Point(this.x*b,this.y*b)},distanceTo:function(f){var d=f.x-this.x,g=f.y-this.y;return Math.sqrt(d*d+g*g)},round:function(){return this.clone()._round()},_round:function(){this.x=Math.round(this.x),this.y=Math.round(this.y);return this},clone:function(){return new L.Point(this.x,this.y)},toString:function(){return"Point("+L.Util.formatNum(this.x)+", "+L.Util.formatNum(this.y)+")"}},L.Bounds=L.Class.extend({initialize:function(g,f){if(!!g){var m=g instanceof Array?g:[g,f];for(var k=0,h=m.length;k<h;k++){this.extend(m[k])}}},extend:function(b){!this.min&&!this.max?(this.min=new L.Point(b.x,b.y),this.max=new L.Point(b.x,b.y)):(this.min.x=Math.min(b.x,this.min.x),this.max.x=Math.max(b.x,this.max.x),this.min.y=Math.min(b.y,this.min.y),this.max.y=Math.max(b.y,this.max.y))},getCenter:function(b){return new L.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,b)},contains:function(f){var d,g;f instanceof L.Bounds?(d=f.min,g=f.max):g=g=f;return d.x>=this.min.x&&g.x<=this.max.x&&d.y>=this.min.y&&g.y<=this.max.y}}),L.Transformation=L.Class.extend({initialize:function(g,f,k,h){this._a=g,this._b=f,this._c=k,this._d=h},transform:function(d,c){return this._transform(d.clone(),c)},_transform:function(d,c){c=c||1,d.x=c*(this._a*d.x+this._b),d.y=c*(this._c*d.y+this._d);return d},untransform:function(d,c){c=c||1;return new L.Point((d.x/c-this._b)/this._a,(d.y/c-this._d)/this._c)}}),L.LineUtil={simplify:function(d,c){if(!c){return d.slice()}d=this.reducePoints(d,c),d=this.simplifyDP(d,c);return d},pointToSegmentDistance:function(f,d,g){return Math.sqrt(this._sqPointToSegmentDist(f,d,g))},simplifyDP:function(x,w){var v=0,u=0,t=w*w;for(var s=1,r=x.length,q;s<r-1;s++){q=this._sqPointToSegmentDist(x[s],x[0],x[r-1]),q>v&&(u=s,v=q)}if(v>=t){var p=x.slice(0,u),o=x.slice(u),n=this.simplifyDP(p,w).slice(0,r-2),m=this.simplifyDP(o,w);return n.concat(m)}return[x[0],x[r-1]]},reducePoints:function(k,h){var q=[k[0]],p=h*h;for(var o=1,n=0,m=k.length;o<m;o++){if(this._sqDist(k[o],k[n])<p){continue}q.push(k[o]),n=o}n<m-1&&q.push(k[m-1]);return q},clipSegment:function(w,v,u,t){var s=u.min,r=u.max,q=t?this._lastCode:this._getBitCode(w,u),p=this._getBitCode(v,u);this._lastCode=p;for(;;){if(!(q|p)){return[w,v]}if(q&p){return !1}var o=q||p,n=this._getEdgeIntersection(w,v,o,u),m=this._getBitCode(n,u);o==q?(w=n,q=m):(v=n,p=m)}},_getEdgeIntersection:function(m,k,s,r){var q=k.x-m.x,p=k.y-m.y,o=r.min,n=r.max;if(s&8){return new L.Point(m.x+q*(n.y-m.y)/p,n.y)}if(s&4){return new L.Point(m.x+q*(o.y-m.y)/p,o.y)}if(s&2){return new L.Point(n.x,m.y+p*(n.x-m.x)/q)}if(s&1){return new L.Point(o.x,m.y+p*(o.x-m.x)/q)}},_getBitCode:function(f,d){var g=0;f.x<d.min.x?g|=1:f.x>d.max.x&&(g|=2),f.y<d.min.y?g|=4:f.y>d.max.y&&(g|=8);return g},_sqDist:function(g,f){var k=f.x-g.x,h=f.y-g.y;return k*k+h*h},_sqPointToSegmentDist:function(m,k,s){var r=s.x-k.x,q=s.y-k.y;if(!r&&!q){return this._sqDist(m,k)}var p=(m.x-k.x)*r+(m.y-k.y)*q,o=p/this._sqDist(k,s);if(o<0){return this._sqDist(m,k)}if(o>1){return this._sqDist(m,s)}var n=new L.Point(k.x+r*o,k.y+q*o);return this._sqDist(m,n)}},L.PolyUtil={},L.PolyUtil.clipPolygon=function(D,C){var B=C.min,A=C.max,z,y=[1,4,2,8],x,w,v,u,t,s,r,q,p=L.LineUtil;for(x=0,s=D.length;x<s;x++){D[x]._code=p._getBitCode(D[x],C)}for(v=0;v<4;v++){r=y[v],z=[];for(x=0,s=D.length,w=s-1;x<s;w=x++){u=D[x],t=D[w],u._code&r?t._code&r||(q=p._getEdgeIntersection(t,u,r,C),q._code=p._getBitCode(q,C),z.push(q)):(t._code&r&&(q=p._getEdgeIntersection(t,u,r,C),q._code=p._getBitCode(q,C),z.push(q)),z.push(u))}D=z}return D},L.DomEvent={addListener:function(m,k,s,r){function p(a){return s.call(r||m,a||L.DomEvent._getEvent())}var q=L.Util.stamp(s);if(L.Browser.touch&&k=="dblclick"&&this.addDoubleTapListener){this.addDoubleTapListener(m,p,q)}else{if("addEventListener" in m){if(k=="mousewheel"){m.addEventListener("DOMMouseScroll",p,!1),m.addEventListener(k,p,!1)}else{if(k=="mouseenter"||k=="mouseleave"){var o=p,n=k=="mouseenter"?"mouseover":"mouseout";p=function(a){if(!!L.DomEvent._checkMouse(m,a)){return o(a)}},m.addEventListener(n,p,!1)}else{m.addEventListener(k,p,!1)}}}else{"attachEvent" in m&&m.attachEvent("on"+k,p)}}m["_leaflet_"+k+q]=p},removeListener:function(g,f,m){var k=L.Util.stamp(m),h="_leaflet_"+f+k;handler=g[h],L.Browser.mobileWebkit&&f=="dblclick"&&this.removeDoubleTapListener?this.removeDoubleTapListener(g,k):"removeEventListener" in g?f=="mousewheel"?(g.removeEventListener("DOMMouseScroll",handler,!1),g.removeEventListener(f,handler,!1)):f=="mouseenter"||f=="mouseleave"?g.removeEventListener(f=="mouseenter"?"mouseover":"mouseout",handler,!1):g.removeEventListener(f,handler,!1):"detachEvent" in g&&g.detachEvent("on"+f,handler),g[h]=null},_checkMouse:function(g,f){var k=f.relatedTarget;if(!k){return !0}try{while(k&&k!=g){k=k.parentNode}}catch(h){return !1}return k!=g},_getEvent:function(){var d=window.event;if(!d){var c=arguments.callee.caller;while(c){d=c.arguments[0];if(d&&Event==d.constructor){break}c=c.caller}}return d},stopPropagation:function(b){L.Browser.ie?event.cancelBubble=!0:b.stopPropagation?b.stopPropagation():b.cancelBubble=!0},disableClickPropagation:function(b){L.DomEvent.addListener(b,"mousedown",L.DomEvent.stopPropagation),L.DomEvent.addListener(b,"click",L.DomEvent.stopPropagation),L.DomEvent.addListener(b,"dblclick",L.DomEvent.stopPropagation)},preventDefault:function(b){L.Browser.ie?event.returnValue=!1:b.preventDefault?b.preventDefault():b.returnValue=!1},stop:function(b){L.DomEvent.preventDefault(b),L.DomEvent.stopPropagation(b)},getMousePosition:function(g,f){var m=g.pageX?g.pageX:g.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,k=g.pageY?g.pageY:g.clientY+document.body.scrollTop+document.documentElement.scrollTop,h=new L.Point(m,k);return f?h.subtract(L.DomUtil.getCumulativeOffset(f)):h},getWheelDelta:function(d){var c=0;d.wheelDelta&&(c=d.wheelDelta/120),d.detail&&(c=-d.detail/3);return c}},L.Util.extend(L.DomEvent,{addDoubleTapListener:function(x,w,v){function m(b){t&&(r.type="dblclick",w(r),u=null)}function n(f){if(f.touches.length==1){var d=Date.now(),g=d-(u||d);r=f.touches[0],t=g>0&&g<=s,u=d}}var u,t=!1,s=250,r,q="_leaflet_",p="touchstart",o="touchend";x[q+p+v]=n,x[q+o+v]=m,x.addEventListener(p,n,!1),x.addEventListener(o,m,!1)},removeDoubleTapListener:function(f,d){var g="_leaflet_";f.removeEventListener(f,f[g+"touchstart"+d],!1),f.removeEventListener(f,f[g+"touchend"+d],!1)}}),L.DomUtil={get:function(b){return typeof b=="string"?document.getElementById(b):b},getStyle:function(g,f){var k=g.style[f];!k&&g.currentStyle&&(k=g.currentStyle[f]);if(!k||k=="auto"){var h=document.defaultView.getComputedStyle(g,null);k=h?h[f]:null}return k=="auto"?null:k},getCumulativeOffset:function(f){var d=0,g=0;do{d+=f.offsetTop||0,g+=f.offsetLeft||0,f=f.offsetParent}while(f);return new L.Point(g,d)},create:function(g,f,m,k){var h=document.createElement(g);h.className=f,k!=undefined&&!isNaN(k)&&$(h).css("z-index",k),m&&m.appendChild(h);return h},disableTextSelection:function(){document.selection&&document.selection.empty&&document.selection.empty(),this._onselectstart||(this._onselectstart=document.onselectstart,document.onselectstart=L.Util.falseFn)},enableTextSelection:function(){document.onselectstart=this._onselectstart,this._onselectstart=null},CLASS_RE:/(\\s|^)'+cls+'(\\s|$)/,hasClass:function(d,c){return d.className.length>0&&(new RegExp("(^|\\s)"+c+"(\\s|$)")).test(d.className)},addClass:function(d,c){L.DomUtil.hasClass(d,c)||(d.className+=(d.className?" ":"")+c)},setOpacity:function(d,c){L.Browser.ie?d.style.filter="alpha(opacity="+Math.round(c*100)+")":d.style.opacity=c},testProp:function(f){var d=document.documentElement.style;for(var g=0;g<f.length;g++){if(f[g] in d){return f[g]}}return !1},getTranslateString:function(b){return L.DomUtil.TRANSLATE_OPEN+b.x+"px,"+b.y+"px"+L.DomUtil.TRANSLATE_CLOSE},getScaleString:function(d,c){return L.DomUtil.getTranslateString(c)+" scale("+d+") "+L.DomUtil.getTranslateString(c.multiplyBy(-1))},setPosition:function(d,c){!d||(d._leaflet_pos=c,L.Browser.webkit?d.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(c):(d.style.left=c.x+"px",d.style.top=c.y+"px"))},getPosition:function(b){return b._leaflet_pos}},L.Util.extend(L.DomUtil,{TRANSITION:L.DomUtil.testProp(["transition","webkitTransition","OTransition","MozTransition","msTransition"]),TRANSFORM:L.DomUtil.testProp(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]),TRANSLATE_OPEN:"translate"+(L.Browser.webkit3d?"3d(":"("),TRANSLATE_CLOSE:L.Browser.webkit3d?",0)":")"}),function(){var f=L.DomUtil.testProp(["userDrag","WebkitUserDrag","OUserDrag","MozUserDrag","msUserDrag"]),d,g;L.Util.extend(L.DomUtil,{disableImageDrag:function(b){if(f){var a=b.style;d=b,g=a[f],a[f]="none"}else{L.DomEvent.addListener(window,"dragstart",L.DomEvent.stop)}},enableImageDrag:function(){f?(d.style[f]=g,d=g=null):L.DomEvent.removeListener(window,"dragstart",L.DomEvent.stop)}})}(),L.Draggable=L.Class.extend({includes:L.Mixin.Events,statics:{START:L.Browser.touch?"touchstart":"mousedown",END:L.Browser.touch?"touchend":"mouseup",MOVE:L.Browser.touch?"touchmove":"mousemove",TAP_TOLERANCE:15},initialize:function(d,c){this._element=d,this._dragStartTarget=c||d},enable:function(){this._enabled||(L.DomEvent.addListener(this._dragStartTarget,L.Draggable.START,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(L.DomEvent.removeListener(this._dragStartTarget,L.Draggable.START,this._onDown),this._enabled=!1)},_isIE9:function(){var f=navigator.userAgent.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/),d=!!f,g=d&&parseFloat(f[1]);return d&&Math.floor(g)===9},_onDown:function(d){if(!(d.shiftKey||d.which!=1&&d.button!=1&&!d.touches)){if(d.touches&&d.touches.length>1){return}L.Browser.touch&&L.DomEvent.preventDefault(d);var c=d.touches&&d.touches.length==1?d.touches[0]:d;L.Browser.mobileWebkit&&(c.target.className+=" leaflet-active"),this._moved=!1,L.DomUtil.disableTextSelection(),L.DomUtil.disableImageDrag(d.target||d.srcElement),this._setMovingCursor(),this._startPos=this._newPos=L.DomUtil.getPosition(this._element),this._startPoint=new L.Point(c.clientX,c.clientY),L.DomEvent.addListener(document,L.Draggable.MOVE,this._onMove,this),L.DomEvent.addListener(document,L.Draggable.END,this._onUp,this),this._isIE9()&&window.parent!==window&&L.DomEvent.addListener(window,"mouseenter",this._onMouseEnter,this)}},_onMove:function(f){if(!(f.touches&&f.touches.length>1)){if(!f.button&&!f.buttons&&(L.Browser.ie||!f.which)&&!f.touches&&!this._isIE9()){this._onUp();return}var d=f.touches&&f.touches.length==1?f.touches[0]:f;this._moved||(this.fire("dragstart"),this._moved=!0);var g=new L.Point(d.clientX,d.clientY);this._newPos=this._startPos.add(g).subtract(this._startPoint),L.Util.requestAnimFrame(this._updatePosition,this,!0),this.fire("drag")}},_updatePosition:function(){L.DomUtil.setPosition(this._element,this._newPos)},_onUp:function(g){if(g&&g.changedTouches){var f=g.changedTouches[0],k=f.target,h=this._newPos&&this._newPos.distanceTo(this._startPos)||0;k.className=k.className.replace(" leaflet-active",""),h<L.Draggable.TAP_TOLERANCE&&this._simulateEvent("click",f)}L.DomUtil.enableTextSelection(),L.DomUtil.enableImageDrag(),this._restoreCursor(),L.DomEvent.removeListener(document,L.Draggable.MOVE,this._onMove),L.DomEvent.removeListener(document,L.Draggable.END,this._onUp),this._isIE9()&&window.parent!==window&&L.DomEvent.removeListener(window,"mouseenter",this._onMouseEnter),this._moved&&this.fire("dragend")},_onMouseEnter:function(b){this._isIE9()&&window.parent!==window&&this._onUp()},_removeActiveClass:function(b){},_setMovingCursor:function(){this._bodyCursor=document.body.style.cursor,document.body.style.cursor="move"},_restoreCursor:function(){document.body.style.cursor=this._bodyCursor},_simulateEvent:function(f,d){var g=document.createEvent("MouseEvent");g.initMouseEvent(f,!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),d.target.dispatchEvent(g)}}),L.Transition=L.Class.extend({includes:L.Mixin.Events,statics:{CUSTOM_PROPS_SETTERS:{position:L.DomUtil.setPosition},implemented:function(){return L.Transition.NATIVE||L.Transition.TIMER}},options:{easing:"ease",duration:0.5},_setProperty:function(f,d){var g=L.Transition.CUSTOM_PROPS_SETTERS;f in g?g[f](this._el,d):this._el.style[f]=d}}),L.Transition=L.Transition.extend({statics:function(){var d=L.DomUtil.TRANSITION,c=d=="webkitTransition"||d=="OTransition"?d+"End":"transitionend";return{NATIVE:!!d,TRANSITION:d,PROPERTY:d+"Property",DURATION:d+"Duration",EASING:d+"TimingFunction",END:c,CUSTOM_PROPS_PROPERTIES:{position:L.Browser.webkit?L.DomUtil.TRANSFORM:"top, left"}}}(),options:{fakeStepInterval:100},initialize:function(d,c){this._el=d,L.Util.setOptions(this,c),L.DomEvent.addListener(d,L.Transition.END,this._onTransitionEnd,this),this._onFakeStep=L.Util.bind(this._onFakeStep,this)},run:function(g){var f,k=[],h=L.Transition.CUSTOM_PROPS_PROPERTIES;for(f in g){g.hasOwnProperty(f)&&(f=h[f]?h[f]:f,f=f.replace(/([A-Z])/g,function(b){return"-"+b.toLowerCase()}),k.push(f))}this._el.style[L.Transition.DURATION]=this.options.duration+"s",this._el.style[L.Transition.EASING]=this.options.easing,this._el.style[L.Transition.PROPERTY]=k.join(", ");for(f in g){g.hasOwnProperty(f)&&this._setProperty(f,g[f])}this._inProgress=!0,this.fire("start"),L.Transition.NATIVE?this._timer=setInterval(this._onFakeStep,this.options.fakeStepInterval):this._onTransitionEnd()},_onFakeStep:function(){this.fire("step")},_onTransitionEnd:function(){this._inProgress&&(this._inProgress=!1,clearInterval(this._timer),this._el.style[L.Transition.PROPERTY]="none",this.fire("step"),this.fire("end"))}}),L.Transition=L.Transition.NATIVE?L.Transition:L.Transition.extend({statics:{getTime:Date.now||function(){return +(new Date)},TIMER:!0,EASINGS:{ease:[0.25,0.1,0.25,1],linear:[0,0,1,1],"ease-in":[0.42,0,1,1],"ease-out":[0,0,0.58,1],"ease-in-out":[0.42,0,0.58,1]},CUSTOM_PROPS_GETTERS:{position:L.DomUtil.getPosition},UNIT_RE:/^[\d\.]+(\D*)$/},options:{fps:50},initialize:function(f,d){this._el=f,L.Util.extend(this.options,d);var g=L.Transition.EASINGS[this.options.easing]||L.Transition.EASINGS.ease;this._p1=new L.Point(0,0),this._p2=new L.Point(g[0],g[1]),this._p3=new L.Point(g[2],g[3]),this._p4=new L.Point(1,1),this._step=L.Util.bind(this._step,this),this._interval=Math.round(1000/this.options.fps)},run:function(h){this._props={};var g=L.Transition.CUSTOM_PROPS_GETTERS,o=L.Transition.UNIT_RE;this.fire("start");for(var n in h){if(h.hasOwnProperty(n)){var m={};if(n in g){m.from=g[n](this._el)}else{var k=this._el.style[n].match(o);m.from=parseFloat(k[0]),m.unit=k[1]}m.to=h[n],this._props[n]=m}}clearInterval(this._timer),this._timer=setInterval(this._step,this._interval),this._startTime=L.Transition.getTime()},_step:function(){var f=L.Transition.getTime(),d=f-this._startTime,g=this.options.duration*1000;d<g?this._runFrame(this._cubicBezier(d/g)):(this._runFrame(1),this._complete())},_runFrame:function(g){var f=L.Transition.CUSTOM_PROPS_SETTERS,m,k,h;for(m in this._props){this._props.hasOwnProperty(m)&&(k=this._props[m],m in f?(h=k.to.subtract(k.from).multiplyBy(g).add(k.from),f[m](this._el,h)):this._el.style[m]=(k.to-k.from)*g+k.from+k.unit)}this.fire("step")},_complete:function(){clearInterval(this._timer),this.fire("end")},_cubicBezier:function(t){var s=Math.pow(1-t,3),r=3*Math.pow(1-t,2)*t,q=3*(1-t)*Math.pow(t,2),p=Math.pow(t,3),o=this._p1.multiplyBy(s),n=this._p2.multiplyBy(r),m=this._p3.multiplyBy(q),k=this._p4.multiplyBy(p);return o.add(n).add(m).add(k).y}}),L.LatLng=function(f,d,g){g!==!0&&(f=Math.max(Math.min(f,90),-90),d=(d+180)%360+(d<-180?180:-180)),this.lat=f,this.lng=d},L.Util.extend(L.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),L.LatLng.prototype={equals:function(d){if(d instanceof L.LatLng){var c=Math.max(Math.abs(this.lat-d.lat),Math.abs(this.lng-d.lng));return c<=L.LatLng.MAX_MARGIN}return !1},toString:function(){return"LatLng("+L.Util.formatNum(this.lat)+", "+L.Util.formatNum(this.lng)+")"}},L.LatLngBounds=L.Class.extend({initialize:function(g,f){if(!!g){var m=g instanceof Array?g:[g,f];for(var k=0,h=m.length;k<h;k++){this.extend(m[k])}}},extend:function(b){!this._southWest&&!this._northEast?(this._southWest=new L.LatLng(b.lat,b.lng),this._northEast=new L.LatLng(b.lat,b.lng)):(this._southWest.lat=Math.min(b.lat,this._southWest.lat),this._southWest.lng=Math.min(b.lng,this._southWest.lng),this._northEast.lat=Math.max(b.lat,this._northEast.lat),this._northEast.lng=Math.max(b.lng,this._northEast.lng))},getCenter:function(){return new L.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new L.LatLng(this._northEast.lat,this._southWest.lng)},getSouthEast:function(){return new L.LatLng(this._southWest.lat,this._northEast.lng)},contains:function(g){var f=this._southWest,m=this._northEast,k,h;g instanceof L.LatLngBounds?(k=g.getSouthWest(),h=g.getNorthEast()):k=h=g;return k.lat>=f.lat&&h.lat<=m.lat&&k.lng>=f.lng&&h.lng<=m.lng}}),L.Projection={},L.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(h){var g=L.LatLng.DEG_TO_RAD,o=this.MAX_LATITUDE,n=Math.max(Math.min(o,h.lat),-o),m=h.lng*g,k=n*g;k=Math.log(Math.tan(Math.PI/4+k/2));return new L.Point(m,k)},unproject:function(g,f){var m=L.LatLng.RAD_TO_DEG,k=g.x*m,h=(2*Math.atan(Math.exp(g.y))-Math.PI/2)*m;return new L.LatLng(h,k,f)}},L.Projection.LonLat={project:function(b){return new L.Point(b.lng,b.lat)},unproject:function(d,c){return new L.LatLng(d.y,d.x,c)}},L.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.3142,R_MAJOR:6378137,project:function(w){var v=L.LatLng.DEG_TO_RAD,u=this.MAX_LATITUDE,t=Math.max(Math.min(u,w.lat),-u),s=this.R_MAJOR,r=w.lng*v*s,q=t*v,p=this.R_MINOR/s,o=Math.sqrt(1-p*p),n=o*Math.sin(q);n=Math.pow((1-n)/(1+n),o*0.5);var m=Math.tan(0.5*(Math.PI*0.5-q))/n;q=-s*Math.log(m);return new L.Point(r,q)},unproject:function(B,A){var z=L.LatLng.RAD_TO_DEG,y=this.R_MAJOR,x=B.x*z/y,w=this.R_MINOR/y,v=Math.sqrt(1-w*w),u=Math.exp(-B.y/y),t=Math.PI/2-2*Math.atan(u),s=15,r=1e-7,q=s,p=0.1,o;while(Math.abs(p)>r&&--q>0){o=v*Math.sin(t),p=Math.PI/2-2*Math.atan(u*Math.pow((1-o)/(1+o),0.5*v))-t,t+=p}return new L.LatLng(t*z,x,A)}},L.CRS={latLngToPoint:function(f,d){var g=this.projection.project(f);return this.transformation._transform(g,d)},pointToLatLng:function(g,f,k){var h=this.transformation.untransform(g,f);return this.projection.unproject(h,k)},project:function(b){return this.projection.project(b)}},L.CRS.EPSG3857=L.Util.extend({},L.CRS,{code:"EPSG:3857",projection:L.Projection.SphericalMercator,transformation:new L.Transformation(0.5/Math.PI,0.5,-0.5/Math.PI,0.5),project:function(f){var d=this.projection.project(f),g=6378137;return d.multiplyBy(g)}}),L.CRS.EPSG900913=L.Util.extend({},L.CRS.EPSG3857,{code:"EPSG:900913"}),L.CRS.EPSG4326=L.Util.extend({},L.CRS,{code:"EPSG:4326",projection:L.Projection.LonLat,transformation:new L.Transformation(1/360,0.5,-1/360,0.5)}),L.CRS.EPSG3395=L.Util.extend({},L.CRS,{code:"EPSG:3395",projection:L.Projection.Mercator,transformation:function(){var f=L.Projection.Mercator,d=f.R_MAJOR,g=f.R_MINOR;return new L.Transformation(0.5/(Math.PI*d),0.5,-0.5/(Math.PI*g),0.5)}()}),L.LayerGroup=L.Class.extend({initialize:function(f){this._layers={},this._hidden=!1;if(f){for(var d=0,g=f.length;d<g;d++){this.addLayer(f[d])}}},hide:function(){this._hidden||(this._hidden=!0,$.each(this._layers,function(d,c){c._icon&&$(c._icon).hide(),c._container&&(L.Browser.ie?$(c._container).css("visibility","hidden"):$(c._container).hide())}))},show:function(){!this._hidden||(this._hidden=!1,$.each(this._layers,function(d,c){c._icon&&$(c._icon).show(),c._container&&(L.Browser.ie?$(c._container).css("visibility","visible"):$(c._container).show())}))},addLayer:function(d){var c=L.Util.stamp(d);this._layers[c]=d,this._map&&this._map.addLayer(d);return this},removeLayer:function(d){var c=L.Util.stamp(d);delete this._layers[c],this._map&&this._map.removeLayer(d);return this},clearLayers:function(){this._iterateLayers(this.removeLayer,this);return this},onAdd:function(b){this._map=b,this._iterateLayers(b.addLayer,b)},onRemove:function(b){this._iterateLayers(b.removeLayer,b),delete this._map},_iterateLayers:function(f,d){for(var g in this._layers){this._layers.hasOwnProperty(g)&&f.call(d,this._layers[g])}}}),L.FeatureGroup=L.LayerGroup.extend({includes:L.Mixin.Events,addLayer:function(b){this._initEvents(b),L.LayerGroup.prototype.addLayer.call(this,b),this._popupContent&&b.bindPopup&&b.bindPopup(this._popupContent)},bindPopup:function(d){this._popupContent=d;for(var c in this._layers){this._layers.hasOwnProperty(c)&&this._layers[c].bindPopup&&this._layers[c].bindPopup(d)}},_events:["click","dblclick","mouseover","mouseout"],_initEvents:function(f){for(var d=0,g=this._events.length;d<g;d++){f.on(this._events[d],this._propagateEvent,this)}},_propagateEvent:function(b){b.layer=b.target,b.target=this,this.fire(b.type,b)}}),L.TileLayer=L.Class.extend({includes:L.Mixin.Events,options:{active:!0,zIndex:0,id:(new Date).getTime().toString(),minZoom:0,maxZoom:18,tileSize:256,subdomains:"0123",errorTileUrl:"",attribution:"",opacity:0.65,scheme:"xyz",noWrap:!1,indexUrl:null,syncLoad:!1,fps:[4,0.5],defaultFrame:$.wxcMap.FIRST,frameIndex:null,unloadInvisibleTiles:L.Browser.mobileWebkit,updateWhenIdle:L.Browser.mobileWebkit,click:null,type:"TileLayer"},initialize:function(d,c){L.Util.setOptions(this,c),this._tileUrl=d,this._inventory=null,this._inventoryLoaded=!1,this._currentFrameIndex,this._animationFrames=[],this._active=this.options.active,this._outOfZoomRange=!1,this._mode=this.options.indexUrl?L.TileLayer.PLAYER_MODE:L.TileLayer.DEFAULT_MODE,typeof this.options.subdomains=="string"&&(this.options.subdomains=this.options.subdomains.split(""))},_onMoveEndHandler:function(d){var c=this;c.options.updateWhenIdle&&c._update(d),c._overlayCleanup()},onAdd:function(f){this._map=f,this._changeState($.wxcMap.IDLE);var d=this,g=this._map.getZoom();this._outOfZoomRange=g>this.options.maxZoom||g<this.options.minZoom,this._map.on("zoomend",function(b){d.onZoomEnd(b.target._zoom)}),this._map.on("mousedown",this._idle,this),this._map.on("movestart",this._idle,this),this._initContainer(),this._initOverlayContainer(),this._createTileProto(),f.on("viewreset",this._reset,this,this.options.zIndex),this._map.on("moveend",d._onMoveEndHandler,d),this.options.updateWhenIdle||(this._limitedUpdate=L.Util.limitExecByInterval(this._update,100,this),f.on("move",this._limitedUpdate,this)),this._outOfZoomRange?(this._map.fire($.wxcMap.MAP_LAYER_OUT_OF_ZOOM_RANGE,{layer:this}),this._updateAttribution("")):this._map.fire($.wxcMap.MAP_LAYER_INTO_ZOOM_RANGE,{layer:this});!!this._active&&!this._outOfZoomRange&&(this._mode==L.TileLayer.DEFAULT_MODE?(this._reset(),this._update()):this._mode==L.TileLayer.PLAYER_MODE&&this._loadInventory(this.options.frameIndex),this._map.$wxcMap.wxcMap("addLegend",this.options))},_usedOverlayImages:[],_overlayCleanup:function(){$.each(this._usedOverlayImages,function(d,c){$(c).remove()}),this._usedOverlayImages=[]},_killAnimation:function(){this._hideOverlays(),this._animationFrames=[];if(L.Browser.mobileWebkit){var b=this;this._overlayContainer&&$(this._overlayContainer).children().each(function(a,d){b._usedOverlayImages.push(d)})}else{$(this._overlayContainer).empty()}},refreshData:function(){var b=$.Deferred();if(!this._active||this._outOfZoomRange){return b.resolve().promise()}if(this._mode==L.TileLayer.DEFAULT_MODE){this._killTiles(),this._refresh();return b.resolve().promise()}if(this._mode==L.TileLayer.PLAYER_MODE){this._state==$.wxcMap.LOADING&&b.resolve().promise(),this._killTiles(),this._killAnimation(),this._state!=$.wxcMap.IDLE&&this._idle();return this._loadInventory(this._currentFrameIndex)}},mapClickHandler:function(b){if(!this.options.click){return !1}if(!this._active){return !1}if(this._outOfZoomRange){return !1}this.options.click({latlon:$.wxcMap.toWxcLatLon(b.latlng),layerPoint:b.layerPoint});return !0},onZoomEnd:function(g){var f=g>this.options.maxZoom||g<this.options.minZoom,m=this._outOfZoomRange,k=m&&!f,h=!m&&f;k?(this._outOfZoomRange=!1,!this.present(),this._map.fire($.wxcMap.MAP_LAYER_INTO_ZOOM_RANGE,{layer:this})):h&&(this._outOfZoomRange=!0,!this.unPresent(),this._map.fire($.wxcMap.MAP_LAYER_OUT_OF_ZOOM_RANGE,{layer:this}))},_getDefaultFrameIndex:function(){return this.options.defaultFrame==$.wxcMap.FIRST?0:this._inventory.length-1},_loadInventory:function(k){function o(a){q._inventory=[],q.isLocalRadar()?$(a).find("radarfile").each(function(d,c){var u=$(this).attr("name"),t=u.substr(0,u.lastIndexOf(".")),s=t.split(".");t="{0}-{1}-{2}T{3}:{4}:00".wxcFormat(s[0],s[1],s[2],s[3].substr(0,2),s[3].substr(2,2));var r=p(t);q._inventory.push({time:t,datakey:null,epoch:r,fileName:u})}):$(a).find("time").each(function(d,c){var t=c.text?c.text:c.textContent,s=$(this).attr("datakey"),r=p(t);q._inventory.push({time:t,datakey:s,epoch:r,fileName:t})}),q._inventory.sort(function(f,d){var g=f.epoch-d.epoch;if(g===0){return 0}if(g>0){return 1}return -1}),k=k==null?q._getDefaultFrameIndex():k,q._setFrameIndex(k),q._map.fire($.wxcMap.MAP_LAYER_INVENTORY_LOAD_COMPLETE,{layer:q}),q._reset(),q._inventoryLoaded=!0,q._update(),q._changeState($.wxcMap.IDLE),h.resolve()}function p(s){var r=s.split("-")[0],y=parseInt(s.split("-")[1],10)-1,x=s.split("-")[2].split("T")[0],w=s.split("T")[1].split(":")[0],v=s.split("T")[1].split(":")[1],u=new Date(r,y,x,w,v,0,0),t=u.getTime();t-=u.getTimezoneOffset()*60*1000;return t}var h=$.Deferred(),q=this;this._inventory=null,this._changeState($.wxcMap.LOADING),this._inventoryLoaded=!1,this._map.fire($.wxcMap.MAP_LAYER_INVENTORY_LOAD_BEGIN,{layer:this});var n=this.options.indexUrl;n=n.wxcReplace("{cb}",Math.floor(Math.random()*(new Date).getTime())),n=n.wxcReplace("{host}",$.wxc.DEFAULTS.host);var m={url:n,xdmProvider:this.options.xdmProvider,dataType:"xml",success:o,error:function(b,f,c){q._changeState($.wxcMap.IDLE),_map.fire($.wxcMap.MAP_ERROR,{error:c,msg:f}),h.fail(c)}};$.wxc.ajax(m);return h.promise()},isLocalRadar:function(){return this.options.id==$.wxcMap.LOCAL_RADAR},_changeState:function(b){if(this._state==b){return !1}this._state=b,this._map.fire($.wxcMap.MAP_LAYER_STATE_CHANGED,{layer:this});return !0},updateTileUrl:function(d,c){this._tileUrl=d;if(!!c){this._refresh();return this}},_refresh:function(){this._reset(),this._update()},_idle:function(b){this._state==$.wxcMap.PLAYING&&this._killTiles(),this._changeState($.wxcMap.IDLE)&&(this._killAnimation(),this._hardUpdate(b))},_playAnimationFrames:function(){if(this._state==$.wxcMap.LOADING){this._changeState($.wxcMap.PLAYING);var d=this;function c(){if(d._state==$.wxcMap.PLAYING){if(d._animationFrames.length<1){return}d._incrementFrameIndex(),d._hardUpdate();var a=d.getFrameDurationMs();window.setTimeout(function(){c()},a)}}c()}},_loadAnimationFrames:function(h){this._overlayCleanup(),this._changeState($.wxcMap.LOADING),this._map.fire($.wxcMap.MAP_LAYER_ANIMATION_LOAD_BEGIN,{layer:this}),this._killAnimation();var g=this._map.getBounds(),o=this,n=0,m=this._inventory.length;if(this.options.syncLoad){function k(d){if(d==o._inventory.length){o._map.fire($.wxcMap.MAP_LAYER_ANIMATION_LOAD_COMPLETE,{layer:o}),h&&h()}else{var c=o._inventory[d],b={url:o.getOverlayUrl(c),id:o.options.id+"_anim_"+d,bounds:g,zIndex:o.options.zIndex,container:o._overlayContainer,opacity:o.options.opacity},a=new L.AnimationImageOverlay(b,function(){o._state==$.wxcMap.LOADING&&(o._map.fire($.wxcMap.MAP_LAYER_ANIMATION_LOAD_PROGRESS,{layer:o,delta:o.getFrameDelta(n)}),o._hideTiles(),o._hideOverlayFrames(),o._showOverlayFrame(d),o._showOverlays(),k(++n))});if(o._state!=$.wxcMap.LOADING){return}o._map.addLayer(a),o._animationFrames.push(a)}}k(n)}else{$.each(this._inventory,function(d,c){var b={url:o.getOverlayUrl(c),id:o.options.id+"_anim_"+d,bounds:g,zIndex:o.options.zIndex,container:o._overlayContainer,opacity:o.options.opacity},a=new L.AnimationImageOverlay(b,function(){o._state==$.wxcMap.LOADING&&(o._map.fire($.wxcMap.MAP_LAYER_ANIMATION_LOAD_PROGRESS,{layer:o,delta:o.getFrameDelta(n)}),++n==m&&(o._map.fire($.wxcMap.MAP_LAYER_ANIMATION_LOAD_COMPLETE,{layer:o}),h&&h()))});o._state==$.wxcMap.LOADING&&(o._map.addLayer(a),o._animationFrames.push(a))})}},_checkPlayable:function(b){if(!this._active||this._outOfZoomRange){b&&this._map.fire($.wxcMap.MAP_ERROR,{msg:"'"+this.options.id+"' this is not an active layer"});return !1}if(this._mode!=L.TileLayer.PLAYER_MODE&&this._inventory){b&&this._map.fire($.wxcMap.MAP_ERROR,{msg:"'"+this.options.id+"' this is not a playable layer"});return !1}return !0},play:function(){if(!!this._checkPlayable(!0)){var b=this;this._overlayCleanup(),this._loadAnimationFrames(function(){b._playAnimationFrames()});return this}},pause:function(){if(!!this._checkPlayable(!0)){this._idle(),this._overlayCleanup();return this}},stop:function(){if(!!this._checkPlayable(!0)){this._idle(this._getDefaultFrameIndex()),this._overlayCleanup();return this}},goToDelta:function(d){if(!!this._checkPlayable(!0)){var c=this.getFrameIndex(d);this._killAnimation(),this._changeState($.wxcMap.IDLE),this._setFrameIndex(c),this._hardUpdate(),this._overlayCleanup();return this}},getFrameDelta:function(d){d=isNaN(d)?this._currentFrameIndex:d;var c=1/(this._inventory.length-1)*d;return c},getFrameIndex:function(d){if(!d||d==0){return 0}if(d>1){return this._inventory.length-1}var c=Math.floor((this._inventory.length-1)*d);return c},fwd:function(){if(!!this._checkPlayable(!0)){this._killAnimation(),this._changeState($.wxcMap.IDLE),this._incrementFrameIndex(),this._hardUpdate(),this._overlayCleanup();return this}},back:function(){if(!!this._checkPlayable(!0)){this._killAnimation(),this._changeState($.wxcMap.IDLE),this._decrementFrameIndex(),this._hardUpdate(),this._overlayCleanup();return this}},_incrementFrameIndex:function(){var f=0,d=this._inventory.length-1,g=this._currentFrameIndex+1;this._currentFrameIndex=g>d?f:g,this._map.fire($.wxcMap.MAP_LAYER_FRAME_CHANGED,{layer:this,frame:this.getFrameInfo()})},_decrementFrameIndex:function(){var f=0,d=this._inventory.length-1,g=this._currentFrameIndex-1;this._currentFrameIndex=g<f?d:g,this._map.fire($.wxcMap.MAP_LAYER_FRAME_CHANGED,{layer:this,frame:this.getFrameInfo()})},_setFrameIndex:function(f){if(this._currentFrameIndex!=f){var d=0,g=this._inventory.length-1;f<d&&(f=d),f>g&&(f=g),this._currentFrameIndex=f,this._map.fire($.wxcMap.MAP_LAYER_FRAME_CHANGED,{layer:this,frame:this.getFrameInfo()})}},getFrameInfo:function(b){b=isNaN(b)?this._currentFrameIndex:b;return{index:b,delta:this.getFrameDelta(b),time:this._inventory[b].time,epoch:this._inventory[b].epoch,datakey:this._inventory[b].datakey}},getFrameDurationMs:function(f){f=isNaN(f)?this._currentFrameIndex:f;var d=f<this._inventory.length-1?this.options.fps[0]:this.options.fps[1],g=1000/d;return g},_killDomElements:function(){this._killAnimation(),this._overlayCleanup(),$(".leaflet-tile-pane").find("."+this.options.id).remove(),$(".leaflet-tile-pane").find("."+this.options.id+"-anim").remove(),$(this._container).remove(),delete this._container,$(this._overlayContainer).remove(),this._overlayContainer=null},onRemove:function(d){var c=this;this._killDomElements(),this._map.off("mousedown",this._idle,this),this._map.off("movestart",this._idle,this),this._map.off("viewreset",this._reset,this),this._map.off("moveend",c._onMoveEndHandler,c),this.options.updateWhenIdle||this._map.off("move",this._limitedUpdate,this),this._map.$wxcMap.wxcMap("removeLegend",this.options)},setOpacity:function(b){this.options.opacity=b,this._setOpacity(b);if(L.Browser.webkit){for(i in this._tiles){this._tiles[i].style.webkitTransform+=" translate(0,0)"}}return this},_setOpacity:function(d){L.Browser.ie||L.Browser.chrome?this._tiles&&$.each(this._tiles,function(a,f){L.DomUtil.setOpacity(f,d)}):L.DomUtil.setOpacity(this._container,d);if(this._animationFrames){var c=this;$.each(this._animationFrames,function(b,f){if(!f.setOpacity){return !0}f.setOpacity(c.options.opacity)})}},_initContainer:function(){this._killDomElements();var b=this._map.getPanes().tilePane;if(!this._container||b.empty){this._container=L.DomUtil.create("div","leaflet-layer "+this.options.id,b,this.options.zIndex),this._setOpacity(this.options.opacity)}},_initOverlayContainer:function(){var b=this._map.getPanes().tilePane;if(!this._overlayContainer||b.empty){this._overlayContainer=L.DomUtil.create("div","leaflet-layer "+this.options.id+"-anim leaflet-hidden",b,this.options.zIndex),this._setOpacity(this.options.opacity)}},_reset:function(){this._tiles={},this._initContainer(),this._initOverlayContainer(),this._container.innerHTML=""},_killTiles:function(){this._tiles={},$(this._container).empty()},_hideTiles:function(){$(this._container).addClass("leaflet-hidden")},_showTiles:function(){$(this._container).removeClass("leaflet-hidden")},_showOverlays:function(){$(this._overlayContainer).removeClass("leaflet-hidden")},_hideOverlays:function(){$(this._overlayContainer).addClass("leaflet-hidden")},_hideOverlayFrames:function(){$.each(this._animationFrames,function(d,c){c.hide()})},_showOverlayFrame:function(b){b=isNaN(b)?this._currentFrameIndex:b,this._animationFrames&&this._animationFrames[b]&&this._animationFrames[b].show()},_updateAttribution:function(b){this._map.attributionControl.removeAttribution(this.options.attribution),b&&(this.options.attribution=b),this._map.attributionControl.addAttribution(this.getAttribution())},isActive:function(){return this._active},setAttribution:function(b){this._updateAttribution(b);return this},getAttribution:function(){return this._active&&!this._outOfZoomRange?this.options.attribution:""},activate:function(b){if(!this._active){this._active=!0,this._map.fire($.wxcMap.MAP_LAYER_ACTIVATED,{layer:this}),this.present();return this}},deactivate:function(){if(!!this._active){this._active=!1,this._map.fire($.wxcMap.MAP_LAYER_DEACTIVATED,{layer:this}),this.unPresent();return this}},present:function(){if(!this._active){return !1}if(this._outOfZoomRange){return !1}this._mode==L.TileLayer.DEFAULT_MODE?(this._reset(),this._hardUpdate()):this._mode==L.TileLayer.PLAYER_MODE&&this._loadInventory(this._currentFrameIndex),this._updateAttribution(),this._map.$wxcMap.wxcMap("addLegend",this.options);return !0},unPresent:function(){if(this._active&&!this._outOfZoomRange){return !1}this._killTiles(),this._mode!=L.TileLayer.DEFAULT_MODE&&this._mode==L.TileLayer.PLAYER_MODE&&this._idle(),this._updateAttribution(),this._map.$wxcMap.wxcMap("removeLegend",this.options);return !0},_hardUpdate:function(b){isNaN(b)||this._setFrameIndex(b),this._state==$.wxcMap.PLAYING?(this._hideTiles(),this._hideOverlayFrames(),this._showOverlayFrame(),this._showOverlays()):(this._hideOverlayFrames(),this._showTiles(),this._update(null,!0))},_update:function(k,h){if(!!this._active){if(this._outOfZoomRange){return}if(this._mode==L.TileLayer.PLAYER_MODE&&!this._inventoryLoaded){return}var q=this._map.getPixelBounds(),p=this.options.tileSize,o=new L.Point(Math.floor(q.min.x/p),Math.floor(q.min.y/p)),n=new L.Point(Math.floor(q.max.x/p),Math.floor(q.max.y/p)),m=new L.Bounds(o,n);this._addTilesFromCenterOut(m,h),this.options.unloadInvisibleTiles&&this._removeOtherTiles(m)}},_addTilesFromCenterOut:function(B,A){if(!!this._active){if(this._outOfZoomRange){return}var z=[],y=B.getCenter(),x=this,w={};for(var v=B.min.y;v<=B.max.y;v++){for(var u=B.min.x;u<=B.max.x;u++){var t=u+":"+v,s=this._tiles?t in this._tiles:!1;if(s&&A){w[t]=this._tiles[t],delete this._tiles[t]}else{if(s){continue}}z.push(new L.Point(u,v))}}z.sort(function(d,c){return d.distanceTo(y)-c.distanceTo(y)}),this._tilesToLoad=z.length;for(var r=0,q=this._tilesToLoad;r<q;r++){var p=z[r],t=p.x+":"+p.y,o=w[t];this._addTile(p,o)}}},_removeOtherTiles:function(g){var f,m,k,h;for(h in this._tiles){if(this._tiles.hasOwnProperty(h)){f=h.split(":"),m=parseInt(f[0],10),k=parseInt(f[1],10);if(m<g.min.x||m>g.max.x||k<g.min.y||k>g.max.y){this._tiles[h].src="",this._tiles[h].parentNode==this._container&&this._container.removeChild(this._tiles[h]),delete this._tiles[h]}}}},_addTile:function(k,h){if(!!this._container){var q=this._getTilePos(k),p=this._map.getZoom(),o=k.x+":"+k.y,n=1<<p;this.options.noWrap||(k.x=(k.x%n+n)%n);if(k.y<0||k.y>=n){return}var m=this._createTile();m.overwriteTile=h,L.DomUtil.setPosition(m,q),m.overwriteTile&&($(m).addClass("leaflet-hidden"),L.Browser.mobileWebkit&&($(m.overwriteTile).addClass("leaflet-hidden"),this._usedOverlayImages.push(h))),(L.Browser.ie||L.Browser.chrome)&&L.DomUtil.setOpacity(m,this.options.opacity),this._tiles[o]=m,this.options.scheme=="tms"&&(k.y=n-k.y-1),this._loadTile(m,k,p),this._container.appendChild(m)}},_getTilePos:function(f){var d=this._map.getPixelOrigin(),g=this.options.tileSize;return f.multiplyBy(g).subtract(d)},getConfigTileUrl:function(b){return typeof b=="string"?b:b[$.wxc.getSystemOfMeasure()]},getOverlayUrl:function(g,f,m,k){f=f||this._map.getSize().x,m=m||this._map.getSize().y,k=k||this._map.getBounds();var h=this.getConfigTileUrl(this._tileUrl);h=h.replace("{width}",f).replace("{height}",m).replace("{cLon}",k.getCenter().lng).replace("{uLat}",k.getNorthEast().lat).replace("{lLat}",k.getSouthEast().lat).replace("{time}",this.isLocalRadar()?g.fileName:g.time).replace("{datakey}",g.datakey).replace("{cb}",Math.floor(Math.random()*(new Date).getTime())).replace("{host}",$.wxc.DEFAULTS.host);return h},getTileUrl:function(u,t,s,r){var q=this.options.subdomains,p=this.options.subdomains[(u.x+u.y)%q.length];s=s||256,r=r||256;var o=this.getConfigTileUrl(this._tileUrl);o=o.replace("{s}",p).replace("{z}",t).replace("{x}",u.x).replace("{y}",u.y).replace("{width}",s).replace("{height}",r).replace("{q}",this._map.tileXYtoQuadKey(u,t)).replace("{cb}",Math.floor(Math.random()*(new Date).getTime())).wxcReplace("{host}",$.wxc.DEFAULTS.host);if(o.indexOf("{cLon}")>-1){var n=this._map.tileXYtoMercator(u,t);o=o.replace("{cLon}",n.cLon).replace("{uLat}",n.uLat).replace("{lLat}",n.lLat)}if(this._mode==L.TileLayer.PLAYER_MODE&&this._inventory&&this._inventory[this._currentFrameIndex]){var m=this._inventory[this._currentFrameIndex],k=this.isLocalRadar()?m.fileName:m.time;o=o.replace("{time}",k).replace("{datakey}",m.datakey)}return o},_createTileProto:function(){this._tileImg=L.DomUtil.create("img","leaflet-tile"),this._tileImg.galleryimg="no";var b=this.options.tileSize;this._tileImg.style.width=b+"px",this._tileImg.style.height=b+"px"},_createTile:function(){var b=this._tileImg.cloneNode(!1);b.onselectstart=b.onmousemove=L.Util.falseFn;return b},_loadTile:function(f,d,g){f._layer=this,f.onload=this._tileOnLoad,f.onerror=this._tileOnError,f.src=this.getTileUrl(d,g)},_tileOnLoad:function(b){this.className+=" leaflet-tile-loaded",this._layer.fire("tileload",{tile:this,url:this.src}),this._layer._tilesToLoad--,this._layer._tilesToLoad||this._layer.fire("load"),$(this).removeClass("leaflet-hidden"),this.overwriteTile&&(L.Browser.mobileWebkit||$(this.overwriteTile).remove())},_tileOnError:function(f){var d=this._layer;d.fire("tileerror",{tile:this,url:this.src});var g=d.options.errorTileUrl;g&&(this.src=g)}}),L.TileLayer.DEFAULT_MODE="DEFAULT_MODE",L.TileLayer.PLAYER_MODE="PLAYER_MODE",L.TileLayer.WMS=L.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(f,d){this._url=f,this.wmsParams=L.Util.extend({},this.defaultWmsParams),this.wmsParams.width=this.wmsParams.height=this.options.tileSize;for(var g in d){this.options.hasOwnProperty(g)||(this.wmsParams[g]=d[g])}L.Util.setOptions(this,d)},onAdd:function(d){var c=parseFloat(this.wmsParams.version)>=1.3?"crs":"srs";this.wmsParams[c]=d.options.crs.code,L.TileLayer.prototype.onAdd.call(this,d)},getTileUrl:function(u,t){var s=this.options.tileSize,r=u.multiplyBy(s),q=r.add(new L.Point(s,s)),p=this._map.unproject(r,this._zoom,!0),o=this._map.unproject(q,this._zoom,!0),n=this._map.options.crs.project(p),m=this._map.options.crs.project(o),k=[n.x,m.y,m.x,n.y].join(",");return this._url+L.Util.getParamString(this.wmsParams)+"&bbox="+k}}),L.TileLayer.Canvas=L.TileLayer.extend({options:{async:!1},initialize:function(b){L.Util.setOptions(this,b)},_createTileProto:function(){this._canvasProto=L.DomUtil.create("canvas","leaflet-tile");var b=this.options.tileSize;this._canvasProto.width=b,this._canvasProto.height=b},_createTile:function(){var b=this._canvasProto.cloneNode(!1);b.onselectstart=b.onmousemove=L.Util.falseFn;return b},_loadTile:function(f,d,g){f._layer=this,this.drawTile(f,d,g),this.options.async||this.tileDrawn(f)},drawTile:function(f,d,g){},tileDrawn:function(b){this._tileOnLoad.call(b)}}),L.ImageOverlay=L.Class.extend({includes:L.Mixin.Events,initialize:function(d,c){this._url=d,this._bounds=c},onAdd:function(b){this._map=b,this._image||this._initImage(),b.getPanes().overlayPane.appendChild(this._image),b.on("viewreset",this._reset,this),this._reset()},onRemove:function(b){b.getPanes().overlayPane.removeChild(this._image),b.off("viewreset",this._reset,this)},_initImage:function(){this._image=L.DomUtil.create("img","leaflet-image-layer"),this._image.style.visibility="hidden",L.Util.extend(this._image,{galleryimg:"no",onselectstart:L.Util.falseFn,onmousemove:L.Util.falseFn,onload:this._onImageLoad,src:this._url})},_reset:function(){var f=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),d=this._map.latLngToLayerPoint(this._bounds.getSouthEast()),g=d.subtract(f);L.DomUtil.setPosition(this._image,f),this._image.style.width=g.x+"px",this._image.style.height=g.y+"px"},_onImageLoad:function(){this.style.visibility=""}}),L.Popup=L.Class.extend({includes:L.Mixin.Events,options:{maxWidth:300,autoPan:!0,closeButton:!0,offset:new L.Point(0,2),autoPanPadding:new L.Point(5,5)},initialize:function(b){L.Util.setOptions(this,b)},onAdd:function(b){this._map=b,this._container||this._initLayout(),this._updateContent(),this._container.style.opacity="0",this._map._panes.popupPane.appendChild(this._container),this._map.on("viewreset",this._updatePosition,this),this._map.options.closePopupOnClick&&(this._map.on("click",this._close,this),this._map.on("movestart",this._close,this)),this._update(),this._container.style.opacity="1",this._opened=!0},onRemove:function(b){b._panes.popupPane.removeChild(this._container),b.off("viewreset",this._updatePosition,this),this._map.options.closePopupOnClick&&(b.off("click",this._close,this),b.off("movestart",this._close,this)),this._container.style.opacity="0",this._opened=!1},setLatLng:function(b){this._latlng=b,this._opened&&this._update();return this},setContent:function(b){this._content=b,this._opened&&this._update();return this},_close:function(){this._opened&&this._map.removeLayer(this)},_initLayout:function(){this._container=L.DomUtil.create("div","leaflet-popup"),this._closeButton=L.DomUtil.create("a","leaflet-popup-close-button",this._container),this._closeButton.href="#close",this._closeButton.onclick=L.Util.bind(this._onCloseButtonClick,this),this._wrapper=L.DomUtil.create("div","leaflet-popup-content-wrapper",this._container),L.DomEvent.disableClickPropagation(this._wrapper),this._contentNode=L.DomUtil.create("div","leaflet-popup-content",this._wrapper),this._tipContainer=L.DomUtil.create("div","leaflet-popup-tip-container",this._container),this._tip=L.DomUtil.create("div","leaflet-popup-tip",this._tipContainer)},_update:function(){this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan()},_updateContent:function(){!this._content||(typeof this._content=="string"?this._contentNode.innerHTML=this._content:(this._contentNode.innerHTML="",this._contentNode.appendChild(this._content)))},_updateLayout:function(){this._container.style.width="",this._container.style.whiteSpace="nowrap";var b=this._container.offsetWidth;this._container.style.width=(b>this.options.maxWidth?this.options.maxWidth:b)+"px",this._container.style.whiteSpace="",this._containerWidth=this._container.offsetWidth},_updatePosition:function(){var b=this._map.latLngToLayerPoint(this._latlng);this._containerBottom=-b.y-this.options.offset.y,this._containerLeft=b.x-Math.round(this._containerWidth/2)+this.options.offset.x,this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"},_adjustPan:function(){if(!!this.options.autoPan){var h=this._container.offsetHeight,g=new L.Point(this._containerLeft,-h-this._containerBottom),o=this._map.layerPointToContainerPoint(g),n=new L.Point(0,0),m=this.options.autoPanPadding,k=this._map.getSize();o.x<0&&(n.x=o.x-m.x),o.x+this._containerWidth>k.x&&(n.x=o.x+this._containerWidth-k.x+m.x),o.y<0&&(n.y=o.y-m.y),o.y+h>k.y&&(n.y=o.y+h-k.y+m.y),(n.x||n.y)&&this._map.panBy(n)}},_onCloseButtonClick:function(b){this._close(),L.DomEvent.stop(b)}}),L.Icon=L.Class.extend({iconUrl:L.ROOT_URL+"images/marker.png",shadowUrl:null,iconSize:null,shadowSize:null,iconAnchor:new L.Point(0,0),popupAnchor:new L.Point(0,0),anchorPoint:$.wxcMap.MIDDLE_CENTER,initialize:function(b){b&&(this.iconUrl=b)},createIcon:function(b){return this._createIcon("icon",b)},createShadow:function(){return this._createIcon("shadow")},_createIcon:function(g,f){var k=this[g+"Size"],h=this[g+"Url"];this._img=this._createImg(h),f!=undefined&&!isNaN(f)&&$(this._img).css("z-index",f),L.Browser.ie||$(this._img).hide();if(!h){return null}this._img.className="leaflet-marker-"+g;return this._img},_setIconAnchorXY:function(h){var g=h.width?Number(h.width):Number($(h).attr("width")),o=h.height?Number(h.height):Number($(h).attr("height")),n=g*0.5,m=o*0.5,k=new L.Point(0,0);switch(this.anchorPoint){case $.wxcMap.TOP_LEFT:break;case $.wxcMap.TOP_CENTER:k.x=n;break;case $.wxcMap.TOP_RIGHT:k.x=g;break;case $.wxcMap.MIDDLE_LEFT:k.y=m;break;case $.wxcMap.MIDDLE_CENTER:k.x=n,k.y=m;break;case $.wxcMap.MIDDLE_RIGHT:k.y=m,k.x=g;break;case $.wxcMap.BOTTOM_LEFT:k.y=o;break;case $.wxcMap.BOTTOM_CENTER:k.y=o,k.x=n;break;case $.wxcMap.BOTTOM_RIGHT:k.y=o,k.x=g}this.iconAnchor=k,h.style.marginLeft=-this.iconAnchor.x+"px",h.style.marginTop=-this.iconAnchor.y+"px",$(h).show()},_createImg:function(f){var d,g=this;d=document.createElement("img"),d.onload=function(b){g._setIconAnchorXY(this)},d.src=f;return d}}),L.Marker=L.Class.extend({includes:L.Mixin.Events,options:{icon:new L.Icon,title:"",clickable:!0,zIndex:0,minZoom:null,maxZoom:null,click:null,dragend:null,projectedPath:null},initialize:function(d,c){L.Util.setOptions(this,c),this._latlng=d},onAdd:function(d){var c=this;this._map=d,this.onAddHandler=function(b){if(!c.isOutOfZoomRange()){c._map.off("zoomend",c.onAddHandler),c.onAddHandler=null,c._initIcon(),c._map.on("viewreset",c._reset,c),c._reset();function f(g){g={latlon:$.wxcMap.toWxcLatLon(g.target._latlng)};return g}c.options.click&&c.on("click",function(g){c.options.click(f(g))}),c.options.dragend&&c.on("dragend",function(g){c.options.dragend(f(g))}),c.setProjectedPath(c.options.projectedPath);return !0}return !1},this.onAddHandler()||c._map.on("zoomend",this.onAddHandler,this)},isMouseOver:function(h){var g=h.pageX,o=h.pageY,n=$(h.target).offset(),m=$(h.target).width(),k=$(h.target).height();return g>n.left&&g<n.left+m&&o>n.top&&o<n.top+k?!0:!1},setProjectedPath:function(d){if(!!d){if(!this.options.icon){return}if(!this.options.icon._img){return}var c=this;$(this._icon).bind("mouseenter",function(){c.killProjectedPath(),c.isDragging||(c._projectedPath=new $.wxcMap.MarkerProjectedPath(c),c._projectedPath.draw(!0),L.Marker.currentProjectedMarker=c)}),$(this._icon).bind("mouseout",function(b){if(L.Browser.ie&&c.isMouseOver(b)){if(L.Marker.currentProjectedMarker!==c){c.killProjectedPath();return}c.timerKey=window.setTimeout(function(){function a(f){$(document).unbind("mousemove",a),c.isMouseOver({pageX:f.pageX,pageY:f.pageY,target:b.target})||c.killProjectedPath()}$(document).bind("mousemove",a)},1500)}else{c.killProjectedPath()}})}},killProjectedPath:function(){this._projectedPath&&(this._projectedPath.kill(!0),this._projectedPath=null);if(L.Marker.currentProjectedMarker){var b=L.Marker.currentProjectedMarker;L.Marker.currentProjectedMarker=null,b.killProjectedPath()}},isOutOfZoomRange:function(){var d=!1;if(this.options.maxZoom&&this.options.minZoom){var c=this._map.getZoom();d=c>this.options.maxZoom||c<this.options.minZoom}return d},onRemove:function(b){this._removeIcon(),b.off("viewreset",this._reset,this),this.onAddHandler&&b.off("zoomend",this.onAddHandler)},getLatLng:function(){return this._latlng},setLatLng:function(b){this._latlng=b,this._reset()},setIcon:function(b){this._removeIcon(),this._icon=this._shadow=null,this.options.icon=b,this._initIcon()},_initIcon:function(){this._icon||(this._icon=this.options.icon.createIcon(this.options.zIndex),this.options.title&&(this._icon.title=this.options.title),this._initInteraction(),this._enforceZoomRange()),this._shadow||(this._shadow=this.options.icon.createShadow()),this._map._panes.markerPane.appendChild(this._icon),this._shadow&&this._map._panes.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this._icon&&this._map._panes.markerPane.removeChild(this._icon),this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow)},_reset:function(){var b=this._map.latLngToLayerPoint(this._latlng).round();L.DomUtil.setPosition(this._icon,b),this._shadow&&L.DomUtil.setPosition(this._shadow,b),this._icon.style.zIndex=this.options.zIndex},_enforceZoomRange:function(){if(!!this._icon){if(this._zoomRangeEnforced){return}this._zoomRangeEnforced=!0;if(this.options.minZoom&&this.options.maxZoom){var d=this;function c(a){var f=a>d.options.maxZoom||a<d.options.minZoom;f?$(d._icon).hide():$(d._icon).show()}c(this._map.getZoom()),this._map.on("zoomend",function(b){c(b.target._zoom)})}}},_initInteraction:function(){if(this.options.clickable){this._icon.className+=" leaflet-clickable",L.DomEvent.addListener(this._icon,"click",this._onMouseClick,this);var d=["dblclick","mousedown","mouseover","mouseout"];for(var c=0;c<d.length;c++){L.DomEvent.addListener(this._icon,d[c],this._fireMouseEvent,this)}}L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.dragend&&this.dragging.enable())},_onMouseClick:function(b){L.DomEvent.stopPropagation(b);(!this.dragging||!this.dragging.moved())&&this.fire(b.type)},_fireMouseEvent:function(b){this.fire(b.type),L.DomEvent.stopPropagation(b)}}),L.Marker.include({openPopup:function(){this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup);return this},closePopup:function(){this._popup&&this._popup._close()},bindPopup:function(d,c){c=L.Util.extend({offset:this.options.icon.popupAnchor},c),this._popup=new L.Popup(c),this._popup.setContent(d),this.on("click",this.openPopup,this);return this}}),L.Path=L.Class.extend({includes:[L.Mixin.Events],statics:function(){var d="http://www.w3.org/2000/svg",c="createElementNS";return{SVG_NS:d,SVG:!!document[c]&&!!document[c](d,"svg").createSVGRect,CLIP_PADDING:0.5}}(),options:{stroke:!0,color:"#0033ff",weight:5,opacity:0.5,fill:!1,fillColor:null,fillOpacity:0.2,clickable:!0,updateOnMoveEnd:!1,zIndex:0,pane:null},initialize:function(b){L.Util.setOptions(this,b)},onAdd:function(b){this._map=b,this._initElements(),this._initEvents(),this.projectLatlngs(),this._updatePath(),b.on("viewreset",this.projectLatlngs,this),this._updateTrigger=this.options.updateOnMoveEnd?"moveend":"viewreset",b.on(this._updateTrigger,this._updatePath,this)},onRemove:function(b){this._root.removeChild(this._container),b.off("viewreset",this._projectLatlngs,this),b.off(this._updateTrigger,this._updatePath,this)},projectLatlngs:function(){},getPathString:function(){},setStyle:function(b){L.Util.setOptions(this,b),this._path&&this._updateStyle()},_initElements:function(){this._initRoot(),this._initPath(),this._initStyle()},_initRoot:function(){this._pane=this.options.pane?this.options.pane:this._map._panes.overlayPane,L.Path.roots||(L.Path.roots={});var b=L.Path.roots[this._pane.className];b?this._root=L.Path.roots[this._pane.className]:(L.Path.roots[this._pane.className]=this._createElement("svg"),this._root=L.Path.roots[this._pane.className],this._pane.appendChild(this._root),this._map.on("moveend",this._updateSvgViewport,this),this._updateSvgViewport())},_updateSvgViewport:function(){this._updateViewport();var k=this._map._pathViewport,h=k.min,q=k.max,p=q.x-h.x,o=q.y-h.y,n=this._root,m=this._pane;L.Browser.mobileWebkit&&m.removeChild(n),L.DomUtil.setPosition(n,h),n.setAttribute("width",p),n.setAttribute("height",o),n.setAttribute("viewBox",[h.x,h.y,p,o].join(" ")),L.Browser.mobileWebkit&&m.appendChild(n)},_updateViewport:function(){var g=L.Path.CLIP_PADDING,f=this._map.getSize(),m=L.DomUtil.getPosition(this._map._mapPane),k=m.multiplyBy(-1).subtract(f.multiplyBy(g)),h=k.add(f.multiplyBy(1+g*2));this._map._pathViewport=new L.Bounds(k,h)},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this._container.appendChild(this._path),this.options.zIndex!=undefined&&!isNaN(this.options.zIndex)&&$(this._container).css("z-index",this.options.zIndex),this._root.appendChild(this._container)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill?this._path.setAttribute("fill-rule","evenodd"):this._path.setAttribute("fill","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight)),this.options.fill&&(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity))},_updatePath:function(){var b=this.getPathString();b||(b="M0 0"),this._path.setAttribute("d",b)},_createElement:function(b){return document.createElementNS(L.Path.SVG_NS,b)},_initEvents:function(){if(this.options.clickable){L.Path.VML||this._path.setAttribute("class","leaflet-clickable"),L.DomEvent.addListener(this._container,"click",this._onMouseClick,this);var d=["dblclick","mousedown","mouseover","mouseout"];for(var c=0;c<d.length;c++){L.DomEvent.addListener(this._container,d[c],this._fireMouseEvent,this)}}},_onMouseClick:function(b){(!this._map.dragging||!this._map.dragging.moved())&&this._fireMouseEvent(b)},_fireMouseEvent:function(b){!this.hasEventListeners(b.type)||(this.fire(b.type,{latlng:this._map.mouseEventToLatLng(b),layerPoint:this._map.mouseEventToLayerPoint(b)}),L.DomEvent.stopPropagation(b))},_redraw:function(){this.projectLatlngs(),this._updatePath()}}),L.Path.VML=function(){var d=document.createElement("div"),c;d.innerHTML='<v:shape adj="1"/>',c=d.firstChild,c.style.behavior="url(#default#VML)";return c&&typeof c.adj=="object"}(),L.Path=L.Path.SVG||!L.Path.VML?L.Path:L.Path.extend({statics:{CLIP_PADDING:0.02},_createElement:function(){try{document.namespaces.add("lvml","urn:schemas-microsoft-com:vml");return function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch(b){return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initRoot:function(){this._pane=this.options.pane?this.options.pane:this._map._panes.overlayPane,L.Path.roots||(L.Path.roots={});var b=L.Path.roots[this._pane.className];b?this._root=L.Path.roots[this._pane.className]:(L.Path.roots[this._pane.className]=document.createElement("div"),this._root=L.Path.roots[this._pane.className],this._root.className="leaflet-vml-container",this._pane.appendChild(this._root),this._map.on("moveend",this._updateViewport,this),this._updateViewport())},_initPath:function(){this._container=this._createElement("shape"),this._container.className+=" leaflet-vml-shape"+(this.options.clickable?" leaflet-clickable":""),this._container.coordsize="1 1",this._path=this._createElement("path"),this._container.appendChild(this._path),this.options.zIndex!=undefined&&!isNaN(this.options.zIndex)&&$(this._container).css("z-index",this.options.zIndex),$(this._container).css("cursor","pointer"),this._root.appendChild(this._container)},_initStyle:function(){this.options.stroke?(this._stroke=this._createElement("stroke"),this._stroke.endcap="round",this._container.appendChild(this._stroke)):this._container.stroked=!1,this.options.fill?(this._container.filled=!0,this._fill=this._createElement("fill"),this._container.appendChild(this._fill)):this._container.filled=!1,this._updateStyle()},_updateStyle:function(){this.options.stroke&&(this._stroke.weight=this.options.weight+"px",this._stroke.color=this.options.color,this._stroke.opacity=this.options.opacity),this.options.fill&&(this._fill.color=this.options.fillColor||this.options.color,this._fill.opacity=this.options.fillOpacity)},_updatePath:function(){this._container.style.display="none",this._path.v=this.getPathString()+" ",this._container.style.display=""}}),L.Path.include({bindPopup:function(d,c){if(!this._popup||this._popup.options!==c){this._popup=new L.Popup(c)}this._popup.setContent(d),this._openPopupAdded||(this.on("click",this._openPopup,this),this._openPopupAdded=!0);return this},_openPopup:function(b){this._popup.setLatLng(b.latlng),this._map.openPopup(this._popup)}}),L.Polyline=L.Path.extend({initialize:function(d,c){L.Path.prototype.initialize.call(this,c),this._latlngs=d},options:{smoothFactor:1,noClip:!1,updateOnMoveEnd:!0},projectLatlngs:function(){this._originalPoints=[];for(var d=0,c=this._latlngs.length;d<c;d++){this._originalPoints[d]=this._map.latLngToLayerPoint(this._latlngs[d])}},getPathString:function(){for(var f=0,d=this._parts.length,g="";f<d;f++){g+=this._getPathPartStr(this._parts[f])}return g},getLatLngs:function(){return this._latlngs},setLatLngs:function(b){this._latlngs=b,this._redraw();return this},addLatLng:function(b){this._latlngs.push(b),this._redraw();return this},spliceLatLngs:function(f,d){var g=[].splice.apply(this._latlngs,arguments);this._redraw();return g},_getPathPartStr:function(h){var g=L.Path.VML;for(var o=0,n=h.length,m="",k;o<n;o++){k=h[o],g&&k._round(),m+=(o?"L":"M")+k.x+" "+k.y}return m},_clipPoints:function(){var m=this._originalPoints,k=m.length,s,r,q;if(this.options.noClip){this._parts=[m]}else{this._parts=[];var p=this._parts,o=this._map._pathViewport,n=L.LineUtil;for(s=0,r=0;s<k-1;s++){q=n.clipSegment(m[s],m[s+1],o,s);if(!q){continue}p[r]=p[r]||[],p[r].push(q[0]);if(q[1]!=m[s+1]||s==k-2){p[r].push(q[1]),r++}}}},_simplifyPoints:function(){var g=this._parts,f=L.LineUtil;for(var k=0,h=g.length;k<h;k++){g[k]=f.simplify(g[k],this.options.smoothFactor)}},_updatePath:function(){this._clipPoints(),this._simplifyPoints(),L.Path.prototype._updatePath.call(this)}}),L.Polygon=L.Polyline.extend({options:{fill:!0},initialize:function(d,c){L.Polyline.prototype.initialize.call(this,d,c),d[0] instanceof Array&&(this._latlngs=d[0],this._holes=d.slice(1))},projectLatlngs:function(){L.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[];if(!!this._holes){for(var g=0,f=this._holes.length,m;g<f;g++){this._holePoints[g]=[];for(var k=0,h=this._holes[g].length;k<h;k++){this._holePoints[g][k]=this._map.latLngToLayerPoint(this._holes[g][k])}}}},_clipPoints:function(){var g=this._originalPoints,f=[];this._parts=[g].concat(this._holePoints);if(!this.options.noClip){for(var m=0,k=this._parts.length;m<k;m++){var h=L.PolyUtil.clipPolygon(this._parts[m],this._map._pathViewport);if(!h.length){continue}f.push(h)}this._parts=f}},_getPathPartStr:function(d){var c=L.Polyline.prototype._getPathPartStr.call(this,d);return c+(L.Path.SVG?"z":"x")}}),function(){function b(c){return L.FeatureGroup.extend({initialize:function(a,h){this._layers={};for(var g=0,f=a.length;g<f;g++){this.addLayer(new c(a[g],h))}},setStyle:function(f){for(var d in this._layers){this._layers.hasOwnProperty(d)&&this._layers[d].setStyle&&this._layers[d].setStyle(f)}}})}L.MultiPolyline=b(L.Polyline),L.MultiPolygon=b(L.Polygon)}(),L.Circle=L.Path.extend({initialize:function(f,d,g){L.Path.prototype.initialize.call(this,g),this._latlng=f,this._mRadius=d},options:{fill:!0},setLatLng:function(b){this._latlng=b,this._redraw();return this},setRadius:function(b){this._mRadius=b,this._redraw();return this},projectLatlngs:function(){var d=40075017,c=this._map.options.scale(this._map._zoom);this._point=this._map.latLngToLayerPoint(this._latlng),this._radius=this._mRadius/d*c},getPathString:function(){var d=this._point,c=this._radius;if(L.Path.SVG){return"M"+d.x+","+(d.y-c)+"A"+c+","+c+",0,1,1,"+(d.x-0.1)+","+(d.y-c)+" z"}d._round(),c=Math.round(c);return"AL "+d.x+","+d.y+" "+c+","+c+" 0,"+23592600}}),L.CircleMarker=L.Circle.extend({options:{radius:10,weight:2},initialize:function(d,c){L.Circle.prototype.initialize.call(this,d,null,c),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},setRadius:function(b){this._radius=b,this._redraw();return this}}),L.GeoJSON=L.LayerGroup.extend({includes:L.Mixin.Events,initialize:function(d,c){L.Util.setOptions(this,c),this._geojson=d,this._layers={},d&&this.addGeoJSON(d)},addGeoJSON:function(h){if(h.features){for(var g=0,o=h.features.length;g<o;g++){this.addGeoJSON(h.features[g])}}else{var n=h.type=="Feature",m=n?h.geometry:h,k=L.GeoJSON.geometryToLayer(m,this.options.pointToLayer);this.fire("featureparse",{layer:k,properties:h.properties,geometryType:m.type,bbox:h.bbox,id:h.id}),this.addLayer(k)}}}),L.Util.extend(L.GeoJSON,{geometryToLayer:function(t,s){var r=t.coordinates,q,p,o,n,m,k=[];switch(t.type){case"Point":q=this.coordsToLatLng(r);return s?s(q):new L.Marker(q);case"MultiPoint":for(o=0,n=r.length;o<n;o++){q=this.coordsToLatLng(r[o]),m=s?s(q):new L.Marker(q),k.push(m)}return new L.FeatureGroup(k);case"LineString":p=this.coordsToLatLngs(r);return new L.Polyline(p);case"Polygon":p=this.coordsToLatLngs(r,1);return new L.Polygon(p);case"MultiLineString":p=this.coordsToLatLngs(r,1);return new L.MultiPolyline(p);case"MultiPolygon":p=this.coordsToLatLngs(r,2);return new L.MultiPolygon(p);case"GeometryCollection":for(o=0,n=t.geometries.length;o<n;o++){m=this.geometryToLayer(t.geometries[o]),k.push(m)}return new L.FeatureGroup(k);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(g,f){var k=parseFloat(g[f?0:1]),h=parseFloat(g[f?1:0]);return new L.LatLng(k,h)},coordsToLatLngs:function(k,h,q){var p,o=[],n,m=k.length;for(n=0;n<m;n++){p=h?this.coordsToLatLngs(k[n],h-1,q):this.coordsToLatLng(k[n],q),o.push(p)}return o}}),L.Handler=L.Class.extend({initialize:function(b){this._map=b},enabled:function(){return !!this._enabled}}),L.Handler.MapDrag=L.Handler.extend({enable:function(){this._enabled||(this._draggable||(this._draggable=new L.Draggable(this._map._mapPane,this._map._container),this._draggable.on("dragstart",this._onDragStart,this),this._draggable.on("drag",this._onDrag,this),this._draggable.on("dragend",this._onDragEnd,this)),this._draggable.enable(),this._enabled=!0)},disable:function(){!this._enabled||(this._draggable.disable(),this._enabled=!1)},moved:function(){return this._draggable._moved},_onDragStart:function(){this._map.fire("movestart"),this._map.fire("dragstart")},_onDrag:function(){this._map.fire("move"),this._map.fire("drag")},_onDragEnd:function(){this._map.fire("moveend"),this._map.fire("dragend")}}),L.Handler.TouchZoom=L.Handler.extend({enable:function(){!!L.Browser.mobileWebkit&&!this._enabled&&(L.DomEvent.addListener(this._map._container,"touchstart",this._onTouchStart,this),this._enabled=!0)},disable:function(){!this._enabled||(L.DomEvent.removeListener(this._map._container,"touchstart",this._onTouchStart,this),this._enabled=!1)},_onTouchStart:function(g){if(!!g.touches&&g.touches.length==2&&!this._map._animatingZoom){var f=this._map.mouseEventToLayerPoint(g.touches[0]),k=this._map.mouseEventToLayerPoint(g.touches[1]),h=this._map.containerPointToLayerPoint(this._map.getSize().divideBy(2));this._startCenter=f.add(k).divideBy(2,!0),this._startDist=f.distanceTo(k),this._moved=!1,this._zooming=!0,this._centerOffset=h.subtract(this._startCenter),L.DomEvent.addListener(document,"touchmove",this._onTouchMove,this),L.DomEvent.addListener(document,"touchend",this._onTouchEnd,this),L.DomEvent.preventDefault(g)}},_onTouchMove:function(f){if(!!f.touches&&f.touches.length==2){this._moved||(this._map._mapPane.className+=" leaflet-zoom-anim",this._map._prepareTileBg(),this._moved=!0);var d=this._map.mouseEventToLayerPoint(f.touches[0]),g=this._map.mouseEventToLayerPoint(f.touches[1]);this._scale=d.distanceTo(g)/this._startDist,this._delta=d.add(g).divideBy(2,!0).subtract(this._startCenter),this._map._tileBg.style.webkitTransform=[L.DomUtil.getTranslateString(this._delta),L.DomUtil.getScaleString(this._scale,this._startCenter)].join(" "),L.DomEvent.preventDefault(f)}},_onTouchEnd:function(u){if(!!this._moved&&!!this._zooming){this._zooming=!1;var t=this._map.getZoom(),s=Math.log(this._scale)/Math.LN2,r=s>0?Math.ceil(s):Math.floor(s),q=this._map._limitZoom(t+r),p=q-t,o=this._centerOffset.subtract(this._delta).divideBy(this._scale),n=this._map.getPixelOrigin().add(this._startCenter).add(o),m=this._map.unproject(n);L.DomEvent.removeListener(document,"touchmove",this._onTouchMove),L.DomEvent.removeListener(document,"touchend",this._onTouchEnd);var k=Math.pow(2,p);this._map._runAnimation(m,q,k/this._scale,this._startCenter.add(o))}}}),L.Handler.ScrollWheelZoom=L.Handler.extend({enable:function(){this._enabled||(L.DomEvent.addListener(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0,this._enabled=!0)},disable:function(){!this._enabled||(L.DomEvent.removeListener(this._map._container,"mousewheel",this._onWheelScroll),this._enabled=!1)},_onWheelScroll:function(b){this._delta+=L.DomEvent.getWheelDelta(b),this._lastMousePos=this._map.mouseEventToContainerPoint(b),clearTimeout(this._timer),this._timer=setTimeout(L.Util.bind(this._performZoom,this),50),L.DomEvent.preventDefault(b)},_performZoom:function(){var f=Math.round(this._delta);this._delta=0;if(!!f){var d=this._getCenterForScrollWheelZoom(this._lastMousePos,f),g=this._map.getZoom()+f;if(this._map._limitZoom(g)==this._map._zoom){return}this._map.setView(d,g)}},_getCenterForScrollWheelZoom:function(h,g){var o=this._map.getPixelBounds().getCenter(),n=this._map.getSize().divideBy(2),m=h.subtract(n).multiplyBy(1-Math.pow(2,-g)),k=o.add(m);return this._map.unproject(k,this._map._zoom,!0)}}),L.Handler.DoubleClickZoom=L.Handler.extend({enable:function(){this._enabled||(this._map.on("dblclick",this._onDoubleClick,this._map),this._enabled=!0)},disable:function(){!this._enabled||(this._map.off("dblclick",this._onDoubleClick,this._map),this._enabled=!1)},_onDoubleClick:function(b){this.setView(b.latlng,this._zoom+1)}}),L.Handler.ShiftDragZoom=L.Handler.extend({initialize:function(b){this._map=b,this._container=b._container,this._pane=b._panes.overlayPane},enable:function(){this._enabled||(L.DomEvent.addListener(this._container,"mousedown",this._onMouseDown,this),this._enabled=!0)},disable:function(){!this._enabled||(L.DomEvent.removeListener(this._container,"mousedown",this._onMouseDown),this._enabled=!1)},_onMouseDown:function(b){if(!b.shiftKey||b.which!=1&&b.button!=1){return !1}L.DomUtil.disableTextSelection(),this._startLayerPoint=this._map.mouseEventToLayerPoint(b),this._box=L.DomUtil.create("div","leaflet-zoom-box",this._pane),L.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",L.DomEvent.addListener(document,"mousemove",this._onMouseMove,this),L.DomEvent.addListener(document,"mouseup",this._onMouseUp,this),L.DomEvent.preventDefault(b)},_onMouseMove:function(k){var h=this._map.mouseEventToLayerPoint(k),q=h.x-this._startLayerPoint.x,p=h.y-this._startLayerPoint.y,o=Math.min(h.x,this._startLayerPoint.x),n=Math.min(h.y,this._startLayerPoint.y),m=new L.Point(o,n);L.DomUtil.setPosition(this._box,m),this._box.style.width=Math.abs(q)-4+"px",this._box.style.height=Math.abs(p)-4+"px"},_onMouseUp:function(f){this._pane.removeChild(this._box),this._container.style.cursor="",L.DomUtil.enableTextSelection(),L.DomEvent.removeListener(document,"mousemove",this._onMouseMove),L.DomEvent.removeListener(document,"mouseup",this._onMouseUp);var d=this._map.mouseEventToLayerPoint(f),g=new L.LatLngBounds(this._map.layerPointToLatLng(this._startLayerPoint),this._map.layerPointToLatLng(d));this._map.fitBounds(g)}}),L.Handler.MarkerDrag=L.Handler.extend({initialize:function(b){this._marker=b},enable:function(){this._enabled||(this._draggable||(this._draggable=new L.Draggable(this._marker._icon,this._marker._icon),this._draggable.on("dragstart",this._onDragStart,this),this._draggable.on("drag",this._onDrag,this),this._draggable.on("dragend",this._onDragEnd,this)),this._draggable.enable(),this._enabled=!0)},disable:function(){!this._enabled||(this._draggable.disable(),this._enabled=!1)},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(b){this._marker.isDragging=!0,this._marker.killProjectedPath(),this._marker.closePopup(),this._marker._map.closePopup(),this._marker.fire("movestart"),this._marker.fire("dragstart")},_onDrag:function(d){var c=L.DomUtil.getPosition(this._marker._icon);L.DomUtil.setPosition(this._marker._shadow,c),this._marker._latlng=this._marker._map.layerPointToLatLng(c),this._marker.fire("move"),this._marker.fire("drag")},_onDragEnd:function(){this._marker.fire("moveend"),this._marker.fire("dragend"),this._marker.isDragging=!1}}),L.Control={},L.Control.Position={TOP_LEFT:"topLeft",TOP_RIGHT:"topRight",BOTTOM_LEFT:"bottomLeft",BOTTOM_RIGHT:"bottomRight"},L.Control.Zoom=L.Class.extend({onAdd:function(b){this._map=b,this._container=L.DomUtil.create("div","leaflet-control-zoom"),this._zoomInButton=this._createButton("Zoom in","leaflet-control-zoom-in",this._map.zoomIn,this._map),this._zoomOutButton=this._createButton("Zoom out","leaflet-control-zoom-out",this._map.zoomOut,this._map),this._container.appendChild(this._zoomInButton),this._container.appendChild(this._zoomOutButton)},getContainer:function(){return this._container},getPosition:function(){return L.Control.Position.TOP_LEFT},_createButton:function(g,f,m,k){var h=document.createElement("a");h.href="#",h.title=g,h.className=f,L.DomEvent.disableClickPropagation(h),L.DomEvent.addListener(h,"click",L.DomEvent.preventDefault),L.DomEvent.addListener(h,"click",m,k);return h}}),L.Control.Attribution=L.Class.extend({onAdd:function(b){this._container=L.DomUtil.create("div","leaflet-control-attribution"),this._map=b,this._prefix='Powered by <a href="http://leaflet.cloudmade.com">Leaflet</a>',this._attributions={},this._update()},getPosition:function(){return L.Control.Position.BOTTOM_RIGHT},getContainer:function(){return this._container},setPrefix:function(b){this._prefix=b},addAttribution:function(b){!b||(this._attributions[b]=!0,this._update())},removeAttribution:function(b){!b||(delete this._attributions[b],this._update())},_update:function(){if(!!this._map){var f=[];for(var d in this._attributions){this._attributions.hasOwnProperty(d)&&f.push(d)}var g=[];this._prefix&&g.push(this._prefix),f.length&&g.push(f.join(", ")),this._container.innerHTML=g.join(" &mdash; ")}}}),L.Map=L.Class.extend({includes:L.Mixin.Events,options:{crs:L.CRS.EPSG3857||L.CRS.EPSG4326,scale:function(b){return 256*(1<<b)},center:null,zoom:null,layers:[],dragging:!0,touchZoom:L.Browser.mobileWebkit&&!L.Browser.android,scrollWheelZoom:!L.Browser.mobileWebkit,doubleClickZoom:!0,shiftDragZoom:!0,zoomControl:!0,attributionControl:!0,fadeAnimation:L.DomUtil.TRANSITION&&!L.Browser.android,zoomAnimation:L.DomUtil.TRANSITION&&!L.Browser.android&&!L.Browser.mobileOpera,trackResize:!0,closePopupOnClick:!0},initialize:function(g,f){L.Util.setOptions(this,f),this._container=L.DomUtil.get(g),this._initLayout(),L.DomEvent&&(this._initEvents(),L.Handler&&this._initInteraction(),L.Control&&this._initControls());var m=this.options.center,k=this.options.zoom;m!==null&&k!==null&&this.setView(m,k,!0);var h=this.options.layers;h=h instanceof Array?h:[h],this._tileLayersNum=0,this._initLayers(h)},setView:function(f,d,g){this._resetView(f,this._limitZoom(d));return this},setZoom:function(b){return this.setView(this.getCenter(),b)},zoomIn:function(){return this.setZoom(this._zoom+1)},zoomOut:function(){return this.setZoom(this._zoom-1)},fitBounds:function(d){var c=this.getBoundsZoom(d);return this.setView(d.getCenter(),c)},fitWorld:function(){var d=new L.LatLng(-60,-170),c=new L.LatLng(85,179);return this.fitBounds(new L.LatLngBounds(d,c))},panTo:function(b){return this.setView(b,this._zoom)},panBy:function(b){this.fire("movestart"),this._rawPanBy(b),this.fire("move"),this.fire("moveend");return this},addLayer:function(f){var d=L.Util.stamp(f);if(this._layers[d]){return this}this._layers[d]=f,f.options&&!isNaN(f.options.maxZoom)&&(this._layersMaxZoom=Math.max(this._layersMaxZoom||0,f.options.maxZoom)),f.options&&!isNaN(f.options.minZoom)&&(this._layersMinZoom=Math.min(this._layersMinZoom||Infinity,f.options.minZoom)),this.options.zoomAnimation&&L.TileLayer&&f instanceof L.TileLayer&&(this._tileLayersNum++,f.on("load",this._onTileLayerLoad,this)),this.attributionControl&&f.getAttribution&&this.attributionControl.addAttribution(f.getAttribution());var g=function(){f.onAdd(this),this.fire("layeradd",{layer:f})};this._loaded?g.call(this):this.on("load",g,this);return this},removeLayer:function(d){var c=L.Util.stamp(d);this._layers[c]&&(d.onRemove(this),delete this._layers[c],this.options.zoomAnimation&&L.TileLayer&&d instanceof L.TileLayer&&(this._tileLayersNum--,d.off("load",this._onTileLayerLoad,this)),this.attributionControl&&d.getAttribution&&this.attributionControl.removeAttribution(d.getAttribution()),this.fire("layerremove",{layer:d}));return this},invalidateSize:function(){this._sizeChanged=!0,this.fire("move"),clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(L.Util.bind(function(){this.fire("moveend")},this),200);return this},getCenter:function(f){var d=this.getSize().divideBy(2),g=this._getTopLeftPoint().add(d);return this.unproject(g,this._zoom,f)},getZoom:function(){return this._zoom},getBounds:function(){var f=this.getPixelBounds(),d=this.unproject(new L.Point(f.min.x,f.max.y)),g=this.unproject(new L.Point(f.max.x,f.min.y));return new L.LatLngBounds(d,g)},getMinZoom:function(){return isNaN(this.options.minZoom)?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return isNaN(this.options.maxZoom)?this._layersMaxZoom||Infinity:this.options.maxZoom},getRadiusMiles:function(){var t=this.getBounds(),s=this.getCenter().lat,r=t._southWest.lng,q=t._northEast.lng;this.getBounds().contains(this.getCenter())||(q=t._southWest.lng,r=t._northEast.lng);var p=69.1*Math.cos(s/57.3),o;r>q&&(r=-180-(180-r)),o=Math.abs(r-q);var n=p*o,m=Math.sqrt(2)*n,k=m*0.5;k*=1.1;return k.toFixed(3)},getBoundsZoom:function(t){var s=this.getSize(),r=this.getMinZoom(),q=this.getMaxZoom(),p=t.getNorthEast(),o=t.getSouthWest(),n,m,k;do{r++,m=this.project(p,r),k=this.project(o,r),n=new L.Point(m.x-k.x,k.y-m.y)}while(n.x<=s.x&&n.y<=s.y&&r<=q);return r-1},getSize:function(){if(!this._size||this._sizeChanged){this._size=new L.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1}return this._size},getPixelBounds:function(){var d=this._getTopLeftPoint(),c=this.getSize();return new L.Bounds(d,d.add(c))},getPixelOrigin:function(){return this._initialTopLeftPoint},getPanes:function(){return this._panes},mouseEventToContainerPoint:function(b){return L.DomEvent.getMousePosition(b,this._container)},mouseEventToLayerPoint:function(b){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(b))},mouseEventToLatLng:function(b){return this.layerPointToLatLng(this.mouseEventToLayerPoint(b))},containerPointToLayerPoint:function(b){return b.subtract(L.DomUtil.getPosition(this._mapPane))},layerPointToContainerPoint:function(b){return b.add(L.DomUtil.getPosition(this._mapPane))},layerPointToLatLng:function(b){return this.unproject(b.add(this._initialTopLeftPoint))},latLngToLayerPoint:function(b){return this.project(b)._subtract(this._initialTopLeftPoint)},project:function(d,c){c=typeof c=="undefined"?this._zoom:c;return this.options.crs.latLngToPoint(d,this.options.scale(c))},unproject:function(f,d,g){d=typeof d=="undefined"?this._zoom:d;return this.options.crs.pointToLatLng(f,this.options.scale(d),g)},tileXYtoMercator:function(u,t){var s=256,r=this.tileXYToPixelXY(u),q=new L.Point(r.x+s*0.5,r.y),p=this.unproject(q).lng,o=new L.Point(r.x,r.y),n=this.unproject(o).lat,m=new L.Point(r.x,r.y+s),k=this.unproject(m).lat;return{cLon:p,uLat:n,lLat:k}},tileXYToPixelXY:function(d){var c=new L.Point;c.x=d.x*256,c.y=d.y*256;return c},tileXYtoQuadKey:function(g,f){var k="";for(var h=1;h<=f;h++){k+=(g.y>>f-h&1)<<1|g.x>>f-h&1}return k},_initLayout:function(){var d=this._container;d.className+=" leaflet-container",this.options.fadeAnimation&&(d.className+=" leaflet-fade-anim");var c=L.DomUtil.getStyle(d,"position");c!="absolute"&&c!="relative"&&(d.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var b=this._panes={};this._mapPane=b.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=b.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),this._objectsPane=b.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),b.shadowPane=this._createPane("leaflet-shadow-pane"),b.overlayPane=this._createPane("leaflet-overlay-pane"),b.markerPane=this._createPane("leaflet-marker-pane"),b.topPane=this._createPane("leaflet-top-pane"),b.popupPane=this._createPane("leaflet-popup-pane")},_createPane:function(d,c){return L.DomUtil.create("div",d,c||this._objectsPane)},_resetView:function(g,f,m){var k=this._zoom!=f;this.fire("movestart"),this._zoom=f,this._initialTopLeftPoint=this._getNewTopLeftPoint(g);if(!m){L.DomUtil.setPosition(this._mapPane,new L.Point(0,0))}else{var h=L.DomUtil.getPosition(this._mapPane);this._initialTopLeftPoint._add(h)}this._tileLayersToLoad=this._tileLayersNum,this.fire("viewreset"),this.fire("move"),k&&this.fire("zoomend"),this.fire("moveend"),this._loaded||(this._loaded=!0,this.fire("load"))},_initLayers:function(f){this._layers={};for(var d=0,g=f.length;d<g;d++){this.addLayer(f[d])}},_initControls:function(){this.options.legendStack&&(this._legendStack=new L.Control.LegendStack,this.addControl(this._legendStack)),this.options.zoomControl&&this.addControl(new L.Control.Zoom),this.options.attributionControl&&(this.attributionControl=new L.Control.Attribution,this.addControl(this.attributionControl))},_rawPanBy:function(d){var c=L.DomUtil.getPosition(this._mapPane);L.DomUtil.setPosition(this._mapPane,c.subtract(d))},_initEvents:function(){L.DomEvent.addListener(this._container,"click",this._onMouseClick,this);var f=["dblclick","mousedown","mouseenter","mouseleave","mousemove"];for(var d=0;d<f.length;d++){L.DomEvent.addListener(this._container,f[d],this._fireMouseEvent,this)}if(this.options.trackResize){var g=this;$(this._container).resize(function(){g.invalidateSize.call(g)})}},_onMouseClick:function(b){if(!this.dragging||!this.dragging.moved()){this.fire("pre"+b.type),this._fireMouseEvent(b)}},_fireMouseEvent:function(d){var c=d.type;c=c=="mouseenter"?"mouseover":c=="mouseleave"?"mouseout":c;!this.hasEventListeners(c)||this.fire(c,{latlng:this.mouseEventToLatLng(d),layerPoint:this.mouseEventToLayerPoint(d)})},_initInteraction:function(){var d={dragging:L.Handler.MapDrag,touchZoom:L.Handler.TouchZoom,doubleClickZoom:L.Handler.DoubleClickZoom,scrollWheelZoom:L.Handler.ScrollWheelZoom,shiftDragZoom:L.Handler.ShiftDragZoom};for(var c in d){d.hasOwnProperty(c)&&d[c]&&(this[c]=new d[c](this),this.options[c]&&this[c].enable())}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this._tileBg&&(clearTimeout(this._clearTileBgTimer),this._clearTileBgTimer=setTimeout(L.Util.bind(this._clearTileBg,this),500))},_getTopLeftPoint:function(){if(!this._loaded){throw new Error("Set map center and zoom first.")}var b=L.DomUtil.getPosition(this._mapPane);return this._initialTopLeftPoint.subtract(b)},_getNewTopLeftPoint:function(d){var c=this.getSize().divideBy(2);return this.project(d).subtract(c).round()},_limitZoom:function(f){var d=this.getMinZoom(),g=this.getMaxZoom();return Math.max(d,Math.min(g,f))}}),L.Map.include({locate:function(d){var c={timeout:10000};L.Util.extend(c,d),navigator.geolocation?navigator.geolocation.getCurrentPosition(L.Util.bind(this._handleGeolocationResponse,this),L.Util.bind(this._handleGeolocationError,this),c):this.fire("locationerror",{code:0,message:"Geolocation not supported."});return this},locateAndSetView:function(d,c){this._setViewOnLocate=!0,this._maxLocateZoom=d||Infinity;return this.locate(c)},_handleGeolocationError:function(f){var d=f.code,g=d==1?"permission denied":d==2?"position unavailable":"timeout";this._setViewOnLocate&&(this.fitWorld(),this._setViewOnLocate=!1),this.fire("locationerror",{code:d,message:"Geolocation error: "+g+"."})},_handleGeolocationResponse:function(t){var s=180*t.coords.accuracy/40000000,r=s*2,q=t.coords.latitude,p=t.coords.longitude,o=new L.LatLng(q-s,p-r),n=new L.LatLng(q+s,p+r),m=new L.LatLngBounds(o,n);if(this._setViewOnLocate){var k=Math.min(this.getBoundsZoom(m),this._maxLocateZoom);this.setView(m.getCenter(),k),this._setViewOnLocate=!1}this.fire("locationfound",{latlng:new L.LatLng(q,p),bounds:m,accuracy:t.coords.accuracy})}}),L.Map.include({openPopup:function(b){this.closePopup(),this._popup=b;return this.addLayer(b)},closePopup:function(){this._popup&&this.removeLayer(this._popup);return this}}),L.Map.include(!L.Transition||!L.Transition.implemented()?{}:{setView:function(h,g,o){g=this._limitZoom(g);var n=this._zoom!=g;if(this._loaded&&!o&&this._layers){var m=this._getNewTopLeftPoint(h).subtract(this._getTopLeftPoint()),k=n?!!this._zoomToIfCenterInView&&this._zoomToIfCenterInView(h,g,m):this._panByIfClose(m);if(k){return this}}this._resetView(h,g);return this},panBy:function(b){this._panTransition||(this._panTransition=new L.Transition(this._mapPane,{duration:0.3}),this._panTransition.on("step",this._onPanTransitionStep,this),this._panTransition.on("end",this._onPanTransitionEnd,this)),this.fire(this,"movestart"),this._panTransition.run({position:L.DomUtil.getPosition(this._mapPane).subtract(b)});return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){this.fire("moveend")},_panByIfClose:function(b){if(this._offsetIsWithinView(b)){this.panBy(b);return !0}return !1},_offsetIsWithinView:function(g,f){var k=f||1,h=this.getSize();return Math.abs(g.x)<=h.x*k&&Math.abs(g.y)<=h.y*k}}),L.Map.include(L.DomUtil.TRANSITION?{_zoomToIfCenterInView:function(m,k,s){if(this._animatingZoom){return !0}if(!this.options.zoomAnimation){return !1}var r=k-this._zoom,q=Math.pow(2,r),p=s.divideBy(1-1/q);if(!this._offsetIsWithinView(p,1)){return !1}this._mapPane.className+=" leaflet-zoom-anim";var o=this.containerPointToLayerPoint(this.getSize().divideBy(2)),n=o.add(p);this._prepareTileBg(),this._runAnimation(m,k,q,n);return !0},_runAnimation:function(k,h,q,p){this._animatingZoom=!0,this._animateToCenter=k,this._animateToZoom=h;var o=L.DomUtil.TRANSFORM;if(L.Browser.gecko||window.opera){this._tileBg.style[o]+=" translate(0,0)"}var n;L.Browser.android?(this._tileBg.style[o+"Origin"]=p.x+"px "+p.y+"px",n="scale("+q+")"):n=L.DomUtil.getScaleString(q,p),L.Util.falseFn(this._tileBg.offsetWidth);var m={};m[o]=this._tileBg.style[o]+" "+n,this._tileBg.transition.run(m)},_prepareTileBg:function(){this._tileBg||(this._tileBg=this._createPane("leaflet-tile-pane",this._mapPane),this._tileBg.style.zIndex=1);var d=this._tilePane,c=this._tileBg;c.style[L.DomUtil.TRANSFORM]="",c.style.visibility="hidden",c.empty=!0,d.empty=!1,this._tilePane=this._panes.tilePane=c,this._tileBg=d,this._tileBg.transition||(this._tileBg.transition=new L.Transition(this._tileBg,{duration:0.3,easing:"cubic-bezier(0.25,0.1,0.25,0.75)"}),this._tileBg.transition.on("end",this._onZoomTransitionEnd,this)),this._stopLoadingBgTiles()},_stopLoadingBgTiles:function(){var f=[].slice.call(this._tileBg.getElementsByTagName("img"));for(var d=0,g=f.length;d<g;d++){f[d].complete||(f[d].src="",f[d].parentNode.removeChild(f[d]))}},_onZoomTransitionEnd:function(){this._restoreTileFront(),L.Util.falseFn(this._tileBg.offsetWidth),this._resetView(this._animateToCenter,this._animateToZoom,!0),this._mapPane.className=this._mapPane.className.replace(" leaflet-zoom-anim",""),this._animatingZoom=!1},_restoreTileFront:function(){this._tilePane.innerHTML="",this._tilePane.style.visibility="",this._tilePane.style.zIndex=2,this._tileBg.style.zIndex=1},_clearTileBg:function(){!this._animatingZoom&&!this.touchZoom._zooming&&(this._tileBg.innerHTML="")}}:{}),L.Map.include({addControl:function(g){g.onAdd(this);var f=g.getPosition(),k=this._controlCorners[f],h=g.getContainer();L.DomUtil.addClass(h,"leaflet-control"),f.indexOf("bottom")!=-1?k.insertBefore(h,k.firstChild):k.appendChild(h);return this},removeControl:function(g){var f=g.getPosition(),k=this._controlCorners[f],h=g.getContainer();k.removeChild(h),g.onRemove&&g.onRemove(this);return this},_initControlPos:function(){var k=this._controlCorners={},h="leaflet-",q=h+"top",p=h+"bottom",o=h+"left",n=h+"right",m=L.DomUtil.create("div",h+"control-container",this._container);L.Browser.mobileWebkit&&(m.className+=" "+h+"big-buttons"),k.topLeft=L.DomUtil.create("div",q+" "+o,m),k.topRight=L.DomUtil.create("div",q+" "+n,m),k.bottomLeft=L.DomUtil.create("div",p+" "+o,m),k.bottomRight=L.DomUtil.create("div",p+" "+n,m)}}),L.AnimationImageOverlay=L.Class.extend({includes:L.Mixin.Events,options:{type:"AnimationImageOverlay",container:null,opacity:1},initialize:function(d,c){L.Util.setOptions(this,d),this._url=d.url,this._bounds=d.bounds,this.callback=c},onAdd:function(d){this._map=d,this._image||this._initImage();if(this.options.container){this.options.container.appendChild(this._image);var c=this._map.latLngToLayerPoint(this._bounds.getNorthWest());L.DomUtil.setPosition(this._image,c)}else{d.getPanes().overlayPane.appendChild(this._image)}d.on("viewreset",this._reset,this),this._reset()},onRemove:function(b){b.getPanes().overlayPane.removeChild(this._image),b.off("viewreset",this._reset,this)},hide:function(){$(this._image).addClass("leaflet-hidden")},show:function(){$(this._image).removeClass("leaflet-hidden")},setOpacity:function(b){!this._image||L.DomUtil.setOpacity(this._image,b)},_initImage:function(){this._image=L.DomUtil.create("img","leaflet-image-layer"),this.hide(),this.setOpacity(this.options.opacity),L.Util.extend(this._image,{galleryimg:"no",onselectstart:L.Util.falseFn,onmousemove:L.Util.falseFn,onload:this.callback||this._onImageLoad,src:this._url})},_reset:function(){var f=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),d=this._map.latLngToLayerPoint(this._bounds.getSouthEast()),g=d.subtract(f);L.DomUtil.setPosition(this._image,f),this._image.style.width=g.x+"px",this._image.style.height=g.y+"px"},_onImageLoad:function(){}}),L.KmlLayer=L.Class.extend({includes:L.Mixin.Events,options:{active:!0,zIndex:0,id:(new Date).getTime().toString(),minZoom:0,maxZoom:18,type:"KmlLayer",anchorPoint:$.wxcMap.MIDDLE_CENTER,attribution:"",iconDir:null,refreshOnViewChange:!1},initialize:function(d,c){L.Util.setOptions(this,c),this._kmlUrl=d,this._kml,this._xml,this._active=c.active==undefined?this.options.active:c.active,this._markerGroup,this._polyGroup,this._lineGroup,this._latLngs=[],this._outOfZoomRange=!1},onAdd:function(f){this._map=f,this._changeState($.wxcMap.IDLE);var d=this._map.getZoom();this._outOfZoomRange=d>this.options.maxZoom||d<this.options.minZoom;var g=this;this._map.on("zoomend",g.onZoomEnd,g),this.options.refreshOnViewChange&&this._map.on("moveend",g.refreshData,g),this._outOfZoomRange?(this._map.fire($.wxcMap.MAP_LAYER_OUT_OF_ZOOM_RANGE,{layer:this}),this._updateAttribution("")):this._map.fire($.wxcMap.MAP_LAYER_INTO_ZOOM_RANGE,{layer:this});!!this._active&&!this._outOfZoomRange&&this._loadKml()},onRemove:function(d){var c=this;this._map.off("zoomend",c.onZoomEnd,c),this.options.refreshOnViewChange&&this._map.off("moveend",c.refreshData,c),this._killMarkers(),this._killPolygons(),this._killLines()},refreshData:function(d){var c=$.Deferred();return !this._active||this._outOfZoomRange?c.resolve():this._state==$.wxcMap.LOADING?c.resolve():this._loadKml()},onZoomEnd:function(h){var g=h.target._zoom,o=g>this.options.maxZoom||g<this.options.minZoom,n=this._outOfZoomRange,m=n&&!o,k=!n&&o;m?(this._outOfZoomRange=!1,!this.present(),this._map.fire($.wxcMap.MAP_LAYER_INTO_ZOOM_RANGE,{layer:this})):k&&(this._outOfZoomRange=!0,!this.unPresent(),this._map.fire($.wxcMap.MAP_LAYER_OUT_OF_ZOOM_RANGE,{layer:this}))},_loadKml:function(){function m(a){f._map.fire($.wxcMap.MAP_LAYER_KML_LOAD_COMPLETE,{layer:f}),f._xml=a,f._kml={},f._kml=$.xml2json(a),f._kml.Style=$.wxc.isObject(f._kml.Style)?[f._kml.Style]:f._kml.Style,f._kml.Placemark=$.wxc.isObject(f._kml.Placemark)?[f._kml.Placemark]:f._kml.Placemark,f._loadStyles(),f._loadMarkers(),f._loadPolygons(),f._loadLines(),f._changeState($.wxcMap.IDLE),g.resolve()}var g=$.Deferred();this._killMarkers();var f=this;this._xml=null,this._kml=null,this._changeState($.wxcMap.LOADING),this._map.fire($.wxcMap.MAP_LAYER_KML_LOAD_BEGIN,{layer:this});var k=this.options.kmlUrl.replace("{cb}",Math.floor(Math.random()*(new Date).getTime()));k=k.replace("{lat}",this._map.getCenter().lat),k=k.replace("{lon}",this._map.getCenter().lng),k=k.replace("{zoom}",this._map.getZoom()),k=k.replace("{radiusMiles}",this._map.getRadiusMiles());var h={url:k,xdmProvider:this.options.xdmProvider,dataType:"xml",success:m,error:function(n,b,a){f._changeState($.wxcMap.IDLE),f._map.fire($.wxcMap.MAP_ERROR,{error:a,msg:b}),g.fail(a)}};$.wxc.ajax(h);return g.promise()},_loadStyles:function(){var d=this;if(d._kml.Style){var c={};$.each(d._kml.Style,function(o,n){function a(g){var f=g.substr(0,2),p=parseInt(f,16),h=p/255;return h}function b(g){var f=g.substr(0,2),q=g.substr(2,2),p=g.substr(4,2),h=g.substr(6,2);return h+p+q}if(n.IconStyle&&n.IconStyle.Icon){var m=n.IconStyle.Icon.href;if(d.options.iconDir){var k=m;k.wxcContains("/")&&(k=m.split("/")[m.split("/").length-1]),m=d.options.iconDir+k}n.icon=$.extend(new L.Icon,{iconUrl:m,anchorPoint:d.options.anchorPoint})}n.polyOptions={stroke:!0,color:"#ff0000",weight:3,opacity:1,fill:!0,fillColor:"#ff0000",fillOpacity:0.3,clickable:!0,smoothFactor:1,noClip:!1,type:"KmlShape",zIndex:d.options.zIndex},n.PolyStyle&&(n.PolyStyle.color&&(n.polyOptions.fill=!0,n.polyOptions.fillColor="#"+b(n.PolyStyle.color),n.polyOptions.fillOpacity=a(n.PolyStyle.color)),!n.PolyStyle.colorMode),n.LineStyle&&(n.LineStyle.color&&(n.polyOptions.stroke=!0,n.polyOptions.color="#"+b(n.LineStyle.color),n.polyOptions.opacity=a(n.LineStyle.color)),n.LineStyle.width&&(n.polyOptions.weight=n.LineStyle.width)),c[n.id]=n}),d._kml.Style=c}},_loadMarkers:function(){if(!!this._active){if(!this._kml){return}if(!this._kml.Placemark){return}this._killMarkers(),this._markerGroup=new L.LayerGroup,this._markerGroup.options={type:"KmlLayerGroup"},this._map.addLayer(this._markerGroup);var b=this;$.each(b._kml.Placemark,function(a,r){if(!r.Point){return !0}var q=r.Point.coordinates.split(",")[1],p=r.Point.coordinates.split(",")[0],o=new L.LatLng(parseFloat(q),parseFloat(p));b._latLngs.push(o);var n=r.styleUrl.replace("#","");r.args=r.description?$.parseJSON(r.description):{};var m=r.args&&r.args.plat&&r.args.plon?{plat:r.args.plat,plon:r.args.plon}:null,k=new L.Marker(o,{title:r.args.tooltip,icon:b._kml.Style[n].icon,type:"KmlMarker",zIndex:b.options.zIndex,projectedPath:m,click:b.options.click?function(c){c.type=$.wxcMap.MAP_LAYER_ICON_CLICK,c.data=r.args,b.options.click(c)}:null,dragend:b.options.dragend?function(c){c.type=$.wxcMap.MAP_LAYER_ICON_DRAG_END,c.data=r.args,b.options.dragend(c)}:null});b._markerGroup.addLayer(k)})}},_loadPolygons:function(){if(!!this._active){if(!this._kml){return}if(!this._kml.Placemark){return}this._killPolygons(),this._polyGroup=new L.LayerGroup,this._polyGroup.options={type:"KmlLayerGroup"},this._map.addLayer(this._polyGroup);var b=this;$.each(b._kml.Placemark,function(a,q){if(!q.Polygon){return !0}if(!q.Polygon.outerBoundaryIs){return !0}if(!q.Polygon.outerBoundaryIs.LinearRing){return !0}if(!q.Polygon.outerBoundaryIs.LinearRing.coordinates){return !0}var p=q.styleUrl.replace("#","");q.args=q.description?$.parseJSON(q.description):{};var o=q.Polygon.outerBoundaryIs.LinearRing.coordinates;o=o.split(" ");var n=[];$.each(o,function(f,t){var s=Number(t.split(",")[1]),r=Number(t.split(",")[0]),h=new L.LatLng(s,r);b._latLngs.push(h),n.push(h)});var m=b._kml.Style[p].polyOptions||{},k=new L.Polygon(n,m);b.options.click&&k.on("click",function(c){b.options.click({latlon:$.wxcMap.toWxcLatLon(c.latlng),type:$.wxcMap.MAP_LAYER_POLYGON_CLICK,data:q.args})}),b._polyGroup.addLayer(k)})}},_loadLines:function(){if(!!this._active){if(!this._kml){return}if(!this._kml.Placemark){return}this._killLines(),this._lineGroup=new L.LayerGroup,this._lineGroup.options={type:"KmlLayerGroup"},this._map.addLayer(this._lineGroup);var b=this;$.each(b._kml.Placemark,function(a,q){if(!q.LineString){return !0}var p=q.styleUrl.replace("#","");q.args=q.description?$.parseJSON(q.description):{};var o=q.LineString.coordinates;o=o.split(" ");var n=[];$.each(o,function(f,t){var s=Number(t.split(",")[1]),r=Number(t.split(",")[0]),h=new L.LatLng(s,r);b._latLngs.push(h),n.push(h)});var m=b._kml.Style[p].polyOptions||{};m.fill=!1;var k=new L.Polyline(n,m);b.options.click&&k.on("click",function(c){b.options.click({latlon:$.wxcMap.toWxcLatLon(c.latlng),type:$.wxcMap.MAP_LAYER_LINE_CLICK,data:q.args})}),b._lineGroup.addLayer(k)})}},_changeState:function(b){if(this._state==b){return !1}this._state=b,this._map.fire($.wxcMap.MAP_LAYER_STATE_CHANGED,{layer:this});return !0},_killMarkers:function(){this._markerGroup&&this._markerGroup.clearLayers()},_killPolygons:function(){this._polyGroup&&this._polyGroup.clearLayers()},_killLines:function(){this._lineGroup&&this._lineGroup.clearLayers()},_updateAttribution:function(b){this._map.attributionControl.removeAttribution(this.options.attribution),b&&(this.options.attribution=b),this._map.attributionControl.addAttribution(this.getAttribution())},isActive:function(){return this._active},setAttribution:function(b){this._updateAttribution(b);return this},getAttribution:function(){return this._active&&!this._outOfZoomRange?this.options.attribution:""},focus:function(){if(!this._active){return this}if(this._outOfZoomRange){return this}if(!this._latLngs){return this}if(this._latLngs.length<1){return this}var b=new L.LatLngBounds(this._latLngs);this._map.fitBounds(b);return this},activate:function(b){if(this._active){return this}this._active=!0,this._map.fire($.wxcMap.MAP_LAYER_ACTIVATED,{layer:this}),this.present();return this},deactivate:function(){if(!this._active){return this}this._active=!1,this._map.fire($.wxcMap.MAP_LAYER_DEACTIVATED,{layer:this}),this.unPresent();return this},present:function(){if(!this._active){return !1}if(this._outOfZoomRange){return !1}this._kml?(this._markerGroup.show(),this._polyGroup.show(),this._lineGroup.show()):this._loadKml(),this._updateAttribution();return !0},unPresent:function(){if(this._active&&!this._outOfZoomRange){return !1}this._markerGroup&&this._markerGroup.hide(),this._polyGroup&&this._polyGroup.hide(),this._lineGroup&&this._lineGroup.hide(),this._updateAttribution();return !0}}),function(){L.Control.LegendStack=L.Class.extend({legends:{},legendCount:0,imgHeight:16,onAdd:function(c){this._map=c,this._container=L.DomUtil.create("div","leaflet-control-legend-stack leaflet-hidden"),$(this._container).height(0)},getContainer:function(){return this._container},getPosition:function(){return L.Control.Position.TOP_LEFT},add:function(d,c){c=c===!1?!1:!0;!this._isOkayToAddLegend(d)||(this.legends[d.id]=d,this.legendCount++,this._addOne(d),c&&this._resizeContainer())},remove:function(f,d){d=d===!1?!1:!0;if(!!(f&&f.id&&this.legends[f.id])){var g=this.legends[f.id];g&&g.img&&($(g.img).remove(),delete this.legends[f.id],this.legendCount--,d&&this._resizeContainer())}},resize:function(){this._resizeContainer(!0)},_addOne:function(a){var m=this._map.getSize().x,k=m-2,h;h=b(a,m,this.imgHeight);if(h&&h!=""){var g=$("<img>").css({padding:"0px 0px 0px 0px",margin:"1px 0px 0px 0px",height:this.imgHeight+"px",width:k+"px"});g.attr("src",h).appendTo($(this._container)),a.img=g[0]}else{a.img=null}},_resizeContainer:function(k){var h=$(this._container);h.css({margin:"0px",padding:"0px","text-align":"center"});var q=h.width(),p=this._map.getSize().x;h.width(p);var o=200,n=this.imgHeight*this.legendCount+this.legendCount;n&&n++,h.show();var m=this;h.animate({height:n},o,function(){!!n}),k&&q!=p&&this._resizeLegends()},_resizeLegends:function(d){if(!!this.legends){var c=this;$.each(this.legends,function(f,g){c.remove(g,!1),c.add(g,!1)})}},_isOkayToAddLegend:function(c){return !c||!c.id?!1:this.legends[c.id]?!1:c.legendUrl?typeof c.legendUrl!="string"&&!($.isArray(c.legendUrl)&&c.legendUrl.length>0)?!1:!0:!1}});var b=function(t,s,r){if(!t||!s||!r){return""}var q=t.legendUrl,p="";if(typeof q=="string"){p=q}else{if($.isArray(q)){if(q.length===0){return""}q.sort(function(d,c){if(d.minWidth>c.minWidth){return -1}if(d.minWidth<c.minWidth){return 1}return 0});var o;for(var n=0,m=q.length;n<m;n++){var t=q[n];if(s>t.minWidth){o=t;break}}o||(o=q[0]);var k=$.wxc.getSystemOfMeasure();switch(k){case $.wxc.METRIC:p=t.urlMetric||t.url;break;case $.wxc.ENGLISH:default:p=t.url}}}p=p.wxcReplace("{width}",s).wxcReplace("{height}",r);return p}}(),L.Control.ImageLogo=L.Class.extend({options:{position:L.Control.Position.TOP_LEFT,src:$.wxc.URLS.bingLogo,"class":""},onAdd:function(b){this._map=b,this._img=L.DomUtil.create("img",this.options["class"]),this._img.src=this.options.src},initialize:function(b){$.extend(this.options,b)},getContainer:function(){return this._img},getPosition:function(){return this.options.position}}),$.wxcMap.PAST_LIGHTNING="pastLightning",$.wxcMap.STORMCELLS="stormcells",$.wxcMap.NWS_BULLETINS="nwsBulletins",$.wxcMap.RADAR="radar",$.wxcMap.LOCAL_RADAR="localRadar",$.wxcMap.CLOUDS="clouds",$.wxcMap.HURRICANES="hurricanes",$.wxcMap.HURRICANES_TEST="hurricanesTest",$.wxcMap.FUTURE_SKY="futureSky",$.wxcMap.FUTURE_RAIN="futureRain",$.wxcMap.FUTURE_SNOW="futureSnow",$.wxcMap.FUTURE_ICE="futureIce",$.wxcMap.FUTURE_TEMP="futureTemp",$.wxcMap.FUTURE_FEELS_LIKE="futureFeelsLike",$.wxcMap.FUTURE_HUMIDITY="futureHumidity",$.wxcMap.FUTURE_WIND_SPEED="futureWindSpeed",$.wxcMap.setLayerProviders=function(){var x={},w=$.wxc.DEFAULTS.passkey,v="&borderwidth=1&bordercolor=gray",u="&Units=Metric",t="&units=metric_alt1",s="&colortable=temperature_metric",r=200,q=[4,0.5],p=[8,0.5],o=function(a){x[a.id]=a},n=function(b){return(b+v).wxcFormat(w)},m=function(d,c){var c=c||"";return"&format=explicit&values="+d.join(",")+"&labels="+d.join(c+",")+c};o({layerType:$.wxcMap.KML,id:$.wxcMap.PAST_LIGHTNING,iconDir:$.wxc.ICON_ROOT+"storm/",active:!0,zIndex:600,anchorPoint:$.wxcMap.BOTTOM_LEFT,refreshOnViewChange:!0,kmlUrl:"http://imp.wxc.com/wxdata/kml/lightning.xml?lat={lat}&lon={lon}&level={zoom}&radius={radiusMiles}&cb={cb}",xdmProvider:"http://imp.wxc.com/easyXDM/ajaxProvider.html"}),o({layerType:$.wxcMap.KML,id:$.wxcMap.STORMCELLS,iconDir:$.wxc.ICON_ROOT+"storm/",active:!0,zIndex:500,anchorPoint:$.wxcMap.MIDDLE_CENTER,kmlUrl:"http://imp.wxc.com/wxdata/kml/storms2.xml?cb={cb}",xdmProvider:"http://imp.wxc.com/easyXDM/ajaxProvider.html"}),o({layerType:$.wxcMap.TILES,id:$.wxcMap.NWS_BULLETINS,active:!0,zIndex:700,tileUrl:"http://nws.myweather.net/?service=nwswarningservice&latlower={lLat}&latupper={uLat}&loncenter={cLon}&width={width}&height={height}&cb={cb}"}),function(){var b=n("http://imagery.wxc.com/?vs=1.0&passkey={0}&type=legend&datatype=radar&var=reflectivity_w_wintermask&width={width}&height={height}");o({layerType:$.wxcMap.TILES,id:$.wxcMap.RADAR,active:!0,zIndex:600,syncLoad:!1,fps:p,defaultFrame:$.wxcMap.LAST,legendUrl:[{minWidth:r,url:b}],indexUrl:"http://imagery.wxc.com/?vs=1.0&passkey={0}&timesteps=now,-9,0&datatype=radar&type=inventory&var=reflectivity_w_wintermask&cb={cb}".wxcFormat(w),tileUrl:"http://imagery.wxc.com/?vs=1.0&passkey={0}&type=tile&datatype=radar&exceptions=shaded&var=reflectivity_w_wintermask&time={time}&width={width}&height={height}&loncenter={cLon}&latupper={uLat}&latlower={lLat}".wxcFormat(w),xdmProvider:"http://imagery.wxc.com/easyXDM/ajaxProvider.html"})}(),function(){o({layerType:$.wxcMap.TILES,id:$.wxcMap.LOCAL_RADAR,active:!0,zIndex:600,syncLoad:!1,fps:p,defaultFrame:$.wxcMap.LAST,legendUrl:null,indexUrl:"http://llrmd.myweather.net/?service=localradarservice&fmt=xml&file=index&sector={host}rad&cb={cb}",tileUrl:"http://llrmd.myweather.net/?service=localradarservice&fmt=png&file={time}&width={width}&height={height}&loncenter={cLon}&latlower={lLat}&latupper={uLat}&sector={host}rad&units=english",xdmProvider:"http://llrmd.myweather.net/easyXDM/ajaxProvider.html"})}(),function(){var b=n("http://datacloud.wxc.com/?vs=1.0&passkey={0}&type=legend&datatype=satellite&var=irplus&width={width}&height={height}");o({layerType:$.wxcMap.TILES,id:$.wxcMap.CLOUDS,active:!0,zIndex:500,syncLoad:!1,fps:p,defaultFrame:$.wxcMap.LAST,legendUrl:[{minWidth:r,url:b}],indexUrl:"http://datacloud.wxc.com/?vs=1.0&passkey={0}&timesteps=now,-9,0&type=inventory&datatype=satellite&var=irplus&cb={cb}".wxcFormat(w),tileUrl:"http://datacloud.wxc.com/?vs=1.0&passkey={0}&type=tile&datatype=satellite&var=irplus&exceptions=shaded&time={time}&width={width}&height={height}&loncenter={cLon}&latupper={uLat}&latlower={lLat}&units=english".wxcFormat(w),xdmProvider:"http://datacloud.wxc.com/easyXDM/ajaxProvider.html"})}(),function(){o({layerType:$.wxcMap.KML,id:$.wxcMap.HURRICANES,active:!0,zIndex:650,anchorPoint:$.wxcMap.MIDDLE_CENTER,iconDir:$.wxc.ICON_ROOT+"storm/",kmlUrl:"http://mediaprod.wxc.com/com.wxc/servlets/GetTropicalStormKml?circles=false&lines=false&iconhref=http://mediaprod.wxc.com/com.wxc/styles/tropicalstorms/assets/$.png",xdmProvider:"http://mediaprod.wxc.com/easyXDM/ajaxProvider.html"})}(),function(){var a=x[$.wxcMap.HURRICANES],d=$.extend({},a,{kmlUrl:a.kmlUrl+"&storm=AL1205,AL0112&forcecurrent=true",id:$.wxcMap.HURRICANES_TEST});o(d)}(),function(){var b=n("http://datacloud.wxc.com/?vs=1.0&passkey={0}&type=legend&datatype=forecast&var=reflectivity_w_clouds&width={width}&height={height}");o({layerType:$.wxcMap.TILES,id:$.wxcMap.FUTURE_SKY,active:!0,zIndex:600,syncLoad:!1,fps:q,defaultFrame:$.wxcMap.FIRST,legendUrl:[{minWidth:r,url:b}],indexUrl:"http://datacloud.wxc.com/?datakey=true&vs=1.0&passkey={0}&timesteps=now,0,47&datatype=forecast&type=inventory&var=reflectivity_w_clouds&cb={cb}".wxcFormat(w),tileUrl:"http://datacloud.wxc.com/?vs=1.0&passkey={0}&type=tile&datatype=forecast&exceptions=shaded&var=reflectivity_w_clouds&time={time}&width={width}&height={height}&loncenter={cLon}&latupper={uLat}&latlower={lLat}&datakey={datakey}&units=english".wxcFormat(w),xdmProvider:"http://datacloud.wxc.com/easyXDM/ajaxProvider.html"})}(),function(){var b=n("http://datacloud.wxc.com/?vs=1.0&passkey={0}&type=legend&datatype=forecast&var=accumRainTotal&width={width}&height={height}"),d="http://datacloud.wxc.com/?vs=1.0&passkey={0}&type=tile&datatype=forecast&exceptions=shaded&var=accumRainTotal&time={time}&width={width}&height={height}&loncenter={cLon}&latupper={uLat}&latlower={lLat}&datakey={datakey}".wxcFormat(w);o({layerType:$.wxcMap.TILES,id:$.wxcMap.FUTURE_RAIN,active:!0,zIndex:600,syncLoad:!1,fps:q,defaultFrame:$.wxcMap.FIRST,legendUrl:[{minWidth:400,url:b+'&format=explicit&values=0.1,0.5,1,1.5,2,3,4,5,6,7,8,9,10&labels=0.1",0.5",1",1.5",2",3",4",5",6",7",8",9",10"',urlMetric:b+u+"&format=explicit&values=5,10,50,80,100,150,200,250&labels=5mm,1cm,5cm,8cm,10cm,15cm,20cm,25cm&fontsize=8"},{minWidth:r,url:b+'&format=explicit&values=0.1,1,2,4,6,8,10&labels=.1",1",2",4",6",8",10"',urlMetric:b+u+"&format=explicit&values=10,50,100,150,200,250&labels=1cm,5cm,10cm,15cm,20cm,25cm&fontsize=8"}],indexUrl:"http://datacloud.wxc.com/?datakey=true&vs=1.0&passkey={0}&timesteps=now,0,47&datatype=forecast&type=inventory&var=accumRainTotal&cb={cb}".wxcFormat(w),tileUrl:{english:d+"&units=english",metric:d+"&units=metric_alt1&colortable=accumulatedrainmetric"},xdmProvider:"http://datacloud.wxc.com/easyXDM/ajaxProvider.html"})}(),function(){var b=n("http://datacloud.wxc.com/?vs=1.0&passkey={0}&type=legend&datatype=forecast&var=accumSnowTotal&width={width}&height={height}"),d="http://datacloud.wxc.com/?vs=1.0&passkey={0}&type=tile&datatype=forecast&exceptions=shaded&var=accumSnowTotal&time={time}&width={width}&height={height}&loncenter={cLon}&latupper={uLat}&latlower={lLat}&datakey={datakey}".wxcFormat(w);o({layerType:$.wxcMap.TILES,id:$.wxcMap.FUTURE_SNOW,active:!0,zIndex:600,syncLoad:!1,fps:q,defaultFrame:$.wxcMap.FIRST,legendUrl:[{minWidth:800,url:b,urlMetric:b+u+"&fontsize=8"},{minWidth:400,url:b+'&format=explicit&values=1,3,6,9,12,24,36,37&labels=<1",1"-3",3"-6",6"-9",9"-12",1\'-2\',2\'-3\',3\' +',urlMetric:b+u+"&format=explicit&values=2,5,20,50,75&labels=1cm,10cm,20cm,50cm,75cm+"},{minWidth:r,url:b+"&format=explicit&values=1,3,6,12,24,36,37&labels=<1\",3\",6\",1',2',3',3'+",urlMetric:b+u+"&format=explicit&values=2,5,20,50,75&labels=1cm,10cm,20cm,50cm,75cm+&fontsize=8"}],indexUrl:"http://datacloud.wxc.com/?datakey=true&vs=1.0&passkey={0}&timesteps=now,0,47&datatype=forecast&type=inventory&var=accumSnowTotal&cb={cb}".wxcFormat(w),tileUrl:{english:d+"&units=english",metric:d+"&units=metric_alt1&colortable=accumulatedsnowmetric"},xdmProvider:"http://datacloud.wxc.com/easyXDM/ajaxProvider.html"})}(),function(){var b=n("http://datacloud.wxc.com/?vs=1.0&passkey={0}&type=legend&datatype=forecast&var=accumIceTotal&width={width}&height={height}"),d="http://datacloud.wxc.com/?vs=1.0&passkey={0}&type=tile&datatype=forecast&exceptions=shaded&var=accumIceTotal&time={time}&width={width}&height={height}&loncenter={cLon}&latupper={uLat}&latlower={lLat}&datakey={datakey}".wxcFormat(w);o({layerType:$.wxcMap.TILES,id:$.wxcMap.FUTURE_ICE,active:!0,zIndex:600,syncLoad:!1,fps:q,defaultFrame:$.wxcMap.FIRST,legendUrl:[{minWidth:800,url:b,urlMetric:b+u+"&format=explicit&values=5,10,15,20,30,40,50,70&labels=5mm,10mm,15mm,20mm,30mm,40mm,50mm,70mm"},{minWidth:400,url:b+'&format=explicit&values=0.1,.25,.5,.75,1,1.25,1.5,1.75,2&labels=0.1",0.25",0.5",0.75",1",1.25",1.5",1.75",2"',urlMetric:b+u+"&format=explicit&values=5,10,15,20,30,40,50&labels=5mm,10mm,15mm,20mm,30mm,40mm,50mm"},{minWidth:r,url:b+'&format=explicit&values=.1,.5,1,1.5,2&labels=0.1",0.5",1",1.5",2"',urlMetric:b+u+"&format=explicit&values=5,10,20,30,40&labels=5mm,10mm,20mm,30mm,40mm&fontsize=8"}],indexUrl:"http://datacloud.wxc.com/?datakey=true&vs=1.0&passkey={0}&timesteps=now,0,47&datatype=forecast&type=inventory&var=accumIceTotal&cb={cb}".wxcFormat(w),tileUrl:{english:d+"&units=english",metric:d+"&units=metric_alt1&colortable=IceAccumulationMetric"},xdmProvider:"http://datacloud.wxc.com/easyXDM/ajaxProvider.html"})}(),function(){var b=n("http://datacloud.wxc.com/?vs=1.0&passkey={0}&type=legend&datatype=forecast&var=temperature&width={width}&height={height}"),d="http://datacloud.wxc.com/?vs=1.0&passkey={0}&mask=1&type=tile&datatype=forecast&exceptions=shaded&var=temperature&time={time}&width={width}&height={height}&loncenter={cLon}&latupper={uLat}&latlower={lLat}&datakey={datakey}".wxcFormat(w);o({layerType:$.wxcMap.TILES,id:$.wxcMap.FUTURE_TEMP,active:!0,zIndex:600,syncLoad:!1,fps:q,defaultFrame:$.wxcMap.FIRST,legendUrl:[{minWidth:800,url:b,urlMetric:b+u+"&format=explicit&values=-30,-25,-20,-15,-10,-5,0,5,10,15,20,25,30,35,40,45&labels=-30,-25,-20,-15,-10,-5,0,5,10,15,20,25,30,35,40,45"},{minWidth:400,url:b+"&format=explicit&values=-20,-10,0,10,20,30,40,50,60,70,80,90,100,110&labels=-20,-10,0,10,20,30,40,50,60,70,80,90,100,110",urlMetric:b+u+"&format=explicit&values=-30,-25,-20,-15,-10,-5,0,5,10,15,20,25,30,35,40,45&labels=-30,-25,-20,-15,-10,-5,0,5,10,15,20,25,30,35,40,45"},{minWidth:r,url:b+"&format=explicit&values=-15,0,15,30,45,60,75,85,100&labels=-15,0,15,30,45,60,75,85,100&fontsize=8",urlMetric:b+u+"&format=explicit&values=-25,-10,0,10,15,20,25,30,40&labels=-25,-10,0,10,15,20,25,30,40&fontsize=8"}],indexUrl:"http://datacloud.wxc.com/?datakey=true&vs=1.0&passkey={0}&timesteps=now,0,47&datatype=forecast&type=inventory&var=temperature&cb={cb}".wxcFormat(w),tileUrl:{english:d+"&units=english",metric:d+"&units=metric_alt1&colortable=temperature(metric)"},xdmProvider:"http://datacloud.wxc.com/easyXDM/ajaxProvider.html"})}(),function(){var b=n("http://datacloud.wxc.com/?vs=1.0&passkey={0}&type=legend&datatype=forecast&var=FeelsLike&width={width}&height={height}"),d="http://datacloud.wxc.com/?vs=1.0&passkey={0}&mask=1&type=tile&datatype=forecast&exceptions=shaded&var=FeelsLike&time={time}&width={width}&height={height}&loncenter={cLon}&latupper={uLat}&latlower={lLat}&datakey={datakey}".wxcFormat(w);o({layerType:$.wxcMap.TILES,id:$.wxcMap.FUTURE_FEELS_LIKE,active:!0,zIndex:600,syncLoad:!1,fps:q,defaultFrame:$.wxcMap.FIRST,legendUrl:[{minWidth:800,url:b,urlMetric:b+u+"&format=explicit&values=-30,-25,-20,-15,-10,-5,0,5,10,15,20,25,30,35,40,45&labels=-30,-25,-20,-15,-10,-5,0,5,10,15,20,25,30,35,40,45"},{minWidth:400,url:b+"&format=explicit&values=-20,-10,0,10,20,30,40,50,60,70,80,90,100,110&labels=-20,-10,0,10,20,30,40,50,60,70,80,90,100,110",urlMetric:b+u+"&format=explicit&values=-30,-25,-20,-15,-10,-5,0,5,10,15,20,25,30,35,40,45&labels=-30,-25,-20,-15,-10,-5,0,5,10,15,20,25,30,35,40,45"},{minWidth:r,url:b+"&format=explicit&values=-15,0,15,30,45,60,75,85,100&labels=-15,0,15,30,45,60,75,85,100&fontsize=8",urlMetric:b+u+"&format=explicit&values=-25,-10,0,10,15,20,25,30,40&labels=-25,-10,0,10,15,20,25,30,40&fontsize=8"}],indexUrl:"http://datacloud.wxc.com/?datakey=true&vs=1.0&passkey={0}&timesteps=now,0,47&datatype=forecast&type=inventory&var=FeelsLike&cb={cb}".wxcFormat(w),tileUrl:{english:d+"&units=english",metric:d+"&units=metric_alt1&colortable=feelslike(metric)"},xdmProvider:"http://datacloud.wxc.com/easyXDM/ajaxProvider.html"})}(),function(){var b=n("http://datacloud.wxc.com/?vs=1.0&passkey={0}&type=legend&datatype=forecast&var=RelativeHumidity&width={width}&height={height}"),d="http://datacloud.wxc.com/?vs=1.0&passkey={0}&mask=1&type=tile&datatype=forecast&exceptions=shaded&var=RelativeHumidity&time={time}&width={width}&height={height}&loncenter={cLon}&latupper={uLat}&latlower={lLat}&datakey={datakey}".wxcFormat(w);o({layerType:$.wxcMap.TILES,id:$.wxcMap.FUTURE_HUMIDITY,active:!0,zIndex:600,syncLoad:!1,fps:q,defaultFrame:$.wxcMap.FIRST,legendUrl:[{minWidth:400,url:b},{minWidth:r,url:b+"&format=explicit&values=10,20,40,50,60,70,80,90,100&labels=dry,,moist&fontsize=9"}],indexUrl:"http://datacloud.wxc.com/?datakey=true&vs=1.0&passkey={0}&timesteps=now,0,47&datatype=forecast&type=inventory&var=RelativeHumidity&cb={cb}".wxcFormat(w),tileUrl:{english:d+"&units=english",metric:d+"&units=metric_alt1&colortable=Humidity"},xdmProvider:"http://datacloud.wxc.com/easyXDM/ajaxProvider.html"})}(),function(){var b=n("http://datacloud.wxc.com/?vs=1.0&passkey={0}&type=legend&datatype=forecast&var=WindSpeed_10m&width={width}&height={height}"),d="http://datacloud.wxc.com/?vs=1.0&passkey={0}&type=tile&datatype=forecast&exceptions=shaded&var=WindSpeed_10m&time={time}&width={width}&height={height}&loncenter={cLon}&latupper={uLat}&latlower={lLat}&datakey={datakey}".wxcFormat(w);o({layerType:$.wxcMap.TILES,id:$.wxcMap.FUTURE_WIND_SPEED,active:!0,zIndex:600,syncLoad:!1,fps:q,defaultFrame:$.wxcMap.FIRST,legendUrl:[{minWidth:800,url:b,urlMetric:b+t+"&format=explicit&values=10,20,30,40,50,60,70,80,90,100,110&labels=10kph,20kph,30kph,40kph,50kph,60kph,70kph,80kph,90kph,100kph,110kph"},{minWidth:400,url:b+"&format=explicit&values=5,10,15,20,30,40,50&labels=5mph,10mph,15mph,20mph,30mph,40mph,50mph+&fontsize=8",urlMetric:b+t+"&format=explicit&values=10,20,30,40,50,60,70,80,90&labels=10kph,20kph,30kph,40kph,50kph,60kph,70kph,80kph,90kph&fontsize=8"},{minWidth:r,url:b+"&format=explicit&values=5,15,30,40,50&labels=5mph,15mph,30mph,40mph,50mph+&fontsize=7",urlMetric:b+t+"&format=explicit&values=10,30,50,70,90&labels=10kph,30kph,50kph,70kph,90kph&fontsize=7"}],indexUrl:"http://datacloud.wxc.com/?datakey=true&vs=1.0&passkey={0}&timesteps=now,0,47&datatype=forecast&type=inventory&var=WindSpeed_10m&cb={cb}".wxcFormat(w),tileUrl:{english:d+"&units=english",metric:d+"&units=metric_alt1&colortable=windspeed_metricalt1"},xdmProvider:"http://datacloud.wxc.com/easyXDM/ajaxProvider.html"})}(),$.wxcMap.LAYER_PROVIDERS=x},function(b){b.jGrowl=function(a,d){b("#jGrowl").size()==0&&b('<div id="jGrowl"></div>').addClass(d&&d.position?d.position:b.jGrowl.defaults.position).appendTo("body"),b("#jGrowl").jGrowl(a,d)},b.fn.jGrowl=function(a,g){if(b.isFunction(this.each)){var f=arguments;return this.each(function(){var c=this;b(this).data("jGrowl.instance")==undefined&&(b(this).data("jGrowl.instance",b.extend(new b.fn.jGrowl,{notifications:[],element:null,interval:null})),b(this).data("jGrowl.instance").startup(this)),b.isFunction(b(this).data("jGrowl.instance")[a])?b(this).data("jGrowl.instance")[a].apply(b(this).data("jGrowl.instance"),b.makeArray(f).slice(1)):b(this).data("jGrowl.instance").create(a,g)})}},b.extend(b.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"top-right",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3000,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:!0,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(f,d,g){},beforeOpen:function(f,d,g){},afterOpen:function(f,d,g){},open:function(f,d,g){},beforeClose:function(f,d,g){},close:function(f,d,g){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(a,d){var d=b.extend({},this.defaults,d);typeof d.speed!="undefined"&&(d.openDuration=d.speed,d.closeDuration=d.speed),this.notifications.push({message:a,options:d}),d.log.apply(this.element,[this.element,a,d])},render:function(a){var m=this,k=a.message,h=a.options,a=b('<div class="jGrowl-notification '+h.themeState+" ui-corner-all"+(h.group!=undefined&&h.group!=""?" "+h.group:"")+'"><div class="jGrowl-close">'+h.closeTemplate+'</div><div class="jGrowl-header">'+h.header+'</div><div class="jGrowl-message">'+k+"</div></div>").data("jGrowl",h).addClass(h.theme).children("div.jGrowl-close").bind("click.jGrowl",function(){b(this).parent().trigger("jGrowl.beforeClose")}).parent();b(a).bind("mouseover.jGrowl",function(){b("div.jGrowl-notification",m.element).data("jGrowl.pause",!0)}).bind("mouseout.jGrowl",function(){b("div.jGrowl-notification",m.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){h.beforeOpen.apply(a,[a,k,h,m.element])!=!1&&b(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){h.open.apply(a,[a,k,h,m.element])!=!1&&(h.glue=="after"?b("div.jGrowl-notification:last",m.element).after(a):b("div.jGrowl-notification:first",m.element).before(a),b(this).animate(h.animateOpen,h.openDuration,h.easing,function(){b(this).data("jGrowl")!=null&&(b(this).data("jGrowl").created=new Date),b(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){h.afterOpen.apply(a,[a,k,h,m.element])}).bind("jGrowl.beforeClose",function(){h.beforeClose.apply(a,[a,k,h,m.element])!=!1&&b(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){b(this).data("jGrowl.pause",!0),b(this).animate(h.animateClose,h.closeDuration,h.easing,function(){b.isFunction(h.close)?h.close.apply(a,[a,k,h,m.element])!==!1&&b(this).remove():b(this).remove()})}).trigger("jGrowl.beforeOpen"),h.corners!=""&&b.fn.corner!=undefined&&b(a).corner(h.corners);if(b("div.jGrowl-notification:parent",m.element).size()>1&&b("div.jGrowl-closer",m.element).size()==0&&this.defaults.closer!=!1){var g=b(this.defaults.closerTemplate);h.width&&(g=b(this.defaults.closerTemplate).width(h.width)),g.addClass("jGrowl-closer ui-state-highlight ui-corner-all").addClass(this.defaults.theme).appendTo(m.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){b(this).siblings().trigger("jGrowl.beforeClose"),b.isFunction(m.defaults.closer)&&m.defaults.closer.apply(b(this).parent()[0],[b(this).parent()[0]])})}},update:function(){b(this.element).find("div.jGrowl-notification:parent").each(function(){b(this).data("jGrowl")!=undefined&&b(this).data("jGrowl").created!=undefined&&b(this).data("jGrowl").created.getTime()+parseInt(b(this).data("jGrowl").life)<(new Date).getTime()&&b(this).data("jGrowl").sticky!=!0&&(b(this).data("jGrowl.pause")==undefined||b(this).data("jGrowl.pause")!=!0)&&b(this).trigger("jGrowl.beforeClose")}),this.notifications.length>0&&(this.defaults.pool==0||b(this.element).find("div.jGrowl-notification:parent").size()<this.defaults.pool)&&this.render(this.notifications.shift()),b(this.element).find("div.jGrowl-notification:parent").size()<2&&b(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){b(this).remove()})},startup:function(a){this.element=b(a).addClass("jGrowl").append('<div class="jGrowl-notification"></div>'),this.interval=setInterval(function(){b(a).data("jGrowl.instance").update()},parseInt(this.defaults.check)),b.browser.msie&&parseInt(b.browser.version)<7&&!window.XMLHttpRequest&&b(this.element).addClass("ie6")},shutdown:function(){b(this.element).removeClass("jGrowl").find("div.jGrowl-notification").remove(),clearInterval(this.interval)},close:function(){b(this.element).find("div.jGrowl-notification").each(function(){b(this).trigger("jGrowl.beforeClose")})}}),b.jGrowl.defaults=b.fn.jGrowl.prototype.defaults}(jQuery);(function(b){b.gritter={};b.gritter.options={position:"",fade_in_speed:"medium",fade_out_speed:1000,time:6000};b.gritter.add=function(f){try{return a.add(f||{})}catch(d){var c="Gritter Error: "+d;(typeof(console)!="undefined"&&console.error)?console.error(c,f):alert(c)}};b.gritter.remove=function(d,c){a.removeSpecific(d,c||{})};b.gritter.removeAll=function(c){a.stop(c||{})};var a={position:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<div class="gritter-close"></div>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none"><div class="gritter-top"></div><div class="gritter-item">[[image]]<div class="[[class_name]]"><span class="gritter-title">[[username]]</span><p>[[text]]</p></div><div style="clear:both"></div></div><div class="gritter-bottom"></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(h){if(!h.title||!h.text){throw'You need to fill out the first 2 params: "title" and "text"'}if(!this._is_setup){this._runSetup()}var m=h.title,r=h.text,f=h.image||"",p=h.sticky||false,q=h.class_name||"",o=b.gritter.options.position,d=h.time||"";this._verifyWrapper();this._item_count++;var g=this._item_count,n=this._tpl_item;b(["before_open","after_open","before_close","after_close"]).each(function(t,u){a["_"+u+"_"+g]=(b.isFunction(h[u]))?h[u]:function(){}});this._custom_timer=0;if(d){this._custom_timer=d}var c=(f!="")?'<img src="'+f+'" class="gritter-image" />':"",k=(f!="")?"gritter-with-image":"gritter-without-image";n=this._str_replace(["[[username]]","[[text]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]"],[m,r,c,this._item_count,k,q],n);this["_before_open_"+g]();b("#gritter-notice-wrapper").addClass(o).append(n);var s=b("#gritter-item-"+this._item_count);s.fadeIn(this.fade_in_speed,function(){a["_after_open_"+g](b(this))});if(!p){this._setFadeTimer(s,g)}b(s).bind("mouseenter mouseleave",function(t){if(t.type=="mouseenter"){if(!p){a._restoreItemIfFading(b(this),g)}}else{if(!p){a._setFadeTimer(b(this),g)}}a._hoverState(b(this),t.type)});return g},_countRemoveWrapper:function(c,d,f){d.remove();this["_after_close_"+c](d,f);if(b(".gritter-item-wrapper").length==0){b("#gritter-notice-wrapper").remove()}},_fade:function(f,c,h,d){var h=h||{},g=(typeof(h.fade)!="undefined")?h.fade:true;fade_out_speed=h.speed||this.fade_out_speed,manual_close=d;this["_before_close_"+c](f,manual_close);if(d){f.unbind("mouseenter mouseleave")}if(g){f.animate({opacity:0},fade_out_speed,function(){f.animate({height:0},300,function(){a._countRemoveWrapper(c,f,manual_close)})})}else{this._countRemoveWrapper(c,f)}},_hoverState:function(f,d){if(d=="mouseenter"){f.addClass("hover");var c=f.find("img");(c.length)?c.before(this._tpl_close):f.find("span").before(this._tpl_close);f.find(".gritter-close").click(function(){var g=f.attr("id").split("-")[2];a.removeSpecific(g,{},f,true)})}else{f.removeClass("hover");f.find(".gritter-close").remove()}},removeSpecific:function(c,g,f,d){if(!f){var f=b("#gritter-item-"+c)}this._fade(f,c,g||{},d)},_restoreItemIfFading:function(d,c){clearTimeout(this["_int_id_"+c]);d.stop().css({opacity:""})},_runSetup:function(){for(opt in b.gritter.options){this[opt]=b.gritter.options[opt]}this._is_setup=1},_setFadeTimer:function(f,d){var c=(this._custom_timer)?this._custom_timer:this.time;this["_int_id_"+d]=setTimeout(function(){a._fade(f,d)},c)},stop:function(f){var c=(b.isFunction(f.before_close))?f.before_close:function(){};var g=(b.isFunction(f.after_close))?f.after_close:function(){};var d=b("#gritter-notice-wrapper");c(d);d.fadeOut(function(){b(this).remove();g()})},_str_replace:function(x,g,q,p){var m=0,k=0,v="",o="",h=0,u=0,n=[].concat(x),c=[].concat(g),w=q,d=c instanceof Array,t=w instanceof Array;w=[].concat(w);if(p){this.window[p]=0}for(m=0,h=w.length;m<h;m++){if(w[m]===""){continue}for(k=0,u=n.length;k<u;k++){v=w[m]+"";o=d?(c[k]!==undefined?c[k]:""):c[0];w[m]=(v).split(n[k]).join(o);if(p&&w[m]!==v){this.window[p]+=(v.length-w[m].length)/n[k].length}}}return t?w:w[0]},_verifyWrapper:function(){if(b("#gritter-notice-wrapper").length==0){b("body").append(this._tpl_wrap)}}}})($wn);(function(a){a.fn.easyPaginate=function(b){var n={step:4,firsttab:false,delay:0,numeric:true,nextprev:true,auto:false,loop:false,pause:4000,clickstop:true,controls:"pagination",current:"current",randomstart:false,mobile:false,mobile_hourly:false};var b=a.extend(n,b);var m=b.mobile_hourly;var f=b.step;var u=b.firsttab;var w,s;var c=a(this).children();var h=c.length;var t=a(this);var p,r,q;var o=Math.floor(h/f);var d=(b.randomstart)?Math.floor(Math.random()*o)+1:1;var k;var g=false;function v(){clearTimeout(k);w=((d-1)*f);s=w+f;if(d!=1&&!m){w=(w-(d-1));s=w+f}a(c).each(function(x){var y=a(this);y.hide().removeClass("wn-visible-item");if(x>=w&&x<s){setTimeout(function(){y.css({display:"block"}).addClass("wn-visible-item");if(u){a(c).removeClass("active-tab");if(d==1){a(t).find("li.wn-visible-item").first().addClass("active-tab").click()}else{a(t).find("li.wn-visible-item").first().addClass("active-tab").click()}}},(x-(Math.floor(x/f)*f))*b.delay)}if(b.nextprev){if(s>=h){r.fadeOut("fast")}else{r.css("display","block")}if(w>=1){q.css("display","block")}else{q.fadeOut("fast")}}})}this.each(function(y){p=this;if(h>f){if((h/f)>o){o++}if(b.nextprev){q=a('<div class="wn-prev-button"></div>').hide().appendTo(a(this).parent()).click(function(){a(".dblclick-blocker").css("display","block");g=true;d--;v();setTimeout(function(){a(".dblclick-blocker").css("display","none")},300)})}if(b.nextprev){r=a('<div class="wn-next-button"></div>').hide().appendTo(a(this).parent()).click(function(){a(".dblclick-blocker").css("display","block");g=true;d++;v();setTimeout(function(){a(".dblclick-blocker").css("display","none")},300)})}var x=a(this).parent().find(".dblclick-blocker");if(x.length==0){a(this).parent().append('<div class="dblclick-blocker"></div>')}v()}})}})(jQuery);jQuery.autocomplete=function(d,z){var t=this;var F=$(d).attr("autocomplete","off");z&&(z.el=F[0]);if(z.inputClass){F.addClass(z.inputClass)}var u=document.createElement("div");u.size=z.maxItemsToShow;var n=$(u);n.hide().addClass(z.resultsClass).css("position","absolute");if(z.width>0){n.css("width",z.width)}$("body").append(u);d.autocompleter=t;var S=null;var E="";var T=-1;var o={};var I=false;var p=false;var x=false;var a=null;var R=true,D=null,N=null,B=false,h=false;shift_key_pressed=false;var Q=new UAParser();currentBrowser=Q.getBrowser();function q(){o={};o.data={};o.length=0}q();if(z.data!=null){var w="",Y={},r=[];if(typeof z.url!="string"){z.cacheLength=1}for(var W=0;W<z.data.length;W++){r=((typeof z.data[W]=="string")?[z.data[W]]:z.data[W]);if(r[0].length>0){w=r[0].substring(0,1).toLowerCase();if(!Y[w]){Y[w]=[]}Y[w].push(r)}}for(var V in Y){z.cacheLength++;f(V,Y[V])}}F.bind("keydown",function(k){if(!R){if(z.onKeyDown&&typeof z.onKeyDown=="function"){z.onKeyDown(k)}return true}h=k.ctrlKey||k.metaKey;shift_key_pressed=k.shiftKey;if(z.onKeyDown&&typeof z.onKeyDown=="function"){z.onKeyDown(k)}return true});F.bind("keyup",function(Z){if(!R){if(z.onKeyUp&&typeof z.onKeyUp=="function"){z.onKeyUp(Z)}return true}E="";var k=[65,66,67,80,83];if(h&&$.inArray(Z.keyCode,k)>-1){h=false;return false}if(z.onKeyUp&&typeof z.onKeyUp=="function"){z.onKeyUp(Z)}a=Z.keyCode;switch(Z.keyCode){case 38:Z.preventDefault();K(-1);break;case 40:Z.preventDefault();K(1);break;case 9:case 13:if(O()){F.get(0).blur();Z.preventDefault()}break;default:T=-1;if(S){clearTimeout(S)}S=setTimeout(function(){y()},z.delay);break}});F.bind("paste",function(k){a=-1;T=-1;E="";if(S){clearTimeout(S)}S=setTimeout(function(){y();if(z.onPaste&&typeof z.onPaste=="function"){z.onPaste(k)}},z.delay)});F.bind("focus",function(k){if(!R){return true}p=true;x=false;if(z.onFocus&&typeof z.onFocus=="function"){z.onFocus(k)}});F.bind("blur",function(k){if(!R){return true}p=false;c();if(z.onBlur&&typeof z.onBlur=="function"){z.onBlur(k)}});if(currentBrowser.name=="IE"){n.bind("focus",function(){if(!R){return true}x=true;F.focus()});n.bind("blur",function(){if(!R){return true}x=false})}A();function y(){if(a>8&&a<32&&a!=16&&a!=17){return n.hide()}var k=F.val();if(a==46){if(k.length==0){return n.hide()}}if(k==E){return}E=k;z.minChars=(isNaN(k))?z.minChars_city:z.minChars_zip;if(k.length>=z.minChars){var Z=true;if(z.beforeRequest&&typeof z.beforeRequest=="function"){Z=z.beforeRequest(F)}if(!Z){return}F.addClass(z.loadingClass);J(k)}else{F.removeClass(z.loadingClass);n.hide()}}function K(k){var ad=$("li",n);if(!ad){return}T+=k;if(T<0){T=0}else{if(T>=ad.size()){T=ad.size()-1}}ad.removeClass("ac_over");$(ad[T]).addClass("ac_over");var ah=$(ad[T]),ac=$("ul",n),aa,af,ag,Z,ae;ah.addClass("highlighted");ag=parseInt(ac.css("maxHeight"),10);ae=ac.scrollTop();Z=ag+ae;af=ah.position().top+ac.scrollTop();aa=af+ah.outerHeight();B=true;var ab;if(aa>=Z){ab=ac.scrollTop((aa-ag)>0?aa-ag:0)}else{if(af<ae){ab=ac.scrollTop(af)}}if(N){clearTimeout(N)}N=setTimeout(function(){B=false},500);return ab}function O(k){var k=$("li.ac_over",u)[0];if(k){v(k);return true}else{return false}}function v(Z){if(!Z){Z=document.createElement("li");Z.extra=[];Z.selectValue=""}var k=$.trim(Z.selectValue?Z.selectValue:Z.innerHTML);d.lastSelected=k;E=k;if(typeof z.enableSelection!="boolean"){z.enableSelection=true}if(z.enableSelection){F.val(Z.innerHTML)}n.children().remove();A();if(z.enableSelection&&z.onItemSelect){setTimeout(function(){z.onItemSelect(Z)},1);return true}else{setTimeout(function(){F.focus()},1);return false}}function b(ab,Z){var aa=F.get(0);if(aa.createTextRange){var k=aa.createTextRange();k.collapse(true);k.moveStart("character",ab);k.moveEnd("character",Z);k.select()}else{if(aa.setSelectionRange){aa.setSelectionRange(ab,Z)}else{if(aa.selectionStart){aa.selectionStart=ab;aa.selectionEnd=Z}}}aa.focus()}function C(k){if(a!=8){F.val(F.val()+k.substring(E.length));b(E.length,k.length)}}function M(){var Z=($(z.weather))?5:0,k=($(z.weather))?6:0;var ab=G(d);var aa=(z.width>0)?z.width:F.width();n.css({width:parseInt(aa)+"px",top:(ab.y+d.offsetHeight)+Z+"px",left:ab.x-k+"px"}).show()}function c(){if(S){clearTimeout(S)}S=setTimeout(function(){if(!p&&!x){A()}},200)}function A(){if(S){clearTimeout(S)}F.removeClass(z.loadingClass);if(n.is(":visible")){n.hide()}if(z.mustMatch){var k=F.val();if(k!=d.lastSelected){v(null)}}T=-1}function m(aa,Z){if(z.onDataReceived){z.onDataReceived(Z)}if(Z){F.removeClass(z.loadingClass);n.children().remove();if(Z.length==0){return A()}n.append(U(Z));if(currentBrowser.name=="IE"){var k=document.createElement("iframe");$(k).css({width:"100%",height:n.outerHeight()});n.prepend(document.createElement("iframe"))}if(z.autoFill&&(F.val().toLowerCase()==aa.toLowerCase())){C(Z[0][0])}M()}else{A()}}function g(ab){if(!ab){return null}var k=[];var aa=ab.split(z.lineSeparator);for(var Z=0;Z<aa.length;Z++){var ac=$.trim(aa[Z]);if(ac){k[k.length]=ac.split(z.cellSeparator)}}return k}function U(ae){var ac=document.createElement("ul"),aa=ae.length;for(var ab=0;ab<aa;ab++){var af=ae[ab];if(!af){continue}var ad=document.createElement("li");if(z.formatItem){ad=z.formatItem(ad,af,ab,aa)}else{ad.innerHTML=af[0];ad.value=af[0]}var k=null;if(af.length>1){k=[];for(var Z=1;Z<af.length;Z++){k[k.length]=af[Z]}}ad.extra=k;ac.appendChild(ad);$(ad).bind("hover",function(ag){if(B){ag.preventDefault()}else{$("li",ac).removeClass("ac_over");$(this).addClass("ac_over");T=$("li",ac).indexOf($(this).get(0))}}).bind("unhover",function(ag){$(this).removeClass("ac_over")}).bind("click",function(ag){ag.preventDefault();ag.stopPropagation();return v(this)})}return ac}function J(Z){if(!z.matchCase){Z=Z.toLowerCase()}var k=z.cacheLength?X(Z):null;if(k){m(Z,k)}else{if((typeof z.url=="string")&&(z.url.length>0)){if(!z.weather){$.get(s(Z),function(aa){if(z.formatData&&typeof z.formatData=="function"){aa=z.formatData(aa,z,F)}aa=g(aa);f(Z,aa);m(Z,aa)})}if(z.weather){$.ajax({url:s(Z),dataType:"jsonp",jsonpCallback:"getdata",success:function(aa){if(z.formatData&&typeof z.formatData=="function"){aa=z.formatData(aa,z,F)}aa=g(aa);f(Z,aa);m(Z,aa)}})}}else{F.removeClass(z.loadingClass)}}}function s(aa){if(!z.weather){var ab=z.queryVarName||"q",k=z.url+"?"+ab+"="+encodeURI(aa);for(var Z in z.extraParams){k+="&"+Z+"="+encodeURI(z.extraParams[Z])}}else{k=z.url+"?$callback=getdata&q="+encodeURI(aa)}return k}function X(ae){if(!ae){return null}if(o.data[ae]){return o.data[ae]}if(z.matchSubset&&z.matchSubset<1){for(var ac=ae.length-1;ac>=z.minChars;ac--){var Z=ae.substr(0,ac);var af=o.data[Z];if(af){var ad=[];for(var aa=0;aa<af.length;aa++){var k=af[aa];var ab=k[0];if(H(ab,ae)){ad[ad.length]=k}}return ad}}}return null}function H(aa,Z){if(!z.matchCase){aa=aa.toLowerCase()}var k=aa.indexOf(Z);if(k==-1){return false}return k==0||z.matchContains}this.flushCache=function(){q()};this.setExtraParams=function(k){z.extraParams=k};this.findValue=function(){var Z=F.val();if(!z.matchCase){Z=Z.toLowerCase()}var k=z.cacheLength?X(Z):null;if(k){P(Z,k)}else{if((typeof z.url=="string")&&(z.url.length>0)){$.get(s(Z),function(aa){aa=g(aa);f(Z,aa);P(Z,aa)})}else{P(Z,null)}}};this.on=function(){R=true};this.off=function(){R=false};this.destroy=function(){R=false;d.autocompleter=null;$(d).unbind("keydown").unbind("focus").unbind("blur")};function P(ae,ad){if(ad){F.removeClass(z.loadingClass)}var aa=(ad)?ad.length:0,ac=null;for(var ab=0;ab<aa;ab++){var af=ad[ab];if(af[0].toLowerCase()==ae.toLowerCase()){ac=document.createElement("li");if(z.formatItem){ac=z.formatItem(ac,af,ab,aa);$(ac).data("location",af)}else{ac.innerHTML=af[0];$(ac).data("location",af);ac.value=af[0]}var k=null;if(af.length>1){k=[];for(var Z=1;Z<af.length;Z++){k[k.length]=af[Z]}}ac.extra=k}}if(z.onFindValue){setTimeout(function(){z.onFindValue(ac)},1)}}function f(Z,k){if(!k||!Z||!z.cacheLength){return}if(!o.length||o.length>z.cacheLength){q();o.length++}else{if(!o[Z]){o.length++}}o.data[Z]=k}function G(Z){var aa=Z.offsetLeft||0;var k=Z.offsetTop||0;while(Z=Z.offsetParent){aa+=Z.offsetLeft;k+=Z.offsetTop}return{x:aa,y:k}}};jQuery.fn.autocomplete=function(b,a,c){a=a||{};a.url=b;a.data=((typeof c=="object")&&jQuery.isArray(c))?c:null;a.inputClass=a.inputClass||"ac_input";a.resultsClass=a.resultsClass||"ac_results";a.lineSeparator=a.lineSeparator||"\n";a.cellSeparator=a.cellSeparator||"|";a.minChars=a.minChars||1;a.delay=a.delay||400;a.matchCase=a.matchCase||0;a.matchSubset=a.matchSubset||1;a.matchContains=a.matchContains||0;a.cacheLength=a.cacheLength||1;a.mustMatch=a.mustMatch||0;a.extraParams=a.extraParams||{};a.loadingClass=a.loadingClass||"ac_loading";a.selectFirst=a.selectFirst||false;a.selectOnly=a.selectOnly||false;a.maxItemsToShow=a.maxItemsToShow||20;a.autoFill=a.autoFill||false;a.width=parseInt(a.width,10)||0;a.weather=a.weather||false;a.minChars_zip=a.minChars_zip||3;a.minChars_city=a.minChars_city||4;this.each(function(){var d=this;new jQuery.autocomplete(d,a)});return this};jQuery.fn.autocompleteArray=function(b,a){return this.autocomplete(null,a,b)};jQuery.fn.indexOf=function(b){for(var a=0;a<this.length;a++){if(this[a]==b){return a}}return -1};function udm_(J){var I="comScore=",H=document,G=H.cookie,F="",E="indexOf",D="substring",C="length",B=2048,A,z="&ns_",y="&",x,w,v,u,t=window,s=t.encodeURIComponent||escape;if(G[E](I)+1){for(v=0,w=G.split(";"),u=w[C];v<u;v++){x=w[v][E](I),x+1&&(F=y+unescape(w[v][D](x+I[C])))}}J+=z+"_t="+ +(new Date)+z+"c="+(H.characterSet||H.defaultCharset||"")+"&c8="+s(H.title)+F+"&c7="+s(H.URL)+"&c9="+s(H.referrer),J[C]>B&&J[E](y)>0&&(A=J[D](0,B-8).lastIndexOf(y),J=(J[D](0,A)+z+"cut="+s(J[D](A+1)))[D](0,B)),H.images?(x=new Image,t.ns_p||(ns_p=x),x.src=J):H.write("<","p","><",'img src="',J,'" height="1" width="1" alt="*"',"><","/p",">")}var Worldnow=(function(b,d,f,c,a){b.Breakpoints=function(){var z=(function(){try{if(window.matchMedia("(screen)")){return true}else{return false}}catch(B){if(navigator.userAgent.indexOf("BlackBerry")>0&&parseInt(navigator.appVersion)>=5){return true}else{return false}}})();var p=[];var u=function(B){p=B};var k=function(){return p};var n=function(D){var B=k();if(B.length==0){return null}for(var C=0;C<B.length;C++){if(B[C].width==D){return B[C]}}return null};var o=function(D){var C=k();if(C.length==0){return null}var F=null;var B=null;if(D<=C[0].width){for(var E=0;E<C.length;E++){var G=C[E].width-D;if(!F&&!B){F=C[E];B=G;continue}if(G>=0){if(G<=B){F=C[E];B=G;continue}}}}return F};var v=function(B,H){var D=k(),G=(typeof B=="undefined")?(D.length-1):D.indexOf(B),I=d("head"),F;for(var E=0,C=D.length,J;E<C;E++){J=D[E];F=m(J);var K=d("link#"+F);if(E<=G){if(K.length==0){I.append(w(J))}}else{K.remove()}}};var w=function(C){var D=m(C);var B=C.file;return d('<link rel="stylesheet" id="'+D+'" href="'+B+'" />')};var g=function(D){var E=m(D);var C=D.width;var B=D.file;return d("<link rel='stylesheet' id='"+E+"' media='screen and (max-width: "+C+"px)' href='"+B+"' />")};var m=function(B){return"WN"+q(B.width)};var q=function(B){return"Breakpoint"+(B?parseInt(B,10):"")};var t=function(){var C=o(d(window).width());if(C!=null){if(C.width!=window.lastRaisedReSizeEventWidth){window.lastRaisedReSizeEventWidth=C.width;var B=q();f.event(B,C)}}else{lastRaisedReSizeEventWidth=null;f.triggerEvent(q())}};var x=$m=$mb=$s=$so=$sc=$mo=$mc=$fl=null;var A=function(){x=d("div.mobileMenu");$m=x.find(".sf-menu .menuMore");$mb=$m.parent();$s=x.find(".sf-menu .menuSelect");$so=x.find(".menuSelect.open");$sc=x.find(".menuSelect.close");$mo=x.find(".menuMore.open");$mc=x.find(".menuMore.close");$fl=x.find(".firstLevel");$mb.addClass("moreButton")};var y=function(D){var C=$fl.children(".menuItem:visible");if(D){var B=1/C.length*100;C.css("width",B+"%")}else{C.attr("style","")}};var r={menu:function(C){var D=null;var B=k();if(typeof C=="undefined"){D=B[0].width+1}else{D=C.width}y(true);switch(D){case B[0].width+1:y(true);break;case B[0].width:y(true);break;case B[1].width:case B[2].width:if($so.length==1&&($mo.length==0||$mc.length==0)){$m.addClass("open").removeClass("close");$m.find(".open").hide();$m.find(".close").show()}else{if($sc.length==1&&($mo.length==0||$mc.length==0)){$m.addClass("close").removeClass("open");$m.find(".open").show();$m.find(".close").hide()}}y(false);break;case B[3].width:y(false);break;case B[4].width:if($mo.length==1&&($so.length==0||$sc.length==0)){$s.addClass("open").removeClass("close");$s.find(".open").hide();$s.find(".close").show()}else{if($mc.length==1&&($so.length==0||$sc.length==0)){$s.addClass("close").removeClass("open");$s.find(".open").show();$s.find(".close").hide()}}y(false);break;default:if($so.length==1&&($mo.length==0||$mc.length==0)){$m.addClass("open").removeClass("close");$m.find(".open").hide();$m.find(".close").show()}else{if($sc.length==1&&($mo.length==0||$mc.length==0)){$m.addClass("close").removeClass("open");$m.find(".open").show();$m.find(".close").hide()}}y(false);break}},resizelinksplusiframe:function(B){d(".wnLinksContentIframe").each(function(){var C=d(this);C.height(C.parents(".wnLPContent").width()*parseInt(C.attr("height"),10)/645)})}};var h=function(F){if(F){u(F)}var D=k();A();var K=q(),I=d("head"),B=r;if(!z){f.event(K,function(M){v(M)})}f.event(K,B.menu);f.event(K,B.resizelinksplusiframe);for(var E=0,C=D.length,J;E<C;E++){J=D[E];var H=q(J.width),G=m(J);if(z&&d("#"+G).length==0){I.append(g(J))}}window.lastRaisedReSizeEventWidth=o(d(window).width()).width;d(window).resize(function(){window.clearTimeout(window.WNG_RESIZE_WINDOW_BREAKPOINTS);window.WNG_RESIZE_WINDOW_BREAKPOINTS=window.setTimeout(b.Breakpoints.raiseResizeEvent,50)});s()};var s=function(){var K=function(N){N.preventDefault();var M=d(N.target);if(!M.hasClass("open")){M.addClass("open").removeClass("close");M.closest(".sf-menu").find("ul.secondLevel").show().css("visibility","visible");M.find(".open").hide();M.find(".close").show();d("#WNNavSearchSwitch").addClass("menuOpen")}else{M.addClass("close").removeClass("open");M.closest(".sf-menu").find("ul.secondLevel").hide().css("visibility","hidden");M.find(".open").show();M.find(".close").hide();d("#WNNavSearchSwitch").removeClass("menuOpen")}return false};var I=function(N){N.preventDefault();var M=d(N.target);G.addClass("close").removeClass("open");B.addClass("close").removeClass("open");M.closest(".sf-menu").find("ul.secondLevel").hide().css("visibility","hidden");G.find(".open").show();G.find(".close").hide();B.find(".open").show();B.find(".close").hide();d("#WNNavSearchSwitch").removeClass("menuOpen");return false};var J=function(N){N.preventDefault();var M=d(N.target);if(M.hasClass("open")){G.addClass("open").removeClass("close");B.addClass("open").removeClass("close");M.closest(".sf-menu").find("ul.secondLevel").show().css("visibility","visible");G.find(".open").hide();G.find(".close").show();B.find(".open").hide();B.find(".close").show();d("#WNNavSearchSwitch").addClass("menuOpen")}else{G.addClass("close").removeClass("open");B.addClass("close").removeClass("open");M.closest(".sf-menu").find("ul.secondLevel").hide().css("visibility","hidden");G.find(".open").show();G.find(".close").hide();B.find(".open").show();B.find(".close").hide();d("#WNNavSearchSwitch").removeClass("menuOpen")}return false};var C=d("body div.mobileMenu ul.sf-menu"),G=C.find(".menuMore"),D=C.find(".menuMore .control"),B=C.find(".menuSelect"),E=C.find(".menuSelect .control"),H=C.find("ul.secondLevel"),F=function(){if(H.is(":above-the-top")){H.hide().css("visibility","hidden");if(G.hasClass("open")){G.find(".open").show();G.find(".close").hide();G.addClass("close").removeClass("open")}else{if(B.hasClass("open")){B.find(".open").show();B.find(".close").hide();B.addClass("close").removeClass("open")}}}};G.click(K);D.click(J);B.click(K);E.click(J);H.find(".menuCollapse").click(I);d(window).bind("scrollstop",F)};return{initialize:h,setBreakpoints:u,getBreakpoints:k,getBreakpointByWidth:n,getBreakpointByClosestWidth:o,getClosestBreakpoint:function(B){return o(B)||k()[0]},getEventName:q,raiseResizeEvent:t,mobileMenuHideShow:s}}();if(c.isMobile==true){b.Breakpoints.setBreakpoints([{width:980,file:wn.contentdomain+"/global/interface/container-e/breakpoints/responsive.css"},{width:800,file:wn.contentdomain+"/global/interface/container-e/breakpoints/800.css"},{width:600,file:wn.contentdomain+"/global/interface/container-e/breakpoints/600.css"},{width:480,file:wn.contentdomain+"/global/interface/container-e/breakpoints/480.css"},{width:320,file:wn.contentdomain+"/global/interface/container-e/breakpoints/320.css"}]);f.event("documentready",function(){b.Breakpoints.initialize()});if(!wng_pageInfo.simpleResponsiveBranding){f.event("WNMenuCol1done",function(){var h=d("#WNBrandingImage").each(function(){var k=d(this);k.data("originalSrc",k.attr("src"))}),g=function(p){var q=[980,800,600,480,320],o=p.width,n=q.indexOf(o),k=wn.staticimagefarmprefix+"/images/static/hdr/hdr_smartbranding",m=d("#WNBrandingImage");k+=(n>-1)?"_"+o:"";k+=".jpg";m.attr("src",k).error(function(){var r=d(this);r.attr("src",r.data("originalSrc")||"")})};g(b.Breakpoints.getClosestBreakpoint(window.innerWidth));b.EventMan.event("Breakpoint",g)})}}return b})(Worldnow||{},$wn||jQuery,Worldnow.EventMan,wng_pageInfo||{},wn||{});var getElementsByClassName=function(g){if(document.getElementsByClassName){return document.getElementsByClassName(g)}else{if(document.querySelectorAll){return document.querySelectorAll("."+g)}else{var d=document.body.getElementsByTagName("DIV"),f=d.length,a=new RegExp("(^| )"+g+"($| )"),c=[];for(var b=0;b<f;b++){if(a.test(d[b].className)){c.push(d[b])}}return c}}};String.prototype.toNumberHash=function(){var c=0,b,a;if(this.length==0){return c}for(b=0,l=this.length;b<l;b++){a=this.charCodeAt(b);c=((c<<5)-c)+a;c|=0}return c};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c,d){for(var b=(d||0),a=this.length;b<a;b++){if(this[b]===c){return b}}return -1}}var Worldnow=(function(W,Site,Page,UAParser,Breakpoints){var AdManHelpers={getPlatform:function(){var baseurl=Site.baseurl||"";return(baseurl.toLowerCase().indexOf(window.location.hostname)==0)?"worldnow":"off-platform"},defaultApplication:function(id){switch(id){case"30":case"31":case"130":case"131":return"video";break;default:return"banner";break}},defaultType:function(id){switch(id){case"44":case"85":case"16":case"17":case"45":case"63":return"inline";break;case"30":case"31":case"130":case"131":return"async";break;default:return"dom";break}},simpleAdLoad:function(ad,options){var template=options.template||ad.get("template")||"",type=ad.get("type"),adCallUrl=ad.getMarkup(template),preventLoad=options.preventLoad||false,simpleLoaders={inline:ad.loadScript,dom:ad.loadFrame};ad.set("template",template);ad.set("debuginfo",type.toUpperCase()+" ad call - "+adCallUrl);if(!preventLoad&&simpleLoaders.hasOwnProperty(type)){simpleLoaders[type].call(ad,adCallUrl)}return adCallUrl}};var AdMan={options:{seed:Math.floor(Math.random()*99)+1,rand:Math.floor(Math.random()*99999999),platform:AdManHelpers.getPlatform(),keywords:[],affiliate:Site.affiliatename||"NA",affiliateid:parseInt(Site.affiliateno,10)||0,environment:Site.ref.machinename||"NA",development:Page.build&&Page.build=="Local-Debug",wncc:Page.contentClassification||"NA",wnpc:Page.containerClass||"NA",wnpt:Page.containerType||"NA",wncp:Page.ownerAffiliateName||"NA",wncid:Page.containerId||0,responsive:Page.isMobile,location:escape(document.location),origin:escape(document.location.origin||document.location.protocol+"//"+document.location.host),ua:escape(navigator.userAgent),geolocation:Worldnow.LocalStorage.get("geolocation")||{}},DOM_ID_PREFIX:"WNAd",agent:new UAParser(),handlers:{},templates:{},ads:[],history:{},eventsHistory:{},logs:[],locked:false,breakpointMap:function(){var out=[];if(Breakpoints){var breakpoints=Breakpoints.getBreakpoints();for(var i=0,l=breakpoints.length;i<l;i++){out.push(breakpoints[i].width)}}return out}(),breakpointSizes:{101:[[300,150],[180,150],[300,150],[320,50],[320,50]],103:[[300,250],[180,150],[300,250],[320,50],[320,50]],104:[[468,60],[468,60],[320,50],[320,50],[320,50]],105:[[728,90],[468,60],[468,60],[320,50],[320,50]],106:[[728,90],[468,60],[468,60],[320,50],[320,50]]},get:function(name,scope){scope=scope||this.options;return scope.hasOwnProperty(name)?scope[name]:null},set:function(name,value,scope){scope=scope||this.options;if(scope.hasOwnProperty(name)&&(scope[name] instanceof Array)&&!(value instanceof Array)){scope[name].push(value)}else{scope[name]=value}return this},getHandler:function(owner,handlerName){handlerName=handlerName||"adload";this.recordEvent(owner,handlerName);return this.handlers[owner][handlerName]||function(ad){}},getTemplate:function(owner,type){var t=this.templates;t=(this.templates.hasOwnProperty(owner))?t[owner]:{};t=(this.get("responsive"))?t.mobile:t;return(t.hasOwnProperty(type))?t[type]:null},setFilters:function(filter){this.extend(this.filters,filter);return this},setTemplates:function(templates,owner){templates=(typeof templates==="string")?{dom:templates}:templates;var completeTemplates={};completeTemplates.dom=templates.dom;completeTemplates.inline=templates.dom;completeTemplates.async=templates.dom;completeTemplates.mobile=templates.mobile||{};completeTemplates.mobile.dom=completeTemplates.mobile.dom||templates.dom;completeTemplates.mobile.inline=completeTemplates.mobile.dom;completeTemplates.mobile.async=completeTemplates.mobile.dom;this.extend(completeTemplates,templates);owner=owner||this.get("affiliate").toLowerCase();var tmp={};tmp[owner]=completeTemplates;this.extend(this.templates,tmp);return this},setHandlers:function(handlers,owner){owner=owner||this.get("affiliate").toLowerCase();var tmp={};tmp[owner]=handlers;this.extend(this.handlers,tmp);return this},setSeed:function(){this.set("seed",Math.floor(Math.random()*99)+1);return this},setRandomNum:function(){this.set("rand",Math.floor(Math.random()*99999999));return this},add:function(ad){if(ad instanceof Worldnow.Ad){this.ads.push(ad);window["wnad_"+ad.get("id")]=ad}return this},remove:function(ad){if(ad instanceof Worldnow.Ad){var parent=ad.getParent(),index=this.ads.indexOf(ad);if(parent){$(parent).remove()}if(index>=0){this.ads.splice(index,1)}window["wnad_"+ad.get("id")]=null}return this},addKeyword:function(name,value){if(typeof name=="string"){var keywordObj={};keywordObj[name]=value;this.set("keywords",keywordObj)}else{if(typeof name=="object"){this.addKeywords(name)}}},addKeywords:function(obj){for(var key in obj){if(obj.hasOwnProperty(key)){this.addKeyword(key,obj[key])}}},attachAd:function(anchor,options){var selector=anchor,parent,css,style="append",ad,html,classname;if(typeof anchor=="object"){selector=anchor.selector;style=anchor.attachStyle||style}options.id=""+options.id;options.id=options.id.replace(/[A-Z]/gi,"");options.parent=parent=this.DOM_ID_PREFIX+options.id;css=options.css?' style="'+options.css+'"':"";classname="wnad wnad"+options.id+(options.type?" "+options.type:"")+(options.application?" "+options.application:"");html='<div id="'+parent+'" class="'+classname+'"'+css+"></div>";ad=new Worldnow.Ad(options);Worldnow.EventMan.event("documentready",function(){var W=Worldnow,H=W.Helpers;H.attach(selector,html,style);ad.load()});return ad},extend:function(out){for(var i=1,l=arguments.length,key,argument;i<l;i++){argument=arguments[i];if(typeof argument==="object"){for(key in argument){if(argument.hasOwnProperty(key)){out[key]=argument[key]}}}}return out},normalizeAdIds:function(ids){if(ids instanceof Array){ids=ids.join()}if(typeof ids=="string"){ids=ids.replace(/[a-z]/gi,"");ids=ids.replace(" ",",").replace(/,+/g,",");ids=ids.split(",");return ids}else{if(typeof ids=="number"){return[""+ids]}else{return[]}}},getAds:function(ids,callback){var ids=this.normalizeAdIds(ids),filterById=ids.length>0?true:false,out=[];for(var i=0,ad,l=this.ads.length;i<l;i++){ad=this.ads[i];if(filterById){if(ids.indexOf(ad.get("id"))>-1){out.push(ad);if(typeof callback==="function"){callback(ad)}}}else{out.push(ad);if(typeof callback==="function"){callback(ad)}}}return out},hide:function(ids){this.getAds(ids,function(ad){ad.hide()})},show:function(ids){this.getAds(ids,function(ad){ad.show()})},start:function(){var adgroups={},owner,ad;for(var id in Page.ads){if(Page.ads.hasOwnProperty(id)){ad=new Worldnow.Ad(Page.ads[id])}}for(var i=0,l=this.ads.length,ad,owner;i<l;i++){ad=this.ads[i];owner=ad.get("owner");if(!adgroups.hasOwnProperty(owner)){adgroups[owner]=[]}adgroups[owner].push(ad)}for(var affiliate in adgroups){if(adgroups.hasOwnProperty(affiliate)){this.getHandler(affiliate,"pagestart")(this,adgroups[affiliate])}}if(typeof ad!=="undefined"){ad.adinit()}return this},load:function(){var adgroups={};for(var i=0,l=this.ads.length,ad,owner;i<l;i++){ad=this.ads[i];owner=ad.get("owner");if(!adgroups.hasOwnProperty(owner)){adgroups[owner]=[]}adgroups[owner].push(ad)}for(var affiliate in adgroups){if(adgroups.hasOwnProperty(affiliate)){this.getHandler(affiliate,"pageready")(this,adgroups[affiliate])}}return this},loadFrames:function(ads){var sortMap=["41","46","43","52"],sorted=[null,null,null,null],sortPos=0;for(var i=0,l=ads.length,ad;i<l;i++){ad=ads[i];if(ad.get("type")=="dom"){sortPos=sortMap.indexOf(ad.get("id"));if(sortPos>=0){sorted[sortPos]=ad}else{sorted.push(ad)}}}for(var i=0,l=sorted.length,ad;i<l;i++){ad=sorted[i];if(ad){ad.load()}}},loadJavascriptTag:function(url){var scriptInject=document.createElement("SCRIPT");scriptInject.charset="UTF-8";scriptInject.src=url;scriptInject.type="text/javascript";document.getElementsByTagName("HEAD")[0].appendChild(scriptInject)},loadAsyncJavascriptTag:function(url){url=url.replace(/^https*\:\/\//i,"");var uaftag=document.createElement("script");uaftag.async=true;uaftag.type="text/javascript";var useSSL="https:"==document.location.protocol;uaftag.src=(useSSL?"https:":"http:")+"//"+url;var node=document.getElementsByTagName("script")[0];node.parentNode.insertBefore(uaftag,node)},lock:function(reason){reason=(reason)?" "+reason:null;this.locked=true;this.log("Ad manager locked."+(reason||""));return this},unlock:function(reason){reason=(reason)?" "+reason:null;this.locked=false;this.log("Ad manager unlocked."+(reason||""));return this},log:function(message){this.logs.push(message)},recordEvent:function(client,handlerName){if(!this.eventsHistory.hasOwnProperty(client)){this.eventsHistory[client]=[]}this.eventsHistory[client].push(handlerName);return this},report:function(ids){if(!window.console){return}console.log("Worldnow.AdMan report ===========================");for(var i=this.logs.length;i>0;i--){console.log(i+") "+this.logs[i-1])}console.log("Ads on page ===========================");this.getAds(ids,function(ad){ad.report()})},clear:function(ids){this.getAds(ids,function(ad){var owner=ad.get("owner"),manager=ad.manager,history=manager.history,historyPosition=-1,ads=manager.ads,adPosition=-1;if(history.hasOwnProperty(owner)){historyPosition=history[owner].indexOf(ad);if(historyPosition>-1){history[owner].splice(historyPosition,1)}}adsPosition=ads.indexOf(ad);if(adsPosition>-1){ads.splice(adsPosition,1)}ad.clear()})}};var Ad=function(options){options=options||{};this.manager=AdMan;this.extend=AdMan.extend;this.DOM_ID_PREFIX=AdMan.DOM_ID_PREFIX;this.loadCount=0;this.logs=[];this.options={id:"43",application:"banner",type:"dom",ownerinfo:{worldnow:{share:1}},width:300,height:250,debuginfo:"No additional debugging information specified"};this.init(options)};Ad.prototype={constructor:Ad,init:function(objOrElement){if(this.manager.locked){return null}var ad=this,options=objOrElement;if(objOrElement.getAttribute){for(var i=0,tmp={},atts=objOrElement.attributes,attsl=atts.length;i<attsl;i++){options[atts[i].nodeName]=atts[i].nodeValue}options.parent=objOrElement}ad.options=ad.getOptions(options);if(!ad.get("application")){ad.set("application",AdManHelpers.defaultApplication(ad.get("id")))}if(!ad.get("type")){ad.set("type",AdManHelpers.defaultType(ad.get("id")))}if(!ad.get("parent")){ad.set("parent","WNAd"+ad.get("id"))}if(!ad.get("wncc")){ad.set("wncc",this.manager.get("wncc"))}ad.setOwner();ad.manager.add(ad)},get:function(name,scope){scope=scope||this.options;return scope.hasOwnProperty(name)?scope[name]:null},getOptions:function(options){if(typeof options==="object"){if(options.id){options.id=""+options.id;options.id=options.id.replace(/[a-z]/gi,"")}}return this.extend(this.options,options)},getResponsiveOptions:function(options){var id=this.get("id"),m=this.manager,breakpointSizes=m.breakpointSizes,breakpointMap=m.breakpointMap,options=options||{};if(breakpointSizes.hasOwnProperty(id)){var adSizes=breakpointSizes[id],breakpoint=options.breakpoint||Breakpoints.getClosestBreakpoint(window.innerWidth),breakpointWidth=breakpoint.width,sizeIndex=breakpointMap.indexOf(breakpointWidth),dimensions=adSizes[sizeIndex];if(dimensions){var newWidth=dimensions[0],newHeight=dimensions[1],oldWidth=this.get("width"),oldHeight=this.get("height"),rebuild=(newWidth!=oldWidth)||(newHeight!=oldHeight);return this.getOptions({width:adSizes[sizeIndex][0],height:adSizes[sizeIndex][1],rebuild:rebuild,breakpoint:breakpoint})}}return this.getOptions()},getParent:function(){var parent=this.get("parent");if(parent){if(typeof parent==="string"){if(/^[a-z]/gi.test(parent)){parent=document.getElementById(parent)}else{parent=document.body.querySelectorAll(parent)[0]}this.set("parent",parent);return parent}else{return parent}}else{return null}},getAffiliateName:function(aff){aff=(typeof aff==="undefined")||(/loc|local/gi.test(aff))?this.manager.get("affiliate"):(/nat|national/gi.test(aff)?"worldnow":aff);return aff.toLowerCase()},getOwnerConfig:function(){var ownerconfig=this.get("ownerinfo")||{},correctFormat={};if(typeof ownerconfig==="string"){ownerconfig=eval("("+ownerconfig+")")}if(ownerconfig.hasOwnProperty("oldformat")&&ownerconfig.oldformat==1){var natLoc=ownerconfig.owner,type=ownerconfig.type,split=parseInt(ownerconfig.split,10),locOwner=this.getAffiliateName(ownerconfig.aff),locShare=(natLoc=="nat")?100-split:split,natOwner=this.getAffiliateName("nat"),natShare=100-locShare,lowerShare=(locShare<natShare)?locShare:natShare,higherShare=100-lowerShare,hcm=1;for(var i=1;i<=lowerShare;i++){if(lowerShare%i==0&&higherShare%(lowerShare/i)==0){hcm=lowerShare/i;break}}correctFormat[locOwner]={share:locShare/hcm,type:type};correctFormat[natOwner]={share:natShare/hcm,type:type};return correctFormat}else{return ownerconfig}},getMacros:function(template){if(typeof template==="string"){return template.match(/\[[^\[]+\]/gi)}else{return[]}},getMacroReplacement:function(_replacement){var scopeAndReplacement=_replacement.split("."),svl=scopeAndReplacement.length,scope=(scopeAndReplacement[0]=="page")?this.manager:this,replacement=scopeAndReplacement[svl-1];return(scope.options.hasOwnProperty(replacement))?scope.get(replacement):_replacement},getMarkup:function(template){var macros=this.getMacros(template),replacement="",ml=macros.length,mi=0,fl=0,fi=0,frags=[],value="";while(mi<ml){frags=macros[mi].replace(/[\[\]]/g,"").split(":");fl=frags.length;fi=1;replacement=this.getMacroReplacement(frags[0]);if(replacement!=frags[0]){while(fi<fl){replacement=this.filter(replacement,frags[fi]);fi++}template=template.replace(macros[mi],replacement)}replacement="";mi++}return template},getFilter:function(filter){filter=filter.toLowerCase();return(this.manager.filters.hasOwnProperty(filter))?this.manager.filters[filter]:function(v,ad){return v}},filter:function(replacement,filterName){var filter=this.getFilter(filterName);return filter(replacement,this)},set:function(name,value,scope){scope=scope||this.options;scope[name]=value;return this},setOwner:function(){var ownerconfig=this.getOwnerConfig(),randomNum=this.manager.get("seed"),multiplier=0,sumRatio=0,minRange=0,maxRange=0,winner=this.getAffiliateName(),type=this.get("type"),affiliateNameIndex=null;for(affiliateNameIndex in ownerconfig){if(ownerconfig.hasOwnProperty(affiliateNameIndex)){sumRatio+=parseInt(ownerconfig[affiliateNameIndex].share)}}multiplier=100/sumRatio;for(affiliateNameIndex in ownerconfig){if(ownerconfig.hasOwnProperty(affiliateNameIndex)){maxRange=minRange+(parseInt(ownerconfig[affiliateNameIndex].share)*multiplier);if(randomNum>minRange&&randomNum<=maxRange){winner=this.getAffiliateName(affiliateNameIndex);if(ownerconfig[affiliateNameIndex].hasOwnProperty("type")){type=ownerconfig[affiliateNameIndex].type}}minRange=maxRange}}if(type){this.set("type",type)}this.set("owner",winner);this.setOwnerHash(winner);return winner},setOwnerHash:function(owner){this.set("ownerhash",owner.toNumberHash())},runHandler:function(handlerName){var handler=this.manager.getHandler(this.get("owner"),handlerName);return handler(this)},hide:function(){this.getParent().style.visibility="hidden"},show:function(){this.getParent().style.visibility="visible"},record:function(){var owner=this.get("owner"),position=-1,history=this.manager.history;history[owner]=history[owner]||[];position=history[owner].indexOf(this);if(position>-1){history[owner].push(history[owner].splice(position,1)[0])}else{history[owner].push(this)}},report:function(){if(console){console.log("Ad: "+this.get("id")+" Load Count:"+this.loadCount+", RealVu:"+this.get("realvu"));console.log("-------------------------------------");console.log(this.options.debuginfo);for(var i=this.logs.length-1,log;i>=0;i--){log=this.logs[i];if(typeof log=="string"){log=" "+i+" - "+log}console.log(log)}console.log(this.options);console.log("--")}},log:function(msg){this.logs.push(msg)},adinit:function(){return this.runHandler("adinit")},load:function(overwrites){if(typeof overwrites==="object"){this.options=this.getOptions(overwrites)}if(this.manager.get("responsive")&&Breakpoints){this.options=this.getResponsiveOptions(overwrites)}var width=this.get("width"),height=this.get("height"),rebuild=this.get("rebuild"),parent=this.getParent(),breakpoint=this.get("breakpoint")||{};if(!width&&!height&&parent){$(parent).hide();this.log("Breakpoint "+breakpoint.width+" did not have a corresponding ad unit available.");return null}else{if(parent&&rebuild){$(parent).show()}}this.loadCount++;this.record();return this.runHandler("adload")},loadScript:function(url){document.write(["<scr",'ipt type="text/javascript" src="',url,'"><\/script>'].join(""))},loadFrame:function(url){var fNew=document.createElement("iframe"),parent=this.getParent();fNew.width=this.get("width");fNew.height=this.get("height");fNew.marginWidth=0;fNew.marginHeight=0;fNew.frameBorder=0;fNew.scrolling="no";fNew.src=url;parent.innerHTML="";parent.appendChild(fNew)},loadFriendlyFrame:function(markup){var frame=document.createElement("iframe"),parent=this.getParent();frame.width=this.get("width");frame.height=this.get("height");frame.src="about:blank";frame.scrolling="no";frame.marginWidth="0";frame.marginHeight="0";frame.frameBorder="0";parent.innerHTML="";parent.appendChild(frame);var win=frame.contentWindow,doc=frame.contentDocument||win.document;win.contents=markup;frame.src='javascript:window["contents"]'},simpleLoad:function(options){var ad=this,type=ad.get("type"),owner=ad.get("owner"),template=options.template||ad.manager.getTemplate(owner,type)||ad.get("template")||"",adCallUrl=ad.getMarkup(template),preventLoad=options.preventLoad||false,simpleLoaders={inline:ad.loadScript,dom:ad.loadFrame};ad.set("template",template);ad.set("debuginfo",type.toUpperCase()+" ad call - "+adCallUrl);if(!preventLoad&&simpleLoaders.hasOwnProperty(type)){simpleLoaders[type].call(ad,adCallUrl)}return adCallUrl},clear:function(){var parent=this.getParent();parent.innerHTML=""},remove:function(){this.manager.remove(this)}};AdMan.filters={lowercase:function(v,ad){return v.toLowerCase()},tolowercase:function(v,ad){return v.toLowerCase()},uppercase:function(v,ad){return v.toUpperCase()},touppercase:function(v,ad){return v.toUpperCase()},nospaces:function(v,ad){return v.replace(/ /g,"")},escape:function(v,ad){return encodeURIComponent(v)},dfpformat:function(v,ad){return v.replace(/[ \\\\\/\?]/gi,"").toLowerCase()},dfpqstring:function(v,ad){var string="";if(typeof v==="object"){var key,first=true;for(key in v){if(v.hasOwnProperty(key)){string+=(!first?";":"")+key+"="+v[key];first=false}}}return string},dfpsitetype:function(application,ad){if(typeof application=="string"){if(ad.manager.get("responsive")){return".mob"}else{if(application.indexOf("video")>-1||application=="slideshow"){return".video"}else{return""}}}},dfpadtype:function(type,ad){switch(type){case"inline":return"adj";break;case"async":var owner=ad.get("owner");return(owner&&owner.toLowerCase()=="cbsrwpalm"||owner.toLowerCase()=="cbspit"||owner.toLowerCase()=="cbsmia")?"pfadx":"adx";break;default:return"adi";break}},dfpinterstitial:function(v,ad){return(parseInt(v,10)==1)?"dcopt=ist":"a=a"},dfpordinal:function(rand,ad){var ownerHash="0000"+ad.get("ownerhash").toString(),ownerHash=ownerHash.substr(ownerHash.length-4),rand=rand.toString(),randHash=rand.substr(rand.length-4);return ownerHash+randHash},dfpafffix:function(aff,ad){return(aff.toLowerCase()=="kfmbbrh")?"kfmbam":aff},dfimpressiontype:function(type,ad){return(type=="async")?"creative":type},gptdevice:function(v,ad){return ad.manager.get("responsive")?"mob":"desktop"},gptapplication:function(v,ad){return ad.manager.get("responsive")?"m-web":"web"},gptnetworkid:function(owner,ad){return"43459271"},rsi:function(v,ad){var rsisegs=[],cookievalue,rsisegs_limited,rsisegs_length;if(typeof window.G_RSI_SEGMENTS_STRING=="string"){return window.G_RSI_SEGMENTS_STRING}else{if(window.G_RSI_SEGMENTS&&window.G_RSI_SEGMENTS.length>0){rsisegs=window.G_RSI_SEGMENTS}else{if(Worldnow.hasOwnProperty("CookieMan")&&Worldnow.CookieMan.get("WN_RSI_SEGMENTS")){cookievalue=Worldnow.CookieMan.get("WN_RSI_SEGMENTS");rsisegs=cookievalue.split(",")}}}rsisegs_length=rsisegs.length;rsisegs_limited=(rsisegs_length>25)?rsisegs.splice(24,rsisegs_length-25,""):rsisegs;if(rsisegs_limited.length>0){window.G_RSI_SEGMENTS_STRING="kw="+rsisegs_limited.join(";kw=")}else{window.G_RSI_SEGMENTS_STRING=""}return window.G_RSI_SEGMENTS_STRING},rsiArray:function(v,ad){if(window.G_RSI_SEGMENTS_TRIMMED){return G_RSI_SEGMENTS_TRIMMED}else{if(G_RSI_SEGMENTS&&G_RSI_SEGMENTS instanceof Array){window.G_RSI_SEGMENTS_TRIMMED=(G_RSI_SEGMENTS.length>25)?G_RSI_SEGMENTS.splice(24,G_RSI_SEGMENTS.length-25,""):G_RSI_SEGMENTS}else{window.G_RSI_SEGMENTS_TRIMMED=[]}}return window.G_RSI_SEGMENTS_TRIMMED},ispartner:function(v,ad){var isPartner;if(typeof wng_pageInfo=="object"&&wng_pageInfo.contentClassification){isPartner="true"}else{if(typeof worldnow_admanagerconfig=="object"&&typeof worldnow_admanagerconfig.keywords=="object"&&worldnow_admanagerconfig.keywords.ispartner){isPartner="true"}else{isPartner="false"}}return isPartner},sequence:function(owner,ad){if(ad.manager.history.hasOwnProperty(owner)){return ad.manager.history[owner].indexOf(ad)+1}else{return 0}},siblings:function(owner,ad){var manager=ad.manager,parentOwner=ad.get("owner"),ads=manager.ads,siblings=[];for(var i=0,l=ads.length,_ad;i<l;i++){_ad=ads[i];if(parentOwner==_ad.get("owner")){siblings.push(_ad.get("id"))}}return"wnad"+siblings.join("="+parentOwner+";wnad")+"="+parentOwner},keywordstring:function(keywords,ad,sep){var out=[],eq=eq||"=",sep=sep||";";for(var i=0,l=keywords.length,keyword;i<l;i++){keyword=keywords[i];if(typeof keyword=="object"){for(var key in keyword){if(keyword.hasOwnProperty(key)){out.push(key+eq+keyword[key])}}}else{out.push(keyword)}}return out.join(sep)},encodedkeywords:function(keywords,ad){return ad.manager.filters.keywordstring(keywords,ad,"%26","%3D")},wnowner:function(owner,ad){return(owner=="worldnow")?"nat":"loc"},wnenv:function(v,ad){if(v.indexOf("DDEV")==0||v.indexOf("DSYS")||v.indexOf("DUA")||v.indexOf("MDEV")){return"dev"}return"production"}};AdMan.handlerLayouts={simple:{adinit:function(ad){var type=ad.get("type");switch(type){case"inline":case"async":ad.load();break;default:break}},adload:function(ad){return ad.simpleLoad({preventLoad:ad.get("requestingurl")})},pageready:function(manager,ads){manager.loadFrames(ads)}},gpt:{pagestart:function(m){window.googletag=window.googletag||{};googletag.cmd=googletag.cmd||[];var scriptload=function(loaded,src){if(loaded){return true}var gads=document.createElement("script");gads.async=true;gads.type="text/javascript";var useSSL="https:"==document.location.protocol;gads.src=(useSSL?"https:":"http:")+src;var node=document.getElementsByTagName("script")[0];node.parentNode.insertBefore(gads,node);return true};var realvu_script_domain=m.get("development")?"ac-stage.realvu.net":"ac.realvu.net";window.REALVU_BOOST_LOADING_DONE=scriptload(window.REALVU_BOOST_LOADING_DONE||false,"//"+realvu_script_domain+"/realvu_boost.js");window.GPT_SCRIPT_LOADING_DONE=scriptload(window.GPT_SCRIPT_LOADING_DONE||false,"//www.googletagservices.com/tag/js/gpt.js")},adinit:function(ad){(function(targetingDone,ad){if(targetingDone||!window.googletag){return}googletag.cmd.push(function(){var m=ad.manager,geolocation=m.get("geolocation");googletag.pubads().setTargeting("wncid",""+m.get("wncid"));googletag.pubads().setTargeting("wnpt",""+m.get("wnpt"));googletag.pubads().setTargeting("ispartner",m.filters.ispartner(true,ad));googletag.pubads().setTargeting("asi",rsi_segs||"null");googletag.pubads().setTargeting("wndomain",m.get("origin"));if(geolocation.coords){googletag.pubads().setLocation(geolocation.coords.latitude,geolocation.coords.longitude)}});window.GPT_PAGE_TARGETING_DONE=true})(window.GPT_PAGE_TARGETING_DONE||false,ad)},adload:function(ad){var adunitTemplate="/[ad.owner:gptnetworkid]/[ad.owner:wnowner]-[page.responsive:gptdevice]/[page.affiliate:lowercase]/[page.responsive:gptapplication]/[ad.wncc:dfpformat]",m=ad.manager,id=ad.get("id"),wnsz=ad.get("wnsz")||id,application=ad.get("application"),type=ad.get("type"),width=parseInt(ad.get("width"),10),height=parseInt(ad.get("height"),10),responsive=m.get("responsive"),adunit="",adcallpath="",previousGptAdSlot=ad.get("gptAdSlot"),rebuild=ad.get("rebuild"),owner=ad.get("owner"),realvu=ad.get("realvu"),videorealvu=(realvu==owner||realvu=="all")?"yes":"no",viz=null,targeting=ad.get("targeting");ad.set("template",adunitTemplate);if((realvu==owner||realvu=="all")&&typeof top1!=="undefined"){var realvu_parent=ad.getParent();if(realvu_parent){viz=top1.realvu_boost.addUnitById({partner_id:"E024",unit_id:realvu_parent.id,callback:function(r){var previousGptAdSlot=ad.get("gptAdSlot"),rebuild=ad.get("rebuild");if(previousGptAdSlot&&!rebuild){previousGptAdSlot.setTargeting("realvu",r.realvu);previousGptAdSlot.setTargeting("tx2","yes");googletag.pubads().refresh([previousGptAdSlot])}},delay:5001,size:width+"x"+height,mode:"tx2"})}}if(type=="async"){if(type=="async"){var keywords=m.get("keywords");adcallpath=ad.getMarkup("http://pubads.g.doubleclick.net/gampad/adx?iu="+adunitTemplate+"&sz=[ad.width]x[ad.height]&c=[page.rand:dfpordinal]&m=text/xml&t=wnsz%3D[ad.wnsz]%26ispartner%3D[ad.owner:ispartner]%26[page.keywords:encodedkeywords]%26wndomain%3D[page.origin]%26wnlocation%3D[page.location]&tile=[ad.owner:sequence]"+(responsive?"&mob=js":""));ad.set("debuginfo","Async ad call - "+adcallpath)}return adcallpath}else{if(previousGptAdSlot&&!rebuild){googletag.pubads().refresh([previousGptAdSlot])}else{adunit=ad.getMarkup(adunitTemplate);ad.set("debuginfo","DOM ad call - "+adunit);googletag.cmd.push(function(){var parent=ad.getParent(),parentid=parent.id;if(previousGptAdSlot&&rebuild){var parentid=parentid+"-"+Math.floor(Math.random()*9999);parent.innerHTML='<div id="'+parentid+'" class="responsive"></div>'}else{parent.innerHTML=""}var gptAdSlot=googletag.defineSlot(adunit,[width,height],parentid).addService(googletag.pubads()).setTargeting("wnsz",wnsz).setTargeting("realvu",viz).setCollapseEmptyDiv(type=="inline");for(var key in targeting){gptAdSlot.setTargeting(key,targeting[key])}googletag.enableServices();googletag.display(parentid);ad.set("gptAdSlot",gptAdSlot);ad.set("rebuild",false)})}}}},gpt_single:{pagestart:function(m,ads){window.googletag=window.googletag||{};googletag.cmd=googletag.cmd||[];(function(loaded){if(loaded){return}var gads=document.createElement("script");gads.async=true;gads.type="text/javascript";var useSSL="https:"==document.location.protocol;gads.src=(useSSL?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var node=document.getElementsByTagName("script")[0];node.parentNode.insertBefore(gads,node);window.GPT_SCRIPT_LOADING_DONE=true})(window.GPT_SCRIPT_LOADING_DONE||false)},adinit:function(ad){googletag.cmd.push(function(){var adunitTemplate="/[ad.owner:gptnetworkid]/[ad.owner:wnowner]-[page.responsive:gptdevice]/[page.affiliate:lowercase]/[page.responsive:gptapplication]/[ad.wncc:dfpformat]",adunit=ad.getMarkup(adunitTemplate),id=ad.get("id"),type=ad.get("type"),width=parseInt(ad.get("width")),height=parseInt(ad.get("height")),parentid=ad.get("parent"),gptAdSlot=googletag.defineSlot(adunit,[width,height],parentid).addService(googletag.pubads()).setTargeting("wnsz",id).setCollapseEmptyDiv(type=="inline");ad.set("gptAdSlot",gptAdSlot);ad.set("adunit",adunit);ad.set("debuginfo","DOM ad call - "+adunit)})},adload:function(ad){(function(loaded){if(loaded){return}googletag.cmd.push(function(){var m=Worldnow.AdMan,pub=googletag.pubads();pub.setTargeting("wncid",""+m.get("wncid"));pub.setTargeting("wnpt",""+m.get("wnpt"));pub.setTargeting("ispartner",m.filters.ispartner(true));pub.setTargeting("asi",window.rsi_segs||"null");pub.setTargeting("wndomain",m.get("origin"));pub.enableSingleRequest();googletag.enableServices()});window.GPT_PAGE_TARGETING_DONE=true})(window.GPT_PAGE_TARGETING_DONE||false);var type=ad.get("type"),parentid=ad.get("parent"),responsive=ad.manager.get("responsive"),rebuild=ad.get("rebuild"),adunit=ad.get("adunit");if(type=="async"){var m=ad.manager,keywords=m.get("keywords"),adunit=adunit||"/43459271/[ad.owner:wnowner]-[page.responsive:gptdevice]/[page.affiliate:lowercase]/[page.responsive:gptapplication]/[ad.wncc:dfpformat]",adcallpath=ad.getMarkup("http://pubads.g.doubleclick.net/gampad/adx?iu="+adunit+"&sz=[ad.width]x[ad.height]&c=[page.rand:dfpordinal]&m=text/xml&t=wnsz%3D[ad.id]%26ispartner%3D[ad.owner:ispartner]%26[page.keywords:encodedkeywords]%26wndomain%3D[page.origin]%26wnlocation%3D[page.location]&tile=[ad.owner:sequence]"+(responsive?"&mob=js":""));ad.set("debuginfo","Async ad call - "+adcallpath);return adcallpath}else{if(ad.loadCount>1){if(rebuild){var parent=ad.getParent(),parentid=parentid+"-"+Math.floor(Math.random()*9999),width=parseInt(ad.get("width")),height=parseInt(ad.get("height"));parent.innerHTML='<div id="'+parentid+'" class="responsive"></div>';var gptAdSlot=googletag.defineSlot(adunit,[width,height],parentid).addService(googletag.pubads()).setTargeting("wnsz",id).setCollapseEmptyDiv(type=="inline");googletag.display(parentid);ad.set("gptAdSlot",gptAdSlot);ad.set("rebuild",false)}else{googletag.cmd.push(function(){googletag.pubads().refresh([ad.get("gptAdSlot")])})}}else{googletag.cmd.push(function(){googletag.display(parentid)})}}}}};W.Ad=Ad;W.AdMan=AdMan;AdMan.setHandlers(AdMan.handlerLayouts.gpt,"worldnow");var module=new W.SDKModule(AdMan);W.EventMan.event("uaf-init",module);W.EventMan.event("uaf-customads-init",module);W.EventMan.event("documentready",function(){Worldnow.AdMan.load()});W.EventMan.event("breakpoint",function(bp){Worldnow.AdMan.getAds(null,function(ad){ad.load({breakpoint:bp})})});AdMan.start();return W}(Worldnow||{},wn||{},wng_pageInfo||{},UAParser,Worldnow.Breakpoints||null));Worldnow.AdMan.getAdCall=function(h,f){switch(f){case"iframe":f="dom";break;case"javascript":f="inline";break;case"raw":f="async";break;default:f="dom";break}h.type=f;h.application=h.application||h.apptype||"video";if(h.hasOwnProperty("ownerinfo")){var c=h.ownerinfo,b=c.owner,g=c.pct,a={oldformat:1,owner:b,split:g,type:f,aff:wn.affiliatename.toLowerCase()};h.ownerinfo=a}var d=new Worldnow.Ad(h);d.getURL=function(){this.set("requestingurl",true);return this.load()};d.getOwner=function(){return this.get("owner")};return d};Worldnow.AdMan.setCustomParseFuncObj=function(a){Worldnow.AdMan.setFilters(a)};var WNAdManager={};WNAdManager.setCustomParseFuncObj=Worldnow.AdMan.setCustomParseFuncObj;WNAdManager.addKeyword=function(d,c){Worldnow.AdMan.addKeyword(d,c)};Worldnow.AdMan.reloadAd=function(b,a){a=Worldnow.AdMan.extend({},a,{type:"dom"});a.application=a.application||a.apptype||"video";return Worldnow.AdMan.getAds(b,function(c){if(c.get("type")=="dom"){c.load(a)}})};Worldnow.AdMan.loadVastAd=function(a,b){return Worldnow.AdMan.getAds(a,function(d){var c=d.getParent();if(c){c.innerHTML=b}else{d.log("No parent defined in loadVastAd() for ad: "+a)}})};Worldnow.AdMan.loadVastHtmlAd=function(b,c,a){return Worldnow.AdMan.getAds(b,function(k){var h=k.get("width")||a.width||"100%",d=k.get("height")||a.height||"100%",g=k.getParent();if(g){g.innerHTML='<iframe width="'+h+'" height="'+d+'" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; border-image: initial; "></iframe>';var f=g.firstElementChild||g.firstChild,m=(f.contentWindow)?f.contentWindow:f.contentDocument;m.document.write(c)}else{k.log("No parent defined in loadVastHtmlAd() for ad: "+b)}})};Worldnow.AdMan.resetCounters=function(){Worldnow.AdMan.history={};Worldnow.AdMan.setRandomNum();Worldnow.AdMan.setSeed()};var Worldnow=(function(a){a.LinksPlusMan={scrollParentTop:function(){window.scrollTo(0,0)}};return a})(Worldnow||{});var WNBeacon=(function($,EventMan,Site,Page){var _MSG_EMPTY_TAXONOMY="No Taxonomy";var _currDate=new Date();var _beacon=function(templateValue,templateType,data){this.externalVars=data;this.template={type:"eval",value:""};this.setTemplate(templateValue,templateType);this.getPopulatedTemplate=function(){return this.populateTemplate(this.replacements)}};_beacon.prototype.populateTemplate=function(replacements){var template=this.template.value,replacements=replacements||this.replacements,macros=this.getMacros(),replacement=null;if(macros){for(var i=0;i<macros.length;i++){replacement=this.getReplacement(macros[i],replacements);template=template.replace(macros[i],replacement)}}return template};_beacon.prototype.getMacros=function(){var macroExp=/\<\%[a-zA-Z0-9\_]+\%\>/g;return this.template.value.match(macroExp)};_beacon.prototype.getReplacement=function(macro,replacements){if(typeof macro!="string"){return null}var replaceSegements=macro.replace("<%","").replace("%>","").split(":");return(replaceSegements.length>0)?this.findReplacement(replaceSegements[0],replacements):macro};_beacon.prototype.findReplacement=function(replaceName,replacements){var replacements=replacements||this.replacements||{};return(replacements.hasOwnProperty(replaceName))?replacements[replaceName]:""};_beacon.prototype.setTemplate=function(templateValue,templateType){this.template.type=type=templateType;this.template.value=temp=templateValue;var _this=this;var imgRegExp=/https?:\/\/(.*)\.(gif|jpg|bmp|png)[\?(.*)]?/,scriptRegExp=/https?:\/\/(.*)\.js[\?(.*)]?/,ajaxRegExp=/https?\:\/\//;this.track=function(data,done){if(typeof this.template.type=="string"&&this.trackFunctions.hasOwnProperty(this.template.type)){return this.trackFunctions[this.template.type](data,done)}else{if(imgRegExp.test(this.template.value)){return this.trackFunctions.img(data,done)}else{if(scriptRegExp.test(this.template.value)){return this.trackFunctions.script(data,done)}else{if(ajaxRegExp.test(this.template.value)){return this.trackFunctions.ajax(data,done)}else{return this.trackFunctions.eval(data,done)}}}}};this.trackFunctions={img:function(data,done){var replacements=$.extend({},_this.replacements,_this.externalVars,(data&&data.hasOwnProperty("includesDomain")?{}:data),(data&&data.hasOwnProperty("extraPageLabels")?data.extraPageLabels:{}));var convertedTemplate=_this.populateTemplate(replacements);var $img=$('<img src="" width="0" height="0" border="0"/>');$("body").append($img);$img.attr("src",convertedTemplate).load(done)},script:function(data,done){var replacements=$.extend({},_this.replacements,_this.externalVars,(data&&data.hasOwnProperty("includesDomain")?{}:data),(data&&data.hasOwnProperty("extraPageLabels")?data.extraPageLabels:{}));var convertedTemplate=_this.populateTemplate(replacements);$.ajax({dataType:"script",url:encodeURIComponent(convertedTemplate),cache:false,complete:done,error:function(e){_this.debug("WNBeacon.trackFunctions.script()",e.statusText)},context:_this})},"eval":function(data,done){var replacements=$.extend({},_this.replacements,_this.externalVars,(data&&data.hasOwnProperty("includesDomain")?{}:data),(data&&data.hasOwnProperty("extraPageLabels")?data.extraPageLabels:{}));for(var key in replacements){if(typeof replacements[key]==="string"){replacements[key]=replacements[key].replace(/\'/g,"\\'")}}var convertedTemplate=_this.populateTemplate(replacements);try{eval(convertedTemplate);typeof done=="function"&&done()}catch(e){_this.debug("WNBeacon.trackFunctions.eval("+convertedTemplate+")",e.message)}},ajax:function(data,done){var replacements=$.extend({},_this.replacements,_this.externalVars,(data&&data.hasOwnProperty("includesDomain")?{}:data),(data&&data.hasOwnProperty("extraPageLabels")?data.extraPageLabels:{}));var convertedTemplate=_this.populateTemplate(replacements);$.ajax({url:encodeURIComponent(convertedTemplate),type:"POST",cache:false,complete:done,error:function(e){_this.debug("WNBeacon.trackFunctions.script()",e.statusText)},context:_this})}}};_beacon.prototype.replacements={pagename:encodeURIComponent(Page.pageTitle||Page.headline),pageurl:"http"+(document.location.href.charAt(4)=="s"?"s://":"://")+Page.baseUrl+Page.permaLink,contentgroup:Page.contentClassification||"",pageclass:Page.containerType||"",contentprovider:Page.ownerAffiliateName||"Worldnow",sitename:Page.affiliateName,sitetype:(Page.isMobile?"mobile":""),featureId:Page.containerId||"",headline:encodeURIComponent(Page.headline)||"",taxonomy1:(Page.hasOwnProperty("taxonomy")&&Page.taxonomy.hasOwnProperty("level1")?Page.taxonomy.level1:_MSG_EMPTY_TAXONOMY)||_MSG_EMPTY_TAXONOMY,taxonomy2:(Page.hasOwnProperty("taxonomy")&&Page.taxonomy.hasOwnProperty("level2")?Page.taxonomy.level2:_MSG_EMPTY_TAXONOMY)||_MSG_EMPTY_TAXONOMY,taxonomy3:(Page.hasOwnProperty("taxonomy")&&Page.taxonomy.hasOwnProperty("level3")?Page.taxonomy.level3:_MSG_EMPTY_TAXONOMY)||_MSG_EMPTY_TAXONOMY,day:$.format.date(_currDate,"MM-dd_yyyy"),time:$.format.date(_currDate,"HH:mm"),nthmonth:$.format.date(_currDate,"MM"),nthday:$.format.date(_currDate,"dd"),nthweek:$.format.date(_currDate,"ww"),dayofweek:$.format.date(_currDate,"ddd")};_beacon.prototype.debug=function(funcName,msg){try{WNErrorHandle.addErrorMsg(msg,funcName);WNErrorHandle.console(msg,funcName)}catch(e){}};return _beacon})($wn||jQuery,Worldnow.EventMan,wn||{},wng_pageInfo||{});if(typeof(WNBeaconManager)=="undefined"){var WNBeaconManager=WNClass.createSingleton(function(){var b=function(){};var a=false;var c=[];b.prototype={beacons:c,init:function(g){if(a||typeof g!="object"||!g.hasOwnProperty("analytics")){return false}if(typeof wng_pageInfo==="object"&&wng_pageInfo.hasOwnProperty("isPreviewSite")){if(wng_pageInfo.isPreviewSite){return false}}else{var d=new RegExp("://manage[A-Za-z0-9.]*.worldnow.com");if(d.test(document.location.href)){return false}}try{var f=g.analytics;for(var h in f){var n=f[h];for(var m in n){if(n.hasOwnProperty(m)){var o=$wn.extend({},n[m],{vendorName:m});this.loadScript(o);this.createBeacons(o)}}}a=true}catch(k){this.debug("WNBeaconManager.init()",k.message)}},loadScript:function(m){try{if(typeof m!="object"||(m.hasOwnProperty("jsincludes")&&m.jsincludes.length==0)||(!m.hasOwnProperty("enabled")||!m.enabled)){return false}var h=/https?:\/\/(.*)\.js[\?(.*)]?/;for(var g in m.jsincludes){if(m.jsincludes.hasOwnProperty(g)){var d=m.jsincludes[g];if(d&&d.length>0){var f=document.createElement("script");f.type="text/javascript";if(h.test(d)){f.src=d}else{f.text=d}document.head.appendChild(f)}}}return true}catch(k){this.debug("WNBeaconManager.loadScript()",k.message);return false}},createBeacons:function(f){if(typeof f!="object"||(f.hasOwnProperty("templates")&&f.templates.length==0)||(!f.hasOwnProperty("enabled")||!f.enabled)){return false}for(var d in f.templates){if(f.templates[d].hasOwnProperty("body")&&f.templates[d].hasOwnProperty("event")){this.setBeacon({template:f.templates[d].body,event:f.templates[d].event,type:(f.templates[d].hasOwnProperty("type")?f.templates[d].type:"eval"),data:(f.hasOwnProperty("variables")?f.variables:{})})}}return true},setBeacon:function(f){try{var d=new WNBeacon(f.template,f.type,f.data);if(this.registerBeacon(d)){if(Worldnow.EventMan&&f.event&&f.event.length>0){Worldnow.EventMan.register(f.event,function(h){d.track(h)})}}return d}catch(g){this.debug("WNBeaconManager.setBeacon()",g.message)}return null},registerBeacon:function(d){try{if(typeof d=="object"){c[c.length]=d;return true}}catch(f){this.debug("WNBeaconManager.registerBeacon()",f.message)}return false},debug:function(f,g){try{WNErrorHandle.addErrorMsg(g,f);WNErrorHandle.console(g,f)}catch(d){}}};return b})}if(typeof wn=="object"){WNBeaconManager.init(wn)}var Worldnow=(function(d){d.Browser=window.WNBrowser=new Object();var h=WNG_STATE_OFF;var a={nav:1,c:1,l:1,s:1,C:1,L:1,S:1};var k=navigator.userAgent.toLowerCase();var c={};var m=null;WNBrowser.queryParametersWorldNow=a;WNBrowser.userAgent=k;WNBrowser.browserName=navigator.appName;WNBrowser.browserVersion=parseInt(navigator.appVersion);WNBrowser.openWindow=function(q,p,s,r){try{var u=wng_win.open(q,p,s);u.focus()}catch(v){}var t=(r)?u:false;return t},WNBrowser.closeWindow=function(q){try{q=q||wng_win;var r=q.opener;if(r){r.focus()}q.close()}catch(p){}},WNBrowser.adjustWindowHeight=function(q,y){try{if(!q){return false}if(typeof(y)!="object"||y instanceof Array){y={}}var r=y.window||wng_win;var p=y.parentWindow||parent;if(p===r){return false}var q=WNElement.getElement(q,p.document);if(!q){return false}var t=q.nodeName.toLowerCase();var u=parseInt(y.height);if(isNaN(u)&&y.parentWindow!=window){var v=document.body;u=(WNElement.getHeight(v)+(parseInt(WNElement.getStyle(v,"margin-top"))||0)+(parseInt(WNElement.getStyle(v,"margin-bottom"))||0))}if(isNaN(u)){return false}if(t=="frame"){q=q.parentNode;t=q.nodeName.toLowerCase()}if(t=="frameset"){var x=parseInt(y.row);if(isNaN(x)){return false}var w=q.rows.replace(" ","").split(",");if(x&&x<=w.length){if(u!=w[x-1]){w[x-1]=u;q.rows=w.join(",");return true}else{if(t=="iframe"&&q.height!=u){q.height=u;return true}}}}}catch(s){}return false},WNBrowser.checkUserAgent=function(q){if(!q){return false}var p=c[q];if(!p){p=k.indexOf(q)!=-1;c[q]=p}return p},WNBrowser.getScreenSize=function(q){q=q||wng_win;var p,r;if(q.innerHeight){p=q.innerWidth;r=q.innerHeight}else{if(q.document&&q.document.documentElement&&q.document.documentElement.clientHeight){p=q.document.documentElement.clientWidth;r=q.document.documentElement.clientHeight}else{if(q.document&&q.document.body){p=q.document.body.clientWidth;r=q.document.body.clientHeight}}}return{width:p||0,height:r||0}},WNBrowser.getScrollOffset=function(r){r=r||wng_win;var p,s;try{p=r.pageXOffset,s=r.pageYOffset;if(typeof(p)=="undefined"&&r.document&&r.document.body){p=r.document.body.scrollLeft;s=r.document.body.scrollTop}}catch(q){}return{x:p||0,y:s||0}},WNBrowser.statusBarToggle=function(r,q,t){try{t=t||wng_win;var p=r==h;if(p){q=t.status}if(!q){return}t.status=(p)?"":q;return}catch(s){}},WNBrowser.getQueryParameterValue=function(p,q){return this.getQueryParametersAll(q)[p]},WNBrowser.getQueryParametersString=function(u,q,r){if(typeof(u)!="object"||u instanceof Array){u={}}var t=this.getQueryParametersAll(r);var p="";for(var s in t){if(!u[s]){p+="&"+s+"="+t[s]}}if(q){r=r||wng_win;p+="&referrerDomain="+r.location.protocol+r.location.hostname}return p.substr(1);WNBrowser.getQueryParametersAll=function(z){z=z||wng_win;var y=z===wng_win;if(y&&m){return m}var B=z.location.search.substr(1).split("&");var x={};for(var w=0,v=B.length,A;w<v;w++){A=B[w].split("=");x[A[0]]=(A.length>1)?A[1]:""}if(y){m=x}return x}};var o=[];var f;var g;var b;var n;d.Browser.parseStr=function(){firstCharNum=k.indexOf("(");lastCharNum=k.indexOf(")");f=k.substr((firstCharNum+1),(lastCharNum-firstCharNum-1));firstCharNum=k.lastIndexOf("(");g=k.substr((lastCharNum+1),(firstCharNum-lastCharNum-1));lastCharNum=k.lastIndexOf(")");b=k.substr((firstCharNum+1),(lastCharNum-firstCharNum-1));n=k.substr((lastCharNum+1),(k.length-lastCharNum-1));o.push(f,g,b,n)};d.Browser.query=function(p,q){d.Browser.parseStr();var r=o[q].indexOf(p);if(r!==-1){this.queryReturn=true}else{this.queryReturn=false}return this.queryReturn};return d})(Worldnow||{});var Worldnow=(function(c,d,a,f,b){c.ClientGroup=function(){var h="ClientGroupBypass";var k="SwitchBackToCG";var n="ClientGroup";var q="";var p=function(){return q};var o=function(u){var t=location.search,r=location.protocol+"//"+location.hostname+location.pathname,x=t.replace("?",""),y=x.split("&"),w="",v="?";for(var s=0;s<y.length;s++){w=y[s];if(w.indexOf("clienttype")==-1&&w.indexOf("cgbypass")==-1&&w!=""){v+=w+"&"}}q=r+v+"removecgbypass&clienttype="+u};var g=function(){a.remove(h);a.remove(k)};var m=function(){var r=location.search,w=/([?&])([a-z]+)(cgbypass)/gi,u=w.exec(r),v=/([?&])(removecgbypass)/gi,y=v.exec(r),x="",t=a.get(k);if(y&&y.length==3){t=null;g()}else{if(u&&u.length==4){t=u[2];var s=new Date();s.setTime(s.getTime()+(1*24*60*60*1000));a.set(h,1,{path:"/",expires:s});a.set(k,t,{path:"/",expires:s})}}if(t){o(t);f.event("documentready",function(){d("body").prepend("<div id='WNRemoveBypassSection'><a href='javascript:void(0);'>Return to mobile site</a></div>");d("#WNRemoveBypassSection a").bind("click",function(){c.ClientGroup.clear();window.location=c.ClientGroup.getSwitchBackLink();return true})})}else{g()}};return{detect:m,getSwitchBackLink:p,clear:g}}();if(!b.isMobile){c.ClientGroup.detect()}return c})(Worldnow||{},$wn||jQuery,Worldnow.CookieMan,Worldnow.EventMan,wng_pageInfo);var Worldnow=(function(c,d,f,b){var a=function(){var k=new UAParser();var n=5000;var q="wnColsResetHeights";var r=0;var s=null;var w={};var u=function(y){r=parseInt(y,10)};var x=function(){return r};var p=function(y){return y.replace(".","dot").replace("#","hash").replace(" ","_").replace("[","brack").replace("]","brack")};var m=function(y,z){var A=d(y);if(z){w[z]=A}return A};var o=function(y){var z=p(y);return w.hasOwnProperty(z)?w[z]:m(y,z)};var v=function(){var C=d(window).height();var y=o("#WNFooter");if(y.length==0){return x()}var A=y.outerHeight();var z=C-A;var B=y.offset().top;return(z>B)?z:B};var t=function(z,y){o(z).each(function(){var C=d(this).innerHeight();var B=d(this).offset().top+C;var D=y-B;var F=h(d(this).css("padding-top"))+h(d(this).css("padding-bottom"))+h(d(this).css("border-top-width"))+h(d(this).css("border-bottom-width"));var A=C+D-F;if(D>0){var E=k.getBrowser();if(E.name=="IE"&&parseInt(E.major)<7){d(z).css("height",A)}else{d(z).css("minHeight",A)}}})};var h=function(z){var y=parseInt(new String(z).replace("px",""));return(!!y)?y:0};var g=function(z,A){try{WNErrorHandle.addErrorMsg(y);WNErrorHandle.console(y)}catch(y){}};return{FUNC_NAME:"Worldnow.ColumnMan",startTimer:function(){if(!s){resizeColumns();s=window.setInterval("Worldnow.ColumnMan.resizeColumns()",5000)}},stopTimer:function(){try{window.clearInterval(s)}catch(y){g("Worldnow.ColumnMan.stopTimer",y)}},collapseColumns:function(){try{d("[WNCollapse='true']").each(function(){if(d(this).is(":empty")){d(this).hide()}})}catch(y){}},resizeColumns:function(){if(wng_pageInfo.isMobile){var E=o("#WNFooter");var G=o("#WNCols23-4");var F=o("#WNCol23");var y=d(window).height();if(E.length==0||G.length==0){return null}var D=y-E.outerHeight();var B=E.offset().top;if(B<D){G.attr("style","min-height: "+(y-G.offset().top-E.height()-parseInt(F.css("padding-bottom"),10))+"px !important");E.css({position:"fixed",bottom:"0"})}else{E.css({position:"static",bottom:"auto"})}}else{var z=x();var A=v();if(A!=z){u(A);var C=x();t(".wnColConfig1 #WNMenuCol1",C);t("#WNCol23",C);t("#WNCol4",C);t("#WNCol5",C)}}}}}();f.event("documentready",a.resizeColumns);f.event("documentready",a.collapseColumns);if(!b.isMobile){f.event("cb-newcontent",a.resizeColumns)}f.event("inv-newcontent",a.startTimer);c.ColumnMan=a;return c})(Worldnow||{},$wn||jQuery,Worldnow.EventMan,wng_pageInfo||{});var Worldnow=(function(b,d,f,a){b.ContentBlockHelpers={fillDSTimeStamps:function(){var g=new Date();function k(m,q,n){if(m=="moments"){var p="moments ago"}else{var o=Math.floor(n/q);var p=null;if(o>=1){p="over "+o+" "+m+((o>1)?"s":"")+" ago"}}return p}var h={year:1000*60*60*24*365,month:1000*60*60*24*30.4,week:1000*60*60*24*7,day:1000*60*60*24,hour:1000*60*60,minute:1000*60,moments:0};d(".wnBlock .wnContent.timestamp.servertime").each(function(){var p=new Date(d(this).text());var o=d(this).parent();var m=o.find(".timestamp.timeago");var r=o.find(".timestamp.mytime");if(m.length==1){var q=g.getTime()-p.getTime();var s=null;if(q<(4*h.hour)){for(var n in h){if(h.hasOwnProperty(n)){var s=k(n,h[n],q);if(s){break}}}}else{s=p.customFormat("%MMM% %DD%, %YYYY% %h%:%mm% %AMPM% %tz%")}m.text(s)}if(r.length==1){r.text(p.customFormat("%MMM% %DD%, %YYYY% %h%:%mm% %AMPM% %tz%"))}})},loadAbstractImage:function(q,n){var m=function(){d.each(p,function(){if(d(this).parents(".wnItem").is(":in-viewport")){h(d(this))}});if(s<=0){d(window).off("scrollstop",m);d(window).off("resize",m)}};var g={"default":function(){p.each(function(){h(d(this))})},lazy:function(){d(window).on("scrollstop",m);d(window).on("resize",m)},lazyall:function(){d(window).on("scrollstop",m);d(window).on("resize",m)}};function h(u){var t=u[0].getAttribute("data-path");u.removeClass("doLazy");if(n!="animate"){u[0].setAttribute("src",t)}else{u.fadeOut(1,function(){u.imagesLoaded(function(v){v.fadeIn("fast")});u[0].setAttribute("src",t)})}u.imagesLoaded(o);p=d("img.doLazy");s=p.length}var k;function o(){clearTimeout(k);k=setTimeout(function(){b.EventMan.triggerEvent("cb-newcontent")},500)}var r=d("li.wnItem.feature");var s=0;var p=[];r.each(function(){var t=d(this).find("div.summaryImage:visible img");if(t.length&&(typeof t.attr("src")=="undefined"||t.attr("src")=="")){var u=t.addClass("doLazy");if(d(this).is(":in-viewport")){h(u)}else{p.push(u)}}});s=p.length;if(!g[q]){throw"Unsupported loading method. Use 'lazy', 'lazyall' or 'default'."}g[q]()}};var c=function(g){this.parent=null;this.options={};this.extend=a.extend;this.init(g)};c.prototype={init:function(g){this.setParent(g);this.set(g)},set:function(h,k){var g={};if(h&&k&&(typeof h=="string"&&typeof k=="string")){g[h]=k}else{if(h.getAttribute){g=d(h).data()}else{if(h instanceof jQuery){g=h.data()}else{if(typeof h=="object"){g=h}}}}this.extend(this.options,g);return this},get:function(k){var h=[],g;k.replace(/[ \-]+/,",").split(",");for(var m=k.length-1;m>=0;m--){g=k[m];if(this.options.hasOwnProperty(g)){h.push(this.options[g])}}return(h.length==1)?h[0]:h},setBlock:function(g){var h=g.block||g.firstChild.parentNode||g;this.block=h},getBlock:function(){this.block=(this.block instanceof jQuery)?this.block:d(this.block);return this.block},getOptimusChildren:function(k,h,n){var m=this.getBlock(),g=[],n=n||function(){};m.find("."+k).each(function(){var o=d(this);if(typeof h=="string"&&o.hasClass(h)){n(o);g.push(o)}else{if(!h||h===true||h==""){n(o);g.push(o)}}});return g},getGroups:function(g,h){return this.getOptimusChildren("wnGroup",g,h)},getItems:function(g,h){return this.getOptimusChildren("wnItem",g,h)},getContents:function(g,h){return this.getOptimusChildren("wnContent",g,h)}};f.event("documentready",function(){b.ContentBlockHelpers.fillDSTimeStamps();b.ContentBlockHelpers.loadAbstractImage("lazy","animate")});return b})(Worldnow||{},$||jQuery,Worldnow.EventMan,Worldnow.Helpers);var Worldnow=(function(b,c,a){b.TextSize=function(){var n="orgFontSize";var m=new RegExp("[^0-9\\.]","gi");var g=0.8;var k=1;var o=1.2;var h="wnOn";var d="textsize";function f(p){try{WNErrorHandle.addErrorMsg(p);WNErrorHandle.console(p)}catch(p){}}return function(z){try{if(c(z.expSmallButton).length>0){var t=c(z.expSmallButton)}else{throw"Option <expSmallButton> must be provided and must be a valid jQuery selector.";return}if(c(z.expMediumButton).length>0){var q=c(z.expMediumButton)}else{throw"Option <expMediumButton> must be provided and must be a valid jQuery selector";return}if(c(z.expLargeButton).length>0){var y=c(z.expLargeButton)}else{throw"Option <expLargeButton> must be provided and must be a valid jQuery selector.";return}if(c(z.expTargetField).length>0){var s=c(z.expTargetField)}else{throw"Option <expTargetField> must be provided and must be a valid jQuery selector.";return}var w=a.get(d);var x=function(){t.removeClass(h);q.removeClass(h);y.removeClass(h)};var p=function(){s.find("*").each(function(){var B=c(this).attr(n);if(typeof B=="string"){var A=B.replace(m,"");A=A*g;c(this).css("fontSize",A)}});x();t.addClass(h)};var r=function(){s.find("*").each(function(){var B=c(this).attr(n);if(typeof B=="string"){var A=B.replace(m,"");A=A*k;c(this).css("fontSize",A)}});x();q.addClass(h)};var v=function(){s.find("*").each(function(){var B=c(this).attr(n);if(typeof B=="string"){var A=B.replace(m,"");A=A*o;c(this).css("fontSize",A)}});x();y.addClass(h)};s.find("*").each(function(){c(this).attr(n,c(this).css("fontSize"))});switch(w){case"small":p();break;case"large":v();break;default:q.addClass(h);break}t.click(function(A){p();a.set(d,"small")});q.click(function(A){r();a.set(d,"medium")});y.click(function(A){v();a.set(d,"large")})}catch(u){f(u);return}}};return b})(Worldnow||{},$wn||jQuery,Worldnow.CookieMan);var Worldnow=(function(b,c,a,d){b.Paywall=function(){var n=null;var f=false;var m=[];var g={};var q={esecured:"esecured",emetered:"emetered",clicks:"tokens-used"};var p=function(){n=c("#WNPayWallMessage");o();h()};var o=function(){f=a.get(q.esecured)};var h=function(){var s=a.get(q.emetered);if(s){var r=decode64(s);var t=r.split("&");var u=[];for(i=0;i<t.length;i++){u=t[i].split("=");if(u.length==2){g[u[0]]=u[1]}u=[]}}};var k=function(){if(n.hasClass("metered")&&!f&&g.hasOwnProperty(q.clicks)){var r=parseInt(g[q.clicks]);if(r==1){c.gritter.add({title:n.attr("title"),text:n.find(".wnGroup.metered .wnItem .wnContent.message").text()})}}};return{init:p,popMessage:k}}();d.registerToEvent(b.Paywall.init,"documentready");d.registerToEvent(b.Paywall.popMessage,"documentready");return b}(Worldnow||{},$wn||jQuery,Worldnow.CookieMan,Worldnow.EventMan));var Worldnow=(function(d,f,a,c,h){var b=function(k){this.options={userLoggedIn:"loggedIn",userLoggedOut:"loggedOut",formCompleted:"formcompleted",multipleEnteries:"formsmultipleEntries",regRequired:"requireregistration",regNotRequired:"registrationNotRequired",formIdPrefix:"FormId"};this.init(k)};b.prototype={constructor:b,init:function(w){var n=this,t=this.getFormNo(w),x=w.$form;this.getOptions(w);this.escapeField(x);if(x.find(".forms-dateofbirth").length>0){this.getDOB(w.id,x)}var m=x.find("input[name='"+this.options.regRequired+"']").val();try{m=(m.toLowerCase()=="false")?false:true}catch(s){m=true}if(!m){x.addClass(this.options.regNotRequired)}if(this.checkFormCompletion(t,WNMemberCenterManager.userEmailAddress)){x.addClass(this.options.formCompleted)}if(WNMemberCenterManager.isRegistered&&m){if(this.checkMultipleEntries(t,WNMemberCenterManager.userEmailAddress)){x.addClass(this.options.multipleEnteries)}x.removeClass(this.options.userLoggedOut).addClass(this.options.userLoggedIn);if(WNMemberCenterManager.userEmailAddress&&this.options.type!="submit"){var u=$wn("input#"+this.options.id+"-EmailAddress");$wn(document.createElement("input")).attr({type:"hidden",id:this.options.id+"-EmailAddressClone",name:$wn(u).attr("name"),value:WNMemberCenterManager.userEmailAddress}).insertAfter($wn(u));$wn(u).val(WNMemberCenterManager.userEmailAddress).attr("disabled","disabled")}if(WNMemberCenterManager.suppliedProfileElements.length>0){var q=WNMemberCenterManager.suppliedProfileElements;var v=new RegExp(this.options.formIdPrefix+"[0-9]+Field-","i");var o="";var p=new RegExp("User_","i");var k="";for(var r in q){switch(q[r]){case"EmailAddress":case"":continue;break;default:break}k=q[r].replace(p,"");x.find("input").each(function(){try{o=this.name.replace(v,"");if(k==o){d.Form.prototype.removeFormField(this)}}catch(y){}});x.find("select").each(function(){try{o=this.name.replace(v,"");if(k==o){d.Form.prototype.removeFormField(this)}}catch(y){}})}}}},get:function(k,m){m=m||this.options;return m.hasOwnProperty(k)?m[k]:null},set:function(k,n,m){m=m||this.options;m[k]=n;return this},getOptions:function(k){return f.extend(this.options,k)},getFormNo:function(k){var m=k.id;m=m.split("-");m=m[1];return m},getDOB:function(r,m,q){var n=new Date();var p=n.getFullYear();var k=1901;var o=n.getFullYear()-13;m.find("select.forms-birthmonth").html(this.getDOBOptions(1,12,"MM")).on("change",function(){d.Form.prototype.getDOBOnChange(this)});m.find("select.forms-birthday").html(this.getDOBOptions(1,31,"DD")).on("change",function(){d.Form.prototype.getDOBOnChange(this)});m.find("select.forms-birthyear").html(this.getDOBOptions(k,p,"YYYY")).on("change",function(){d.Form.prototype.getDOBOnChange(this)})},getDOBOptions:function(m,o,q,s){s=(parseInt(s)>0)?s:1;var r=document.createElement("DIV");var n=null;n=document.createElement("OPTION");n.setAttribute("value","");n.innerHTML=q;$wn(r).append(n);var t=99999;var k=0;for(i=m;i<=o;i=i+s){if(k>t){var p="Bad parameters in _generateOptions method.  start: "+m+" end: "+o+" _default: "+_default+" increment: "+s;console.log(p);return}n=document.createElement("OPTION");n.setAttribute("value",i);n.innerHTML=(i<10)?"0"+i:i;$wn(r).append(n);k++}return $wn(r).html()},getDOBOnChange:function(p){var n=(typeof(p)!="string")?p.parentNode:$wn("#"+p);var o=$wn(n).find("select.forms-birthmonth:first").attr("value");var k=$wn(n).find("select.forms-birthday:first").attr("value");var m=$wn(n).find("select.forms-birthyear:first").attr("value");if(o==""&&k==""&&m==""){$wn(n).find("input.forms-dateofbirth").attr("value","")}else{$wn(n).find("input.forms-birthmonth").attr("value",o);$wn(n).find("input.forms-birthday").attr("value",k);$wn(n).find("input.forms-birthyear").attr("value",m);$wn(n).find("input.forms-dateofbirth").attr("value",o+"/"+k+"/"+m)}},checkFormCompletion:function(m,o){var k=WNCookie.get("completeditems");o=(!o||o=="undefined"||o==null)?"":o;if(k){var n=new RegExp("[^0-9]"+m+"="+o,"ig");if(n.test(k)){if(location.search.indexOf(this.options.formCompleted+"="+m)>0){return true}}}return false},checkMultipleEntries:function(m,o){var k=WNCookie.get("multipleentries");if(k){var n=new RegExp("[^0-9]"+m+"="+o,"ig");if(n.test(k)){return true}}return false},escapeField:function(k){k.find(".wnEscaped").each(function(){$wn(this).html(unescape($wn(this).html()));$wn(this).removeClass("wnEscaped").addClass("Escaped")})},removeFormField:function(k){$wn(k).parent().remove()},disableForm:function(k){k.find("input[type='submit']").disabled=true;$wn("body").css("cursor","wait")},enableForm:function(k){k.find("input[type='submit']").disabled=false;$wn("body").css("cursor","auto")},formSubmit:function(){var n=new g(this.options),r=n.validateForm(),t=this.options.$form,p=this.getFormNo(this.options);this.disableForm(t);if(r){var o=t.find("[name='submittedfields']"),q=location.href,s=(q.indexOf("?")>0)?"&":"?";q+=s+"formcompleted="+p;t.find("input[name='referrer']").val(escape(q));t.find("[submitfield='true']").each(function(){if($wn(this).attr("value")!=""){switch($wn(this).attr("name")){case"referrer":case"formno":case"landingpagetype":case"isformcomplete":case"requireregistration":break;case"LoginEmailAddress":$wn(o).val($wn(o).attr("value")+$wn(this).attr("name")+"|");break;default:$wn(o).val($wn(o).attr("value")+"_"+$wn(this).attr("name")+"|");break}}});var m=document.createElement("FORM"),k=document.getElementById("allformfields-"+p);m.name="quickForm";m.appendChild(k);document.body.appendChild(m);m.method="POST";m.action="/link/"+wng_pageInfo.registrationId+"/registration?function=form";m.submit();this.enableForm(t);return true}this.enableForm(t);return false},quickSignupSubmit:function(){var n=new g(this.options),r=n.validateForm(),t=this.options.$form,p=this.getFormNo(this.options);this.disableForm(t);if(r){var o=t.find("[name='submittedfields']"),q=location.href,s=(q.indexOf("?")>0)?"&":"?";q+=s+"formcompleted="+p;t.find("input[name='referrer']").val(escape(q));t.find("[submitfield='true']").each(function(){if($wn(this).attr("value")!=""){switch($wn(this).attr("name")){case"referrer":case"formno":case"landingpagetype":case"isformcomplete":case"requireregistration":break;case"LoginEmailAddress":$wn(o).val($wn(o).attr("value")+$wn(this).attr("name")+"|");break;default:$wn(o).val($wn(o).attr("value")+"_"+$wn(this).attr("name")+"|");break}}});var m=document.createElement("FORM"),k=document.getElementById("allquicksignupfields-"+p);m.name="quickSignup";m.appendChild(k);document.body.appendChild(m);m.method="POST";m.action="/link/"+wng_pageInfo.registrationId+"/registration?function=quicksignup";m.submit();this.enableForm(t);return true}this.enableForm(t);return true}};var g=function(k){this.options={validationAttName:"validation",validationRequired:"wnRequired",requiredFieldMsg:"Field is required.",requiredOptionMsg:"Please select an option.",emailValidation:"wnEmail",invalidEmailMsg:"Email Address is invalid",zipcodeValidation:"wnZipCode",invalidZipCodeMsg:"Zip Code is invalid",dobValidation:"wnDateOfBirth",invalidDobMsg:"Date of birth is invalid",ReqAgeValidation:"wnRequiredAge",invalidRegAgeMsg:"Must be at least 13 to submit this form",reqAge:13,errorClassName:"wnFormError",errorClassNameMsg:"wnErrorMsg",date_year_milli:31536000000,elementName:""};this.init(k)};g.prototype={constructor:g,init:function(k){f.extend(this.options,k)},validateForm:function(){var o=this;this.resetValidationErrors();var n=0,p="validation",k="wnErrorMsg",m="LoginEmailAddress";this.options.$form.find("[validation]").each(function(){var t=$wn(this).attr(p);var w=t.split(" ");var u="";var v="";var s=null;var r=null;for(var q=0;q<w.length;q++){v=o.runFieldValidation(w[q],this);u+=(v!="")?" "+v:""}if(u!=""&&o.wnTrim(u)!="null"){if($wn(this).attr("name")==m){s=$wn(this).parent().parent().find("label")[0];r=$wn(this).parent().parent().find("span")[0]}else{s=$wn(this).parent().find("label")[0];r=$wn(this).parent().find("span")[0]}o.highlightValidationError(s,r,u)}else{if(o.wnTrim(u)=="null"||o.wnTrim(u)==""){s=$wn(this).parent().find("label")[0];r=$wn(this).parent().find("span")[0];if(typeof(s)=="undefined"){s=$wn(this).parent().parent().find(".wnMemberNonuser").find("label")[0];$wn(this).parent().parent().find("memberinfo").find("span").html("")}o.unHighlightValidationError(s,r,u)}}});n=$wn.find(".wnFormError").length;return(n>0)?false:true},resetValidationErrors:function(){this.options.$form.find("[className="+this.options.errorClassName+"]").removeClass(this.options.errorClassName);this.options.$form.find("span[className="+this.options.errorClassNameMsg+"]").html("")},highlightValidationError:function(m,k,n){if(m&&m!="undefined"){$wn(m).addClass(this.options.errorClassName)}if(k&&k!="undefined"){$wn(k).html(n)}},unHighlightValidationError:function(m,k,n){if(m&&m!="undefined"){$wn(m).removeClass(this.options.errorClassName)}if(k&&k!="undefined"){$wn(k).html("")}},runFieldValidation:function(x,q){var r="";var z=this.wnTrim(q.value);var n="";if(q.name.toLowerCase()=="zipcode"){x=this.options.zipcodeValidation}switch(x){case this.options.validationRequired:if(z==""){r=this.options.requiredFieldMsg}if(q.checked){this.options.elementName=q.name;r="null"}else{if((this.options.elementName==q.name)&&!q.checked){r="null";break}else{if((q.type=="checkbox"||q.type=="radio")){r=this.options.requiredOptionMsg}}}break;case this.options.emailValidation:var m=new RegExp('^(([^<>()[\\]\\\\.,;:\\s@\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\"]+)*)|(\\".+\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$');if(z!=""){if(z.match(m)==null){r=this.options.invalidEmailMsg}}else{r=this.options.requiredFieldMsg}break;case this.options.zipcodeValidation:var o=new RegExp("^\\d{5}(-\\d{4})?$");if(z.match(o)==null){r=this.options.invalidZipCodeMsg}break;case this.options.dobValidation:if(z!=""){var k=z.split("/");if(k.length==3){var p=new Date();p.setFullYear(1901,0,31),u=k[0],y=k[1],w=k[2];p.setFullYear(w);p.setDate(y);p.setMonth(u-1);if(p.getFullYear()==w&&w!=0&&p.getMonth()==(u-1)&&p.getDate()==y){break}}r=this.options.invalidDobMsg}break;case this.options.invalidReqAge:if(z!=""){var k=z.split("/");if(k.length==3){var u=k[0]-1,y=k[1],w=k[2],v=new Date(),t=new Date(w,u,y),s=v-t,A=s/this.options.date_year_milli;if(A<this.options.reqAge){r=this.options.invalidReqAgeMsg}}}break;default:break}return r},wnTrim:function(k){return k.replace(/^\s*/,"").replace(/\s*$/,"")}};d.Form=b;d.Validation=g;d.EventMan.event("documentready",function(){if($wn.find(".quickform").length>0){var p=$wn.find(".quickform");for(var m=0;m<p.length;m++){var r=p[m].getAttribute("id");var q={};q.type="form";q.id=r;q.$form=$wn(p[m]);var s=new b(q)}}if($wn.find(".qsignup").length>0){var k=$wn.find(".qsignup");for(var m=0;m<k.length;m++){var n=k[m].getAttribute("id");var q={};q.type="quicksignup";q.id=n;q.$form=$wn(k[m]);var s=new b(q)}}});return d})(Worldnow||{},$||jQuery,wn||{},wng_pageInfo||{},Worldnow.EventMan);var WNFormManager={};WNFormManager.onFormSubmit=function(b){var d=document.getElementById(b);var a={};a.type="submit";a.id=b;a.$form=$wn(d);var c=new Worldnow.Form(a);c.formSubmit()};WNFormManager.onQSSubmit=function(c){var b=document.getElementById(c);var a={};a.type="submit";a.id=c;a.$form=$wn(b);var d=new Worldnow.Form(a);d.quickSignupSubmit()};if(typeof(wng_pageInfo)=="undefined"){var wng_pageInfo={}}if(!window.wng_backwardsCompatible){var wng_AffiliateName=g_AffName=wng_pageInfo.affiliateName;var g_BaseURL=wng_pageInfo.baseUrl;var wng_page_containerId=g_ContID=wng_pageInfo.containerId;var wng_page_containerType=g_ContType=wng_pageInfo.containerType;var g_AdTag=targetadtag=wng_pageInfo.contentClassification;var wng_VideoHelpPage=wng_pageInfo.videoHelpPage;var wng_VideoMacHelpPage=wng_pageInfo.videoHelpPageMac;function OpenWin(d){var b,a,c="";d=d.split("|");b=d[0];var f="(^http)|(^ftp)|(^/)";if(!(b.match(f))){b="http://"+b}if(d.length>1){a=d[1]}if(d.length>2){c=d[2]}if(window.WNBrowser){WNBrowser.openWindow(b,a,c)}else{window.open(b,a,c)}}function popProfile(){if(window.WNMemberCenterManager){WNMemberCenterManager.populateBoxes();return true}return false}var agt="",ns6=false,is_safari=false,is_ie=false;if(window.WNBrowser){var agt=WNBrowser.userAgent;var ns6=WNBrowser.browserName=="Netscape"&&WNBrowser.browserVersion>=5;var is_safari=WNBrowser.checkUserAgent("safari");var is_ie=agt.indexOf("msie")!=-1&&agt.indexOf("opera")==-1}var wng_backwardsCompatible=1}var WNG_OBJTYPE_TEXTCHANGER="WNTextChanger";var WNG_OBJTYPE_COLUMN="WNColumn";var WNG_OBJTYPE_ADSIZE="WNAdSize";var WNG_OBJTYPE_EMBED="WNEmbed";var WNG_WEATHER_CLASSNAME_TOGGLE="wnWxPrimary";var WNG_WEATHER_CLASSNAME_FORECASTDAY="wnWxDay";var WNG_WEATHERALERTS_CLASSNAME="wnWxAlert";var WNG_WEATHERALERTS_CLASSNAME_ACTIVE="wnWxAlert-active";var WNG_WEATHERALERTS_CLASSNAME_INACTIVE="wnWxAlert-inactive";function wnRenderDate(d,a,c,b){a=a||"%MMM% %DD%, %YYYY% %h%:%mm% %AMPM% %tz%";if(b==true){return(new Date(d)).customFormat(a,c)}else{document.writeln((new Date(d)).customFormat(a,c))}}function wnValidateSearchTerm(g,f){var c="",h=g.qu.value,b=/\<[^\<]*\>/g;var d=function(){h=h.replace(/^\s+|\s+$/g,"");g.qu.value=h};var a=function(k){alert(k)};d();if(h.length<f){if(f>1){c="s"}a("You must enter a search term with at least "+f+" character"+c+"!");return false}if(b.test(h)){a("The search term includes illegal character <>!");return false}return true}var WNTextChanger={create:function(f,d,b,a){var c='<ul id="'+f+'" class="wnTextChanger">';c+='<li class="wnTextChangerOption wnTextChangerSmall"></li>';c+='<li class="wnTextChangerOption wnTextChangerMedium"></li>';c+='<li class="wnTextChangerOption wnTextChangerLarge"></li>';c+='<li class="wnLabel">Text Size</li>';c+="</ul>";$wn("#"+d).append(c);Worldnow.EventMan.registerToEvent(function(){var g={expSmallButton:"li.wnTextChangerOption.wnTextChangerSmall",expMediumButton:"li.wnTextChangerOption.wnTextChangerMedium",expLargeButton:"li.wnTextChangerOption.wnTextChangerLarge",expTargetField:"#WNStoryBody, #WNStoryHeader"};var h=new Worldnow.TextSize();h(g)},"documentready")}};Worldnow.EventMan.event("documentready",function(){var a=("ontouchstart" in document.documentElement)?"touchstart":"click";$(".bylines .byline div.connect").bind(a,function(b){b.stopPropagation()});$(".bylines .byline a.connect").click(function(k){k.preventDefault();k.stopPropagation();var h=$(this).siblings("div.connect"),p=$(this).parent(),c=p.position().left,b=$(window).width(),f=h.width(),o=$(this).height()+1,m=$(".bylines .byline div.connect"),d=h.hasClass("off");var g=b-c-1,n=g-f-10;if(n<0){h.css({left:n,top:o})}else{h.css({left:"0",top:o})}if(d){m.addClass("off");h.removeClass("off");$(document).one(a,function(q){q.preventDefault();q.stopPropagation();$(".bylines .byline div.connect").addClass("off")})}else{m.addClass("off")}return false})});var storyDatelineCorrections=function(){$wn("#WNStoryBody").children().each(function(a){if(a==1&&(this.nodeName=="TABLE"||this.nodeName=="UL"||this.nodeName=="OL")){$wn(this).before("<br/>");$wn(this).after("<br/>")}})};Worldnow.EventMan.event("WNCol23done",storyDatelineCorrections);var displaySizeCorrections=function(){$wn("div[id=WNDS35], div[id=WNDS37]").addClass("wnDSTransparent")};Worldnow.EventMan.event("bodydone",displaySizeCorrections);if(typeof(WNLinksPlus)=="undefined"){var WNLinksPlus=WNClass.createSingleton(function(){var b=70;var a=function(){};a.prototype={writeIframe:function(d,c,g){if(c){var f=WNBrowser.getQueryParametersString(WNBrowser.queryParametersWorldNow,true);if(f){c+=(c.indexOf("?")==-1)?"?":"&";c+=f}}document.writeln(d);if(c){WNElement.reload(g,{url:c})}}};return a})}if(typeof(WNPoll)=="undefined"){var WNPoll=WNClass.createSingleton(function(){var a="Poll";var b="WNPoll";var h="WNPoll";var f="wnPollVoted";var c="actionUpdated";function g(m){var k=$wn("form[name="+h+m+"]");if($wn(k).length==1){return $wn(k)[0]}return null}var d=function(){};d.prototype={setState:function(m){if(WNCookie.get(a+m)){var k=g(m);if(k){$wn(k).parents("ul.wnGroup").addClass(f)}}},submit:function(k){this.updateFormAction(k);return this.validate(k)},validate:function(q){var p=g(q);if(p){var m=p.getElementsByTagName("INPUT");for(var n=0,k=m.length,o;n<k;n++){o=m[n];if(o.checked&&o.getAttribute("type")=="radio"){return true}}}alert("Please select a poll option.");p.focus();return false},updateFormAction:function(q){var n=g(q);if(n&&!n.getAttribute(c)){var m=n.action.split("#");var o=m[0];var k=(o.indexOf("?")==-1)?"?":"&";var p=WNBrowser.getQueryParametersString(WNBrowser.queryParametersWorldNow);if(p){o+=k+p}if(m.length>1){o+="#"+m[1]}n.action=o;n.setAttribute(c,1)}}};return d})}if(typeof(WNMemberCenterManager)=="undefined"){var WNMemberCenterManager={MEMBER_CENTER_WRAPPER_ELEMENT:"DIV",MEMBER_CENTER_WRAPPER_CLASSNAME:"wnMemberCenter",MEMBER_CENTER_LOGGEDIN_CLASSNAME:"wnMemberCenter-loggedIn",MEMBER_CENTER_LOGGEDOUT_CLASSNAME:"wnMemberCenter-loggedOut",MEMBER_CENTER_WRAPPER_REFRESH_ON:"1",MEMBER_CENTER_WRAPPER_REFRESH_OFF:"0",MEMBER_CENTER_COOKIE_SEP:"|",initialized:false,regId:104054,regURL:"",referrerURL:"",finalArray:[],isRegistered:false,userFirstName:"",userUserName:"",userEmailAddress:"",suppliedProfileElements:[],initialized:false,isPageURLEnabled:false,init:function(){var a="init";this.setRegLinkNo();this.setReferrerURL();this.checkIfRegistered();this.checkIfPageURLEnable();this.setRegistrationURL();this.initialized=true},checkIfPageURLEnable:function(){var a="checkIfPageURLEnable";try{if(wng_pageInfo.readableURLenabled=="True"){this.isPageURLEnabled=true}else{this.isPageURLEnabled=false}}catch(b){return false}},setRegistrationURL:function(){var a="setRegistrationURL";try{this.regURL=wng_pageInfo.registrationURL}catch(b){return false}},setRegLinkNo:function(){var a="setRegLinkNo";try{this.regId=wng_pageInfo.registrationId}catch(b){return false}},usernameBackwardComp:function(){var d="usernameBackwardComp";var a=true;var f=WNCookie.get("REGISTRATION");if(f!=null){var c=WNCookie.get("UserName");if(a){a=(c||(c!=""&&c!=null))?true:false}var b=WNCookie.get("EmailAddress");if(a){a=(b||(b!=""&&b!=null))?true:false}}if(!a){WNCookie.remove("FirstName");WNCookie.remove("EmailAddress");WNCookie.remove("UserName");WNCookie.remove("SuppliedProfileFields");WNCookie.remove("REGISTRATION");this.isRegistered=false;this.gotoLoginLink("login")}return a},checkIfRegistered:function(){var f="checkIfRegistered";var g=WNCookie.get("REGISTRATION");if(g!=null){this.isRegistered=true;var c=WNCookie.get("FirstName");var d=WNCookie.get("UserName");var b=WNCookie.get("EmailAddress");var a=WNCookie.get("SuppliedProfileFields");this.userFirstName=(c||(c!=""&&c!=null))?c:"";this.userUserName=(d||(d!=""&&d!=null))?d:"";this.userEmailAddress=b;if(a&&a.indexOf(this.MEMBER_CENTER_COOKIE_SEP)>1){this.suppliedProfileElements=a.split(this.MEMBER_CENTER_COOKIE_SEP)}}},collectMemberBoxes:function(){var b="collectMemberBoxes";var a=[];$wn(this.MEMBER_CENTER_WRAPPER_ELEMENT+" ."+this.MEMBER_CENTER_WRAPPER_CLASSNAME).each(function(){if($wn(this).attr("refresh")==1){if(a.length==0){a[0]=$wn(this)}else{a[a.length+1]=$wn(this)}}});this.finalArray=a;if(this.finalArray.length>0){this.initialized=true}},populateBoxes:function(){var b="populateBoxes";if(!this.initialized){this.init()}if(this.isRegistered){this.collectMemberBoxes();for(var a in this.finalArray){$wn(this.finalArray[a]).removeClass(this.MEMBER_CENTER_LOGGEDOUT_CLASSNAME);$wn(this.finalArray[a]).addClass(this.MEMBER_CENTER_LOGGEDIN_CLASSNAME);if(this.userFirstName&&this.userFirstName!=""){$wn(this.finalArray[a]).find("strong:first").html("Welcome, "+this.userFirstName+"! ")}else{$wn(this.finalArray[a]).find("strong:first").html("Welcome, "+this.userUserName+"! ")}}}},setReferrerURL:function(){var a="setReferrerURL";try{this.referrerURL=location.href}catch(b){this.debug("Could not set referrerURL",b,a)}},getRegistrationLink:function(d){var b="setRegistrationLink";var a="";try{}catch(c){this.debug("Not able to find base URL",c,b)}try{a+="/link/"+this.regId+"/registration?function=manageprofile"}catch(c){this.debug("Not able to find registration ID",c,b);return false}switch(d){case"create":a+="&mode=create";break;case"login":a+="&mode=login";break;case"logout":a="/link/"+this.regId+"/registration?function=logout";break;default:break}a+="&referrer="+escape(this.referrerURL);return a},gotoLoginLink:function(b){var a="gotoLoginLink";window.location=this.getRegistrationLink(b);return false},debug:function(d,c,a){try{if(!c){c="NA"}console.log("Method: "+c+". Message: "+d+". Error: "+a)}catch(b){}}};Worldnow.EventMan.event("bodystart",function(){WNMemberCenterManager.init()});Worldnow.EventMan.event("WNCol23done",function(){WNMemberCenterManager.populateBoxes()});Worldnow.EventMan.event("membercenterupdate",function(){WNMemberCenterManager.init();WNMemberCenterManager.populateBoxes()})}function createSeperator(b){var a=document.createElement("SPAN");a.ClassName="wnSeparator";a.innerText=b;a.textContent=b;return a}function createLink(a,c){var b=document.createElement("A");b.href=a;b.innerText=c;b.textContent=c;return b}var WNEmbedHandler={embed:function(b){var a=new WNEmbedObject(b);a.write()}};function WNEmbedObject(a){this.objParams=new Object();this.objAttrs=new Object();this.embedAttrs=new Object();if(a){a=this.setAutoProperties(a);this.distributeProperties(a)}}WNEmbedObject.prototype={objectType:WNG_OBJTYPE_EMBED,distributeProperties:function(a){if(typeof a=="object"){var c;for(var b in a){c=a[b];switch(b){case"file":this.objAttrs.data=c;this.embedAttrs.src=c;break;case"type":case"width":case"height":this.objAttrs[b]=c;this.embedAttrs[b]=c;break;case"codebase":case"classid":case"id":case"class":case"style":this.objAttrs[b]=c;break;case"name":case"pluginspage":this.embedAttrs[b]=c;break;case"fileParamName":this.objParams[c]=a.file;break;default:this.objParams[b]=c;this.embedAttrs[b]=c}}}},setAutoProperties:function(b){if(b&&b.file){var d=new Object();var g=b.file.toLowerCase();var c=g.lastIndexOf(".");var f;if(c!=-1){f=g.substr(c+1,g.length);if(f.match("swf")){d.type="application/x-shockwave-flash";d.allowscriptaccess="samedomain";d.wmode="transparent";d.classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000";d.codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab";d.fileParamName="movie";d.pluginspage="http://www.adobe.com/go/getflashplayer"}else{if(f.match("wm")){d.type="video/x-ms-wm";d.windowlessvideo="true";d.classid="clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6";d.fileParamName="url";d.pluginspage="http://www.microsoft.com/windows/windowsmedia/player/download/"}else{if(f.match("asx")||f.match("asf")){d.type="video/x-ms-asf";d.windowlessvideo="true";d.classid="clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6";d.fileParamName="url";d.pluginspage="http://www.microsoft.com/windows/windowsmedia/player/download/"}else{if(f.match("qtif")){d.type="image/x-quicktime";d.classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B";d.codebase="http://www.apple.com/qtactivex/qtplugin.cab";d.fileParamName="src";d.pluginspage="http://www.apple.com/quicktime/download/"}else{if(f.match("avi")||f.match("mov")||f.match("qt")){d.type="video/quicktime";d.classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B";d.codebase="http://www.apple.com/qtactivex/qtplugin.cab";d.fileParamName="src";d.pluginspage="http://www.apple.com/quicktime/download/"}else{if(f.match("mp3")){d.type="audio/mpeg";d.classid="clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6";d.fileParamName="url";d.pluginspage="http://www.apple.com/quicktime/download/"}else{if(f.match("mp")){d.type="video/mpeg";d.classid="clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6";d.fileParamName="url";d.pluginspage="http://www.apple.com/quicktime/download/"}else{if(f.match("ra")||f.match("rm")||f.match("rpm")){d.type="audio/x-pn-realaudio";d.classid="clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA";d.fileParamName="src";d.pluginspage="http://www.real.com/player/"}else{if(f.match("dcr")||f.match("dir")||f.match("dxr")){d.type="application/x-director";d.classid="clsid:166B1BCA-3F9C-11CF-8075-444553540000";d.codebase="http://download.macromedia.com/pub/shockwave/cabs/director/sw.cab";d.fileParamName="src";d.pluginspage="http://www.adobe.com/shockwave/download/"}else{if(f.match("wav")){d.type="audio/wav";d.classid="clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6";d.fileParamName="url";d.pluginspage="http://www.apple.com/quicktime/download/"}}}}}}}}}}}for(var a in d){if(!b[a]){b[a]=d[a]}}}return b},write:function(){var b=this.objAttrs;var d=this.objParams;var a=this.embedAttrs;var f="<object";for(var c in b){f+=" "+c+'="'+b[c]+'"'}f+=">";for(var c in d){f+='<param name="'+c+'" value="'+d[c]+'">'}f+="<embed";for(var c in a){f+=" "+c+'="'+a[c]+'"'}f+="></embed></object>";document.write(f)}};function wnWxRegionToggle(c){var f=getElementsByClass(WNG_WEATHER_CLASSNAME_TOGGLE,document.getElementById("WNCol23"),"*");for(var a=0;a<f.length;a++){var b=f[a];b.className=b.className.replace(WNG_WEATHER_CLASSNAME_TOGGLE,"")}var d=c.name;document.getElementById(d).className+=(" "+WNG_WEATHER_CLASSNAME_TOGGLE);c.className+=(" "+WNG_WEATHER_CLASSNAME_TOGGLE);wnWxExtendedForecastEqualHeight()}function wnWxExtendedForecastEqualHeight(){var k=getElementsByClass(WNG_WEATHER_CLASSNAME_TOGGLE,document.getElementById("WNCol23"),"div");var c=0;for(var g=0;g<k.length;g++){var h=k[g];var d=h.parentNode.parentNode.className;if(d.match("Horizontal")){var b=getElementsByClass(WNG_WEATHER_CLASSNAME_FORECASTDAY,h,"div");for(var f=0;f<b.length;f++){var a=b[f];if(a.clientHeight>c){c=a.clientHeight;f=-1}else{a.style.height=c+"px"}}}}}function wnWxAlertInit(){var c=getElementsByClass(WNG_WEATHERALERTS_CLASSNAME,document.getElementById("WNCol23"),"div");for(var b=0;b<c.length;b++){var a=c[b];a.className+=(" "+WNG_WEATHERALERTS_CLASSNAME_INACTIVE)}if(location.hash){wnWxAlertToggle(location.hash)}}function wnWxAlertToggle(a){if(a.href){var b=a.href.split("#").pop()}else{var b=a.split("#").pop()}var c=document.getElementById(b);if(c.className.match(WNG_WEATHERALERTS_CLASSNAME_INACTIVE)){c.className=c.className.replace(WNG_WEATHERALERTS_CLASSNAME_INACTIVE,WNG_WEATHERALERTS_CLASSNAME_ACTIVE)}else{if(c.className.match(WNG_WEATHERALERTS_CLASSNAME_ACTIVE)){c.className=c.className.replace(WNG_WEATHERALERTS_CLASSNAME_ACTIVE,WNG_WEATHERALERTS_CLASSNAME_INACTIVE)}}}function playVideoClip(){displayVideoHelp()}function playVideoClips(){displayVideoHelp()}function checkAllBoxes(strState,formID){var objForm=eval("document."+formID);if(strState=="false"){objForm.reset()}else{for(i=0;i<objForm.length;i++){if(objForm.elements[i].type=="checkbox"){objForm.elements[i].checked=true}}}}function displayVideoHelp(b){self.name=wng_AffiliateName+"CONTENT";if(b=="mac-noPlugin"){var a=window.open(wng_VideoMacHelpPage,"CONTENT")}else{var a=window.open(wng_VideoHelpPage+"&displayHelp=true","CONTENT")}a.focus();window.name="CONTENT"}function getElementsByClass(h,f,a){var d=new Array();if(f==null){f=document}if(a==null){a="*"}var c=f.getElementsByTagName(a);var b=c.length;var g=new RegExp("(?:^|\\s+)"+h+"(?:\\s+|$)");for(i=0,j=0;i<b;i++){if(g.test(c[i].className)){d[j]=c[i];j++}}return d}function wnTrim(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")}function wnXMLString(b){try{xmlDoc=new ActiveXObject("Microsoft.XMLDOM");xmlDoc.async="false";xmlDoc.loadXML(b)}catch(a){try{parser=new DOMParser();xmlDoc=parser.parseFromString(b,"text/xml")}catch(a){}}return xmlDoc}var WNVideoWidgetGallery={ID_PREFIX:"wnVideoGalleryPage",CLASS_NAME_SHOW:"show",current:1,total:0,showBind:function(a){return function(b){return WNVideoWidgetGallery.show(a)}},show:function(c){c=parseInt(c);if(c){if(this.current){this.hide(this.current)}this.current=c;document.getElementById(this.ID_PREFIX+c).className+=" "+this.CLASS_NAME_SHOW;document.getElementById("wnVideoGalleryNav"+c).className="active";var b=document.getElementById("WNVideoGalleryPrev");if(c>1){b.onclick=this.showBind(c-1);b.className=""}else{b.className="inactive"}var a=document.getElementById("WNVideoGalleryNext");if(c<this.total){a.onclick=this.showBind(c+1);a.className=""}else{a.className="inactive"}}return false},hide:function(c){c=parseInt(c);if(c){var b=document.getElementById(this.ID_PREFIX+c),a=" "+b.className,d=a.indexOf(this.CLASS_NAME_SHOW);if(d>-1){a=a.substr(0,d)+a.substr(a.indexOf(" ",d)+1,a.length-1);b.className=(a.indexOf(" ")==0)?a.substr(1):a}document.getElementById("wnVideoGalleryNav"+c).className=""}},initialize:function(){var b=document.getElementById("WNVideoGalleryNavigation").getElementsByTagName("font")[0],n=document.getElementById("WNVideoGalleryPages"),h=(n)?n.childNodes:[],a=this.ID_PREFIX,k="",f=0,m,g;for(var d=0,c=h.length;d<c;d++){m=h[d];g=m.className;if(g&&g.indexOf(a)!=-1){f++;if(f>1){k+='<span class="separator">|</span>'}g=(f==1)?' class="active"':"";k+='<span id="wnVideoGalleryNav'+f+'"'+g+' onclick="return WNVideoWidgetGallery.show('+f+')">'+f+"</span>"}}if(b&&f>0){b.innerHTML=('<span id="WNVideoGalleryPrev" class="inactive">&lt;</span>'+k+'<span id="WNVideoGalleryNext" onclick="return WNVideoWidgetGallery.show('+f+')">&gt;</span>')}this.total=f}};var WNG_OBJTYPE_MENU="WNMenu";var wng_menus={};var Worldnow=(function(b,a,c){var d={menus:[],add:function(f){this.menus.push(f)},report:function(){for(var g=0,f=this.menus.length;g<f;g++){this.menus[g].report()}}};b.MenuMan=d;return b}(Worldnow||{},wn||{},wng_pageInfo||{}));function wnMenuSetup(b,a){if(b){wng_menus[b]=new WNMenu(b,a)}}function WNMenu(h,c){try{if(!h||!wng_sById||!wng_win.RegExp){return}var b=WNElement.getElement(h);if(!b){return}this.root=b;WNClosureTracker.add(this,"root");if(!c||typeof(c)!="object"){c={}}this.id=h;this.setAlignment(c.alignment);this.timeoutDuration=this.toNumber(c.timeoutDuration,this.TIMEOUT_DURATION_DEFAULT);this.highlightActiveNodes=(c.highlightActiveNodes)?true:false;this.level1Height=this.toNumber(c.level1Height,0);this.level1ArrowPadding=this.toNumber(c.level1ArrowPadding,0);this.setLevelBorderWidths(c.levelBorderWidths);this.cornerGraphics=c.cornerGraphics;this.baseHighlightId="";this.removedNodes=[];if(WNBrowser.checkUserAgent("netscape6")){this.isNetscape6=true;WNElement.addClassName(b,"wnNetscape6")}if(WNBrowser.checkUserAgent("msie 6")){this.isInternetExplorer6=true;WNElement.addClassName(b,"wnInternetExplorer6")}this.level1=b.getElementsByTagName("UL")[0];this.level1.depth=1;WNClosureTracker.add(this,"level1");var d=b.getElementsByTagName("DIV");var g=this.LAYOUTS;this.layout=(d[0].className.indexOf(g.HORIZONTAL)!=-1)?g.HORIZONTAL:g.VERTICAL;this.isHorizontal=this.layout==g.HORIZONTAL;this.width=this.WIDTHS[this.layout];var a=this.SUBLEVEL_POSITIONS;this.sublevelPosition=(d[1].className.indexOf(a.DYNAMIC)!=-1)?a.DYNAMIC:a.STATIC;this.isStatic=this.sublevelPosition==a.STATIC;this.isDynamic=!this.isStatic;this.isImage=d[2].className.indexOf(this.ISIMAGE)!=-1;if(WNBrowser.checkUserAgent("msie 5.0")){this.isInternetExplorer5=true;this.isStatic=true;this.isDynamic=false;this.highlightActiveNodes=true}if(this.isHorizontal){this.inheritFrom(WNMenu.Horizontal)}if(this.isDynamic){this.inheritFrom(WNMenu.SublevelDynamic)}else{this.inheritFrom(WNMenu.SublevelStatic)}this.setupMenu()}catch(f){Worldnow.ErrorMan.add("Problem with WnMenu initialization.",f)}}WNMenu.prototype=new WNObject;WNMenu.prototype.manager=Worldnow.MenuMan;WNMenu.prototype.LAYOUTS={HORIZONTAL:"wnHorizontal",VERTICAL:"wnVertical"};WNMenu.prototype.WIDTHS={wnHorizontal:980,wnVertical:130};WNMenu.prototype.SUBLEVEL_POSITIONS={STATIC:"wnStatic",DYNAMIC:"wnDynamic"};WNMenu.prototype.ISIMAGE="wnMenuTypeImage";WNMenu.prototype.ALIGNMENTS={JUSTIFY:"justify",LEFT:"left",RIGHT:"right",CENTER:"center"};WNMenu.prototype.ALIGNMENTS_CLASSNAMES={justify:"wnAlignJustify",left:"wnAlignLeft",right:"wnAlignRight",center:"wnAlignCenter"};WNMenu.prototype.MENULEVELS=3;WNMenu.prototype.PREFIX_LEVEL="level";WNMenu.prototype.NODETYPE="LI";WNMenu.prototype.IDPREFIX_SUBLEVEL="sub";WNMenu.prototype.IDPREFIX_IMAGE="image";WNMenu.prototype.IDPREFIX_SPACER="spacer";WNMenu.prototype.CLASSNAME_ON="wnOn";WNMenu.prototype.CLASSNAME_ACTIVE="wnActive";WNMenu.prototype.CLASSNAME_HIDE="wnHide";WNMenu.prototype.CLASSNAME_FIRSTNODE="wnFirstNode";WNMenu.prototype.CLASSNAME_LOCKED="wnLocked";WNMenu.prototype.CLASSNAME_HIDE_OVERLAP="wnHideOverlapElements";WNMenu.prototype.CLASSNAME_SUBLEVEL_EXISTS="wnHasSublevel";WNMenu.prototype.TIMEOUT_DURATION_DEFAULT=500;WNMenu.prototype.PLAYSTATE_PLAYING=3;WNMenu.prototype.objectType=WNG_OBJTYPE_MENU;WNMenu.prototype.setupMenu=function(){try{this.root.style.display="block";if(this.isHorizontal){this.setupHorizontal()}this.setActiveNode();this.setupNodes();var b=this;this.manager.add(b)}catch(a){Worldnow.ErrorMan.add("Problem with menu setup.",a)}};WNMenu.prototype.setupNodes=function(){var h=this.IDPREFIX_SUBLEVEL;var b=this.IDPREFIX_IMAGE;var x=this.CLASSNAME_SUBLEVEL_EXISTS;var z=this.isImage,c=this.isDynamic,o=this.isStatic,k=this.isHorizontal;var f=this.isNetscape6&&k,u=this.isInternetExplorer5;var B=this.highlightActiveNodes;var t=this.activeNodeId||"";var m=this.activePageTest;var D=this.nodeOver,E=this.nodeOut;var v=this.level1.getElementsByTagName(this.NODETYPE);var r,H,G,A,a,y,q,p,s,d,n,F,g;for(var C=0,w;w=v[C];C++){r=w.id;w.baseId=r.split("-")[0];H=w.parentNode.depth;w.depth=H;G=H==1;A=w.getElementsByTagName("A")[0];w.clickValue=A.getAttribute("href");if(G){if(k||u){WNEvent.addListener(w,"click",this.nodeClick);WNEvent.addListener(A,"click",this.preventClick)}if(z||f){a=0;y=b+r;q=w.getElementsByTagName("IMG");if(f){s=[];p=w.firstChild.firstChild;if(p.firstChild.nodeName=="IMG"){a=1;s.push("left"+y);q[0].id="left"+y}if(p.lastChild.nodeName=="IMG"){s.push("right"+y);q[(z)?a+1:a].id="right"+y}w.cornerImageIds=s}if(z){q[a].id=y;w.childImageId=y}}}n=WNElement.getElement(h+r);if(n){n.depth=H+1;w.hasSublevel=true;WNElement.addClassName(w,x);if(G&&c){F=n.style;g=WNElement.getPosition(w);F.top=(k)?g.y+WNElement.getHeight(w)+"px":g.y+"px";F.left=(k)?g.x+"px":g.x+WNElement.getWidth(w)+"px"}}if(B){this._activateNode(w,G,o,false,t,m)}WNEvent.addListener(w,"mouseover",D,this);WNEvent.addListener(w,"mouseout",E,this)}};WNMenu.prototype._activateNode=function(d,m,n,b,o,c){try{var g=(b)?true:false;if(!g){var a=d.id;if(o&&(a.indexOf(o+"-")!=-1||o.indexOf(d.baseId+"_")!=-1)){g=true}else{if(!this.hasActivePage&&c&&(a+"-").indexOf(c)!=-1){this.hasActivePage=true;g=true;b=true}}}if(!g){return}if(m||n){d.isActive=true;WNElement.addClassName(d,this.CLASSNAME_ON+" "+this.CLASSNAME_ACTIVE)}if(m){var f=d.childImageId;if(f){WNElement.imageSwap(f,WNG_STATE_ON)}if(this.isNetscape6){this.swapCornerGraphics(d,WNG_STATE_ON)}}if(n){this._activateSublevelStatic(d)}if(b&&!m){var h=d.parentNode.parentNode;this._activateNode(h,h.depth==1,n,true)}}catch(k){}};WNMenu.prototype.nodeClick=function(b){try{var d=b.getTarget();var a=this.clickValue;if(d.nodeName!="A"||d.getAttribute("href")==a){wng_win.location.href=a}}catch(c){}return true};WNMenu.prototype.preventClick=function(a){return a.preventDefault()};WNMenu.prototype.swapCornerGraphics=function(c,d){try{var b=c.cornerImageIds;if(!b){return}var a=b.length-1;do{WNElement.imageSwap(b[a],d)}while(a--)}catch(f){}};WNMenu.prototype.setActiveNode=function(){if(!this.highlightActiveNodes){return}var a=wng_win.location.search.split("nav=");if(a.length>1){this.activeNodeId=a[1].split("&")[0]}else{if(wng_win.wng_page_containerId){this.activePageId=wng_page_containerId;this.activePageType=wng_win.wng_page_containerType||"";this.activePageTest="-"+this.activePageType+this.activePageId+"-"}}};WNMenu.prototype.setAlignment=function(c){var a=this.ALIGNMENTS;var b=new RegExp(a.JUSTIFY+"|"+a.LEFT+"|"+a.RIGHT+"|"+a.CENTER);if(!b.test(c)){c=a.JUSTIFY}this.alignment=c};WNMenu.prototype.setLevelBorderWidths=function(d){d=d||{};var f=this.MENULEVELS;var c=this.PREFIX_LEVEL;var a,g;for(var b=0;b<f;b++){a=c+(b+1);g=d[a]||{};g.top=this.toNumber(g.top,0);g.right=this.toNumber(g.right,0);g.bottom=this.toNumber(g.bottom,0);g.left=this.toNumber(g.left,0);d[a]=g}this.levelBorderWidths=d};WNMenu.prototype.getLevelBorderWidth=function(b,a){var b=this.levelBorderWidths[this.PREFIX_LEVEL+b];if(b){return b[a]||0}return 0};WNMenu.prototype.getLevelOffset=function(b,a){var c=this.levelBorderWidths[this.PREFIX_LEVEL+b];if(c){return -(c[a])||0}return 0};WNMenu.prototype.toNumber=function(b,a){try{b=parseInt(b);if(b||b==0){return b}}catch(c){}if(a||a==0){return a}return null};WNMenu.prototype.isFirstNode=function(a){try{var c=a.isFirstNode;if(typeof(c)!="undefined"){return c}c=WNElement.hasClassName(a,this.CLASSNAME_FIRSTNODE);a.isFirstNode=c;return c}catch(b){return false}};if(!WNMenu.SublevelDynamic){WNMenu.SublevelDynamic=new Object()}WNMenu.SublevelDynamic.STATE_HIDE="hide";WNMenu.SublevelDynamic.STATE_SHOW="show";WNMenu.SublevelDynamic.nodeOver=function(a,d){try{var f=WNG_STATE_ON;if(d.isHighlighted){WNBrowser.statusBarToggle(f,d.clickValue);this.checkNodeTimeout(d,a);a.stopPropagation();return true}d.isHighlighted=true;if(d.depth==1){this.baseHighlightId=d.baseId}if(!d.isActive){var c=d.childImageId;if(c){WNElement.imageSwap(c,f)}WNElement.addClassName(d,this.CLASSNAME_ON);if(this.isNetscape6){this.swapCornerGraphics(d,f)}}this.checkNodeTimeout(d,a);if(d.hasSublevel){var b=WNElement.getElement(this.IDPREFIX_SUBLEVEL+d.id);if(b){WNElement.addClassName(b,this.CLASSNAME_ON);this.positionSublevel(b,d);if(b.depth==2){this.overlapElementsToggle(this.STATE_HIDE)}}}WNBrowser.statusBarToggle(f,d.clickValue);a.stopPropagation();return true}catch(g){return true}};WNMenu.SublevelDynamic.nodeOut=function(a,b){try{var d=a.getTarget();if(!d.menuParentId){d.menuParentId=b.id}else{if(d.menuParentId!=b.id){return true}}if(b.depth==1&&!b.hasSublevel){this.nodeClose(a,b);WNBrowser.statusBarToggle(WNG_STATE_OFF);return true}switch(this.isRelatedTarget(a,b)){case 2:break;case 1:this.nodeClose(a,b);break;case 0:this.setNodeTimeout(this.nodeClose.wnbind(this,a,b,true),this.timeoutDuration,b);break}WNBrowser.statusBarToggle(WNG_STATE_OFF);return true}catch(c){return true}};WNMenu.SublevelDynamic.nodeClose=function(b,h,a,g){try{if(g&&g.objectType==WNG_OBJTYPE_EVENT){b=g}if(a){this.nodeTimeout=null}if(h.isHighlighted){if(!h.isActive){var f=h.childImageId;if(f){WNElement.imageSwap(f,WNG_STATE_OFF)}WNElement.removeClassName(h,this.CLASSNAME_ON);if(this.isNetscape6){this.swapCornerGraphics(h,WNG_STATE_OFF)}}if(h.hasSublevel){var c=WNElement.getElement(this.IDPREFIX_SUBLEVEL+h.id);WNElement.removeClassName(c,this.CLASSNAME_ON);if(c.depth==2){this.overlapElementsToggle(this.STATE_SHOW)}}h.isHighlighted=false;if(this.baseHighlightId==h.baseId){this.baseHighlightId=""}}if(h.depth!=1){var d=h.parentNode.parentNode;if(d&&this.isRelatedTarget(b,d)<2){this.nodeClose(b,d)}}}catch(k){}};WNMenu.SublevelDynamic.isRelatedTarget=function(b,d){try{var g=(b.type==b.MOUSEOVER)?b.currentTarget:b.getRelatedTarget();if(!g){return 0}if(g==d){return 2}var k=g.nodeName;var a=this.NODETYPE;var h=d.baseId;while(k&&k!=a&&k!="DIV"&&k!="BODY"){g=g.parentNode;k=(g)?g.nodeName:undefined}if(k!=a){return 0}var c=g.baseId;if(g==d||c.indexOf(h+"_")!=-1){return 2}if(g.depth==1||c.indexOf(this.baseHighlightId+"_")!=-1||h.indexOf(c+"_")!=-1){return 1}return 0}catch(f){return 0}};WNMenu.SublevelDynamic.positionSublevel=function(c,f){var b=WNBrowser.getScrollOffset().y;var d=WNBrowser.getScreenSize();var a=d.width+" "+d.height+" "+b;if(!c.isSetup||c.positionInfo!=a){c.positionInfo=a;c.isSetup=true;if(c.depth==2){this.positionSublevel2(c,f,d,b)}else{this.positionSublevel3(c,f,d,b)}}};WNMenu.SublevelDynamic.positionSublevel2=function(d,o,c,m){var k=d.style;var n=WNElement.getPosition(o);var a=n.y;var b=n.x+this.getLevelOffset(1,"left");if(this.isHorizontal){a+=this.getLevel1Height();var f=WNElement.getWidth(d,true);if((b+f)>c.width){b+=c.width-(b+f);if(b<0){b=0}}}else{if(!this.isFirstNode(o)){a+=this.getLevelOffset(1,"top")}b+=this.width;var h=m+c.height;var g=a+WNElement.getHeight(d,true);if(g>h){a+=h-g}if(a<m){a=m}}k.left=b+"px";k.top=a+"px"};WNMenu.SublevelDynamic.positionSublevel3=function(c,r,b,o){var q=this.isHorizontal;var h=WNElement.getDimensions(c,true);var p=WNElement.getPosition(r);var m=WNElement.getWidth(r)+this.getLevelOffset(2,"left");if(q){var g=p.x;if((m+h.width+g)>b.width&&(-m+g)>-1){m=-m}}c.style.left=m+"px";var a=WNElement.getPosition(r.parentNode).y;var t=p.y;var s=o;if(q){var d=this.getSublevelMinY();if(s<d){s=d}}var k=t-a;if(!this.isFirstNode(r)){k+=this.getLevelOffset(2,"top")}var n=o+b.height;var f=a+k+h.height;if(f>n){k+=n-f}if(k+a<s){k+=s-(k+a)}c.style.top=k+"px"};WNMenu.SublevelDynamic.overlapElementsToggle=function(b){try{if(this.overlapElementsState==b){return}var f=this.setupOverlapElements();var m=f.selectItemsLen;var h=f.iframeSelectItemsLen;var q=f.player;if(!m&&!q&&!h){return}var g=this.STATE_HIDE,o=this.STATE_SHOW;var c=b==g;this.overlapElementsState=(c)?g:o;var a=(c)?"hidden":"visible";if(m){var p=f.selectItems;var k=m-1;do{p[k].style.visibility=a}while(k--)}if(h){var d=f.iframeSelectItems;var k=h-1;do{d[k].style.visibility=a}while(k--)}var q=f.player;if(q&&q.playState==this.PLAYSTATE_PLAYING){q.style.visibility=a;var r=f.mplayer;if(r){r.style.visibility=a}}}catch(n){}};WNMenu.SublevelDynamic.setupOverlapElements=function(){var b=this.overlapElements;if(b){return b}var p=wng_doc.getElementsByTagName("SELECT");var a=[];var g=wng_doc.getElementsByTagName("IFRAME"),n=g.length;if(n){var c,d,m;var f=n-1;do{try{d=g[f];if(d.src.indexOf(location.origin)==0){m=d.contentDocument||d.contentWindow.document;c=m.getElementsByTagName("SELECT"),iframeSelectsLen=c.length;if(iframeSelectsLen){var o=iframeSelectsLen-1;do{a.push(c[o])}while(o--)}}}catch(k){}}while(f--)}var q,r;var h=wng_win.frames.wnsz_47;if(h){q=h.document.getElementById("WMP7");r=h.document.getElementById("divMPlayer")}b={selectItems:p,selectItemsLen:p.length,iframeSelectItems:a,iframeSelectItemsLen:a.length,player:q,mplayer:r};this.overlapElements=b;WNClosureTracker.add(this,"overlapElements");return b};WNMenu.SublevelDynamic.setNodeTimeout=function(b,c,a){this.checkNodeTimeout(a);this.nodeTimeout={timeout:setTimeout(b,c),expression:b,id:a.id,baseId:a.baseId}};WNMenu.SublevelDynamic.clearNodeTimeout=function(b,c){var a=this.nodeTimeout;if(!a){return}clearTimeout(a.timeout);this.nodeTimeout=null;if(!b){return}if(!c){a.expression();return}a.expression(c)};WNMenu.SublevelDynamic.checkNodeTimeout=function(d,g){var c=this.nodeTimeout;if(!c){return}var f=d.baseId,b=c.baseId;var a=f==b||f.indexOf(b+"_")!=-1;this.clearNodeTimeout(!a,g)};if(!WNMenu.SublevelStatic){WNMenu.SublevelStatic=new Object()}WNMenu.SublevelStatic.SUBLEVEL_PREFIX=">";WNMenu.SublevelStatic.nodeOver=function(a,c){try{var d=WNG_STATE_ON;if(!c.isActive){var b=c.childImageId;if(b){WNElement.imageSwap(b,d)}WNElement.addClassName(c,this.CLASSNAME_ON);if(this.isNetscape6){this.swapCornerGraphics(c,d)}}WNBrowser.statusBarToggle(d,c.clickValue)}catch(f){return true}};WNMenu.SublevelStatic.nodeOut=function(a,c){try{var d=WNG_STATE_OFF;if(!c.isActive){var b=c.childImageId;if(b){WNElement.imageSwap(b,d)}WNElement.removeClassName(c,this.CLASSNAME_ON);if(this.isNetscape6){this.swapCornerGraphics(c,d)}}WNBrowser.statusBarToggle(d);return true}catch(f){return true}};WNMenu.SublevelStatic._activateSublevelStatic=function(f){if(!f.hasSublevel){return}var c=WNElement.getElement(this.IDPREFIX_SUBLEVEL+f.id);if(this.isInternetExplorer5){c.style.display="none";return}var p=this.isHorizontal;var k=f.depth;if(p&&k==1){this.level1.parentNode.parentNode.parentNode.style.position="relative";var m=c.style;m.display="block";m.top=this.getLevel1Height()+"px";m.height=WNElement.getHeight(c.getElementsByTagName(this.NODETYPE)[0],true)+"px";var q=WNElement.getHeight(c);if(q){var o=WNElement.getElement(this.IDPREFIX_SPACER+this.id);if(o){o.style.height=q+"px"}}}else{if(!p&&k==2){var b=c.childNodes;var n=wng_doc.createElement("EM");n.appendChild(wng_doc.createTextNode(this.SUBLEVEL_PREFIX));var g,a;for(var h=0,d;d=b[h];h++){if(d.nodeName!=this.NODETYPE){continue}g=d.firstChild.firstChild;a=g.firstChild;g.replaceChild(n.cloneNode(true),a);g.appendChild(a)}}}};if(!WNMenu.Horizontal){WNMenu.Horizontal=new Object()}WNMenu.Horizontal.setupHorizontal=function(){var c=this.level1;var b=this.width;var m=this.NODETYPE;var d=this.CLASSNAME_LOCKED;var y=this.CLASSNAME_HIDE;var f=this.level1ArrowPadding||0;var h=0,n=0,q=[],u=[];var p=false,v,k,r,s,x,A;var g=c.childNodes;for(var w=0,t;t=g[w];w++){if(t.nodeName!=m){continue}if(f){try{v=t.firstElementChild.firstElementChild.firstElementChild.firstElementChild}catch(z){v=t.firstChild.firstChild.firstChild.firstChild}k=v.style;k.paddingRight="0";k.width=(WNElement.getWidth(v)+f)+"px"}s=WNElement.getWidth(t);if(!p&&(s+h>b)){p=true}A=WNElement.hasClassName(t,d);if(p&&!A){WNElement.addClassName(t,y);u.push(t);continue}if(A){t.locked=true;n+=s}h+=s;q.push(w)}this.removedNodes=u;var o=this._setupLockedNodes(g,n,h,b,q,u,y);q=o.displayIndexes;this._setupAlignment(c,g,o.totalWidth,q);if(this.isNetscape6){this._setupNodesForNetscape6(g,q)}this._setupNodeWidths(g,q);u=o.removeNodes;var a=u.length;if(a){var w=a-1;do{c.removeChild(u[w])}while(w--)}};WNMenu.Horizontal._setupLockedNodes=function(k,d,f,g,m,h,b){if(!d||f<=g){return{totalWidth:f,displayIndexes:m,removeNodes:h}}var a;var c=m.length-1;do{a=k[m[c]];if(!a.locked){WNElement.addClassName(a,b);f-=WNElement.getWidth(a,true);h.push(a);m.splice(c,1)}}while(c--&&f>g);if(f>g){c=m.length-1;do{a=k[m[c]];WNElement.addClassName(a,b);f-=WNElement.getWidth(a,true);h.push(a);m.splice(c,1)}while(c--&&f>g)}return{totalWidth:f,displayIndexes:m,removeNodes:h}};WNMenu.Horizontal._setupAlignment=function(k,g,c,b){var a=this.ALIGNMENTS;var h=this.alignment;WNElement.addClassName(this.root,this.ALIGNMENTS_CLASSNAMES[h]);switch(h){case a.JUSTIFY:this._setupAlignmentJustify(g,c,b);break;case a.CENTER:this._setupAlignmentCenter(k,c);break}if(WNBrowser.checkUserAgent("netscape7")||WNBrowser.checkUserAgent("netscape/7")){var d=wng_doc.createElement("BR");d.setAttribute("clear","all");k.appendChild(d);if(h==a.RIGHT||h==a.CENTER){var f=WNElement.getElement("clear"+this.id);f.parentNode.replaceChild(d.cloneNode(true),f);d.parentNode.appendChild(f)}}};WNMenu.Horizontal._setupAlignmentJustify=function(n,k,g){var p=g.length;if(!p){return}var d=this.width-k;if(d<1){return}var b=1,a=extraPadright=extraPadleft=extraNum=0;var f=(d>p)?p:d;if(d>p){var o=Math.floor;var c=b=o(d/p);if(c>1){a=b=o(c/2);if(c%2){b+=1}}extraNum=d%p;if(extraNum){extraPadleft=a;extraPadright=b;if(b>a){extraPadleft+=1}else{extraPadright+=1}}}var h=0,m;do{m=n[g[h]].getElementsByTagName("span")[0].firstChild.firstChild.style;if(extraNum&&h<extraNum){m.paddingLeft=extraPadleft+"px";m.paddingRight=extraPadright+"px"}else{m.paddingLeft=a+"px";m.paddingRight=b+"px"}h++}while(h<f)};WNMenu.Horizontal._setupAlignmentCenter=function(f,a){if(!a){return}var b=this.width-a;if(b<1){return}var c=padright=Math.floor(b/2);if(b%2){padright+=1}var d=f.style;d.paddingLeft=c+"px";d.paddingRight=padright+"px"};WNMenu.Horizontal._setupNodesForNetscape6=function(k,a){var m=this.cornerGraphics;if(!m){return}var d=m.left;if(d){var o=wng_doc.createElement("IMG");o.src=d[0];o.setAttribute("onsrc",d[1]);o.className="wnCorner"}var g=m.right;if(g){var f=wng_doc.createElement("IMG");f.src=g[0];f.setAttribute("onsrc",g[1]);f.className="wnCorner"}var b=this.NODETYPE;var h,n;var c=a.length-1;if(c>-1){do{node=k[a[c]];h=node.firstChild.firstChild;n=h.firstChild;h.replaceChild(o.cloneNode(true),n);h.appendChild(n);h.appendChild(f.cloneNode(true));node.firstChild.style.paddingLeft="0";h.style.paddingRight="0"}while(c--)}};WNMenu.Horizontal._setupNodeWidths=function(d,c){if(!WNBrowser.checkUserAgent("opera")&&!this.isNetscape6){return}var a=c.length-1;if(a>-1){var b;do{b=d[c[a]];b.style.width=WNElement.getWidth(b)+"px"}while(a--)}};WNMenu.Horizontal.getLevel1Height=function(){var a=this.level1Height;if(a){return a}var b=this.NODETYPE;var c=this.level1.firstChild;while(c&&c.nodeName!=b){c=c.nextSibling}var a=WNElement.getHeight(c);this.level1Height=a;return a};WNMenu.Horizontal.getSublevelMinY=function(){var a=this.sublevelMinY;if(!a){a=WNElement.getPosition(this.level1).y+this.getLevel1Height();this.sublevelMinY=a}return a};WNMenu.mobileMenu=function(){var d=$wn("body.wnMobile #MobileMenu"),c,a=$wn("[data-id='menu']"),b=$wn("[data-id='close']");document.getElementById("MobileMenu").selectedIndex=0;d.change(function(){c=$wn(this).val();if(c!==""){window.location.href=c}})};WNMenu.prototype.report=function(){console&&console.log("Menu Item "+this.id+": =====================================");console&&console.log(this);console&&console.log("Omitted menu items: "+(this.removedNodes.length||0));console&&console.log(this.removedNodes)};(function(f,g,a,c){var b=(a.hasOwnProperty("zoomableimages"))?a.zoomableimages["default"].enable:false;if(c.containerType!="S"||!b){g.event("documentready",function(){f(".wnStoryBodyGraphic img").each(function(){f(this).siblings("wnDetails").remove();if(f(this).parent().hasClass("wnFancyBox")){f(this).unwrap()}})});return null}var d={onStart:function(){try{Worldnow.AdMan.hide()}catch(h){}},onClosed:function(){try{Worldnow.AdMan.show()}catch(h){}},zoomOpacity:true,zoomSpeedIn:300,zoomSpeedOut:300,transitionIn:"none",transitionOut:"none",titlePosition:"inside",padding:2};g.event("documentready",function(){f(".wnStoryBodyGraphic img").each(function(){var k=f(this),o=k.attr("src"),n=k.attr("title"),h="storyimage",m=f('<a class="wnFancyBox"></a>').attr({href:o,rel:h,title:n}).hover(function(){f(this).addClass("wnHover")},function(){f(this).removeClass("wnHover")}).fancybox(d);k.wrap(m).before('<div class="wnDetails"><h6 class="wnText">&nbsp;</h6></div>')})})})($wn||jQuery,Worldnow.EventMan,wn,wng_pageInfo);Worldnow.Helpers.debug("Measuring ASI DM_onSegsAvailable callback","RSI_ONSEGS");Worldnow.Helpers.debug("Measuring ASI DM_prepClient callback","RSI_PREPCLIENT");var G_RSI_SEGMENTS=null;function DM_onSegsAvailable(b,a){this.loaded=(this.loaded!="undefined"&&this.loaded)?true:false;if(!this.loaded){var c=new RegExp("E05511","i");if(c.test(a)){window.G_RSI_SEGMENTS=b;Worldnow.CookieMan.set("WN_RSI_SEGMENTS",b.join(","))}}this.loaded=true;Worldnow.Helpers.debug("Measuring ASI DM_onSegsAvailable callback","RSI_ONSEGS")}function DM_prepClient(c,b){var f=wng_pageInfo.affiliateName||"",d=wng_pageInfo.contentClassification||"",a=wng_pageInfo.containerType||"",g=wng_pageInfo.baseUrl||"";b.DM_addEncToLoc("affname",escape(f));b.DM_addEncToLoc("adtag",escape(d));b.DM_addEncToLoc("conttype",escape(a));b.DM_addEncToLoc("baseurl",escape(g));Worldnow.Helpers.debug("Measuring ASI DM_prepClient callback","RSI_PREPCLIENT")}(function(){window.rsi_segs=[],segs_beg=document.cookie.indexOf("asi_segs=");if(segs_beg>=0){segs_beg=document.cookie.indexOf("=",segs_beg)+1;if(segs_beg>0){var a=document.cookie.indexOf(";",segs_beg);if(a==-1){a=document.cookie.length}window.rsi_segs=document.cookie.substring(segs_beg,a).split("|")}}if((window.rsi_segs==null)||(window.rsi_segs.length==0)){window.rsi_segs="null"}})();Worldnow.Helpers.loadJavascriptInline("http://js.revsci.net/gateway/gw.js?csid=E05511&auto=t");var Worldnow=(function(c,f,d){var m=c.Helpers,a=c.EventMan,h=c.SDKModule;var k={blocks:[],register:function(n){this.blocks.push(n)},report:function(o){o=(typeof o==="string"&&o.length>0)?o:null;for(var n=this.blocks.length-1,p;n>=0;n--){p=this.blocks[n];if(!o||(o&&p.type.indexOf(o)>-1)){this.blocks[n].report()}}}};var b=function(n){this.type=null;this.enabled=false;this.exclude=function(){return false};this.options={};this.targets=[];this.logs=[];this.init(n||{});k.register(this)};b.prototype={init:function(o){this._log("Start initialization");var p=o.target||[],n=o.options||{},q=o.eventNames||{};this.type=o.type||"anonymous";this.enabled=o.enabled||false;this.exclude=o.exclude||this.exclude;this.addOptions(n);this.addTarget(p);this.initEvent();return this},initEvent:function(){a.event(this.getEventName("init"),new h(this))},loadEvent:function(){a.event(this.getEventName("load"),new h(this))},enable:function(){this._log("Enabling Block");this.enabled=true;return this},disable:function(){this._log("Disabling Block");this.enabled=false;return this},getOptions:function(){return this.options},addOptions:function(n){this._log("Options added");this._log(n);m.extend(this.options,n);return this},getEventName:function(n){return this.type+"-"+n.toLowerCase()},addTarget:function(n){if(n instanceof Array){this.addTargets(n)}else{this._log("Target added");this._log(n);this.targets.push(n)}return this},addTargets:function(n){for(var o=n.length-1;o>=0;o--){this.addTarget(n[o])}return this},findTarget:function(){this._log("Searching for available DOM targets for "+this.type+" block.");var o,p,n,q;for(p=this.targets.length-1;p>=0;p--){o=this.targets[p];q=o.target;n=o.target=d(q);if(n.length>0){this._log("Found target: "+q);this._log(n);this.addOptions(o);this.addOptions(n.data());return n}}return null},checkSEOTagExclude:function(){var o=d("meta[name='KEYWORDS']"),n=false,p=new RegExp("exclude[ -_]*"+this.type,"i");if(o.length!==0){n=((o.attr("content").search(p))===-1)?false:true}this._log("Exclude SEO tag check came back: "+n);return n},load:function(){this._log("Trying to load "+this.type+" block.");var p=this.checkSEOTagExclude(),n=this.exclude.call(this),q,o;if(this.enabled&&!n&&!p){this._log("Okay to load, block is enabled.");q=this.findTarget();if(q){this.loadEvent()}else{this._log("Not okay to load block, no target found for any of the specified targets.");this._log(this.targets)}}else{this._log("Not okay to load "+this.type+" block, it has been disabled.  Here may be some reasons why.");this._log("enabled: "+this.enabled);this._log("exclude expression: "+n);this._log("seoExclude: "+p)}return this},_log:function(n){this.logs.push(n);return this},report:function(){console.log("Integration Block ("+this.type+")");console.log("-------------------------------------");console.log(this);for(var o=0,n=this.logs.length,p;o<n;o++){p=this.logs[o];if(typeof p=="string"){if(p.indexOf("Warning")==0){console.warn(" "+o+" - "+p)}else{if(p.indexOf("Error")==0){console.error(" "+o+" - "+p)}else{if(p.indexOf("Info")==0){console.info(" "+o+" - "+p)}else{console.log(" "+o+" - "+p)}}}}else{console.log(p)}}console.log("--")}};var g=function(o,n){this.options={};this.cache={};n=n||{};n.parent=o;this.init(n)};g.prototype={init:function(n){n=this.getOptions(n);return this},set:function(n,o){n=this.normalizeKeyName(n);this.options[n]=o;return o},get:function(n){n=this.normalizeKeyName(n);return this.options[n]||null},getOptions:function(n){n=n||{};n=m.extend(this.options,n);return n},getId:function(){return this.parent().attr("id")},selector:function(n){if(typeof n==="string"){if(/^[a-z]/gi.test(n)){n="#"+n}var o=this.normalizeSelector(n);if(!this.cache.hasOwnProperty(o)){this.cache[o]=d(""+n)}return this.cache[o]}return d(n)},find:function(n){var o=this.parent();o.find()},normalizeKeyName:function(n){return n.replace(/[^A-Z]/gi,"")},normalizeSelector:function(n){return n.replace(".","CLASS").replace("#","ID").replace(/[^a-z]/gi,"")},render:function(p){var n=this,o=p||this.get("render")||new Function();o.call(n)},debug:function(n){console.log("===============================");console.log("===============================");console.log("===============================");console.log("===============================");console.log("===============================");console.log("===============================");console.log(n)},parent:function(){var n=this.get("parent");if(n){return this.selector(n)}else{return null}},baseModifier:function(n,o,u,v){v=v||{};var p=this.parent(),s=n,r=s+" "+o,q=[],t=v.textselector||".text";p.find(r).each(function(){var w=d(this);if(typeof u==="string"){w.find(t).text(u)}else{if(typeof u==="function"){u(w,this)}}q.push(w)});return(q.length==1)?q[0]:q},groupModifier:function(n,p,o){return this.baseModifier(".wnGroup",n,p,o)},featureModifier:function(n,o){return this.baseModifier(".wnItem.feature",n,o)},features:function(n){return this.groupModifier(".wnItem.feature",n)},header:function(n){return this.groupModifier(".wnItem.header",n,{textselector:"a .text"})},headlines:function(n){return this.featureModifier(".wnContent.headline",n)},sectiontitles:function(n){return this.featureModifier(".wnContent.sectionTitle",n)},summaryImages:function(n){return this.featureModifier(".wnContent.summaryImage",n)},dotdotdot:function(n,q){var p=this.parent();return p.find(n).dotdotdot(q||{})}};c.CustomizedBlock=g;c.IntegrationBlock=b;c.IntegrationBlockMan=k;return c})(Worldnow||{},wn||{},$wn);var clientType=(wng_pageInfo&&wng_pageInfo.isMobile)?"smartdevice":"desktop",wn=wn||{},contentaddons=wn.contentaddons||{},taboola=contentaddons.taboola||{},taboolaNetworkId=taboola.networkid||"worldnow-network",taboola=taboola[clientType]||{},yieldmo=contentaddons.yieldmo||{},yieldmoPlacements=yieldmo.placementids||{},yieldmo=yieldmo[clientType]||{},socialtools=wn.socialtools||{},facebook=socialtools.facebook||{},facebookcomments=facebook.comments||{},facebookcomments=facebookcomments[clientType]||{},wnaddthis=socialtools.addthistools,addthispubid=wnaddthis.pubid||"ra-4f4badf62558d184",addthissharebuttons=wnaddthis.sharebuttons||{},addthissharebuttons=addthissharebuttons[clientType]||{},addthistrendingcontent=wnaddthis.trendingcontent||{},addthistrendingcontent=addthistrendingcontent[clientType]||{},analytics=wn.analytics||{},chartbeat=analytics.chartbeat||{},analytics_l=analytics.local||{},analytics_g=analytics.global||{},analytics_lg=analytics_l.google||{},analytics_gg=analytics_g.google||{},analytics_lgv=analytics_lg.variables||{},analytics_ggv=analytics_gg.variables||{},googAccountId=(analytics_lg.enabled&&analytics_lgv.accountid)||(analytics_gg.enabled&&analytics_ggv.accountid)||"",geolocation=clientType==="smartdevice";var wnChartbeat=new Worldnow.IntegrationBlock({type:"chartbeat",enabled:(chartbeat.enable&&chartbeat.domain&&chartbeat.id)||false,options:{uid:chartbeat.id||"",useCanonical:true,domain:chartbeat.domain||"",sections:(wng_pageInfo&&wng_pageInfo.headline)||"",authors:(wng_pageInfo&&wng_pageInfo.content_authors)||""},target:[{target:"body"}]});var wnTaboola=new Worldnow.IntegrationBlock({type:"taboola",enabled:taboola.enabled||false,exclude:function(){return window._taboola?true:false},options:{mode:"autosized-generated-2r",css:"clear:both",containerId:"WN_Taboola",containerTextId:"taboola-below-main-column-mix",placement:"bottom-main-column",placementText:"below-main-column",target_type:"mix",article:"auto",flush:true,network:taboolaNetworkId},target:[{target:"#wn_ubTaboola"}]});var wnYieldMo=new Worldnow.IntegrationBlock({type:"yieldmo",enabled:yieldmo.enabled||false,exclude:function(){return window._ym?true:false},options:{placementids:yieldmoPlacements,className:"ym"},target:[{target:"#wn_ubYieldMo"}]});var wnFacebookComments=new Worldnow.IntegrationBlock({type:"facebook-comments",enabled:facebookcomments.enabled||false,exclude:function(){return($("div.fb-comments").length>0)?true:false},options:{url:location.protocol+"//"+wng_pageInfo.baseUrl+wng_pageInfo.permaLink},target:[{target:"#wn_ubFacebookComments"}]});var wnFacebookSDK=new Worldnow.IntegrationBlock({type:"facebook-sdk",enabled:!window.FB&&!window.fbAsyncInit,exclude:function(){var b=$("script#facebook-jssdk"),a=$("meta[property='fb:app_id']");if(a.length>0){this._log("Warning: fb:app_id meta tag is set. This could be a conflict.");var c=this.getOptions();if(c.appId!=a.attr("content")){this._log("Error: FB APP ID DO NOT MATCH. APPID FROM SDK:"+c.appId+" APPID FROM META TAG:"+a.attr("content"))}else{this._log("Warning: FB app ids match.  Okay for now.")}}return(b.length>0)?true:false},options:{appId:"458021237652682",version:"v2.0",status:true,xfbml:true},target:[{target:"body"}]});var wnTwitterWidgets=new Worldnow.IntegrationBlock({type:"twitter-widgets",enabled:!window.twttr,exclude:function(){var a=$("script#twitter-wjs");return(a.length>0)?true:false},options:{},target:[{target:".twitter-follow-button"}]});var wnGooglePlusPlatform=new Worldnow.IntegrationBlock({type:"google-plus-platform",enabled:true,exclude:function(){var a=$("script#goog-platform");return(a.length>0)?true:false},options:{},target:[{target:".g-follow"}]});var wnAddThisShareButtons=new Worldnow.IntegrationBlock({type:"addthis-sharebuttons",enabled:!(addthissharebuttons.enabled===false),options:{pubid:addthispubid,addthishelpers:Worldnow.AddThisHelpers,buttonLayout:'fb:like:layout="button_count"',buttonAction:'fb:like:action="recommend"',data_ga_property:googAccountId,data_track_clickback:true,data_track_textcopy:true,services_exclude:"print,email",services_compact:"facebook,twitter,hotmail,gmail,yahoomail,more",services_expanded:"",ui_theme:"addthis_20x20_style",ui_click:false,ui_delay:0,ui_hover_direction:0,ui_offset_top:0,ui_offset_left:0,ui_use_css:true,ui_use_addressbook:false,ui_508_compliant:false},target:[{target:"#wn_ubAddThisShareButtons"}]});var wnAddThisTrendingContent=new Worldnow.IntegrationBlock({type:"addthis-trendingcontent",enabled:!(addthissharebuttons.enabled===false||addthistrendingcontent.enabled===false),options:{addthishelpers:Worldnow.AddThisHelpers,pubid:addthispubid,feed_title:"Most Shared",feed_type:"shared",feed_period:"day",num_links:5,width:"auto",height:"auto"},target:[{target:"#addthis_content_box"}]});var wnGeolocationCollection=new Worldnow.IntegrationBlock({type:"geolocation",enabled:geolocation&&!Worldnow.CookieMan.get("stop_geolocation")&&(navigator.geolocation&&navigator.geolocation.getCurrentPosition),options:{},target:[{target:"body"}]});Worldnow.EventMan.event("documentready",function(){wnChartbeat.load();wnAddThisShareButtons.load();wnAddThisTrendingContent.load();wnTaboola.load();wnYieldMo.load();wnFacebookComments.load();wnFacebookSDK.load();wnTwitterWidgets.load();wnGooglePlusPlatform.load();wnGeolocationCollection.load()});var ScrollFix=function(c){var b,a;c=c||document.querySelector(c);if(!c){return}c.addEventListener("touchstart",function(d){b=d.touches[0].pageY;a=c.scrollTop;if(a<=0){c.scrollTop=1}if(a+c.offsetHeight>=c.scrollHeight){c.scrollTop=c.scrollHeight-c.offsetHeight-1}},false)};var Worldnow=(function(c,f,g,d){var b={options:{}};var a=function(){var h=h||{};this.init(h)};a.prototype={constructor:a,init:function(p){var k=this,m=p;if(p.getAttribute){for(var o=0,n={},q=objOrElement.attributes,h=q.length;o<h;o++){m[q[o].nodeName]=q[o].nodeValue}m.parent=p}k.options=k.addOptions(m);k.loadWeatherFeature(k);k.onChangeEvent(k);k.onSubmitEvent(k);k.menuCarosuel(k);k.onClickEvent(k);k.onKeyDownEvent(k);k.weatherMobileMenu();k.autoCompleteWeatherLocation(k);k.helpfulMethods.placeholderForIE()},addOptions:function(h){return f.extend(this.options,h)},helpfulMethods:(function(){var o=function(){f("#weatherLocationSearch, .location-search-480-320 input").val("").blur()},k=function(){var q=new UAParser();currentBrowser=q.getBrowser();return currentBrowser},h=(function(){if(k().name=="IE"&&k().major<10){(function(q){if(typeof define==="function"&&define.amd){define(["jquery"],q)}else{if(typeof exports==="object"){module.exports=q(require("jquery"))}else{q(jQuery)}}}(function(q){if(q.support.cors||!q.ajaxTransport||!window.XDomainRequest){return}var t=/^https?:\/\//i;var s=/^get|post$/i;var r=new RegExp("^"+location.protocol,"i");q.ajaxTransport("* text html xml json",function(x,w,v){if(!x.crossDomain||!x.async||!s.test(x.type)||!t.test(x.url)||!r.test(x.url)){return}var u=null;return{send:function(B,A){var z="";var y=(w.dataType||"").toLowerCase();u=new XDomainRequest();if(/^\d+$/.test(w.timeout)){u.timeout=w.timeout}u.ontimeout=function(){A(500,"timeout")};u.onload=function(){var D="Content-Length: "+u.responseText.length+"\r\nContent-Type: "+u.contentType;var C={code:200,message:"success"};var H={text:u.responseText};try{if(y==="html"||/text\/html/i.test(u.contentType)){H.html=u.responseText}else{if(y==="json"||(y!=="text"&&/\/json/i.test(u.contentType))){try{H.json=q.parseJSON(u.responseText)}catch(F){C.code=500;C.message="parseerror"}}else{if(y==="xml"||(y!=="text"&&/\/xml/i.test(u.contentType))){var G=new ActiveXObject("Microsoft.XMLDOM");G.async=false;try{G.loadXML(u.responseText)}catch(F){G=undefined}if(!G||!G.documentElement||G.getElementsByTagName("parsererror").length){C.code=500;C.message="parseerror";throw"Invalid XML: "+u.responseText}H.xml=G}}}}catch(E){throw E}finally{A(C.code,C.message,H,D)}};u.onprogress=function(){};u.onerror=function(){A(500,"error",{text:u.responseText})};if(w.data){z=(q.type(w.data)==="string")?w.data:q.param(w.data)}u.open(x.type,x.url);u.send(z)},abort:function(){if(u){u.abort()}}}})}))}})(),n=function(){if(k().name=="IE"&&k().major<10){f("input[placeholder]").focus(function(){var q=f(this);if(q.val()==q.attr("placeholder")){q.val("");q.removeClass("placeholder")}}).blur(function(){var q=f(this);if(q.val()==""||q.val()==q.attr("placeholder")){q.addClass("placeholder");q.val(q.attr("placeholder"))}}).blur()}},m=function(r,q){return(d.isMobile?r:q)},p=function(){var s=f("#currentLocation .loc").width(),q=f("#changeWeatherLoc").width(),r=s+q+15;f("#weatherLocationDropdown").css("width",r+"px")};return{refreshSearchInput:o,checkIfMobile:m,setWeatherLocationDropdownWidth:p,getBrowser:k,placeholderForIE:n}})(),loadWeatherFeature:function(h){var k=this.options,q="",p=h,m=this.getUrlParameters();var n=f(".weatherDopler img[data-weather-doplar]").attr("src");localStorage.setItem("weatherDopler",n);var o=f(".currentConditionGroup .currentConditionsWrapper .currentWeatherCustomDesc");if(o.length>0){parsedcurrentWeatherCustomDesc=f.parseHTML(f(".currentWeatherCustomDesc").text());if(parsedcurrentWeatherCustomDesc!=null){currentWeatherCustomDescFiltered=parsedcurrentWeatherCustomDesc[0].data.replace(/([~!@#$%^*&()_+=`{}\[\]\|\\;<>,.?])+/g," ");o.html(currentWeatherCustomDescFiltered)}}f("ul#dailyWeatherForecast").easyPaginate({step:p.helpfulMethods.checkIfMobile(4,5),mobile:p.helpfulMethods.checkIfMobile(true,false),loop:true,clickstop:false,pause:2000,firsttab:true});f("ul#hourlyWeatherForecast").easyPaginate({step:p.helpfulMethods.checkIfMobile(6,5),loop:true,clickstop:false,pause:2000,mobile_hourly:p.helpfulMethods.checkIfMobile(true,false)});f(".buoyforecast.wnItem.buoy-1").addClass("show");f(".buoyforecast.wnItem.buoy-1").removeClass("hide");f("#dailyWeatherForecast li").first().addClass("active-tab");f(".group-detail-dailyweather .day1").removeClass("hide").addClass("show");if(d.isMobile){q=f(".wnBlock.mobileweather").find(".defaultWeather")}else{q=f(".wnBlock.weather").find(".defaultWeather")}q.addClass("show");q.removeClass("hide");f(".locations, .location-dropdownlist-480-320").find("#currentLocation .loc").html(f("#weatherLocationDropdown option").first().text());p.helpfulMethods.setWeatherLocationDropdownWidth();if(f(".wnBlock").find("ul#interactiveRadar #wxcMap").length!=0){f.wxc({host:"worldnow",passkey:"23ed8cf926e690c42504a2d439d155b8"});f("#wxcMap").wxcMap({baseMapType:f.wxcMap.HYBRID,center:{lat:f(".wnBlock").find("ul#interactiveRadar .irdata").data("irLat"),lon:f(".wnBlock").find("ul#interactiveRadar .irdata").data("irLong")},zoom:4,eventHandler:p.mapHandler,isWxcListener:true,minZoom:3,maxZoom:18})}},autoCompleteWeatherLocation:function(k){var m=this,h=(f(window).width()<=800)?315:365;f("#weatherLocationSearch, .location-search-480-320 input").autocomplete("http://geo.worldnow.com/v1.0/weather/GetWeatherCityData",{minChars_zip:3,minChars_city:4,delay:200,lineSeparator:"|",cellSeparator:"#",width:h,weather:true,formatData:function(q,o){var n="";for(var p=0;p<q.length;p++){var r=q[p];if(n.length>0){n+=o.lineSeparator}n+=r.name+o.cellSeparator+r.value}return n},formatItem:function(p,q,o,n){p.innerHTML=q[0];p.setAttribute("city-zip",q[1]);return p},onItemSelect:function(o){var n=o.getAttribute("city-zip");m.reloadWeather("http://data-services.wsi.com/200904-01/576347879/Weather/Report/"+n,m);return true}})},mapHandler:function(k,h){switch(k){case f.wxcMap.MAP_LOAD:f("#wxcMap").wxcMap("addLayer",f.wxcMap.RADAR);break;case f.wxcMap.MAP_TYPE_CHANGED:break;case f.wxcMap.MAP_CLICK:break;case f.wxcMap.MAP_DBLCLICK:break;case f.wxcMap.MAP_MOUSEDOWN:break;case f.wxcMap.MAP_VIEW_RESET:break;case f.wxcMap.MAP_MOVE_START:break;case f.wxcMap.MAP_MOVE:break;case f.wxcMap.MAP_MOVE_END:break;case f.wxcMap.MAP_DRAG_START:break;case f.wxcMap.MAP_DRAG:break;case f.wxcMap.MAP_DRAG_END:break;case f.wxcMap.MAP_ZOOM_END:break;case f.wxcMap.MAP_LAYER_ADD:break;case f.wxcMap.MAP_LAYER_REMOVE:break;case f.wxcMap.MAP_LOCATION_FOUND:break;case f.wxcMap.MAP_LOCATION_ERROR:break;case f.wxcMap.MAP_LAYER_INVENTORY_LOAD_BEGIN:break;case f.wxcMap.MAP_LAYER_INVENTORY_LOAD_COMPLETE:break;case f.wxcMap.MAP_ERROR:break;case f.wxcMap.MAP_LAYER_STATE_CHANGED:break;case f.wxcMap.MAP_LAYER_FRAME_CHANGED:break;case f.wxcMap.MAP_LAYER_KML_LOAD_BEGIN:break;case f.wxcMap.MAP_LAYER_KML_LOAD_COMPLETE:break;case f.wxcMap.MAP_LAYER_ANIMATION_LOAD_BEGIN:break;case f.wxcMap.MAP_LAYER_ANIMATION_LOAD_PROGRESS:break;case f.wxcMap.MAP_LAYER_ANIMATION_LOAD_COMPLETE:break;case f.wxcMap.MAP_LAYER_ACTIVATED:break;case f.wxcMap.MAP_LAYER_DEACTIVATED:break;case f.wxcMap.MAP_DATA_REFRESH_BEGIN:break;case f.wxcMap.MAP_DATA_REFRESH_COMPLETE:break;case f.wxcMap.MAP_LAYER_OUT_OF_ZOOM_RANGE:break;case f.wxcMap.MAP_LAYER_INTO_ZOOM_RANGE:break}},menuCarosuel:function(){var m=f("#owl-demo"),k=f("#owl-demo-main"),o=f("#owl-demo .item"),h=f("#owl-demo-main .item");c.Helpers.debug("Additional function for OwlCarousel","setOwlCarouselOptions");function n(v,u){var q=v.length,s=new Object(),r=f("#WNCol4FeatureBlock"),t=function(){s.touchDrag=false,s.mouseDrag=false,s.pullDrag=false;return s};if(u){var p=3;if(r.length==0&&q>3){p=4}if(q>0&&q<=p){s.items=p;s.nav=false;t()}else{s.items=p;s.nav=true}return s}if(q>0&&q<=4){s.items=4;s.nav=false;t()}else{if(q>4&&q<=8){s.items=v.length;s.nav=false;t()}else{s.items=8;s.nav=true}}s.margin=2;return s}c.Helpers.debug("Additional function for OwlCarousel","setOwlCarouselOptions");if(m.length>0){m.owlCarousel(n(o,1))}if(k.length>0){k.owlCarousel(n(h))}},reloadWeather:function(p,s){var y=f(".wnBlock.weather"),B=f(".currentConditionGroup, #WNCol4FeatureBlock, #WNCol2"),n=f(".currentConditionGroup #geoLocationCoordinates"),A=f(".dailyWeather"),C=f(".dailyMobileWeather"),h=f(".dailyWeather #geoLocationCoordinates"),m=B.find(".wnItem.currentWeather"),t=B.find(".wnItem.currentWeatherDescription"),r=B.find(".wnItem.currentWeatherData"),u=A.find("#dailyWeatherForecast"),x=C.find("#dailyWeatherForecast"),o=C.find("#dailyWeatherForecast-480-320"),v=A.find(".group-detail-dailyweather"),z=C.find(".group-detail-dailyweather"),w=A.find(".geoLocation-footer"),q="",D=s,k=D.getUrlParameters();f.ajax({url:p,context:document.body,error:function(F,G,E){console.log(E)},dataType:"xml"}).success(function(W){if(f(W).find("Error").length==1){var Q=f(W).find("Error").text();alert(Q)}else{f(".wn-prev-button, .wn-next-button").remove();f(".wnItem.currentWeather, .wnItem.currentWeatherDescription, .wnItem.currentWeatherData, .group-dailyweather, .group-detail-dailyweather, .geoLocation-footer").html("");var G=f(W),V=G.find("City"),U=G.find("CurrentObservation"),O=G.find("DailyForecast").find("Day:lt(8)"),R=G.find("HourlyForecast").find("Hour:lt(8)"),T=G.find("DailyForecast").find("Day:eq(0)"),F=G.find("HourlyForecast").find("Hour:eq(0)"),J=V.attr("Name"),S=V.attr("StateAbbr"),I="",N=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"],M=wnRenderDate(U.attr("ReportTime"),"%MMM% %DD%, %YYYY% %h%:%mm% %AMPM% %tz%",0,true);B.removeClass("hide");B.addClass("show");I+='<li class="wnItem geoLocation-wnDate"><span class="wnContent geoLocationCoord">  <span>Lat: '+V.attr("Latitude")+" </span> | <span>Long: "+V.attr("Longitude")+" </span></span>";I+='<span class="timestamps wnDate"><label class="wnContent timestamp"> Updated: </label><span class="wnContent weathertimestamp">'+M+"</span></span>";I+="</li>";f(".locations").find("#currentLocation .loc").html(J+", "+S);s.helpfulMethods.setWeatherLocationDropdownWidth();function P(Y){var X=Y,Z;if(Y.charAt(0)==="0"){X=Y.slice(1)}Z=Y.slice(-2);X=X.slice(0,X.indexOf(Z));X=X.slice(0,X.lastIndexOf(":"));X=X+" "+Z;return X}function E(){var Z=R.length,ag="",ae="",ab="",ah="",af="",ad="";if(typeof(T.attr("PhraseDay"))!="undefined"){ad=(T.attr("PhraseDay").length>1)?T.attr("PhraseDay"):T.attr("PhraseNight")}ag+='<div class="weather-icon">';ag+='<img src="'+wng_pageInfo.imageDomain+"/images/static/gfx/wx_"+U.attr("IconCode")+'.png"/>';ag+='<div class="todaysWeatherDesc" data-weather-desc>'+U.attr("Sky")+"</div>";ag+="</div>";ag+='<div class="todaysTemperatureInfo">';ag+='<div class="todaysTemperatureInfo-block-1"><div class="fahrenheit" data-weather-tempfah>'+U.attr("TempF")+"</div>";ag+='<div class="high-and-low"><div class="high"><span data-weather-temphigh><strong class="temp">'+T.attr("HiTempF")+'<span>&deg;</span></strong><img src="'+wng_pageInfo.imageDomain+'/images/static/gfx/hightemp.png"></span></div>';ag+='<div class="low"><span data-weather-templow>'+T.attr("LoTempF")+'<span>&deg;</span><img src="'+wng_pageInfo.imageDomain+'/images/static/gfx/lowtemp.png"></span></div></div></div>';ag+='<div class="todaysTemperatureInfo-block-2"><div class="weatherfeelslike" data-weather-feelslike>Feels Like: '+U.attr("FeelsLikeF")+"<span>&deg;</span></div>";ag+='<div class="precip" data-weather-precip><span><img src="'+wng_pageInfo.imageDomain+'/images/static/gfx/precipitation.png"/>'+T.attr("PrecipChance")+"</span></div>";ag+="</div></div>";ag+='<div class="weatherDopler">';ag+='<img src="'+localStorage.getItem("weatherDopler")+'">';ag+="</div>";ae+='<div class="currentWeatherCustomDesc">'+ad+"</div>";ab+='<div class="weatherinfo-border">';ab+='<ul class="weather-stats-left">';ab+='<li data-weather-windspeed data-weather-winddirection><span class="name">Wind:</span><span class="value">'+U.attr("WndDirCardinal")+"<span> at </span>"+U.attr("WndSpdMph")+" <span>mph</span></span></li>";ab+='<li data-weather-humidity><span class="name">Humidity:</span><span class="value">'+F.attr("RelHumidity")+"<span>&#37;</span></span></li>";ab+='<li data-weather-uvindex><span class="name">UV Index:</span><span class="value">'+T.attr("UvIdx")+"</span></li>";ab+="</ul>";ab+='<ul class="weather-stats-right">';ab+='<li data-weather-sunrise><span class="name">Sunrise:</span><span class="value"><img data-weather-sunrise src="'+wng_pageInfo.imageDomain+'/images/static/gfx/sunrise.png">'+P(T.attr("Sunrise"))+"</span></li>";ab+='<li data-weather-sunset><span class="name">Sunset:</span><span class="value"><img data-weather-sunrise src="'+wng_pageInfo.imageDomain+'/images/static/gfx/sunset.png">'+P(T.attr("Sunset"))+"</span></li>";ab+='<li data-weather-moonrise><span class="name">Moonrise:</span><span class="value">'+P(T.attr("Moonrise"))+"</span></li>";ab+='<li data-weather-moonset><span class="name">Moonset:</span><span class="value">'+P(T.attr("Moonset"))+"</span></li>";ab+='<li data-weather-moonphase><span class="name">Moonphase:</span><span class="value"><img src="'+wng_pageInfo.imageDomain+'/images/static/gfx/moon_waxingcrescent.png">'+T.attr("MoonPhaseText")+"</span></li>";ab+="</ul>";m.append(ag);t.append(ae);r.append(ab);var ac=s.helpfulMethods.checkIfMobile("mobilehourlyWeather","hourlyWeather"),aa=s.helpfulMethods.checkIfMobile("mobilehourlyInfo","hourlyInfo"),Y=s.helpfulMethods.checkIfMobile("bg-hourlyUnique","hourlyInfoWrapper"),X=s.helpfulMethods.checkIfMobile(6,5);ah+='<ul id="hourlyWeatherForecast" class="wnGroup  '+ac+" defaultWeather id-"+k+'">';R.each(function(ak){var an=f(this),al=new Date(an.attr("ValidDateLocal")),ai=al.getHours(),aj=al.getMinutes(),ao="";if(aj<10){aj="0"+aj}var am="AM";if(ai>=12){am="PM";ai=ai-12}if(ai==0){ai=12}var ao=ai+" "+am;if(ak===0){firstClass="active"}af+='<li id="hourly-'+(ak+1)+'" class="'+aa+'"><div class="'+Y+'">';af+='<div class="hour row1">';af+='<div class="current-hour cell1" data-weather-hourlytime>';af+="<strong>"+ao+"</strong>";af+="</div>";af+='<div class="desc-image cell1">';af+='<img data-weather-hourlyimage src="'+wng_pageInfo.imageDomain+"/images/static/gfx/wx_"+an.attr("IconCode")+'.png">';af+="</div>";af+='<div data-weather-hourlydesc class="desc cell1">'+an.attr("SkyMedium")+"</div>";af+="</div>";af+='<div class="hour-details row2">';af+='<div class="tempF cell2" data-weather-hourlytempfah>'+an.attr("TempF")+"<span>&deg;</span></div>";af+='<div class="precipitation cell2">';af+='<span><img data-hourly-precipimage src="'+wng_pageInfo.imageDomain+'/images/static/gfx/precipitation.png"></span>'+an.attr("PrecipChance");af+="<span>&#37;</span></div>";af+="</div>";af+='<div class="hour-desc row3"><div class="hour-desc-wrapper">';af+='<div class="winddirection cell3 clearfix" data-weather-hourlywinddirection><span class="name">Wind: </span><span class="value">'+an.attr("WndDirCardinal")+" at <br/>"+an.attr("WndSpdMph")+" mph</span></div>";af+='<div class="humidity cell3 clearfix" data-weather-hourlyhumidity><span class="name">Humidity: </span><span class="value">'+an.attr("RelHumidity")+"&#37;</span></div>";af+="</div></div></div>";af+="</li>"});ah+="</ul>";B.find("#hourlyWeatherForecast").remove();f(".hourlyWeatherForecastWrapper").append(f(ah).append(af));B.find(n).find(".geoLocation-wnDate").remove();B.find(n).append(I);if(y.find(B).length<=0&&y.parents("#WNCol2").length!=1){B=f('<div class="currentConditionGroup"></div>');m=f('<li class="wnItem currentWeather"></li>');t=f('<li class="wnItem currentWeatherDescription"></li>');r=f('<li class="wnItem currentWeatherData"></li>');$currentULWrapper=f('<div class="currentConditionsWrapper"></div>');$currentULTag=f('<ul class="wnGroup currentConditions defaultWeather show"></ul>');n=f('<ul id="geoLocationCoordinates" class="wnGroup geolocation"></ul>');$currentULTag.append(m.append(ag),t.append(ae),r.append(ab));B.append($currentULWrapper.append($currentULTag));y.append(B);B.append(f(ah).append(af));B.append(I);if(y.find("#manualWeatherForecast").length>0){y.find("#manualWeatherForecast").remove()}}f("ul#hourlyWeatherForecast").easyPaginate({step:X,mobile:s.helpfulMethods.checkIfMobile(true,false),loop:true,clickstop:false,pause:2000,controls:"pagination1",mobile_hourly:s.helpfulMethods.checkIfMobile(true,false)});return}function H(){var Y=O.length,X="",Z="",aa="";O.each(function(ad){var af=f(this),ag=new Date(af.attr("ValidDateUtc")),ab="",ac="",ae="";if(ad===0){ab="active-tab";ae="show";ac="Today"}else{ae="hide";ac=af.attr("DayOfWk").substr(0,3)}X+='<li class="wnContent dailyWeatherConditions '+ab+"  day"+ad+'"data-daynum="'+af.attr("DayNum")+'" onclick="javascript : changeDailyWeatherDescription.changeDescription ('+ad+')">';X+='<div class="bg-unique">';X+='<div class="row-1"><div  class="dayName" data-dailyweather-day>'+af.attr("DayOfWk")+"</div>";X+='<div class="dayNameDayNum" data-dailyweather-date>'+N[ag.getMonth()]+"&nbsp;"+ag.getDate()+"</div></div>";X+='<div class="icon sevenDayImage row-2"><img src="'+wng_pageInfo.imageDomain+"/images/static/gfx/wx_"+af.attr("IconCode")+'.png"/></div>';X+='<div class=" row-3"><div class="dayshortdescription" data-dailyweather-shortdescription>'+af.attr("SkyText")+"</div>";X+='<div class="tempF-group"><span class="tempFah" data-dailyweather-temphigh>'+af.attr("HiTempF")+"</span>";X+='<span class="lowFah" data-dailyweather-templow>'+af.attr("LoTempF")+"</span></div>";X+='<div class="sevenDayPrecip" data-dailyweather-precip><img data-dailyweather-precipimage src="'+wng_pageInfo.imageDomain+'/images/static/gfx/precipitation.png"/>'+af.attr("PrecipChance")+"<span>&#37;</span></div>";X+="</div>";X+="</div>";X+="</li>";Z+='<li class="wnItem mobiledailyInfo ">';Z+='<div class="bg-dailyUnique">';Z+='<div class="row-1"><div  class="hour cell1" data-dailyweather-day>'+ac+" - "+N[ag.getMonth()]+"&nbsp;"+ag.getDate()+"</div>";Z+='<div class="desc-image cell1"><img data-dailyweather-image src="'+wng_pageInfo.imageDomain+"/images/static/gfx/wx_"+af.attr("IconCode")+'.png"/></div>';Z+='<div class="desc cell1"><div class="dayshortdescription" data-dailyweather-temphigh>'+af.attr("SkyText")+"</div></div></div>";Z+='<div class="row-2">';Z+='<div class="tempF cell2"><span class="highFah" data-dailyweather-temphigh>'+af.attr("HiTempF")+"</span>";Z+='<span class="lowFah" data-dailyweather-templow>'+af.attr("LoTempF")+"</span></div>";Z+='<div class="precipitation cell2" data-dailyweather-precip><img data-dailyweather-precipimage src="'+wng_pageInfo.imageDomain+'/images/static/gfx/precipitation.png"/>'+af.attr("PrecipChance")+"<span>&#37;</span></div>";Z+="</div>";Z+='<div class="row-3">';Z+='<div class="winddirection cell3" data-dailyweather-winddirection><span class="name">Wind: </span><span class="value">'+af.attr("WndDirCardinal")+"<span> at</span> <br>"+af.attr("WndSpdMph")+" mph</span></span>";Z+='<div class="humidity cell3" data-dailyweather-humidity><span class="name">Humidity: </span><span class="value">'+af.attr("RelHumidity")+"<span>&#37;</span></span></div>";Z+="</div>";Z+="</li>";aa+='<div class="wnGroup bg-common '+ae+" day"+ad+'">';aa+='<div id="detailDay'+ad+'" class="detail-day active" data-daynum="'+af.attr("DayNum")+'">';aa+='<div class="detail">';aa+='<div class="column first">';aa+='<div class="wind-speed clearfix"><span class="name">Wind:</span><span class="value">'+af.attr("WndDirCardinal")+"<span> at</span> "+af.attr("WndSpdMph")+" mph</span></div>";aa+='<div class="humidity clearfix"><span class="name">Humidity:</span><span class="value">'+af.attr("RelHumidity")+"<span>&#37;</span></span></div>";aa+='<div class="uv clearfix"><span class="name">UV Index:</span><span class="value">'+af.attr("UvIdx")+"&nbsp;"+af.attr("UvDescr")+"</span></div>";aa+="</div>";aa+='<div class="column second">';aa+='<div class="sunrise clearfix"><span class="name">Sunrise:</span><span class="value"><img data-dailyweather-sunriseimage src="'+wng_pageInfo.imageDomain+'/images/static/gfx/sunrise.png"/>'+P(af.attr("Sunrise"))+"</span></div>";aa+='<div class="sunset clearfix"><span class="name">Sunset:</span><span class="value"><img data-dailyweather-sunsetimage src="'+wng_pageInfo.imageDomain+'/images/static/gfx/sunset.png"/>'+P(af.attr("Sunset"))+"</span></div>";aa+='<div class="moonrise clearfix"><span class="name">Moonrise:</span><span class="value">'+P(af.attr("Moonrise"))+"</span></div>";aa+='<div class="moonset clearfix"><span class="name">Moonset:</span><span class="value">'+P(af.attr("Moonset"))+"</span></div>";aa+='<div class="moonphrase"><span class="name">Moonphase:</span><span class="value"><img data-dailyweather-moonphraseimage src="'+wng_pageInfo.imageDomain+'/images/static/gfx/moon_waxingcrescent.png"/>'+af.attr("MoonPhaseText")+"</span></div>";aa+="</div>";aa+='<div class="column last">';aa+='<div class="day-phrase clearfix"><span class="name">Day:</span><span class="value">'+af.attr("PhraseDay")+"</span></div>";aa+='<div class="night-phrase clearfix"><span class="name">Night:</span><span class="value">'+af.attr("PhraseNight")+"</span></div>";aa+="</div>";aa+="</div>";aa+="</div>";aa+="</div>"});s.helpfulMethods.checkIfMobile(x.append(X),u.append(X));s.helpfulMethods.checkIfMobile(o.append(Z));s.helpfulMethods.checkIfMobile(z.append(aa),v.append(aa));A.find(h).find(".geoLocation-wnDate").remove();A.find(h).append(I);f("ul#dailyWeatherForecast").easyPaginate({step:s.helpfulMethods.checkIfMobile(4,5),mobile:s.helpfulMethods.checkIfMobile(true,false),loop:true,clickstop:false,pause:2000,firsttab:true,controls:"pagination2"});return}function K(){var Z=f(".currentConditions.abbreviated"),ad=f(".currentConditions.abbreviated .currentWeather"),aa=f(".currentConditions.abbreviated .hourlyForecast-abbreviated"),ac="",ab="",X="",Y=1;ac+='<div class="weather-icon">';ac+='<img src="'+wng_pageInfo.imageDomain+"/images/static/gfx/wx_"+U.attr("IconCode")+'.png"/>';ac+='<div class="todaysWeatherDesc" data-weather-desc>'+U.attr("Sky")+"</div>";ac+="</div>";ac+='<div class="todaysTemperatureInfo">';ac+='<div class="todaysTemperatureInfo-block-1"><div class="fahrenheit" data-weather-tempfah>'+U.attr("TempF")+"</div>";ac+='<div class="high-and-low"><div class="high"><span data-weather-temphigh><strong class="temp">'+T.attr("HiTempF")+'<span>&deg;</span></strong></span><img src="'+wng_pageInfo.imageDomain+'/images/static/gfx/hightemp.png"></div>';ac+='<div class="low"><span data-weather-templow>'+T.attr("LoTempF")+"<span>&deg;</span></span>";ac+='<img src="'+wng_pageInfo.imageDomain+'/images/static/gfx/lowtemp.png"></div></div></div>';ac+='<div class="todaysTemperatureInfo-block-2"><div class="weatherfeelslike" data-weather-feelslike>Feels Like: '+U.attr("FeelsLikeF")+"<span>&deg;</span></div>";ac+='<div class="precip" data-weather-precip><img src="'+wng_pageInfo.imageDomain+'/images/static/gfx/precipitation.png"/>'+T.attr("PrecipChance")+"</div>";ac+="</div></div>";ac+='<div class="weatherDopler">';ac+='<img src="'+wng_pageInfo.imageDomain+"/images/static/gfx/wx_"+U.attr("IconCode")+'.png">';ac+="</div>";ab+='<div class="hourlyForecast-abbreviated-block-wrapper">';R.each(function(ag){var aj=f(this),ah=new Date(aj.attr("ValidDateLocal")),ae=ah.getHours(),af=ah.getMinutes(),ak="";if(af<10){af="0"+af}var ai="AM";if(ae>=12){ai="PM";ae=ae-12}if(ae==0){ae=12}var ak=ae+" "+ai;if(ag===0){firstClass="active"}X+='<div class="hourlyForecast-abbreviated-block item-'+Y+'">';X+='<div class="current-hour" data-weather-hourlytime="">'+ak+"</div>";X+='<div class="desc-image">';X+='<img data-weather-hourlyimage src="'+wng_pageInfo.imageDomain+"/images/static/gfx/wx_"+aj.attr("IconCode")+'.png">';X+="</div>";X+='<div class="tempF" data-weather-hourlytempfah>'+aj.attr("TempF")+"<span>&deg;</span></div>";X+="</div>";Y++;if(Y==5){return false}});ab+="</div>";ad.append(ac);aa.html(f(ab).append(X))}if(f(".currentConditions").hasClass("abbreviated")){K();s.helpfulMethods.refreshSearchInput();return}s.helpfulMethods.refreshSearchInput();E();H()}});return},getUrlParameters:function(){var m=window.location.href,h=m.split("/"),k=h[4];if(k>0){return k}else{k=h[3];return k}},onChangeEvent:function(h){var k=h;f("#weatherLocationDropdown").change(function(m){k.reloadWeather("http://data-services.wsi.com/200904-01/576347879/Weather/Report/"+f("#weatherLocationDropdown").val(),k);var n=f("#weatherLocationDropdown, .location-dropdownlist-480-320 #weatherLocationDropdown");n[0].size=0;return})},onClickEvent:function(h){var k=h;f("#changeWeatherLoc").click(function(m){var n=f("#changeWeatherLoc");n.focus();n[0].size=2;return})},onSubmitEvent:function(h){var k=h;f("#weatherLocationSearchSubmit, #weatherLocationSearchSubmit-480-320").click(function(n){n.preventDefault();if(f(".ac_results").css("display")=="block"){return false}var m=/^(\d{5})?$/,p=/^[a-zA-Z-\s]+$/,o=f("#weatherLocationSearch").val();if(o.length<1){alert("Please enter a 5-digit zip code or city name.");return}if(!m.test(o)&&!p.test(o)){alert("Please enter a 5-digit zip code or city name.");return}k.reloadWeather("http://data-services.wsi.com/200904-01/576347879/Weather/Report/"+o,k);return})},onKeyDownEvent:function(h){f("#weatherLocationSearch").keydown(function(k){if(f(this).is(":focus")&&k.keyCode==13){f("#weatherLocationSearchSubmit").click()}})},weatherMobileMenu:function(){var n=$wn("body.wnMobile #weatherMobileMenuOptions"),m,h=$wn("[data-id='menu']"),k=$wn("[data-id='close']");n.prop("selectedIndex",0);n.change(function(){m=$wn(this).val();if(m!==""){window.location.href=m}})}};c.OptimusBlock=a;c.OptimusBlockMan=b;c.EventMan.event("documentready",function(){var h=new c.OptimusBlock()});return c}(Worldnow||{},$wn||jQuery,Worldnow.EventMan,wng_pageInfo||{}));var changeDailyWeatherDescription={};changeDailyWeatherDescription.changeDescription=function(b){$("#dailyWeatherForecast li.dailyWeatherConditions").removeClass("active-tab");$("#dailyWeatherForecast li.dailyWeatherConditions.day"+b).addClass("active-tab");for(var a=0;a<=10;a++){if(b==a){$(".bg-common.day"+a).addClass("show");$(".bg-common.day"+a).removeClass("hide")}else{$(".bg-common.day"+a).removeClass("show");$(".bg-common.day"+a).addClass("hide")}}};var changeTempDegrees={};changeTempDegrees.changeDegreeDescription=function(a){if(a=="F"){$(".historicalaverage .fahrenheit").addClass("show");$(".historicalaverage .celcius").addClass("hide");$(".historicalaverage .fahrenheit").removeClass("hide");$(".historicalaverage .celcius").removeClass("show")}else{$(".historicalaverage .fahrenheit").removeClass("show");$(".historicalaverage .celcius").removeClass("hide");$(".historicalaverage .fahrenheit").addClass("hide");$(".historicalaverage .celcius").addClass("show")}};var changeBuoyReportDesc={};changeBuoyReportDesc.changeBuoyReport=function(a){for(var b=1;b<6;b++){if(a==b){$(".buoyforecast.wnItem.buoy-"+b).addClass("show");$(".buoyforecast.wnItem.buoy-"+b).removeClass("hide")}else{$(".buoyforecast.wnItem.buoy-"+b).removeClass("show");$(".buoyforecast.wnItem.buoy-"+b).addClass("hide")}}};if(!window.Silverlight){window.Silverlight={}}Silverlight._silverlightCount=0;Silverlight.fwlinkRoot="http://go2.microsoft.com/fwlink/?LinkID=";Silverlight.onGetSilverlight=null;Silverlight.onSilverlightInstalled=function(){window.location.reload(false)};Silverlight.isInstalled=function(n){var p=false;var a=null;try{var g=null;try{g=new ActiveXObject("AgControl.AgControl");if(n==null){p=true}else{if(g.IsVersionSupported(n)){p=true}}g=null}catch(m){var h=navigator.plugins["Silverlight Plug-In"];if(h){if(n===null){p=true}else{var b=h.description;if(b==="1.0.30226.2"){b="2.0.30226.2"}var c=b.split(".");while(c.length>3){c.pop()}while(c.length<4){c.push(0)}var d=n.split(".");while(d.length>4){d.pop()}var o;var f;var k=0;do{o=parseInt(d[k]);f=parseInt(c[k]);k++}while(k<d.length&&o===f);if(o<=f&&!isNaN(o)){p=true}}}}}catch(m){p=false}if(a){document.body.removeChild(a)}return p};Silverlight.WaitForInstallCompletion=function(){if(!Silverlight.isBrowserRestartRequired&&Silverlight.onSilverlightInstalled){try{navigator.plugins.refresh()}catch(a){}if(Silverlight.isInstalled(null)){Silverlight.onSilverlightInstalled()}else{setTimeout(Silverlight.WaitForInstallCompletion,3000)}}};Silverlight.__startup=function(){Silverlight.isBrowserRestartRequired=Silverlight.isInstalled(null);if(!Silverlight.isBrowserRestartRequired){Silverlight.WaitForInstallCompletion()}if(window.removeEventListener){window.removeEventListener("load",Silverlight.__startup,false)}else{window.detachEvent("onload",Silverlight.__startup)}};if(window.addEventListener){window.addEventListener("load",Silverlight.__startup,false)}else{window.attachEvent("onload",Silverlight.__startup)}Silverlight.createObject=function(a,n,c,k,p,g,h){var q=new Object();var d=k;var o=p;q.version=d.version;d.source=a;q.alt=d.alt;if(g){d.initParams=g}if(d.isWindowless&&!d.windowless){d.windowless=d.isWindowless}if(d.framerate&&!d.maxFramerate){d.maxFramerate=d.framerate}if(c&&!d.id){d.id=c}delete d.ignoreBrowserVer;delete d.inplaceInstallPrompt;delete d.version;delete d.isWindowless;delete d.framerate;delete d.data;delete d.src;delete d.alt;if(Silverlight.isInstalled(q.version)){for(var b in o){if(o[b]){if(b=="onLoad"&&typeof o[b]=="function"&&o[b].length!=1){var m=o[b];o[b]=function(r){return m(document.getElementById(c),h,r)}}var f=Silverlight.__getHandlerName(o[b]);if(f!=null){d[b]=f;o[b]=null}else{throw"typeof events."+b+" must be 'function' or 'string'"}}}slPluginHTML=Silverlight.buildHTML(d)}else{slPluginHTML=Silverlight.buildPromptHTML(q)}if(n){n.innerHTML=slPluginHTML}else{return slPluginHTML}};Silverlight.buildHTML=function(c){var b=[];b.push('<object type="application/x-silverlight" data="data:application/x-silverlight,"');if(c.id!=null){b.push(' id="'+c.id+'"')}if(c.width!=null){b.push(' width="'+c.width+'"')}if(c.height!=null){b.push(' height="'+c.height+'"')}b.push(" >");delete c.id;delete c.width;delete c.height;for(var a in c){if(c[a]){b.push('<param name="'+Silverlight.HtmlAttributeEncode(a)+'" value="'+Silverlight.HtmlAttributeEncode(c[a])+'" />')}}b.push("</object>");return b.join("")};Silverlight.createObjectEx=function(c){var b=c;var a=Silverlight.createObject(b.source,b.parentElement,b.id,b.properties,b.events,b.initParams,b.context);if(b.parentElement==null){return a}};Silverlight.buildPromptHTML=function(b){var d="";var c=Silverlight.fwlinkRoot;var a=b.version;if(b.alt){d=b.alt}else{if(!a){a=""}d="<a href='javascript:Silverlight.getSilverlight(\"{1}\");' style='text-decoration: none;'><img src='{2}' alt='Get Microsoft Silverlight' style='border-style: none'/></a>";d=d.replace("{1}",a);d=d.replace("{2}",c+"108181")}return d};Silverlight.getSilverlight=function(c){if(Silverlight.onGetSilverlight){Silverlight.onGetSilverlight()}var a="";var f=String(c).split(".");if(f.length>1){var d=parseInt(f[0]);if(isNaN(d)||d<2){a="1.0"}else{a=f[0]+"."+f[1]}}var b="";if(a.match(/^\d+\056\d+$/)){b="&v="+a}Silverlight.followFWLink("114576"+b)};Silverlight.followFWLink=function(a){top.location=Silverlight.fwlinkRoot+String(a)};Silverlight.HtmlAttributeEncode=function(b){var f;var d="";if(b==null){return null}for(var a=0;a<b.length;a++){f=b.charCodeAt(a);if(((f>96)&&(f<123))||((f>64)&&(f<91))||((f>43)&&(f<58)&&(f!=47))||(f==95)){d=d+String.fromCharCode(f)}else{d=d+"&#"+f+";"}}return d};Silverlight.default_error_handler=function(b,a){var c;var f=a.ErrorType;c=a.ErrorCode;var d="\nSilverlight error message     \n";d+="ErrorCode: "+c+"\n";d+="ErrorType: "+f+"       \n";d+="Message: "+a.ErrorMessage+"     \n";if(f=="ParserError"){d+="XamlFile: "+a.xamlFile+"     \n";d+="Line: "+a.lineNumber+"     \n";d+="Position: "+a.charPosition+"     \n"}else{if(f=="RuntimeError"){if(a.lineNumber!=0){d+="Line: "+a.lineNumber+"     \n";d+="Position: "+a.charPosition+"     \n"}d+="MethodName: "+a.methodName+"     \n"}}alert(d)};Silverlight.__cleanup=function(){for(var a=Silverlight._silverlightCount-1;a>=0;a--){window["__slEvent"+a]=null}Silverlight._silverlightCount=0;if(window.removeEventListener){window.removeEventListener("unload",Silverlight.__cleanup,false)}else{window.detachEvent("onunload",Silverlight.__cleanup)}};Silverlight.__getHandlerName=function(b){var a="";if(typeof b=="string"){a=b}else{if(typeof b=="function"){if(Silverlight._silverlightCount==0){if(window.addEventListener){window.addEventListener("onunload",Silverlight.__cleanup,false)}else{window.attachEvent("onunload",Silverlight.__cleanup)}}var c=Silverlight._silverlightCount++;a="__slEvent"+c;window[a]=b}else{a=null}}return a};if(!this.JSON){JSON=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){return escapeable.test(string)?'"'+string.replace(escapeable,function(a){var c=meta[a];if(typeof c==="string"){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value,rep);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){v=str(k,value,rep);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}return{stringify:function(value,replacer,space){var i;gap="";indent="";if(space){if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}}if(!replacer){rep=function(key,value){if(!Object.hasOwnProperty.call(this,key)){return undefined}return value}}else{if(typeof replacer==="function"||(typeof replacer==="object"&&typeof replacer.length==="number")){rep=replacer}else{throw new Error("JSON.stringify")}}return str("",{"":value})},parse:function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")},quote:quote}}()}var WNConstFlashLayerDivNameKey="FlashLayer";var WNConstSilverlightLayerDivNameKey="SilverlightLayer";var DEEBUG=false;var plugin=null;var WNSilverlightWidgetClass=null;var WNSilverlightControlID="WNSilverlightControl";var WNFlashMediaObj=null;var WNSilverlightDisableTransport=false;var WNSilverlightCanvasHeight=308;var WNSilverlightCanvasWidth=360;var WNSilverlightMediaTimout=null;var WNSilverlightMediaStreamingTimout=null;var WNFlashMediaTimout=null;var WNFlashMediaTimoutCounter=1;var WNSilverlightMedia=null;var WNSilverlightMediaThumbPos=8;var WNSilverlightMainCanvas=null;var WNSilverlightMainRectangle=null;var WNSilverlightMainMediaElem=null;var WNSilverlightMainMediaElemBG=null;var WNSilverlightMainMediaElemBG_Padding=6;var WNSilverlightMainMediaElemAltImage=null;var WNSilverlightMainMediaElemAltNA=null;var WNSilverlightMainMediaElemTransBtn=null;var WNSilverlightMainRectangleFS=null;var WNSilverlightControlsPaneHeight=40;var WNSilverlightTimeLines=null;var WNSilverlightTimeLine_01=null;var WNSilverlightTimeLine_011=null;var WNSilverlightTimeLine_012=null;var WNSilverlightTimeLine_02=null;var WNSilverlightTimeLine_021=null;var WNSilverlightTimeLine_022=null;var WNSilverlightTimeLine_03=null;var WNSilverlightTimeLine_031=null;var WNSilverlightTimeLine_032=null;var WNSilverlightTimeThumb=null;var WNSilverlightLiveStreamIsSet=false;var WNSilverlightLiveStreamVideoUrl="";var WNSilverlightLiveStreamSummaryImageUrl="";var WNSilverlightLiveStreamIsTriggeredOnce=true;var WNSilverlightVideoType="";var WNSilverlightButtonHeldDownVolume=false;var WNSilverlightVolumeSetting=0.8;var WNSilverlightBtnPlay=null;var WNSilverlightBtnPause=null;var WNSilverlightBtnStop=null;var WNSilverlightStrokePlayPause=null;var WNSilverlightBtnSpeaker=null;var WNSilverlightBtnVolume=null;var WNSilverlightRectVolumeForeground=null;var WNSilverlightBtnSummary=null;var WNSilverlightBtnCC=null;var WNSilverlightBtnEmail=null;var WNSilverlightBtnHelp=null;var WNSilverlightBtnFullScreen=null;var WNSilverlightTxtMediaStateBlock=null;var WNSilverlightTxtTimeCurrent=null;var WNSilverlightStreamStopped=false;function WNRenderSilverlight(c){var b=new WNSLVideoWidget.Page();if(!isNaN(WNSilverlightWidgetClass.flashVars.playerWidth)){WNSilverlightCanvasWidth=WNSilverlightWidgetClass.flashVars.playerWidth.toString()}if(!isNaN(WNSilverlightWidgetClass.flashVars.playerHeight)){WNSilverlightCanvasHeight=WNSilverlightWidgetClass.flashVars.playerHeight.toString()}if(!isNaN(WNSilverlightWidgetClass.flashVars.controlsHeight)){WNSilverlightControlsPaneHeight=WNSilverlightWidgetClass.flashVars.controlsHeight.toString()}if(!isNaN(WNSilverlightWidgetClass.flashVars.sidePadding)&&!isNaN(WNSilverlightWidgetClass.flashVars.topPadding)){WNSilverlightMainMediaElemBG_Padding=(parseInt(WNSilverlightWidgetClass.flashVars.sidePadding)+parseInt(WNSilverlightWidgetClass.flashVars.topPadding))}tmpFlashVarsDisableTransport=WNSilverlightWidgetClass.flashVars.disableTransport.toString().toLowerCase();if(typeof $wn!=="undefined"){$wn.trim(WNSilverlightWidgetClass)}if(tmpFlashVarsDisableTransport=="true"){WNSilverlightDisableTransport=true}else{if(tmpFlashVarsDisableTransport=="false"){WNSilverlightDisableTransport=false}}WNSilverlightVideoType=WNSilverlightWidgetClass.flashVars.videoType;switch(WNSilverlightWidgetClass.flashVars.defaultStyle){case"flatlight":var a="WNSilverlight.flatlight.xaml";break;case"light":var a="WNSilverlight.light.xaml";break;default:var a="WNSilverlight.dark.xaml";break}var a=WNSilverlightWidgetClass.silverlightUri.toString()+a.toString();Silverlight.createObjectEx({source:a.toString(),parentElement:document.getElementById(c[WNConstSilverlightLayerDivNameKey.toString()]),id:WNSilverlightControlID,properties:{width:WNSilverlightCanvasWidth,height:WNSilverlightCanvasHeight,version:"1.0"},events:{onLoad:Silverlight.createDelegate(b,b.handleLoad),onError:function(g,f){if(DEEBUG){var d=f.errorType+"- "+f.errorMessage;if(f.ErrorType=="ParserError"){d+="<br>File: "+f.xamlFile;d+=", line "+f.lineNumber;d+=" character "+f.charPosition}else{if(f.ErrorType=="RuntimeError"){d+="<br>line "+f.lineNumber;d+=" character "+f.charPosition}}alert(d)}}},initParams:JSON.stringify(c),context:null})}if(!window.Silverlight){window.Silverlight={}}Silverlight.createDelegate=function(a,b){return function(){return b.apply(a,arguments)}};mediaElemAltImagUrl="";if(!window.WNSLVideoWidget){window.WNSLVideoWidget={}}WNSLVideoWidget.Page=function(){var a=false};WNSLVideoWidget.Page.prototype={handleLoad:function(d,g,a){this.control=d;WNSilverlightMainCanvas=d.content.findName("MainCanvas");WNSilverlightMainRectangle=d.content.findName("MainRectangle");WNSilverlightMainMediaElemBG=d.content.findName("MainMediaElemBG");WNSilverlightMainMediaElem=d.content.findName("MainMediaElem");WNSilverlightMainMediaElemAltImage=d.content.findName("MainMediaElemAltImage");WNSilverlightMainMediaElemAltNA=d.content.findName("MainMediaElemAltNA");WNSilverlightMainMediaElemTransBtn=d.content.findName("MainMediaElemTransBtn");WNSilverlightMainRectangleFS=d.content.findName("MainRectangleFS");WNSilverlightTimeLines=d.content.findName("TimeLines");WNSilverlightTimeLine_01=d.content.findName("TimeLine_01");WNSilverlightTimeLine_011=d.content.findName("TimeLine_011");WNSilverlightTimeLine_012=d.content.findName("TimeLine_012");WNSilverlightTimeLine_02=d.content.findName("TimeLine_02");WNSilverlightTimeLine_021=d.content.findName("TimeLine_021");WNSilverlightTimeLine_022=d.content.findName("TimeLine_022");WNSilverlightTimeLine_03=d.content.findName("TimeLine_03");WNSilverlightTimeLine_031=d.content.findName("TimeLine_031");WNSilverlightTimeLine_032=d.content.findName("TimeLine_032");WNSilverlightTimeThumb=d.content.findName("TimeThumb");WNSilverlightBtnPlay=d.content.findName("BtnPlay");WNSilverlightBtnPause=d.content.findName("BtnPause");WNSilverlightBtnStop=d.content.findName("BtnStop");WNSilverlightStrokePlayPause=d.content.findName("StrokePlayPause");WNSilverlightBtnSpeaker=d.content.findName("BtnSpeaker");WNSilverlightBtnVolume=d.content.findName("BtnVolume");WNSilverlightRectVolumeForeground=d.content.findName("VolumeForeground");WNSilverlightBtnSummary=d.content.findName("BtnSummary");WNSilverlightBtnCC=d.content.findName("BtnCC");WNSilverlightBtnEmail=d.content.findName("BtnEmail");WNSilverlightBtnHelp=d.content.findName("BtnHelp");WNSilverlightBtnFullScreen=d.content.findName("BtnFullScreen");WNSilverlightTxtMediaStateBlock=d.content.findName("TxtMediaStateBlock");WNSilverlightTxtTimeCurrent=d.content.findName("TxtTimeCurrent");WNSilverlightMainCanvas.Width=WNSilverlightMainRectangle.Width=WNSilverlightCanvasWidth;WNSilverlightMainMediaElemBG.Width=WNSilverlightMainMediaElem.Width=WNSilverlightMainMediaElemAltImage.Width=WNSilverlightMainMediaElemAltNA.Width=WNSilverlightMainMediaElemTransBtn.Width=(WNSilverlightCanvasWidth-WNSilverlightMainMediaElemBG_Padding);WNSilverlightTimeLine_01.Width=WNSilverlightTimeLine_011.Width=WNSilverlightTimeLine_012.Width=WNSilverlightTimeLine_02.Width=WNSilverlightTimeLine_021.Width=WNSilverlightTimeLine_022.Width=WNSilverlightTimeLine_03.Width=WNSilverlightTimeLine_031.Width=WNSilverlightTimeLine_032.Width=(WNSilverlightCanvasWidth-51);WNSilverlightMainCanvas.Height=WNSilverlightMainRectangle.Height=WNSilverlightCanvasHeight;WNSilverlightMainMediaElemBG.Height=WNSilverlightMainMediaElem.Height=WNSilverlightMainMediaElemAltImage.Height=WNSilverlightMainMediaElemAltNA.Height=WNSilverlightMainMediaElemTransBtn.Height=(WNSilverlightCanvasHeight-WNSilverlightMainMediaElemBG_Padding-WNSilverlightControlsPaneHeight);WNSilverlightMainRectangleFS.Height=WNSilverlightControlsPaneHeight+4;controlsPosY=WNSilverlightCanvasHeight-WNSilverlightControlsPaneHeight;WNSilverlightTxtMediaStateBlock["Canvas.Top"]=(WNSilverlightCanvasHeight-62);WNSilverlightTxtTimeCurrent["Canvas.Top"]=(controlsPosY-2);WNSilverlightTimeLines["Canvas.Top"]=(controlsPosY+3);WNSilverlightTimeThumb["Canvas.Top"]=(controlsPosY);WNSilverlightBtnPlay["Canvas.Top"]=WNSilverlightBtnPause["Canvas.Top"]=WNSilverlightBtnStop["Canvas.Top"]=WNSilverlightStrokePlayPause["Canvas.Top"]=WNSilverlightBtnSpeaker["Canvas.Top"]=WNSilverlightBtnVolume["Canvas.Top"]=WNSilverlightBtnSummary["Canvas.Top"]=WNSilverlightBtnCC["Canvas.Top"]=WNSilverlightBtnEmail["Canvas.Top"]=WNSilverlightBtnHelp["Canvas.Top"]=WNSilverlightBtnFullScreen["Canvas.Top"]=(WNSilverlightCanvasHeight-19);WNSilverlightBtnSummary["Canvas.Left"]=WNSilverlightCanvasWidth-195;WNSilverlightBtnCC["Canvas.Left"]=WNSilverlightCanvasWidth-132;WNSilverlightBtnEmail["Canvas.Left"]=WNSilverlightCanvasWidth-109;WNSilverlightBtnHelp["Canvas.Left"]=WNSilverlightCanvasWidth-67;WNSilverlightBtnFullScreen["Canvas.Left"]=WNSilverlightCanvasWidth-20;WNSilverlightTxtTimeCurrent["Canvas.Left"]=(WNSilverlightCanvasWidth-32);WNSilverlightMainMediaElemAltImage.Source=wnSilverlightBaseUrl+"/VideoOpener.jpg";WNSilverlightMainMediaElemAltNA.Source=wnSilverlightBaseUrl+"/VideoNA.jpg";WNSilverlightMainRectangleFS.Visibility="Collapsed";WNSilverlightMainMediaElem.addEventListener("MediaFailed",Silverlight.createDelegate(this,this.handleMediaFailed));WNSilverlightMainMediaElem.addEventListener("MediaOpened",Silverlight.createDelegate(this,this.handleMediaOpened));WNSilverlightMainMediaElem.addEventListener("MediaEnded",Silverlight.createDelegate(this,this.handleMediaEnded));WNSilverlightMainMediaElem.addEventListener("CurrentStateChanged",Silverlight.createDelegate(this,this.handleMediaStateChanged));var f=JSON.parse(d.initParams);var c=f[WNConstFlashLayerDivNameKey.toString()];var b=f[WNConstSilverlightLayerDivNameKey.toString()];WNSilverlightTrigger(f,c.toString(),b.toString())},handleMediaFailed:function(b,a){b.findName("MainMediaElem").setValue("Visibility","Collapsed");b.findName("MainMediaElemAltNA").setValue("Visibility","Visible")},handleMediaOpened:function(b,a){if(WNSilverlightMedia==null){WNSilverlightMedia=b}b.findName("MainMediaElem").setValue("Visibility","Visible");b.findName("MainMediaElemAltNA").setValue("Visibility","Collapsed");b.findName("MainMediaElemAltImage").setValue("Visibility","Collapsed");wnVideoWidgets.FireReportingBeacon();this.isMediaAtStartPoint=true;handleMediaUpdatePosition();if(WNSilverlightLiveStreamIsSet){WNFlashMediaObj.objClip.duration=parseInt(WNSilverlightMainMediaElem.naturalDuration.seconds).toString()}},handleMediaEnded:function(f,c){f.findName("MainMediaElem").stop();f.findName("MainMediaElem").setValue("Visibility","Collapsed");f.findName("MainMediaElemAltImage").setValue("Visibility","Visible");f.findName("MainMediaElemAltImage").setValue("Source",mediaElemAltImagUrl);if(WNSilverlightMediaTimout!=null){clearTimeout(WNSilverlightMediaTimout)}if(WNSilverlightMediaStreamingTimout!=null){clearTimeout(WNSilverlightMediaStreamingTimout)}progressPointer=f.findName("TimeThumb");progressPointer["Canvas.Left"]=WNSilverlightMediaThumbPos;WNSilverlightTxtTimeCurrent.Text="00:00";WNSilverlightTogglePlayPause();var b=f.Tag.split("&");for(var g in b){var a=b[g].split("=");var d=document.getElementById(a[1]);if(a[0]==WNConstFlashLayerDivNameKey){d.width=WNSilverlightCanvasWidth;d.height=WNSilverlightCanvasHeight}if(a[0]==WNConstSilverlightLayerDivNameKey){d.style.display="none"}}},handleMediaStateChanged:function(b,a){if(DEEBUG){WNSilverlightTxtMediaStateBlock.Text=WNSilverlightMainMediaElem.CurrentState}else{WNSilverlightTxtMediaStateBlock.Text="";var c=WNSilverlightMainMediaElem.CurrentState;if(c=="Buffering"){WNSilverlightTxtMediaStateBlock.Text=WNSilverlightMainMediaElem.CurrentState}if(this.isMediaAtStartPoint&&WNSilverlightVideoType=="livestream"&&c=="Playing"){this.isMediaAtStartPoint=false;StreamingMediaPlayCounter()}}}};function handleMediaUpdatePosition(){}function StreamingMediaPlayCounter(){var a=new Date();var d=a.getSeconds();var c=a.getMinutes();var b=a.getHours();var f=(d)+60*(c)+3600*(b);StreamingMediaTicker(f)}function StreamingMediaTicker(k){var a=new Date();var g=a.getSeconds();var d=a.getMinutes();var c=a.getHours();var f=(g)+60*(d)+3600*(c);var h=f-k;WNSilverlightTxtTimeCurrent.Text=GetSLTimeString(h,false);var b="StreamingMediaTicker("+k+")";WNSilverlightMediaStreamingTimout=setTimeout(b.toString(),1000)}function checkWNFlashMediaObj(){if(WNFlashMediaObj==null){WNFlashMediaObj={};WNFlashMediaObj.objClip={};WNFlashMediaObj.objClip.duration=0;WNFlashMediaObj.objClip.headline=null;WNFlashMediaObj.objClip.isUserInitiated=false;WNFlashMediaObj.objClip.mainHeadline=null;WNFlashMediaObj.objClip.summary=null;WNFlashMediaObj.objClip.graphic=WNFlashMediaObj.objClip.thumb="";WNFlashMediaObj.objClip.wmvUri=null;if(WNSilverlightLiveStreamIsSet&&WNSilverlightLiveStreamIsTriggeredOnce){WNFlashMediaObj.objClip.headline=WNFlashMediaObj.objClip.mainHeadline="LIVE Stream";WNFlashMediaObj.objClip.summary="";WNFlashMediaObj.objClip.duration=0;WNFlashMediaObj.objClip.wmvUri=WNSilverlightLiveStreamVideoUrl;WNFlashMediaObj.objClip.graphic=WNFlashMediaObj.objClip.thumb=WNSilverlightLiveStreamSummaryImageUrl}}}function WNSilverlightTrigger(g,d,b){var f=document.getElementById(d);f.width=1;f.height=1;var c=document.getElementById(b);if(c.style.display=="none"){c.style.display="block"}c.style.top=0;var a=WNConstFlashLayerDivNameKey.toString()+"="+d+"&"+WNConstSilverlightLayerDivNameKey.toString()+"="+b;WNFlashMediaObj.objClip=g;WNFlashMediaObj.divsInfo=a.toString();WNSilverlightSetSummaryGraphic(WNFlashMediaObj.objClip);WNSilverlightPlayClip();WNFlashMediaTimoutExecute=false;if(WNFlashMediaTimoutExecute){WNFlashMediaTimout=setInterval(WNFlashMediaTimouts,1000)}WNSilverlightLiveStreamIsTriggeredOnce=false}function WNFlashMediaTimouts(){if(WNFlashMediaTimoutCounter==2){clearInterval(WNFlashMediaTimout)}else{WNFlashMediaTimoutCounter++}}function WNSilverlightSetLiveStream(a,b){WNSilverlightLiveStreamIsSet=true;WNSilverlightLiveStreamVideoUrl=a;WNSilverlightLiveStreamSummaryImageUrl=b}function WNSilverlightPlayClip(){WNSilverlightTogglePlayPause();if(WNSilverlightMainMediaElem.currentState!="Paused"||(WNSilverlightLiveStreamIsSet&&WNSilverlightMainMediaElem.currentState!="Paused"&&WNSilverlightMainMediaElem.currentState!="Stopped")){if(WNFlashMediaObj.objClip.liveStreamSecure=="1"&&WNSilverlightStreamStopped){var b=document.location+"";var c="cbust="+parseInt(Math.random()*10000000000);var a=b.replace(/cbust=\d*/,c);document.location.href=a}WNSilverlightMainMediaElem.autoPlay=true;WNSilverlightMainMediaElem.Source=WNFlashMediaObj.objClip.wmvUri.toString();WNSilverlightMainMediaElem.Tag=WNFlashMediaObj.divsInfo.toString();WNSilverlightMainMediaElem.volume=WNSilverlightVolumeSetting;WNSilverlightMainMediaElemAltImage.Visibility="Collapsed"}WNSilverlightResetMedias();WNSilverlightMainMediaElem.play();handleMediaUpdatePosition()}function WNSilverlightPauseClip(){if(WNSilverlightMainMediaElem.Source!=""&&WNSilverlightMainMediaElem.currentState!="Paused"){if(WNSilverlightMediaTimout!=null){clearTimeout(WNSilverlightMediaTimout)}if(WNSilverlightMediaStreamingTimout!=null){clearTimeout(WNSilverlightMediaStreamingTimout)}WNSilverlightMainMediaElem.pause()}}function WNSilverlightStopClip(){if(WNSilverlightMainMediaElem.Source!=""&&WNSilverlightMainMediaElem.currentState!="Stop"){if(WNSilverlightMediaTimout!=null){clearTimeout(WNSilverlightMediaTimout)}if(WNSilverlightMediaStreamingTimout!=null){clearTimeout(WNSilverlightMediaStreamingTimout)}WNSilverlightStreamStopped=true;WNSilverlightMainMediaElem.stop()}}function WNSilverlightResetMedias(){if(WNSilverlightMediaTimout!=null){clearTimeout(WNSilverlightMediaTimout)}if(WNSilverlightMediaStreamingTimout!=null){clearTimeout(WNSilverlightMediaStreamingTimout)}WNSilverlightTimeThumb["Canvas.Left"]=WNSilverlightMediaThumbPos;WNSilverlightTxtTimeCurrent.Text="00:00"}function WNSilverlightSetSummaryGraphic(a){if(WNSilverlightLiveStreamIsSet&&WNSilverlightLiveStreamIsTriggeredOnce&&WNSilverlightLiveStreamSummaryImageUrl==""){WNSilverlightMainMediaElem.autoPlay=false;WNSilverlightMainMediaElem.Source=WNFlashMediaObj.objClip.wmvUri.toString();WNSilverlightMainMediaElemAltImage.Visibility="Collapsed";return}if(a.graphic!=null&&a.graphic.toString()!=""){mediaElemAltImagUrl=a.graphic.toString()}else{mediaElemAltImagUrl=""+a.thumb.toString()}WNSilverlightMainMediaElemAltImage.Source=mediaElemAltImagUrl;WNSilverlightMainMediaElemAltImage.Visibility="Visible"}function BtnPlayMouseLeftButtonUp(b,a){WNFlashMediaObj.objClip.isUserInitiated=true;WNSilverlightPlayClip()}function BtnPauseMouseLeftButtonUp(b,a){WNSilverlightTogglePlayPause();WNSilverlightPauseClip()}function BtnStopMouseLeftButtonUp(b,a){WNSilverlightTogglePlayPause();WNSilverlightStopClip()}function BtnSpeakerMouseLeftButtonUp(c,a){var b=c.findName("StrokeSpeakerMute");if(b.Visibility=="Visible"){b.Visibility="Collapsed";WNSilverlightRectVolumeForeground.Visibility="Visible";WNSilverlightMainMediaElem.IsMuted=false}else{b.Visibility="Visible";WNSilverlightRectVolumeForeground.Visibility="Collapsed";WNSilverlightMainMediaElem.IsMuted=true}}function BtnVolumeMouseLeftButtonDown(b,a){if(WNSilverlightRectVolumeForeground.Visibility=="Collapsed"){return}WNSilverlightButtonHeldDownVolume=true}function BtnVolumeMouseMove(b,a){if(WNSilverlightButtonHeldDownVolume){WNSilverlightUpdateVolumeUI(b,a)}}function BtnVolumeMouseLeave(b,a){if(WNSilverlightButtonHeldDownVolume){WNSilverlightButtonHeldDownVolume=false;WNSilverlightChangeVolumeSetting()}}function BtnVolumeMouseLeftButtonUp(b,a){if(WNSilverlightButtonHeldDownVolume){WNSilverlightButtonHeldDownVolume=false;WNSilverlightUpdateVolumeUI(b,a);WNSilverlightChangeVolumeSetting()}}function WNSilverlightUpdateVolumeUI(c,b){var a=b.GetPosition(c).x;WNSilverlightCalcVolumeSetting(a,c.Width);WNSilverlightRectVolumeForeground.width=a}function WNSilverlightCalcVolumeSetting(b,a){var c=b/a;WNSilverlightVolumeSetting=c}function WNSilverlightChangeVolumeSetting(){WNSilverlightMainMediaElem.volume=WNSilverlightVolumeSetting}function WNSilverlightTogglePlayPause(){if(WNSilverlightBtnPlay.Visibility=="Visible"){WNSilverlightBtnPlay.Visibility="Collapsed";if(WNSilverlightVideoType=="livestream"){WNSilverlightBtnStop.Visibility="Visible"}else{WNSilverlightBtnPause.Visibility="Visible"}}else{WNSilverlightBtnPlay.Visibility="Visible";WNSilverlightBtnPause.Visibility="Collapsed";WNSilverlightBtnStop.Visibility="Collapsed"}}function setMouseEnterColor(a){setColor(a,a.tag.split(" ")[0])}function setMouseLeaveColor(a){setColor(a,a.tag.split(" ")[1])}function setColor(b,a){for(i=0;i<b.children.count;i++){element=b.children.getItem(i);element=b.children.getItem(i);if(element.toString()=="TextBlock"){element.Foreground="#"+a}else{if(element.toString()=="Path"||element.toString()=="Rectangle"){element.Fill="#"+a;element.Stroke="#"+a}}}}function WNSilverlightInit(b,a){checkWNFlashMediaObj();progressPointer=b.findName("TimeThumb");WNSilverlightMediaThumbPos=progressPointer["Canvas.Left"];plugin=b.getHost();plugin.content.onFullScreenChange=WNSilverlightOnFullScreenChanged;var c=plugin.createObject("downloader");c.addEventListener("Completed",WNSilverlightSetFont1);c.open("GET",wnSilverlightBaseUrl+"/lte50535.ttf");c.send()}function WNSilverlightSetFont1(d,b){var c="TradeGothic LT Bold";var a=d.findName("TxtTimeCurrent");a.setFontSource(d);a.fontFamily=c;a=d.findName("TxtPlay");a.setFontSource(d);a.fontFamily=c;a["Canvas.Top"]="-2";a=d.findName("TxtPause");a.setFontSource(d);a.fontFamily=c;a["Canvas.Top"]="-2";a=d.findName("TxtSummary");a.setFontSource(d);a.fontFamily=c;a["Canvas.Top"]="-2";a=d.findName("TxtCC");a.setFontSource(d);a.fontFamily=c;a["Canvas.Top"]="-2";a=d.findName("TxtEmail");a.setFontSource(d);a.fontFamily=c;a["Canvas.Top"]="-2";a=d.findName("TxtHelp");a.setFontSource(d);a.fontFamily=c;a["Canvas.Top"]="-2"}function GetSLTimeString(f,a){f=parseFloat(f);if(a){f=Math.floor(f/1000)}var b=Math.floor(f/3600);var d=Math.floor((f%3600)/60);var k=Math.floor(f%60);var h=b.toString();var g=d.toString();var c=k.toString();if(b<10){h="0"+h}if(d<10){g="0"+g}if(k<10){c="0"+c}if(h=="00"){return g+":"+c}else{WNSilverlightTxtTimeCurrent["Canvas.Left"]=(WNSilverlightCanvasWidth-41);return h+":"+g+":"+c}}function BtnFullScreenMouseLeftButtonUp(b,a){plugin.content.fullScreen=!plugin.content.fullScreen}function WNSilverlightOnFullScreenChanged(b,a){WNSilverlightUpdateLayout(plugin.content.actualWidth,plugin.content.actualHeight)}function WNSilverlightUpdateLayout(d,b){var c=(WNSilverlightCanvasWidth-WNSilverlightMainMediaElemBG_Padding);var h=(WNSilverlightCanvasHeight-WNSilverlightMainMediaElemBG_Padding-WNSilverlightControlsPaneHeight);var k=WNSilverlightMainMediaElemBG_Padding/2;var g=k;var f=(WNSilverlightCanvasHeight-19);var a=28;if(d>WNSilverlightCanvasWidth){c=d;h=b;k=g=0;WNSilverlightMainRectangleFS.Width=d;WNSilverlightMainRectangleFS.Height=a;WNSilverlightMainRectangleFS["Canvas.Top"]=b-a;WNSilverlightMainRectangleFS.Visibility="Visible";f=(h-19);WNSilverlightBtnFullScreen["Canvas.Left"]=c-20;WNSilverlightTimeLines.Visibility=WNSilverlightTxtTimeCurrent.Visibility="Collapsed";WNSilverlightTxtMediaStateBlock["Canvas.Top"]=(b-50)}else{WNSilverlightTimeLines.Visibility=WNSilverlightTxtTimeCurrent.Visibility="Visible";WNSilverlightMainRectangleFS.Visibility="Collapsed";WNSilverlightBtnFullScreen["Canvas.Left"]=WNSilverlightCanvasWidth-20;WNSilverlightTxtMediaStateBlock["Canvas.Top"]=(WNSilverlightCanvasHeight-62)}WNSilverlightMainMediaElemBG.Width=WNSilverlightMainMediaElem.Width=WNSilverlightMainMediaElemAltImage.Width=WNSilverlightMainMediaElemAltNA.Width=WNSilverlightMainMediaElemTransBtn.Width=c;WNSilverlightMainMediaElemBG.Height=WNSilverlightMainMediaElem.Height=WNSilverlightMainMediaElemAltImage.Height=WNSilverlightMainMediaElemAltNA.Height=WNSilverlightMainMediaElemTransBtn.Height=h;WNSilverlightMainMediaElemBG["Canvas.Left"]=WNSilverlightMainMediaElem["Canvas.Left"]=WNSilverlightMainMediaElemAltImage["Canvas.Left"]=WNSilverlightMainMediaElemAltNA["Canvas.Left"]=WNSilverlightMainMediaElemTransBtn["Canvas.Left"]=k;WNSilverlightMainMediaElemBG["Canvas.Top"]=WNSilverlightMainMediaElem["Canvas.Top"]=WNSilverlightMainMediaElemAltImage["Canvas.Top"]=WNSilverlightMainMediaElemAltNA["Canvas.Top"]=WNSilverlightMainMediaElemTransBtn["Canvas.Top"]=g;WNSilverlightBtnPlay["Canvas.Top"]=WNSilverlightBtnPause["Canvas.Top"]=WNSilverlightBtnStop["Canvas.Top"]=WNSilverlightStrokePlayPause["Canvas.Top"]=WNSilverlightBtnSpeaker["Canvas.Top"]=WNSilverlightBtnVolume["Canvas.Top"]=WNSilverlightBtnSummary["Canvas.Top"]=WNSilverlightBtnCC["Canvas.Top"]=WNSilverlightBtnEmail["Canvas.Top"]=WNSilverlightBtnHelp["Canvas.Top"]=WNSilverlightBtnFullScreen["Canvas.Top"]=f}if(swfobject==undefined){var swfobject=function(){var aq="undefined",aD="object",ab="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",ac="SWFObjectExprInst",ax="onreadystatechange",af=window,aL=document,aB=navigator,aa=false,Z=[aN],aG=[],ag=[],al=[],aJ,ad,ap,at,ak=false,aU=false,aH,an,aI=true,ah=function(){var a=typeof aL.getElementById!=aq&&typeof aL.getElementsByTagName!=aq&&typeof aL.createElement!=aq,f=aB.userAgent.toLowerCase(),c=aB.platform.toLowerCase(),k=c?/win/.test(c):/win/.test(f),n=c?/mac/.test(c):/mac/.test(f),h=/webkit/.test(f)?parseFloat(f.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,d=!+"\v1",g=[0,0,0],o=null;if(typeof aB.plugins!=aq&&typeof aB.plugins[ab]==aD){o=aB.plugins[ab].description;if(o&&!(typeof aB.mimeTypes!=aq&&aB.mimeTypes[aE]&&!aB.mimeTypes[aE].enabledPlugin)){aa=true;d=false;o=o.replace(/^.*\s+(\S+\s+\S+$)/,"$1");g[0]=parseInt(o.replace(/^(.*)\..*$/,"$1"),10);g[1]=parseInt(o.replace(/^.*\.(.*)\s.*$/,"$1"),10);g[2]=/[a-zA-Z]/.test(o)?parseInt(o.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof af.ActiveXObject!=aq){try{var m=new ActiveXObject(X);if(m){o=m.GetVariable("$version");if(o){d=true;o=o.split(" ")[1].split(",");g=[parseInt(o[0],10),parseInt(o[1],10),parseInt(o[2],10)]}}}catch(b){}}}return{w3:a,pv:g,wk:h,ie:d,win:k,mac:n}}(),aK=function(){if(!ah.w3){return}if((typeof aL.readyState!=aq&&aL.readyState=="complete")||(typeof aL.readyState==aq&&(aL.getElementsByTagName("body")[0]||aL.body))){aP()}if(!ak){if(typeof aL.addEventListener!=aq){aL.addEventListener("DOMContentLoaded",aP,false)}if(ah.ie&&ah.win){aL.attachEvent(ax,function(){if(aL.readyState=="complete"){aL.detachEvent(ax,arguments.callee);aP()}});if(af==top){(function(){if(ak){return}try{aL.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}aP()})()}}if(ah.wk){(function(){if(ak){return}if(!/loaded|complete/.test(aL.readyState)){setTimeout(arguments.callee,0);return}aP()})()}aC(aP)}}();function aP(){if(ak){return}try{var b=aL.getElementsByTagName("body")[0].appendChild(ar("span"));b.parentNode.removeChild(b)}catch(a){return}ak=true;var d=Z.length;for(var c=0;c<d;c++){Z[c]()}}function aj(a){if(ak){a()}else{Z[Z.length]=a}}function aC(a){if(typeof af.addEventListener!=aq){af.addEventListener("load",a,false)}else{if(typeof aL.addEventListener!=aq){aL.addEventListener("load",a,false)}else{if(typeof af.attachEvent!=aq){aM(af,"onload",a)}else{if(typeof af.onload=="function"){var b=af.onload;af.onload=function(){b();a()}}else{af.onload=a}}}}}function aN(){if(aa){Y()}else{am()}}function Y(){var d=aL.getElementsByTagName("body")[0];var b=ar(aD);b.setAttribute("type",aE);var a=d.appendChild(b);if(a){var c=0;(function(){if(typeof a.GetVariable!=aq){var f=a.GetVariable("$version");if(f){f=f.split(" ")[1].split(",");ah.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)]}}else{if(c<10){c++;setTimeout(arguments.callee,10);return}}d.removeChild(b);a=null;am()})()}else{am()}}function am(){var h=aG.length;if(h>0){for(var k=0;k<h;k++){var c=aG[k].id;var p=aG[k].callbackFn;var a={success:false,id:c};if(ah.pv[0]>0){var m=aS(c);if(m){if(ao(aG[k].swfVersion)&&!(ah.wk&&ah.wk<312)){ay(c,true);if(p){a.success=true;a.ref=av(c);p(a)}}else{if(aG[k].expressInstall&&au()){var f={};f.data=aG[k].expressInstall;f.width=m.getAttribute("width")||"0";f.height=m.getAttribute("height")||"0";if(m.getAttribute("class")){f.styleclass=m.getAttribute("class")}if(m.getAttribute("align")){f.align=m.getAttribute("align")}var g={};var d=m.getElementsByTagName("param");var o=d.length;for(var n=0;n<o;n++){if(d[n].getAttribute("name").toLowerCase()!="movie"){g[d[n].getAttribute("name")]=d[n].getAttribute("value")}}ae(f,g,c,p)}else{aF(m);if(p){p(a)}}}}}else{ay(c,true);if(p){var b=av(c);if(b&&typeof b.SetVariable!=aq){a.success=true;a.ref=b}p(a)}}}}}function av(b){var d=null;var c=aS(b);if(c&&c.nodeName=="OBJECT"){if(typeof c.SetVariable!=aq){d=c}else{var a=c.getElementsByTagName(aD)[0];if(a){d=a}}}return d}function au(){return !aU&&ao("6.0.65")&&(ah.win||ah.mac)&&!(ah.wk&&ah.wk<312)}function ae(g,d,k,f){aU=true;ap=f||null;at={success:false,id:k};var a=aS(k);if(a){if(a.nodeName=="OBJECT"){aJ=aO(a);ad=null}else{aJ=a;ad=k}g.id=ac;if(typeof g.width==aq||(!/%$/.test(g.width)&&parseInt(g.width,10)<310)){g.width="310"}if(typeof g.height==aq||(!/%$/.test(g.height)&&parseInt(g.height,10)<137)){g.height="137"}aL.title=aL.title.slice(0,47)+" - Flash Player Installation";var b=ah.ie&&ah.win?"ActiveX":"PlugIn",c="MMredirectURL="+af.location.toString().replace(/&/g,"%26")+"&MMplayerType="+b+"&MMdoctitle="+aL.title;if(typeof d.flashvars!=aq){d.flashvars+="&"+c}else{d.flashvars=c}if(ah.ie&&ah.win&&a.readyState!=4){var h=ar("div");k+="SWFObjectNew";h.setAttribute("id",k);a.parentNode.insertBefore(h,a);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}aA(g,d,k)}}function aF(a){if(ah.ie&&ah.win&&a.readyState!=4){var b=ar("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(aO(a),b);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}else{a.parentNode.replaceChild(aO(a),a)}}function aO(b){var d=ar("div");if(ah.win&&ah.ie){d.innerHTML=b.innerHTML}else{var f=b.getElementsByTagName(aD)[0];if(f){var a=f.childNodes;if(a){var g=a.length;for(var c=0;c<g;c++){if(!(a[c].nodeType==1&&a[c].nodeName=="PARAM")&&!(a[c].nodeType==8)){d.appendChild(a[c].cloneNode(true))}}}}}return d}function aA(f,h,c){var d,a=aS(c);if(ah.wk&&ah.wk<312){return d}if(a){if(typeof f.id==aq){f.id=c}if(ah.ie&&ah.win){var g="";for(var m in f){if(f[m]!=Object.prototype[m]){if(m.toLowerCase()=="data"){h.movie=f[m]}else{if(m.toLowerCase()=="styleclass"){g+=' class="'+f[m]+'"'}else{if(m.toLowerCase()!="classid"){g+=" "+m+'="'+f[m]+'"'}}}}}var k="";for(var n in h){if(h[n]!=Object.prototype[n]){k+='<param name="'+n+'" value="'+h[n]+'" />'}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+g+">"+k+"</object>";ag[ag.length]=f.id;d=aS(f.id)}else{var b=ar(aD);b.setAttribute("type",aE);for(var o in f){if(f[o]!=Object.prototype[o]){if(o.toLowerCase()=="styleclass"){b.setAttribute("class",f[o])}else{if(o.toLowerCase()!="classid"){b.setAttribute(o,f[o])}}}}for(var p in h){if(h[p]!=Object.prototype[p]&&p.toLowerCase()!="movie"){aQ(b,p,h[p])}}a.parentNode.replaceChild(b,a);d=b}}return d}function aQ(b,d,c){var a=ar("param");a.setAttribute("name",d);a.setAttribute("value",c);b.appendChild(a)}function aw(a){var b=aS(a);if(b&&b.nodeName=="OBJECT"){if(ah.ie&&ah.win){b.style.display="none";(function(){if(b.readyState==4){aT(a)}else{setTimeout(arguments.callee,10)}})()}else{b.parentNode.removeChild(b)}}}function aT(a){var b=aS(a);if(b){for(var c in b){if(typeof b[c]=="function"){b[c]=null}}b.parentNode.removeChild(b)}}function aS(a){var c=null;try{c=aL.getElementById(a)}catch(b){}return c}function ar(a){return aL.createElement(a)}function aM(a,c,b){a.attachEvent(c,b);al[al.length]=[a,c,b]}function ao(a){var b=ah.pv,c=a.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return(b[0]>c[0]||(b[0]==c[0]&&b[1]>c[1])||(b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]))?true:false}function az(b,g,a,c){if(ah.ie&&ah.mac){return}var f=aL.getElementsByTagName("head")[0];if(!f){return}var h=(a&&typeof a=="string")?a:"screen";if(c){aH=null;an=null}if(!aH||an!=h){var d=ar("style");d.setAttribute("type","text/css");d.setAttribute("media",h);aH=f.appendChild(d);if(ah.ie&&ah.win&&typeof aL.styleSheets!=aq&&aL.styleSheets.length>0){aH=aL.styleSheets[aL.styleSheets.length-1]}an=h}if(ah.ie&&ah.win){if(aH&&typeof aH.addRule==aD){aH.addRule(b,g)}}else{if(aH&&typeof aL.createTextNode!=aq){aH.appendChild(aL.createTextNode(b+" {"+g+"}"))}}}function ay(a,c){if(!aI){return}var b=c?"visible":"hidden";if(ak&&aS(a)){aS(a).style.visibility=b}else{az("#"+a,"visibility:"+b)}}function ai(b){var a=/[\\\"<>\.;]/;var c=a.exec(b)!=null;return c&&typeof encodeURIComponent!=aq?encodeURIComponent(b):b}var aR=function(){if(ah.ie&&ah.win){window.attachEvent("onunload",function(){var a=al.length;for(var b=0;b<a;b++){al[b][0].detachEvent(al[b][1],al[b][2])}var d=ag.length;for(var c=0;c<d;c++){aw(ag[c])}for(var f in ah){ah[f]=null}ah=null;for(var g in swfobject){swfobject[g]=null}swfobject=null})}}();return{registerObject:function(a,f,c,b){if(ah.w3&&a&&f){var d={};d.id=a;d.swfVersion=f;d.expressInstall=c;d.callbackFn=b;aG[aG.length]=d;ay(a,false)}else{if(b){b({success:false,id:a})}}},getObjectById:function(a){if(ah.w3){return av(a)}},embedSWF:function(o,f,k,g,c,a,b,m,h,n){var d={success:false,id:f};if(ah.w3&&!(ah.wk&&ah.wk<312)&&o&&f&&k&&g&&c){ay(f,false);aj(function(){k+="";g+="";var u={};if(h&&typeof h===aD){for(var s in h){u[s]=h[s]}}u.data=o;u.width=k;u.height=g;var r={};if(m&&typeof m===aD){for(var t in m){r[t]=m[t]}}if(b&&typeof b===aD){for(var p in b){if(typeof r.flashvars!=aq){r.flashvars+="&"+p+"="+b[p]}else{r.flashvars=p+"="+b[p]}}}if(ao(c)){var q=aA(u,r,f);if(u.id==f){ay(f,true)}d.success=true;d.ref=q}else{if(a&&au()){u.data=a;ae(u,r,f,n);return}else{ay(f,true)}}if(n){n(d)}})}else{if(n){n(d)}}},switchOffAutoHideShow:function(){aI=false},ua:ah,getFlashPlayerVersion:function(){return{major:ah.pv[0],minor:ah.pv[1],release:ah.pv[2]}},hasFlashPlayerVersion:ao,createSWF:function(a,b,c){if(ah.w3){return aA(a,b,c)}else{return undefined}},showExpressInstall:function(b,a,d,c){if(ah.w3&&au()){ae(b,a,d,c)}},removeSWF:function(a){if(ah.w3){aw(a)}},createCSS:function(b,a,c,d){if(ah.w3){az(b,a,c,d)}},addDomLoadEvent:aj,addLoadEvent:aC,getQueryParamValue:function(b){var a=aL.location.search||aL.location.hash;if(a){if(/\?/.test(a)){a=a.split("?")[1]}if(b==null){return ai(a)}var c=a.split("&");for(var d=0;d<c.length;d++){if(c[d].substring(0,c[d].indexOf("="))==b){return ai(c[d].substring((c[d].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(aU){var a=aS(ac);if(a&&aJ){a.parentNode.replaceChild(aJ,a);if(ad){ay(ad,true);if(ah.ie&&ah.win){aJ.style.display="block"}}if(ap){ap(at)}}aU=false}}}}()}Array.prototype.indexOf||(Array.prototype.indexOf=function(g,f){if(void 0===this||null===this){throw new TypeError('"this" is null or not defined')}var d=this.length>>>0;f=+f||0;Infinity===Math.abs(f)&&(f=0);0>f&&(f+=d,0>f&&(f=0));for(;f<d;f++){if(this[f]===g){return f}}return -1});Date.now||(Date.now=function(){return +new Date});if(!Function.prototype.bind){Function.prototype.bind=function(f){function c(){}if(typeof this!=="function"){throw new TypeError("Bind must be called on a function")}var b=[].slice,g=b.call(arguments,1),d=this,a=function(){return d.apply(this instanceof c?this:f||{},g.concat(b.call(arguments)))};c.prototype=d.prototype;a.prototype=new c;return a}}if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(q){function v(b,c){this.setNotifyMethod(b);this.setNotifyContext(c)}function u(f,g,c){this.name=f;this.body=g;this.type=c}function t(){}function r(){}function s(){this.subCommands=[];this.initializeMacroCommand()}function x(b,c){this.mediatorName=b||this.constructor.NAME;this.viewComponent=c}function w(b,c){this.proxyName=b||this.constructor.NAME;null!=c&&this.setData(c)}function B(b){if(null!=B.instanceMap[b]){throw Error(B.MULTITON_MSG)}this.initializeNotifier(b);B.instanceMap[b]=this;this.initializeFacade()}function A(b){if(null!=A.instanceMap[b]){throw Error(A.MULTITON_MSG)}this.multitonKey=b;A.instanceMap[this.multitonKey]=this;this.mediatorMap=[];this.observerMap=[];this.initializeView()}function z(b){if(z.instanceMap[b]){throw Error(z.MULTITON_MSG)}this.multitonKey=b;z.instanceMap[b]=this;this.proxyMap=[];this.initializeModel()}function y(b){if(null!=y.instanceMap[b]){throw Error(y.MULTITON_MSG)}this.multitonKey=b;y.instanceMap[this.multitonKey]=this;this.commandMap=[];this.initializeController()}function a(k,p,h){for(var k=k.split("."),h=h||d.global,C,o,n=0,m=k.length;n<m;n++){C=h,o=k[n],h=null==h[o]?h[o]={}:h[o]}return null==p?h:C[o]=p}null==q&&(q=window);if(!q.puremvc){v.prototype.setNotifyMethod=function(b){this.notify=b};v.prototype.setNotifyContext=function(b){this.context=b};v.prototype.getNotifyMethod=function(){return this.notify};v.prototype.getNotifyContext=function(){return this.context};v.prototype.notifyObserver=function(b){this.getNotifyMethod().call(this.getNotifyContext(),b)};v.prototype.compareNotifyContext=function(b){return b===this.context};v.prototype.notify=null;v.prototype.context=null;u.prototype.getName=function(){return this.name};u.prototype.setBody=function(b){this.body=b};u.prototype.getBody=function(){return this.body};u.prototype.setType=function(b){this.type=b};u.prototype.getType=function(){return this.type};u.prototype.toString=function(){var b="Notification Name: "+this.getName(),b=b+("\nBody:"+(null==this.body?"null":this.body.toString()));return b+="\nType:"+(null==this.type?"null":this.type)};u.prototype.name=null;u.prototype.type=null;u.prototype.body=null;t.prototype.sendNotification=function(g,h,f){var k=this.getFacade();k&&k.sendNotification(g,h,f)};t.prototype.initializeNotifier=function(b){this.multitonKey=""+b;this.facade=this.getFacade()};t.prototype.getFacade=function(){if(null==this.multitonKey){throw Error(t.MULTITON_MSG)}return B.getInstance(this.multitonKey)};t.prototype.multitonKey=null;t.MULTITON_MSG="multitonKey for this Notifier not yet initialized!";r.prototype=new t;r.prototype.constructor=r;r.prototype.execute=function(){};s.prototype=new t;s.prototype.constructor=s;s.prototype.subCommands=null;s.prototype.initializeMacroCommand=function(){};s.prototype.addSubCommand=function(b){this.subCommands.push(b)};s.prototype.execute=function(b){for(;0<this.subCommands.length;){var c=new (this.subCommands.shift());c.initializeNotifier(this.multitonKey);c.execute(b)}};x.NAME="Mediator";x.prototype=new t;x.prototype.constructor=x;x.prototype.getMediatorName=function(){return this.mediatorName};x.prototype.setViewComponent=function(b){this.viewComponent=b};x.prototype.getViewComponent=function(){return this.viewComponent};x.prototype.listNotificationInterests=function(){return[]};x.prototype.handleNotification=function(){};x.prototype.onRegister=function(){};x.prototype.onRemove=function(){};x.prototype.mediatorName=null;x.prototype.viewComponent=null;w.NAME="Proxy";w.prototype=new t;w.prototype.constructor=w;w.prototype.getProxyName=function(){return this.proxyName};w.prototype.setData=function(b){this.data=b};w.prototype.getData=function(){return this.data};w.prototype.onRegister=function(){};w.prototype.onRemove=function(){};w.prototype.proxyName=null;w.prototype.data=null;B.prototype.initializeFacade=function(){this.initializeModel();this.initializeController();this.initializeView()};B.getInstance=function(b){if(null==b){return null}null==B.instanceMap[b]&&(B.instanceMap[b]=new B(b));return B.instanceMap[b]};B.prototype.initializeController=function(){if(null==this.controller){this.controller=y.getInstance(this.multitonKey)}};B.prototype.initializeModel=function(){if(null==this.model){this.model=z.getInstance(this.multitonKey)}};B.prototype.initializeView=function(){if(null==this.view){this.view=A.getInstance(this.multitonKey)}};B.prototype.registerCommand=function(b,c){this.controller.registerCommand(b,c)};B.prototype.removeCommand=function(b){this.controller.removeCommand(b)};B.prototype.hasCommand=function(b){return this.controller.hasCommand(b)};B.prototype.registerProxy=function(b){this.model.registerProxy(b)};B.prototype.retrieveProxy=function(b){return this.model.retrieveProxy(b)};B.prototype.removeProxy=function(b){var c=null;null!=this.model&&(c=this.model.removeProxy(b));return c};B.prototype.hasProxy=function(b){return this.model.hasProxy(b)};B.prototype.registerMediator=function(b){null!=this.view&&this.view.registerMediator(b)};B.prototype.retrieveMediator=function(b){return this.view.retrieveMediator(b)};B.prototype.removeMediator=function(b){var c=null;null!=this.view&&(c=this.view.removeMediator(b));return c};B.prototype.hasMediator=function(b){return this.view.hasMediator(b)};B.prototype.sendNotification=function(f,g,c){this.notifyObservers(new u(f,g,c))};B.prototype.notifyObservers=function(b){null!=this.view&&this.view.notifyObservers(b)};B.prototype.initializeNotifier=function(b){this.multitonKey=b};B.hasCore=function(b){return null!=B.instanceMap[b]};B.removeCore=function(b){null!=B.instanceMap[b]&&(z.removeModel(b),A.removeView(b),y.removeController(b),delete B.instanceMap[b])};B.prototype.controller=null;B.prototype.model=null;B.prototype.view=null;B.prototype.multitonKey=null;B.instanceMap=[];B.MULTITON_MSG="Facade instance for this Multiton key already constructed!";A.prototype.initializeView=function(){};A.getInstance=function(b){if(null==b){return null}null==A.instanceMap[b]&&(A.instanceMap[b]=new A(b));return A.instanceMap[b]};A.prototype.registerObserver=function(b,c){null!=this.observerMap[b]?this.observerMap[b].push(c):this.observerMap[b]=[c]};A.prototype.notifyObservers=function(g){if(null!=this.observerMap[g.getName()]){for(var k=this.observerMap[g.getName()],f=[],m,h=0;h<k.length;h++){m=k[h],f.push(m)}for(h=0;h<f.length;h++){m=f[h],m.notifyObserver(g)}}};A.prototype.removeObserver=function(g,h){for(var f=this.observerMap[g],k=0;k<f.length;k++){if(!0==f[k].compareNotifyContext(h)){f.splice(k,1);break}}0==f.length&&delete this.observerMap[g]};A.prototype.registerMediator=function(g){if(null==this.mediatorMap[g.getMediatorName()]){g.initializeNotifier(this.multitonKey);this.mediatorMap[g.getMediatorName()]=g;var h=g.listNotificationInterests();if(0<h.length){for(var f=new v(g.handleNotification,g),k=0;k<h.length;k++){this.registerObserver(h[k],f)}}g.onRegister()}};A.prototype.retrieveMediator=function(b){return this.mediatorMap[b]};A.prototype.removeMediator=function(g){var h=this.mediatorMap[g];if(h){for(var f=h.listNotificationInterests(),k=0;k<f.length;k++){this.removeObserver(f[k],h)}delete this.mediatorMap[g];h.onRemove()}return h};A.prototype.hasMediator=function(b){return null!=this.mediatorMap[b]};A.removeView=function(b){delete A.instanceMap[b]};A.prototype.mediatorMap=null;A.prototype.observerMap=null;A.instanceMap=[];A.prototype.multitonKey=null;A.MULTITON_MSG="View instance for this Multiton key already constructed!";z.prototype.initializeModel=function(){};z.getInstance=function(b){if(null==b){return null}null==z.instanceMap[b]&&(z.instanceMap[b]=new z(b));return z.instanceMap[b]};z.prototype.registerProxy=function(b){b.initializeNotifier(this.multitonKey);this.proxyMap[b.getProxyName()]=b;b.onRegister()};z.prototype.retrieveProxy=function(b){return this.proxyMap[b]};z.prototype.hasProxy=function(b){return null!=this.proxyMap[b]};z.prototype.removeProxy=function(f){var c=this.proxyMap[f];c&&(this.proxyMap[f]=null,c.onRemove());return c};z.removeModel=function(b){delete z.instanceMap[b]};z.prototype.proxyMap=null;z.instanceMap=[];z.MULTITON_MSG="Model instance for this Multiton key already constructed!";y.prototype.initializeController=function(){this.view=A.getInstance(this.multitonKey)};y.getInstance=function(b){if(null==b){return null}null==this.instanceMap[b]&&(this.instanceMap[b]=new this(b));return this.instanceMap[b]};y.prototype.executeCommand=function(f){var c=this.commandMap[f.getName()];null!=c&&(c=new c,c.initializeNotifier(this.multitonKey),c.execute(f))};y.prototype.registerCommand=function(f,c){null==this.commandMap[f]&&this.view.registerObserver(f,new v(this.executeCommand,this));this.commandMap[f]=c};y.prototype.hasCommand=function(b){return null!=this.commandMap[b]};y.prototype.removeCommand=function(b){this.hasCommand(b)&&(this.view.removeObserver(b,this),this.commandMap[b]=null)};y.removeController=function(b){delete this.instanceMap[b]};y.prototype.view=null;y.prototype.commandMap=null;y.prototype.multitonKey=null;y.instanceMap=[];y.MULTITON_MSG="controller key for this Multiton key already constructed";var d={global:function(){return this}(),extend:function(g,f){if("function"!==typeof g){throw new TypeError("#extend- child should be Function")}if("function"!==typeof f){throw new TypeError("#extend- parent should be Function")}if(f!==g){var h=new Function;h.prototype=f.prototype;g.prototype=new h;return g.prototype.constructor=g}},decorate:function(g,f){for(var h in f){g[h]=f[h]}return g}};q.puremvc={View:A,Model:z,Controller:y,SimpleCommand:r,MacroCommand:s,Facade:B,Mediator:x,Observer:v,Notification:u,Notifier:t,Proxy:w,define:function(m,k,D){m||(m={});var C=m.name,p=m.parent,o="function"===typeof p,n=m.scope||null;if("parent" in m&&!o){throw new TypeError("Class parent must be Function")}if(m.hasOwnProperty("constructor")){if(m=m.constructor,"function"!==typeof m){throw new TypeError("Class constructor must be Function")}}else{m=o?function(){p.apply(this,arguments)}:new Function}o&&d.extend(m,p);if(k){o=m.prototype,d.decorate(o,k),o.constructor=m}D&&d.decorate(m,D);if(C){if("string"!==typeof C){throw new TypeError("Class name must be primitive string")}a(C,m,n)}return m},declare:a}}})(this);var swfobject=function(){function ap(){if(!ao){try{var m=ax.getElementsByTagName("body")[0].appendChild(ax.createElement("span"));m.parentNode.removeChild(m)}catch(d){return}ao=!0;for(var m=ak.length,n=0;n<m;n++){ak[n]()}}}function X(d){ao?d():ak[ak.length]=d}function s(m){if("undefined"!=typeof au.addEventListener){au.addEventListener("load",m,!1)}else{if("undefined"!=typeof ax.addEventListener){ax.addEventListener("load",m,!1)}else{if("undefined"!=typeof au.attachEvent){c(au,"onload",m)}else{if("function"==typeof au.onload){var d=au.onload;au.onload=function(){d();m()}}else{au.onload=m}}}}}function b(){var m=ax.getElementsByTagName("body")[0],d=ax.createElement("object");d.setAttribute("type","application/x-shockwave-flash");var p=m.appendChild(d);if(p){var n=0;(function(){if("undefined"!=typeof p.GetVariable){var r=p.GetVariable("$version");r&&(r=r.split(" ")[1].split(","),aw.pv=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)])}else{if(10>n){n++;setTimeout(arguments.callee,10);return}}m.removeChild(d);p=null;af()})()}else{af()}}function af(){var x=ar.length;if(0<x){for(var w=0;w<x;w++){var v=ar[w].id,t=ar[w].callbackFn,r={success:!1,id:v};if(0<aw.pv[0]){var u=at(v);if(u){if(!aj(ar[w].swfVersion)||aw.wk&&312>aw.wk){if(ar[w].expressInstall&&ae()){r={};r.data=ar[w].expressInstall;r.width=u.getAttribute("width")||"0";r.height=u.getAttribute("height")||"0";u.getAttribute("class")&&(r.styleclass=u.getAttribute("class"));u.getAttribute("align")&&(r.align=u.getAttribute("align"));for(var p={},u=u.getElementsByTagName("param"),n=u.length,m=0;m<n;m++){"movie"!=u[m].getAttribute("name").toLowerCase()&&(p[u[m].getAttribute("name")]=u[m].getAttribute("value"))}ad(r,p,v,t)}else{a(u),t&&t(r)}}else{an(v,!0),t&&(r.success=!0,r.ref=ac(v),t(r))}}}else{an(v,!0),t&&((v=ac(v))&&"undefined"!=typeof v.SetVariable&&(r.success=!0,r.ref=v),t(r))}}}}function ac(m){var d=null;(m=at(m))&&"OBJECT"==m.nodeName&&("undefined"!=typeof m.SetVariable?d=m:(m=m.getElementsByTagName("object")[0])&&(d=m));return d}function ae(){return !ai&&aj("6.0.65")&&(aw.win||aw.mac)&&!(aw.wk&&312>aw.wk)}function ad(m,d,r,p){ai=!0;ab=p||null;q={success:!1,id:r};var n=at(r);if(n){"OBJECT"==n.nodeName?(al=aa(n),ah=null):(al=n,ah=r);m.id="SWFObjectExprInst";if("undefined"==typeof m.width||!/%$/.test(m.width)&&310>parseInt(m.width,10)){m.width="310"}if("undefined"==typeof m.height||!/%$/.test(m.height)&&137>parseInt(m.height,10)){m.height="137"}ax.title=ax.title.slice(0,47)+" - Flash Player Installation";p=aw.ie&&aw.win?"ActiveX":"PlugIn";p="MMredirectURL="+encodeURI(au.location).toString().replace(/&/g,"%26")+"&MMplayerType="+p+"&MMdoctitle="+ax.title;d.flashvars="undefined"!=typeof d.flashvars?d.flashvars+("&"+p):p;aw.ie&&aw.win&&4!=n.readyState&&(p=ax.createElement("div"),r+="SWFObjectNew",p.setAttribute("id",r),n.parentNode.insertBefore(p,n),n.style.display="none",function(){4==n.readyState?n.parentNode.removeChild(n):setTimeout(arguments.callee,10)}());Z(m,d,r)}}function a(m){if(aw.ie&&aw.win&&4!=m.readyState){var d=ax.createElement("div");m.parentNode.insertBefore(d,m);d.parentNode.replaceChild(aa(m),d);m.style.display="none";(function(){4==m.readyState?m.parentNode.removeChild(m):setTimeout(arguments.callee,10)})()}else{m.parentNode.replaceChild(aa(m),m)}}function aa(m){var d=ax.createElement("div");if(aw.win&&aw.ie){d.innerHTML=m.innerHTML}else{if(m=m.getElementsByTagName("object")[0]){if(m=m.childNodes){for(var p=m.length,n=0;n<p;n++){1==m[n].nodeType&&"PARAM"==m[n].nodeName||8==m[n].nodeType||d.appendChild(m[n].cloneNode(!0))}}}}return d}function Z(w,v,u){var t,r=at(u);if(aw.wk&&312>aw.wk){return t}if(r){if("undefined"==typeof w.id&&(w.id=u),aw.ie&&aw.win){var d="",p;for(p in w){w[p]!=Object.prototype[p]&&("data"==p.toLowerCase()?v.movie=w[p]:"styleclass"==p.toLowerCase()?d+=' class="'+w[p]+'"':"classid"!=p.toLowerCase()&&(d+=" "+p+'="'+w[p]+'"'))}p="";for(var n in v){v[n]!=Object.prototype[n]&&(p+='<param name="'+n+'" value="'+v[n]+'" />')}r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+d+">"+p+"</object>";ag[ag.length]=w.id;t=at(w.id)}else{n=ax.createElement("object");n.setAttribute("type","application/x-shockwave-flash");for(var m in w){w[m]!=Object.prototype[m]&&("styleclass"==m.toLowerCase()?n.setAttribute("class",w[m]):"classid"!=m.toLowerCase()&&n.setAttribute(m,w[m]))}for(d in v){v[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&(w=n,p=d,m=v[d],u=ax.createElement("param"),u.setAttribute("name",p),u.setAttribute("value",m),w.appendChild(u))}r.parentNode.replaceChild(n,r);t=n}}return t}function o(m){var d=at(m);d&&"OBJECT"==d.nodeName&&(aw.ie&&aw.win?(d.style.display="none",function(){if(4==d.readyState){var p=at(m);if(p){for(var n in p){"function"==typeof p[n]&&(p[n]=null)}p.parentNode.removeChild(p)}}else{setTimeout(arguments.callee,10)}}()):d.parentNode.removeChild(d))}function at(m){var d=null;try{d=ax.getElementById(m)}catch(n){}return d}function c(m,d,n){m.attachEvent(d,n);am[am.length]=[m,d,n]}function aj(m){var d=aw.pv;m=m.split(".");m[0]=parseInt(m[0],10);m[1]=parseInt(m[1],10)||0;m[2]=parseInt(m[2],10)||0;return d[0]>m[0]||d[0]==m[0]&&d[1]>m[1]||d[0]==m[0]&&d[1]==m[1]&&d[2]>=m[2]?!0:!1}function k(m,d,r,p){if(!aw.ie||!aw.mac){var n=ax.getElementsByTagName("head")[0];n&&(r=r&&"string"==typeof r?r:"screen",p&&(Y=av=null),av&&Y==r||(p=ax.createElement("style"),p.setAttribute("type","text/css"),p.setAttribute("media",r),av=n.appendChild(p),aw.ie&&aw.win&&"undefined"!=typeof ax.styleSheets&&0<ax.styleSheets.length&&(av=ax.styleSheets[ax.styleSheets.length-1]),Y=r),aw.ie&&aw.win?av&&"object"==typeof av.addRule&&av.addRule(m,d):av&&"undefined"!=typeof ax.createTextNode&&av.appendChild(ax.createTextNode(m+" {"+d+"}")))}}function an(m,d){if(h){var n=d?"visible":"hidden";ao&&at(m)?at(m).style.visibility=n:k("#"+m,"visibility:"+n)}}function g(d){return null!=/[\\\"<>\.;]/.exec(d)&&"undefined"!=typeof encodeURIComponent?encodeURIComponent(d):d}var au=window,ax=document,aq=navigator,f=!1,ak=[function(){f?b():af()}],ar=[],ag=[],am=[],al,ah,ab,q,ao=!1,ai=!1,av,Y,h=!0,aw=function(){var w="undefined"!=typeof ax.getElementById&&"undefined"!=typeof ax.getElementsByTagName&&"undefined"!=typeof ax.createElement,v=aq.userAgent.toLowerCase(),u=aq.platform.toLowerCase(),r=u?/win/.test(u):/win/.test(v),u=u?/mac/.test(u):/mac/.test(v),v=/webkit/.test(v)?parseFloat(v.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,p=!+"\v1",t=[0,0,0],n=null;if("undefined"!=typeof aq.plugins&&"object"==typeof aq.plugins["Shockwave Flash"]){!(n=aq.plugins["Shockwave Flash"].description)||"undefined"!=typeof aq.mimeTypes&&aq.mimeTypes["application/x-shockwave-flash"]&&!aq.mimeTypes["application/x-shockwave-flash"].enabledPlugin||(f=!0,p=!1,n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),t[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10),t[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10),t[2]=/[a-zA-Z]/.test(n)?parseInt(n.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0)}else{if("undefined"!=typeof au.ActiveXObject){try{var m=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");m&&(n=m.GetVariable("$version"))&&(p=!0,n=n.split(" ")[1].split(","),t=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)])}catch(d){}}}return{w3:w,pv:t,wk:v,ie:p,win:r,mac:u}}();(function(){aw.w3&&(("undefined"!=typeof ax.readyState&&"complete"==ax.readyState||"undefined"==typeof ax.readyState&&(ax.getElementsByTagName("body")[0]||ax.body))&&ap(),ao||("undefined"!=typeof ax.addEventListener&&ax.addEventListener("DOMContentLoaded",ap,!1),aw.ie&&aw.win&&(ax.attachEvent("onreadystatechange",function(){"complete"==ax.readyState&&(ax.detachEvent("onreadystatechange",arguments.callee),ap())}),au==top&&function(){if(!ao){try{ax.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,0);return}ap()}}()),aw.wk&&function(){ao||(/loaded|complete/.test(ax.readyState)?ap():setTimeout(arguments.callee,0))}(),s(ap)))})();(function(){aw.ie&&aw.win&&window.attachEvent("onunload",function(){for(var m=am.length,d=0;d<m;d++){am[d][0].detachEvent(am[d][1],am[d][2])}m=ag.length;for(d=0;d<m;d++){o(ag[d])}for(var p in aw){aw[p]=null}aw=null;for(var n in swfobject){swfobject[n]=null}swfobject=null})})();return{registerObject:function(n,m,t,p){if(aw.w3&&n&&m){var r={};r.id=n;r.swfVersion=m;r.expressInstall=t;r.callbackFn=p;ar[ar.length]=r;an(n,!1)}else{p&&p({success:!1,id:n})}},getObjectById:function(d){if(aw.w3){return ac(d)}},embedSWF:function(B,A,z,y,x,m,w,v,u,t){var r={success:!1,id:A};aw.w3&&!(aw.wk&&312>aw.wk)&&B&&A&&z&&y&&x?(an(A,!1),X(function(){z+="";y+="";var C={};if(u&&"object"===typeof u){for(var d in u){C[d]=u[d]}}C.data=B;C.width=z;C.height=y;d={};if(v&&"object"===typeof v){for(var p in v){d[p]=v[p]}}if(w&&"object"===typeof w){for(var n in w){d.flashvars="undefined"!=typeof d.flashvars?d.flashvars+("&"+n+"="+w[n]):n+"="+w[n]}}if(aj(x)){p=Z(C,d,A),C.id==A&&an(A,!0),r.success=!0,r.ref=p}else{if(m&&ae()){C.data=m;ad(C,d,A,t);return}an(A,!0)}t&&t(r)})):t&&t(r)},switchOffAutoHideShow:function(){h=!1},ua:aw,getFlashPlayerVersion:function(){return{major:aw.pv[0],minor:aw.pv[1],release:aw.pv[2]}},hasFlashPlayerVersion:aj,createSWF:function(m,d,n){if(aw.w3){return Z(m,d,n)}},showExpressInstall:function(n,m,r,p){aw.w3&&ae()&&ad(n,m,r,p)},removeSWF:function(d){aw.w3&&o(d)},createCSS:function(n,m,r,p){aw.w3&&k(n,m,r,p)},addDomLoadEvent:X,addLoadEvent:s,callDomLoadFunctions:ap,getQueryParamValue:function(m){var d=ax.location.search||ax.location.hash;if(d){/\?/.test(d)&&(d=d.split("?")[1]);if(null==m){return g(d)}for(var d=d.split("&"),n=0;n<d.length;n++){if(d[n].substring(0,d[n].indexOf("="))==m){return g(d[n].substring(d[n].indexOf("=")+1))}}}return""},expressInstallCallback:function(){if(ai){var d=at("SWFObjectExprInst");d&&al&&(d.parentNode.replaceChild(al,d),ah&&(an(ah,!0),aw.ie&&aw.win&&(al.style.display="block")),ab&&ab(q));ai=!1}}}}();(function(){var global,version,_ref;function AkamaiSDKManager(){var legacyCheck,sdk,versions,_this=this;sdk=null;this.getSDK=function(){return sdk};this.setSDK=function(newSDK){var key,value;sdk=newSDK;legacyCheck();for(key in sdk){value=sdk[key];window[key]=value}return sdk};this.saveSDK=function(version,object){var key,value,_ref;if(!(object!=null)||!(version!=null)||version===""){return}if(!(object.main!=null)){for(key in object){value=object[key];if(!((value!=null?value.VERSION:void 0)===version)){continue}object.main=value;break}}if((_ref=object.version)==null){object.version=version}versions.push(object);this[version]=object;return object};versions=[];this.getVersions=function(){return versions.slice()};this.getVersion=function(version){return this[version]};this.setVersion=function(version){sdk=this.getVersion(version);if(!(sdk!=null)){return null}this.setSDK(sdk);return sdk};this.revert=function(){return this.setSDK(versions[0])};this.noConflict=function(){var current;current=this.getSDK();this.revert();return current};this.create=(function(){var Creator;Creator=function(cls,args){this.prototype=cls.prototype;return cls.apply(this,args)};return function(args){return new Creator(sdk.main,arguments)}})();legacyCheck=function(){var key,obj,value,_ref,_ref1;if((_ref=window.com)!=null?(_ref1=_ref.akamai)!=null?_ref1.amp:void 0:void 0){for(key in window){value=window[key];if((value===window.AMP||value===window.AMPremier)&&((value!=null?value.VERSION:void 0)!=null)&&value.VERSION!==""&&value.VERSION!==(sdk!=null?sdk.version:void 0)&&(!(_this[value.VERSION]!=null))){obj={};obj.main=value;obj.com=window.com;if(window.AMP){obj.AMP=window.AMP}if(window.AMPPremier){obj.AMPremier=window.AMPPremier}if(window.Utils){obj.Utils=window.Utils}if(window.QueryString){obj.QueryString=window.QueryString}if(window.QueryParams){obj.QueryParams=window.QueryParams}_this.saveSDK(value.VERSION,obj);break}}}};legacyCheck()}if((_ref=window.AKAMAI_MEDIA_PLAYER)==null){window.AKAMAI_MEDIA_PLAYER=new AkamaiSDKManager()}version="AMP Premier v2.19.0.0008";if(!(window.AKAMAI_MEDIA_PLAYER[version]!=null)){global=window.AKAMAI_MEDIA_PLAYER[version]={};function __hasProp(prop){return{}["hasOwnProperty"](prop)}function __extends(child,parent){for(var key in parent){if(__hasProp.call(parent,key)){child[key]=parent[key]}}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child}function __indexOf(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item){return i}}return -1}function __bind(fn,me){return function(){return fn.apply(me,arguments)}}function ModuleProxy(data,name){this.config=data;ModuleProxy.__super__.constructor.call(this,name)}__extends(ModuleProxy,puremvc.Proxy);ModuleProxy.NAME="ModuleProxy";ModuleProxy.prototype.defaults=null;ModuleProxy.prototype.config=null;ModuleProxy.prototype.initializeNotifier=function(key){ModuleProxy.__super__.initializeNotifier.call(this,key);this.createData()};ModuleProxy.prototype.createData=function(){this.setData(this.config)};ModuleProxy.prototype.setData=function(data){var dflt,key,obj,value,_ref;if(data==null){data={}}obj={};_ref=this.defaults;for(key in _ref){dflt=_ref[key];value=key in data?data[key]:dflt;obj[key]=value}ModuleProxy.__super__.setData.call(this,obj);return data};function Module(viewComponent){var item,_i,_len,_ref;this.viewComponent=viewComponent;Module.__super__.constructor.call(this,this.getModuleName()+"-"+Date.now());this.dispatcher=new EventDispatcher(this);this.notificationEventMap={};_ref=this.listNotificationEvents();for(_i=0,_len=_ref.length;_i<_len;_i++){item=_ref[_i];this.notificationEventMap[item]=true}this.logger=Logger;this.moduleMap={}}__extends(Module,puremvc.Facade);Module.prototype.logger=null;Module.prototype.config=null;Module.prototype.moduleName=null;Module.prototype.moduleMap=null;Module.prototype.viewComponent=null;Module.prototype.dispatcher=null;Module.prototype.notificationEventMap=null;Module.prototype.oninitialized=null;Module.prototype.parentModule=null;Module.prototype.initialize=function(config,parentModule){this.config=config;this.parentModule=parentModule;this.loadResources()};Module.prototype.loadResources=function(){AMP.addResources(this.config.resources,this.resourcesLoaded.bind(this))};Module.prototype.resourcesLoaded=function(){this.createFramework();if(typeof this.oninitialized==="function"){this.oninitialized(this)}};Module.prototype.createFramework=function(){this.createModel();this.createController();this.createView()};Module.prototype.createModel=function(){this.registerProxy(new ModuleProxy(this.config))};Module.prototype.createView=function(){};Module.prototype.createController=function(){};Module.prototype.getModuleName=function(){return this.moduleName};Module.prototype.getConfig=function(){return this.config};Module.prototype.hasModule=function(moduleName){return this.moduleMap[moduleName]!=null};Module.prototype.getModules=function(){var key,modules,value,_ref;modules={};_ref=this.moduleMap;for(key in _ref){value=_ref[key];modules[key]=value.module}return modules};Module.prototype.registerModule=function(module){var adaptor,moduleName;moduleName=module.getModuleName();if(!(module!=null)||(this.moduleMap[moduleName]!=null)){return}adaptor=new ModuleAdapter(module);this.moduleMap[moduleName]=adaptor;this.registerMediator(adaptor);module.onRegister()};Module.prototype.retrieveModule=function(moduleName){return this.moduleMap[moduleName].module};Module.prototype.removeModule=function(moduleName){var adaptor;adaptor=this.moduleMap[moduleName];if(!(adaptor!=null)){return}delete this.moduleMap[moduleName];this.removeMediator(moduleName);adaptor.module.onRemove();return adaptor.module};Module.prototype.listNotificationInterests=function(){return[]};Module.prototype.listNotificationPublications=function(){return[]};Module.prototype.listNotificationEvents=function(){return[]};Module.prototype.sendNotification=function(notificationName,body,type){Module.__super__.sendNotification.call(this,notificationName,body,type);this.postProcessNotification(notificationName,body,type)};Module.prototype.postProcessNotification=function(notificationName,body,type){var event;event=notificationName===Notifications.DISPATCH_EVENT?body:this.createNotificationEvent(notificationName,body,type);if(event!=null){this.logNotificationEvent(event);this.dispatchEvent(event)}};Module.prototype.createNotificationEvent=function(notificationName,body,type){var event,_ref;if(((_ref=this.notificationEventMap)!=null?_ref[notificationName]:void 0)!==true){return}event=new Event(notificationName,body);event.player=this.player||this;return event};Module.prototype.logNotificationEvent=function(event){this.logger.log("["+(this.getModuleName().toUpperCase())+" EVENT]",event.type,event)};Module.prototype.getViewComponent=function(){return this.viewComponent};Module.prototype.setViewComponent=function(viewComponent){this.viewComponent=viewComponent;return viewComponent};Module.prototype.onRegister=function(){};Module.prototype.onRemove=function(){};Module.prototype.destroy=function(){var key,module,_i,_len,_ref;if(this.viewComponent!=null){this.viewComponent.innerHTML="";this.viewComponent.className=""}_ref=this.getModules();for(_i=0,_len=_ref.length;_i<_len;_i++){module=_ref[_i];this.removeModule(module.getModuleName());module.destroy()}puremvc.Facade.removeCore(this.multitonKey);for(key in this){this[key]=null;delete this[key]}};Module.prototype.addEventListener=function(type,func){this.dispatcher.addEventListener(type,func)};Module.prototype.dispatchEvent=function(event){this.dispatcher.dispatchEvent(event)};Module.prototype.removeEventListener=function(type,func){this.dispatcher.removeEventListener(type,func)};function XMLUtils(){}XMLUtils.createTextContent=function(xml,text){var node;node=/[\&<>]/.test(text)?xml.createCDATASection(text):xml.createTextNode(text);return node};XMLUtils.updateTextContent=function(node,str){var text;text=XMLUtils.createTextContent(node.ownerDocument,str);node.removeChild(node.childNodes[0]);node.appendChild(text);return node};XMLUtils.serialize=function(xml){var serializer;if(!(xml!=null)){return}if(typeof xml==="string"){return xml}try{serializer=new XMLSerializer();return serializer.serializeToString(xml)}catch(err1){try{serializer=document.implementation.createLSSerializer();return xmlSerializer.writeToString(xml)}catch(err3){try{return xml.xml}catch(err2){}}}};XMLUtils.parse=function(text){var parser,xmlDoc;if(window.DOMParser){parser=new DOMParser();xmlDoc=parser.parseFromString(text,"text/xml")}else{xmlDoc=new ActiveXObject("Microsoft.XMLDOM");xmlDoc.async=false;xmlDoc.loadXML(text)}return xmlDoc};function PluginsInitializedCommand(){PluginsInitializedCommand.__super__.constructor.call(this)}__extends(PluginsInitializedCommand,puremvc.SimpleCommand);PluginsInitializedCommand.prototype.execute=function(notification){var media,_ref;this.sendNotification(Notifications.READY,this.facade.config);media=(_ref=this.facade.config)!=null?_ref.media:void 0;if(media!=null){this.sendNotification(Notifications.SET_MEDIA,media)}};function InstallPlayer(config,viewComponent){var anchor,div,img,message;viewComponent.className=Namespace.PREFIX+"player";div=UI.create("install-flash",viewComponent);message=UI.create(null,div,"p","To view this page ensure that Adobe Flash Player version 10.2.0 or greater is installed.");anchor=UI.create(null,div,"a");anchor.href="http://www.adobe.com/go/getflashplayer";img=UI.create(null,anchor,"img");img.src="//www.adobe.com/images/shared/download_buttons/get_flash_player.gif";img.alt="Get Adobe Flash player"}InstallPlayer.prototype.getModules=function(){return[]};function Manager(){this.map={}}Manager.prototype.map=null;Manager.prototype.add=function(key,value){this.map[key]=value};Manager.prototype.item=function(key){return this.map[key]};Manager.prototype.remove=function(key){var item;item=this.map[key];if(item!=null){this.map[key]=null;delete this.map[key]}return item};function ResourceManager(){ResourceManager.__super__.constructor.call(this)}__extends(ResourceManager,Manager);ResourceManager.prototype.add=function(resource,callback){var parent;if(this.item(resource.src)!=null){callback();return}ResourceManager.__super__.add.call(this,resource.src,resource);parent=document.body;if(resource.type===Utils.mimeTypes.js){Utils.loadScript(resource.src,callback,parent)}else{if(resource.type===Utils.mimeTypes.css){Utils.loadStyleSheet(resource.src);callback()}else{callback()}}};ResourceManager.prototype.addResources=function(resources,callback){var complete,index,next,_this=this;if(!(resources!=null?resources.length:void 0)>0){callback();return}index=0;next=function(){_this.add(resources[index],complete)};complete=function(){index++;if(index>=resources.length){callback()}else{next()}};next()};function ToggleActiveCommand(){ToggleActiveCommand.__super__.constructor.call(this)}__extends(ToggleActiveCommand,puremvc.SimpleCommand);ToggleActiveCommand.prototype.execute=function(notification){var appProxy,state;appProxy=this.facade.retrieveProxy(ApplicationStateProxy.NAME);state=appProxy.getActiveState()===ActiveState.ACTIVE?ActiveState.INACTIVE:ActiveState.ACTIVE;this.sendNotification(Notifications.CHANGE_ACTIVE_STATE,state)};function TogglePlayPauseCommand(){TogglePlayPauseCommand.__super__.constructor.call(this)}__extends(TogglePlayPauseCommand,puremvc.SimpleCommand);TogglePlayPauseCommand.prototype.execute=function(notification){var appStateProxy,note,playbackProxy;appStateProxy=this.facade.retrieveProxy(ApplicationStateProxy.NAME);playbackProxy=this.facade.retrieveProxy(PlaybackProxy.NAME);switch(appStateProxy.getPlayState()){case PlayState.ENDED:note=Notifications.REPLAY;break;case PlayState.PAUSED:case PlayState.READY:note=Notifications.PLAY;break;case PlayState.PLAYING:note=Notifications.PAUSE;break;case PlayState.WAITING:if(this.facade.getMediaElement().paused===true){note=Notifications.PLAY}}this.sendNotification(note,true)};function ToggleFullScreenCommand(){ToggleFullScreenCommand.__super__.constructor.call(this)}__extends(ToggleFullScreenCommand,puremvc.SimpleCommand);ToggleFullScreenCommand.prototype.execute=function(notification){var appProxy,state;appProxy=this.facade.retrieveProxy(ApplicationStateProxy.NAME);state=appProxy.getDisplayState()===DisplayState.FULL_SCREEN?DisplayState.NORMAL:DisplayState.FULL_SCREEN;this.sendNotification(Notifications.CHANGE_DISPLAY_STATE,state)};function PlayCommand(){PlayCommand.__super__.constructor.call(this)}__extends(PlayCommand,puremvc.MacroCommand);PlayCommand.prototype.initializeMacroCommand=function(){this.addSubCommand(PlayRequestCommand)};PlayCommand.prototype.execute=function(notification){var mediaProxy,playbackProxy,userInitiated;PlayCommand.__super__.execute.call(this,notification);userInitiated=notification.getBody();mediaProxy=this.facade.retrieveProxy(MediaProxy.NAME);playbackProxy=this.facade.retrieveProxy(PlaybackProxy.NAME);if(userInitiated&&playbackProxy.initialized!==true){this.sendNotification(Notifications.INITIALIZED)}if(playbackProxy.initialized!==true||(!mediaProxy.getSrc()&&!mediaProxy.getSource())){return}if(!playbackProxy.getStarted()){this.sendNotification(Notifications.START)}playbackProxy.play()};function PauseCommand(){PauseCommand.__super__.constructor.call(this)}__extends(PauseCommand,puremvc.SimpleCommand);PauseCommand.prototype.execute=function(notification){var playbackProxy;playbackProxy=this.facade.retrieveProxy(PlaybackProxy.NAME);playbackProxy.pause();this.sendNotification(Notifications.CHANGE_ACTIVE_STATE,ActiveState.ACTIVE)};var FullscreenMode={EXTERNAL:"external"};var ControlsMode={PERSISTENT:"persistent",NONE:"none"};function PausedCommand(){PausedCommand.__super__.constructor.call(this)}__extends(PausedCommand,puremvc.SimpleCommand);PausedCommand.prototype.execute=function(notification){this.sendNotification(Notifications.DISPATCH_EVENT,new Event(Notifications.PAUSED))};function ChangeAutoplayCommand(){ChangeAutoplayCommand.__super__.constructor.call(this)}__extends(ChangeAutoplayCommand,puremvc.SimpleCommand);ChangeAutoplayCommand.prototype.execute=function(notification){var proxy;proxy=this.facade.retrieveProxy(ConfigurationProxy.NAME);proxy.setAutoplay(notification.getBody())};function ChangeLoopCommand(){ChangeLoopCommand.__super__.constructor.call(this)}__extends(ChangeLoopCommand,puremvc.SimpleCommand);ChangeLoopCommand.prototype.execute=function(notification){var proxy;proxy=this.facade.retrieveProxy(ConfigurationProxy.NAME);proxy.setLoop(notification.getBody())};function ChangeVolumeCommand(){ChangeVolumeCommand.__super__.constructor.call(this)}__extends(ChangeVolumeCommand,puremvc.SimpleCommand);ChangeVolumeCommand.prototype.execute=function(notification){var proxy;proxy=this.facade.retrieveProxy(PlaybackProxy.NAME);proxy.setVolume(notification.getBody())};function MediaValidatedCommand(){MediaValidatedCommand.__super__.constructor.call(this)}__extends(MediaValidatedCommand,puremvc.SimpleCommand);MediaValidatedCommand.prototype.execute=function(notification){var media;media=notification.getBody();this.sendNotification(Notifications.MEDIA_CHANGE,media);if(this.facade.getAutoplay()===true){this.sendNotification(Notifications.PLAY)}};function SeekCommand(){SeekCommand.__super__.constructor.call(this)}__extends(SeekCommand,puremvc.SimpleCommand);SeekCommand.prototype.execute=function(notification){var handler,mediaProxy,playbackProxy,time,video;time=notification.getBody();playbackProxy=this.facade.retrieveProxy(PlaybackProxy.NAME);mediaProxy=this.facade.retrieveProxy(MediaProxy.NAME);if(time===0&&mediaProxy.getType()===Utils.mimeTypes.m3u8){time=0.25}video=this.facade.getMediaElement();if(video.readyState===0){handler=function(event){video.removeEventListener("loadedmetadata",handler,false);return playbackProxy.setCurrentTime(time)};video.addEventListener("loadedmetadata",handler,false)}else{playbackProxy.setCurrentTime(time)}this.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.WAITING);this.sendNotification(Notifications.DISPLAY_TIME,{currentTime:time,duration:playbackProxy.getDuration()});this.sendNotification(Notifications.CHANGE_ACTIVE_STATE,ActiveState.ACTIVE)};function SeekingCommand(){SeekingCommand.__super__.constructor.call(this)}__extends(SeekingCommand,puremvc.SimpleCommand);SeekingCommand.prototype.execute=function(notification){var app;app=this.facade.retrieveProxy(ApplicationStateProxy.NAME);app.setSeeking(true)};function SeekedCommand(){SeekedCommand.__super__.constructor.call(this)}__extends(SeekedCommand,puremvc.SimpleCommand);SeekedCommand.prototype.execute=function(notification){var app,device,proxy,src;proxy=this.facade.retrieveProxy(PlaybackProxy.NAME);src=proxy.getSrc();app=this.facade.retrieveProxy(ApplicationStateProxy.NAME);app.setSeeking(false);device=Utils.getDevice();if(device==="desktop"||(device==="android"&&/\.mp3$/.test(src))){this.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.PLAYING)}};function ReplayCommand(){ReplayCommand.__super__.constructor.call(this)}__extends(ReplayCommand,puremvc.SimpleCommand);ReplayCommand.prototype.execute=function(notification){var playbackProxy;playbackProxy=this.facade.retrieveProxy(PlaybackProxy.NAME);playbackProxy.setCurrentTime(0.25);this.sendNotification(Notifications.PLAY);this.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.PLAYING)};function EndCommand(){EndCommand.__super__.constructor.call(this)}__extends(EndCommand,puremvc.SimpleCommand);EndCommand.prototype.execute=function(notification){var playbackProxy,time;time=notification.getBody();playbackProxy=this.facade.retrieveProxy(PlaybackProxy.NAME);playbackProxy.pause();if(playbackProxy.getCurrentTime()!==playbackProxy.getDuration()){playbackProxy.setCurrentTime(playbackProxy.getDuration())}};function EndedCommand(){EndedCommand.__super__.constructor.call(this)}__extends(EndedCommand,puremvc.SimpleCommand);EndedCommand.prototype.execute=function(notification){var config;config=this.facade.retrieveProxy(ConfigurationProxy.NAME);if(config.getLoop()===true){this.sendNotification(Notifications.REPLAY)}else{this.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.ENDED);this.sendNotification(Notifications.CHANGE_ACTIVE_STATE,ActiveState.ACTIVE)}};function StartCommand(){StartCommand.__super__.constructor.call(this)}__extends(StartCommand,puremvc.SimpleCommand);StartCommand.prototype.execute=function(notification){var mediaProxy;mediaProxy=this.facade.retrieveProxy(MediaProxy.NAME);this.sendNotification(Notifications.DISPLAY_TIME,{currentTime:0,duration:mediaProxy.getDuration()});this.sendNotification(Notifications.STARTED,notification.getBody());this.sendNotification(Notifications.CHANGE_ACTIVE_STATE,ActiveState.INACTIVE)};function IsUserActiveCommand(){IsUserActiveCommand.__super__.constructor.call(this)}__extends(IsUserActiveCommand,puremvc.SimpleCommand);IsUserActiveCommand.prototype.execute=function(notification){var proxy;proxy=this.facade.retrieveProxy(ApplicationStateProxy.NAME);proxy.setIsUserActive(notification.getBody())};function WaitingCommand(){WaitingCommand.__super__.constructor.call(this)}__extends(WaitingCommand,puremvc.SimpleCommand);WaitingCommand.prototype.execute=function(notification){var appProxy;appProxy=this.facade.retrieveProxy(ApplicationStateProxy.NAME);if(appProxy.getPlayState()!==PlayState.LOADING&&Utils.getMimeType(this.facade.getMediaElement().src)!==Utils.mimeTypes.mp4){this.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.WAITING)}};function ChangeMutedCommand(){ChangeMutedCommand.__super__.constructor.call(this)}__extends(ChangeMutedCommand,puremvc.SimpleCommand);ChangeMutedCommand.prototype.execute=function(notification){var proxy;proxy=this.facade.retrieveProxy(PlaybackProxy.NAME);proxy.setMuted(notification.getBody())};function CheckAuthorizationCommand(){CheckAuthorizationCommand.__super__.constructor.call(this)}__extends(CheckAuthorizationCommand,puremvc.SimpleCommand);CheckAuthorizationCommand.prototype.execute=function(notification){var media,proxy;proxy=this.facade.retrieveProxy(SecurityProxy.NAME);media=notification.getBody();proxy.setMedia(media);if(proxy.getAuthorized()===false){this.sendNotification(SecurityNotifications.AUTHORIZE,media)}else{this.sendNotification(Notifications.MEDIA_VALIDATED,media)}};function AuthorizedCommand(){AuthorizedCommand.__super__.constructor.call(this)}__extends(AuthorizedCommand,puremvc.SimpleCommand);AuthorizedCommand.prototype.execute=function(notification){var mediaProxy,securityProxy,src;mediaProxy=this.facade.retrieveProxy(MediaProxy.NAME);mediaProxy.authorized=true;securityProxy=this.facade.retrieveProxy(SecurityProxy.NAME);src=securityProxy.createURL(mediaProxy.getSrc());mediaProxy.setSrc(src);this.sendNotification(Notifications.MEDIA_VALIDATED,mediaProxy.getData())};function InitializedCommand(){InitializedCommand.__super__.constructor.call(this)}__extends(InitializedCommand,puremvc.SimpleCommand);InitializedCommand.prototype.execute=function(notification){var proxy;proxy=this.facade.retrieveProxy(PlaybackProxy.NAME);proxy.initialized=true};function RegisterPlaybackCoreCommand(){RegisterPlaybackCoreCommand.__super__.constructor.call(this)}__extends(RegisterPlaybackCoreCommand,puremvc.SimpleCommand);RegisterPlaybackCoreCommand.prototype.execute=function(notification){var player;player=this.facade.retrieveProxy(PlayerProxy.NAME);player.registerPlaybackCore(notification.getBody())};function PlaybackTargetChangeCommand(){PlaybackTargetChangeCommand.__super__.constructor.call(this)}__extends(PlaybackTargetChangeCommand,puremvc.SimpleCommand);PlaybackTargetChangeCommand.prototype.execute=function(notification){var note;if(notification.getBody().target==="amp"){note=Notifications.REMOVE_APPLICATION_STATE}else{note=Notifications.ADD_APPLICATION_STATE}this.sendNotification(note,"remote-playback")};function RecordContentChangeCommand(){RecordContentChangeCommand.__super__.constructor.call(this)}__extends(RecordContentChangeCommand,puremvc.SimpleCommand);RecordContentChangeCommand.prototype.execute=function(notification){var content,media;media=this.facade.retrieveProxy(MediaProxy.NAME);content=notification.getBody();this.sendNotification(Notifications.CHANGE_CONTENT,{from:media.getData(),to:content});media.updateData(content);this.sendNotification(Notifications.UPDATE_DATA_BINDINGS);this.sendNotification(Notifications.CHANGE_CONTENT,media.getData())};function TimeUpdateCommand(){TimeUpdateCommand.__super__.constructor.call(this)}__extends(TimeUpdateCommand,puremvc.SimpleCommand);TimeUpdateCommand.prototype.execute=function(notification){var playbackCore;playbackCore=this.facade.retrieveProxy(PlayerProxy.NAME).getActivePlaybackCore();this.sendNotification(Notifications.DISPLAY_TIME,{currentTime:playbackCore.getCurrentTime(),duration:playbackCore.getDuration()})};function ToggleMutedCommand(){ToggleMutedCommand.__super__.constructor.call(this)}__extends(ToggleMutedCommand,puremvc.SimpleCommand);ToggleMutedCommand.prototype.execute=function(notification){var proxy;proxy=this.facade.retrieveProxy(PlaybackProxy.NAME);proxy.setMuted(!proxy.getMuted())};function ModuleMediator(viewComponent){if(this.cssPrefix==null){this.cssPrefix=Namespace.PREFIX}ModuleMediator.__super__.constructor.call(this,this.mediatorName,viewComponent)}__extends(ModuleMediator,puremvc.Mediator);ModuleMediator.prototype.config=null;ModuleMediator.prototype.cssPrefix=null;ModuleMediator.prototype.classList=null;ModuleMediator.prototype.initializeNotifier=function(key){var base;ModuleMediator.__super__.initializeNotifier.call(this,key);base=this.facade.player||this.facade;this.config=base.retrieveProxy(ModuleProxy.NAME);this.classList={prefix:this.cssPrefix,element:this.viewComponent,contains:function(className,element){var css,_ref;if(element==null){element=this.element}css=this.prefix+className;if(((_ref=element.classList)!=null?_ref.contains:void 0)!=null){return element.classList.contains(css)}else{return element.className.indexOf(css)!==-1}},add:function(className,element){var css,_ref;if(element==null){element=this.element}css=this.prefix+className;if(((_ref=element.classList)!=null?_ref.add:void 0)!=null){element.classList.add(css)}else{if(!this.contains(className,element)){if(element.className!==""){element.className+=" "+css}else{element.className=css}}}},remove:function(className,element){var css,regexp,_ref;if(element==null){element=this.element}css=this.prefix+className;if(((_ref=element.classList)!=null?_ref.remove:void 0)!=null){element.classList.remove(css)}else{if(this.contains(className,element)){regexp=new RegExp(" ?"+css);element.className=element.className.replace(regexp,"")}}},toggle:function(className,element){var _ref;if(element==null){element=this.element}if(((_ref=element.classList)!=null?_ref.toggle:void 0)!=null){return element.classList.toggle(this.prefix+className)}else{if(this.contains(className,element)){return this.remome(className,element)}else{return this.add(className,element)}}}}};function LocalizedMediator(viewComponent){LocalizedMediator.__super__.constructor.call(this,viewComponent)}__extends(LocalizedMediator,ModuleMediator);LocalizedMediator.prototype.localizationManager=null;LocalizedMediator.prototype.initializeNotifier=function(key){var target;LocalizedMediator.__super__.initializeNotifier.call(this,key);target=this.facade.player||this.facade;this.localizationManager=target.retrieveProxy(LocalizationProxy.NAME)};function ComponentMediator(componentName,componentType,parent,element){this.componentName=componentName!=null?componentName:this.componentName;this.componentType=componentType!=null?componentType:this.componentType;this.viewComponent=this.createViewComponent(parent,element);this.classList=this.viewComponent._classList;if(this.mediatorName==null){this.mediatorName=this.createMediatorName()}ComponentMediator.__super__.constructor.call(this,this.viewComponent)}__extends(ComponentMediator,LocalizedMediator);ComponentMediator.prototype.componentName=null;ComponentMediator.prototype.componentType=null;ComponentMediator.prototype.classList=null;ComponentMediator.prototype.state=null;ComponentMediator.prototype.disabled=false;ComponentMediator.prototype.onRegister=function(){UI.bindEvents(this.viewComponent,this)};ComponentMediator.prototype.createViewComponent=function(parent,element){var type;type=this.getTypeList();return UI.create(type,parent,element)};ComponentMediator.prototype.createMediatorName=function(){var type;type=this.getTypeList();type.push("mediator");type.push(UI.createUID());return type.join("-")};ComponentMediator.prototype.getTypeList=function(){var type;type=[];if(this.componentName!=null){type.push(this.componentName)}if(this.componentType!=null){type=type.concat(this.componentType)}return type};ComponentMediator.prototype.create=function(type,parent,element,text){if(parent==null){parent=this}if(parent===false){parent=null}return UI.create(type,parent,element,text)};ComponentMediator.prototype.createText=function(type,text,parent,element){if(parent==null){parent=this}return UI.create(type,parent,element,text)};ComponentMediator.prototype.setState=function(value){if(value===this.state){return}if(this.state!=null){this.classList.remove(this.state)}this.state=value;if(this.state!=null){this.classList.add(this.state)}return value};ComponentMediator.prototype.getState=function(){return this.state};ComponentMediator.prototype.setDisabled=function(value){if(value===this.disabled){return}this.disabled=value;if(this.disabled){this.classList.add("disabled")}else{this.classList.remove("disabled")}return value};ComponentMediator.prototype.getDisabled=function(){return this.disabled};function OverlayMediator(){OverlayMediator.__super__.constructor.call(this,null,null,null,null)}__extends(OverlayMediator,ComponentMediator);OverlayMediator.prototype.componentType="overlay";OverlayMediator.prototype.onRegister=function(){OverlayMediator.__super__.onRegister.call(this);this.registerOverlay()};OverlayMediator.prototype.onRemove=function(){OverlayMediator.__super__.onRemove.call(this);this.removeOverlay()};OverlayMediator.prototype.registerOverlay=function(){this.sendNotification(Notifications.ADD_OVERLAY,this.viewComponent)};OverlayMediator.prototype.removeOverlay=function(){this.sendNotification(Notifications.REMOVE_OVERLAY,this.viewComponent)};function contextMenuMediator(){contextMenuMediator.__super__.constructor.call(this)}__extends(contextMenuMediator,OverlayMediator);contextMenuMediator.prototype.componentName="context-menu";contextMenuMediator.prototype.contextMenu=null;contextMenuMediator.prototype.onRegister=function(){var _this=this;contextMenuMediator.__super__.onRegister.call(this);EventHandler.create(this.facade.viewComponent,EventHandler.CONTEXTMENU,function(event){event.preventDefault();_this.contextMenuHandler(event);return false})};contextMenuMediator.prototype.contextMenuHandler=function(event){var contextItem,_this=this;if(this.contextMenu){this.removeContextMenu()}this.contextMenu=UI.create("context-menu",document.body,"ul");contextItem=UI.create("context-item",this.contextMenu,"li",this.facade.getVersion());this.contextMenu.style.top=event.pageY+"px";this.contextMenu.style.left=event.pageX+"px";EventHandler.create(document.body,EventHandler.CLICK,function(event){_this.removeContextMenu(event);return false})};contextMenuMediator.prototype.removeContextMenu=function(event){try{EventHandler.clear(document.body,EventHandler.CLICK);document.body.removeChild(this.contextMenu);this.contextMenu=null}catch(_error){}};function EndSlateMediator(){EndSlateMediator.__super__.constructor.call(this)}__extends(EndSlateMediator,OverlayMediator);EndSlateMediator.prototype.componentName="end-slate";EndSlateMediator.prototype.onRegister=function(){if(this.config.getEndSlate()!=null){EndSlateMediator.__super__.onRegister.call(this)}};EndSlateMediator.prototype.listNotificationInterests=function(){return[Notifications.MEDIA_CHANGE]};EndSlateMediator.prototype.handleNotification=function(notification){var endslate,html,media,src,viewComponent;switch(notification.getName()){case Notifications.MEDIA_CHANGE:media=notification.getBody();endslate=this.config.getEndSlate();viewComponent=this.getViewComponent();html="";if(endslate!=null){src=endslate.usePoster===true?media.poster:endslate.url;if((src!=null)&&src!==""){html='<img src="'+src+'" class="end-slate-image" />'}}viewComponent.innerHTML=html}};function WaitingOverlayMediator(){WaitingOverlayMediator.__super__.constructor.call(this)}__extends(WaitingOverlayMediator,OverlayMediator);WaitingOverlayMediator.prototype.componentName="waiting";WaitingOverlayMediator.prototype.bar=null;WaitingOverlayMediator.prototype.text=null;WaitingOverlayMediator.prototype.onRegister=function(){this.bar=this.create("waiting-bar");this.text=this.createText("waiting-text",this.localizationManager.getString(LocalizationConstants.MSG_BUFFERING));WaitingOverlayMediator.__super__.onRegister.call(this)};function LoadingOverlayMediator(){LoadingOverlayMediator.__super__.constructor.call(this)}__extends(LoadingOverlayMediator,OverlayMediator);LoadingOverlayMediator.prototype.componentName="loading";function LocalizationConstants(){}LocalizationConstants.MSG_LIVE="MSG_LIVE";LocalizationConstants.MSG_REPLAY="MSG_REPLAY";LocalizationConstants.MSG_BUFFERING="MSG_BUFFERING_TEXT";LocalizationConstants.MSG_CC="MSG_CC";LocalizationConstants.MSG_CC_TITLE="MSG_CC_TITLE";LocalizationConstants.MSG_CC_LANGUAGE="MSG_CC_LANGUAGE";LocalizationConstants.MSG_CC_PRESETS="MSG_CC_PRESETS";LocalizationConstants.MSG_CC_FONT="MSG_CC_FONT";LocalizationConstants.MSG_CC_EDGE="MSG_CC_EDGE";LocalizationConstants.MSG_CC_SIZE="MSG_CC_SIZE";LocalizationConstants.MSG_CC_SCROLL="MSG_CC_SCROLL";LocalizationConstants.MSG_CC_COLOR="MSG_CC_COLOR";LocalizationConstants.MSG_CC_BACKGROUND="MSG_CC_BACKGROUND";LocalizationConstants.MSG_CC_EDGE="MSG_CC_EDGE";LocalizationConstants.MSG_CC_WINDOW="MSG_CC_WINDOW";LocalizationConstants.MSG_CC_OPACITY="MSG_CC_OPACITY";LocalizationConstants.MSG_CC_SHOW_ADVANCED="MSG_CC_SHOW_ADVANCED";LocalizationConstants.MSG_CC_HIDE_ADVANCED="MSG_CC_HIDE_ADVANCED";LocalizationConstants.MSG_CC_RESET="MSG_CC_RESET";LocalizationConstants.MSG_CC_CANCEL="MSG_CC_CANCEL";LocalizationConstants.MSG_CC_APPLY="MSG_CC_APPLY";LocalizationConstants.MSG_SECONDS="MSG_SECONDS";LocalizationConstants.MSG_RECOMMENDATIONS_TITLE="MSG_RECOMMENDATIONS_TITLE";LocalizationConstants.MSG_NEXT_VIDEO="MSG_NEXT_VIDEO";LocalizationConstants.MSG_NEXT_AD="MSG_NEXT_AD";LocalizationConstants.MSG_TIME_SEPARATOR="MSG_TIME_SEPARATOR";function ReplayOverlayMediator(){ReplayOverlayMediator.__super__.constructor.call(this)}__extends(ReplayOverlayMediator,OverlayMediator);ReplayOverlayMediator.prototype.componentName="replay";ReplayOverlayMediator.prototype.replay=null;ReplayOverlayMediator.prototype.icon=null;ReplayOverlayMediator.prototype.label=null;ReplayOverlayMediator.prototype.onRegister=function(){this.replay=this.create("replay-button");this.replay.onclick=this.onclick.bind(this);this.icon=this.create("replay-icon",this.replay);this.label=this.createText("replay-label",this.localizationManager.getString(LocalizationConstants.MSG_REPLAY),this.replay);ReplayOverlayMediator.__super__.onRegister.call(this)};ReplayOverlayMediator.prototype.onclick=function(event){event.stopImmediatePropagation();this.sendNotification(Notifications.REPLAY);return false};function ChangeActiveStateCommand(){ChangeActiveStateCommand.__super__.constructor.call(this)}__extends(ChangeActiveStateCommand,puremvc.SimpleCommand);ChangeActiveStateCommand.prototype.execute=function(notification){var config,proxy,state;config=this.facade.retrieveProxy(ConfigurationProxy.NAME);state=config.getControls().mode!==ControlsMode.PERSISTENT?notification.getBody():ActiveState.ACTIVE;proxy=this.facade.retrieveProxy(ApplicationStateProxy.NAME);proxy.setActiveState(state)};function ChangeDisplayStateCommand(){ChangeDisplayStateCommand.__super__.constructor.call(this);this.keyHandler=this.keypress.bind(this)}__extends(ChangeDisplayStateCommand,puremvc.SimpleCommand);ChangeDisplayStateCommand.interval=null;ChangeDisplayStateCommand.keyHandler=null;ChangeDisplayStateCommand.prototype.keypress=function(event){switch(event.keyCode){case 27:break;case 32:if(!this.facade.getEnded()){if(this.facade.getPaused()){this.facade.play()}else{this.facade.pause()}}}};ChangeDisplayStateCommand.prototype.execute=function(notification){var config,core,fullscreen,playback,proxy,state,view,_this=this;state=notification.getBody();proxy=this.facade.retrieveProxy(ApplicationStateProxy.NAME);proxy.setDisplayState(state);config=this.facade.retrieveProxy(ConfigurationProxy.NAME).getFullscreen();if(config.mode===FullscreenMode.EXTERNAL){this.sendNotifications(state);return}playback=this.facade.retrieveProxy(PlaybackProxy.NAME);core=this.facade.getMediaElement();view=this.facade.getViewComponent();fullscreen={};if(view.webkitRequestFullScreen!=null){fullscreen.enter=view.webkitRequestFullScreen.bind(view);fullscreen.exit=document.webkitCancelFullScreen.bind(document);fullscreen.event="onwebkitfullscreenchange";fullscreen.element="webkitFullscreenElement"}else{if(view.requestFullscreen!=null){fullscreen.enter=view.requestFullscreen.bind(view);fullscreen.exit=document.cancelFullscreen.bind(document);fullscreen.event="onfullscreenchange";fullscreen.element="fullscreenElement"}else{if(view.mozRequestFullScreen!=null){fullscreen.enter=view.mozRequestFullScreen.bind(view);fullscreen.exit=document.mozCancelFullScreen.bind(document);fullscreen.event="onmozfullscreenchange";fullscreen.element="mozFullscreenElement"}else{if(core.webkitEnterFullscreen!=null){fullscreen.enter=core.webkitEnterFullscreen.bind(core);fullscreen.exit=core.webkitExitFullscreen.bind(core);fullscreen.event=null}}}}if(state===DisplayState.FULL_SCREEN){if(fullscreen.event!=null){view[fullscreen.event]=function(event){if(!(document[fullscreen.element]!=null)){_this.sendNotification(Notifications.CHANGE_DISPLAY_STATE,DisplayState.NORMAL)}}}else{clearInterval(ChangeDisplayStateCommand.interval);ChangeDisplayStateCommand.interval=setInterval(function(){if(core.webkitDisplayingFullscreen!==true){_this.sendNotification(Notifications.CHANGE_DISPLAY_STATE,DisplayState.NORMAL);clearInterval(ChangeDisplayStateCommand.interval)}},100)}fullscreen.enter();playback.keyHandler=this.keypress.bind(this);window.addEventListener("keypress",playback.keyHandler)}else{if(state===DisplayState.NORMAL){window.removeEventListener("keypress",playback.keyHandler);playback.keyHandler=null;if(fullscreen!=null){if(typeof fullscreen.exit==="function"){fullscreen.exit()}}core[fullscreen.event]=null;clearInterval(ChangeDisplayStateCommand.interval)}}this.sendNotifications(state)};ChangeDisplayStateCommand.prototype.sendNotifications=function(state){setTimeout(this.sendNotification.bind(this,Notifications.FULL_SCREEN_CHANGE,state),100);this.sendNotification(Notifications.DISPATCH_EVENT,new Event("fullscreenchange",state===DisplayState.FULL_SCREEN))};function Player(viewComponent){Player.__super__.constructor.call(this,viewComponent)}__extends(Player,Module);Player.prototype.moduleName="amp";Player.prototype.playerType=null;Player.prototype.config=null;Player.prototype.mediaElement=null;Player.prototype.hidden=false;Player.prototype.l10n=null;Player.prototype.setViewComponent=function(viewComponent){viewComponent.amp=this;return Player.__super__.setViewComponent.call(this,viewComponent)};Player.prototype.setMediaElement=function(mediaElement){this.mediaElement=mediaElement;return mediaElement};Player.prototype.getPlayerType=function(){return this.playerType};Player.prototype.getVersion=function(){return AMP.getVersion()};Player.prototype.createPlugins=function(){this.sendNotification(PluginNotifications.REGISTER_PLUGINS,this.config)};Player.prototype.createMediaElement=function(){return null};Player.prototype.createFramework=function(){Player.__super__.createFramework.call(this);this.mediaElement=this.createMediaElement();this.createPlugins()};Player.prototype.logNotificationEvent=function(event){if(/(timeupdate|mediaPlayerPlayheadUpdate)/.test(event.type)===true){return}Player.__super__.logNotificationEvent.call(this,event)};Player.prototype.listNotificationEvents=function(){return Player.__super__.listNotificationEvents.call(this).concat([Notifications.READY,Notifications.LOAD_START,Notifications.TIME_UPDATE,Notifications.DURATION_CHANGE,Notifications.ERROR,Notifications.LOADED_METADATA,Notifications.WAITING,Notifications.SEEKING,Notifications.SEEKED,Notifications.ENDED,Notifications.PROGRESS,Notifications.CAN_PLAY,Notifications.CAN_PLAY_THROUGH,Notifications.PAUSE,Notifications.PLAY,Notifications.PLAYING,Notifications.STARTED,Notifications.PLAY_REQUEST,Notifications.MEDIUM_CHANGE,Notifications.TEMPORAL_TYPE_CHANGE,Notifications.MEDIA_CHANGE,Notifications.VOLUME_CHANGE,Notifications.FAIL_OVER_ATTEMPT,Notifications.LANGUAGE_CHANGE,Notifications.PLAYBACK_TARGET_AVAILABLE,Notifications.PLAYBACK_TARGET_CHANGE,Notifications.PLAY_STATE_CHANGE,SecurityNotifications.AUTHORIZE,SecurityNotifications.AUTHORIZED])};Player.prototype.getLanguage=function(){return this.retrieveProxy(LocalizationProxy.NAME).getLanguage()};Player.prototype.setLanguage=function(value){this.retrieveProxy(LocalizationProxy.NAME).setLanguage(value);return value};Player.prototype.getMediaElement=function(){return this.mediaElement};Player.prototype.getContainer=function(){return this.getViewComponent()};Player.prototype.evaluateBinding=function(binding){};Player.prototype.canPlayType=function(type){};Player.prototype.load=function(){};Player.prototype.play=function(){};Player.prototype.replay=function(){};Player.prototype.pause=function(){};Player.prototype.end=function(){};Player.prototype.setParams=function(value){};Player.prototype.getParams=function(){};Player.prototype.setAutoplay=function(value){};Player.prototype.getAutoplay=function(){};Player.prototype.setLoop=function(value){};Player.prototype.getLoop=function(){};Player.prototype.setMuted=function(value){};Player.prototype.getMuted=function(){};Player.prototype.mute=function(){return this.setMuted(true)};Player.prototype.unmute=function(){return this.setMuted(false)};Player.prototype.setMedia=function(value){var source,src,_ref,_ref1;src=value.src;source=(_ref=value.source)!=null?(_ref1=_ref[0])!=null?_ref1.src:void 0:void 0;if((!(src!=null)||src==="")&&(!(source!=null)||source==="")){throw new Error("[AMP ERROR] Invalid Media")}};Player.prototype.getMedia=function(){};Player.prototype.setCurrentTime=function(value){};Player.prototype.getCurrentTime=function(){};Player.prototype.getDuration=function(){};Player.prototype.setSrc=function(value){};Player.prototype.getSrc=function(){};Player.prototype.setSource=function(value){};Player.prototype.getSource=function(){};Player.prototype.setVolume=function(value){};Player.prototype.getVolume=function(){};Player.prototype.getSeeking=function(){};Player.prototype.getPaused=function(){};Player.prototype.getEnded=function(){};Player.prototype.setDisplayState=function(value){};Player.prototype.getDisplayState=function(){};Player.prototype.enterFullScreen=function(){};Player.prototype.exitFullScreen=function(){};Player.prototype.setHidden=function(value){var style;if(value===this.hidden){return}this.hidden=value;style=this.viewComponent.style;if(this.hidden){this.hiddenData={width:style.width,height:style.height,paused:this.getPaused()};style.width=style.height="0px";if(this.hiddenData.paused===false){this.pause()}}else{style.width=this.hiddenData.width;style.height=this.hiddenData.height;if(this.hiddenData.paused===false){this.play()}this.hiddenData=null}};Player.prototype.getHidden=function(){return this.hidden};Player.prototype.recordContentChange=function(content){};function HTMLPlayer(viewComponent){HTMLPlayer.__super__.constructor.call(this,viewComponent)}__extends(HTMLPlayer,Player);HTMLPlayer.prototype.playerType="html";HTMLPlayer.prototype.media=null;HTMLPlayer.prototype.bindings=null;HTMLPlayer.prototype.configuration=null;HTMLPlayer.prototype.params=null;HTMLPlayer.prototype.appState=null;HTMLPlayer.prototype.createMediaElement=function(){var video,viewComponent;video=new MediaElementMediator("html5","video");viewComponent=video.getViewComponent();if(viewComponent.dataset==null){viewComponent.dataset={}}this.sendNotification(Notifications.PLAYBACK_CORE_CHANGE,video);return viewComponent};HTMLPlayer.prototype.createModel=function(){var playbackProxy;this.bindings=new DataBindingProxy();this.registerProxy(this.bindings);this.registerProxy(new SecurityProxy());this.configuration=new ConfigurationProxy(this.config);this.registerProxy(this.configuration);this.registerProxy(new LocalizationProxy(this.config));this.appState=new ApplicationStateProxy();this.registerProxy(this.appState);this.appState.setRenderMode(RenderMode.HTML);playbackProxy=new PlaybackProxy();this.registerProxy(playbackProxy);this.media=new MediaProxy();this.registerProxy(this.media);this.registerProxy(new PlayerProxy(playbackProxy));this.params=new ParamsProxy(this.config.params);this.registerProxy(this.params);this.bindings.initialize()};HTMLPlayer.prototype.createView=function(){var overlay,_ref,_ref1;this.registerMediator(new PlayerMediator("html5",this.getViewComponent()));this.registerMediator(new PluginAdapter());this.registerMediator(new VideoLayerMediator());this.registerMediator(new PosterMediator());overlay=new OverlayLayerMediator();this.registerMediator(overlay);this.registerMediator(new LoadingOverlayMediator());if(((_ref=this.config.controls)!=null?_ref["native"]:void 0)!==true){this.registerMediator(new contextMenuMediator())}this.registerMediator(new WaitingOverlayMediator());this.registerMediator(new ReplayOverlayMediator());this.registerMediator(new EndSlateMediator());if(((_ref1=this.config.titlebar)!=null?_ref1.enabled:void 0)===true){this.registerMediator(new TitleBarMediator())}this.registerMediator(new ErrorLayerMediator())};HTMLPlayer.prototype.createController=function(){this.registerCommand(PluginNotifications.PLUGINS_INITIALIZED,PluginsInitializedCommand);this.registerCommand(Notifications.PLAY,PlayCommand);this.registerCommand(Notifications.PAUSE,PauseCommand);this.registerCommand(Notifications.PAUSED,PausedCommand);this.registerCommand(Notifications.CHANGE_PLAY_STATE,ChangePlayStateCommand);this.registerCommand(Notifications.TOGGLE_FULL_SCREEN,ToggleFullScreenCommand);this.registerCommand(Notifications.CHANGE_DISPLAY_STATE,ChangeDisplayStateCommand);this.registerCommand(Notifications.TOGGLE_ACTIVE,ToggleActiveCommand);this.registerCommand(Notifications.CHANGE_ACTIVE_STATE,ChangeActiveStateCommand);this.registerCommand(Notifications.SET_MEDIA,SetMediaCommand);this.registerCommand(Notifications.CHANGE_MEDIA,ChangeMediaCommand);this.registerCommand(Notifications.MEDIA_VALIDATED,MediaValidatedCommand);this.registerCommand(Notifications.MEDIA_CHANGE,MediaChangeCommand);this.registerCommand(Notifications.UPDATE_DATA_BINDINGS,UpdateDataBindingsCommand);this.registerCommand(Notifications.START,StartCommand);this.registerCommand(Notifications.SEEK,SeekCommand);this.registerCommand(Notifications.SEEKING,SeekingCommand);this.registerCommand(Notifications.SEEKED,SeekedCommand);this.registerCommand(Notifications.CHANGE_VOLUME,ChangeVolumeCommand);this.registerCommand(Notifications.CHANGE_MUTED,ChangeMutedCommand);this.registerCommand(Notifications.CHANGE_AUTOPLAY,ChangeAutoplayCommand);this.registerCommand(Notifications.CHANGE_LOOP,ChangeLoopCommand);this.registerCommand(Notifications.END,EndCommand);this.registerCommand(Notifications.ENDED,EndedCommand);this.registerCommand(Notifications.REPLAY,ReplayCommand);this.registerCommand(Notifications.ERROR,ErrorCommand);this.registerCommand(Notifications.READY,ReadyCommand);this.registerCommand(Notifications.WAITING,WaitingCommand);this.registerCommand(Notifications.CHANGE_DURATION,ChangeDurationCommand);this.registerCommand(Notifications.CHANGE_PARAMS,ChangeParamsCommand);this.registerCommand(Notifications.IS_USER_ACTIVE,IsUserActiveCommand);this.registerCommand(SecurityNotifications.CHECK_AUTHORIZATION,CheckAuthorizationCommand);this.registerCommand(SecurityNotifications.AUTHORIZED,AuthorizedCommand);this.registerCommand(SecurityNotifications.SET_KEY,SecuritySetKeyCommand);this.registerCommand(SecurityNotifications.SET_TOKEN,SecuritySetTokenCommand);this.registerCommand(Notifications.INITIALIZED,InitializedCommand);this.registerCommand(Notifications.REGISTER_PLAYBACK_CORE,RegisterPlaybackCoreCommand);this.registerCommand(UserNotifications.TOGGLE_PLAY_PAUSE,TogglePlayPauseCommand);this.registerCommand(UserNotifications.SEEK,SeekCommand);this.registerCommand(Notifications.PLAYBACK_TARGET_CHANGE,PlaybackTargetChangeCommand);this.registerCommand(Notifications.RECORD_CONTENT_CHANGE,RecordContentChangeCommand);this.registerCommand(Notifications.TIME_UPDATE,TimeUpdateCommand);this.registerCommand(Notifications.TOGGLE_MUTED,ToggleMutedCommand)};HTMLPlayer.prototype.evaluateBinding=function(binding){return this.bindings.evaluateBinding(binding)};HTMLPlayer.prototype.recordContentChange=function(content){this.sendNotification(Notifications.RECORD_CONTENT_CHANGE,content)};HTMLPlayer.prototype.canPlayType=function(type){return this.retrieveProxy(PlaybackProxy.NAME).canPlayType(type)};HTMLPlayer.prototype.load=function(){this.sendNotification(Notifications.LOAD)};HTMLPlayer.prototype.play=function(){this.sendNotification(Notifications.PLAY,true)};HTMLPlayer.prototype.replay=function(){this.sendNotification(Notifications.REPLAY)};HTMLPlayer.prototype.pause=function(){this.sendNotification(Notifications.PAUSE)};HTMLPlayer.prototype.end=function(){this.sendNotification(Notifications.END)};HTMLPlayer.prototype.setParams=function(value){this.sendNotification(Notifications.CHANGE_PARAMS,value);return value};HTMLPlayer.prototype.getParams=function(){return this.params.getData()};HTMLPlayer.prototype.setAutoplay=function(value){this.sendNotification(Notifications.CHANGE_AUTOPLAY,value);return value};HTMLPlayer.prototype.getAutoplay=function(){var autoPlay,playbackProxy,_ref;playbackProxy=this.retrieveProxy(PlaybackProxy.NAME);autoPlay=playbackProxy.initialized&&(this.configuration.getAutoplay()||((_ref=this.getMedia())!=null?_ref.autoplay:void 0)===true);return autoPlay};HTMLPlayer.prototype.setLoop=function(value){this.sendNotification(Notifications.CHANGE_LOOP,value);return value};HTMLPlayer.prototype.getLoop=function(){return this.configuration.getLoop()};HTMLPlayer.prototype.setMuted=function(value){this.sendNotification(Notifications.CHANGE_MUTED,value);return value};HTMLPlayer.prototype.getMuted=function(){return this.retrieveProxy(PlaybackProxy.NAME).getMuted()};HTMLPlayer.prototype.setMedia=function(value){HTMLPlayer.__super__.setMedia.call(this,value);this.sendNotification(Notifications.SET_MEDIA,value);return value};HTMLPlayer.prototype.getMedia=function(){return this.media.getData()};HTMLPlayer.prototype.setCurrentTime=function(value){this.sendNotification(Notifications.SEEK,value);return value};HTMLPlayer.prototype.getCurrentTime=function(){return this.retrieveProxy(PlaybackProxy.NAME).getCurrentTime()};HTMLPlayer.prototype.getDuration=function(){return this.media.getDuration()};HTMLPlayer.prototype.setSrc=function(value){this.sendNotification(Notifications.SET_MEDIA,{src:value});return value};HTMLPlayer.prototype.getSrc=function(){return this.retrieveProxy(PlaybackProxy.NAME).getSrc()};HTMLPlayer.prototype.setSource=function(value){this.sendNotification(Notifications.SET_MEDIA,{source:value});return value};HTMLPlayer.prototype.getSource=function(){return this.media.getSource()};HTMLPlayer.prototype.setVolume=function(value){this.sendNotification(Notifications.CHANGE_VOLUME,value);return value};HTMLPlayer.prototype.getVolume=function(){return this.retrieveProxy(PlaybackProxy.NAME).getVolume()};HTMLPlayer.prototype.getSeeking=function(){return this.retrieveProxy(PlaybackProxy.NAME).getSeeking()};HTMLPlayer.prototype.getPaused=function(){return this.retrieveProxy(PlaybackProxy.NAME).getPaused()};HTMLPlayer.prototype.getEnded=function(){return this.retrieveProxy(PlaybackProxy.NAME).getEnded()};HTMLPlayer.prototype.setDisplayState=function(value){this.sendNotification(Notifications.CHANGE_DISPLAY_STATE,value)};HTMLPlayer.prototype.getDisplayState=function(value){return this.appState.getDisplayState()};HTMLPlayer.prototype.enterFullScreen=function(){this.sendNotification(Notifications.CHANGE_DISPLAY_STATE,DisplayState.FULL_SCREEN)};HTMLPlayer.prototype.exitFullScreen=function(){this.sendNotification(Notifications.CHANGE_DISPLAY_STATE,DisplayState.NORMAL)};var FlashNotifications={READY:"jsApiReady",RESET:"mediaPlayerReset",LOADING:"mediaPlayerLoading",PLAYER_ERROR:"mediaPlayerError",MEDIA_ERROR:"mediaError",ERROR_STREAM_NOT_FOUND:"mediaPlayerErrorStreamNotFound",CAPABILITY_CHANGE:"mediaPlayerCapabilityChange",PLAYBACK_OPEN:"mediaPlayerPlaybackOpen",PLAYING:"mediaPlayerPlaying",ENDED:"mediaPlayerPlaybackSequenceComplete",PAUSED:"mediaPlayerPaused",BUFFERING:"mediaPlayerBuffering",DURATION_CHANGE:"mediaPlayerDurationChange",TIME_UPDATE:"mediaPlayerPlayheadUpdate",SEEKING_CHANGE:"mediaPlayerSeekingChange",ERROR:"error",VOLUME_CHANGE:"mediaPlayerVolumeChanged",PLAY_STATE_CHANGE:"mediaPlayerPlayStateChange",STATE_CHANGE:"mediaPlayerStateChange",CAPTION_DATA_CHANGE:"mediaPlayerCaptiondataChange",FAIL_OVER_ATTEMPT:"mediaPlayerFailoverAttempt",ELEMENT_EVENT:"mediaPlayerElementEvent",PLAY:"mediaPlayerResumeOrPausePlayback",APPLICATION_STATE_CHANGE:"mediaPlayerApplicationStateChange",INITIALIZED:"mediaPlayerInitialized",LOAD_STATE_READY:"mediaLoadStateReady",LOAD_STATE_LOADING:"mediaLoadStateLoading",FULLSCREEN_CHANGE:"mediaPlayerFullscreenChange",AUTHORIZE:"mediaPlayerAuthenticate",CAPTIONING_REQUEST:"mediaPlayerCaptioningRequest",CAPTION_LANG_CHANGE:"mediaPlayerCaptionLangChange",RECOMMENDATIONS_LOADED:"mediaPlayerRecommendationsLoaded",RECOMMENDATION_SELECTED:"mediaPlayerRecommendationSelected",SHARE:"mediaPlayerShare",SHARE_REQUEST:"mediaPlayerShareRequest",AUTO_ADVANCE:"mediaPlayerAutoAdvance",CREATE_FLASH_VARS:"createFlashVars",CREATE_XML:"createXML",FLASH_CREATED:"flashCreated",PLAY_REQUEST:"mediaPlayerPlaybackSequenceInitiated",FEED_LOADED:"mediaPlayerFeedLoaded"};function DataBoundConfigurationProxy(data){DataBoundConfigurationProxy.__super__.constructor.call(this,data)}__extends(DataBoundConfigurationProxy,ModuleProxy);DataBoundConfigurationProxy.NAME=ModuleProxy.NAME;DataBoundConfigurationProxy.prototype.bindings=null;DataBoundConfigurationProxy.prototype.configurationName=null;DataBoundConfigurationProxy.prototype.configurationData=null;DataBoundConfigurationProxy.prototype.contextName=null;DataBoundConfigurationProxy.prototype.contextData=null;DataBoundConfigurationProxy.prototype.value=null;DataBoundConfigurationProxy.prototype.getConfigurationName=function(){return this.configurationName};DataBoundConfigurationProxy.prototype.getConfigurationData=function(){return this.configurationData.value||{}};DataBoundConfigurationProxy.prototype.getContextName=function(){return this.contextName};DataBoundConfigurationProxy.prototype.getContextData=function(){return this.contextData};DataBoundConfigurationProxy.prototype.onRegister=function(){var base;base=this.facade.player||this.facade;if(!(this.configurationName!=null)){this.configurationName=this.facade.moduleName}this.bindings=base.retrieveProxy(DataBindingProxy.NAME);this.bindings.registerConfiguration(this)};DataBoundConfigurationProxy.prototype.setData=function(data){var key,value,_ref;if(data==null){data={}}this.data={};_ref=this.defaults;for(key in _ref){value=_ref[key];this.data[key]=key in data?data[key]:value}this.configurationData=new TokenizedObject(this.data);return this.data};DataBoundConfigurationProxy.prototype.getValue=function(key){var _ref;this.bindings.update();this.value[key]=(_ref=this.configurationData.data[key])!=null?_ref.compile(this.bindings.getData()):void 0;return this.value[key]};DataBoundConfigurationProxy.prototype.compile=function(context,suppressErrors){if(suppressErrors==null){suppressErrors=false}if(!(this.configurationData!=null)){return null}if(!(context!=null)){context=this.bindings.getData()}if((this.contextName!=null)&&(this.contextData!=null)){context=Utils.clone(context);context[this.contextName]=this.contextData}this.configurationData.compile(context,suppressErrors);this.value=this.configurationData.value;return this.configurationData.value};var MediaAnalyticsNotifications={SET_DIMENSIONS:"mediaanalytics:setDimensions"};function SecuritySetTokenCommand(){SecuritySetTokenCommand.__super__.constructor.call(this)}__extends(SecuritySetTokenCommand,puremvc.SimpleCommand);SecuritySetTokenCommand.prototype.execute=function(notification){var proxy,token;proxy=this.facade.retrieveProxy(SecurityProxy.NAME);token=notification.getBody();proxy.setToken(token);proxy.setAuthorized(true)};function SecuritySetKeyCommand(){SecuritySetKeyCommand.__super__.constructor.call(this)}__extends(SecuritySetKeyCommand,puremvc.SimpleCommand);SecuritySetKeyCommand.prototype.execute=function(notification){var key,proxy;proxy=this.facade.retrieveProxy(SecurityProxy.NAME);key=notification.getBody();proxy.setKey(key)};function LocalizationWrapper(app,config){this.app=app;this.config=config;LocalizationWrapper.__super__.constructor.call(this,this.constructor.NAME);this.proxy=new LocalizationProxy(this.config);this.app.registerProxy(this.proxy)}__extends(LocalizationWrapper,puremvc.Mediator);LocalizationWrapper.prototype.player=null;LocalizationWrapper.prototype.config=null;LocalizationWrapper.prototype.proxy=null;LocalizationWrapper.NAME="LocalizationWrapper";LocalizationWrapper.prototype.getString=function(key){return this.proxy.getString(key)};LocalizationWrapper.prototype.listNotificationInterests=function(){return[FlashNotifications.CREATE_FLASH_VARS,FlashNotifications.CREATE_XML]};LocalizationWrapper.prototype.handleNotification=function(notification){var application,body,config,element,flashvars,key,lang,locale,locales,name,prop,text,value,xml,_ref;LocalizationWrapper.__super__.handleNotification.call(this,notification);name=notification.getName();body=notification.getBody();switch(name){case FlashNotifications.CREATE_FLASH_VARS:flashvars=body.flashvars;config=body.config;if(config.language!=null){flashvars.locale_setting=config.language}break;case FlashNotifications.CREATE_XML:xml=body.xml;application=xml.firstChild;locales=xml.getElementsByTagName("locales")[0];if(!(locales!=null)){locales=xml.createElement("locales");application.appendChild(locales)}_ref=this.config.locales;for(lang in _ref){locale=_ref[lang];element=xml.createElement("locale");element.setAttribute("id",lang);locales.appendChild(element);for(key in locale){value=locale[key];prop=xml.createElement("property");prop.setAttribute("key",key);text=XMLUtils.createTextContent(xml,value);prop.appendChild(text);element.appendChild(prop)}}}};function MediaElementMediator(componentName,viewComponent){this.mediatorName="#@{getComponentType()}-mediator";MediaElementMediator.__super__.constructor.call(this,componentName,null,null,viewComponent)}__extends(MediaElementMediator,ComponentMediator);MediaElementMediator.prototype.componentType="media-element";function LayerMediator(){LayerMediator.__super__.constructor.call(this)}__extends(LayerMediator,ComponentMediator);LayerMediator.prototype.componentType="layer";LayerMediator.prototype.onRegister=function(){LayerMediator.__super__.onRegister.call(this);this.registerLayer()};LayerMediator.prototype.onRemove=function(){LayerMediator.__super__.onRemove.call(this);this.removeLayer()};LayerMediator.prototype.registerLayer=function(){this.sendNotification(Notifications.ADD_LAYER,this.viewComponent)};LayerMediator.prototype.removeLayer=function(){this.sendNotification(Notifications.REMOVE_LAYER,this.viewComponent)};function VideoLayerMediator(){VideoLayerMediator.__super__.constructor.call(this)}__extends(VideoLayerMediator,LayerMediator);VideoLayerMediator.prototype.componentName="video";VideoLayerMediator.prototype.listNotificationInterests=function(){return[Notifications.PLAYBACK_CORE_CHANGE]};VideoLayerMediator.prototype.handleNotification=function(notification){var body,name,viewComponent;name=notification.getName();body=notification.getBody();switch(name){case Notifications.PLAYBACK_CORE_CHANGE:viewComponent=this.facade.getMediaElement();if(viewComponent!=null){this.viewComponent.removeChild(viewComponent)}viewComponent=(body!=null?typeof body.getViewComponent==="function"?body.getViewComponent():void 0:void 0)||body;this.facade.setMediaElement(viewComponent);if(viewComponent!=null){this.viewComponent.appendChild(viewComponent)}}};function PlayerMediator(componentName,viewComponent){this.componentName=componentName;this.layers=[];PlayerMediator.__super__.constructor.call(this,null,null,null,viewComponent)}__extends(PlayerMediator,ComponentMediator);PlayerMediator.prototype.componentType="player";PlayerMediator.prototype.core=null;PlayerMediator.prototype.medium=null;PlayerMediator.prototype.layers=null;PlayerMediator.prototype.ready=false;PlayerMediator.prototype.onRegister=function(){var device;PlayerMediator.__super__.onRegister.call(this);device=Utils.getDevice();if((device!=null)){this.classList.add(device)}};PlayerMediator.prototype.listNotificationInterests=function(){return[Notifications.DISPLAY_STATE_CHANGE,Notifications.ACTIVE_STATE_CHANGE,Notifications.PLAY_STATE_CHANGE,Notifications.ADD_APPLICATION_STATE,Notifications.REMOVE_APPLICATION_STATE,Notifications.MEDIUM_CHANGE,Notifications.DURATION_CHANGE,Notifications.TEMPORAL_TYPE_CHANGE,Notifications.ADD_LAYER,Notifications.REMOVE_LAYER,Notifications.READY]};PlayerMediator.prototype.handleNotification=function(notification){var body,name,newState,oldState,state,states;name=notification.getName();body=notification.getBody();switch(name){case Notifications.ACTIVE_STATE_CHANGE:case Notifications.PLAY_STATE_CHANGE:case Notifications.DISPLAY_STATE_CHANGE:case Notifications.MEDIUM_CHANGE:states=body;newState=states.newState;oldState=states.oldState;if((oldState!=null)&&this.classList.contains(oldState)){this.classList.remove(oldState)}if(newState!=null){this.classList.add(newState)}break;case Notifications.ADD_APPLICATION_STATE:state=body;this.classList.add(state);break;case Notifications.REMOVE_APPLICATION_STATE:state=body;this.classList.remove(state);break;case Notifications.TEMPORAL_TYPE_CHANGE:if(body==="live"){this.sendNotification(Notifications.ADD_APPLICATION_STATE,"live")}else{this.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"live")}break;case Notifications.DURATION_CHANGE:if(body>3600){this.sendNotification(Notifications.ADD_APPLICATION_STATE,"long-form")}else{this.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"long-form")}break;case Notifications.ADD_LAYER:this.addLayer(body);break;case Notifications.REMOVE_LAYER:this.removeLayer(body);break;case Notifications.READY:this.initialize()}};PlayerMediator.prototype.initialize=function(){var layer,_i,_len,_ref;this.ready=true;_ref=this.layers;for(_i=0,_len=_ref.length;_i<_len;_i++){layer=_ref[_i];if(!this.viewComponent.contains(layer)){this.viewComponent.appendChild(layer)}}};PlayerMediator.prototype.addLayer=function(layer){this.layers.push(layer);if(this.ready){this.viewComponent.appendChild(layer)}};PlayerMediator.prototype.removeLayer=function(layer){var index;if(this.viewComponent.contains(layer)){this.viewComponent.removeChild(layer)}index=this.layers.indexOf(layer);if(index>=0){this.layers.splice(index,1)}};function FlashPlayerMediator(viewComponent){FlashPlayerMediator.__super__.constructor.call(this,this.type,viewComponent)}__extends(FlashPlayerMediator,PlayerMediator);FlashPlayerMediator.NAME="FlashPlayerMediator";FlashPlayerMediator.prototype.type="flash";FlashPlayerMediator.prototype.listNotificationInterests=function(){return FlashPlayerMediator.__super__.listNotificationInterests.call(this).concat([PluginNotifications.PLUGINS_INITIALIZED])};FlashPlayerMediator.prototype.handleNotification=function(notification){var body,name;name=notification.getName();body=notification.getBody();switch(name){case Notifications.READY:return;case PluginNotifications.PLUGINS_INITIALIZED:this.initialize();return}FlashPlayerMediator.__super__.handleNotification.call(this,notification)};var AISNotifications={START_AUTHENTICATION:"startAuthentication",AUTHENTICATED:"aisauthenticated",AUTHENTICATING:"aisathenticating",AUTHENTICATION_COMPLETE:"authenticationComplete",CHOOSE_AUTH_PROVIDER:"chooseAuthProvider",CHOOSE_PLAY_OPTIONS:"choosePlayOptions",LAUNCH_IDP_LOGIN:"launchIDPLogin"};function AISCommand(){AISCommand.__super__.constructor.call(this)}__extends(AISCommand,puremvc.SimpleCommand);AISCommand.prototype.getProxy=function(){return this.facade.retrieveProxy(AISProxy.NAME)};function AISPauseCommand(){AISPauseCommand.__super__.constructor.call(this)}__extends(AISPauseCommand,AISCommand);AISPauseCommand.prototype.execute=function(notification){var proxy;proxy=this.getProxy();proxy.vcsSet(proxy.currentTime)};function AISEndedCommand(){AISEndedCommand.__super__.constructor.call(this)}__extends(AISEndedCommand,AISCommand);AISEndedCommand.prototype.execute=function(notification){this.getProxy().vcsSet(0)};function Cookies(){}Cookies.setCookie=function(name,value,days,path,domain){var expires;value=escape(value);if(days!=null){expires=new Date();expires.setDate(expires.getDate()+days);value+="; expires="+expires.toUTCString()}if(domain!=null){value+="; domain="+domain}if(path!=null){value+="; path="+path}return document.cookie=name+"="+value};Cookies.getCookie=function(name){var cookie,cookies,index,key,value,_i,_len;cookies=document.cookie.split(";");for(_i=0,_len=cookies.length;_i<_len;_i++){cookie=cookies[_i];index=cookie.indexOf("=");key=cookie.substr(0,index).replace(/^\s+|\s+$/g,"");value=unescape(cookie.substr(index+1));if(key===name){return value}}};Cookies.deleteCookie=function(name){return this.setCookie(name,"",-1)};function AISTimeUpdateCommand(){AISTimeUpdateCommand.__super__.constructor.call(this)}__extends(AISTimeUpdateCommand,AISCommand);AISTimeUpdateCommand.prototype.execute=function(notification){var currentTime,proxy;proxy=this.getProxy();currentTime=Math.floor(notification.getBody());if(currentTime!==0&&currentTime%30===0&&currentTime!==proxy.currentTime){proxy.vcsSet(currentTime)}proxy.currentTime=currentTime};function PluginProxy(config){PluginProxy.__super__.constructor.call(this,config)}__extends(PluginProxy,DataBoundConfigurationProxy);PluginProxy.NAME=ModuleProxy.NAME;PluginProxy.prototype.enabled=true;PluginProxy.prototype.plugin=null;PluginProxy.prototype.setEnabled=function(value){this.enabled=value;return value};PluginProxy.prototype.getEnabled=function(){return this.enabled};PluginProxy.prototype.createPlugin=function(){};PluginProxy.prototype.initialize=function(){this.plugin=this.createPlugin()};PluginProxy.prototype.error=function(err){this.facade.logger.error("[AMP "+(this.facade.getModuleName().toUpperCase())+" Error]",err)};function AISProxy(config){AISProxy.__super__.constructor.call(this,config)}__extends(AISProxy,PluginProxy);AISProxy.NAME=ModuleProxy.NAME;AISProxy.prototype.client=null;AISProxy.prototype.currentTime=null;AISProxy.prototype.idps=null;AISProxy.prototype.idp=null;AISProxy.prototype.token=null;AISProxy.prototype.authz=null;AISProxy.prototype.defaults={platformID:null,resourceID:null,contentID:null,responseTargets:null,logos:{base:null,group:null,key:"full"}};AISProxy.prototype.getScript=function(){return this.value.plugin};AISProxy.prototype.initialize=function(){this.client=window.ais_client;this.client.setLogging(this.facade.logger.enabled);this.client.setPlatformId(this.value.platformID);this.client.setUseCache(!/MSIE [7-8]/.test(navigator.userAgent));this.client.assignhandler("bounce",this.bounceHandler.bind(this));this.client.assignhandler("chooser",this.chooserHandler.bind(this));this.client.assignhandler("init",this.initHandler.bind(this));this.client.assignhandler("authz_query",this.authz_queryHandler.bind(this));this.client.assignhandler("identity",this.identityHandler.bind(this));this.client.assignhandler("logout_result",this.logoutHandler.bind(this));this.client.assignhandler("vcs",this.vcsHandler.bind(this));window.onunload=function(){}};AISProxy.prototype.authorize=function(){this.authz=null;this.token=null;this.disengage();this.sendNotification(AISNotifications.START_AUTHENTICATION)};AISProxy.prototype.authorized=function(token){if(token==null){token=this.token}this.engage();this.sendNotification(AISNotifications.AUTHENTICATION_COMPLETE);this.sendNotification(SecurityNotifications.AUTHORIZED,token)};AISProxy.prototype.play=function(time){this.sendNotification(Notifications.INITIALIZED);this.sendNotification(Notifications.PLAY);if(time!=null){return this.sendNotification(Notifications.SEEK,time)}};AISProxy.prototype.engage=function(){this.facade.registerCommand(Notifications.TIME_UPDATE,AISTimeUpdateCommand);this.facade.registerCommand(Notifications.PAUSE,AISPauseCommand);this.facade.registerCommand(Notifications.ENDED,AISEndedCommand)};AISProxy.prototype.disengage=function(){this.facade.removeCommand(Notifications.TIME_UPDATE);this.facade.removeCommand(Notifications.PAUSE);this.facade.removeCommand(Notifications.ENDED)};AISProxy.prototype.logout=function(){var height,method,target,width,_ref;method=((_ref=this.idp.window_display)!=null?_ref.method:void 0)||"redirect";target=this.getTarget(method);this.setRedirect(method);switch(method){case"redirect":window.open(this.client.logoutFormat(target),"_top");break;case"popup":width=this.idp.window_display.width||320;height=this.idp.window_display.height||240;window.open(this.client.logoutFormat(target),"ais_popup","width="+width+",height="+height)}};AISProxy.prototype.bounce=function(resource){this.client.bounce()};AISProxy.prototype.init=function(resource){this.client.init()};AISProxy.prototype.choose=function(){this.client.chooser()};AISProxy.prototype.resourceAccess=function(resource){if(resource==null){resource=this.value.resourceID}this.client.resourceAccess(resource)};AISProxy.prototype.vcsSet=function(time){time=Utils.formatTimecode(time);return this.client.vcsSet(this.value.contentID,time)};AISProxy.prototype.bounceHandler=function(type,resp){var auth;auth=resp.authenticated.toString()==="true";if(auth===false){this.sendNotification(Notifications.DISPATCH_EVENT,new Event("authenticationfailed"));this.choose()}else{if(auth===true){this.init()}}};AISProxy.prototype.initHandler=function(type,resp){var key,key2,value,value2,_ref;this.idp=resp.idps;this.facade.idps={};_ref=resp.idps;for(key in _ref){value=_ref[key];this.facade.idps.key=key;for(key2 in value){value2=value[key2];this.facade.idps[key2]=value2}break}for(key in resp){value=resp[key];if(key!=="idps"&&(value!=null)){this.facade[key]=value}}this.facade.idps.logo=this.value.logos.base+this.facade.idps.logos[this.value.logos.key];this.facade.player.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"authenticating");this.sendNotification(AISNotifications.AUTHENTICATED,this.facade.idps);this.resourceAccess(this.value.resourceID)};AISProxy.prototype.chooserHandler=function(type,resp){this.facade.sendNotification(Notifications.ADD_APPLICATION_STATE,"authenticating");resp.possible_idps=this.idps=this.sort(resp.possible_idps,"value","display_name");this.sendNotification(AISNotifications.CHOOSE_AUTH_PROVIDER,resp)};AISProxy.prototype.launchIDPLogin=function(idp_platform_id){var height,idp,method,target,width,_ref;this.sendNotification(AISNotifications.AUTHENTICATING,true);idp=this.idps[idp_platform_id];method=((_ref=idp.window_display)!=null?_ref.method:void 0)||"redirect";target=this.getTarget(method);this.setRedirect(method);switch(method){case"redirect":window.open(this.client.loginFormat(idp_platform_id,target),"_top");break;case"popup":method=idp.window_display.method||"popup";width=idp.window_display.width||320;height=idp.window_display.height||240;window.open(this.client.loginFormat(idp_platform_id,target),"ais_popup","width="+width+",height="+height)}};AISProxy.prototype.identityHandler=function(type,resp){var aisuid;aisuid=resp.identity["attributes"]["aisuid"]};AISProxy.prototype.authz_queryHandler=function(type,resp){var auth,dimensions,resource;auth=resp.authorization.toString()==="true";if(auth===false){this.sendNotification(SecurityNotifications.AUTHORIZATION_FAILED);this.authorize()}else{if(auth===true){this.authz=resp;dimensions={mvpdName:this.facade.idps.name,viewerId:this.client.aisuid,"std:viewerId":this.client.aisuid};this.facade.player.sendNotification(MediaAnalyticsNotifications.SET_DIMENSIONS,dimensions);this.facade.viewerId=this.client.aisuid;resource=resp.resource;if(resource!=null){this.facade.resource=resource}this.token="hdnea="+resp.security_token;this.sendNotification(SecurityNotifications.SET_KEY,"hdnea=");this.sendNotification(SecurityNotifications.SET_TOKEN,resp.security_token);this.sendNotification(AISNotifications.AUTHENTICATING,false);if(this.value.contentID!=null){this.client.vcsGet(this.value.contentID)}else{this.authorized(this.token)}}}};AISProxy.prototype.logoutHandler=function(type,resp){top.location.href=top.location.href};AISProxy.prototype.vcsHandler=function(type,resp){if(resp.operation==="get"){if(resp.ph_pos==="00:00:00"||resp.ph_pos==="00:00"){this.client.vcsSet(this.value.contentID,resp.ph_pos);this.authorized(this.token)}else{this.sendNotification(AISNotifications.CHOOSE_PLAY_OPTIONS,Utils.flattenTimecode(resp.ph_pos))}}};AISProxy.prototype.sort=function(obj,sortType,valueName){var data,index,item,key,returnObj,value,_i,_len;returnObj={};data=[];index=0;for(key in obj){value=obj[key];data[index]={key:key,value:value[valueName]};index++}data.sort(function(a,b){var valueA,valueB;valueA=sortType==="value"?a.value.toLowerCase():a.key.toLowercase();valueB=sortType==="value"?b.value.toLowerCase():b.key.toLowercase();if(valueA<valueB){return -1}else{if(valueA>valueB){return 1}else{return 0}}});for(index=_i=0,_len=data.length;_i<_len;index=++_i){item=data[index];returnObj[item.key]=obj[item.key]}return returnObj};AISProxy.prototype.setRedirect=function(method){var devToken,domain,loc;try{devToken=/\/dev\./;loc=window.top.location.href||window.top.location;domain=devToken.test(loc)?loc.replace(devToken,"/"):null;Cookies.setCookie(this.getTarget(method),loc,1,"/",domain)}catch(error){}};AISProxy.prototype.getTarget=function(method){if(method==null){method="redirect"}return this.value.responseTargets[method]};function PlaybackProxy(){PlaybackProxy.__super__.constructor.call(this,PlaybackProxy.NAME);this.data={core:null,muted:false,started:false,volume:1,currentTime:0,duration:0,src:null,ended:false,paused:false,seeking:false,loading:false};if(Utils.getDevice()==="desktop"){this.initialized=true}this.handlers={timeupdate:this.ontimeupdate.bind(this),durationchange:this.ondurationchange.bind(this),play:this.onplay.bind(this),playing:this.onplaying.bind(this),pause:this.onpause.bind(this),loadeddata:this.onloadeddata.bind(this),waiting:this.onwaiting.bind(this),seeking:this.onseeking.bind(this),seeked:this.onseeked.bind(this),ended:this.onended.bind(this),progress:this.onprogress.bind(this),error:this.onerror.bind(this),loadstart:this.onloadstart.bind(this),canplay:this.oncanplay.bind(this),canplaythrough:this.oncanplaythrough.bind(this),loadedmetadata:this.onloadedmetadata.bind(this)};this.resumeHandlers={seeked:this.resumeseeked.bind(this),canplay:this.resumecanplay.bind(this)}}__extends(PlaybackProxy,puremvc.Proxy);PlaybackProxy.NAME="PlaybackProxy";PlaybackProxy.prototype.data=null;PlaybackProxy.prototype.initialized=false;PlaybackProxy.prototype.enabled=null;PlaybackProxy.prototype.handlers=null;PlaybackProxy.prototype.resumeHandlers=null;PlaybackProxy.prototype.playWhenLoaded=false;PlaybackProxy.prototype.getEnabled=function(){return this.enabled};PlaybackProxy.prototype.setEnabled=function(value){if(value===this.enabled){return}this.enabled=value;if(this.enabled===true){this.load()}else{this.applyHandlers(false)}return value};PlaybackProxy.prototype.applyHandlers=function(enabled){var action,handler,type,video,_ref;if(enabled==null){enabled=true}video=this.getMediaElement();action=enabled?"addEventListener":"removeEventListener";_ref=this.handlers;for(type in _ref){handler=_ref[type];video[action](type,handler)}};PlaybackProxy.prototype.resumecanplay=function(event){var video;video=event.target;video.removeEventListener("canplay",this.resumeHandlers.canplay);this.handlers.durationchange(event);if(this.data.currentTime>0){video.addEventListener("seeked",this.resumeHandlers.seeked);this.seek()}else{this.resumecomplete()}};PlaybackProxy.prototype.resumeseeked=function(event){var video;video=event.target;video.removeEventListener("seeked",this.resumeHandlers.seeked);this.resumecomplete()};PlaybackProxy.prototype.resumecomplete=function(){this.data.loading=false;this.applyHandlers(true);if(this.playWhenLoaded===true){setTimeout(this.play.bind(this),0)}};PlaybackProxy.prototype.ontimeupdate=function(event){this.data.currentTime=event.target.currentTime;this.sendNotification(Notifications.TIME_UPDATE,this.data.currentTime)};PlaybackProxy.prototype.ondurationchange=function(event){var duration;duration=this.getMediaElement().duration;if(duration===this.data.duration||duration===0||isNaN(duration)){return}this.data.duration=duration;if(/Android 4/.test(navigator.userAgent)&&event.target.src.indexOf(".m3u8")!==-1){return}this.sendNotification(Notifications.CHANGE_DURATION,duration)};PlaybackProxy.prototype.onplay=function(event){this.data.paused=false};PlaybackProxy.prototype.onplaying=function(event){this.data.paused=false;this.data.seeking=false;this.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.PLAYING);this.sendNotification(Notifications.PLAYING)};PlaybackProxy.prototype.onpause=function(event){if(this.data.seeking===true){return}this.data.paused=true;if(event.target.readyState>0){this.sendNotification(Notifications.PAUSED);this.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.PAUSED)}};PlaybackProxy.prototype.onloadeddata=function(event){this.sendNotification(Notifications.LOADED_DATA)};PlaybackProxy.prototype.onwaiting=function(event){this.sendNotification(Notifications.WAITING)};PlaybackProxy.prototype.onseeking=function(event){event.target.removeEventListener("timeupdate",this.handlers.timeupdate);this.data.seeking=true;this.sendNotification(Notifications.SEEKING)};PlaybackProxy.prototype.onseeked=function(event){this.data.seeking=false;this.sendNotification(Notifications.SEEKED);event.target.addEventListener("timeupdate",this.handlers.timeupdate)};PlaybackProxy.prototype.onended=function(event){this.data.ended=true;this.sendNotification(Notifications.ENDED)};PlaybackProxy.prototype.onprogress=function(event){var buffered,video;try{video=event.target;buffered=video.buffered;this.sendNotification(Notifications.PROGRESS,buffered.end(buffered.length-1)/video.duration)}catch(error){}};PlaybackProxy.prototype.onerror=function(event){this.sendNotification(Notifications.ERROR,event.target.error)};PlaybackProxy.prototype.onloadstart=function(event){this.sendNotification(Notifications.LOAD_START)};PlaybackProxy.prototype.oncanplay=function(event){this.sendNotification(Notifications.CAN_PLAY)};PlaybackProxy.prototype.oncanplaythrough=function(event){this.sendNotification(Notifications.CAN_PLAY_THROUGH);this.sendNotification(Notifications.PROGRESS,this.getDuration())};PlaybackProxy.prototype.onloadedmetadata=function(event){this.sendNotification(Notifications.ENABLE_FULL_SCREEN);this.sendNotification(Notifications.LOADED_METADATA)};PlaybackProxy.prototype.reset=function(){this.data.currentTime=0;this.data.duration=0;this.data.src=null;this.data.ended=false;this.data.paused=false;this.data.seeking=false;this.data.started=false;this.data.loading=false};PlaybackProxy.prototype.getStarted=function(){return this.data.started};PlaybackProxy.prototype.getMediaElement=function(){return this.facade.getMediaElement()};PlaybackProxy.prototype.canPlayType=function(mimeType){var canPlay;canPlay=this.getMediaElement().canPlayType(mimeType)||"";if((/Android 4\.[1-9]/.test(navigator.userAgent)||/Silk\/3/.test(navigator.userAgent))&&mimeType===Utils.mimeTypes.m3u8){canPlay="maybe"}return canPlay};PlaybackProxy.prototype.getPaused=function(){return this.data.paused};PlaybackProxy.prototype.getEnded=function(){return this.data.ended};PlaybackProxy.prototype.getSeeking=function(){return this.data.seeking};PlaybackProxy.prototype.getCurrentTime=function(){return this.data.currentTime};PlaybackProxy.prototype.setCurrentTime=function(value){if(value===this.data.currentTime){return}this.data.currentTime=value;if(this.getStarted()){this.seek(value)}return value};PlaybackProxy.prototype.seek=function(value){if(value==null){value=this.data.currentTime}this.getMediaElement().currentTime=value};PlaybackProxy.prototype.getSrc=function(){return this.data.src};PlaybackProxy.prototype.setSrc=function(value){if(!(value!=null)||value===""){this.sendNotification(Notifications.ERROR,"The value of src is not supported: "+value)}this.reset();this.data.src=value;return value};PlaybackProxy.prototype.getVolume=function(){return this.getMediaElement().volume};PlaybackProxy.prototype.setVolume=function(value){if((0<=value&&value<=1)&&value!==this.getMediaElement().volume){this.sendNotification(Notifications.VOLUME_CHANGE,this.getMediaElement().volume=value)}return value};PlaybackProxy.prototype.getMuted=function(){return this.data.muted};PlaybackProxy.prototype.setMuted=function(value){var volume;this.data.muted=value;if(this.data.muted===true){this.data.volume=this.getVolume();volume=0}else{volume=this.data.volume}this.sendNotification(Notifications.CHANGE_VOLUME,volume);return value};PlaybackProxy.prototype.getDuration=function(){return this.data.duration};PlaybackProxy.prototype.play=function(){if(this.data.started!==true){this.data.started=true;this.setEnabled(true);this.playWhenLoaded=true}else{if(this.data.loading===true){this.playWhenLoaded=true}else{this.getMediaElement().play()}}};PlaybackProxy.prototype.pause=function(){this.data.paused=true;this.getMediaElement().pause()};PlaybackProxy.prototype.load=function(){var element,_ref;this.data.loading=true;this.playWhenLoaded=false;element=this.getMediaElement();element.addEventListener("canplay",this.resumeHandlers.canplay);element.addEventListener("loadedmetadata",this.handlers.loadedmetadata);element.addEventListener("durationchange",this.handlers.durationchange);element.addEventListener("canplaythrough",this.handlers.canplaythrough);element.src=this.data.src;if(Utils.isIPad()&&((_ref=Utils.getIOSversion())!=null?_ref[0]:void 0)<8){setTimeout(element.load.bind(element),100)}else{element.load()}};function FlashAuthorizedCommand(){FlashAuthorizedCommand.__super__.constructor.call(this)}__extends(FlashAuthorizedCommand,puremvc.SimpleCommand);FlashAuthorizedCommand.prototype.execute=function(notification){var mediaProxy,securityProxy,src;mediaProxy=this.facade.retrieveProxy(MediaProxy.NAME);securityProxy=this.facade.retrieveProxy(SecurityProxy.NAME);src=mediaProxy.getSrc()||"";if(src.indexOf(".smil")===-1){src=securityProxy.createURL(src)}mediaProxy.setSrc(src);this.facade.video.authenticationComplete({media:mediaProxy.getData()})};function PlaybackCoreProxy(supportedTypes){this.supportedTypes=supportedTypes!=null?supportedTypes:this.supportedTypes;PlaybackCoreProxy.__super__.constructor.call(this)}__extends(PlaybackCoreProxy,PlaybackProxy);PlaybackCoreProxy.prototype.supportedTypes=null;PlaybackCoreProxy.prototype.playbackCoreName=null;PlaybackCoreProxy.prototype.getPlaybackCoreName=function(){return this.playbackCoreName};PlaybackCoreProxy.prototype.getSupportedTypes=function(){return this.supportedTypes};PlaybackCoreProxy.prototype.setSupportedTypes=function(types){this.supportedTypes=types;return types};PlaybackCoreProxy.prototype.canPlayType=function(mimeType){if(this.getSupportedTypes().indexOf(mimeType)!==-1){return"maybe"}return""};function FlashPlaybackProxy(player){this.player=player;FlashPlaybackProxy.__super__.constructor.call(this)}__extends(FlashPlaybackProxy,PlaybackCoreProxy);FlashPlaybackProxy.NAME=PlaybackProxy.NAME;FlashPlaybackProxy.prototype.player=null;FlashPlaybackProxy.prototype.initialized=true;FlashPlaybackProxy.prototype.playbackCoreName="flash";FlashPlaybackProxy.prototype.supportedTypes=["video/mp4","video/x-flv","video/f4m","application/smil","application/smil+xml"];FlashPlaybackProxy.prototype.getPaused=function(){return this.player.getPaused()};FlashPlaybackProxy.prototype.getEnded=function(){return this.player.getEnded()};FlashPlaybackProxy.prototype.getSeeking=function(){return this.player.getSeeking()};FlashPlaybackProxy.prototype.getCurrentTime=function(){return this.player.getCurrentTime()};FlashPlaybackProxy.prototype.setCurrentTime=function(value){this.player.setCurrentTime(value);return value};FlashPlaybackProxy.prototype.getSrc=function(){return this.player.getSrc()};FlashPlaybackProxy.prototype.setSrc=function(value){this.player.setSrc(value);return value};FlashPlaybackProxy.prototype.getVolume=function(){return this.player.getVolume()};FlashPlaybackProxy.prototype.setVolume=function(value){this.player.setVolume(value);return value};FlashPlaybackProxy.prototype.getMuted=function(){return this.player.getMuted()};FlashPlaybackProxy.prototype.setMuted=function(value){this.player.setMuted(value);return value};FlashPlaybackProxy.prototype.getDuration=function(value){return this.player.getDuration()};FlashPlaybackProxy.prototype.play=function(){this.player.play()};FlashPlaybackProxy.prototype.pause=function(){this.player.pause()};FlashPlaybackProxy.prototype.load=function(){this.player.load()};function FlashPlayer(viewComponent){this.flashObjectID+=Date.now();this.plugins={};this.displayState=DisplayState.NORMAL;this.debug=/debug\=true/.test(location.search);FlashPlayer.__super__.constructor.call(this,viewComponent)}__extends(FlashPlayer,Player);FlashPlayer.prototype.createFramework=function(){var attributes,expressInstallSWF,flash,params,swf,swfs,version,xml,_ref,_this=this;FlashPlayer.__super__.createFramework.call(this);flash=this.config.flash||{};swfs=((_ref=flash["static"])!=null?_ref.enabled:void 0)===true?flash["static"]:flash;swf=this.debug&&(swfs.debug!=null)?swfs.debug:swfs.swf||"amp.swf";version=flash.version||"10.1";expressInstallSWF=flash.expressInstallSWF||"playerProductInstall.swf";params=this.createParams(flash);attributes=this.createAttributes(flash);this.flashvars=this.createFlashVars(flash);if(!(this.flashvars.settings_url!=null)){xml=this.createXML(this.config);if(xml!=null){this.flashvars.settings_xml=xml}}swfobject.embedSWF(swf,this.flashObjectID,"100%","100%",version,expressInstallSWF,this.flashvars,params,attributes,function(obj){_this.createdHandler(obj)})};FlashPlayer.prototype.playerType="flash";FlashPlayer.prototype.flashObjectID="flashObject";FlashPlayer.prototype.playState=null;FlashPlayer.prototype.loaded=false;FlashPlayer.prototype.flashvars=null;FlashPlayer.prototype.seeking=false;FlashPlayer.prototype.paused=false;FlashPlayer.prototype.ended=false;FlashPlayer.prototype.muted=false;FlashPlayer.prototype.plugins=null;FlashPlayer.prototype.debug=false;FlashPlayer.prototype.started=false;FlashPlayer.prototype.displayState=null;FlashPlayer.prototype.mediaProxy=null;FlashPlayer.prototype.createModel=function(){this.registerProxy(new ApplicationStateProxy());this.registerProxy(new DataBindingProxy());this.registerProxy(new SecurityProxy());this.mediaProxy=new MediaProxy();this.registerProxy(this.mediaProxy);this.registerProxy(new FlashPlaybackProxy(this))};FlashPlayer.prototype.createView=function(){this.registerMediator(new FlashPlayerMediator(this.getViewComponent()));this.registerMediator(new VideoLayerMediator());this.registerMediator(new OverlayLayerMediator());this.registerMediator(new LocalizationWrapper(this,this.config))};FlashPlayer.prototype.createController=function(){this.registerCommand(SecurityNotifications.AUTHORIZED,FlashAuthorizedCommand);this.registerCommand(SecurityNotifications.SET_TOKEN,SecuritySetTokenCommand);this.registerCommand(SecurityNotifications.SET_KEY,SecuritySetKeyCommand);this.registerCommand(Notifications.CHANGE_PLAY_STATE,ChangePlayStateCommand)};FlashPlayer.prototype.createMediaElement=function(){var video,viewComponent;video=new MediaElementMediator("flash","div");viewComponent=video.getViewComponent();viewComponent.id=viewComponent.name=this.flashObjectID;this.sendNotification(Notifications.PLAYBACK_CORE_CHANGE,video);return viewComponent};FlashPlayer.prototype.createParams=function(flash){var params;params={allowFullScreen:true,allowScriptAccess:"always",wmode:"direct",bgColor:"#000000"};if(flash.params!=null){if(flash.params.allowFullScreen!=null){params.allowFullScreen=flash.params.allowFullScreen}if(flash.params.allowScriptAccess!=null){params.allowScriptAccess=flash.params.allowScriptAccess}if(flash.params.wmode!=null){params.wmode=flash.params.wmode}if(flash.params.bgColor!=null){params.bgColor=flash.params.bgColor}}if(params.wmode==="direct"&&/MSIE/.test(navigator.userAgent)){params.wmode="transparent"}return params};FlashPlayer.prototype.getModules=function(){return this.plugins};FlashPlayer.prototype.createPlugins=function(){var def,feature,key,plugin,register,_ref;_ref=AMP.plugins;for(key in _ref){register=_ref[key];if(!((key in this.config)&&!(this.config[key].enabled===false))){continue}def=register[this.getPlayerType()];if(!(def!=null)){this.logger.debug("[AMP FLASH]","Plugin could not be found",key);continue}try{plugin=this[key]=this.plugins[key]=new def(this,this.config[key]);this.registerMediator(this.plugins[key]);feature=typeof plugin.getFeatureName==="function"?plugin.getFeatureName():void 0;if(feature!=null){this[feature]=plugin}this.logger.debug("[AMP FLASH]","Plugin Registered",key)}catch(error){this.error("Plugin Error: "+key,error);continue}}this.sendNotification(PluginNotifications.PLUGINS_INITIALIZED,this.plugins)};FlashPlayer.prototype.createAttributes=function(flash){var attributes;attributes={id:this.flashObjectID,name:this.flashObjectID};if(flash.attributes!=null){if(flash.attributes.id!=null){attributes.id=flash.attributes.id}if(flash.attributes.name!=null){attributes.name=flash.attributes.name}}return attributes};FlashPlayer.prototype.createFlashJSON=function(config,spacer){var prepJSON,prepValue;if(config==null){config=this.config}config=JSON.parse(JSON.stringify(config));prepValue=function(config,key,value){switch(typeof value){case"string":config[key]=escape(value);break;case"object":case"array":prepJSON(value)}};prepJSON=function(config){var key,value,_i,_len;if(config instanceof Array){for(key=_i=0,_len=config.length;_i<_len;key=++_i){value=config[key];prepValue(config,key,value)}}else{if(typeof config==="object"){for(key in config){value=config[key];prepValue(config,key,value)}}}};prepJSON(config);return escape(JSON.stringify(config,null,spacer))};FlashPlayer.prototype.createFlashVars=function(flash){var flashvars,key,settings,value,_ref,_ref1,_ref2,_ref3;flashvars={};settings=JSON.parse(JSON.stringify(this.config));settings.flash=null;delete settings.flash;settings.locales=null;delete settings.locales;settings.params=null;delete settings.params;settings.rules=null;delete settings.rules;flashvars.settings_json=this.createFlashJSON(settings);if(this.config.autoplay!=null){flashvars.auto_play=this.config.autoplay}if((this.config.rules!=null)){Utils.mergeRules(this.config.rules)}flashvars.hinting_rules=escape(JSON.stringify(Utils.rules));if(this.config.volume!=null){flashvars.volume=Utils.clamp(this.config.volume,0,1)}if((this.config.target!=null)){flashvars.external_target=this.config.target}if((this.config.name!=null)){flashvars.core_player_name=this.config.name}if((this.config.domain!=null)){flashvars.embed_domain=flashvars.domain=this.config.domain}flashvars.auto_replay=this.config.loop===true;if(this.config.fullscreen!=null){flashvars.fullscreen_enabled=this.config.fullscreen.enabled!==false&&this.config.fullscreen.mode!==FullscreenMode.EXTERNAL}if(this.config.titlebar!=null){flashvars.titlebar_enabled=this.config.titlebar.enabled!==false}if(this.config.params!=null){flashvars.params=escape(JSON.stringify(this.config.params))}if(this.config.version!=null){flashvars.context_menu_label=this.config.version}if(((_ref=this.config.controls)!=null?_ref.displaySceneMarkers:void 0)!=null){flashvars.displaySceneMarkers=this.config.controls.displaySceneMarkers}if(this.config.media!=null){if(this.config.media.src!=null){this.setSrc(this.config.media.src);flashvars.video_url=escape(this.config.media.src)}if((this.config.media.source!=null)&&this.config.media.source.length>0){this.setSource(this.config.media.source);flashvars.video_url=escape(this.mediaProxy.getSrc())}if(this.config.media.medium!=null){this.setMedium(this.config.media.medium);flashvars.medium=this.config.media.medium}if(this.config.media.title!=null){flashvars.title=escape(this.config.media.title)}if(this.config.media.poster!=null){flashvars.poster=escape(this.config.media.poster)}if(this.config.media.temporalType!=null){flashvars.temporalType=this.config.media.temporalType}}if(this.getMedium()==="audio"){flashvars.controls=true;flashvars.auto_hide=-1}if(((_ref1=this.config.ima)!=null?(_ref2=_ref1.overlay)!=null?_ref2.delay:void 0:void 0)!=null){flashvars.overlay_ad_delay=this.config.ima.overlay.delay}if((this.config.ticker!=null)&&this.config.ticker.enabled!==false){if(this.config.ticker.url!=null){flashvars.ticker_text_url=this.config.ticker.url}if(this.config.ticker.interval!=null){flashvars.ticker_polling_interval=this.config.ticker.interval}if(this.config.ticker.speed!=null){flashvars.ticker_speed=this.config.ticker.speed}}flashvars.show_play_button_overlay=false;flashvars.auto_play_list=false;flashvars.next_video_timer=0;if(flashvars.context_menu_mode==null){flashvars.context_menu_mode=this.debug===true?"long":"short"}this.sendNotification(FlashNotifications.CREATE_FLASH_VARS,{flashvars:flashvars,config:this.config});if(flash.vars!=null){_ref3=flash.vars;for(key in _ref3){value=_ref3[key];flashvars[key]=value}}return flashvars};FlashPlayer.prototype.createXML=function(config){var app,clss,element,elements,mode,plugin,plugins,staticConfig,str,url,xml,_i,_j,_k,_len,_len1,_len2,_ref,_ref1;if(!((config!=null?(_ref=config.flash)!=null?_ref.xml:void 0:void 0)!=null)){return}xml=XMLUtils.parse(config.flash.xml);this.sendNotification(FlashNotifications.CREATE_XML,{config:config,xml:xml});plugins=xml.getElementsByTagName("plugin");staticConfig=config.flash["static"];if((staticConfig!=null?staticConfig.enabled:void 0)===true&&(staticConfig.plugins!=null)){for(_i=0,_len=plugins.length;_i<_len;_i++){plugin=plugins[_i];if(!((clss=staticConfig.plugins[plugin.getAttribute("id")])!=null)){continue}plugin.setAttribute("type","static");XMLUtils.updateTextContent(plugin,clss)}}else{if(this.debug===true){for(_j=0,_len1=plugins.length;_j<_len1;_j++){plugin=plugins[_j];if(!(plugin.getAttribute("id")==="AkamaiAdvancedStreamingPlugin")){continue}url=plugin.textContent||plugin.text;XMLUtils.updateTextContent(plugin,url.replace("AkamaiAdvancedStreamingPlugin.swf","AkamaiAdvancedStreamingPlugin-logging.swf"))}}}mode=(_ref1=this.config.fullscreen)!=null?_ref1.mode:void 0;if(mode!=null){elements=xml.getElementsByTagName("element");for(_k=0,_len2=elements.length;_k<_len2;_k++){element=elements[_k];if(element.getAttribute("id")==="fullscreenBtn"){element.setAttribute("action","external")}}}str=XMLUtils.serialize(xml);app=str.match(/<application>[\w\W\s\S\d\D]*<\/application>/)[0]||str;app=app.replace(/[\n\r\t]/g,"");return escape(app)};FlashPlayer.prototype.createdHandler=function(obj){var _this=this;this.mediaElement=obj.ref;this.mediaElement.className=Namespace.PREFIX+MediaElementMediator.prototype.componentType;this.mediaElement.eventHandler=function(eventName,body){return _this.eventHandler(eventName,body)};this.sendNotification(FlashNotifications.FLASH_CREATED);if(this.getMedium()!=null){this.setMedium(this.getMedium())}};FlashPlayer.prototype.eventHandler=function(eventName,body){var error,event,state,type,_ref,_ref1;try{switch(eventName){case FlashNotifications.INITIALIZED:type=state="ready";break;case FlashNotifications.RESET:if(!(body!=null)){state="ready"}this.started=false;break;case FlashNotifications.LOADING:type="loadstart";break;case FlashNotifications.PLAYER_ERROR:type=state="error";break;case FlashNotifications.MEDIA_ERROR:type=state="error";break;case FlashNotifications.ERROR_STREAM_NOT_FOUND:type=state="error";break;case FlashNotifications.CAPABILITY_CHANGE:event=body.type;if(event==="canPlayChange"&&body.enabled===true){type="canplay";this.loaded=true}else{if(event==="canSeekChange"&&body.enabled===true){type="canplaythrough"}else{if(event==="temporalChange"&&body.enabled===true){type="loadedmetadata"}}}break;case FlashNotifications.PLAYBACK_OPEN:type="started";this.started=true;break;case FlashNotifications.PLAYING:if(!this.started){this.sendNotification(Notifications.PLAY,body)}type=state="playing";this.ended=false;this.paused=false;break;case FlashNotifications.ELEMENT_EVENT:if(body.element==="fullscreenBtn"&&body.type==="click"&&((_ref=this.config)!=null?(_ref1=_ref.fullscreen)!=null?_ref1.mode:void 0:void 0)===FullscreenMode.EXTERNAL){state=this.getDisplayState()===DisplayState.FULL_SCREEN?DisplayState.NORMAL:DisplayState.FULL_SCREEN;this.setDisplayState(state)}break;case FlashNotifications.PLAY_REQUEST:type="playrequest";break;case FlashNotifications.PLAY:if(this.playState!=="paused"&&this.started){type="play"}break;case FlashNotifications.ENDED:type=state="ended";this.ended=true;break;case FlashNotifications.PAUSED:type="pause";state="paused";this.paused=true;break;case FlashNotifications.BUFFERING:if(this.className!=="ended"){type=state="waiting"}break;case FlashNotifications.DURATION_CHANGE:if(!isNaN(body.time)){type="durationchange";body=body.time}break;case FlashNotifications.VOLUME_CHANGE:type="volumechange";break;case FlashNotifications.TIME_UPDATE:type="timeupdate";break;case FlashNotifications.SEEKING_CHANGE:type=body.seeking?"seeking":"seeked";this.seeking=body.seeking;break;case FlashNotifications.FULLSCREEN_CHANGE:type="fullscreenchange";body=body.displayState==="fullScreen";this.applyDisplayState(body?DisplayState.FULL_SCREEN:DisplayState.NORMAL);break;case FlashNotifications.FAIL_OVER_ATTEMPT:type="failoverattempt";body=body;break;case FlashNotifications.ERROR:eventName=null}if((eventName!=null)&&eventName!==type){this.sendNotification(Notifications.DISPATCH_EVENT,{type:eventName,data:body,player:this.parent});this.sendNotification(eventName,body)}if(type!=null){if(type==="error"){error=body.error||body;this.error("Flash Error",error)}this.sendNotification(type,body)}if(state!=null){this.setPlayState(state)}}catch(error){this.error("Event Error: "+eventName,error)}};FlashPlayer.prototype.error=function(msg,error){this.logger.error("[AMP FLASH ERROR]",msg,error)};FlashPlayer.prototype.setPlayState=function(state){var states;if(state===this.playState){return}states={newState:state,oldState:this.playState};this.playState=state;this.sendNotification(Notifications.PLAY_STATE_CHANGE,states);return state};FlashPlayer.prototype.setMedia=function(value){FlashPlayer.__super__.setMedia.call(this,value);if(this.playState!=null){this.setPlayState("ready")}this.mediaProxy.setData(value);if(value.src!=null){this.setSrc(value.src)}if((value.source!=null)&&value.source.length>0){this.setSource(value.source)}this.sendNotification(Notifications.MEDIA_CHANGE,value);this.loaded=true;this.mediaElement.loadURL(this.mediaProxy.getSrc(),this.mediaProxy.getData());return value};FlashPlayer.prototype.getMedia=function(){return this.mediaProxy.getData()};FlashPlayer.prototype.load=function(){this.loaded=true;this.mediaElement.loadURL(this.mediaProxy.getSrc())};FlashPlayer.prototype.play=function(){if(!this.loaded){this.load()}this.mediaElement.unpause()};FlashPlayer.prototype.setMuted=function(value){this.muted=value;try{if(value===true){this.mediaElement.mute()}else{this.mediaElement.unmute()}}catch(error){this.error("Flash muted error",error)}return value};FlashPlayer.prototype.getMuted=function(){return this.muted};FlashPlayer.prototype.getSrc=function(value){return this.mediaElement.getURL()};FlashPlayer.prototype.setSrc=function(value){this.mediaProxy.setSrc(value);this.loaded=false;this.setMedium(Utils.getMimeType(value));return value};FlashPlayer.prototype.setAutoplay=function(value){this.mediaElement.setPlayerProperty("autoplay",value);return value};FlashPlayer.prototype.getAutoplay=function(){return this.mediaElement.getPlayerProperty("autoplay")};FlashPlayer.prototype.getMedium=function(){return this.mediaProxy.getData().medium};FlashPlayer.prototype.setMedium=function(value){var media,newState,oldState;media=this.mediaProxy.getData();if(value===media.medium){return}if(media.medium!=null){oldState="medium-"+media.medium}newState=media.medium=/audio/.test(value)?"audio":"video";this.sendNotification(Notifications.MEDIUM_CHANGE,{newState:"medium-"+newState,oldState:oldState});return value};FlashPlayer.prototype.setSource=function(value){var item,media,_this=this;if(!(value!=null)||value.length<1){return}media=this.mediaProxy.getData();media.source=value;this.loaded=false;item=Utils.selectSource(value,function(type){return _this.canPlayType(type)});if(((item!=null?item.src:void 0)!=null)&&item.src!==""){this.setSrc(item.src);if(typeof type!=="undefined"&&type!==null){this.setMedium(type)}}else{throw new Error("No valid source could be found")}return value};FlashPlayer.prototype.getSource=function(value){return this.mediaProxy.getData().source};FlashPlayer.prototype.getSeeking=function(){return this.seeking};FlashPlayer.prototype.getPaused=function(){return this.paused};FlashPlayer.prototype.getEnded=function(){return this.ended};FlashPlayer.prototype.getFlashXML=function(){var doc,xml;xml=unescape(this.flashvars.settings_xml);doc=XMLUtils.parse(xml);doc.toString=function(){return xml};return doc};FlashPlayer.prototype.getFlashVars=function(){return this.flashvars};FlashPlayer.prototype.evaluateBinding=function(str){return this.mediaElement.evaluateBinding(str)};FlashPlayer.prototype.canPlayType=function(mimeType){if(__indexOf.call(Utils.flashTypes,mimeType)>=0){return"maybe"}else{return""}};FlashPlayer.prototype.replay=function(){this.mediaElement.replay()};FlashPlayer.prototype.pause=function(){this.mediaElement.pause()};FlashPlayer.prototype.end=function(){this.mediaElement.stopPlayer()};FlashPlayer.prototype.getCurrentTime=function(value){return this.mediaElement.getCurrentTime()};FlashPlayer.prototype.setCurrentTime=function(value){this.mediaElement.jumpToTime(value);return value};FlashPlayer.prototype.getParams=function(){return this.mediaElement.getParams()};FlashPlayer.prototype.setParams=function(value){this.mediaElement.setParams(value);return value};FlashPlayer.prototype.getVolume=function(){return this.mediaElement.getVolume()};FlashPlayer.prototype.setVolume=function(value,scope){this.mediaElement.setVolume(value,scope||"");return value};FlashPlayer.prototype.getDuration=function(){return this.mediaElement.getDuration()};FlashPlayer.prototype.getDisplayState=function(value){return this.displayState};FlashPlayer.prototype.setDisplayState=function(value){var _ref;if(value===this.displayState){return}this.applyDisplayState(value);if(((_ref=this.config.fullscreen)!=null?_ref.mode:void 0)===FullscreenMode.EXTERNAL){return}if(this.displayState===DisplayState.FULL_SCREEN){this.mediaElement.enterFullScreen()}else{this.mediaElement.exitFullScreen()}return value};FlashPlayer.prototype.applyDisplayState=function(value){var states;if(value===this.displayState){return}states={newState:value,oldState:this.displayState};this.displayState=value;this.sendNotification(Notifications.DISPLAY_STATE_CHANGE,states);this.sendNotification(Notifications.DISPATCH_EVENT,new Event("fullscreenchange",this.displayState===DisplayState.FULL_SCREEN))};FlashPlayer.prototype.enterFullScreen=function(){this.setDisplayState(DisplayState.FULL_SCREEN)};FlashPlayer.prototype.exitFullScreen=function(){this.setDisplayState(DisplayState.NORMAL)};FlashPlayer.prototype.recordContentChange=function(content){this.mediaElement.recordContentChange(content)};function ModuleAdapter(module){this.module=module;ModuleAdapter.__super__.constructor.call(this,module.getModuleName(),this)}__extends(ModuleAdapter,puremvc.Mediator);ModuleAdapter.prototype.module=null;ModuleAdapter.prototype.mediator=null;ModuleAdapter.prototype.initializeNotifier=function(key){var publications,_this=this;ModuleAdapter.__super__.initializeNotifier.call(this,key);publications=this.module.listNotificationPublications();if(publications!=null){this.mediator=new puremvc.Mediator(this.facade.getModuleName());this.mediator.listNotificationInterests=function(){return publications};this.mediator.handleNotification=function(notification){_this.facade.sendNotification(notification.getName(),notification.getBody(),notification.getType())}}};ModuleAdapter.prototype.onRegister=function(){if(this.mediator!=null){this.module.registerMediator(this.mediator)}};ModuleAdapter.prototype.onRemove=function(){if(this.mediator!=null){this.module.removeMeditator(this.mediator)}};ModuleAdapter.prototype.listNotificationInterests=function(){return this.module.listNotificationInterests()};ModuleAdapter.prototype.handleNotification=function(notification){this.module.sendNotification(notification.getName(),notification.getBody(),notification.getType())};var Notifications={STARTUP:"startup",LOAD:"load",PAUSE_REQUEST:"pauserequest",TOGGLE_PLAY_PAUSE:"togglePlayPause",CHANGE_PLAY_STATE:"chageplaystate",PLAY_STATE_CHANGE:"playstatechange",TOGGLE_FULL_SCREEN:"toggleFullScreen",CHANGE_DISPLAY_STATE:"chageDisplayState",DISPLAY_STATE_CHANGE:"displayStateChange",FULL_SCREEN_CHANGE:"fullscreenchange",DISABLE_FULL_SCREEN:"disableFullScreen",ENABLE_FULL_SCREEN:"enableFullScreen",LANGUAGE_CHANGE:"languagechange",TOGGLE_ACTIVE:"toggleActive",CHANGE_ACTIVE_STATE:"changeactivestate",ACTIVE_STATE_CHANGE:"activestatechange",CHANGE_MEDIA:"changeMedia",SET_MEDIA:"setmedia",MEDIA_VALIDATED:"mediavalidated",UPDATE_DATA_BINDINGS:"updatedatabindings",CHANGE_VOLUME:"changevolume",CHANGE_MUTED:"changemuted",TOGGLE_MUTED:"togglemuted",SEEK:"seek",CHANGE_DURATION:"changeduration",CHANGE_AUTOPLAY:"changeAutoplay",CHANGE_LOOP:"changeLoop",PLAYBACK_CORE_CHANGE:"playbackCoreChange",START:"start",END:"end",REPLAY:"replay",LOAD_FEED:"loadFeed",REGISTER_PLUGIN:"registerPlugin",REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",ADD_LAYER:"addLayer",REMOVE_LAYER:"removeLayer",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",ADD_CONTROL:"addControl",REMOVE_CONTROL:"removeControl",ADD_CONTROL_STATE:"addControlState",REMOVE_CONTROL_STATE:"removeControlState",ADD_APPLICATION_STATE:"addApplicationState",REMOVE_APPLICATION_STATE:"removeApplicationState",DISPATCH_EVENT:"dispatchEvent",CHANGE_PARAMS:"changeParams",ADD_CUE_POINTS:"addCuePoints",REMOVE_CUE_POINTS:"removeCuePoints",INITIALIZED:"initialized",REGISTER_PLAYBACK_CORE:"registerPlaybackCore",REMOVE_PLAYBACK_CORE:"removePlaybackCore",DISPLAY_TIME:"displaytime",IS_USER_ACTIVE:"isUserActive",LOADED_METADATA:"loadedmetadata",READY:"ready",ERROR:"error",ENDED:"ended",STARTED:"started",DURATION_CHANGE:"durationchange",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",LOADED_DATA:"loadeddata",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",PROGRESS:"progress",MEDIA_CHANGE:"mediachange",WAITING:"waiting",PLAY:"play",PLAYING:"playing",PAUSE:"pause",PAUSED:"paused",PLAY_REQUEST:"playrequest",MEDIUM_CHANGE:"mediumchange",TEMPORAL_TYPE_CHANGE:"temporaltypechange",VOLUME_CHANGE:"volumechange",FAIL_OVER_ATTEMPT:"failoverattempt",PLAYBACK_TARGET_CHANGE:"playbacktargetchange",PLAYBACK_TARGET_AVAILABLE:"playbacktargetavailable",RECORD_CONTENT_CHANGE:"recordcontentchange",CHANGE_CONTENT:"changecontent",CONTENT_CHANGED:"contentchanged"};function QueryString(){}QueryString.construct=function(){var key,value,vars;vars=this.deserialize(window.location.search);for(key in vars){value=vars[key];QueryString[key]=value}return true};QueryString.serialize=function(obj,prefix){var k,p,str,v;str=[];for(p in obj){v=obj[p];if(!(v!=null)){continue}k=(prefix?prefix+"["+p+"]":p);str.push((typeof v==="object"?this.serialize(v,k):encodeURIComponent(k)+"="+encodeURIComponent(v)))}return str.join("&")};QueryString.deserialize=function(uri){var results;if(uri!=null){results={};uri=uri.replace(/^[^?]*\?/,"");uri.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function($0,$1,$2,$3){results[decodeURIComponent($1)]=decodeURIComponent($3)})}return results};QueryString.constructed=QueryString.construct();var PluginNotifications={REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",PLUGINS_INITIALIZED:"pluginsinitialized"};var PlayState={READY:"ready",PLAYING:"playing",PAUSED:"paused",ENDED:"ended",LOADING:"loading",WAITING:"waiting",SEEKING:"seeking",ERROR:"error"};function DataBindingContext(){DataBindingContext.__super__.constructor.call(this);if(this.contextName==null){this.contextName=this.constructor.NAME}}__extends(DataBindingContext,puremvc.Proxy);DataBindingContext.prototype.contextName=null;DataBindingContext.prototype.contextData=null;DataBindingContext.prototype.getContextName=function(){return this.contextName};DataBindingContext.prototype.getContextData=function(){return this.contextData};function PlayRequestCommand(){PlayRequestCommand.__super__.constructor.call(this)}__extends(PlayRequestCommand,puremvc.SimpleCommand);PlayRequestCommand.prototype.execute=function(notification){this.sendNotification(Notifications.PLAY_REQUEST)};function ExternalPlaybackProxy(){ExternalPlaybackProxy.__super__.constructor.call(this)}__extends(ExternalPlaybackProxy,puremvc.Proxy);ExternalPlaybackProxy.NAME="PlaybackProxy";ExternalPlaybackProxy.prototype.src=null;ExternalPlaybackProxy.prototype.canPlayType=function(mimeType){return mimeType==="external"};ExternalPlaybackProxy.prototype.getSrc=function(){return this.src};ExternalPlaybackProxy.prototype.setSrc=function(value){if(!(value!=null)||value===""){this.sendNotification(Notifications.ERROR,"The value of src is not supported: "+value)}if(value!==this.src){this.src=value}return value};ExternalPlaybackProxy.prototype.play=function(){window.open(this.getSrc(),"_blank")};ExternalPlaybackProxy.prototype.load=function(){};ExternalPlaybackProxy.prototype.setVolume=function(){};ExternalPlaybackProxy.prototype.pause=function(){};ExternalPlaybackProxy.prototype.setEnabled=function(){};ExternalPlaybackProxy.prototype.getCurrentTime=function(){return 0};ExternalPlaybackProxy.prototype.setCurrentTime=function(value){};ExternalPlaybackProxy.prototype.getDuration=function(){return 0};var UserNotifications={TOGGLE_PLAY_PAUSE:"usertogglePlayPause",PLAY:"userplay",PAUSE:"userpause",SEEK:"userseek"};function ITokenized(){}ITokenized.prototype.data=null;ITokenized.prototype.value=null;ITokenized.prototype.source=null;ITokenized.prototype.parse=function(data){};ITokenized.prototype.compile=function(context,suppressErrors){if(context==null){context={}}if(suppressErrors==null){suppressErrors=false}};var Namespace={PREFIX:"akamai-"};var SecurityNotifications={CHECK_AUTHORIZATION:"checkAuthorization",AUTHORIZATION_FAILED:"authorizationfailed",AUTHORIZE:"authorize",AUTHORIZED:"authorized",SET_TOKEN:"settoken",SET_KEY:"setkey"};function SecurityProxy(){SecurityProxy.__super__.constructor.call(this,this.constructor.NAME,{});this.setupHDN1()}__extends(SecurityProxy,puremvc.Proxy);SecurityProxy.NAME="SecurityProxy";SecurityProxy.prototype.setupHDN1=function(){var _this=this;return window.retrieveToken=function(guid,url){var token;_this.facade.logger.debug("[AMP AUTH] HDN1: Token Requested",guid,url);token=_this.getToken();if(token!=null){_this.facade.video.tokenRetrievalSuccess("&primaryToken="+token)}else{_this.sendNotification(SecurityNotifications.AUTHORIZE)}return true}};SecurityProxy.prototype.getKey=function(){return this.data.key};SecurityProxy.prototype.setKey=function(value){this.data.key=value;return value};SecurityProxy.prototype.getToken=function(){return this.data.token};SecurityProxy.prototype.setToken=function(value){this.data.token=value;return value};SecurityProxy.prototype.getSecret=function(){var secret;if(!(this.data.token!=null)){return null}secret="";if(this.data.key!=null){secret+=this.data.key}secret+=this.data.token;return secret};SecurityProxy.prototype.createURL=function(url){var secret;secret=this.getSecret();if(secret!=null){url+=!/\?/.test(url)?"?":"&";url+=secret}return url};SecurityProxy.prototype.getAuthorized=function(){return this.data.authorized};SecurityProxy.prototype.setAuthorized=function(value){this.data.authorized=value;return value};SecurityProxy.prototype.getProvider=function(){return this.data.provider};SecurityProxy.prototype.setProvider=function(value){this.data.provider=value;return value};function ChangePlayStateCommand(){ChangePlayStateCommand.__super__.constructor.call(this)}__extends(ChangePlayStateCommand,puremvc.SimpleCommand);ChangePlayStateCommand.prototype.execute=function(notification){var app,state;app=this.facade.retrieveProxy(ApplicationStateProxy.NAME);state=notification.getBody();app.setPlayState(state)};function MediaChangeCommand(){MediaChangeCommand.__super__.constructor.call(this)}__extends(MediaChangeCommand,puremvc.SimpleCommand);MediaChangeCommand.prototype.execute=function(notification){var media,playbackProxy,player;media=notification.getBody();player=this.facade.retrieveProxy(PlayerProxy.NAME);player.setPlaybackType(media.type);playbackProxy=this.facade.retrieveProxy(PlaybackProxy.NAME);playbackProxy.setSrc(media.src);playbackProxy.setCurrentTime(media.startTime||0)};function ChangeDurationCommand(){ChangeDurationCommand.__super__.constructor.call(this)}__extends(ChangeDurationCommand,puremvc.SimpleCommand);ChangeDurationCommand.prototype.execute=function(notification){var duration,mediaProxy;duration=notification.getBody();mediaProxy=this.facade.retrieveProxy(MediaProxy.NAME);if(mediaProxy.getDuration()===duration){return}mediaProxy.setDuration(duration)};function ErrorCommand(){ErrorCommand.__super__.constructor.call(this)}__extends(ErrorCommand,puremvc.SimpleCommand);ErrorCommand.prototype.execute=function(notification){var core,playbackProxy;playbackProxy=this.facade.retrieveProxy(PlaybackProxy.NAME);core=playbackProxy.getMediaElement();EventHandler.clear(core);this.facade.logger.error("[AMP ERROR]",notification.getBody());this.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.ERROR)};function ReadyCommand(){ReadyCommand.__super__.constructor.call(this)}__extends(ReadyCommand,puremvc.SimpleCommand);ReadyCommand.prototype.execute=function(notification){var volume,_ref;volume=(_ref=this.facade.config)!=null?_ref.volume:void 0;if(volume!=null){this.sendNotification(Notifications.CHANGE_VOLUME,volume)}this.sendNotification(Notifications.CHANGE_DISPLAY_STATE,DisplayState.NORMAL);this.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.READY);this.sendNotification(Notifications.CHANGE_ACTIVE_STATE,ActiveState.ACTIVE)};function UpdateDataBindingsCommand(){UpdateDataBindingsCommand.__super__.constructor.call(this)}__extends(UpdateDataBindingsCommand,puremvc.SimpleCommand);UpdateDataBindingsCommand.prototype.execute=function(notification){var bindings,body;body=notification.getBody()||{};bindings=this.facade.retrieveProxy(DataBindingProxy.NAME);bindings.compile(body.contexts,body.suppressErrors)};function ChangeParamsCommand(){ChangeParamsCommand.__super__.constructor.call(this)}__extends(ChangeParamsCommand,puremvc.SimpleCommand);ChangeParamsCommand.prototype.execute=function(notification){var params,proxy;params=notification.getBody();proxy=this.facade.retrieveProxy(ParamsProxy.NAME);proxy.setData(params);this.sendNotification(Notifications.UPDATE_DATA_BINDINGS,{suppressErrors:true})};function SetMediaCommand(){SetMediaCommand.__super__.constructor.call(this)}__extends(SetMediaCommand,puremvc.SimpleCommand);SetMediaCommand.prototype.execute=function(notification){var media,mediaProxy;media=notification.getBody();this.sendNotification(Notifications.CHANGE_MEDIA,media);mediaProxy=this.facade.retrieveProxy(MediaProxy.NAME);media=mediaProxy.getData();if(mediaProxy.authorized===true){this.sendNotification(Notifications.MEDIA_VALIDATED,media)}};function ChangeMediaCommand(){ChangeMediaCommand.__super__.constructor.call(this)}__extends(ChangeMediaCommand,puremvc.SimpleCommand);ChangeMediaCommand.prototype.execute=function(notification){var media,mediaProxy,playbackProxy;media=notification.getBody();mediaProxy=this.facade.retrieveProxy(MediaProxy.NAME);playbackProxy=this.facade.retrieveProxy(PlaybackProxy.NAME);playbackProxy.setEnabled(false);playbackProxy.pause();this.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.READY);this.sendNotification(Notifications.CHANGE_ACTIVE_STATE,ActiveState.ACTIVE);try{mediaProxy.setData(media)}catch(error){this.sendNotification(Notifications.ERROR,error.message)}this.sendNotification(Notifications.UPDATE_DATA_BINDINGS);this.sendNotification(SecurityNotifications.AUTHORIZE)};function OverlayLayerMediator(){OverlayLayerMediator.__super__.constructor.call(this)}__extends(OverlayLayerMediator,LayerMediator);OverlayLayerMediator.prototype.componentName="overlays";OverlayLayerMediator.NAME="OverlayLayerMediator";OverlayLayerMediator.prototype.createMediatorName=function(){return OverlayLayerMediator.NAME};OverlayLayerMediator.prototype.listNotificationInterests=function(){return[Notifications.ADD_OVERLAY,Notifications.REMOVE_OVERLAY]};OverlayLayerMediator.prototype.handleNotification=function(notification){var name,overlay;name=notification.getName();overlay=notification.getBody();switch(name){case Notifications.ADD_OVERLAY:this.viewComponent.appendChild(overlay);break;case Notifications.REMOVE_OVERLAY:this.viewComponent.removeChild(overlay)}};function PosterMediator(){PosterMediator.__super__.constructor.call(this)}__extends(PosterMediator,LayerMediator);PosterMediator.prototype.componentName="poster";PosterMediator.prototype.poster=null;PosterMediator.prototype.clickHandler=null;PosterMediator.prototype.onRegister=function(){this.poster=this.create("poster-content");this.poster.onclick=this.onclick.bind(this);PosterMediator.__super__.onRegister.call(this)};PosterMediator.prototype.onclick=function(event){event.stopImmediatePropagation();event.preventDefault();this.sendNotification(UserNotifications.TOGGLE_PLAY_PAUSE,true);return false};PosterMediator.prototype.listNotificationInterests=function(){return[Notifications.CHANGE_MEDIA]};PosterMediator.prototype.handleNotification=function(notification){var html,src;switch(notification.getName()){case Notifications.CHANGE_MEDIA:src=notification.getBody().poster;html=(src!=null)&&src!==""?'<img src="'+src+'" class="'+this.cssPrefix+'poster-image" />':"";this.poster.innerHTML=html}};function ErrorLayerMediator(){ErrorLayerMediator.__super__.constructor.call(this)}__extends(ErrorLayerMediator,LayerMediator);ErrorLayerMediator.prototype.message=null;ErrorLayerMediator.prototype.componentName="error";ErrorLayerMediator.prototype.onRegister=function(){ErrorLayerMediator.__super__.onRegister.call(this);this.message=this.create("error-message")};ErrorLayerMediator.prototype.listNotificationInterests=function(){return[Notifications.ERROR]};ErrorLayerMediator.prototype.handleNotification=function(notification){var error,msg;switch(notification.getName()){case Notifications.ERROR:error=notification.getBody();msg="Error: ";switch(error.code){case MediaError.MEDIA_ERR_ABORTED:msg+="Media was aborted.";break;case MediaError.MEDIA_ERR_DECODE:msg+="Decode Error.";break;case MediaError.MEDIA_ERR_NETWORK:msg+="Network Error.";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:msg+="Source not supported.";break;default:msg+=error}this.message.textContent=msg}};function TitleBarMediator(){TitleBarMediator.__super__.constructor.call(this)}__extends(TitleBarMediator,OverlayMediator);TitleBarMediator.prototype.componentName="title-bar";TitleBarMediator.prototype.title=null;TitleBarMediator.prototype.description=null;TitleBarMediator.prototype.onRegister=function(){this.title=this.create("title-text");this.description=this.create("description-text");TitleBarMediator.__super__.onRegister.call(this)};TitleBarMediator.prototype.listNotificationInterests=function(){return[Notifications.CHANGE_MEDIA]};TitleBarMediator.prototype.handleNotification=function(notification){var metadata,title;switch(notification.getName()){case Notifications.CHANGE_MEDIA:metadata=notification.getBody();title=metadata.title;if(!(title!=null)||title===""||title==="undefined"){this.classList.add("hidden")}else{this.title.innerHTML=title;this.description.innerHTML=metadata.description?metadata.description:"";this.classList.remove("hidden")}}};function Plugin(){Plugin.__super__.constructor.call(this)}__extends(Plugin,Module);Plugin.prototype.player=null;Plugin.prototype.proxy=null;Plugin.prototype.initialize=function(config,player){this.player=player;this.logger=this.player.logger;Plugin.__super__.initialize.call(this,config)};Plugin.prototype.resourcesLoaded=function(){if(typeof this.oninitialized==="function"){this.oninitialized(this)}};Plugin.prototype.onRegister=function(){var _ref;this.createFramework();if((_ref=this.retrieveProxy(PluginProxy.NAME))!=null){if(typeof _ref.initialize==="function"){_ref.initialize()}}this.sendNotification(PluginNotifications.PLUGIN_REGISTERED,this)};Plugin.prototype.createNotificationEvent=function(notificationName,body,type){var event,feature;event=Plugin.__super__.createNotificationEvent.call(this,notificationName,body,type);if(!(event!=null)){return}type=event.type.replace(new RegExp("^"+(this.getModuleName())),"");feature=typeof this.getFeatureName==="function"?this.getFeatureName():void 0;if(feature!=null){type=type.replace(new RegExp("^"+feature),"")}event.type=type;return event};Plugin.prototype.logNotificationEvent=function(event){if(/(timeremaining)/.test(event.type)===true){return null}this.logger.log("["+(this.player.getModuleName().toUpperCase())+" "+(this.getModuleName().toUpperCase())+" EVENT]",event.type,event)};Plugin.prototype.listNotificationPublications=function(){var key,notes,value;notes=[Notifications.ADD_LAYER,Notifications.REMOVE_LAYER,Notifications.ADD_OVERLAY,Notifications.REMOVE_OVERLAY,Notifications.ADD_APPLICATION_STATE,Notifications.REMOVE_APPLICATION_STATE,Notifications.IS_USER_ACTIVE];return notes.concat((function(){var _results;_results=[];for(key in PluginNotifications){value=PluginNotifications[key];_results.push(value)}return _results})())};function PluginAdapter(){this.plugins=[];this.registered=[];PluginAdapter.__super__.constructor.call(this,this.constructor.NAME,{})}__extends(PluginAdapter,puremvc.Mediator);PluginAdapter.NAME="PluginAdapter";PluginAdapter.prototype.plugins=null;PluginAdapter.prototype.registered=null;PluginAdapter.prototype.onRegister=function(){return PluginAdapter.__super__.onRegister.call(this)};PluginAdapter.prototype.listNotificationInterests=function(){return[PluginNotifications.REGISTER_PLUGINS,PluginNotifications.PLUGIN_REGISTERED]};PluginAdapter.prototype.handleNotification=function(notification){var body,config,def,feature,init,key,name,onplugininitialized,plugin,type,value,_ref;name=notification.getName();body=notification.getBody();switch(name){case PluginNotifications.REGISTER_PLUGINS:type=this.facade.getPlayerType();config=body;onplugininitialized=this.onplugininitialized.bind(this);_ref=AMP.plugins;for(key in _ref){value=_ref[key];if(!(key in config)){continue}init=config[key];if(!(init!=null)||init.enabled===false){continue}def=value[type];if(!(def!=null)){this.facade.logger.debug("Plugin could not be found: "+key);continue}try{plugin=new def();plugin.oninitialized=onplugininitialized;this.plugins.push(plugin.initialize.bind(plugin,init,this.facade))}catch(error){this.logger.error("Plugin could not be created: "+key+". "+error);continue}}this.plugins.forEach(function(item){return item()});break;case PluginNotifications.PLUGIN_REGISTERED:this.registered.push(body);name=typeof body.getModuleName==="function"?body.getModuleName():void 0;if(name!=null){this.facade[name]=body}feature=typeof body.getFeatureName==="function"?body.getFeatureName():void 0;if(feature!=null){this.facade[feature]=body}this.facade.logger.debug("[AMP]","registered:",body.getModuleName(),"plugin");if(this.registered.length===this.plugins.length){this.sendNotification(PluginNotifications.PLUGINS_INITIALIZED,this.plugins)}}};PluginAdapter.prototype.onplugininitialized=function(plugin){this.facade.registerModule(plugin)};function ClassList(element){this.element=element}ClassList.prototype.element=null;ClassList.prototype.prefix=Namespace.PREFIX;ClassList.prototype.contains=function(className){return this.constructor.contains(className,this.element,this.prefix)};ClassList.prototype.add=function(className){this.constructor.add(className,this.element,this.prefix)};ClassList.prototype.remove=function(className){this.constructor.remove(className,this.element,this.prefix)};ClassList.prototype.toggle=function(className){return this.constructor.contains(className,this.element,this.prefix)};ClassList.contains=function(className,element,prefix){var css,_ref;if(prefix==null){prefix=""}css=prefix+className;if(((_ref=element.classList)!=null?_ref.contains:void 0)!=null){return element.classList.contains(css)}else{return element.className.indexOf(css)!==-1}};ClassList.add=function(className,element,prefix){var css,_ref;if(prefix==null){prefix=""}css=prefix+className;if(((_ref=element.classList)!=null?_ref.add:void 0)!=null){element.classList.add(css)}else{if(!this.contains(className,element)){if(element.className!==""){element.className+=" "+css}else{element.className=css}}}};ClassList.remove=function(className,element,prefix){var css,regexp,_ref;if(prefix==null){prefix=""}css=prefix+className;if(((_ref=element.classList)!=null?_ref.remove:void 0)!=null){element.classList.remove(css)}else{if(this.contains(className,element)){regexp=new RegExp(" ?"+css);element.className=element.className.replace(regexp,"")}}};ClassList.toggle=function(className,element,prefix){var css,_ref;if(prefix==null){prefix=""}css=prefix+className;if(((_ref=element.classList)!=null?_ref.toggle:void 0)!=null){element.classList.toggle(this.prefix+className)}else{if(this.contains(className,element)){this.remome(className,element)}else{this.add(className,element)}}};function DataBindingProxy(){DataBindingProxy.__super__.constructor.call(this,this.constructor.NAME,{});this.data={};this.contextMap={};this.configurationMap={}}__extends(DataBindingProxy,puremvc.Proxy);DataBindingProxy.NAME="DataBindingProxy";DataBindingProxy.prototype.contextMap=null;DataBindingProxy.prototype.configurationMap=null;DataBindingProxy.prototype.paramsProxy=null;DataBindingProxy.prototype.initialize=function(){this.paramsProxy=this.facade.retrieveProxy(ParamsProxy.NAME);this.registerContext(this.facade.retrieveProxy(MediaProxy.NAME));this.registerContext(this.facade.retrieveProxy(LocalizationProxy.NAME));this.registerContext(this.facade.retrieveProxy(PlayerProxy.NAME));this.update()};DataBindingProxy.prototype.registerContext=function(context){if(!(context!=null)){return}this.contextMap[context.getContextName()]=context};DataBindingProxy.prototype.retrieveContext=function(name){return this.contextMap[name]};DataBindingProxy.prototype.removeContext=function(name){var context;context=this.contextMap[name];delete this.contextMap[name];return context};DataBindingProxy.prototype.registerConfiguration=function(config){if(!(config!=null)){return}this.configurationMap[config.getConfigurationName()]=config;config.compile(this.context,true)};DataBindingProxy.prototype.retrieveConfiguration=function(name){return this.configurationMap[name]};DataBindingProxy.prototype.removeConfiguration=function(name){var config;config=this.configurationMap[name];delete this.configurationMap[name];return config};DataBindingProxy.prototype.evaluateBinding=function(str){var tokenizedObject;tokenizedObject=new TokenizedValue(str);tokenizedObject.compile(this.data);return tokenizedObject.value};DataBindingProxy.prototype.update=function(contexts){var context,key,name,value,_ref,_ref1;this.data.now=Date.now();_ref=this.contextMap;for(name in _ref){context=_ref[name];if((contexts!=null?typeof contexts.indexOf==="function"?contexts.indexOf(name):void 0:void 0)===-1){continue}this.data[name]=context.getContextData()}this.paramsProxy.compile(this.data);_ref1=this.paramsProxy.value;for(key in _ref1){value=_ref1[key];this.data[key]=value}return this.data};DataBindingProxy.prototype.compile=function(contexts,suppressErrors){var config,context,name,paramsName,_ref;if(suppressErrors==null){suppressErrors=false}this.update(contexts);context=Utils.clone(this.data);paramsName=this.paramsProxy.getConfigurationName();_ref=this.configurationMap;for(name in _ref){config=_ref[name];if(name!==paramsName){config.compile(context,suppressErrors)}}};function UI(){}UI.create=function(type,parent,element,text){var classList,item,viewComponent,_i,_len;if(element==null){element="div"}if(typeof element==="string"){element=document.createElement(element)}classList=new ClassList(element);if(type!=null){if(typeof type==="string"){type=[type]}for(_i=0,_len=type.length;_i<_len;_i++){item=type[_i];classList.add(item)}}element._classList=classList;if(text!=null){if(element.innerText!=null){element.innerText=text}else{element.textContent=text}}if(parent!=null){if(parent.getViewComponent!=null){viewComponent=parent.getViewComponent()}if(viewComponent!=null){parent=viewComponent}parent.appendChild(element)}return element};UI.bindEvents=function(element,handlers,exceptions){var key,value;if(exceptions==null){exceptions=["onRemove","onRegister"]}for(key in handlers){value=handlers[key];if(!(__indexOf.call(exceptions,key)>=0)&&/^on/.test(key)&&((value!=null?value.bind:void 0)!=null)){element[key]=value.bind(handlers)}}};UI.createUID=function(base){var date,len,max,rand;if(base==null){base=16}date=Date.now();len=2;max=base*len-1;rand=Math.round(Math.random()*max+base);return(rand.toString(16)+date.toString(16)).toUpperCase()};function TokenizedBase(source){if(source!=null){this.parse(source)}}__extends(TokenizedBase,ITokenized);TokenizedBase.prototype.data=null;TokenizedBase.prototype.value=null;TokenizedBase.prototype.source=null;TokenizedBase.prototype.parse=function(source){var value;if(source instanceof Array){value=new TokenizedArray(source)}else{if(source instanceof Object){value=new TokenizedObject(source)}else{value=new TokenizedValue(source)}}return value};function TokenizedArray(data){TokenizedArray.__super__.constructor.call(this,data)}__extends(TokenizedArray,TokenizedBase);TokenizedArray.prototype.parse=function(data){var index,token,_i,_len;this.data=[];for(index=_i=0,_len=data.length;_i<_len;index=++_i){token=data[index];this.data[index]=TokenizedArray.__super__.parse.call(this,token)}return this.data};TokenizedArray.prototype.compile=function(context,suppressErrors){var index,token,_i,_len,_ref;if(context==null){context={}}if(suppressErrors==null){suppressErrors=false}this.value=[];_ref=this.data;for(index=_i=0,_len=_ref.length;_i<_len;index=++_i){token=_ref[index];try{this.value[index]=token.compile(context,suppressErrors)}catch(error){this.value[index]=null;if(!suppressErrors){Logger.error(error)}}}return this.value};function TokenizationError(msg){this.message=TokenizationError.MESSAGE+msg}__extends(TokenizationError,Error);TokenizationError.MESSAGE="Tokenization Error: Could not find token value for: ";function Literal(source){Literal.__super__.constructor.call(this,source)}__extends(Literal,TokenizedBase);Literal.prototype.parse=function(data){this.source=this.data=this.value=data;return data};Literal.prototype.compile=function(context,suppressErrors){if(context==null){context=null}if(suppressErrors==null){suppressErrors=false}return this.value};function Token(source){Token.__super__.constructor.call(this,source)}__extends(Token,TokenizedBase);Token.prototype.exec=null;Token.prototype.parse=function(source){this.source=this.data=source;this.exec=new Function("context","var value; with(context){value = "+this.data+";}return value;");return this.data};Token.prototype.compile=function(context,suppressErrors){if(context==null){context={}}if(suppressErrors==null){suppressErrors=false}if(!(this.exec!=null)){return this.value}try{this.value=this.exec(context)}catch(error){this.value=null;if(!suppressErrors){throw new TokenizationError(this.data)}}return this.value};function TokenizedValue(source){this.token=new RegExp(this.tokenStart.source+"([^#]*)"+this.tokenEnd.source,"g");TokenizedValue.__super__.constructor.call(this,source)}__extends(TokenizedValue,TokenizedBase);TokenizedValue.prototype.exec=null;TokenizedValue.prototype.tokenStart=/#{/;TokenizedValue.prototype.tokenEnd=/}/;TokenizedValue.prototype.token=null;TokenizedValue.prototype.parse=function(source){var piece,pieces,placeholder,spacer,temp,token,tokens,_i,_len;this.source=source;this.data=[];if(this.token.test(this.source)){tokens=[];placeholder="<<>>";spacer=null;temp=this.source.replace(this.token,function(match,token,offset,string){tokens.push(token);spacer=placeholder;if((0<offset&&offset<string.length-match.length)){spacer+=placeholder}return spacer});pieces=temp.split(placeholder);token=0;for(_i=0,_len=pieces.length;_i<_len;_i++){piece=pieces[_i];if(piece===""&&tokens[token]){this.data.push(new Token(tokens[token]));token++}else{if(piece!==""){this.data.push(new Literal(piece))}}}if(this.data.length===1){this.data=this.data[0]}}else{this.data=new Literal(source)}return this.data};TokenizedValue.prototype.compile=function(context,suppressErrors){var token,_i,_len,_ref;if(context==null){context={}}if(suppressErrors==null){suppressErrors=false}if(!(this.data!=null)){return this.value}try{if(this.data instanceof ITokenized){this.value=this.data.compile(context,suppressErrors)}else{this.value="";_ref=this.data;for(_i=0,_len=_ref.length;_i<_len;_i++){token=_ref[_i];this.value+=token.compile(context,suppressErrors)}}}catch(error){this.value=null;if(!suppressErrors){throw new TokenizationError(this.source)}}return this.value};function TokenizedObject(source){TokenizedObject.__super__.constructor.call(this,source)}__extends(TokenizedObject,TokenizedBase);TokenizedObject.prototype.parse=function(source){var key,token;this.source=source;this.data={};for(key in source){token=source[key];this.data[key]=TokenizedObject.__super__.parse.call(this,token)}return this.data};TokenizedObject.prototype.compile=function(context,suppressErrors){var key,value,_ref;if(context==null){context={}}if(suppressErrors==null){suppressErrors=false}this.value={};_ref=this.data;for(key in _ref){value=_ref[key];try{this.value[key]=value.compile(context,suppressErrors)}catch(error){this.value[key]=null;Logger.error(error)}}return this.value};function LocalizationProxy(init){var key,lang;LocalizationProxy.__super__.constructor.call(this);if(init!=null){if(init.language!=null){this.data.language=init.language}if(init.locales!=null){for(lang in init.locales){if(this.data.locales[lang]!=null){for(key in init.locales[lang]){this.data.locales[lang][key]=init.locales[lang][key]}}else{this.data.locales[lang]=init.locales[lang]}}}}}__extends(LocalizationProxy,DataBindingContext);LocalizationProxy.NAME="LocalizationProxy";LocalizationProxy.prototype.contextName="l10n";LocalizationProxy.prototype.data={language:navigator.language||navigator.browserLanguage,locales:{en:{MSG_TIME_SEPARATOR:" / ",MSG_LIVE:"LIVE",MSG_REPLAY:"Replay",MSG_BUFFERING:"buffering...",MSG_CC:"CC",MSG_CC_TITLE:"Captions",MSG_CC_LANGUAGE:"Track :",MSG_CC_PRESETS:"Presets :",MSG_CC_FONT:"Font :",MSG_CC_EDGE:"Edge :",MSG_CC_SIZE:"Size :",MSG_CC_SCROLL:"Scroll :",MSG_CC_COLOR:"Color :",MSG_CC_BACKGROUND:"Background :",MSG_CC_WINDOW:"Window :",MSG_CC_OPACITY:"Opacity :",MSG_CC_SHOW_ADVANCED:"Show Advanced Settings",MSG_CC_HIDE_ADVANCED:"Hide Advanced Settings",MSG_CC_RESET:"Default",MSG_CC_CANCEL:"Cancel",MSG_CC_APPLY:"Apply",MSG_NEXT_VIDEO:"Video starts in: ",MSG_NEXT_AD:"Next ad starts in: ",MSG_CLOSE:"close",MSG_EN:"English",MSG_ES:"Spanish",MSG_DE:"German",MSG_FR:"French",MSG_IT:"Italian",MSG_RU:"Russian"}}};LocalizationProxy.prototype.locale=null;LocalizationProxy.prototype.onRegister=function(){this.setLocale(this.data.language)};LocalizationProxy.prototype.getContextData=function(){return this.locale};LocalizationProxy.prototype.getLanguage=function(){return this.data.language};LocalizationProxy.prototype.setLanguage=function(value){this.data.language=value;this.setLocale(value);this.sendNotification(Notifications.LANGUAGE_CHANGE,value);return value};LocalizationProxy.prototype.setLocale=function(value){this.locale=this.data.locales[value];if(!(this.locale!=null)){this.locale=this.data.locales[value.substring(0,2)]}this.facade.l10n=this.locale;return value};LocalizationProxy.prototype.getLocales=function(){return this.data.locales};LocalizationProxy.prototype.setLocales=function(value){this.data.locales=value;return value};LocalizationProxy.prototype.getString=function(key){var locale;locale=this.locale||this.data.locales.en;return locale[key]||""};LocalizationProxy.prototype.getLanguageString=function(lang){var key,str;if(typeof lang!=="string"||!(lang!=null)||lang===""){return""}key="MSG_"+(lang.toUpperCase());str=this.getString(key);if(str===""){lang=lang.split("-").shift();key="MSG_"+(lang.toUpperCase());str=this.getString(key)}return str};function ParamsProxy(data){ParamsProxy.__super__.constructor.call(this,data)}__extends(ParamsProxy,DataBoundConfigurationProxy);ParamsProxy.NAME="ParamsProxy";ParamsProxy.prototype.defaults={};ParamsProxy.prototype.configurationName="params";ParamsProxy.prototype.setData=function(data){var key,value,_ref;this.data=((_ref=this.configurationData)!=null?_ref.source:void 0)||{};for(key in data){value=data[key];this.data[key]=data[key]}this.configurationData=new TokenizedObject(this.data);return this.data};function ExternalPlayCommand(){ExternalPlayCommand.__super__.constructor.call(this)}__extends(ExternalPlayCommand,puremvc.MacroCommand);ExternalPlayCommand.prototype.initializeMacroCommand=function(){return this.addSubCommand(PlayRequestCommand)};ExternalPlayCommand.prototype.execute=function(notification){var playbackProxy;ExternalPlayCommand.__super__.execute.call(this,notification);playbackProxy=this.facade.retrieveProxy(PlaybackProxy.NAME);playbackProxy.play()};var DisplayState={NORMAL:"normal",FULL_SCREEN:"full-screen"};var RenderMode={FLASH:"flash",HTML:"html"};var ActiveState={ACTIVE:"active",INACTIVE:"inactive"};function ApplicationStateProxy(){ApplicationStateProxy.__super__.constructor.call(this);this.device=Utils.getDevice()}__extends(ApplicationStateProxy,puremvc.Proxy);ApplicationStateProxy.NAME="ApplicationStateProxy";ApplicationStateProxy.prototype.displayState=null;ApplicationStateProxy.prototype.playState=null;ApplicationStateProxy.prototype.renderMode=null;ApplicationStateProxy.prototype.activeState=null;ApplicationStateProxy.prototype.seeking=false;ApplicationStateProxy.prototype.isUserActive=false;ApplicationStateProxy.prototype.device=null;ApplicationStateProxy.prototype.getDisplayState=function(){return this.displayState};ApplicationStateProxy.prototype.setDisplayState=function(value){var oldState;if(value===oldState){return}oldState=this.displayState;this.displayState=value;this.sendNotification(Notifications.DISPLAY_STATE_CHANGE,{oldState:oldState,newState:this.displayState})};ApplicationStateProxy.prototype.getPlayState=function(){return this.playState};ApplicationStateProxy.prototype.setPlayState=function(value){var oldState;if(value===this.playState){return}if(this.seeking===true){switch(value){case PlayState.PLAYING:case PlayState.READY:this.seeking=false;break;default:return}}oldState=this.playState;this.playState=value;this.sendNotification(Notifications.PLAY_STATE_CHANGE,{oldState:oldState,newState:this.playState})};ApplicationStateProxy.prototype.getDevice=function(){return this.device};ApplicationStateProxy.prototype.getSeeking=function(){return this.seeking};ApplicationStateProxy.prototype.setSeeking=function(value){if(value!==this.seeking){this.seeking=value}};ApplicationStateProxy.prototype.getIsUserActive=function(){return this.isUserActive};ApplicationStateProxy.prototype.setIsUserActive=function(value){if(value!==this.isUserActive){this.isUserActive=value}};ApplicationStateProxy.prototype.getRenderMode=function(){return this.renderMode};ApplicationStateProxy.prototype.setRenderMode=function(value){if(value!==this.renderMode){this.renderMode=value}};ApplicationStateProxy.prototype.getMedium=function(){return this.medium};ApplicationStateProxy.prototype.setMedium=function(value){var oldState;if(value===this.medium){return}oldState=this.medium!=null?"medium-"+this.medium:this.medium;this.medium=value;this.sendNotification(Notifications.MEDIUM_CHANGE,{oldState:oldState,newState:"medium-"+this.medium})};ApplicationStateProxy.prototype.getActiveState=function(){return this.activeState};ApplicationStateProxy.prototype.setActiveState=function(value){var oldState;if(value===this.activeState){return}oldState=this.activeState;this.activeState=value;this.sendNotification(Notifications.ACTIVE_STATE_CHANGE,{oldState:oldState,newState:this.activeState})};function ConfigurationProxy(config){ConfigurationProxy.__super__.constructor.call(this,config)}__extends(ConfigurationProxy,ModuleProxy);ConfigurationProxy.NAME=ModuleProxy.NAME;ConfigurationProxy.prototype.defaults={name:null,autoplay:false,loop:false,controls:{},fullscreen:null,target:"_blank",domain:null,endslate:null,version:null};ConfigurationProxy.prototype.setData=function(data){if(data.rules!=null){Utils.mergeRules(data.rules)}return ConfigurationProxy.__super__.setData.call(this,data)};ConfigurationProxy.prototype.getAutoplay=function(){return this.data.autoplay};ConfigurationProxy.prototype.setAutoplay=function(value){return this.data.autoplay=value};ConfigurationProxy.prototype.getLoop=function(){return this.data.loop};ConfigurationProxy.prototype.setLoop=function(value){return this.data.loop=value};ConfigurationProxy.prototype.getEndSlate=function(){return this.data.endslate};ConfigurationProxy.prototype.setEndSlate=function(value){return this.data.endslate=value};ConfigurationProxy.prototype.getDomain=function(){return this.data.domain};ConfigurationProxy.prototype.setDomain=function(value){return this.data.domain=value};ConfigurationProxy.prototype.getTarget=function(){return this.data.target};ConfigurationProxy.prototype.setTarget=function(value){return this.data.target=value};ConfigurationProxy.prototype.getName=function(){return this.data.name};ConfigurationProxy.prototype.setName=function(value){return this.data.name=value};ConfigurationProxy.prototype.getVersion=function(){return this.data.version};ConfigurationProxy.prototype.getControls=function(){return this.data.controls};ConfigurationProxy.prototype.setControls=function(value){return this.data.controls=value};ConfigurationProxy.prototype.getFullscreen=function(){return this.data.fullscreen||{}};ConfigurationProxy.prototype.setFullscreen=function(value){return this.data.fullscreen=value};function EventHandler(target,type,handler){var _ref;this.target=target;this.type=type;this.handler=handler;this.trigger=__bind(this.trigger,this);EventHandler.instances.push(this);this.types=[];if(_ref=this.type,__indexOf.call(EventHandler.EVENTS,_ref)>=0){if(Utils.isTouchDevice()){this.types.push(EventHandler.TOUCH_EVENTS[this.type]);if(this.type===EventHandler.TOUCH_EVENTS[1]){this.types.push(EventHandler.TOUCH_EVENTS[4])}}else{this.types.push(EventHandler.MOUSE_EVENTS[this.type])}}else{if(this.type instanceof Array){this.types=this.type}else{this.types.push(this.type)}}this.bind()}EventHandler.PRESS=0;EventHandler.RELEASE=1;EventHandler.MOVE=2;EventHandler.CLICK=3;EventHandler.CONTEXTMENU=4;EventHandler.EVENTS=[EventHandler.PRESS,EventHandler.RELEASE,EventHandler.MOVE,EventHandler.CLICK,EventHandler.CONTEXTMENU];EventHandler.MOUSE_EVENTS=["mousedown","mouseup","mousemove","click","contextmenu"];EventHandler.TOUCH_EVENTS=["touchstart","touchend","touchmove","click","touchcancel"];EventHandler.instances=[];EventHandler.create=function(target,type,handler){return new EventHandler(target,type,handler)};EventHandler.bind=function(target,type){var i,instance,_i,_len,_ref;_ref=EventHandler.instances;for(i=_i=0,_len=_ref.length;_i<_len;i=++_i){instance=_ref[i];if(!(instance.target===target)){continue}if((type!=null)&&instance.type!==type){continue}instance.bind()}};EventHandler.unbind=function(target,type){var i,instance,_i,_len,_ref;_ref=EventHandler.instances;for(i=_i=0,_len=_ref.length;_i<_len;i=++_i){instance=_ref[i];if(!(instance.target===target)){continue}if((type!=null)&&instance.type!==type){continue}instance.unbind()}};EventHandler.clear=function(target,type){var i,instance,_i,_len,_ref;_ref=EventHandler.instances;for(i=_i=0,_len=_ref.length;_i<_len;i=++_i){instance=_ref[i];if(!((instance!=null?instance.target:void 0)===target)){continue}if((type!=null)&&instance.type!==type){continue}instance.clear();EventHandler.instances.splice(i,1)}};EventHandler.prototype.types=null;EventHandler.prototype.bind=function(){var type,_i,_len,_ref;_ref=this.types;for(_i=0,_len=_ref.length;_i<_len;_i++){type=_ref[_i];if(this.target.addEventListener!=null){this.target.addEventListener(type,this.trigger,false)}else{if(this.target.attachEvent!=null){this.target.attachEvent("on"+type,this.trigger)}}}};EventHandler.prototype.unbind=function(){var type,_i,_len,_ref;_ref=this.types;for(_i=0,_len=_ref.length;_i<_len;_i++){type=_ref[_i];if(this.target.removeEventListener!=null){this.target.removeEventListener(type,this.trigger)}else{if(this.target.attachEvent!=null){this.target.removeEvent("on"+type,this.trigger)}}}};EventHandler.prototype.clear=function(){this.unbind();this.target=null;this.handler=null;this.type=null;this.types=null};EventHandler.prototype.trigger=function(event){this.handler(event)};function AudioPlaybackProxy(){AudioPlaybackProxy.__super__.constructor.call(this)}__extends(AudioPlaybackProxy,PlaybackCoreProxy);AudioPlaybackProxy.prototype.onRegister=function(){var mediaElement;mediaElement=new MediaElementMediator("html5","audio");this.sendNotification(Notifications.PLAYBACK_CORE_CHANGE,mediaElement)};AudioPlaybackProxy.prototype.onRemove=function(){this.facade.createMediaElement()};AudioPlaybackProxy.prototype.canPlayType=function(mimeType){if(/audio/.test(mimeType)){return"maybe"}return""};function PlayerProxy(defaultPlaybackCore){this.defaultPlaybackCore=defaultPlaybackCore;PlayerProxy.__super__.constructor.call(this);this.playbackCoreMap={};this.registerPlaybackCore(new AudioPlaybackProxy())}__extends(PlayerProxy,DataBindingContext);PlayerProxy.NAME="PlayerProxy";PlayerProxy.prototype.contextName="player";PlayerProxy.prototype.playbackCoreMap=null;PlayerProxy.prototype.defaultPlaybackCore=null;PlayerProxy.prototype.activePlaybackCore=null;PlayerProxy.prototype.getActivePlaybackCore=function(){return this.activePlaybackCore};PlayerProxy.prototype.registerPlaybackCore=function(core){if(!(core!=null)){return}this.playbackCoreMap[core.getPlaybackCoreName()]=core};PlayerProxy.prototype.retrievePlaybackCore=function(name){return this.playbackCoreMap[name]};PlayerProxy.prototype.removePlaybackCore=function(name){var core;core=this.playbackCoreMap[name];delete this.playbackCoreMap[name];return core};PlayerProxy.prototype.setPlaybackType=function(type){var core,name,playbackCore,playbackProxy,_ref;playbackCore=this.defaultPlaybackCore;_ref=this.playbackCoreMap;for(name in _ref){core=_ref[name];if(core.canPlayType(type)!==""){playbackCore=core;break}}playbackProxy=this.facade.retrieveProxy(PlaybackProxy.NAME);if(playbackProxy!==playbackCore){this.facade.removeProxy(PlaybackProxy.NAME);this.facade.registerProxy(playbackCore);playbackCore.setData(playbackProxy.getData())}this.activePlaybackCore=playbackCore;return type};PlayerProxy.prototype.canPlayType=function(type){var canPlay,core,name,_ref;_ref=this.playbackCoreMap;for(name in _ref){core=_ref[name];canPlay=core.canPlayType(type);if(canPlay!==""){return canPlay}}canPlay=this.defaultPlaybackCore.canPlayType(type);return canPlay};PlayerProxy.prototype.getContextData=function(){var configProxy,element,mediaProxy,playbackProxy;configProxy=this.facade.retrieveProxy(ConfigurationProxy.NAME);playbackProxy=this.facade.retrieveProxy(PlaybackProxy.NAME);mediaProxy=this.facade.retrieveProxy(MediaProxy.NAME);element=this.facade.getViewComponent();return{width:element.offsetWidth,height:element.offsetHeight,mode:"html5",autoplay:configProxy.getAutoplay(),domain:configProxy.getDomain(),name:configProxy.getName(),currentTime:playbackProxy.getCurrentTime(),duration:playbackProxy.getDuration(),version:configProxy.getVersion(),timecode:{duration:Utils.formatTimecode(mediaProxy.getDuration()),currentTime:Utils.formatTimecode(playbackProxy.getCurrentTime())}}};function MediaProxy(){this.data={metadata:{}};MediaProxy.__super__.constructor.call(this)}__extends(MediaProxy,DataBindingContext);MediaProxy.NAME="MediaProxy";MediaProxy.prototype.contextName="media";MediaProxy.prototype.data=null;MediaProxy.prototype.authorized=true;MediaProxy.prototype.getContextData=function(){return{width:this.getWidth(),height:this.getHeight(),title:this.getTitle(),description:this.getDescription(),src:this.getSrc(),duration:this.getDuration(),guid:this.getGUID(),isLive:this.getIsLive(),metadata:this.getMetadata(),temporalType:this.getTemporalType(),poster:this.getPoster(),category:this.getCategory()}};MediaProxy.prototype.setData=function(value){var _ref;this.data.autoplay=value.autoplay;this.data.type=value.type;if(value.source!=null){this.setSource(value.source)}if(value.src!=null){this.setSrc(value.src)}this.data.title=value.title;if(value.duration!=null){this.setDuration(value.duration)}this.data.poster=value.poster;this.data.guid=value.guid;this.data.link=value.link;this.data.embed=value.embed;this.data.width=value.width;this.data.height=value.height;this.data.category=value.category;this.data.startTime=value.startTime;this.data.description=value.description;this.data.status=value.status||{};if(((_ref=this.data.status)!=null?_ref.state:void 0)==="blocked"){this.authorized=false}this.data.category=value.category;this.data.metadata=value.metadata||{};if(value.isLive!=null){this.setIsLive(value.isLive)}if(value.temporalType!=null){this.setTemporalType(value.temporalType)}else{this.setTemporalType("vod")}if(value.medium!=null){this.setMedium(value.medium)}if(value.pubDate!=null){this.setPubDate(value.pubDate)}if(value.track!=null){this.setTrack(value.track)}return value};MediaProxy.prototype.updateData=function(data){var key,value;for(key in data){value=data[key];if(key in this.data){this.data[key]=value}}};MediaProxy.prototype.getGUID=function(){return this.data.guid};MediaProxy.prototype.setGUID=function(value){return this.data.guid=value};MediaProxy.prototype.getLink=function(){return this.data.link};MediaProxy.prototype.setLint=function(value){return this.data.link=value};MediaProxy.prototype.getStartTime=function(){return this.data.startTime||0};MediaProxy.prototype.getEmbed=function(){return this.data.embed};MediaProxy.prototype.setEmbed=function(value){return this.data.embed=value};MediaProxy.prototype.getAutoplay=function(){return this.data.autoplay};MediaProxy.prototype.setAutoplay=function(value){return this.data.autoplay=value};MediaProxy.prototype.getPubDate=function(){return this.data.pubDate};MediaProxy.prototype.setPubDate=function(value){return this.data.pubDate=value};MediaProxy.prototype.getCategory=function(){return this.data.category};MediaProxy.prototype.setCategory=function(value){return this.data.category=value};MediaProxy.prototype.getSrc=function(){return this.data.src};MediaProxy.prototype.setSrc=function(value){this.data.src=value;if((this.data.src!=null)&&!(this.data.type!=null)){return this.setType(Utils.getMimeType(this.data.src))}};MediaProxy.prototype.getType=function(){return this.data.type};MediaProxy.prototype.setType=function(value){var medium;this.data.type=value;medium=/audio/.test(this.data.type)?"audio":"video";return this.setMedium(medium)};MediaProxy.prototype.getMedium=function(){return this.data.medium};MediaProxy.prototype.setMedium=function(value){if(value===this.data.medium){return}this.data.medium=value;return this.facade.retrieveProxy(ApplicationStateProxy.NAME).setMedium(value)};MediaProxy.prototype.getMetadata=function(){return this.data.metadata};MediaProxy.prototype.setMetadata=function(value){return this.data.metadata=value};MediaProxy.prototype.getSource=function(){return this.data.source};MediaProxy.prototype.setSource=function(value){var item,playerProxy,_this=this;if(!(value!=null)||value.length<1){return}this.data.source=value;playerProxy=this.facade.retrieveProxy(PlayerProxy.NAME)||this.facade;if(playerProxy!=null){item=Utils.selectSource(value,function(type){return playerProxy.canPlayType(type)})}if(((item!=null?item.src:void 0)!=null)&&item.src!==""){this.setSrc(item.src);return this.setType(item.type)}else{throw new Error("No valid source could be found")}};MediaProxy.prototype.getTrack=function(){return this.data.track};MediaProxy.prototype.setTrack=function(value){return this.data.track=value};MediaProxy.prototype.getTitle=function(){return this.data.title};MediaProxy.prototype.setTitle=function(value){return this.data.title=value};MediaProxy.prototype.getWidth=function(){return this.data.width};MediaProxy.prototype.setWidth=function(value){return this.data.width=value};MediaProxy.prototype.getHeight=function(){return this.data.height};MediaProxy.prototype.setHeight=function(value){return this.data.height=value};MediaProxy.prototype.getDescription=function(){return this.data.description};MediaProxy.prototype.setDescription=function(value){return this.data.description=value};MediaProxy.prototype.getCategory=function(){return this.data.category};MediaProxy.prototype.setCategory=function(value){return this.data.category=value};MediaProxy.prototype.getDuration=function(value){return this.data.duration};MediaProxy.prototype.setDuration=function(value){var ua;if(value===0){return}ua=navigator.userAgent;if(value===1&&(/Android/.test(ua)&&!/Android.*Chrome/.test(ua))){return}if(value!==this.data.duration){this.data.duration=value;this.sendNotification(Notifications.DURATION_CHANGE,value)}if(value===Infinity){this.setTemporalType("live")}return value};MediaProxy.prototype.getPoster=function(value){return this.data.poster};MediaProxy.prototype.setPoster=function(value){return this.data.poster=value};MediaProxy.prototype.getIsLive=function(){return this.data.isLive};MediaProxy.prototype.setIsLive=function(value){if(value!==this.data.isLive){return this.data.isLive=value}};MediaProxy.prototype.getTemporalType=function(){return this.data.temporalType};MediaProxy.prototype.setTemporalType=function(value){if(value!==this.data.temporalType){this.data.temporalType=value;return this.sendNotification(Notifications.TEMPORAL_TYPE_CHANGE,value)}};function ExternalMediaProxy(){ExternalMediaProxy.__super__.constructor.call(this)}__extends(ExternalMediaProxy,MediaProxy);ExternalMediaProxy.NAME="MediaProxy";ExternalMediaProxy.prototype.setSource=function(value){if(!(value!=null)||value.length<1){return}value=value.filter(function(item){return item.type==="external"});return ExternalMediaProxy.__super__.setSource.call(this,value)};function ExternalPlayer(config,viewComponent,dispatcher){ExternalPlayer.__super__.constructor.call(this,config,viewComponent,dispatcher)}__extends(ExternalPlayer,Player);ExternalPlayer.prototype.playerType="external";ExternalPlayer.prototype.createModel=function(){var binding,playbackProxy;this.registerProxy(new LocalizationProxy(this.config));this.registerProxy(new ApplicationStateProxy());playbackProxy=new ExternalPlaybackProxy();this.registerProxy(new PlayerProxy(playbackProxy));binding=new DataBindingProxy();this.registerProxy(binding);this.registerProxy(new ConfigurationProxy(this.config));this.registerProxy(playbackProxy);this.registerProxy(new ExternalMediaProxy());this.registerProxy(new ParamsProxy(this.config.params));binding.initialize()};ExternalPlayer.prototype.createView=function(){var errorslate,overlay,_this=this;this.registerMediator(new PlayerMediator("external",this.getViewComponent()));this.registerMediator(new PluginAdapter());overlay=new OverlayLayerMediator();this.registerMediator(overlay);EventHandler.create(overlay.viewComponent,EventHandler.CLICK,function(){return _this.sendNotification(Notifications.TOGGLE_ACTIVE)});this.registerMediator(new PosterMediator());this.registerMediator(new TitleBarMediator());errorslate=new ErrorLayerMediator();this.viewComponent.appendChild(errorslate.getViewComponent());this.registerMediator(errorslate)};ExternalPlayer.prototype.createController=function(){this.registerCommand(Notifications.UPDATE_DATA_BINDINGS,UpdateDataBindingsCommand);this.registerCommand(UserNotifications.TOGGLE_PLAY_PAUSE,ExternalPlayCommand);this.registerCommand(Notifications.PLAY,ExternalPlayCommand);this.registerCommand(Notifications.CHANGE_PLAY_STATE,ChangePlayStateCommand);this.registerCommand(Notifications.SET_MEDIA,SetMediaCommand);this.registerCommand(Notifications.CHANGE_MEDIA,ChangeMediaCommand);this.registerCommand(Notifications.MEDIA_CHANGE,MediaChangeCommand);this.registerCommand(Notifications.MEDIA_VALIDATED,MediaValidatedCommand);this.registerCommand(Notifications.ERROR,ErrorCommand);this.registerCommand(PluginNotifications.PLUGINS_INITIALIZED,PluginsInitializedCommand);this.registerCommand(Notifications.READY,ReadyCommand);this.registerCommand(Notifications.CHANGE_PARAMS,ChangeParamsCommand)};ExternalPlayer.prototype.evaluateBinding=function(str){var _ref;return(_ref=this.retrieveProxy(DataBindingProxy.NAME))!=null?_ref.evaluateBinding(str):void 0};ExternalPlayer.prototype.canPlayType=function(mimeType){return"maybe"};ExternalPlayer.prototype.play=function(){this.sendNotification(Notifications.PLAY)};ExternalPlayer.prototype.setParams=function(value){this.sendNotification(Notifications.CHANGE_PARAMS,value);return value};ExternalPlayer.prototype.getParams=function(){return this.retrieveProxy(ParamsProxy.NAME).getData()};ExternalPlayer.prototype.setAutoplay=function(value){return false};ExternalPlayer.prototype.getAutoplay=function(){return false};ExternalPlayer.prototype.setLoop=function(value){return false};ExternalPlayer.prototype.getLoop=function(){return false};ExternalPlayer.prototype.setMuted=function(value){return false};ExternalPlayer.prototype.getMuted=function(){return false};ExternalPlayer.prototype.setMedia=function(value){this.sendNotification(Notifications.SET_MEDIA,value);return value};ExternalPlayer.prototype.getMedia=function(value){var _ref;return(_ref=this.retrieveProxy(MediaProxy.NAME))!=null?_ref.getData():void 0};ExternalPlayer.prototype.setCurrentTime=function(value){return 0};ExternalPlayer.prototype.getCurrentTime=function(value){return 0};ExternalPlayer.prototype.getDuration=function(value){return this.retrieveProxy(MediaProxy.NAME).getDuration()};ExternalPlayer.prototype.setSrc=function(value){this.sendNotification(Notifications.SET_MEDIA,{src:value});return value};ExternalPlayer.prototype.getSrc=function(value){return this.retrieveProxy(MediaProxy.NAME).getSrc()};ExternalPlayer.prototype.setSource=function(value){this.sendNotification(Notifications.SET_MEDIA,{source:value});return value};ExternalPlayer.prototype.getSource=function(){return this.retrieveProxy(MediaProxy.NAME).getSource()};ExternalPlayer.prototype.setVolume=function(value){return value};ExternalPlayer.prototype.getVolume=function(value){return 1};ExternalPlayer.prototype.getSeeking=function(){return false};ExternalPlayer.prototype.getPaused=function(){return false};ExternalPlayer.prototype.getEnded=function(){return false};function FeedVO(){this.item=[];this.metadata={}}FeedVO.prototype.title=null;FeedVO.prototype.link=null;FeedVO.prototype.description=null;FeedVO.prototype.category=null;FeedVO.prototype.pubDate=null;FeedVO.prototype.language=null;FeedVO.prototype.ttl=null;FeedVO.prototype.item=null;FeedVO.prototype.metadata=null;function MediaVO(){this.metadata={}}MediaVO.prototype.src=null;MediaVO.prototype.source=null;MediaVO.prototype.title=null;MediaVO.prototype.description=null;MediaVO.prototype.link=null;MediaVO.prototype.guid=null;MediaVO.prototype.pubDate=null;MediaVO.prototype.poster=null;MediaVO.prototype.thumbnail=null;MediaVO.prototype.embed=null;MediaVO.prototype.category=null;MediaVO.prototype.type=null;MediaVO.prototype.medium=null;MediaVO.prototype.duration=null;MediaVO.prototype.track=null;MediaVO.prototype.metadata=null;MediaVO.prototype.scenes=null;MediaVO.prototype.startTime=null;function Event(type,detail){this.type=type;if(detail!=null){this.detail=this.data=detail}}Event.prototype.type=null;Event.prototype.target=null;Event.prototype.detail=null;function MRSSHelper(){}MRSSHelper.prototype.getFeed=function(url,onload,onerror){return Utils.getJson(url,onload,onerror)};MRSSHelper.prototype.getMediaNode=function(item,name,checkItem){var base,mediaContent,mediaName,node;if(checkItem==null){checkItem=true}mediaName="media-"+name;base=item["media-group"]||item;mediaContent=base["media-content"];if((mediaContent!=null)&&(mediaContent[mediaName]!=null)){node=mediaContent[mediaName]}else{if(base[mediaName]!=null){node=base[mediaName]}else{if(item[mediaName]!=null){node=item[mediaName]}else{if((item[name]!=null)&&checkItem){node=item[name]}}}}return node};MRSSHelper.prototype.createEmbed=function(item){var embed,embedVO,param,_i,_len,_ref;try{embed=this.getMediaNode(item,"embed");if(!(embed!=null)){return embedVO}embedVO={};embedVO.url=embed["@attributes"].url;embedVO.width=embed["@attributes"].width;embedVO.height=embed["@attributes"].height;embedVO.params={};if(!(embed["media-param"] instanceof Array)){embed["media-param"]=[embed["media-param"]]}_ref=embed["media-param"];for(_i=0,_len=_ref.length;_i<_len;_i++){param=_ref[_i];embedVO.params[param["@attributes"].name]=param["#text"]}}catch(error){Logger.error("[AMP Feed Parse Error] embed parse error: "+error.message,error)}return embedVO};MRSSHelper.prototype.createFeed=function(json){var channel,feedVO,item,items,key,mediaVO,value,_i,_len;try{channel=json.channel;feedVO=new FeedVO();if(channel!=null){feedVO.title=channel.title;feedVO.description=channel.description;feedVO.language=channel.language;feedVO.category=channel.category;feedVO.pubDate=new Date(Date.parse(channel.pubDate));feedVO.ttl=channel.ttl;items=channel.item instanceof Array?channel.item:[channel.item];for(_i=0,_len=items.length;_i<_len;_i++){item=items[_i];mediaVO=this.createMedia(item);feedVO.item.push(mediaVO)}for(key in channel){value=channel[key];if(!(key in feedVO)){feedVO.metadata[key]=value}}}}catch(error){Logger.error("[AMP Feed Parse Error] feed parse error: "+error.message,error)}return feedVO};MRSSHelper.prototype.createMedia=function(item){var atts,category,content,key,label,mediaContent,mediaVO,node,source,track,value,_i,_j,_k,_len,_len1,_len2,_ref,_ref1,_ref2;try{mediaVO=new MediaVO();mediaContent=this.getMediaNode(item,"content");if(mediaContent instanceof Array){mediaVO.source=[];for(_i=0,_len=mediaContent.length;_i<_len;_i++){content=mediaContent[_i];source={src:content["@attributes"].url,type:content["@attributes"].type};category=content["media-category"];if(category!=null){atts=category["@attributes"];if(atts.schema==="http://mrss.akamai.com/user_agent_hint"){label=atts.label||category["#text"];if((label!=null)&&label!==""){if(source.rules==null){source.rules=[]}source.rules.push(label)}}}mediaVO.source.push(source);mediaVO.medium=content["@attributes"].medium;mediaVO.duration=parseFloat(content["@attributes"].duration)}}else{mediaVO.type=mediaContent["@attributes"].type;mediaVO.src=mediaContent["@attributes"].url;mediaVO.medium=mediaContent["@attributes"].medium;mediaVO.duration=parseFloat(mediaContent["@attributes"].duration)}mediaVO.guid=item.guid;mediaVO.title=this.getMediaNode(item,"title");mediaVO.link=item.link;mediaVO.description=this.getMediaNode(item,"description");mediaVO.pubDate=new Date(Date.parse(item.pubDate));mediaVO.thumbnail=mediaVO.poster=(_ref=this.getMediaNode(item,"thumbnail"))!=null?(_ref1=_ref["@attributes"])!=null?_ref1.url:void 0:void 0;mediaVO.embed=this.createEmbed(item);mediaVO.scenes=(_ref2=this.getMediaNode(item,"scenes"))!=null?_ref2["media-scene"]:void 0;node=this.getMediaNode(item,"status",false);if(node!=null){mediaVO.status={state:node["@attributes"].state,reason:node["@attributes"].reason}}mediaVO.category=item.category;if(!(mediaVO.category instanceof Array)){mediaVO.category=[mediaVO.category]}node=this.getMediaNode(item,"category",false);if(node!=null){for(_j=0,_len1=node.length;_j<_len1;_j++){category=node[_j];if((category["#text"]!=null)&&category["#text"]!==""){mediaVO.category.push(category["#text"])}}}if(mediaVO.category!=null){mediaVO.category.sort(function(a,b){a=a.toLowerCase();b=b.toLowerCase();if(a>b){return 1}else{if(a<b){return -1}else{return 0}}})}node=this.getMediaNode(item,"subTitle");if(node!=null){if(mediaVO.track==null){mediaVO.track=[]}if(!(node instanceof Array)){node=[node]}for(_k=0,_len2=node.length;_k<_len2;_k++){track=node[_k];if(track["@attributes"]!=null){mediaVO.track.push({src:track["@attributes"].href,type:track["@attributes"].type,kind:"captioning",srclang:track["@attributes"].lang||"en"})}}}category=item.category;if(!(category instanceof Array)){category=[category]}mediaVO.isLive=item.temporalType==="live"||((category!=null)&&category.join(",").indexOf("live_stream")!==-1);mediaVO.temporalType=mediaVO.isLive?"live":"ondemand";for(key in item){value=item[key];if(!(key in mediaVO)){mediaVO.metadata[key]=value}}}catch(error){Logger.error("[AMP Feed Parse Error] media parse error: "+error.message,error)}return mediaVO};function Logger(){}Logger.enabled=false;Logger.enable=function(enabled){if(enabled==null){enabled=/debug\=true/.test(location.search.toLowerCase())}this.enabled=enabled;if(!this.enabled){this.log=this.trace=this.debug=this.info=this.warn=this.error=this.fatal=function(){}}return enabled};Logger.log=function(){try{console.log.apply(console,arguments)}catch(error){}};Logger.trace=function(){try{console.trace.apply(console,arguments)}catch(error){}};Logger.debug=function(){try{console.log.apply(console,arguments)}catch(error){this.log.apply(this,arguments)}};Logger.info=function(){try{console.info.apply(console,arguments)}catch(error){}};Logger.warn=function(){try{console.warn.apply(console,arguments)}catch(error){}};Logger.error=function(){try{console.error.apply(console,arguments)}catch(error){this.log.apply(this,arguments)}};Logger.fatal=function(){try{console.fatal.apply(console,arguments)}catch(error){}};function EventDispatcher(target,catchErrors){this.target=target!=null?target:this;this.catchErrors=catchErrors!=null?catchErrors:true;this.listenerMap={}}EventDispatcher.prototype.addEventListener=function(type,func,capture){if(!(func!=null)||!(type!=null)){return}if(!(this.listenerMap[type]!=null)){this.listenerMap[type]=[]}if(this.listenerMap[type].indexOf(func)!==-1){return}this.listenerMap[type].push(func)};EventDispatcher.prototype.dispatchEvent=function(event){var listener,listeners,_i,_len;listeners=this.listenerMap[event.type];listener=this.target["on"+event.type];event.target=this.target;if(listener!=null){listener.apply(this.target,[event])}if(!(listeners!=null)){return}for(_i=0,_len=listeners.length;_i<_len;_i++){listener=listeners[_i];listener.apply(this.target,[event])}};EventDispatcher.prototype.callListener=function(event,listener){try{listener.apply(this.target,[event])}catch(error){if(this.catchErrors===true){this.processEventError(error,event,listener)}else{throw error}}};EventDispatcher.prototype.processEventError=function(error,event,listener){var err,file,line;file=error.fileName||error.sourceURL;line=error.lineNumber||error.line;err={message:error.message,name:"AMP Event Listener Error",file:file,fileName:file,line:line,lineNumber:line,error:error,event:event,listener:listener,functionName:listener.name,toString:function(){var message;message=""+this.name+":";message+="\n\t"+(this.error.toString());if(this.event!=null){message+="\n\t\tevent: "+this.event.type}if(this.listener!=null){message+="\n\t\tfunction: "+this.listener.name}if(this.file!=null){message+="\n\t\tfile: "+this.file}if(this.line!=null){message+="\n\t\tline: "+this.line}return message}};setTimeout(function(err){throw err},0,err)};EventDispatcher.prototype.removeEventListener=function(type,func,capture){var index,listeners;if(!(func!=null)||!(type!=null)){return}listeners=this.listenerMap[type];if(!(listeners!=null)){return}index=listeners!=null?listeners.indexOf(func):void 0;if(index===-1){return}return listeners.splice(index,1)};function XHR(){XHR.__super__.constructor.call(this)}__extends(XHR,EventDispatcher);XHR.prototype.xhr=null;XHR.prototype.headers=null;XHR.prototype.response=null;XHR.prototype.responseXML=null;XHR.prototype.responseText=null;XHR.prototype.responseType=null;XHR.prototype.withCredentials=false;XHR.prototype.readyState=0;XHR.prototype.status=null;XHR.prototype.open=function(method,url){var xdr,xhr,_this=this;try{xhr=new XMLHttpRequest()}catch(error){xhr=new window.ActiveXObject("Microsoft.XMLHTTP")}if(XHR.isCORS(url)){if(Object.prototype.hasOwnProperty.call(xhr,"withCredentials")){try{xhr.withCredentials=this.withCredentials}catch(error){Logger.warn("[AMP XHR WARNING]","withCredentials not properly supported in this browser.",error)}}else{if(typeof XDomainRequest!=="undefined"){xdr=true;xhr=new XDomainRequest()}}}if(xhr!=null){if(xdr){xhr.onprogress=function(){};xhr.onload=function(event){if(typeof xhr.onreadystatechange==="function"){xhr.readyState=4;xhr.status=200;if(xhr.contentType.match(/\/xml/)){xhr.responseXML=new ActiveXObject("Microsoft.XMLDOM");xhr.responseXML.async=false;xhr.responseXML.loadXML(xhr.responseText)}xhr.onreadystatechange.call(xhr,event,false)}}}xhr.onreadystatechange=function(event){var _ref,_ref1;_this.readyState=xhr.readyState;_this.dispatchEvent(new Event("readystatechange",xhr));if(xhr.readyState===4){_this.status=xhr.status;if((199<(_ref=_this.status)&&_ref<400)||_this.status===0){if(xhr.responseText==null){xhr.responseText=xhr.text}_this.responseText=xhr.responseText;if((xhr.responseXML!=null)&&((_ref1=xhr.responseXML.childNodes)!=null?_ref1.length:void 0)>0){_this.response=_this.responseXML=xhr.responseXML;_this.responseType="document"}else{try{_this.response=JSON.parse(xhr.responseText);_this.responseType="json"}catch(error){_this.response=xhr.responseText;_this.responseType="text"}}_this.dispatchEvent(new Event("load",_this))}else{if(_this.status!==0){_this.dispatchEvent(new Event("error",_this))}}}};try{if(typeof xhr.onerror!=="undefined"){xhr.onerror=function(event){_this.dispatchEvent(new Event("error",_this))}}}catch(error){}xhr.open(method,url)}this.xhr=xhr};XHR.prototype.send=function(data){var key,value,_ref;if(this.headers!=null){_ref=this.headers;for(key in _ref){value=_ref[key];if((key!=null)&&(value!=null)){this.xhr.setRequestHeader(key,value)}}}this.xhr.send(data)};XHR.prototype.setRequestHeader=function(key,value){if(!(key!=null)||!(value!=null)){return}if(this.headers==null){this.headers={}}this.headers[key]=value};XHR.prototype.setRequestHeaders=function(headers){this.headers=headers;return headers};XHR.prototype.getResponseHeader=function(name){var _ref;return(_ref=this.xhr)!=null?typeof _ref.getResponseHeader==="function"?_ref.getResponseHeader(name):void 0:void 0};XHR.prototype.getAllResponseHeaders=function(){var _ref;return(_ref=this.xhr)!=null?typeof _ref.getAllResponseHeaders==="function"?_ref.getAllResponseHeaders():void 0:void 0};XHR.isCORS=function(url){var hostname,parser,port,protocol;parser=document.createElement("a");parser.href=url;hostname=parser.hostname!==""?parser.hostname:location.hostname;port=parser.port!=="0"?parser.port:location.port;protocol=parser.protocol!==":"?parser.protocol:location.protocol;return location.protocol!==protocol||location.hostname!==hostname||location.port!==port&&!(location.port===""&&port==="80")};function Utils(){}Utils.blankImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjI2QkJDQTBCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjI2QkJDQTFCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowODg4NjdFQkIzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowODg4NjdFQ0IzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu0++ecAAAAGUExURf///wAAAFXC034AAAABdFJOUwBA5thmAAAADElEQVR42mJgAAgwAAACAAFPbVnhAAAAAElFTkSuQmCC";Utils.flashTypes=["video/mp4","video/x-flv","video/f4m","application/smil","application/smil+xml"];Utils.mimeTypes={mp4:"video/mp4",flv:"video/x-flv",f4m:"video/f4m",smil:"application/smil",m3u8:"application/x-mpegURL",mp3:"audio/mpeg",json:"application/json",txt:"text/plain",xml:"application/xml",ogv:"video/ogg",webm:"video/webm",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",js:"text/javascript",css:"text/css"};Utils.rules={flashTablets:{label:"Android 2 & 3 or Kindle Fire 1",regexp:"Android [23]|Silk/1"},html5Phones:{label:"iPhone",regexp:"iPhone"},html5Tablets:{label:"HTML5 Tablets",regexp:"iPad|Android [4-9]|Silk/2"},desktop:{label:"Desktop",regexp:"^((?!iPad|iPhone|Android|BlackBerry|PlayBook|Silk).)*$"}};Utils.playbackModes={HTML:"html",AUTO:"auto",FLASH:"flash",NONE:"none",EXTERNAL:"external"};Utils.getPlaybackMode=function(mode){var key,valid,value,_ref,_ref1;if(mode==null){mode=((_ref=QueryString["amp-mode"])!=null?_ref.toLowerCase():void 0)||this.playbackModes.AUTO}valid=false;_ref1=this.playbackModes;for(key in _ref1){value=_ref1[key];if(value===mode){valid=true;break}}if(!valid){mode=this.playbackModes.AUTO}if(mode!==this.playbackModes.AUTO){if(mode===this.playbackModes.FLASH&&!this.hasFlash()){mode=this.playbackModes.NONE}return mode}if(!this.hasFlash()){mode=this.supportsHTML5Video()?this.playbackModes.HTML:this.playbackModes.NONE}if(mode===this.playbackModes.AUTO){mode=this.isHTML5()?this.playbackModes.HTML:this.playbackModes.FLASH}return mode};Utils.mergeRules=function(rules){var id,rule,_results;_results=[];for(id in rules){rule=rules[id];_results.push(Utils.rules[id]=rule)}return _results};Utils.checkRules=function(rules){var id,regExp,rule,_i,_len;if((rules!=null)&&rules.length>0){for(_i=0,_len=rules.length;_i<_len;_i++){id=rules[_i];if(!(rule=Utils.rules[id])){continue}regExp=new RegExp(rule.regexp);if(regExp.test(navigator.userAgent)){return true}}}return false};Utils.selectSource=function(sources,canPlayType){var item,_i,_j,_len,_len1;for(_i=0,_len=sources.length;_i<_len;_i++){item=sources[_i];if(Utils.checkRules(item.rules)){return item}}for(_j=0,_len1=sources.length;_j<_len1;_j++){item=sources[_j];if(canPlayType(item.type||Utils.getMimeType(item.src))!==""){return item}}return null};Utils.getMimeType=function(file){return this.mimeTypes[Utils.getFileExtension(file)]};Utils.selectTrack=function(tracks,kind){var item,track,_i,_len;for(_i=0,_len=tracks.length;_i<_len;_i++){item=tracks[_i];if(!(item.kind===kind)){continue}track=item;break}return track};Utils.isIPhone=function(){return/iPhone/.test(navigator.platform)||/iPhone/.test(navigator.userAgent)};Utils.isIPad=function(){return/iPad/.test(navigator.platform)||/iPad/.test(navigator.userAgent)};Utils.isAndroid=function(){return/Android [4-9]/.test(navigator.userAgent)};Utils.isKindleFireHD=function(){return/Silk\/2/.test(navigator.userAgent)};Utils.isKindleFire=function(){return/Silk\/1/.test(navigator.userAgent)};Utils.isBlackBerry=function(){return/BlackBerry;|PlayBook|BB10/.test(navigator.userAgent)};Utils.isFirefoxOS=function(){return/\(Mobile;.*Firefox\//.test(navigator.userAgent)};Utils.supportsHTML5Video=function(){var video;video=document.createElement("video");return video.canPlayType!=null};Utils.isHTML5=function(){return this.isIOS()||this.isAndroid()||this.isKindleFireHD()||this.isBlackBerry()||this.isFirefoxOS()};Utils.isIOS=function(){var iOSRegEx,isIOS;iOSRegEx=/iPad|iPhone|iPod/i;return isIOS=iOSRegEx.test(navigator.platform)||iOSRegEx.test(navigator.userAgent)};Utils.getIOSversion=function(){var ver;if(/iP(hone|od|ad)/.test(navigator.platform)){ver=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(ver[1],10),parseInt(ver[2],10),parseInt(ver[3]||0,10)]}};Utils.hasFlash=function(){return swfobject.hasFlashPlayerVersion("1")};Utils.isFullscreenDevice=function(){return this.isKindleFireHD()||this.isIPhone()};Utils.getDevice=function(){var device;device=null;if(this.isIPhone()){device="iphone"}else{if(this.isIPad()){device="ipad"}else{if(/Android/.test(navigator.userAgent)){device="android"}else{if(this.isKindleFireHD()){device="kindlefirehd"}else{if(this.isKindleFire()){device="kindlefire"}else{if(/Mac|Win32/.test(navigator.platform)){device="desktop"}}}}}}return device};Utils.xmlToJson=function(xml){var attribute,child,element,index,nodeName,obj,_i,_j,_len,_len1,_ref,_ref1;obj={};if(xml.nodeType===9){xml=xml.firstChild}if(xml.nodeType===1){if(xml.attributes.length>0){obj["@attributes"]={};_ref=xml.attributes;for(index=_i=0,_len=_ref.length;_i<_len;index=++_i){attribute=_ref[index];obj["@attributes"][attribute.nodeName]=attribute.nodeValue}}}else{if(xml.nodeType===3||xml.nodeType===4){obj=xml.nodeValue}}if(xml.hasChildNodes()){_ref1=xml.childNodes;for(index=_j=0,_len1=_ref1.length;_j<_len1;index=++_j){child=_ref1[index];if(child.nodeType===3&&!/\S/.test(child.nodeValue)){continue}nodeName=child.nodeName.replace(/:/,"-");element=this.xmlToJson(child);if(!(element["@attributes"]!=null)&&(element["#text"]!=null)){element=element["#text"]}if(!(obj[nodeName]!=null)){obj[nodeName]=element}else{if(!(obj[nodeName] instanceof Array)){obj[nodeName]=[obj[nodeName]]}obj[nodeName].push(element)}}}return obj};Utils.getXHR=function(){return new XHR()};Utils.get=function(url,client,headers){var xhr;if(client==null){client={}}if(headers==null){headers=null}xhr=Utils.getXHR();if(client!=null){if(client.withCredentials!=null){xhr.withCredentials=client.withCredentials}if(client.onload!=null){xhr.onload=client.onload}if(client.onerror!=null){xhr.onerror=client.onerror}}xhr.open("GET",url);if(headers!=null){xhr.setRequestHeaders(headers)}xhr.send();return xhr};Utils.send=function(url,data,client,headers){var xhr;if(client==null){client={}}if(headers==null){headers={"Content-Type":"String"}}xhr=Utils.getXHR();if(client.onload!=null){xhr.onload=client.onload}if(client.onerror!=null){xhr.onerror=client.onerror}xhr.open("POST",url);if(headers!=null){xhr.setRequestHeaders(headers)}xhr.send(data);return xhr};Utils.loadScript=function(src,onload,parent){var head,script;head=parent||document.getElementsByTagName("head")[0];script=document.createElement("script");script.type="text/javascript";if(onload!=null){if(script.addEventListener){script.onload=function(event){onload()}}else{if(script.readyState){script.onreadystatechange=function(event){if(this.readyState==="loaded"||this.readyState==="complete"){this.onreadystatechange=null;onload()}}}}}script.src=src;head.appendChild(script);return script};Utils.loadStyleSheet=function(href){var head,link;head=document.getElementsByTagName("head")[0];link=document.createElement("link");link.rel="stylesheet";link.type="text/css";link.href=href;return head.appendChild(link)};Utils.read=function(url,client,type,headers){var text,xhr;if(client==null){client={}}if(type==null){type=""}if(headers==null){headers=[]}try{xhr=this.get(url,client,headers);text=xhr.responseText||xhr.text;if(type===Utils.mimeTypes.json){return JSON.parse(text)}else{if((type===Utils.mimeTypes.xml)&&(xhr.responseXML!=null)){return xhr.responseXML}else{return text}}}catch(error){if(typeof console!=="undefined"&&console!==null){if(typeof console.error==="function"){console.error("Read Error: ",error)}}return null}};Utils.getFileExtension=function(url){return url.split(".").pop().replace(/\?.*/,"")};Utils.getResponseHeader=function(url,header,client){var xhr;if(client==null){client={}}xhr=Utils.getXHR();if(client.onerror!=null){xhr.onerror=client.onerror}xhr.open("HEAD",url,false);xhr.send();return xhr.getResponseHeader(header)};Utils.getResponseHeaders=function(url,headers,client){var header,results,xhr,_i,_len;if(client==null){client={}}xhr=Utils.getXHR();if(client.onerror!=null){xhr.onerror=client.onerror}xhr.open("HEAD",url,false);xhr.send();results={};if(!(headers!=null)){return xhr.getAllResponseHeaders()}for(_i=0,_len=headers.length;_i<_len;_i++){header=headers[_i];results[header]=xhr.getResponseHeader(header)}return results};Utils.isTouch=null;Utils.isTouchDevice=function(){if(!(this.isTouch!=null)){try{document.createEvent("TouchEvent");this.isTouch=true}catch(error){this.isTouch=false}}return this.isTouch};Utils.clamp=function(value,min,max){if(value<min){value=min}if(value>max){value=max}return value};Utils.beacon=function(url){var beaconImg;beaconImg=document.getElementById("beaconId");if(!(beaconImg!=null)){beaconImg=document.createElement("img");beaconImg.setAttribute("id","beaconId");beaconImg.setAttribute("height",0);beaconImg.setAttribute("width",0);document.body.appendChild(beaconImg);beaconImg.style.display="none"}beaconImg.setAttribute("src",url);return beaconImg};Utils.getElementOffset=function(element){var offset;offset={left:0,top:0};if(element.offsetParent){offset.left=element.offsetLeft;offset.top=element.offsetTop;while((element=element.offsetParent)){offset.left+=element.offsetLeft;offset.top+=element.offsetTop}}return offset};Utils.override=function(base,overrides,clone){var key,value;if(clone==null){clone=true}if(!(base!=null)){return overrides}if(!(overrides!=null)){return base}if(clone===true){base=Utils.clone(base);overrides=Utils.clone(overrides)}for(key in overrides){value=overrides[key];if(typeof value==="object"){if(base[key]==null){base[key]=value instanceof Array?[]:{}}base[key]=Utils.override(base[key],value,false)}else{base[key]=value}}return base};Utils.clone=function(obj,deepCopy){var clone,item,k,key,v,value,_i,_len;if(deepCopy==null){deepCopy=true}if(typeof obj!=="object"){clone=obj}else{if(obj instanceof Array){clone=[]}else{clone={}}for(key in obj){value=obj[key];if(typeof value==="object"&&deepCopy===true){if(value instanceof Array){clone[key]=[];for(_i=0,_len=value.length;_i<_len;_i++){item=value[_i];clone[key].push(this.clone(item))}}else{clone[key]={};for(k in value){v=value[k];clone[key][k]=this.clone(v)}}}else{clone[key]=value}}}return clone};Utils.formatTimecode=function(time,duration){var strTime;time=parseInt(time);if(isNaN(time)){return"00:00"}strTime=Utils.formatZeroFill(time%60);time=parseInt(time/60);strTime=Utils.formatZeroFill(time%60)+":"+strTime;time=parseInt(time/60);if(time>0){strTime=Utils.formatZeroFill(time)+":"+strTime}if(duration>=3600&&strTime.length===5){strTime="00:"+strTime}return strTime};Utils.formatZeroFill=function(time){var str;str=time.toString();if(time<10){str="0"+str}return str};Utils.flattenTimecode=function(timeCode,framerate){var ms,parts,pieces,time;if(framerate==null){framerate=30}if(!(timeCode!=null)||timeCode===""){return NaN}pieces=timeCode.split(":");ms=0;if(pieces.length===4){ms=parseInt(pieces.pop())/framerate}else{if(pieces.length===3){pieces[2]=pieces[2].replace(",",".");if(pieces[2].indexOf(".")!==-1){parts=pieces[2].split(".")}if((parts!=null?parts.length:void 0)>1){pieces[2]=parts[0];ms=parseInt(parts[1])/1000}}}time=parseInt(pieces.pop());while(pieces.length>0){time+=Math.pow(60,pieces.length)*parseInt(pieces.shift())}return time+ms};Utils.cacheBust=function(url,key,value){var op;if(key==null){key="cacheBust"}if(value==null){value=Date.now()}op=url.indexOf("?")===-1?"?":"&";return url+op+key+"="+value};Utils.formatStyleName=function(styleName){return styleName.replace(/([A-Z])/,"-$1").toLowerCase()};Utils.trim=function(str){var trim;trim=str.replace(/^\s*(.*)/,"$1");return trim.replace(/(.*)\s*$/,"$1")};Utils.getJson=function(url,onload,onerror){var xhr;xhr=Utils.getXHR();xhr.open("GET",url);xhr.onload=function(event){var feed;if(xhr.responseType==="document"){feed=Utils.xmlToJson(xhr.responseXML)}else{feed=xhr.response}if(typeof onload==="function"){onload(feed)}};xhr.onerror=function(event){if(typeof onerror==="function"){onerror(event)}};xhr.send();return xhr};Utils.getSource=function(url,onload,onerror){var feedloadedHandler,mode;mode=Utils.getPlaybackMode();feedloadedHandler=function(feed){var canPlayType,helper,source,_ref;helper=new MRSSHelper();feed=helper.createFeed(feed);if((feed!=null?(_ref=feed.item)!=null?_ref.length:void 0:void 0)>0){canPlayType=function(type){if((mode==="flash"&&Utils.flashTypes.indexOf(type)!==-1)||(mode==="html"&&Utils.flashTypes.indexOf(type)===-1)){return"maybe"}else{return""}};source=Utils.selectSource(feed.item[0].source,canPlayType)}if(typeof onload==="function"){onload(source)}};Utils.getJson(url,feedloadedHandler,onerror)};Utils.trackMouse=function(){try{if(document.addEventListener!=null){document.addEventListener("mousemove",this.mouseTracker)}else{if(document.attachEvent!=null){document.attachEvent("mousemove",this.mouseTracker)}}}catch(error){}};Utils.mouseTracker=function(event){Utils.clientX=event.clientX;Utils.clientY=event.clientY;Utils.pageX=event.pageX;Utils.pageY=event.pageY};Utils.isMouseOverElement=function(element){if(!(element!=null)){return false}return element.contains(document.elementFromPoint(Utils.clientX,Utils.clientY))};Utils.trackMouse();Utils.getActualSize=function(element,margin){var height,style,width;if(margin==null){margin=true}width=element.offsetWidth;height=element.offsetHeight;if(margin===true){style=getComputedStyle(element);width+=parseInt(style.marginLeft)+parseInt(style.marginRight);height+=parseInt(style.marginTop)+parseInt(style.marginBottom)}return{width:width,height:height}};function AMPConfig(){AMPConfig.__super__.constructor.call(this,this,false)}__extends(AMPConfig,EventDispatcher);AMPConfig.UNINITIALIZED=0;AMPConfig.LOADING=1;AMPConfig.LOADED=2;AMPConfig.parseModule=function(xml){var child,childNodes,count,i,k,node,obj,_i,_len;obj={};i=0;childNodes=xml.childNodes;count=childNodes.length;k=0;node=null;child=null;for(_i=0,_len=childNodes.length;_i<_len;_i++){node=childNodes[_i];if((node!=null?node.nodeType:void 0)===1){obj[node.nodeName]=this.parseItem(node)}}return obj};AMPConfig.parseItem=function(node){var child,children,type,value,_i,_len;type=(""+(node.getAttribute("type"))).toLowerCase();value=node.textContent||node.text||node.innerText;if(type!=="object"&&type!=="array"&&/#\{.*\}/.test(value)){return value}switch(type){case"object":value=this.parseModule(node);break;case"array":value=[];children=node.childNodes;for(_i=0,_len=children.length;_i<_len;_i++){child=children[_i];if(child.nodeType!==1){continue}value.push(this.parseItem(child))}break;case"boolean":value=value.toLowerCase()==="true";break;case"number":value=parseFloat(value)}return value};AMPConfig.prototype.url=null;AMPConfig.prototype.data=null;AMPConfig.prototype.xml=null;AMPConfig.prototype.readyState=AMPConfig.UNINITIALIZED;AMPConfig.prototype.loaded=false;AMPConfig.prototype.loadURL=function(url,withCredentials){var xhr,_this=this;if(withCredentials==null){withCredentials=false}this.url=url;this.setReadyState(AMPConfig.LOADING);xhr=Utils.get(url,{withCredentials:withCredentials,onload:function(event){var data,firstChild,xmlhttp;xmlhttp=event.detail;if(xmlhttp.responseType==="document"){_this.xml=xmlhttp.responseXML;firstChild=_this.xml.firstChild.nodeType!==7?_this.xml.firstChild:_this.xml.childNodes[1];data=AMPConfig.parseModule(firstChild)}else{data=xmlhttp.response;if(typeof data==="string"){data=JSON.parse(data)}}_this.loadData(data)},onerror:function(event){_this.dispatchEvent(new Event("error",event));Logger.error(event)}})};AMPConfig.prototype.loadData=function(data){this.data=data;this.setReadyState(AMPConfig.LOADED)};AMPConfig.prototype.load=function(resource,withCredentials){if(withCredentials==null){withCredentials=false}switch(typeof resource){case"object":this.loadData(resource);break;case"string":this.loadURL(resource,withCredentials);break;default:throw new Error("[AMP ERROR] Invalid default configuration resource")}};AMPConfig.prototype.setReadyState=function(state){this.readyState=state;this.dispatchEvent(new Event("readystatechange",state));if(state===AMPConfig.LOADED&&!this.loaded){this.loaded=true;this.dispatchEvent(new Event("load",this.data))}};function ButtonMediator(label,parent,element,componentName,onclick){this.onclick=onclick!=null?onclick:this.onclick;ButtonMediator.__super__.constructor.call(this,componentName,null,parent,element);this.icon=this.create("icon");if(label!=null){this.label=this.createText("label",label)}}__extends(ButtonMediator,ComponentMediator);ButtonMediator.prototype.componentType="button";ButtonMediator.prototype.icon=null;ButtonMediator.prototype.label=null;ButtonMediator.prototype.onclick=null;function IdleUtil(element,timeout){this.element=element;this.timeout=timeout;IdleUtil.__super__.constructor.call(this);this.resetHandler=this.reset.bind(this)}__extends(IdleUtil,EventDispatcher);IdleUtil.prototype.events=["mousemove","mousedown","keypress","DOMMouseScroll","mousewheel","touchmove","MSPointerMove"];IdleUtil.prototype.resetHandler=null;IdleUtil.prototype.element=null;IdleUtil.prototype.timeout=null;IdleUtil.prototype.active=true;IdleUtil.prototype.timeoutId=null;IdleUtil.prototype.applyListeners=function(action){var event,_i,_len,_ref;if(action==null){action="add"}_ref=this.events;for(_i=0,_len=_ref.length;_i<_len;_i++){event=_ref[_i];this.element[""+action+"EventListener"](event,this.resetHandler)}};IdleUtil.prototype.start=function(timeout){if(timeout!=null){this.timeout=timeout}this.stop();this.applyListeners("add");this.timeoutId=setTimeout(this.setActive.bind(this,false),this.timeout)};IdleUtil.prototype.stop=function(){this.applyListeners("remove");clearTimeout(this.timeoutId)};IdleUtil.prototype.reset=function(){this.setActive(true);this.start()};IdleUtil.prototype.setActive=function(value){if(value===this.active){return}this.active=value;this.dispatchEvent(new Event("activechange",{active:this.active}));return value};IdleUtil.prototype.getActive=function(){return this.active};function FullScreenMediator(parent){FullScreenMediator.__super__.constructor.call(this,null,parent)}__extends(FullScreenMediator,ButtonMediator);FullScreenMediator.prototype.componentName="full-screen";FullScreenMediator.prototype.onRegister=function(){FullScreenMediator.__super__.onRegister.call(this);this.sendNotification(Notifications.ADD_CONTROL_STATE,this.componentName+"-enabled")};FullScreenMediator.prototype.onclick=function(event){event.stopImmediatePropagation();this.sendNotification(Notifications.TOGGLE_FULL_SCREEN);return false};FullScreenMediator.prototype.listNotificationInterests=function(){return[Notifications.DISABLE_FULL_SCREEN,Notifications.ENABLE_FULL_SCREEN]};FullScreenMediator.prototype.handleNotification=function(notification){var body,name;name=notification.getName();body=notification.getBody();switch(name){case Notifications.DISABLE_FULL_SCREEN:this.setDisabled(true);break;case Notifications.ENABLE_FULL_SCREEN:this.setDisabled(false)}};function PluginWrapper(player,config){this.player=player;this.config=config;PluginWrapper.__super__.constructor.call(this);this.dispatcher=new EventDispatcher(this)}__extends(PluginWrapper,puremvc.Mediator);PluginWrapper.NAME="PluginWrapper";PluginWrapper.prototype.player=null;PluginWrapper.prototype.config=null;PluginWrapper.prototype.dispatcher=null;PluginWrapper.prototype.createFlashVars=null;PluginWrapper.prototype.createXML=null;PluginWrapper.prototype.addEventListener=function(type,func){this.dispatcher.addEventListener(type,func)};PluginWrapper.prototype.dispatchEvent=function(event){if(event.type!=="timeupdate"&&event.type!=="timeremaining"){this.player.logger.log("[AMP "+(this.constructor.NAME.replace("Wrapper","").toUpperCase())+" EVENT]",event.type,event.detail,event)}event.player=this.player.parent;this.dispatcher.dispatchEvent(event)};PluginWrapper.prototype.removeEventListener=function(type,func){this.dispatcher.removeEventListener(type,func)};PluginWrapper.prototype.createElement=function(xml,id,parent){var element;element=xml.createElement("element");element.setAttribute("id",id);if(!(parent!=null)){parent=this.getControls(xml).controls}if(parent!=null){parent.appendChild(element)}return element};PluginWrapper.prototype.createProperty=function(xml,key,value,parent){var property,text,val;property=xml.createElement("property");property.setAttribute("key",key);if(parent!=null){parent.appendChild(property)}if(value!=null){if(typeof value==="object"&&!(value instanceof Array)){for(key in value){val=value[key];this.createProperty(xml,key,val,property)}}else{text=XMLUtils.createTextContent(xml,value.toString());property.appendChild(text)}}return property};PluginWrapper.prototype.getControls=function(xml){var controls,element,elements,id,_i,_len;elements=xml.getElementsByTagName("element");if((elements!=null?elements.length:void 0)<1){return null}controls={};for(_i=0,_len=elements.length;_i<_len;_i++){element=elements[_i];id=element.getAttribute("id");controls[id]=element}return controls};PluginWrapper.prototype.hasControls=function(xml){var _ref;return((_ref=this.getControls(xml))!=null?_ref.controls:void 0)!=null};PluginWrapper.prototype.listNotificationInterests=function(){return[FlashNotifications.CREATE_FLASH_VARS,FlashNotifications.CREATE_XML]};PluginWrapper.prototype.handleNotification=function(notification){var body,name;name=notification.getName();body=notification.getBody();switch(name){case FlashNotifications.CREATE_FLASH_VARS:if(typeof this.createFlashVars==="function"){this.createFlashVars(body.flashvars)}break;case FlashNotifications.CREATE_XML:if(typeof this.createXML==="function"){this.createXML(body.xml)}}};function ControlsPlayCommand(){ControlsPlayCommand.__super__.constructor.call(this)}__extends(ControlsPlayCommand,puremvc.SimpleCommand);ControlsPlayCommand.prototype.execute=function(notification){var controls;controls=this.facade.retrieveProxy(ControlsProxy.NAME);controls.start()};function ControlsPauseCommand(){ControlsPauseCommand.__super__.constructor.call(this)}__extends(ControlsPauseCommand,puremvc.SimpleCommand);ControlsPauseCommand.prototype.execute=function(notification){var controls;controls=this.facade.retrieveProxy(ControlsProxy.NAME);controls.stop()};function ControlsActiveStateChangeCommand(){ControlsActiveStateChangeCommand.__super__.constructor.call(this)}__extends(ControlsActiveStateChangeCommand,puremvc.SimpleCommand);ControlsActiveStateChangeCommand.prototype.execute=function(notification){var app,body,controls;controls=this.facade.retrieveProxy(ControlsProxy.NAME);app=this.facade.player.retrieveProxy(ApplicationStateProxy.NAME);body=notification.getBody();if(body.newState===ActiveState.ACTIVE&&app.getPlayState()!==PlayState.READY&&Utils.getDevice()!=="desktop"){controls.start()}};function ControlsAdBreakStartCommand(){ControlsAdBreakStartCommand.__super__.constructor.call(this)}__extends(ControlsAdBreakStartCommand,puremvc.SimpleCommand);ControlsAdBreakStartCommand.prototype.execute=function(notification){this.facade.player.getMediaElement().controls=false};function ControlsAdBreakEndCommand(){ControlsAdBreakEndCommand.__super__.constructor.call(this)}__extends(ControlsAdBreakEndCommand,puremvc.SimpleCommand);ControlsAdBreakEndCommand.prototype.execute=function(notification){this.facade.player.getMediaElement().controls=true};function ControlsMediaValidatedCommand(){ControlsMediaValidatedCommand.__super__.constructor.call(this)}__extends(ControlsMediaValidatedCommand,puremvc.SimpleCommand);ControlsMediaValidatedCommand.prototype.execute=function(notification){var element,media,src;media=notification.getBody();src=media.poster;element=this.facade.player.getMediaElement();if((src!=null)&&src!==""){element.poster=src}element.src=media.src;if(this.facade.player.getAutoplay()!==true){this.facade.applyClickHandler()}};function ControlsStartedCommand(){ControlsStartedCommand.__super__.constructor.call(this)}__extends(ControlsStartedCommand,puremvc.SimpleCommand);ControlsStartedCommand.prototype.execute=function(notification){this.facade.applyClickHandler(false)};function ControlsWrapper(player,config){ControlsWrapper.__super__.constructor.call(this,player,config)}__extends(ControlsWrapper,PluginWrapper);ControlsWrapper.NAME="ControlsWrapper";ControlsWrapper.prototype.mode="auto";ControlsWrapper.prototype.autoHide=5;ControlsWrapper.prototype.listNotificationInterests=function(){return ControlsWrapper.__super__.listNotificationInterests.apply(this,arguments).concat([Notifications.MEDIUM_CHANGE])};ControlsWrapper.prototype.handleNotification=function(notification){var body,mode,name;ControlsWrapper.__super__.handleNotification.call(this,notification);name=notification.getName();body=notification.getBody();switch(name){case Notifications.MEDIUM_CHANGE:mode=/audio/.test(body)?"persistent":this.mode;this.setMode(mode)}};ControlsWrapper.prototype.createFlashVars=function(flashvars){if(this.config.mode!=null){this.mode=flashvars.controls_mode=this.config.mode}return flashvars};ControlsWrapper.prototype.createXML=function(xml){var controls,element,elements,view,_i,_len;view=xml.getElementsByTagName("view")[0];elements=xml.getElementsByTagName("element");controls=null;for(_i=0,_len=elements.length;_i<_len;_i++){element=elements[_i];if(!(element.getAttribute("id")==="controls")){continue}controls=element;break}if(!(controls!=null)){controls=xml.createElement("element");controls.setAttribute("id","controls");view.appendChild(controls)}if(controls.attributes.autoHideDelay!=null){this.autoHide=controls.getAttribute("autoHideDelay")}else{if(this.config.autoHide!=null){this.autoHide=this.config.autoHide;controls.setAttribute("autoHideDelay",this.config.autoHide)}}return xml};ControlsWrapper.prototype.getMode=function(){return this.mode};ControlsWrapper.prototype.setMode=function(value){if(value===this.mode){return}try{this.mode=value;this.player.mediaElement.setPlayerProperty("controlsMode",value)}catch(error){this.facade.logger.error("[AMP CONTROLS ERROR]",error)}return value};ControlsWrapper.prototype.getAutoHide=function(){return this.autoHide};function ControlsProxy(config){ControlsProxy.__super__.constructor.call(this,config)}__extends(ControlsProxy,ModuleProxy);ControlsProxy.NAME=ModuleProxy.NAME;ControlsProxy.prototype.defaults={mode:"auto",autoHide:3};ControlsProxy.prototype.timeout=null;ControlsProxy.prototype.appState=null;ControlsProxy.prototype.controls=null;ControlsProxy.prototype.interactiveElement=null;ControlsProxy.prototype.idleUtil=null;ControlsProxy.prototype.initializeNotifier=function(key){ControlsProxy.__super__.initializeNotifier.call(this,key);this.appState=this.facade.player.retrieveProxy(ApplicationStateProxy.NAME);this.controls=this.facade.retrieveMediator(ApplicationStateProxy.NAME)};ControlsProxy.prototype.onRegister=function(){var _this=this;ControlsProxy.__super__.onRegister.call(this);if(this.config.mode!=null){this.changeMode(this.config.mode)}this.interactiveElement=this.facade.player.retrieveMediator(OverlayLayerMediator.NAME).getViewComponent();if(Utils.getDevice()==="desktop"){EventHandler.create(this.interactiveElement,"mouseenter",function(){_this.stop();_this.sendNotification(Notifications.CHANGE_ACTIVE_STATE,ActiveState.ACTIVE)});EventHandler.create(this.interactiveElement,"mouseleave",function(){_this.start()});this.idleUtil=new IdleUtil(this.facade.player.getViewComponent(),this.data.autoHide*1000);this.idleUtil.addEventListener("activechange",function(event){var state;state=event.detail.active!==true?ActiveState.INACTIVE:ActiveState.ACTIVE;_this.sendNotification(Notifications.CHANGE_ACTIVE_STATE,state)});this.idleUtil.start()}else{EventHandler.create(this.interactiveElement,EventHandler.CLICK,function(){_this.sendNotification(Notifications.TOGGLE_ACTIVE)})}};ControlsProxy.prototype.setMode=function(value){if(this.data.mode===value){return value}this.changeMode(value);return value};ControlsProxy.prototype.changeMode=function(value){if(this.data.mode==="auto"){this.stop()}this.facade.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"controls-"+this.data.mode);this.data.mode=value;this.facade.sendNotification(Notifications.ADD_APPLICATION_STATE,"controls-"+this.data.mode)};ControlsProxy.prototype.getMode=function(){return this.data.mode};ControlsProxy.prototype.setAutoHide=function(value){this.data.autoHide=value;return value};ControlsProxy.prototype.getAutoHide=function(){return this.data.autoHide};ControlsProxy.prototype.start=function(){this.stop();if(this.data.mode!=="auto"){return}this.timeout=setTimeout(this.hide.bind(this),this.data.autoHide*1000)};ControlsProxy.prototype.stop=function(){clearTimeout(this.timeout);this.timeout=null};ControlsProxy.prototype.hide=function(){if(this.data.mode!=="auto"){return}if((this.appState.getIsUserActive()===true||Utils.isMouseOverElement(this.facade.viewComponent))&&this.appState.getDisplayState()!==DisplayState.FULL_SCREEN){this.start();return}this.facade.sendNotification(Notifications.CHANGE_ACTIVE_STATE,ActiveState.INACTIVE)};function SliderMediator(parent,direction){this.direction=direction!=null?direction:this.direction;SliderMediator.__super__.constructor.call(this,null,null,parent)}__extends(SliderMediator,ComponentMediator);SliderMediator.prototype.componentType="slider";SliderMediator.prototype.trackView=null;SliderMediator.prototype.handleView=null;SliderMediator.prototype.valueView=null;SliderMediator.prototype.startCapView=null;SliderMediator.prototype.endCapView=null;SliderMediator.prototype.min=0;SliderMediator.prototype.max=1;SliderMediator.prototype.value=0;SliderMediator.prototype.dragging=false;SliderMediator.prototype.direction="vertical";SliderMediator.prototype.pressHandler=null;SliderMediator.prototype.releaseHandler=null;SliderMediator.prototype.moveHandler=null;SliderMediator.prototype.clickHandler=null;SliderMediator.prototype.onRegister=function(){SliderMediator.__super__.onRegister.call(this);this.startCapView=this.create("start-cap");this.endCapView=this.create("end-cap");this.trackView=this.create("track");this.valueView=this.create("value",this.trackView);this.handleView=this.create("handle",this.trackView);this.pressHandler=EventHandler.create(this.handleView,EventHandler.PRESS,this.handlePressHandler.bind(this));this.releaseHandler=EventHandler.create(window,EventHandler.RELEASE,this.handleReleaseHandler.bind(this));this.releaseHandler.unbind();this.moveHandler=EventHandler.create(window,EventHandler.MOVE,this.updateHandler.bind(this));this.moveHandler.unbind();this.clickHandler=EventHandler.create(this.trackView,EventHandler.CLICK,this.updateHandler.bind(this))};SliderMediator.prototype.setDirection=function(value){this.direction=value;return value};SliderMediator.prototype.getDirection=function(){return this.direction};SliderMediator.prototype.setValue=function(value){this.updateValue(value);return value};SliderMediator.prototype.getValue=function(){return this.value};SliderMediator.prototype.setDragging=function(value){if(value===this.dragging){return}this.dragging=value;this.sendNotification(Notifications.IS_USER_ACTIVE,this.dragging);return this.dragging};SliderMediator.prototype.getDragging=function(){return this.dragging};SliderMediator.prototype.updateValue=function(value){var handle;this.value=Utils.clamp(value,this.min,this.max);if(this.direction==="vertical"){value="height";handle="bottom"}else{value="width";handle="left"}this.valueView.style[value]=this.handleView.style[handle]=""+(this.value*100)+"%"};SliderMediator.prototype.calculateValue=function(pos){var offset,slider;if(this.getDirection()==="vertical"){slider=this.viewComponent.offsetHeight;offset=Utils.getElementOffset(this.viewComponent).top+slider;pos=-(pos.y-offset)}else{slider=this.viewComponent.offsetWidth;offset=Utils.getElementOffset(this.viewComponent).left;pos=pos.x-offset}return Utils.clamp(pos/slider,0,1)};SliderMediator.prototype.handlePressHandler=function(event){this.moveHandler.bind();this.releaseHandler.bind();this.setDragging(true);event.stopImmediatePropagation();return false};SliderMediator.prototype.handleReleaseHandler=function(event){this.moveHandler.unbind();this.releaseHandler.unbind();this.setDragging(false);event.stopImmediatePropagation();return false};SliderMediator.prototype.updateHandler=function(event){var pos;event.stopImmediatePropagation();pos={x:event.clientX||event.targetTouches[0].screenX,y:event.clientY||event.targetTouches[0].screenY};this.setValue(this.calculateValue(pos));return false};var PanelNotifications={ADD_PANEL:"addPanel",REMOVE_PANEL:"removePanel",OPEN_PANEL:"openPanel",CLOSE_PANEL:"closePanel",TOGGLE_PANEL:"togglePanel",CLOSE_ALL_PANELS:"closeAllPanels"};function TimeDisplayMediator(parent){TimeDisplayMediator.__super__.constructor.call(this,null,null,parent)}__extends(TimeDisplayMediator,ComponentMediator);TimeDisplayMediator.prototype.componentName="time-display";TimeDisplayMediator.prototype.duration=null;TimeDisplayMediator.prototype.currentTimeDisplay=null;TimeDisplayMediator.prototype.separatorDisplay=null;TimeDisplayMediator.prototype.durationDisplay=null;TimeDisplayMediator.prototype.liveDisplay=null;TimeDisplayMediator.prototype.onRegister=function(){TimeDisplayMediator.__super__.onRegister.call(this);this.liveDisplay=this.createText("live-display",this.localizationManager.getString(LocalizationConstants.MSG_LIVE));this.currentTimeDisplay=this.createText("current-time-display","00:00",this,"span");this.separatorDisplay=this.createText("separator-display",this.localizationManager.getString(LocalizationConstants.MSG_TIME_SEPARATOR),this,"span");this.durationDisplay=this.createText("duration-display","00:00",this,"span")};TimeDisplayMediator.prototype.listNotificationInterests=function(){return[Notifications.PLAY,Notifications.DURATION_CHANGE,Notifications.ENDED,Notifications.DISPLAY_TIME]};TimeDisplayMediator.prototype.handleNotification=function(notification){var body,name;name=notification.getName();body=notification.getBody();switch(name){case Notifications.PLAY:this.updateDuration();break;case Notifications.DURATION_CHANGE:this.duration=body;this.updateCurrentTime();this.updateDuration();break;case Notifications.ENDED:this.updateCurrentTime(this.duration);this.updateDuration();break;case Notifications.DISPLAY_TIME:this.updateCurrentTime(body.currentTime,body.duration);this.updateDuration(body.duration)}};TimeDisplayMediator.prototype.updateCurrentTime=function(currentTime,duration){if(currentTime==null){currentTime=this.currentTime}if(duration==null){duration=this.duration}this.currentTimeDisplay.textContent=Utils.formatTimecode(currentTime,duration)};TimeDisplayMediator.prototype.updateDuration=function(duration){if(duration==null){duration=this.duration}this.durationDisplay.textContent=Utils.formatTimecode(duration)};function PanelsMediator(parent){this.panels=[];this.closeHandler=this.mouseupHandler.bind(this);PanelsMediator.__super__.constructor.call(this,null,null,parent)}__extends(PanelsMediator,ComponentMediator);PanelsMediator.prototype.componentName="panels";PanelsMediator.prototype.activePanel=null;PanelsMediator.prototype.panels=null;PanelsMediator.prototype.closeHandler=null;PanelsMediator.prototype.listNotificationInterests=function(){var key,value;return((function(){var _results;_results=[];for(key in PanelNotifications){value=PanelNotifications[key];_results.push(value)}return _results})()).concat([])};PanelsMediator.prototype.handleNotification=function(notification){var body,name;name=notification.getName();body=notification.getBody();switch(name){case PanelNotifications.ADD_PANEL:this.addPanel(body);break;case PanelNotifications.REMOVE_PANEL:this.removePanel(body);break;case PanelNotifications.OPEN_PANEL:this.openPanel(body);break;case PanelNotifications.CLOSE_PANEL:this.closePanel(body);break;case PanelNotifications.CLOSE_ALL_PANELS:this.closeAllPanels(body);break;case PanelNotifications.TOGGLE_PANEL:this.togglePanel(body)}};PanelsMediator.prototype.addPanel=function(panel){this.panels.push(panel);this.viewComponent.appendChild(panel.getViewComponent())};PanelsMediator.prototype.removePanel=function(panel){this.panels.splice(this.panels.indexOf(panel),1);this.viewComponent.removeChild(panel.getViewComponent())};PanelsMediator.prototype.openPanel=function(panel){if(panel===this.activePanel||!(panel!=null)){return}this.closeAllPanels();this.activePanel=panel;this.activePanel.classList.add("active");if(Utils.getDevice()!=="desktop"){this.sendNotification(Notifications.IS_USER_ACTIVE,true)}document.addEventListener("mouseup",this.closeHandler)};PanelsMediator.prototype.closePanel=function(panel){panel.classList.remove("active");if(this.activePanel!=null){this.activePanel=null;if(Utils.getDevice()!=="desktop"){this.sendNotification(Notifications.IS_USER_ACTIVE,false)}document.removeEventListener("mouseup",this.closeHandler)}};PanelsMediator.prototype.togglePanel=function(panel){if(panel===this.activePanel){this.closePanel(panel)}else{this.openPanel(panel)}};PanelsMediator.prototype.closeAllPanels=function(){var panel,_i,_len,_ref;_ref=this.panels;for(_i=0,_len=_ref.length;_i<_len;_i++){panel=_ref[_i];this.closePanel(panel)}};PanelsMediator.prototype.mouseupHandler=function(event){var button,element,panel;element=document.elementFromPoint(event.clientX,event.clientY);panel=this.activePanel.getViewComponent();button=this.activePanel.control.getViewComponent();if(element!==panel&&panel.contains(element)===false&&element!==button&&button.contains(element)===false){this.closeAllPanels()}};function ProgressMediator(parent){ProgressMediator.__super__.constructor.call(this,parent,"horizontal")}__extends(ProgressMediator,SliderMediator);ProgressMediator.prototype.componentName="progress";ProgressMediator.prototype.bufferValue=null;ProgressMediator.prototype.scrubTime=null;ProgressMediator.prototype.scrubTimeSeparator=null;ProgressMediator.prototype.cuePoints=null;ProgressMediator.prototype.duration=0;ProgressMediator.prototype.isLive=false;ProgressMediator.prototype.previewData={src:null,previewWidth:null,previewHeight:null,imgWidth:null,imgHeight:null,count:null};ProgressMediator.prototype.onRegister=function(){ProgressMediator.__super__.onRegister.call(this);this.bufferValue=this.create("buffer-value",false);this.trackView.insertBefore(this.bufferValue,this.trackView.lastChild);this.cuePoints=this.create("cue-points",this.trackView);this.scrubTimeSeparator=this.create("scrub-time-separator",this.trackView);this.scrubTime=this.create("scrub-time",this.trackView);this.thumbPreview=this.create("thumb-preview")};ProgressMediator.prototype.listNotificationInterests=function(){return[Notifications.ENDED,Notifications.MEDIA_CHANGE,Notifications.DURATION_CHANGE,Notifications.PROGRESS,Notifications.ADD_CUE_POINTS,Notifications.REMOVE_CUE_POINTS,Notifications.DISPLAY_TIME]};ProgressMediator.prototype.handleNotification=function(notification){var body,cue,cuePoint,cues,name,value,_i,_len,_ref,_ref1;name=notification.getName();body=notification.getBody();switch(name){case Notifications.MEDIA_CHANGE:this.isLive=body.temporalType==="live";this.updateValue(0);this.bufferValue.style.width="0%";this.updatePreview(body.metadata);break;case Notifications.PROGRESS:value=Utils.clamp(body/this.duration*100,0,100);this.bufferValue.style.width=value+"%";break;case Notifications.DURATION_CHANGE:this.duration=body;break;case Notifications.ENDED:this.updateValue(1);break;case Notifications.ADD_CUE_POINTS:if(((_ref=this.facade.player.config)!=null?(_ref1=_ref.controls)!=null?_ref1.displaySceneMarkers:void 0:void 0)!=null){if(this.facade.player.config.controls.displaySceneMarkers===false){return}}this.removeCuePoints();cues=body;for(_i=0,_len=cues.length;_i<_len;_i++){cue=cues[_i];if(!(cue!==0&&cue!==-1)){continue}cuePoint=this.create("cue-point",this.cuePoints);cuePoint.style.left=(cue/this.duration*100)+"%"}break;case Notifications.REMOVE_CUE_POINTS:this.removeCuePoints();break;case Notifications.DISPLAY_TIME:this.updateValue(body.currentTime/body.duration,body.duration)}};ProgressMediator.prototype.updatePreview=function(metadata){var img,_this=this;this.previewData.src=metadata.previewThumbnailSrc;this.previewData.previewHeight=metadata.previewThumbnailHeight;this.previewData.previewWidth=metadata.previewThumbnailWidth;this.previewData.count=metadata.previewThumbnailCount;img=new Image();if(this.previewData.src){img.src=this.previewData.src}EventHandler.create(img,"load",function(event){event.stopImmediatePropagation();_this.previewData.imgWidth=event.target.width;_this.previewData.imgHeight=event.target.height;return false});if(this.previewData.src){this.thumbPreview.style.backgroundImage="url("+this.previewData.src+")"}this.thumbPreview.style.width=this.previewData.previewWidth+"px";this.thumbPreview.style.height=this.previewData.previewHeight+"px"};ProgressMediator.prototype.removeCuePoints=function(){if(!(this.cuePoints!=null)){return}this.cuePoints.innerHTML=""};ProgressMediator.prototype.setValue=function(value){ProgressMediator.__super__.setValue.call(this,value);this.sendNotification(UserNotifications.SEEK,value*this.facade.player.retrieveProxy(MediaProxy.NAME).getDuration())};ProgressMediator.prototype.updateValue=function(percent,duration){if(duration==null){duration=this.duration}if(this.isLive===true){percent=1}if(isNaN(percent)===true){percent=0}ProgressMediator.__super__.updateValue.call(this,percent);if(this.getDragging()===true){this.scrubTime.textContent=Utils.formatTimecode(this.value*duration)}this.scrubTime.style.left=this.scrubTimeSeparator.style.left=""+((this.value*100).toFixed(2))+"%";this.previewInterval=this.duration/this.previewData.count;this.previewImgIndex=Math.floor(this.value*duration/this.previewInterval);this.previewRow=Math.floor((this.previewImgIndex*this.previewData.previewWidth)/this.previewData.imgWidth);this.xpos="-"+this.previewData.previewWidth*this.previewImgIndex+"px ";this.ypos="-"+this.previewData.previewHeight*this.previewRow.toFixed(0)+"px ";this.thumbPreview.style.backgroundPosition=this.xpos+this.ypos;this.thumbPreview.style.left=""+(((this.value*100)-18).toFixed(2))+"%"};ProgressMediator.prototype.handlePressHandler=function(event){ProgressMediator.__super__.handlePressHandler.call(this,event);this.classList.add("scrubbing")};ProgressMediator.prototype.handleReleaseHandler=function(event){ProgressMediator.__super__.handleReleaseHandler.call(this,event);this.classList.remove("scrubbing")};function PlayPauseMediator(parent){PlayPauseMediator.__super__.constructor.call(this,null,parent)}__extends(PlayPauseMediator,ButtonMediator);PlayPauseMediator.prototype.componentName="play-pause";PlayPauseMediator.prototype.onclick=function(event){event.stopImmediatePropagation();event.preventDefault();this.sendNotification(UserNotifications.TOGGLE_PLAY_PAUSE);return false};var AdNotifications={BREAK_START:"adsbreakstart",BREAK_END:"adsbreakend",AD_CONTAINER_CREATED:"adscontainercreated",AD_LOADED:"adsloaded",AD_STARTED:"adsstarted",AD_TIME_UPDATE:"adstimeupdate",AD_TIME_REMAINING:"adstimeremaining",AD_DURATION_CHANGE:"adsdurationchange",AD_ENDED:"adsended",AD_ERROR:"adserror",AD_PLAY:"adsplay",AD_PAUSE:"adspause",AD_PAUSED:"adspaused",AD_RESUME:"adsresume",AD_COMPANION:"adscompanion",FIRST_QUARTILE:"adsfirstquartile",MIDPOINT:"adsmidpoint",THIRD_QUARTILE:"adsthirdquartile",LOG:"adslog",REQUEST:"adsrequest"};function ControlsMediator(){ControlsMediator.__super__.constructor.call(this)}__extends(ControlsMediator,LayerMediator);ControlsMediator.prototype.componentName="controls";ControlsMediator.prototype.activeControlPanel=null;ControlsMediator.prototype.controlBar=null;ControlsMediator.prototype.panels=null;ControlsMediator.prototype.onRegister=function(){var separator;ControlsMediator.__super__.onRegister.call(this);this.facade.viewComponent=this.viewComponent;this.controlBar=this.create("control-bar");this.facade.registerMediator(new PanelsMediator(this.viewComponent));this.facade.registerMediator(new PlayPauseMediator(this.controlBar));this.facade.registerMediator(new TimeDisplayMediator(this.controlBar));this.facade.registerMediator(new ProgressMediator(this.controlBar));separator=this.create("separator",this.controlBar)};ControlsMediator.prototype.listNotificationInterests=function(){return[Notifications.READY,Notifications.ADD_CONTROL,Notifications.REMOVE_CONTROL,Notifications.ADD_CONTROL_STATE,Notifications.REMOVE_CONTROL_STATE]};ControlsMediator.prototype.handleNotification=function(notification){var body,name,_ref;name=notification.getName();body=notification.getBody();switch(name){case Notifications.READY:if(((_ref=body.fullscreen)!=null?_ref.enabled:void 0)!==false){this.facade.registerMediator(new FullScreenMediator(this.controlBar))}break;case Notifications.ADD_CONTROL_STATE:this.classList.add(body);break;case Notifications.REMOVE_CONTROL_STATE:this.classList.remove(body);break;case Notifications.ADD_CONTROL:this.controlBar.appendChild(body);break;case Notifications.REMOVE_CONTROL:this.controlBar.removeChild(body)}};function AMP(){}AMP.create=function(container,config,onready){var debug,player,version;if(typeof container==="string"){container=document.getElementById(container)}if(!(container!=null)){throw new Error("[AMP ERROR] Invalid container.")}debug=(config!=null?config.debug:void 0)!=null?config.debug:/amp\-debug\=true/.test(location.search.toLowerCase());Logger.enable(debug);if((AMP.defaults.data!=null)){config=Utils.override(AMP.defaults.data,config)}version=this.getVersion();config.mode=Utils.getPlaybackMode(config.mode);if(config.version==null){config.version=version}if(container.dataset==null){container.dataset={}}container.dataset["amp.version"]=version;Logger.log("[AMP]",version);switch(config.mode){case"html":player=new HTMLPlayer(container);break;case"flash":player=new FlashPlayer(container);break;case"external":player=new ExternalPlayer(container);break;case"none":player=new InstallPlayer(container)}player.onready=onready;player.initialize(config);container.amp=player;return player};AMP.getVersion=function(){return this.VERSION};AMP.VERSION="AMP Premier v2.19.0.0008";AMP.defaults=new AMPConfig();AMP.plugins=[];AMP.loadDefaults=function(url,loaded,error,withCredentials){if(withCredentials==null){withCredentials=false}if(loaded!=null){this.defaults.addEventListener("load",loaded)}if(error!=null){this.defaults.addEventListener("error",error)}this.defaults.load(url,withCredentials)};AMP.getPlaybackMode=function(){return Utils.getPlaybackMode()};AMP.registerPlugin=function(id,mode,plugin){var _base;if((_base=this.plugins)[id]==null){_base[id]={}}this.plugins[id][mode]=plugin};AMP.resourceManager=null;AMP.getResourceManager=function(){if(!(this.resourceManager!=null)){this.resourceManager=new ResourceManager()}return this.resourceManager};AMP.addResource=function(resource,callback){return this.getResourceManager().add(resource,callback)};AMP.addResources=function(resources,callback){return this.getResourceManager().addResources(resources,callback)};AMP.getResource=function(key){return this.getResourceManager().item(key)};AMP.removeResource=function(key){return this.getResourceManager().remove(key)};function PlayOverlayWrapper(){return PlayOverlayWrapper.__super__.constructor.apply(this,arguments)}__extends(PlayOverlayWrapper,PluginWrapper);PlayOverlayWrapper.NAME="PlayOverlayWrapper";PlayOverlayWrapper.prototype.createFlashVars=function(flashvars){flashvars.show_play_button_overlay=this.config.enabled!=null?this.config.enabled:true;return flashvars};AMP.registerPlugin("playoverlay","flash",PlayOverlayWrapper);function PlayOverlayMediator(){PlayOverlayMediator.__super__.constructor.call(this)}__extends(PlayOverlayMediator,OverlayMediator);PlayOverlayMediator.prototype.componentName="play";PlayOverlayMediator.prototype.onclick=function(event){event.stopImmediatePropagation();event.preventDefault();this.sendNotification(UserNotifications.TOGGLE_PLAY_PAUSE);return false};function ControlsPlugin(){ControlsPlugin.__super__.constructor.call(this)}__extends(ControlsPlugin,Plugin);ControlsPlugin.prototype.moduleName="controls";ControlsPlugin.prototype.createFramework=function(){if(this.config["native"]===true){this.player.getMediaElement().controls=true;this.player.sendNotification(Notifications.ADD_APPLICATION_STATE,"controls-native");this.registerCommand(Notifications.MEDIA_VALIDATED,ControlsMediaValidatedCommand);this.registerCommand(AdNotifications.BREAK_START,ControlsAdBreakStartCommand);this.registerCommand(AdNotifications.BREAK_END,ControlsAdBreakEndCommand);this.registerCommand(Notifications.STARTED,ControlsStartedCommand);this.createView=function(){};return}else{ControlsPlugin.__super__.createFramework.call(this)}};ControlsPlugin.prototype.applyClickHandler=function(apply){if(apply==null){apply=true}this.player.getMediaElement().onclick=apply?this.clickHandler.bind(this):null};ControlsPlugin.prototype.clickHandler=function(event){this.sendNotification(UserNotifications.TOGGLE_PLAY_PAUSE,true)};ControlsPlugin.prototype.createController=function(){this.registerCommand(Notifications.PLAY,ControlsPlayCommand);this.registerCommand(Notifications.PAUSE,ControlsPauseCommand);this.registerCommand(Notifications.ACTIVE_STATE_CHANGE,ControlsActiveStateChangeCommand)};ControlsPlugin.prototype.createModel=function(){this.proxy=new ControlsProxy(this.config);this.registerProxy(this.proxy)};ControlsPlugin.prototype.createView=function(){this.registerMediator(new ControlsMediator())};ControlsPlugin.prototype.listNotificationInterests=function(){var key,value;return((function(){var _results;_results=[];for(key in PanelNotifications){value=PanelNotifications[key];_results.push(value)}return _results})()).concat([Notifications.MEDIA_CHANGE,Notifications.TIME_UPDATE,Notifications.DURATION_CHANGE,Notifications.PROGRESS,Notifications.ENDED,Notifications.ADD_CUE_POINTS,Notifications.REMOVE_CUE_POINTS,Notifications.DISABLE_FULL_SCREEN,Notifications.ENABLE_FULL_SCREEN,Notifications.READY,Notifications.ADD_CONTROL,Notifications.REMOVE_CONTROL,Notifications.ADD_CONTROL_STATE,Notifications.REMOVE_CONTROL_STATE,Notifications.ACTIVE_STATE_CHANGE,Notifications.PLAY,Notifications.PAUSE,AdNotifications.BREAK_START,AdNotifications.BREAK_END,Notifications.CHANGE_MEDIA,Notifications.DISPLAY_TIME,Notifications.MEDIA_VALIDATED,Notifications.STARTED])};ControlsPlugin.prototype.listNotificationPublications=function(){return ControlsPlugin.__super__.listNotificationPublications.call(this).concat([Notifications.CHANGE_ACTIVE_STATE,Notifications.TOGGLE_FULL_SCREEN,UserNotifications.SEEK,Notifications.TOGGLE_ACTIVE,UserNotifications.TOGGLE_PLAY_PAUSE])};ControlsPlugin.prototype.setMode=function(value){this.proxy.setMode(value);return value};ControlsPlugin.prototype.getMode=function(){return this.proxy.getMode()};ControlsPlugin.prototype.setAutoHide=function(value){this.proxy.setAutoHide(value);return value};ControlsPlugin.prototype.getAutoHide=function(){return this.proxy.getAutoHide()};AMP.registerPlugin("controls","html",ControlsPlugin);AMP.registerPlugin("controls","flash",ControlsWrapper);AMP.registerPlugin("controls","external",ControlsPlugin);function PlayerCommand(){PlayerCommand.__super__.constructor.call(this)}__extends(PlayerCommand,puremvc.SimpleCommand);PlayerCommand.prototype.applicationState=null;PlayerCommand.prototype.media=null;PlayerCommand.prototype.player=null;PlayerCommand.prototype.initializeNotifier=function(key){var target;PlayerCommand.__super__.initializeNotifier.call(this,key);target=this.facade.player||this.facade;this.applicationState=target.retrieveProxy(ApplicationStateProxy.NAME);this.media=target.retrieveProxy(MediaProxy.NAME);this.player=target};function AdCommand(){AdCommand.__super__.constructor.call(this)}__extends(AdCommand,PlayerCommand);AdCommand.prototype.ads=null;AdCommand.prototype.initializeNotifier=function(key){AdCommand.__super__.initializeNotifier.call(this,key);this.ads=this.facade.retrieveProxy(ModuleProxy.NAME)};function AdStartCommand(){AdStartCommand.__super__.constructor.call(this)}__extends(AdStartCommand,puremvc.MacroCommand);AdStartCommand.prototype.ads=null;AdStartCommand.prototype.initializeNotifier=function(key){AdStartCommand.__super__.initializeNotifier.call(this,key);this.ads=this.facade.retrieveProxy(AdProxy.NAME)};AdStartCommand.prototype.initializeMacroCommand=function(){this.addSubCommand(PlayRequestCommand)};AdStartCommand.prototype.execute=function(notification){var playback;AdStartCommand.__super__.execute.call(this,notification);playback=this.facade.player.retrieveProxy(PlaybackProxy.NAME);if(playback.initialized===false){this.facade.player.sendNotification(Notifications.INITIALIZED)}this.ads.start();this.facade.player.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.PLAYING)};function PluginCommand(){PluginCommand.__super__.constructor.call(this)}__extends(PluginCommand,puremvc.SimpleCommand);PluginCommand.prototype.config=null;PluginCommand.prototype.plugin=null;PluginCommand.prototype.initializeNotifier=function(key){PluginCommand.__super__.initializeNotifier.call(this,key);return this.config=this.plugin=this.facade.retrieveProxy(ModuleProxy.NAME)};function MediaAnalyticsAdBreakStartCommand(){MediaAnalyticsAdBreakStartCommand.__super__.constructor.call(this)}__extends(MediaAnalyticsAdBreakStartCommand,puremvc.SimpleCommand);MediaAnalyticsAdBreakStartCommand.prototype.execute=function(notification){this.facade.player.getMediaElement().dataset.isad=true};function MediaAnalyticsAdBreakEndCommand(){MediaAnalyticsAdBreakEndCommand.__super__.constructor.call(this)}__extends(MediaAnalyticsAdBreakEndCommand,puremvc.SimpleCommand);MediaAnalyticsAdBreakEndCommand.prototype.execute=function(notification){this.facade.player.getMediaElement().dataset.isad=false};function MediaAnalyticsAdLoadedCommand(){MediaAnalyticsAdLoadedCommand.__super__.constructor.call(this)}__extends(MediaAnalyticsAdLoadedCommand,puremvc.SimpleCommand);MediaAnalyticsAdLoadedCommand.prototype.execute=function(notification){var adObject,adVO;try{adVO=notification.getBody();adObject={adDuration:adVO.duration,adPartnerId:adVO.partner,adTitle:adVO.title,adId:adVO.id};if(typeof akamaiHandleAdLoaded==="function"){akamaiHandleAdLoaded(adObject)}}catch(error){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",error)}};function MediaAnalyticsAdStartCommand(){MediaAnalyticsAdStartCommand.__super__.constructor.call(this)}__extends(MediaAnalyticsAdStartCommand,PluginCommand);MediaAnalyticsAdStartCommand.prototype.execute=function(notification){try{if(typeof akamaiHandleAdStarted==="function"){akamaiHandleAdStarted()}}catch(error){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",error)}};function MediaAnalyticsAdTimeUpdateCommand(){MediaAnalyticsAdTimeUpdateCommand.__super__.constructor.call(this)}__extends(MediaAnalyticsAdTimeUpdateCommand,PluginCommand);MediaAnalyticsAdTimeUpdateCommand.prototype.execute=function(notification){var core,percent;core=notification.getBody();percent=Math.round(core.currentTime/core.duration*100);try{if(percent>=25&&this.config.percent<25){this.facade.logger.debug("MediaAnalytics: First Quartile");if(typeof akamaiHandleAdFirstQuartile==="function"){akamaiHandleAdFirstQuartile()}}else{if(percent>=50&&this.config.percent<50){this.facade.logger.debug("MediaAnalytics: Second Quartile");if(typeof akamaiHandleAdMidpoint==="function"){akamaiHandleAdMidpoint()}}else{if(percent>=75&&this.config.percent<75){this.facade.logger.debug("MediaAnalytics: Third Quartile");if(typeof akamaiHandleAdThirdQuartile==="function"){akamaiHandleAdThirdQuartile()}}}}}catch(error){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",error)}this.config.percent=percent};function MediaAnalyticsAdEndCommand(){MediaAnalyticsAdEndCommand.__super__.constructor.call(this)}__extends(MediaAnalyticsAdEndCommand,puremvc.SimpleCommand);MediaAnalyticsAdEndCommand.prototype.execute=function(notification){try{if(typeof akamaiHandleAdCompleted==="function"){akamaiHandleAdCompleted()}}catch(error){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",error)}this.facade.player.getMediaElement().dataset.isad=true};function MediaAnalyticsSetDimensionsCommand(){MediaAnalyticsSetDimensionsCommand.__super__.constructor.call(this)}__extends(MediaAnalyticsSetDimensionsCommand,PluginCommand);MediaAnalyticsSetDimensionsCommand.prototype.execute=function(notification){var dimensions;dimensions=notification.getBody();this.config.setDimensions(dimensions)};function MediaAnalyticsContentChangedCommand(){MediaAnalyticsContentChangedCommand.__super__.constructor.call(this)}__extends(MediaAnalyticsContentChangedCommand,PluginCommand);MediaAnalyticsContentChangedCommand.prototype.execute=function(notification){this.config.updatedMedia(notification.getBody())};function MediaAnalyticsChangeMediaCommand(){MediaAnalyticsChangeMediaCommand.__super__.constructor.call(this)}__extends(MediaAnalyticsChangeMediaCommand,PluginCommand);MediaAnalyticsChangeMediaCommand.prototype.execute=function(notification){var media;media=notification.getBody();this.config.setMedia(media)};function AdPlayCommand(){AdPlayCommand.__super__.constructor.call(this)}__extends(AdPlayCommand,AdCommand);AdPlayCommand.prototype.execute=function(notification){if(this.ads.getStarted()===false){this.sendNotification(Notifications.START,true);return}this.ads.play();this.facade.player.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.PLAYING)};function AdPauseCommand(){AdPauseCommand.__super__.constructor.call(this)}__extends(AdPauseCommand,AdCommand);AdPauseCommand.prototype.execute=function(notification){this.ads.pause();this.facade.player.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.PAUSED)};function AdTogglePlayPauseCommand(){AdTogglePlayPauseCommand.__super__.constructor.call(this)}__extends(AdTogglePlayPauseCommand,AdCommand);AdTogglePlayPauseCommand.prototype.execute=function(notification){var note;if(this.ads.getPaused()||this.ads.getStarted()===false){note=Notifications.PLAY}else{note=Notifications.PAUSE}this.sendNotification(note,true)};function AdVolumeChangeCommand(){AdVolumeChangeCommand.__super__.constructor.call(this)}__extends(AdVolumeChangeCommand,AdCommand);AdVolumeChangeCommand.prototype.execute=function(notification){this.ads.setVolume(notification.getBody())};function AdContentEndedCommand(){AdContentEndedCommand.__super__.constructor.call(this)}__extends(AdContentEndedCommand,AdCommand);AdContentEndedCommand.prototype.execute=function(notification){this.ads.contentEnded()};function AdContentStartedCommand(){AdContentStartedCommand.__super__.constructor.call(this)}__extends(AdContentStartedCommand,AdCommand);AdContentStartedCommand.prototype.execute=function(notification){this.ads.contentStarted()};function MediaAnalyticsWrapper(player,config){MediaAnalyticsWrapper.__super__.constructor.call(this,player,config)}__extends(MediaAnalyticsWrapper,PluginWrapper);MediaAnalyticsWrapper.NAME="MediaAnalyticsWrapper";MediaAnalyticsWrapper.prototype.listNotificationInterests=function(){return MediaAnalyticsWrapper.__super__.listNotificationInterests.call(this).concat([Notifications.MEDIA_CHANGE,MediaAnalyticsNotifications.SET_DIMENSIONS])};MediaAnalyticsWrapper.prototype.createFlashVars=function(flashvars){var dimensions,key,value,_ref,_ref1;dimensions=(_ref=this.player.config)!=null?(_ref1=_ref.media)!=null?_ref1.mediaanalytics:void 0:void 0;if(dimensions!=null){for(key in dimensions){value=dimensions[key];flashvars["report_"+key]=value}}return flashvars};MediaAnalyticsWrapper.prototype.createXML=function(xml){var application,dimensions,element,key,metrics,path,value,vendor,_ref,_ref1;application=xml.firstChild;metrics=xml.getElementsByTagName("metrics")[0];if(!(metrics!=null)){metrics=xml.createElement("metrics");application.appendChild(metrics)}vendor=xml.createElement("vendor");vendor.setAttribute("id","akamai");metrics.appendChild(vendor);if(this.config.config!=null){element=xml.createElement("property");element.setAttribute("key","MEDIA_ANALYTICS_BEACON");element.appendChild(XMLUtils.createTextContent(xml,this.config.config));vendor.appendChild(element);path=((_ref=this.config.plugin)!=null?_ref.swf:void 0)||"http://79423.analytics.edgesuite.net/csma/plugin/csma.swf";element=xml.createElement("property");element.setAttribute("key","MEDIA_ANALYTICS_PLUGIN_PATH");element.appendChild(XMLUtils.createTextContent(xml,path));vendor.appendChild(element)}if(this.config.dimensions!=null){dimensions=xml.createElement("property");dimensions.setAttribute("key","dimensions");vendor.appendChild(dimensions);_ref1=this.config.dimensions;for(key in _ref1){value=_ref1[key];element=xml.createElement("property");element.setAttribute("key",key);element.appendChild(XMLUtils.createTextContent(xml,value));dimensions.appendChild(element)}}return xml};MediaAnalyticsWrapper.prototype.handleNotification=function(notification){var body,key,media,name,value,_ref,_ref1;MediaAnalyticsWrapper.__super__.handleNotification.call(this,notification);name=notification.getName();body=notification.getBody();switch(name){case Notifications.MEDIA_CHANGE:media=body;if(((_ref=media.mediaanalytics)!=null?_ref.dimensions:void 0)!=null){media.dimensions=[];_ref1=media.mediaanalytics.dimensions;for(key in _ref1){value=_ref1[key];media.dimensions.push({key:key,value:value})}}break;case MediaAnalyticsNotifications.SET_DIMENSIONS:this.setDimensions(body)}};MediaAnalyticsWrapper.prototype.setDimensions=function(value){this.player.mediaElement.setPlayerProperty("maDimensions",value);return value};var IMANotifications={INITIALIZED:"ima/initialize",ADD_OVERLAY:"ima/addOverlay",REMOVE_OVERLAY:"ima/removeOverlay"};function AdVO(id,title,duration,position,type,partner,advertiser,companions,request,metadata,totalAds){this.id=id;this.title=title;this.duration=duration;this.position=position;this.type=type;this.partner=partner;this.advertiser=advertiser;this.companions=companions;this.request=request;this.metadata=metadata;this.totalAds=totalAds}AdVO.prototype.id=null;AdVO.prototype.title=null;AdVO.prototype.duration=NaN;AdVO.prototype.position=NaN;AdVO.prototype.totalAds=NaN;AdVO.prototype.type=null;AdVO.prototype.partner=null;AdVO.prototype.advertiser=null;AdVO.prototype.companions=null;AdVO.prototype.metadata=null;AdVO.prototype.request=null;AdVO.prototype.error=null;function IMAOverlayProxy(config){IMAOverlayProxy.__super__.constructor.call(this,config)}__extends(IMAOverlayProxy,DataBoundConfigurationProxy);IMAOverlayProxy.prototype.configurationName="imaoverlay";IMAOverlayProxy.NAME="IMAOveralyProxy";IMAOverlayProxy.prototype.defaults={adTagUrl:null,duration:15,interval:30,delay:30};IMAOverlayProxy.prototype.durationTimer=null;IMAOverlayProxy.prototype.intervalTimer=null;IMAOverlayProxy.prototype.delayTimer=null;IMAOverlayProxy.prototype.stop=function(){clearTimeout(this.durationTimer);clearTimeout(this.delayTimer);clearTimeout(this.intervalTimer)};IMAOverlayProxy.prototype.play=function(){var _this=this;this.stop();this.delayTimer=setTimeout(function(){return _this.requestAd()},this.value.delay*1000)};IMAOverlayProxy.prototype.requestAd=function(){var adTagUrl,xhr;adTagUrl=this.getValue("adTagUrl");if(adTagUrl!=null){adTagUrl=adTagUrl.replace("[timestamp]",new Date().getTime());adTagUrl=adTagUrl.replace("__random-number__",new Date().getTime())}xhr=Utils.get(adTagUrl,{withCredentials:true,onload:this.vastLoadHandler.bind(this),onerror:this.error.bind(this)},false)};IMAOverlayProxy.prototype.vastLoadHandler=function(xhr){var ad,clickThroughHref,creativeView,img,impression,xml;xml=xhr.target.responseXML;if(xml!=null){try{ad=xml.querySelector("NonLinear");if(ad!=null){impression=xml.querySelector("Impression")!=null?xml.querySelector("Impression").textContent:"";creativeView=xml.querySelector("Tracking[event=creativeView]")!=null?xml.querySelector("Tracking[event=creativeView]").textContent:"";clickThroughHref=ad.querySelector("NonLinearClickThrough")!=null?ad.querySelector("NonLinearClickThrough").textContent:"";img={src:ad.querySelector("StaticResource").textContent,width:ad.getAttribute("width"),height:ad.getAttribute("height"),tracking:[impression,creativeView],href:clickThroughHref};this.displayAd(img)}else{this.error("No overlay was returned")}}catch(error){this.error(error)}}};IMAOverlayProxy.prototype.error=function(error){this.facade.logger.error("[AMP IMA OVERLAY ERROR]",error);this.stop()};IMAOverlayProxy.prototype.displayAd=function(ad){var _this=this;this.sendNotification(IMANotifications.ADD_OVERLAY,ad);this.durationTimer=setTimeout(function(){_this.sendNotification(IMANotifications.REMOVE_OVERLAY);return _this.intervalTimer=setTimeout(function(){return _this.requestAd()},_this.value.interval*1000)},this.value.duration*1000)};function AdProxy(config){AdProxy.__super__.constructor.call(this,config)}__extends(AdProxy,PluginProxy);AdProxy.NAME=PluginProxy.NAME;AdProxy.prototype.inprogress=false;AdProxy.prototype.paused=false;AdProxy.prototype.started=false;AdProxy.prototype.adVO=null;AdProxy.prototype.contextName="ad";AdProxy.prototype.getContextData=function(){return this.adVO||{}};AdProxy.prototype.setCompanions=function(value){this.adVO.companions=value;this.sendNotification(AdNotifications.AD_COMPANION,this.adVO);return value};AdProxy.prototype.getCompanions=function(){var _ref;return(_ref=this.adVO)!=null?_ref.companions:void 0};AdProxy.prototype.getInProgress=function(){return this.inprogress};AdProxy.prototype.setInProgress=function(value){return this.inprogress=value};AdProxy.prototype.getStarted=function(){return this.started};AdProxy.prototype.setStarted=function(value){this.started=value;return value};AdProxy.prototype.getPaused=function(){return this.paused};AdProxy.prototype.setPaused=function(value){this.paused=value;return value};AdProxy.prototype.play=function(){this.setPaused(false);this.sendNotification(AdNotifications.AD_PLAY,this.adVO)};AdProxy.prototype.pause=function(){this.setPaused(true);this.sendNotification(AdNotifications.AD_PAUSE,this.adVO)};AdProxy.prototype.breakStart=function(){};AdProxy.prototype.breakEnd=function(){this.setInProgress(false);this.reset()};AdProxy.prototype.error=function(err,breakEnd){var msg;if(breakEnd==null){breakEnd=true}msg=(typeof err.getMessage==="function"?err.getMessage():void 0)||err.message;this.facade.logger.error("[AMP AD ERROR]",""+msg+" Skipping ad content.",err);if(this.adVO==null){this.adVO={}}this.adVO.error=err;this.sendNotification(AdNotifications.AD_ERROR,this.adVO);if(breakEnd===true){this.sendNotification(AdNotifications.BREAK_END)}};AdProxy.prototype.engage=function(media){if(this.getEnabled()===false){return}this.setStarted(false);if(this.getInProgress()){this.reset();this.facade.player.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"ad-mode")}this.engageAds()};AdProxy.prototype.engageAds=function(){this.facade.player.removeCommand(Notifications.START);this.facade.player.removeCommand(Notifications.PLAY);this.facade.player.removeCommand(Notifications.PAUSE);this.facade.player.removeCommand(Notifications.ENDED);this.facade.player.removeCommand(UserNotifications.PLAY);this.facade.player.removeCommand(UserNotifications.PAUSE);this.facade.player.removeCommand(UserNotifications.TOGGLE_PLAY_PAUSE);if(this.facade.isFullscreenDevice()){this.facade.player.removeCommand(Notifications.CHANGE_DURATION)}this.facade.removeCommand(Notifications.STARTED);this.facade.removeCommand(Notifications.ENDED);this.facade.registerCommand(Notifications.START,AdStartCommand);this.facade.registerCommand(Notifications.PLAY,AdPlayCommand);this.facade.registerCommand(Notifications.PAUSE,AdPauseCommand);this.facade.registerCommand(UserNotifications.PLAY,AdPlayCommand);this.facade.registerCommand(UserNotifications.PAUSE,AdPauseCommand);this.facade.registerCommand(UserNotifications.TOGGLE_PLAY_PAUSE,AdTogglePlayPauseCommand);this.facade.registerCommand(Notifications.VOLUME_CHANGE,AdVolumeChangeCommand)};AdProxy.prototype.reset=function(){this.facade.removeCommand(Notifications.START);this.facade.removeCommand(Notifications.PLAY);this.facade.removeCommand(Notifications.PAUSE);this.facade.removeCommand(UserNotifications.PLAY);this.facade.removeCommand(UserNotifications.PAUSE);this.facade.removeCommand(UserNotifications.TOGGLE_PLAY_PAUSE);this.facade.removeCommand(Notifications.VOLUME_CHANGE);this.facade.player.registerCommand(Notifications.START,StartCommand);this.facade.player.registerCommand(Notifications.PLAY,PlayCommand);this.facade.player.registerCommand(Notifications.PAUSE,PauseCommand);this.facade.player.registerCommand(Notifications.ENDED,EndedCommand);this.facade.player.registerCommand(UserNotifications.PLAY,PlayCommand);this.facade.player.registerCommand(UserNotifications.PAUSE,PauseCommand);this.facade.player.registerCommand(UserNotifications.TOGGLE_PLAY_PAUSE,TogglePlayPauseCommand);if(this.facade.isFullscreenDevice()){this.facade.player.registerCommand(Notifications.CHANGE_DURATION,ChangeDurationCommand)}this.facade.registerCommand(Notifications.STARTED,AdContentStartedCommand);this.facade.registerCommand(Notifications.ENDED,AdContentEndedCommand)};AdProxy.prototype.start=function(){if(this.getEnabled()===false){this.sendNotification(AdNotifications.BREAK_END);return false}this.setStarted(true);return true};AdProxy.prototype.contentPlay=function(){this.facade.player.sendNotification(Notifications.PLAY,true)};AdProxy.prototype.contentPause=function(){this.facade.player.mediaElement.pause()};AdProxy.prototype.contentStarted=function(){};AdProxy.prototype.contentSeek=function(time){};AdProxy.prototype.contentEnded=function(){};AdProxy.prototype.setVolume=function(value){};AdProxy.prototype.getVolume=function(){};AdProxy.prototype.terminateAd=function(){};AdProxy.prototype.terminateAllAds=function(){};function IMAProxy(config){IMAProxy.__super__.constructor.call(this,config);this.intervals=[];this.loadedmetadata=this.onLoadedMetadata.bind(this)}__extends(IMAProxy,AdProxy);IMAProxy.NAME=AdProxy.NAME;IMAProxy.prototype.defaults={adTagUrl:null,overlay:null,width:null,height:null,maxBitrate:-1,ppid:null,companions:null};IMAProxy.prototype.key="ima";IMAProxy.prototype.intervals=null;IMAProxy.prototype.adDisplayContainer=null;IMAProxy.prototype.adDisplayContainerInitialized=false;IMAProxy.prototype.adsLoader=null;IMAProxy.prototype.adsRenderingSettings=null;IMAProxy.prototype.adsManagerLoaded=false;IMAProxy.prototype.adsManager=null;IMAProxy.prototype.cuepoints=null;IMAProxy.prototype.adLoaded=false;IMAProxy.prototype.playWhenLoaded=false;IMAProxy.prototype.contentHasEnded=false;IMAProxy.prototype.adTagUrl=null;IMAProxy.prototype.viewMode=null;IMAProxy.prototype.playbackCore=null;IMAProxy.prototype.loadedmetadata=null;IMAProxy.prototype.setEnabled=function(value){var _ref;IMAProxy.__super__.setEnabled.call(this,value);if(value===false){if((_ref=this.adsManager)!=null){if(typeof _ref.destroy==="function"){_ref.destroy()}}if(this.getInProgress()){this.contentPlay()}}return value};IMAProxy.prototype.onLoadedMetadata=function(event){event.target.removeEventListener("loadedmetadata",this.loadedmetadata);if(this.canPlay()&&this.playWhenLoaded===true){this.startAd()}};IMAProxy.prototype.initialize=function(){this.facade.player.getViewComponent().addEventListener("resize",this.resize.bind(this))};IMAProxy.prototype.ready=function(){this.viewMode=google.ima.ViewMode.NORMAL;this.facade.player.getViewComponent().addEventListener("resize",this.resize.bind(this));if(this.config.vpaidAllowed!=null){google.ima.settings.setVpaidAllowed(this.config.vpaidAllowed)}this.adDisplayContainer=this.createPlugin();this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer);this.adsRenderingSettings=new google.ima.AdsRenderingSettings();this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),false);this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this),false)};IMAProxy.prototype.createPlugin=function(){return new google.ima.AdDisplayContainer(this.facade.getViewComponent().container)};IMAProxy.prototype.engage=function(override){var _ref;if(override==null){override=true}if(this.getEnabled()===false){return}IMAProxy.__super__.engage.call(this);if(this.adsManagerLoaded===true&&this.contentHasEnded===false){if((_ref=this.adsManager)!=null){if(typeof _ref.destroy==="function"){_ref.destroy()}}}this.adsManagerLoaded=false;this.contentHasEnded=false;this.adsManagerLoaded=false;this.playWhenLoaded=false};IMAProxy.prototype.setVolume=function(value){var _ref;if((_ref=this.adsManager)!=null){_ref.setVolume(value)}return value};IMAProxy.prototype.getVolume=function(){var _ref;return(_ref=this.adsManager)!=null?_ref.getVolume():void 0};IMAProxy.prototype.requestAd=function(){var adsRequest,adsResponse,height,settings,width,_ref,_ref1;this.sendNotification(AdNotifications.REQUEST,this.adVO);width=this.facade.player.getViewComponent().clientWidth;height=this.facade.player.getViewComponent().clientHeight;adsRequest=new google.ima.AdsRequest();this.adTagUrl=this.getValue("adTagUrl");adsResponse=this.getValue("adsResponse");if((adsResponse!=null)&&adsResponse!==""){adsRequest.adsResponse=Utils.read(adsResponse,null,Utils.mimeTypes.txt)}else{adsRequest.adTagUrl=this.adTagUrl}if(!(adsRequest.adsResponse!=null)&&!(adsRequest.adTagUrl!=null)){this.onAdError("No valid adTagUrl or adsResponse provided.");return}adsRequest.linearAdSlotWidth=width;adsRequest.linearAdSlotHeight=height;adsRequest.nonLinearAdSlotWidth=((_ref=this.value.overlay)!=null?_ref.width:void 0)||width;adsRequest.nonLinearAdSlotHeight=((_ref1=this.value.overlay)!=null?_ref1.height:void 0)||height;settings=this.adsLoader.getSettings();if(this.config.ppid!=null){settings.setPpid(this.getValue("ppid"))}this.adsLoader.requestAds(adsRequest)};IMAProxy.prototype.requestOverlay=function(){var adsRequest,overlay;overlay=this.value.overlay;if(!(overlay!=null)){return}adsRequest=new google.ima.AdsRequest();adsRequest.adTagUrl=overlay.adTagUrl;adsRequest.nonLinearAdSlotWidth=overlay.width||300;adsRequest.nonLinearAdSlotHeight=overlay.height||50;this.adsLoader.requestAds(adsRequest)};IMAProxy.prototype.start=function(){var video;this.playbackCore=this.facade.player.retrieveProxy(PlayerProxy.NAME).getActivePlaybackCore();video=this.facade.player.getMediaElement();this.playbackCore.setEnabled(false);video.src=this.playbackCore.getSrc();video.addEventListener("loadedmetadata",this.loadedmetadata);video.load();if(IMAProxy.__super__.start.call(this)===false){return false}if(this.adDisplayContainerInitialized!==true){this.adDisplayContainer.initialize();this.adDisplayContainerInitialized=true}if(this.canPlay()===true){this.startAd()}else{this.playWhenLoaded=true;this.requestAd()}};IMAProxy.prototype.canPlay=function(){return this.adsManagerLoaded===true};IMAProxy.prototype.startAd=function(){var volume;this.playWhenLoaded=false;try{volume=this.facade.player.retrieveProxy(PlaybackProxy.NAME).getVolume();this.setVolume(volume);if(this.viewMode==null){this.viewMode=google.ima.ViewMode.NORMAL}this.adsManager.init(this.facade.player.getViewComponent().clientWidth,this.facade.player.getViewComponent().clientHeight,this.viewMode);this.adsManager.start()}catch(adError){this.error(adError)}};IMAProxy.prototype.resize=function(state){var _ref;if(state!=null){this.viewMode=state===DisplayState.FULL_SCREEN?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL}if((_ref=this.adsManager)!=null){_ref.resize(this.facade.player.getViewComponent().clientWidth,this.facade.player.getViewComponent().clientHeight,this.viewMode)}};IMAProxy.prototype.onAdsManagerLoaded=function(adsManagerLoadedEvent){var adEventHandler,_ref;this.adsRenderingSettings.bitrate=this.getValue("maxBitrate");this.adsRenderingSettings.autoAlign=true;this.adsRenderingSettings.useStyledNonLinearAds=true;if((_ref=this.adsManager)!=null){if(typeof _ref.destroy==="function"){_ref.destroy()}}this.adsManager=adsManagerLoadedEvent.getAdsManager(this.facade.player.mediaElement,this.adsRenderingSettings);this.adsManagerLoaded=true;this.cuePoints=this.adsManager.getCuePoints();this.facade.player.sendNotification(Notifications.ADD_CUE_POINTS,this.cuePoints);adEventHandler=this.onAdEvent.bind(this);this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.contentPause.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.contentPlay.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,adEventHandler);this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,adEventHandler);this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,adEventHandler);this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUME,this.onAdResumed.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,adEventHandler);this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,this.onAdClick.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,adEventHandler);this.adsManager.addEventListener(google.ima.AdEvent.Type.MIDPOINT,adEventHandler);this.adsManager.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,adEventHandler);this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,adEventHandler);if(this.canPlay()&&this.playWhenLoaded===true){this.startAd()}};IMAProxy.prototype.onAdClick=function(adEvent){if((adEvent!=null?adEvent.getAd().isLinear():void 0)===false){this.facade.player.sendNotification(Notifications.PAUSE);return}if(!this.getPaused()){this.pause()}};IMAProxy.prototype.onAdPaused=function(adEvent){this.setPaused(true);this.facade.player.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.PAUSED);this.facade.player.sendNotification(Notifications.CHANGE_ACTIVE_STATE,ActiveState.ACTIVE);this.facade.player.sendNotification(AdNotifications.AD_PAUSED,this.adVO)};IMAProxy.prototype.onAdResumed=function(adEvent){this.setPaused(false);this.facade.player.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.PLAYING)};IMAProxy.prototype.onAdEvent=function(adEvent){var ad,companion,companions,pos,type,_i,_len,_ref;ad=adEvent.getAd();if(this.adVO!=null){if(ad!=null){ad.wrapperAdIds=typeof ad.getWrapperAdIds==="function"?ad.getWrapperAdIds():void 0;ad.wrapperAdSystems=typeof ad.getWrapperAdSystems==="function"?ad.getWrapperAdSystems():void 0}this.adVO.metadata=ad}switch(adEvent.type){case google.ima.AdEvent.Type.LOADED:if(ad.isLinear()){pos=ad.getAdPodInfo().getPodIndex();type=pos===0?"preroll":pos===-1?"postroll":"midroll";this.adVO=new AdVO(ad.getAdId(),ad.getAdId(),ad.getDuration(),pos,type,"ima",null,null,this.adTagUrl,ad,ad.getAdPodInfo().getTotalAds());this.sendNotification(AdNotifications.AD_LOADED,this.adVO);this.sendNotification(AdNotifications.AD_DURATION_CHANGE,this.adVO);if(type==="midroll"||type==="postroll"){this.engageAds()}}else{this.facade.player.sendNotification(Notifications.ADD_APPLICATION_STATE,"ad-overlaymode");this.contentPlay()}break;case google.ima.AdEvent.Type.STARTED:if(ad.isLinear()){this.setInProgress(true);this.adVO.position=ad.getAdPodInfo().getAdPosition();this.sendNotification(AdNotifications.AD_STARTED,this.adVO);this.intervals.push(setInterval(this.onAdTimeUpdate.bind(this),300));this.facade.player.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.PLAYING);this.sendNotification(AdNotifications.AD_PLAY,this.adVO)}try{companions=[];_ref=this.getConfigurationData().companions;for(_i=0,_len=_ref.length;_i<_len;_i++){companion=_ref[_i];companions=companions.concat(ad.getCompanionAds(companion.width,companion.height))}if((companions!=null?companions.length:void 0)>0){this.setCompanions(companions)}}catch(error){this.facade.logger.error("[AMP IMA ERROR]","Could not retrieve companion ads:",error)}break;case google.ima.AdEvent.Type.COMPLETE:if(ad.isLinear()){this.sendNotification(AdNotifications.AD_ENDED,this.adVO)}break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.sendNotification(AdNotifications.FIRST_QUARTILE,this.adVO);break;case google.ima.AdEvent.Type.MIDPOINT:this.sendNotification(AdNotifications.MIDPOINT,this.adVO);break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.sendNotification(AdNotifications.THIRD_QUARTILE,this.adVO);break;case google.ima.AdEvent.Type.LOG:this.sendNotification(AdNotifications.LOG,this.adVO)}};IMAProxy.prototype.onAdTimeUpdate=function(adErrorEvent){this.sendNotification(AdNotifications.AD_TIME_REMAINING,this.adsManager.getRemainingTime())};IMAProxy.prototype.onAdError=function(adErrorEvent){var error;error=(adErrorEvent!=null?adErrorEvent.getError():void 0)||adErrorEvent;this.error(error);this.contentPlay()};IMAProxy.prototype.play=function(){var _ref;IMAProxy.__super__.play.call(this);try{if((_ref=this.adsManager)!=null){_ref.resume()}this.sendNotification(AdNotifications.AD_RESUME)}catch(error){this.facade.logger.error("[AMP IMA ERROR]","resume",error)}};IMAProxy.prototype.pause=function(){IMAProxy.__super__.pause.call(this);try{this.adsManager.pause()}catch(error){this.facade.logger.error("[AMP IMA ERROR]","pause",error)}};IMAProxy.prototype.breakEnd=function(){var interval,overlayProxy,_i,_len,_ref;_ref=this.intervals;for(_i=0,_len=_ref.length;_i<_len;_i++){interval=_ref[_i];clearInterval(this.intervals.pop())}IMAProxy.__super__.breakEnd.call(this);overlayProxy=this.facade.retrieveProxy(IMAOverlayProxy.NAME);if(overlayProxy!=null){overlayProxy.play()}};IMAProxy.prototype.setCompanions=function(value){var companion,companions,_i,_len,_ref;companions=[];for(_i=0,_len=value.length;_i<_len;_i++){companion=value[_i];companions.push({data:companion.getContent(),type:(_ref=companion.getContentType())!=null?_ref.toLowerCase():void 0,width:companion.getWidth(),height:companion.getHeight(),metadata:companion})}IMAProxy.__super__.setCompanions.call(this,companions);return value};IMAProxy.prototype.contentPause=function(){this.sendNotification(Notifications.DISABLE_VIDEO_EVENTS,["paused","ended","durationchange","error"]);IMAProxy.__super__.contentPause.call(this);this.sendNotification(AdNotifications.BREAK_START,this.adVO)};IMAProxy.prototype.contentPlay=function(){var _ref,_ref1;this.sendNotification(Notifications.ENABLE_VIDEO_EVENTS,["paused","ended","durationchange","error"]);this.sendNotification(AdNotifications.BREAK_END,this.adVO);if(((_ref=this.adVO)!=null?_ref.type:void 0)==="midroll"&&Utils.getDevice()==="desktop"){this.facade.player.setCurrentTime(Math.floor(this.facade.player.getCurrentTime()))}if(((_ref1=this.adVO)!=null?_ref1.type:void 0)==="postroll"){this.facade.player.sendNotification(Notifications.ENDED);return}IMAProxy.__super__.contentPlay.call(this)};IMAProxy.prototype.contentEnded=function(){var _ref;this.contentHasEnded=true;try{if((_ref=this.adsLoader)!=null){if(typeof _ref.contentComplete==="function"){_ref.contentComplete()}}}catch(error){this.facade.logger.error("[AMP IMA ERROR]","contentComplete",error)}};IMAProxy.prototype.terminateAd=function(){var _ref;try{if((_ref=this.adsManager)!=null){_ref.stop()}}catch(error){this.facade.logger.error("[AMP IMA ERROR]","terminateAd",error)}this.breakEnd();this.contentPlay()};IMAProxy.prototype.terminateAllAds=function(){var _ref;try{if((_ref=this.adsManager)!=null){_ref.destroy()}}catch(error){this.facade.logger.error("[AMP IMA ERROR]","terminateAllAds",error)}this.breakEnd();this.contentPlay()};function MediaAnalyticsProxy(config){MediaAnalyticsProxy.__super__.constructor.call(this,config)}__extends(MediaAnalyticsProxy,PluginProxy);MediaAnalyticsProxy.NAME=ModuleProxy.NAME;MediaAnalyticsProxy.prototype.defaults={config:null,dimensions:null};MediaAnalyticsProxy.prototype.ready=function(){try{window.akamaiSetVideoObject(this.facade.player.getMediaElement())}catch(error){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set video tag",error)}};MediaAnalyticsProxy.prototype.setDimensions=function(value){var dimensions,key,val;dimensions=this.configurationData.source.dimensions;for(key in value){val=value[key];if(val!=null){dimensions[key]=val}}this.configurationData.parse(this.configurationData.source);this.applyDimensions(dimensions);return value};MediaAnalyticsProxy.prototype.applyDimensions=function(dimensions){var key,value;if(!(window.setAkamaiMediaAnalyticsData!=null)){return}try{for(key in dimensions){value=dimensions[key];setAkamaiMediaAnalyticsData(key,value)}}catch(error){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set dimensions:",error)}};MediaAnalyticsProxy.prototype.setMedia=function(media){var dimensions,_ref;if(((_ref=media.mediaanalytics)!=null?_ref.dimensions:void 0)!=null){dimensions=Utils.override(this.value.dimensions,media.mediaanalytics.dimensions)}else{dimensions=this.value.dimensions}this.applyDimensions(dimensions);return media};MediaAnalyticsProxy.prototype.udpateMedia=function(media){if(typeof akamaiHandleTitleSwitch==="function"){akamaiHandleTitleSwitch(media)}return media};function MediaAnalyticsReadyCommand(){MediaAnalyticsReadyCommand.__super__.constructor.call(this)}__extends(MediaAnalyticsReadyCommand,puremvc.SimpleCommand);MediaAnalyticsReadyCommand.prototype.execute=function(notification){this.facade.retrieveProxy(MediaAnalyticsProxy.NAME).ready()};function PlayOverlayPlugin(){PlayOverlayPlugin.__super__.constructor.call(this)}__extends(PlayOverlayPlugin,Plugin);PlayOverlayPlugin.prototype.moduleName="playoverlay";PlayOverlayPlugin.prototype.createModel=function(){};PlayOverlayPlugin.prototype.createView=function(){this.registerMediator(new PlayOverlayMediator())};PlayOverlayPlugin.prototype.listNotificationPublications=function(){return PlayOverlayPlugin.__super__.listNotificationPublications.call(this).concat([UserNotifications.TOGGLE_PLAY_PAUSE])};AMP.registerPlugin("playoverlay","html",PlayOverlayPlugin);AMP.registerPlugin("playoverlay","external",PlayOverlayPlugin);var EventManagementNotifications={EVENT_STATE_CHANGED:"eventStateChanged"};function Poller(url,interval,type,headers){this.url=url;this.interval=interval!=null?interval:10000;this.type=type!=null?type:null;this.headers=headers!=null?headers:null;Poller.__super__.constructor.call(this)}__extends(Poller,EventDispatcher);Poller.prototype.timeout=null;Poller.prototype.interval=null;Poller.prototype.url=null;Poller.prototype.lastModified=null;Poller.prototype.contentLenght=null;Poller.prototype.data=null;Poller.prototype.text=null;Poller.prototype.type=null;Poller.prototype.headers=null;Poller.prototype.useHeadRequest=true;Poller.prototype.xhr=null;Poller.prototype.start=function(){if((this.url!=null)&&this.url!==""){this.poll()}};Poller.prototype.poll=function(){var xhr,_this=this;xhr=Utils.getXHR();if(!this.useHeadRequest){this.updateData()}else{xhr.onload=function(event){var contentLength,lastModified;if(xhr.status===304){_this.invoke();return}lastModified=xhr.getResponseHeader("Last-Modified");contentLength=xhr.getResponseHeader("Content-Length");if((!(lastModified!=null)&&!(contentLength!=null))||((lastModified!=null)&&lastModified!==_this.lastModified)||((contentLength!=null)&&contentLength!==_this.contentLength)){_this.lastModified=lastModified;_this.contentLength=contentLength;_this.updateData()}else{_this.invoke()}};xhr.onerror=function(event){_this.error(event)};xhr.open("HEAD",Utils.cacheBust(this.url),false);this.applyHeaders();if(this.lastModified!=null){xhr.setRequestHeader("If-Modified-Since",this.lastModified)}xhr.send()}};Poller.prototype.applyHeaders=function(){if(!(this.headers!=null)){return}this.xhr.setRequestHeaders(this.headers)};Poller.prototype.updateData=function(){var xhr,_this=this;xhr=Utils.getXHR();xhr.open("GET",Utils.cacheBust(this.url),true);xhr.onload=function(event){var text;text=xhr.responseText;_this.setText(text);_this.invoke()};xhr.onerror=function(event){_this.error(event)};this.applyHeaders();return xhr.send()};Poller.prototype.setText=function(value){var data;if(value!==this.text){this.text=value;data=this.text;if(this.type===Utils.mimeTypes.json){try{data=this.xhr.response}catch(error){data=this.text}}this.setData(data)}return value};Poller.prototype.setData=function(value){if(value!==this.data){this.data=value;this.dispatchEvent(new Event("datachanged",this.data))}return value};Poller.prototype.error=function(error){Logger.error(event);this.stop()};Poller.prototype.invoke=function(){var _this=this;this.stop();this.timeout=setTimeout(function(){_this.poll()},this.interval)};Poller.prototype.stop=function(){clearTimeout(this.timeout)};function EventManagementWrapper(){return EventManagementWrapper.__super__.constructor.apply(this,arguments)}__extends(EventManagementWrapper,PluginWrapper);EventManagementWrapper.NAME="EventManagementWrapper";EventManagementWrapper.prototype.createFlashVars=function(flashvars){if(this.config.enabled!=null){flashvars.eventmanagementstates_enabled=this.config.enabled}if(this.config.url!=null){flashvars.eventmanagementstates_status_url=this.config.url}if(this.config.interval!=null){flashvars.eventmanagementstates_status_interval=this.config.interval}return flashvars};EventManagementWrapper.prototype.createXML=function(xml){var application,eventmanagementstates,node,property,state,states,_i,_len,_ref;application=xml.firstChild;eventmanagementstates=xml.getElementsByTagName("eventmanagementstates");if(!(eventmanagementstates!=null)||eventmanagementstates.length===0){eventmanagementstates=xml.createElement("eventmanagementstates");application.appendChild(eventmanagementstates)}else{eventmanagementstates=eventmanagementstates[0]}states=xml.createElement("states");eventmanagementstates.appendChild(states);_ref=this.config.states;for(_i=0,_len=_ref.length;_i<_len;_i++){state=_ref[_i];node=xml.createElement("state");states.appendChild(node);property=xml.createElement("property");property.setAttribute("key","ID");property.appendChild(XMLUtils.createTextContent(xml,state.id));node.appendChild(property);property=xml.createElement("property");property.setAttribute("key","POSTER_SRC");property.appendChild(XMLUtils.createTextContent(xml,state.poster));node.appendChild(property);if(state.url!=null){property=xml.createElement("property");property.setAttribute("key","URL");property.appendChild(XMLUtils.createTextContent(xml,state.url));node.appendChild(property)}}return xml};function EventManagementMediator(){EventManagementMediator.__super__.constructor.call(this)}__extends(EventManagementMediator,OverlayMediator);EventManagementMediator.prototype.componentName="event-management";EventManagementMediator.prototype.poster=null;EventManagementMediator.prototype.onRegister=function(){this.classList.add("hidden");this.poster=this.create("event-poster",false,"img");EventManagementMediator.__super__.onRegister.call(this)};EventManagementMediator.prototype.listNotificationInterests=function(){return[EventManagementNotifications.EVENT_STATE_CHANGED]};EventManagementMediator.prototype.handleNotification=function(notification){var state;switch(notification.getName()){case EventManagementNotifications.EVENT_STATE_CHANGED:state=notification.getBody();if(state.id!=="on"){if(state.poster!=null){this.poster.src=state.poster;this.viewComponent.appendChild(this.poster)}this.classList.remove("hidden");this.sendNotification(Notifications.PAUSE);this.sendNotification(Notifications.CHANGE_DISPLAY_STATE,DisplayState.NORMAL)}else{if(this.viewComponent.contains(this.poster)){this.viewComponent.removeChild(this.poster)}this.classList.add("hidden")}}};function EventManagementPlayCommand(){EventManagementPlayCommand.__super__.constructor.call(this)}__extends(EventManagementPlayCommand,puremvc.SimpleCommand);EventManagementPlayCommand.prototype.execute=function(notification){var eventManagementProxy,_ref;eventManagementProxy=this.facade.retrieveProxy(EventManagementProxy.NAME);if(((_ref=eventManagementProxy.getState())!=null?_ref.id:void 0)!==EventManagementProxy.ON.id){this.sendNotification(Notifications.PAUSE)}};function EventManagementProxy(config){var _this=this;EventManagementProxy.__super__.constructor.call(this,config);this.poller=new Poller();this.poller.ondatachanged=function(event){var id,state,_i,_len,_ref;id=event.detail;if(id==="on"){state=EventManagementProxy.ON}else{_ref=_this.data.states;for(_i=0,_len=_ref.length;_i<_len;_i++){state=_ref[_i];if(state.id===id){break}}}if(state!=null){return _this.setState(state)}}}__extends(EventManagementProxy,ModuleProxy);EventManagementProxy.NAME=ModuleProxy.NAME;EventManagementProxy.ON={id:"on"};EventManagementProxy.prototype.defaults={url:null,interval:null,states:null,enabled:false};EventManagementProxy.prototype.poller=null;EventManagementProxy.prototype.state=null;EventManagementProxy.prototype.initialize=function(){if(this.data.enabled===true){this.setURL(this.data.url);this.setInterval(this.data.interval);this.poller.start()}};EventManagementProxy.prototype.setURL=function(value){this.data.url=this.poller.url=value;return value};EventManagementProxy.prototype.getURL=function(){return this.data.url};EventManagementProxy.prototype.getInterval=function(){return this.data.interval};EventManagementProxy.prototype.setInterval=function(value){this.data.interval=this.poller.interval=value*1000;return value};EventManagementProxy.prototype.setState=function(value){this.state=value;this.sendNotification(EventManagementNotifications.EVENT_STATE_CHANGED,value);return value};EventManagementProxy.prototype.getState=function(){return this.state};function MediaAnalyticsPlugin(){MediaAnalyticsPlugin.__super__.constructor.call(this)}__extends(MediaAnalyticsPlugin,Plugin);MediaAnalyticsPlugin.prototype.moduleName="mediaanalytics";MediaAnalyticsPlugin.prototype.initialize=function(config,player){window.AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH=config.config;MediaAnalyticsPlugin.__super__.initialize.call(this,config,player)};MediaAnalyticsPlugin.prototype.createModel=function(){this.proxy=new MediaAnalyticsProxy(this.config);this.registerProxy(this.proxy)};MediaAnalyticsPlugin.prototype.createController=function(){this.registerCommand(Notifications.READY,MediaAnalyticsReadyCommand);this.registerCommand(Notifications.MEDIA_CHANGE,MediaAnalyticsChangeMediaCommand);this.registerCommand(AdNotifications.BREAK_START,MediaAnalyticsAdBreakStartCommand);this.registerCommand(AdNotifications.BREAK_END,MediaAnalyticsAdBreakEndCommand);this.registerCommand(AdNotifications.AD_LOADED,MediaAnalyticsAdLoadedCommand);this.registerCommand(AdNotifications.AD_STARTED,MediaAnalyticsAdStartCommand);this.registerCommand(AdNotifications.AD_TIME_UPDATE,MediaAnalyticsAdTimeUpdateCommand);this.registerCommand(AdNotifications.AD_ENDED,MediaAnalyticsAdEndCommand);this.registerCommand(MediaAnalyticsNotifications.SET_DIMENSIONS,MediaAnalyticsSetDimensionsCommand);this.registerCommand(Notifications.CONTENT_CHANGED,MediaAnalyticsContentChangedCommand)};MediaAnalyticsPlugin.prototype.listNotificationInterests=function(){return[Notifications.READY,Notifications.MEDIA_CHANGE,AdNotifications.BREAK_START,AdNotifications.BREAK_END,AdNotifications.AD_LOADED,AdNotifications.AD_STARTED,AdNotifications.AD_TIME_UPDATE,AdNotifications.AD_ENDED,MediaAnalyticsNotifications.SET_DIMENSIONS,Notifications.CONTENT_CHANGED]};MediaAnalyticsPlugin.prototype.setDimensions=function(value){this.retrieveProxy(MediaAnalyticsProxy.NAME).setDimensions(value);return value};AMP.registerPlugin("mediaanalytics","html",MediaAnalyticsPlugin);AMP.registerPlugin("mediaanalytics","flash",MediaAnalyticsWrapper);function BrandingWrapper(){return BrandingWrapper.__super__.constructor.apply(this,arguments)}__extends(BrandingWrapper,PluginWrapper);BrandingWrapper.NAME="BrandingWrapper";BrandingWrapper.prototype.createFlashVars=function(flashvars){if(this.config.id!=null){flashvars.branding=this.config.id}return flashvars};BrandingWrapper.prototype.createXML=function(xml){var backgroundImage,controls,element,elements,id,logo,logoId,style,_i,_len,_ref;if(((_ref=this.config)!=null?_ref.logo:void 0)!=null){logoId="logoOverlay";backgroundImage="background-image: url('"+this.config.logo+"');";elements=xml.getElementsByTagName("element");for(_i=0,_len=elements.length;_i<_len;_i++){element=elements[_i];id=element.getAttribute("id");if(id===logoId){logo=element}else{if(id==="controls"){controls=element}}}if(!(logo!=null)){logo=xml.createElement("element");logo.setAttribute("id",logoId);logo.setAttribute("style","width: 150px; height: 53px; right: 15px; top: 15px; opacity: 0.5; "+backgroundImage);controls.appendChild(logo)}else{style=logo.getAttribute("style");if(style.indexOf("background-image:")!==-1){style=style.replace(/background-image: [A-Za-z0-9_\-\.\/\\;\(\)"']+/,backgroundImage)}else{style=backgroundImage+style}logo.setAttribute("style",style)}}return xml};function BrandingMediator(){BrandingMediator.__super__.constructor.call(this)}__extends(BrandingMediator,OverlayMediator);BrandingMediator.prototype.componentName="branding";BrandingMediator.prototype.logo=null;BrandingMediator.prototype.text=null;BrandingMediator.prototype.container=null;BrandingMediator.prototype.onRegister=function(){this.container=this.create("branding-container");this.logo=this.create(["branding-image","hidden"],this.container,"img");this.text=this.create("branding-text",this.container);BrandingMediator.__super__.onRegister.call(this)};BrandingMediator.prototype.listNotificationInterests=function(){return[Notifications.READY]};BrandingMediator.prototype.handleNotification=function(notification){var branding,href;switch(notification.getName()){case Notifications.READY:branding=notification.getBody().branding;if(!(branding!=null)){return}if(branding.logo!=null){this.logo.src=branding.logo;this.classList.remove("hidden",this.logo)}else{this.classList.add("hidden",this.logo)}href=this.config.getDomain();if((href!=null)&&href.indexOf("http")!==0){href=location.protocol+"//"+href;this.text.innerHTML='<span>View all <a href="'+href+'" target="'+this.config.getTarget()+'">'+this.config.getDomain()+"</a> videos."}}};function BrandingProxy(config){BrandingProxy.__super__.constructor.call(this,config)}__extends(BrandingProxy,ModuleProxy);BrandingProxy.NAME=ModuleProxy.NAME;BrandingProxy.prototype.defaults={id:null,title:null,link:null,logo:null,target:null};BrandingProxy.prototype.getID=function(){return this.data.id};BrandingProxy.prototype.setID=function(value){return this.data.id=value};BrandingProxy.prototype.getTarget=function(){return this.data.target};BrandingProxy.prototype.setTarget=function(value){return this.data.target=value};BrandingProxy.prototype.getTitle=function(){return this.data.title};BrandingProxy.prototype.setTitle=function(value){return this.data.title=value};BrandingProxy.prototype.getLink=function(){return this.data.link};BrandingProxy.prototype.setLink=function(value){return this.data.link=value};BrandingProxy.prototype.getLogo=function(){return this.data.logo};BrandingProxy.prototype.setLogo=function(value){return this.data.logo=value};var FeedNotifications={LOAD_FEED:"loadfeed",FEED_CHANGED:"feedchanged",FEED_LOADED:"feedcoaded"};function EventManagementPlugin(){EventManagementPlugin.__super__.constructor.call(this)}__extends(EventManagementPlugin,Plugin);EventManagementPlugin.prototype.moduleName="eventmanagement";EventManagementPlugin.prototype.createModel=function(){this.registerProxy(new EventManagementProxy(this.config))};EventManagementPlugin.prototype.createController=function(){this.registerCommand(Notifications.PLAY,EventManagementPlayCommand)};EventManagementPlugin.prototype.createView=function(){this.registerMediator(new EventManagementMediator())};EventManagementPlugin.prototype.listNotificationInterests=function(){return[Notifications.PLAY]};EventManagementPlugin.prototype.listNotificationPublications=function(){return EventManagementPlugin.__super__.listNotificationPublications.call(this).concat([Notifications.CHANGE_DISPLAY_STATE,Notifications.PAUSE,EventManagementNotifications.EVENT_STATE_CHANGED])};EventManagementPlugin.prototype.listNotificationEvents=function(){return[EventManagementNotifications.EVENT_STATE_CHANGED]};AMP.registerPlugin("eventmanagement","html",EventManagementPlugin);AMP.registerPlugin("eventmanagement","flash",EventManagementWrapper);function FeedProxy(config){FeedProxy.__super__.constructor.call(this,config);this.helper=new MRSSHelper()}__extends(FeedProxy,ModuleProxy);FeedProxy.NAME=ModuleProxy.NAME;FeedProxy.prototype.defaults={url:null,data:null};FeedProxy.prototype.feed=null;FeedProxy.prototype.helper=null;FeedProxy.prototype.setURL=function(value){var _this=this;this.data.url=value;this.helper.getFeed(value,function(feed){_this.sendNotification(FeedNotifications.CHANGE_FEED,feed)},function(error){Logger.error("[AMP Feed Load Error]",value,error)});return value};FeedProxy.prototype.getURL=function(){return this.data.url};FeedProxy.prototype.setFeedData=function(value){this.data.data=value;this.feed=this.helper.createFeed(value);this.sendNotification(FeedNotifications.FEED_CHANGED,this.feed);this.sendNotification(Notifications.DISPATCH_EVENT,new Event("loaded",value));return value};FeedProxy.prototype.getFeedData=function(){return this.data.data};FeedProxy.prototype.invoke=function(){if((this.data.url!=null)&&this.data.url!==""){this.sendNotification(FeedNotifications.LOAD_FEED,this.data.url)}else{if(this.data.data!=null){this.sendNotification(FeedNotifications.CHANGE_FEED,this.data.data)}}};function LoadFeedCommand(){LoadFeedCommand.__super__.constructor.call(this)}__extends(LoadFeedCommand,puremvc.SimpleCommand);LoadFeedCommand.prototype.execute=function(notification){var feedProxy;feedProxy=this.facade.retrieveProxy(FeedProxy.NAME);feedProxy.setURL(notification.getBody())};function ChangeFeedCommand(){ChangeFeedCommand.__super__.constructor.call(this)}__extends(ChangeFeedCommand,puremvc.SimpleCommand);ChangeFeedCommand.prototype.execute=function(notification){var feedProxy;feedProxy=this.facade.retrieveProxy(FeedProxy.NAME);feedProxy.setFeedData(notification.getBody())};function FeedChangedCommand(){FeedChangedCommand.__super__.constructor.call(this)}__extends(FeedChangedCommand,puremvc.SimpleCommand);FeedChangedCommand.prototype.execute=function(notification){var feed,mediaVO;this.facade.player.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.READY);feed=notification.getBody();mediaVO=feed.item[0];this.facade.player.sendNotification(Notifications.SET_MEDIA,mediaVO)};function FeedInitializedCommand(){FeedInitializedCommand.__super__.constructor.call(this)}__extends(FeedInitializedCommand,puremvc.SimpleCommand);FeedInitializedCommand.prototype.execute=function(notification){var feedProxy;feedProxy=this.facade.retrieveProxy(FeedProxy.NAME);feedProxy.invoke()};function FeedWrapper(player,config){if(config==null){config={}}FeedWrapper.__super__.constructor.call(this,player,config);if(config.url!=null){this.url=config.url}if(config.data!=null){this.data=config.data}this.player.load=function(){}}__extends(FeedWrapper,PluginWrapper);FeedWrapper.NAME="FeedWrapper";FeedWrapper.prototype.url=null;FeedWrapper.prototype.data=null;FeedWrapper.prototype.updateData=true;FeedWrapper.prototype.createFlashVars=function(flashvars){if((this.url!=null)&&this.url!==""){flashvars.data_feed_url=escape(this.url)}};FeedWrapper.prototype.listNotificationInterests=function(){return FeedWrapper.__super__.listNotificationInterests.apply(this,arguments).concat([FlashNotifications.READY,FlashNotifications.FEED_LOADED])};FeedWrapper.prototype.handleNotification=function(notification){var body,helper,media,name,type,_ref,_ref1,_this=this;FeedWrapper.__super__.handleNotification.call(this,notification);name=notification.getName();body=notification.getBody();switch(name){case FlashNotifications.FEED_LOADED:if(this.updateData===false){this.updateData=true}else{this.data=JSON.parse(body)}type="loaded";body=this.data;helper=new MRSSHelper();media=(_ref=helper.createFeed(this.data))!=null?(_ref1=_ref.item)!=null?_ref1[0]:void 0:void 0;if(media!=null){this.player.mediaProxy.setData(media)}this.sendNotification(FeedNotifications.FEED_CHANGED,this.data);break;case FlashNotifications.READY:if(this.data!=null){setTimeout(function(){_this.setData(_this.data)},25)}else{if((this.url!=null)&&this.url!==""){this.sendNotification(FeedNotifications.LOAD_FEED,this.url)}}}if(type!=null){this.dispatchEvent(new Event(type,body))}};FeedWrapper.prototype.setURL=function(value){if((value!=null)&&value!==""){this.url=value;this.player.mediaElement.playFile(this.url,this.player.getAutoplay());this.sendNotification(FeedNotifications.LOAD_FEED,this.url)}return value};FeedWrapper.prototype.getURL=function(){return this.url};FeedWrapper.prototype.setData=function(value){this.data=value;this.updateData=false;this.player.mediaElement.playFile(this.data,this.player.getAutoplay());return value};FeedWrapper.prototype.getData=function(){return this.data};function BrandingPlugin(){BrandingPlugin.__super__.constructor.call(this)}__extends(BrandingPlugin,Plugin);BrandingPlugin.NAME="BrandingPlugin";BrandingPlugin.prototype.moduleName="branding";BrandingPlugin.prototype.createModel=function(){this.registerProxy(new BrandingProxy(this.config))};BrandingPlugin.prototype.createView=function(){this.registerMediator(new BrandingMediator())};BrandingPlugin.prototype.onRegister=function(){if(this.config.id!=null){this.sendNotification(Notifications.ADD_APPLICATION_STATE,"branding-"+this.config.id)}BrandingPlugin.__super__.onRegister.call(this)};BrandingPlugin.prototype.listNotificationInterests=function(){return[Notifications.READY]};AMP.registerPlugin("branding","html",BrandingPlugin);AMP.registerPlugin("branding","flash",BrandingWrapper);AMP.registerPlugin("branding","external",BrandingPlugin);var FeatureNotifications={REGISTER_FEATURE:"registerfeature"};function Feature(){Feature.__super__.constructor.call(this)}__extends(Feature,Plugin);Feature.NAME="Feature";Feature.prototype.featureName=null;Feature.prototype.getFeatureName=function(){return this.featureName};Feature.prototype.registerFeature=function(){if(this.getFeatureName()!=null){this.player.sendNotification(FeatureNotifications.REGISTER_FEATURE,this)}};Feature.prototype.onRegister=function(){this.registerFeature();Feature.__super__.onRegister.call(this)};Feature.prototype.listNotificationPublications=function(){return Feature.__super__.listNotificationPublications.call(this).concat([FeatureNotifications.REGISTER_FEATURE])};function FeedPlugin(){FeedPlugin.__super__.constructor.call(this)}__extends(FeedPlugin,Plugin);FeedPlugin.prototype.moduleName="feed";FeedPlugin.prototype.createModel=function(){this.proxy=new FeedProxy(this.config);this.registerProxy(this.proxy)};FeedPlugin.prototype.createController=function(){FeedPlugin.__super__.createController.call(this);this.registerCommand(Notifications.READY,FeedInitializedCommand);this.registerCommand(FeedNotifications.LOAD_FEED,LoadFeedCommand);this.registerCommand(FeedNotifications.CHANGE_FEED,ChangeFeedCommand);this.registerCommand(FeedNotifications.FEED_CHANGED,FeedChangedCommand)};FeedPlugin.prototype.listNotificationInterests=function(){return FeedPlugin.__super__.listNotificationInterests.call(this).concat([Notifications.READY])};FeedPlugin.prototype.listNotificationPublications=function(){var key,value;return FeedPlugin.__super__.listNotificationPublications.call(this).concat((function(){var _results;_results=[];for(key in FeedNotifications){value=FeedNotifications[key];_results.push(value)}return _results})())};FeedPlugin.prototype.setURL=function(value){this.sendNotification(FeedNotifications.LOAD_FEED,value);return value};FeedPlugin.prototype.getURL=function(){return this.proxy.getURL()};FeedPlugin.prototype.setData=function(value){this.sendNotification(FeedNotifications.CHANGE_FEED,value);return value};FeedPlugin.prototype.getData=function(){return this.proxy.getData()};AMP.registerPlugin("feed","html",FeedPlugin);AMP.registerPlugin("feed","flash",FeedWrapper);function AdMediator(){AdMediator.__super__.constructor.call(this)}__extends(AdMediator,OverlayMediator);AdMediator.prototype.duration=null;AdMediator.prototype.currentTime=null;AdMediator.prototype.container=null;AdMediator.prototype.banner=null;AdMediator.prototype.text=null;AdMediator.prototype.adText=null;AdMediator.prototype.bg=null;AdMediator.prototype.totalAds=null;AdMediator.prototype.adPosition=null;AdMediator.prototype.adContainerRequired=true;AdMediator.prototype.componentName="ads";AdMediator.prototype.onRegister=function(){if(this.adContainerRequired){this.container=this.create("ad-container")}this.banner=this.create("ad-banner");this.bg=this.create("ad-text-bg",this.banner);this.adText=this.create("ad-text-title",this.banner);this.text=this.create("ad-text",this.banner);if(this.adContainerRequired){this.viewComponent.container=this.container}AdMediator.__super__.onRegister.call(this);this.sendNotification(AdNotifications.AD_CONTAINER_CREATED,this.viewComponent);this.facade.setViewComponent(this.viewComponent)};AdMediator.prototype.listNotificationInterests=function(){return[AdNotifications.BREAK_START,AdNotifications.BREAK_END,AdNotifications.AD_TIME_REMAINING,AdNotifications.AD_STARTED]};AdMediator.prototype.handleNotification=function(notification){var adVO,duration,msg,time;switch(notification.getName()){case AdNotifications.BREAK_END:this.text.textContent="";this.adText.textContent="";break;case AdNotifications.AD_TIME_REMAINING:time=notification.getBody();if((this.totalAds!=null)&&this.totalAds>0&&(this.adPosition!=null)&&this.adPosition!==this.totalAds){msg=time>0?""+(this.localizationManager.getString(LocalizationConstants.MSG_NEXT_AD))+(Utils.formatTimecode(time)):""}else{msg=time>0?""+(this.localizationManager.getString(LocalizationConstants.MSG_NEXT_VIDEO))+(Utils.formatTimecode(time)):""}this.text.textContent=msg;duration=this.facade.retrieveProxy(ModuleProxy.NAME).adVO.duration;time=duration-time;break;case AdNotifications.AD_STARTED:adVO=notification.getBody();this.totalAds=adVO.totalAds;this.adPosition=adVO.position;msg="Ad "+adVO.position+" of "+adVO.totalAds;if((adVO.position!=null)&&(adVO.totalAds!=null)&&adVO.position!==0){this.adText.textContent=msg}}};function AdMediaChangeCommand(){AdMediaChangeCommand.__super__.constructor.call(this)}__extends(AdMediaChangeCommand,AdCommand);AdMediaChangeCommand.prototype.execute=function(notification){var media;if(this.ads.getEnabled()===false){return}media=notification.getBody();this.ads.engage(media)};function AdLoadedCommand(){AdLoadedCommand.__super__.constructor.call(this)}__extends(AdLoadedCommand,AdCommand);AdLoadedCommand.prototype.execute=function(notification){this.sendNotification(Notifications.UPDATE_DATA_BINDINGS,{contexts:[this.ads.getContextName()]})};function AdBreakStartCommand(){AdBreakStartCommand.__super__.constructor.call(this)}__extends(AdBreakStartCommand,AdCommand);AdBreakStartCommand.prototype.execute=function(notification){this.facade.player.sendNotification(Notifications.ADD_APPLICATION_STATE,"ad-mode");if(this.applicationState.getDevice()!=="desktop"){this.facade.player.sendNotification(Notifications.DISABLE_FULL_SCREEN)}this.ads.breakStart()};function AdBreakEndCommand(){AdBreakEndCommand.__super__.constructor.call(this)}__extends(AdBreakEndCommand,AdCommand);AdBreakEndCommand.prototype.execute=function(notification){this.ads.breakEnd();this.facade.player.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"ad-mode");if(this.applicationState.getDevice()!=="desktop"){this.facade.player.sendNotification(Notifications.ENABLE_FULL_SCREEN)}};var FlashAdNotifications={BREAK_START:"adComponentBreakInitiated",BREAK_END:"adComponentBreakComplete",AD_LOADED:"adComponentLoaded",AD_STARTED:"adComponentAdBegin",AD_TIME_UPDATE:"adComponentPlaybackProgress",AD_TIME_REMAINING:"adComponentTimeElapsed",AD_DURATION_CHANGE:"addurationchange",AD_ENDED:"adComponentAdComplete",AD_ERROR:"adComponentInitFailed",AD_PLAY:"adComponentPlaybackResumed",AD_PAUSE:"adComponentPlaybackPaused",AD_LOG:"adComponentLog",AD_COMPANION:"adComponentCompanion",AD_PLAYBACK_FAILED:"adComponentPlaybackFailed",AD_PLAYBACK_TERMINATED:"adComponentPlaybackTerminated",AD_MEDIA_LOADED:"adComponentMediaLoaded",AD_CLICKED:"adComponentClicked",AD_FIRST_QUARTILE:"adComponentFirstQuartile",AD_MIDPOINT:"adComponentMidpoint",AD_THIRD_QUARTILE:"adComponentThirdQuartile",AD_REQUEST:"adComponentAdsRequest"};function AdSeekCommand(){AdSeekCommand.__super__.constructor.call(this)}__extends(AdSeekCommand,AdCommand);AdSeekCommand.prototype.execute=function(notification){this.ads.contentSeek(notification.getBody())};function AuditudeProxy(config){AuditudeProxy.__super__.constructor.call(this,config)}__extends(AuditudeProxy,AdProxy);AuditudeProxy.NAME=AdProxy.NAME;AuditudeProxy.prototype.defaults={videoId:null,defaultId:null,domain:null,zoneId:null,companion:null,userData:null,params:null};AuditudeProxy.prototype.key="auditude";AuditudeProxy.prototype.session=null;AuditudeProxy.prototype.options=null;AuditudeProxy.prototype.initialize=function(){var _this=this;this.options={controls:false,auditudeHandlesChapterBreaks:false,style:{backgroundColor:"#000",width:this.facade.player.mediaElement.clientWidth,height:this.facade.player.mediaElement.clientHeight},handlers:{play:function(){_this.facade.logger.debug("ad play")},timeupdate:function(event,audPlayer,video){_this.facade.sendNotification(AdNotifications.AD_TIME_REMAINING,video.duration-video.currentTime)},error:function(err){_this.facade.logger.debug("ad error:",err);_this.error()},pause:function(){_this.facade.logger.debug("ad pause")},loadedmetadata:function(evt,player,video){_this.facade.logger.debug("ad loadedmetadata")},end:function(){_this.facade.logger.debug("ad end")}}};try{this.plugin=this.createPlugin();this.plugin.subscribe(aud.events.init_complete,function(event,plugin){_this.facade.logger.debug("init_complete:",event,plugin);try{_this.plugin.publish(aud.notifications.break_begin)}catch(err){_this.error(err)}});this.plugin.subscribe(aud.events.init_failed,function(event,plugin){_this.error(event)});this.plugin.subscribe(aud.events.break_begin,function(event,plugin){_this.facade.logger.debug("break_begin:",event,plugin);_this.sendNotification(AdNotifications.BREAK_START)});this.plugin.subscribe(aud.events.pause_playback,function(event,plugin){_this.facade.logger.debug("pause_playback: "+event+", "+plugin);_this.contentPause(event,plugin)});this.plugin.subscribe(aud.events.resume_playback,function(event,plugin){_this.facade.logger.debug("resume_playback: ",event,plugin);_this.contentPlay(event,plugin)});this.plugin.subscribe(aud.events.linear_ad_begin,function(event,plugin,ctx){var id,title,xml;_this.facade.logger.debug("linear ad begin:",event,plugin,ctx);xml=plugin._xmlDoc.querySelector("ad[id]");if(xml!=null){id=xml.getAttribute("id")}xml=plugin._xmlDoc.querySelector("inLine[adTitle]");if(xml!=null){title=xml.getAttribute("adTitle")}_this.adVO=new AdVO(id,title,ctx.asset.duration,1,"preroll","auditude",null,ctx.banners,null,ctx);_this.sendNotification(AdNotifications.AD_LOADED,_this.adVO);_this.sendNotification(AdNotifications.AD_DURATION_CHANGE,_this.adVO);_this.facade.player.sendNotification(Notifications.CHANGE_PLAY_STATE,PlayState.PLAYING);_this.sendNotification(AdNotifications.AD_PLAY);_this.setInProgress(true);_this.setCompanions(ctx.banners);_this.session=ctx.session;_this.sendNotification(AdNotifications.AD_STARTED)});this.plugin.subscribe(aud.events.linear_ad_end,function(event,plugin,ctx){_this.facade.logger.debug("linear ad end:",event,plugin,ctx);_this.sendNotification(AdNotifications.AD_ENDED)});this.plugin.subscribe(aud.events.break_end,function(event,plugin){_this.facade.logger.debug("break_end:",event,plugin);_this.sendNotification(AdNotifications.BREAK_END)});this.plugin.subscribe(aud.events.non_linear_ad_begin,function(event,plugin,ctx){_this.facade.logger.debug("non linear ad begin");_this.setCompanions(ctx.banners)});this.plugin.subscribe(aud.events.non_linear_ad_end,function(event,plugin,ctx){_this.facade.logger.debug("non linear ad end")})}catch(err){this.error(err)}};AuditudeProxy.prototype.createPlugin=function(){return aud.html5.AdPlayer(this.facade.container.container,null,this.value.domain,this.value.zoneId,this.options)};AuditudeProxy.prototype.start=function(){var defaultId,id,key,params,userData,value,_ref;if(AuditudeProxy.__super__.start.call(this)===false){return false}try{params=this.value.params||{};userData="";if(this.value.userData!=null){_ref=this.value.userData;for(key in _ref){value=_ref[key];userData+=""+key+"="+value+";"}}if(params.userData!=null){userData+=params.userData}if(userData!==""){params.userData=userData}id=this.value.videoId+"";if(this.value.defaultId!=null){defaultId=this.value.defaultId+"";id=id!=null?[id,defaultId]:defaultId}this.facade.logger.log("Auditude init: ",id,params);this.plugin.init(id,params)}catch(err){this.error(err)}};AuditudeProxy.prototype.play=function(){AuditudeProxy.__super__.play.call(this);this.session.notifyResume()};AuditudeProxy.prototype.pause=function(){AuditudeProxy.__super__.pause.call(this);this.session.notifyPause()};AuditudeProxy.prototype.breakStart=function(){};AuditudeProxy.prototype.setCompanions=function(ads){var ad,banner,companions,slot,_i,_j,_len,_len1;if(!(ads!=null)||ads.length<1){return}companions=[];for(_i=0,_len=ads.length;_i<_len;_i++){ad=ads[_i];companions.push({data:ad.data,type:ad.resourceType,width:parseInt(ad.width),height:parseInt(ad.height),metadata:ad})}AuditudeProxy.__super__.setCompanions.call(this,companions);if(!(this.value.companion!=null)){return}banner=this.value.companion;slot=document.getElementById(banner.id);if(!(slot!=null)){return}for(_j=0,_len1=ads.length;_j<_len1;_j++){ad=ads[_j];if(!(banner.width===parseInt(ad.width)&&banner.height===parseInt(ad.height))){continue}slot.innerHTML=ad.data;break}};AuditudeProxy.prototype.contentStarted=function(){this.plugin.publish(aud.notifications.video_playback_started)};AuditudeProxy.prototype.contentEnded=function(){this.plugin.publish(aud.notifications.video_playback_complete)};function AuditudeFullscreenProxy(config){AuditudeFullscreenProxy.__super__.constructor.call(this,config)}__extends(AuditudeFullscreenProxy,AuditudeProxy);AuditudeFullscreenProxy.NAME=AuditudeProxy.NAME;AuditudeFullscreenProxy.prototype.createPlugin=function(){return aud.html5.AdPlayer(this.facade.player.mediaElement,null,this.value.domain,this.value.zoneId,this.options)};AuditudeFullscreenProxy.prototype.engage=function(media){AuditudeFullscreenProxy.__super__.engage.call(this,media);this.sendNotification(Notifications.DISABLE_VIDEO_EVENTS,["ended"])};AuditudeFullscreenProxy.prototype.reset=function(media){AuditudeFullscreenProxy.__super__.reset.call(this,media);this.sendNotification(Notifications.ENABLE_VIDEO_EVENTS,["ended"])};AuditudeFullscreenProxy.prototype.play=function(){AuditudeFullscreenProxy.__super__.play.call(this);this.facade.player.mediaElement.play()};AuditudeFullscreenProxy.prototype.pause=function(){AuditudeFullscreenProxy.__super__.pause.call(this);this.facade.player.mediaElement.pause()};AuditudeFullscreenProxy.prototype.contentPause=function(){this.facade.player.mediaElement.pause()};function AdWrapper(player,init){AdWrapper.__super__.constructor.call(this,player,init)}__extends(AdWrapper,PluginWrapper);AdWrapper.NAME="AdWrapper";AdWrapper.prototype.enabled=true;AdWrapper.prototype.paused=false;AdWrapper.prototype.started=false;AdWrapper.prototype.adVO=null;AdWrapper.prototype.getFeatureName=function(){return"ads"};AdWrapper.prototype.getInProgress=function(){return this.player.mediaElement.getPlayerProperty("adInProgress")};AdWrapper.prototype.getStarted=function(){return this.started};AdWrapper.prototype.getPaused=function(){return this.paused};AdWrapper.prototype.getCompanions=function(){var _ref;return(_ref=this.adVO)!=null?_ref.companions:void 0};AdWrapper.prototype.setEnabled=function(value){this.enabled=value;this.player.mediaElement.setPlayerProperty("adsEnabled",value);return value};AdWrapper.prototype.getEnabled=function(){return this.enabled};AdWrapper.prototype.enable=function(){this.setEnabled(true)};AdWrapper.prototype.disable=function(){this.setEnabled(false)};AdWrapper.prototype.createFlashVars=function(flashvars){flashvars.core_ads_enabled=true;return flashvars};AdWrapper.prototype.listNotificationInterests=function(){var key,value;return AdWrapper.__super__.listNotificationInterests.call(this).concat((function(){var _results;_results=[];for(key in FlashAdNotifications){value=FlashAdNotifications[key];_results.push(value)}return _results})())};AdWrapper.prototype.handleNotification=function(notification){var body,name,target,type;AdWrapper.__super__.handleNotification.call(this,notification);name=notification.getName();body=notification.getBody();this.adVO=this.createAdVO(body);target=this;switch(name){case FlashAdNotifications.BREAK_START:type="breakstart";break;case FlashAdNotifications.BREAK_END:type="breakend";break;case FlashAdNotifications.AD_LOADED:case FlashAdNotifications.AD_MEDIA_LOADED:type="loaded";this.start=false;break;case FlashAdNotifications.AD_STARTED:type="started";this.started=true;this.sendNotification(Notifications.ADD_APPLICATION_STATE,"ad-mode");break;case FlashAdNotifications.AD_TIME_UPDATE:case FlashAdNotifications.AD_TIME_REMAINING:type="timeupdate";break;case FlashAdNotifications.AD_ERROR:case FlashAdNotifications.AD_PLAYBACK_FAILED:type="error";this.start=false;this.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"ad-mode");break;case FlashAdNotifications.AD_ENDED:case FlashAdNotifications.AD_PLAYBACK_TERMINATED:type="ended";this.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"ad-mode");break;case FlashAdNotifications.AD_CLICKED:type="clicked";break;case FlashAdNotifications.AD_COMPANION:type="companion";if((this.adVO!=null)&&(body!=null)){this.adVO.companions=body}break;case FlashAdNotifications.AD_PAUSE:type="pause";target=this.player;this.paused=true;this.player.setPlayState("paused");break;case FlashAdNotifications.AD_PLAY:type="playing";target=this.player;this.paused=true;this.player.setPlayState("playing");target.dispatchEvent(new Event("play",body));break;case FlashAdNotifications.AD_LOG:type="log";break;case FlashAdNotifications.AD_FIRST_QUARTILE:type="firstquartile";break;case FlashAdNotifications.AD_MIDPOINT:type="midpoint";break;case FlashAdNotifications.AD_THIRD_QUARTILE:type="thirdquartile";break;case FlashAdNotifications.AD_REQUEST:type="request"}if(type!=null){target.dispatchEvent(new Event(type,this.adVO))}};AdWrapper.prototype.createAdVO=function(ad){if(!(ad!=null)){return null}return new AdVO(ad.id,ad.title,ad.duration,ad.podIndex,ad.podPosition,ad.adPlatform,null,null,ad.requestURL,ad)};AdWrapper.prototype.terminateAd=function(){this.player.mediaElement.terminateAd()};AdWrapper.prototype.terminateAllAds=function(){this.player.mediaElement.terminateAllAds()};function AuditudeWrapper(){return AuditudeWrapper.__super__.constructor.apply(this,arguments)}__extends(AuditudeWrapper,AdWrapper);AuditudeWrapper.NAME="AuditudeWrapper";AuditudeWrapper.prototype.createFlashVars=function(flashvars){if((this.config.companion!=null)){flashvars.ad_partner_companion_size=""+this.config.companion.width+"x"+this.config.companion.height}return flashvars};AuditudeWrapper.prototype.createXML=function(xml){var admedia,application,companion,companions,ids,prop,props,vendor,_i,_j,_len,_len1,_ref;application=xml.firstChild;admedia=xml.getElementsByTagName("admedia")[0];if(!(admedia!=null)){admedia=xml.createElement("admedia");application.appendChild(admedia)}vendor=xml.createElement("vendor");vendor.setAttribute("id","auditude");admedia.appendChild(vendor);props=[{value:this.config.domain,key:"AUDITUDE_DOMAIN"},{value:this.config.videoId,key:"AUDITUDE_MEDIA_ID"},{value:this.config.defaultId,key:"AUDITUDE_DEFAULT_MEDIA_ID"},{value:this.config.zoneId,key:"AUDITUDE_ZONE_ID"},{value:this.config.prerollId,key:"AUDITUDE_PREROLL_MEDIA_ID"},{value:this.config.midrollId,key:"AUDITUDE_MIDROLL_MEDIA_ID"},{value:this.config.audienceManagerURL,key:"AUDITUDE_AUDIENCE_MGR_URL"},{value:this.config.version,key:"AUDITUDE_VERSION"}];for(_i=0,_len=props.length;_i<_len;_i++){prop=props[_i];if(prop.value!=null){this.createProperty(xml,prop.key,prop.value,vendor)}}if(this.config.position!=null){vendor.setAttribute("position",this.config.position)}if(this.config.companions!=null){companions=[];ids=[];_ref=this.config.companions;for(_j=0,_len1=_ref.length;_j<_len1;_j++){companion=_ref[_j];companions.push(companion.width+"x"+companion.height);ids.push(companion.id)}this.createProperty(xml,"AUDITUDE_COMPANION_SIZE",companions.join(","),vendor);this.createProperty(xml,"AUDITUDE_COMPANION_ID",companions.join(","),vendor)}if(this.config.params!=null){this.createProperty(xml,"AUDITUDE_PARAMS",this.config.params,vendor)}if(this.config.userData!=null){this.createProperty(xml,"AUDITUDE_USER_DATA",this.config.userData,vendor)}return xml};function AdPlugin(){AdPlugin.__super__.constructor.call(this)}__extends(AdPlugin,Feature);AdPlugin.NAME="AdPlugin";AdPlugin.prototype.container=null;AdPlugin.prototype.featureName="ads";AdPlugin.prototype.createModel=function(){this.proxy=this.isFullscreenDevice()?this.createFullscreenProxy():this.createProxy();this.registerProxy(this.proxy)};AdPlugin.prototype.createController=function(){this.registerCommand(Notifications.CHANGE_MEDIA,AdMediaChangeCommand);this.registerCommand(AdNotifications.BREAK_START,AdBreakStartCommand);this.registerCommand(AdNotifications.AD_LOADED,AdLoadedCommand);this.registerCommand(AdNotifications.BREAK_END,AdBreakEndCommand);this.registerCommand(Notifications.SEEK,AdSeekCommand);this.registerCommand(UserNotifications.SEEK,AdSeekCommand)};AdPlugin.prototype.createView=function(){return this.registerMediator(new AdMediator())};AdPlugin.prototype.isFullscreenDevice=function(){return Utils.isFullscreenDevice()};AdPlugin.prototype.createProxy=function(){};AdPlugin.prototype.createFullscreenProxy=function(){};AdPlugin.prototype.registered=function(){var bindings;AdPlugin.__super__.registered.call(this);bindings=this.player.retrieveProxy(DataBindingProxy.NAME);bindings.registerContext(this.retrieveProxy(AdProxy.NAME))};AdPlugin.prototype.listNotificationInterests=function(){return[Notifications.CHANGE_MEDIA,Notifications.PLAY,Notifications.PAUSE,Notifications.START,Notifications.STARTED,Notifications.ENDED,Notifications.READY,Notifications.SEEK,Notifications.VOLUME_CHANGE,Notifications.FULL_SCREEN_CHANGE,UserNotifications.PLAY,UserNotifications.PAUSE,UserNotifications.SEEK,UserNotifications.TOGGLE_PLAY_PAUSE]};AdPlugin.prototype.listNotificationPublications=function(){var key,value;return AdPlugin.__super__.listNotificationPublications.call(this).concat((function(){var _results;_results=[];for(key in AdNotifications){value=AdNotifications[key];_results.push(value)}return _results})()).concat([Notifications.PLAY_REQUEST,Notifications.UPDATE_DATA_BINDINGS,Notifications.DISPLAY_TIME,Notifications.ADD_CUE_POINTS,Notifications.DISABLE_FULL_SCREEN])};AdPlugin.prototype.listNotificationEvents=function(){var key,value;return AdPlugin.__super__.listNotificationEvents.call(this).concat((function(){var _results;_results=[];for(key in AdNotifications){value=AdNotifications[key];_results.push(value)}return _results})())};AdPlugin.prototype.setEnabled=function(value){this.proxy.setEnabled(value)};AdPlugin.prototype.getEnabled=function(){return this.proxy.getEnabled()};AdPlugin.prototype.getInProgress=function(){return this.proxy.getInProgress()};AdPlugin.prototype.getStarted=function(){return this.proxy.getStarted()};AdPlugin.prototype.getPaused=function(){return this.proxy.getPaused()};AdPlugin.prototype.getCompanions=function(){return this.proxy.getCompanions()};AdPlugin.prototype.terminateAd=function(){this.proxy.terminateAd()};AdPlugin.prototype.terminateAllAds=function(){this.proxy.terminateAllAds()};var AutoAdvanceNotifications={TIME_UPDATE:"autoadvancetimeupdate",START:"autoadvancestart",STOP:"autoadvancestop",ADVANCE:"autoadvanceadvance"};function AutoAdvanceWrapper(player,config){if(config==null){config={}}AutoAdvanceWrapper.__super__.constructor.call(this,player,config);if(config.interval!=null){this.interval=config.interval}if(config.handler!=null){this.handler=config.handler}}__extends(AutoAdvanceWrapper,PluginWrapper);AutoAdvanceWrapper.NAME="AutoAdvanceWrapper";AutoAdvanceWrapper.prototype.interval=null;AutoAdvanceWrapper.prototype.handler=null;AutoAdvanceWrapper.prototype.getInterval=function(){return this.interval};AutoAdvanceWrapper.prototype.setInterval=function(value){return this.interval=value};AutoAdvanceWrapper.prototype.getHandler=function(){return this.handler};AutoAdvanceWrapper.prototype.setHandler=function(value){return this.handler=value};AutoAdvanceWrapper.prototype.listNotificationInterests=function(){return[FlashNotifications.CREATE_FLASH_VARS,FlashNotifications.AUTO_ADVANCE]};AutoAdvanceWrapper.prototype.handleNotification=function(notification){var body,flashvars,name,type,_base;name=notification.getName();body=notification.getBody();switch(name){case FlashNotifications.CREATE_FLASH_VARS:flashvars=body.flashvars;if(this.interval!=null){flashvars.next_video_timer=this.interval;flashvars.auto_play_list=true}break;case FlashNotifications.AUTO_ADVANCE:if(typeof(_base=this.config).handler==="function"){_base.handler()}type="advance"}if(type!=null){this.dispatchEvent(new Event(type))}};function AutoAdvanceProxy(config){AutoAdvanceProxy.__super__.constructor.call(this,config)}__extends(AutoAdvanceProxy,ModuleProxy);AutoAdvanceProxy.NAME=ModuleProxy.NAME;AutoAdvanceProxy.prototype.defaults={interval:15,handler:null};AutoAdvanceProxy.prototype.currentTime=0;AutoAdvanceProxy.prototype.timeout=null;AutoAdvanceProxy.prototype.start=function(){var _this=this;this.currentTime=this.data.interval;this.timeout=setInterval(function(){_this.updateTime()},1000);this.sendNotification(AutoAdvanceNotifications.TIME_UPDATE,this.currentTime)};AutoAdvanceProxy.prototype.stop=function(){clearInterval(this.timeout)};AutoAdvanceProxy.prototype.updateTime=function(){this.currentTime--;this.sendNotification(AutoAdvanceNotifications.TIME_UPDATE,this.currentTime);if(this.currentTime<=0){this.stop();this.sendNotification(AutoAdvanceNotifications.ADVANCE,this.data.handler)}};function AutoAdvanceStartCommand(){AutoAdvanceStartCommand.__super__.constructor.call(this)}__extends(AutoAdvanceStartCommand,puremvc.SimpleCommand);AutoAdvanceStartCommand.prototype.execute=function(notification){var proxy;this.sendNotification(Notifications.ADD_APPLICATION_STATE,"autoadvance-mode");proxy=this.facade.retrieveProxy(AutoAdvanceProxy.NAME);proxy.start()};function AutoAdvanceAdvanceCommand(){AutoAdvanceAdvanceCommand.__super__.constructor.call(this)}__extends(AutoAdvanceAdvanceCommand,puremvc.SimpleCommand);AutoAdvanceAdvanceCommand.prototype.execute=function(notification){var handler,proxy;proxy=this.facade.retrieveProxy(AutoAdvanceProxy.NAME);handler=notification.getBody();if((handler!=null)){if(typeof handler==="string"){eval(""+handler+"()")}else{if(typeof handler==="function"){handler()}}}this.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"autoadvance-mode")};function AutoAdvanceEndedCommand(){AutoAdvanceEndedCommand.__super__.constructor.call(this)}__extends(AutoAdvanceEndedCommand,puremvc.SimpleCommand);AutoAdvanceEndedCommand.prototype.execute=function(notification){var data,proxy;proxy=this.facade.retrieveProxy(AutoAdvanceProxy.NAME);data=proxy.getData();if(data.interval!=null){this.sendNotification(AutoAdvanceNotifications.START)}};function AutoAdvanceStopCommand(){AutoAdvanceStopCommand.__super__.constructor.call(this)}__extends(AutoAdvanceStopCommand,puremvc.SimpleCommand);AutoAdvanceStopCommand.prototype.execute=function(notification){var proxy;proxy=this.facade.retrieveProxy(AutoAdvanceProxy.NAME);proxy.stop()};function AutoAdvanceMediator(){AutoAdvanceMediator.__super__.constructor.call(this)}__extends(AutoAdvanceMediator,OverlayMediator);AutoAdvanceMediator.prototype.componentName="autoadvance";AutoAdvanceMediator.prototype.text=null;AutoAdvanceMediator.prototype.onRegister=function(){this.text=this.create("autoadvance-text");AutoAdvanceMediator.__super__.onRegister.call(this)};AutoAdvanceMediator.prototype.listNotificationInterests=function(){return[AutoAdvanceNotifications.TIME_UPDATE]};AutoAdvanceMediator.prototype.handleNotification=function(notification){var time;switch(notification.getName()){case AutoAdvanceNotifications.TIME_UPDATE:time=notification.getBody();this.text.textContent=""+(this.localizationManager.getString("MSG_NEXT_VIDEO"))+" "+time+" "+(this.localizationManager.getString("MSG_SECONDS"))}};function AuditudePlugin(){AuditudePlugin.__super__.constructor.call(this)}__extends(AuditudePlugin,AdPlugin);AuditudePlugin.NAME="AuditudePlugin";AuditudePlugin.prototype.moduleName="auditude";AuditudePlugin.prototype.featureName="ads";AuditudePlugin.prototype.createFullscreenProxy=function(){return new AuditudeFullscreenProxy(this.config)};AuditudePlugin.prototype.createProxy=function(){return new AuditudeProxy(this.config)};AuditudePlugin.prototype.isFullscreenDevice=function(){return true};AMP.registerPlugin("auditude","html",AuditudePlugin);AMP.registerPlugin("auditude","flash",AuditudeWrapper);var RecommendationsNotifications={RECOMMENDATIONS_LOADED:"recommendationsloaded",RECOMMENDATION_SELECTED:"recommendationsselected"};function RecommendationVO(guid,link,title,description,thumbnail,duration,pubDate,target,metadata){this.guid=guid;this.link=link;this.title=title;this.description=description;this.thumbnail=thumbnail;this.duration=duration;this.pubDate=pubDate;this.target=target;this.metadata=metadata!=null?metadata:{}}RecommendationVO.prototype.guid=null;RecommendationVO.prototype.link=null;RecommendationVO.prototype.title=null;RecommendationVO.prototype.description=null;RecommendationVO.prototype.thumbnail=null;RecommendationVO.prototype.duration=null;RecommendationVO.prototype.pubDate=null;RecommendationVO.prototype.target=null;RecommendationVO.prototype.metadata=null;function RecommendationsWrapper(player,config){if(config==null){config={}}RecommendationsWrapper.__super__.constructor.call(this,player,config);if(config.url!=null){this.url=config.url}if(config.target!=null){this.target=config.target}}__extends(RecommendationsWrapper,PluginWrapper);RecommendationsWrapper.NAME="RecommendationsWrapper";RecommendationsWrapper.prototype.url=null;RecommendationsWrapper.prototype.target=null;RecommendationsWrapper.prototype.recommendations=null;RecommendationsWrapper.prototype.getFeatureName=function(){return"recommendations"};RecommendationsWrapper.prototype.getData=function(){return this.recommendations};RecommendationsWrapper.prototype.setData=function(value){return this.recommendations=value};RecommendationsWrapper.prototype.getTarget=function(){var _ref,_ref1;return this.target||((_ref=this.player)!=null?(_ref1=_ref.config)!=null?_ref1.target:void 0:void 0)};RecommendationsWrapper.prototype.getURL=function(){return this.url};RecommendationsWrapper.prototype.createFlashVars=function(flashvars){flashvars.recommendations_partner="mrss";if(this.config.target!=null){flashvars.external_target=this.config.target}};RecommendationsWrapper.prototype.createXML=function(xml){var application,recommendations,vendor;application=xml.firstChild;recommendations=xml.getElementsByTagName("recommendations")[0];if(!(recommendations!=null)){recommendations=xml.createElement("recommendations");application.appendChild(recommendations)}vendor=xml.createElement("vendor");vendor.setAttribute("id","mrss");recommendations.appendChild(vendor);this.createProperty(xml,"RECOMMENDATIONS_MRSS_URL",this.url,vendor)};RecommendationsWrapper.prototype.listNotificationInterests=function(){return RecommendationsWrapper.__super__.listNotificationInterests.apply(this,arguments).concat([FlashNotifications.RECOMMENDATION_SELECTED,FlashNotifications.RECOMMENDATIONS_LOADED])};RecommendationsWrapper.prototype.handleNotification=function(notification){var body,name,type;RecommendationsWrapper.__super__.handleNotification.call(this,notification);name=notification.getName();body=notification.getBody();switch(name){case FlashNotifications.RECOMMENDATIONS_LOADED:type="loaded";this.recommendations=body;break;case FlashNotifications.RECOMMENDATION_SELECTED:type="selected"}if(type!=null){this.dispatchEvent(new Event(type,body))}};function RecommendationSelectedCommand(){RecommendationSelectedCommand.__super__.constructor.call(this)}__extends(RecommendationSelectedCommand,puremvc.SimpleCommand);RecommendationSelectedCommand.prototype.execute=function(notification){var rec,recProxy;recProxy=this.facade.retrieveProxy(RecommendationsProxy.NAME);rec=notification.getBody();if(rec.target!=="none"&&rec.target!=="player"){window.open(rec.link,rec.target)}};function RecommendationsPlayCommand(){RecommendationsPlayCommand.__super__.constructor.call(this)}__extends(RecommendationsPlayCommand,puremvc.SimpleCommand);RecommendationsPlayCommand.prototype.execute=function(notification){var recommendationsProxy;recommendationsProxy=this.facade.retrieveProxy(RecommendationsProxy.NAME);recommendationsProxy.invoke()};function RecommendationsPlayStateChangeCommand(){RecommendationsPlayStateChangeCommand.__super__.constructor.call(this)}__extends(RecommendationsPlayStateChangeCommand,puremvc.SimpleCommand);RecommendationsPlayStateChangeCommand.prototype.execute=function(notification){var recommendations,recommendationsProxy,states;recommendationsProxy=this.facade.retrieveProxy(RecommendationsProxy.NAME);recommendations=recommendationsProxy.getRecommendations();states=notification.getBody();if(states.newState===PlayState.ENDED){if((recommendations!=null?recommendations.length:void 0)>0){this.facade.sendNotification(Notifications.ADD_APPLICATION_STATE,"recommendations-mode")}}else{if(states.oldState===PlayState.ENDED){if((recommendations!=null?recommendations.length:void 0)>0){this.facade.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"recommendations-mode")}}}};function RecommendationsProxy(config){RecommendationsProxy.__super__.constructor.call(this,config);this.helper=new MRSSHelper()}__extends(RecommendationsProxy,PluginProxy);RecommendationsProxy.NAME=ModuleProxy.NAME;RecommendationsProxy.prototype.defaults={url:null,target:"_blank"};RecommendationsProxy.prototype.loaded=true;RecommendationsProxy.prototype.recommendations=null;RecommendationsProxy.prototype.helper=null;RecommendationsProxy.prototype.getRecommendations=function(){return this.recommendations};RecommendationsProxy.prototype.setRecommendations=function(value){this.recommendations=value;this.sendNotification(RecommendationsNotifications.RECOMMENDATIONS_LOADED,this.recommendations);return value};RecommendationsProxy.prototype.getURL=function(){return this.getConfigurationData().url};RecommendationsProxy.prototype.setURL=function(value){this.data.url=value;this.invoke();return value};RecommendationsProxy.prototype.getTarget=function(){return this.getConfigurationData().target||this.facade.player.retrieveProxy(ConfigurationProxy.NAME).getTarget()};RecommendationsProxy.prototype.setTarget=function(value){this.data.target=value;return value};RecommendationsProxy.prototype.invoke=function(){var url,xhr;url=this.getURL();if(!(url!=null)||url===""){this.facade.logger.error("[AMP RECOMMENDATIONS ERROR]","Load Error: No url provided");return}xhr=Utils.getJson(url,this.onload.bind(this),this.onerror.bind(this))};RecommendationsProxy.prototype.onload=function(json){var recs;recs=this.createRecommendations(json);this.setRecommendations(recs)};RecommendationsProxy.prototype.onerror=function(error){this.facade.logger.error("[AMP RECOMMENDATIONS ERROR]","Load Error:",error)};RecommendationsProxy.prototype.createRecommendations=function(feed){var item,rec,recs,_i,_len,_ref;feed=this.helper.createFeed(feed);recs=[];_ref=feed.item;for(_i=0,_len=_ref.length;_i<_len;_i++){item=_ref[_i];rec=new RecommendationVO(item.guid,item.link,item.title,item.description,item.thumbnail,item.duration,item.pubDate,this.getTarget(),item);recs.push(rec)}return recs};function RecommendationsMediator(){RecommendationsMediator.__super__.constructor.call(this)}__extends(RecommendationsMediator,OverlayMediator);RecommendationsMediator.prototype.componentName="recommendations";RecommendationsMediator.prototype.listArea=null;RecommendationsMediator.prototype.onRegister=function(){var label;label=this.createText("recommendations-label","Recommended");this.listArea=this.create("recommendations-list-area");RecommendationsMediator.__super__.onRegister.call(this)};RecommendationsMediator.prototype.listNotificationInterests=function(){return[RecommendationsNotifications.RECOMMENDATIONS_LOADED]};RecommendationsMediator.prototype.handleNotification=function(notification){var rec,recs,_i,_len;switch(notification.getName()){case RecommendationsNotifications.RECOMMENDATIONS_LOADED:this.listArea.innerHTML="";recs=notification.getBody();if((recs!=null)&&recs.length>0){for(_i=0,_len=recs.length;_i<_len;_i++){rec=recs[_i];this.addElement(rec)}}}};RecommendationsMediator.prototype.addElement=function(recommendation){var listItem,_this=this;listItem=this.create("recommendation",this.listArea);if(listItem.dataset==null){listItem.dataset={}}listItem.dataset.link=recommendation.link;listItem.dataset.target=recommendation.target;listItem.innerHTML="<img src='"+recommendation.thumbnail+"' class='"+this.cssPrefix+"recommendation-thumbnail' /> <span class='"+this.cssPrefix+"recommendation-text'>"+recommendation.description+"</span>";listItem.onclick=function(event){event.stopImmediatePropagation();_this.sendNotification(RecommendationsNotifications.RECOMMENDATION_SELECTED,event.currentTarget.dataset);return false}};function AutoAdvancePlugin(){AutoAdvancePlugin.__super__.constructor.call(this)}__extends(AutoAdvancePlugin,Plugin);AutoAdvancePlugin.NAME="AutoAdvancePlugin";AutoAdvancePlugin.prototype.moduleName="autoadvance";AutoAdvancePlugin.prototype.createController=function(){AutoAdvancePlugin.__super__.createController.call(this);this.registerCommand(AutoAdvanceNotifications.START,AutoAdvanceStartCommand);this.registerCommand(AutoAdvanceNotifications.ADVANCE,AutoAdvanceAdvanceCommand);this.registerCommand(Notifications.ENDED,AutoAdvanceEndedCommand);this.registerCommand(Notifications.CHANGE_MEDIA,AutoAdvanceStopCommand);this.registerCommand(Notifications.PLAY,AutoAdvanceStopCommand);this.registerCommand(Notifications.PLAYING,AutoAdvanceStopCommand);this.registerCommand(Notifications.REPLAY,AutoAdvanceStopCommand)};AutoAdvancePlugin.prototype.createModel=function(){this.registerProxy(new AutoAdvanceProxy(this.config))};AutoAdvancePlugin.prototype.createView=function(){this.registerMediator(new AutoAdvanceMediator())};AutoAdvancePlugin.prototype.listNotificationInterests=function(){return[Notifications.ENDED,Notifications.CHANGE_MEDIA,Notifications.PLAY,Notifications.PLAYING,Notifications.REPLAY]};AutoAdvancePlugin.prototype.listNotificationPublications=function(){var key,value;return AutoAdvancePlugin.__super__.listNotificationPublications.call(this).concat((function(){var _results;_results=[];for(key in AutoAdvanceNotifications){value=AutoAdvanceNotifications[key];_results.push(value)}return _results})())};AutoAdvancePlugin.prototype.listNotificationEvents=function(){var key,value;return AutoAdvancePlugin.__super__.listNotificationEvents.call(this).concat((function(){var _results;_results=[];for(key in AutoAdvanceNotifications){value=AutoAdvanceNotifications[key];_results.push(value)}return _results})())};AMP.registerPlugin("autoadvance","html",AutoAdvancePlugin);AMP.registerPlugin("autoadvance","flash",AutoAdvanceWrapper);function RecommendationsGridMediator(){RecommendationsGridMediator.__super__.constructor.call(this)}__extends(RecommendationsGridMediator,OverlayMediator);RecommendationsGridMediator.prototype.componentName="recommendations-grid";RecommendationsGridMediator.prototype.grid=null;RecommendationsGridMediator.prototype.onRegister=function(){var label;label=this.createText("recommendations-grid-label",this.localizationManager.getString(LocalizationConstants.MSG_RECOMMENDATIONS_TITLE));this.grid=this.create("recommendations-grid-table-grid",this,"table");RecommendationsGridMediator.__super__.onRegister.call(this)};RecommendationsGridMediator.prototype.listNotificationInterests=function(){return[RecommendationsNotifications.RECOMMENDATIONS_LOADED]};RecommendationsGridMediator.prototype.handleNotification=function(notification){var rec,recs,_i,_len;switch(notification.getName()){case RecommendationsNotifications.RECOMMENDATIONS_LOADED:this.grid.innerHTML="";this.create("recommendations-grid-row",this.grid,"tr");this.create("recommendations-grid-row",this.grid,"tr");recs=notification.getBody();if((recs!=null)&&recs.length>0){for(_i=0,_len=recs.length;_i<_len;_i++){rec=recs[_i];this.addElement(rec,_i)}}}};RecommendationsGridMediator.prototype.addElement=function(recommendation,recommendedIndex){var gridRowIndex,td,_this=this;gridRowIndex=(recommendedIndex%4)<2?0:1;td=this.create("recommendations-grid-item",this.grid.childNodes[gridRowIndex],"td");if(td.dataset==null){td.dataset={}}td.dataset.link=recommendation.link;td.dataset.target=this.config.getTarget();td.innerHTML="<img src='"+recommendation.thumbnail+"' class='"+this.cssPrefix+"recommendations-grid-thumbnail' /> <span class='"+this.cssPrefix+"recommendations-grid-text'>"+recommendation.description+"</span>";td.onclick=function(event){event.stopImmediatePropagation();_this.sendNotification(RecommendationsNotifications.RECOMMENDATION_SELECTED,event.currentTarget.dataset);return false}};function RecommendationsPlugin(){RecommendationsPlugin.__super__.constructor.call(this)}__extends(RecommendationsPlugin,Feature);RecommendationsPlugin.prototype.featureName="recommendations";RecommendationsPlugin.prototype.moduleName="recommendations";RecommendationsPlugin.prototype.createController=function(){this.registerCommand(RecommendationsNotifications.RECOMMENDATION_SELECTED,RecommendationSelectedCommand);this.registerCommand(Notifications.START,RecommendationsPlayCommand);this.registerCommand(Notifications.PLAY_STATE_CHANGE,RecommendationsPlayStateChangeCommand)};RecommendationsPlugin.prototype.createModel=function(){this.proxy=new RecommendationsProxy(this.config);this.registerProxy(this.proxy)};RecommendationsPlugin.prototype.createView=function(){this.registerMediator(new RecommendationsMediator())};RecommendationsPlugin.prototype.listNotificationInterests=function(){return[Notifications.START,Notifications.PLAY_STATE_CHANGE]};RecommendationsPlugin.prototype.listNotificationPublications=function(){var key,value;return RecommendationsPlugin.__super__.listNotificationPublications.call(this).concat((function(){var _results;_results=[];for(key in RecommendationsNotifications){value=RecommendationsNotifications[key];_results.push(value)}return _results})())};RecommendationsPlugin.prototype.listNotificationEvents=function(){var key,value;return RecommendationsPlugin.__super__.listNotificationEvents.call(this).concat((function(){var _results;_results=[];for(key in RecommendationsNotifications){value=RecommendationsNotifications[key];_results.push(value)}return _results})())};RecommendationsPlugin.prototype.setURL=function(value){this.proxy.set(value)};RecommendationsPlugin.prototype.getURL=function(){return this.proxy.getURL()};RecommendationsPlugin.prototype.getData=function(){return this.proxy.getData()};RecommendationsPlugin.prototype.setData=function(value){this.proxy.setData(value)};RecommendationsPlugin.prototype.getTarget=function(){return this.proxy.getTarget()};RecommendationsPlugin.prototype.setTarget=function(value){this.proxy.setTarget(value)};AMP.registerPlugin("recommendations","html",RecommendationsPlugin);AMP.registerPlugin("recommendations","flash",RecommendationsWrapper);function NielsenProxy(config){NielsenProxy.__super__.constructor.call(this,config)}__extends(NielsenProxy,DataBoundConfigurationProxy);NielsenProxy.prototype.configurationName="nielsen";NielsenProxy.NAME=ModuleProxy.NAME;NielsenProxy.cg="OnDemand";NielsenProxy.url="http://secure-us.imrworldwide.com/cgi-bin/m";NielsenProxy.prototype.defaults={url:null,data:{ci:null,c6:null,cg:null,tl:null},events:null};NielsenProxy.prototype.getTitle=function(){return this.title};NielsenProxy.prototype.setTitle=function(value){return this.title=value};NielsenProxy.prototype.start=function(){var url;url=this.constructURL("video","started");Utils.beacon(url)};NielsenProxy.prototype.end=function(){var url;url=this.constructURL("video","ended");Utils.beacon(url)};NielsenProxy.prototype.constructURL=function(target,type){var c6,cg,ci,event,events,item,tl,url,_i,_len,_ref,_ref1,_ref2,_ref3,_ref4;url=this.url||NielsenProxy.url;events=(_ref=this.value.events)!=null?_ref[target]:void 0;if(events!=null){for(_i=0,_len=events.length;_i<_len;_i++){item=events[_i];if(item.type===type){event=item}}}ci=(event!=null?(_ref1=event.data)!=null?_ref1.ci:void 0:void 0)||this.value.data.ci;c6=(event!=null?(_ref2=event.data)!=null?_ref2.c6:void 0:void 0)||this.value.data.c6;cg=(event!=null?(_ref3=event.data)!=null?_ref3.cg:void 0:void 0)||this.value.data.cg||NielsenProxy.cg;tl=(event!=null?(_ref4=event.data)!=null?_ref4.tl:void 0:void 0)||this.value.data.tl;return""+url+"?ci="+ci+"&c6="+c6+"&cc=1&tl="+tl+"&cg="+cg+"&rnd="+(Date.now())};function NielsenWrapper(){return NielsenWrapper.__super__.constructor.apply(this,arguments)}__extends(NielsenWrapper,PluginWrapper);NielsenWrapper.NAME="NielsenWrapper";NielsenWrapper.prototype.createXML=function(xml){var application,element,event,events,map,metrics,node,prop,props,text,txtTest,type,urlElement,vendor,_i,_j,_len,_len1,_ref,_ref1,_ref2,_ref3;if(!(((_ref=this.config)!=null?_ref.events:void 0)!=null)){return}application=xml.firstChild;metrics=xml.getElementsByTagName("metrics")[0];vendor=xml.createElement("vendor");vendor.setAttribute("id","nielsen");metrics.appendChild(vendor);map={ads:{started:"adStart",ended:"adComplete"},video:{started:"videoStart",ended:"videoComplete"}};props=[{value:"ci",key:"NIELSEN_CI"},{value:"cg",key:"NIELSEN_CG"},{value:"tl",key:"NIELSEN_TL"},{value:"c6",key:"NIELSEN_C6"}];if(this.config.url!=null){urlElement=xml.createElement("property");urlElement.setAttribute("key","serviceURL");txtTest=XMLUtils.createTextContent(xml,this.config.url.toString());urlElement.appendChild(txtTest);vendor.appendChild(urlElement)}_ref1=this.config.events;for(type in _ref1){events=_ref1[type];if((events!=null)&&events.length>0){for(_i=0,_len=events.length;_i<_len;_i++){event=events[_i];node=xml.createElement("property");node.setAttribute("key",map[type][event.type]);vendor.appendChild(node);for(_j=0,_len1=props.length;_j<_len1;_j++){prop=props[_j];text=((_ref2=event.data)!=null?_ref2[prop.value]:void 0)||((_ref3=this.config.data)!=null?_ref3[prop.value]:void 0);if((text!=null)&&text!==""){element=xml.createElement("property");element.setAttribute("key",prop.key);text=XMLUtils.createTextContent(xml,text);element.appendChild(text);node.appendChild(element)}}}}}return xml};function NielsenEndCommand(){NielsenEndCommand.__super__.constructor.call(this)}__extends(NielsenEndCommand,puremvc.SimpleCommand);NielsenEndCommand.prototype.execute=function(notification){var nielsen;nielsen=this.facade.retrieveProxy(NielsenProxy.NAME);nielsen.end()};function NielsenStartCommand(){NielsenStartCommand.__super__.constructor.call(this)}__extends(NielsenStartCommand,puremvc.SimpleCommand);NielsenStartCommand.prototype.execute=function(notification){var nielsen;nielsen=this.facade.retrieveProxy(NielsenProxy.NAME);nielsen.start()};function RecommendationsGridPlugin(){RecommendationsGridPlugin.__super__.constructor.call(this)}__extends(RecommendationsGridPlugin,RecommendationsPlugin);RecommendationsGridPlugin.prototype.moduleName="recommendationsgrid";RecommendationsGridPlugin.prototype.createView=function(){this.registerMediator(new RecommendationsGridMediator())};AMP.registerPlugin("recommendationsgrid","html",RecommendationsGridPlugin);AMP.registerPlugin("recommendationsgrid","flash",RecommendationsWrapper);function NielsensdkWrapper(){return NielsensdkWrapper.__super__.constructor.apply(this,arguments)}__extends(NielsensdkWrapper,PluginWrapper);NielsensdkWrapper.NAME="NielsensdkWrapper";NielsensdkWrapper.prototype.createXML=function(xml){var application,element,event,events,map,metrics,node,pluginProp,pluginProps,prop,props,text,type,vendor,_i,_j,_k,_len,_len1,_len2,_ref,_ref1,_ref2,_ref3;if(!(((_ref=this.config)!=null?_ref.events:void 0)!=null)){return}application=xml.firstChild;metrics=xml.getElementsByTagName("metrics")[0];if(!(metrics!=null)){metrics=xml.createElement("metrics");application.appendChild(metrics)}vendor=xml.createElement("vendor");vendor.setAttribute("id","nielsenSDK");metrics.appendChild(vendor);map={ads:{started:"adStart",ended:"adComplete"},video:{started:"videoStart",resume:"videoResume",ended:"videoComplete"}};props=[{value:"censusCategory",key:"NIELSEN_CENSUS_CATEGORY"},{value:"category",key:"NIELSEN_CATEGORY"},{value:"episodeTitle",key:"NIELSEN_EPISODE_TITLE"},{value:"videoType",key:"NIELSEN_VIDEO_TYPE"},{value:"length",key:"NIELSEN_LENGTH"},{value:"assetId",key:"NIELSEN_ASSET_ID"},{value:"dprFlag",key:"NIELSEN_DPR_FLAG"}];pluginProps=[{value:"apid",key:"NIELSEN_APID"},{value:"sfcode",key:"NIELSEN_SF_CODE"},{value:"apn",key:"NIELSEN_APN"},{value:"fbTag",key:"NIELSEN_FBTAG"}];for(_i=0,_len=pluginProps.length;_i<_len;_i++){pluginProp=pluginProps[_i];if(this.config.data[pluginProp.value]!=null){this.createProperty(xml,pluginProp.key,this.config.data[pluginProp.value],vendor)}}_ref1=this.config.events;for(type in _ref1){events=_ref1[type];if((events!=null)&&events.length>0){for(_j=0,_len1=events.length;_j<_len1;_j++){event=events[_j];node=xml.createElement("property");node.setAttribute("key",map[type][event.type]);vendor.appendChild(node);for(_k=0,_len2=props.length;_k<_len2;_k++){prop=props[_k];text=((_ref2=event.data)!=null?_ref2[prop.value]:void 0)||((_ref3=this.config.data)!=null?_ref3[prop.value]:void 0);if((text!=null)&&text!==""){element=xml.createElement("property");element.setAttribute("key",prop.key);text=XMLUtils.createTextContent(xml,text);element.appendChild(text);node.appendChild(element)}}}}}return xml};function NielsensdkProxy(config){NielsensdkProxy.__super__.constructor.call(this,config)}__extends(NielsensdkProxy,PluginProxy);NielsensdkProxy.NAME=ModuleProxy.NAME;NielsensdkProxy.prototype.defaults={data:null,events:null,plugin:{js:"http://secure-us.imrworldwide.com/novms/js/2/ggcmb400.js"}};NielsensdkProxy.prototype.nielsensdkSDK=null;NielsensdkProxy.prototype.cur_position=0;NielsensdkProxy.prototype.timer=null;NielsensdkProxy.prototype.queryInterval=2;NielsensdkProxy.prototype.isLive=null;NielsensdkProxy.prototype.initialize=function(){NielsensdkProxy.__super__.initialize.call(this);this.nielsensdkSDK=new NOLCMB.ggInitialize(this.value.data)};NielsensdkProxy.prototype.generateNielsenVO=function(adVO,eventName){var event,events,key,media,type,vo,_i,_len,_ref;if(adVO==null){adVO=null}if(eventName==null){eventName=null}vo=new Object();media=this.facade.player.getMedia();this.isLive=media.isLive;vo.assetid=media.guid;vo.category=media.category;vo.censuscategory=media.category;vo.dprflag="true";vo.episodetitle=media.title?media.title:episode_url;vo.length=adVO!=null?adVO.duration:String(media.duration.toFixed(1))==="NaN"?86400:String(media.duration.toFixed(1));vo.videotype=adVO!=null?adVO.type:"content";_ref=this.value.events;for(type in _ref){events=_ref[type];if((eventName!=null)&&(events!=null)&&events.length>0){for(_i=0,_len=events.length;_i<_len;_i++){event=events[_i];if((event!=null?event.type:void 0)===eventName){for(key in event.data){vo[key.toLowerCase()]=event.data[key]}}}}}return vo};NielsensdkProxy.prototype.metaLoad=function(){this.nielsensdkSDK.ggPM("15",this.generateNielsenVO());this.facade.logger.log("[AMP Nielsensdk Event] : loadMetadata")};NielsensdkProxy.prototype.adStart=function(adVO){if((adVO!=null?adVO.type:void 0)==="midroll"){this.nielsensdkSDK.ggPM("7",this.generateNielsenVO());this.facade.logger.log("[AMP Nielsensdk Event] : stop")}this.nielsensdkSDK.ggPM("15",this.generateNielsenVO(adVO));this.facade.logger.log("[AMP Nielsensdk Event] : Ad Start")};NielsensdkProxy.prototype.adEnd=function(adVO){this.nielsensdkSDK.ggPM("7",this.generateNielsenVO(adVO));this.facade.logger.log("[AMP Nielsensdk Event] : Ad End");if((adVO!=null?adVO.type:void 0)==="midroll"){this.nielsensdkSDK.ggPM("15",this.generateNielsenVO());this.facade.logger.log("[AMP Nielsensdk Event] : Video Resume")}};NielsensdkProxy.prototype.start=function(adVO){if(adVO==null){adVO=null}if((adVO!=null?adVO.type:void 0)==="midroll"){this.nielsensdkSDK.ggPM("15",this.generateNielsenVO(adVO,"resume"));this.facade.logger.log("[AMP Nielsensdk Event] : Content Resume")}else{this.nielsensdkSDK.ggPM("15",this.generateNielsenVO(null,"started"));this.facade.logger.log("[AMP Nielsensdk Event] : Content Play")}};NielsensdkProxy.prototype.end=function(){var currentTime;currentTime=this.facade.player.getCurrentTime().toFixed(1);this.nielsensdkSDK.ggPM("57",currentTime);this.facade.logger.log("[AMP Nielsensdk Event] : Video Ended");this.cur_position=0};NielsensdkProxy.prototype.timeupdate=function(){if(this.isLive){this.nielsensdkSDK.ggPM("49",Math.floor(Date.now()/1000));this.facade.logger.log("[AMP nielsensdk Event] : timeupdate Live")}else{this.cur_position=this.facade.player.getCurrentTime().toFixed(1);if(Math.abs(this.timer-this.cur_position)>this.queryInterval){this.timer=this.cur_position;this.nielsensdkSDK.ggPM("49",this.cur_position);this.facade.logger.log("[AMP Nielsensdk Event] : timeupdate",this.cur_position)}}};function NielsensdkStartCommand(){NielsensdkStartCommand.__super__.constructor.call(this)}__extends(NielsensdkStartCommand,puremvc.SimpleCommand);NielsensdkStartCommand.prototype.execute=function(notification){var nielsensdk;nielsensdk=this.facade.retrieveProxy(NielsensdkProxy.NAME);nielsensdk.start()};function NielsensdkAdStartCommand(){NielsensdkAdStartCommand.__super__.constructor.call(this)}__extends(NielsensdkAdStartCommand,puremvc.SimpleCommand);NielsensdkAdStartCommand.prototype.execute=function(notification){var nielsensdk;nielsensdk=this.facade.retrieveProxy(NielsensdkProxy.NAME);nielsensdk.adStart(notification.body)};function NielsensdkAdEndCommand(){NielsensdkAdEndCommand.__super__.constructor.call(this)}__extends(NielsensdkAdEndCommand,puremvc.SimpleCommand);NielsensdkAdEndCommand.prototype.execute=function(notification){var nielsensdk;nielsensdk=this.facade.retrieveProxy(NielsensdkProxy.NAME);nielsensdk.adEnd(notification.body)};function NielsensdkEndCommand(){NielsensdkEndCommand.__super__.constructor.call(this)}__extends(NielsensdkEndCommand,puremvc.SimpleCommand);NielsensdkEndCommand.prototype.execute=function(notification){var nielsensdk;nielsensdk=this.facade.retrieveProxy(NielsensdkProxy.NAME);nielsensdk.end()};function NielsensdkMetaloadCommand(){NielsensdkMetaloadCommand.__super__.constructor.call(this)}__extends(NielsensdkMetaloadCommand,puremvc.SimpleCommand);NielsensdkMetaloadCommand.prototype.execute=function(notification){var nielsensdk;nielsensdk=this.facade.retrieveProxy(NielsensdkProxy.NAME);nielsensdk.metaLoad()};function NielsensdkTimeupdateCommand(){NielsensdkTimeupdateCommand.__super__.constructor.call(this)}__extends(NielsensdkTimeupdateCommand,puremvc.SimpleCommand);NielsensdkTimeupdateCommand.prototype.execute=function(notification){var nielsensdk;nielsensdk=this.facade.retrieveProxy(NielsensdkProxy.NAME);nielsensdk.timeupdate()};function NielsenPlugin(){NielsenPlugin.__super__.constructor.call(this)}__extends(NielsenPlugin,Plugin);NielsenPlugin.prototype.moduleName="nielsen";NielsenPlugin.prototype.createController=function(){var event,events,_i,_len,_ref,_ref1;events=(_ref=this.config)!=null?(_ref1=_ref.events)!=null?_ref1.video:void 0:void 0;if(!(events!=null)){return}for(_i=0,_len=events.length;_i<_len;_i++){event=events[_i];if(event.type==="started"){this.registerCommand(Notifications.STARTED,NielsenStartCommand);this.registerCommand(Notifications.CONTENT_CHANGED,NielsenStartCommand)}if(event.type==="ended"){this.registerCommand(Notifications.ENDED,NielsenEndCommand);this.registerCommand(Notifications.CHANGE_CONTENT,NielsenEndCommand)}}};NielsenPlugin.prototype.createModel=function(){this.registerProxy(new NielsenProxy(this.config))};NielsenPlugin.prototype.listNotificationInterests=function(){return[Notifications.STARTED,Notifications.ENDED,Notifications.CONTENT_CHANGED,Notifications.CHANGE_CONTENT]};AMP.registerPlugin("nielsen","html",NielsenPlugin);AMP.registerPlugin("nielsen","flash",NielsenWrapper);function ComscoreStreamsenseWrapper(){return ComscoreStreamsenseWrapper.__super__.constructor.apply(this,arguments)}__extends(ComscoreStreamsenseWrapper,PluginWrapper);ComscoreStreamsenseWrapper.NAME="ComscoreStreamsenseWrapper";ComscoreStreamsenseWrapper.prototype.createXML=function(xml){var application,metrics,prop,props,vendor,_i,_len;application=xml.firstChild;metrics=xml.getElementsByTagName("metrics")[0];if(!(metrics!=null)){metrics=xml.createElement("metrics");application.appendChild(metrics)}vendor=xml.createElement("vendor");vendor.setAttribute("id","comscoreStreamSense");metrics.appendChild(vendor);props=[{value:this.config.data.clientId,key:"C2"},{value:this.config.data.publisherSecret,key:"PUBLISHER_SECRET"},{value:this.config.data.appVersion,key:"APP_VERSION"},{value:this.config.data.metadata,key:"metadata"}];for(_i=0,_len=props.length;_i<_len;_i++){prop=props[_i];if(prop.value!=null){this.createProperty(xml,prop.key,prop.value,vendor)}}return xml};function ComscoreStreamsenseProxy(config){ComscoreStreamsenseProxy.__super__.constructor.call(this,config)}__extends(ComscoreStreamsenseProxy,PluginProxy);ComscoreStreamsenseProxy.NAME=ModuleProxy.NAME;ComscoreStreamsenseProxy.prototype.defaults={plugin:{js:null},data:{clientId:null,publisherSecret:null,appVersion:null,metadata:null}};ComscoreStreamsenseProxy.prototype.myStreamingTag=null;ComscoreStreamsenseProxy.prototype.getScript=function(){return this.config.plugin.js};ComscoreStreamsenseProxy.prototype.initialize=function(){ComscoreStreamsenseProxy.__super__.initialize.call(this);if((typeof ns_!=="undefined"&&ns_!==null)&&this.myStreamingTag===null){this.myStreamingTag=new ns_.StreamingTag({customerC2:this.value.data.clientId})}};ComscoreStreamsenseProxy.prototype.mediaChange=function(){if(this.myStreamingTag!=null){this.myStreamingTag.stop()}this.myStreamingTag=null;this.myStreamingTag=new ns_.StreamingTag({customerC2:this.value.data.clientId});this.facade.logger.log("[AMP ComscoreStreamsense Event] : Media Change, StreamTag ReInitialize")};ComscoreStreamsenseProxy.prototype.adStart=function(adVO){if(adVO==null){adVO=null}this.myStreamingTag.playVideoAdvertisement(this.getMetaData());this.facade.logger.log("[AMP ComscoreStreamsense Event] : Ad Start")};ComscoreStreamsenseProxy.prototype.start=function(adVO){if(adVO==null){adVO=null}this.myStreamingTag.playVideoContentPart(this.getMetaData());this.facade.logger.log("[AMP ComscoreStreamsense Event] : Content Play")};ComscoreStreamsenseProxy.prototype.stop=function(){this.myStreamingTag.stop();this.facade.logger.log("[AMP ComscoreStreamsense Event] : Stop")};ComscoreStreamsenseProxy.prototype.ended=function(){this.myStreamingTag=null;this.myStreamingTag=new ns_.StreamingTag({customerC2:this.value.data.clientId});this.facade.logger.log("[AMP ComscoreStreamsense Event] : End")};ComscoreStreamsenseProxy.prototype.getMetaData=function(){var metadata;metadata=this.value.data.metadata;return metadata};function ComscoreStreamsenseStartedCommand(){ComscoreStreamsenseStartedCommand.__super__.constructor.call(this)}__extends(ComscoreStreamsenseStartedCommand,puremvc.SimpleCommand);ComscoreStreamsenseStartedCommand.prototype.execute=function(notification){var comscoreProxy;comscoreProxy=this.facade.retrieveProxy(ComscoreStreamsenseProxy.NAME);comscoreProxy.start(notification.body)};function ComscoreStreamsenseAdStartedCommand(){ComscoreStreamsenseAdStartedCommand.__super__.constructor.call(this)}__extends(ComscoreStreamsenseAdStartedCommand,puremvc.SimpleCommand);ComscoreStreamsenseAdStartedCommand.prototype.execute=function(notification){var comscoreProxy;comscoreProxy=this.facade.retrieveProxy(ComscoreStreamsenseProxy.NAME);comscoreProxy.adStart(notification.body)};function ComscoreStreamsenseStopCommand(){ComscoreStreamsenseStopCommand.__super__.constructor.call(this)}__extends(ComscoreStreamsenseStopCommand,puremvc.SimpleCommand);ComscoreStreamsenseStopCommand.prototype.execute=function(notification){var comscoreProxy;comscoreProxy=this.facade.retrieveProxy(ComscoreStreamsenseProxy.NAME);comscoreProxy.stop(notification.body)};function ComscoreStreamsenseAdErrorCommand(){ComscoreStreamsenseAdErrorCommand.__super__.constructor.call(this)}__extends(ComscoreStreamsenseAdErrorCommand,puremvc.SimpleCommand);ComscoreStreamsenseAdErrorCommand.prototype.execute=function(notification){var comscoreProxy;comscoreProxy=this.facade.retrieveProxy(ComscoreStreamsenseProxy.NAME);comscoreProxy.adStart(notification.body);comscoreProxy.stop(notification.body)};function ComscoreStreamsenseChangeMediaCommand(){ComscoreStreamsenseChangeMediaCommand.__super__.constructor.call(this)}__extends(ComscoreStreamsenseChangeMediaCommand,puremvc.SimpleCommand);ComscoreStreamsenseChangeMediaCommand.prototype.execute=function(notification){var comscoreProxy;comscoreProxy=this.facade.retrieveProxy(ComscoreStreamsenseProxy.NAME);comscoreProxy.mediaChange()};function ComscoreStreamsenseEndedCommand(){ComscoreStreamsenseEndedCommand.__super__.constructor.call(this)}__extends(ComscoreStreamsenseEndedCommand,puremvc.SimpleCommand);ComscoreStreamsenseEndedCommand.prototype.execute=function(notification){var comscoreProxy;comscoreProxy=this.facade.retrieveProxy(ComscoreStreamsenseProxy.NAME);comscoreProxy.ended()};function NielsensdkPlugin(){NielsensdkPlugin.__super__.constructor.call(this)}__extends(NielsensdkPlugin,Plugin);NielsensdkPlugin.prototype.moduleName="nielsensdk";NielsensdkPlugin.prototype.createModel=function(){this.registerProxy(new NielsensdkProxy(this.config))};NielsensdkPlugin.prototype.createController=function(){this.registerCommand(AdNotifications.BREAK_END,NielsensdkAdEndCommand);this.registerCommand(AdNotifications.AD_STARTED,NielsensdkAdStartCommand);this.registerCommand(Notifications.STARTED,NielsensdkStartCommand);this.registerCommand(Notifications.ENDED,NielsensdkEndCommand);this.registerCommand(Notifications.TIME_UPDATE,NielsensdkTimeupdateCommand);this.registerCommand(AdNotifications.AD_TIME_REMAINING,NielsensdkTimeupdateCommand)};NielsensdkPlugin.prototype.listNotificationInterests=function(){return[AdNotifications.AD_STARTED,AdNotifications.BREAK_END,Notifications.STARTED,Notifications.ENDED,Notifications.LOADED_METADATA,Notifications.TIME_UPDATE,Notifications.CONTENT_CHANGED,Notifications.CHANGE_CONTENT,AdNotifications.AD_TIME_REMAINING]};AMP.registerPlugin("nielsensdk","html",NielsensdkPlugin);AMP.registerPlugin("nielsensdk","flash",NielsensdkWrapper);function ComscoreProxy(config){ComscoreProxy.__super__.constructor.call(this,config)}__extends(ComscoreProxy,DataBoundConfigurationProxy);ComscoreProxy.prototype.configurationName="comscore";ComscoreProxy.NAME=ModuleProxy.NAME;ComscoreProxy.prototype.defaults={url:"http://b.scorecardresearch.com/b",events:{ads:null,video:null},data:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:null,c8:null,c9:null,c10:null,c14:null}};ComscoreProxy.prototype.adStart=function(){var url;url=this.constructURL("ads","started");Utils.beacon(url)};ComscoreProxy.prototype.videoStart=function(){var url;url=this.constructURL("video","started");Utils.beacon(url)};ComscoreProxy.prototype.constructURL=function(target,type){var data,event,events,item,key,query,url,value,_i,_len,_ref,_ref1,_ref2;data={};events=(_ref=this.value.events)!=null?_ref[target]:void 0;if(events!=null){for(_i=0,_len=events.length;_i<_len;_i++){item=events[_i];if(item.type===type){event=item}}}_ref1=this.value.data;for(key in _ref1){value=_ref1[key];data[key]=(event!=null?(_ref2=event.data)!=null?_ref2[key]:void 0:void 0)||value}if(data.c7==null){data.c7=document.location.href.substr(0,512)}if(data.c8==null){data.c8=document.referrer.substr(0,512)}if(data.c9==null){data.c9=document.title}if(data.cv==null){data.cv="2.0"}data.rn=Date.now();url=this.value.url;query=[];for(key in data){value=data[key];if((value!=null)&&value!==""){query.push(key+"="+escape(value))}}if(query.length>0){url+="?"+query.join("&")}return url.substr(0,2080)};function ComscoreWrapper(){return ComscoreWrapper.__super__.constructor.apply(this,arguments)}__extends(ComscoreWrapper,PluginWrapper);ComscoreWrapper.NAME="ComscoreWrapper";ComscoreWrapper.prototype.createXML=function(xml){var application,element,event,events,map,metrics,node,prop,props,text,type,vendor,_i,_j,_len,_len1,_ref,_ref1,_ref2;application=xml.firstChild;metrics=xml.getElementsByTagName("metrics")[0];if(!(metrics!=null)){metrics=xml.createElement("metrics");application.appendChild(metrics)}vendor=xml.createElement("vendor");vendor.setAttribute("id","comscore");metrics.appendChild(vendor);map={ads:{started:"adStart",ended:"adComplete"},video:{started:"videoStart",ended:"videoComplete"}};props=[{value:"c1",key:"COMSCORE_CSC1"},{value:"c2",key:"COMSCORE_CSC2"},{value:"c3",key:"COMSCORE_CSC3"},{value:"c4",key:"COMSCORE_CSC4"},{value:"c5",key:"COMSCORE_CSC5"},{value:"c6",key:"COMSCORE_CSC6"},{value:"c7",key:"COMSCORE_CSC7"},{value:"c8",key:"COMSCORE_CSC8"},{value:"c9",key:"COMSCORE_CSC9"},{value:"c10",key:"COMSCORE_CSC10"},{value:"c11",key:"COMSCORE_CSC14"}];_ref=this.config.events;for(type in _ref){events=_ref[type];if((events!=null)&&events.length>0){for(_i=0,_len=events.length;_i<_len;_i++){event=events[_i];node=xml.createElement("property");node.setAttribute("key",map[type][event.type]);vendor.appendChild(node);element=xml.createElement("property");element.setAttribute("key","COMSCORE_CSURL");text=XMLUtils.createTextContent(xml,this.config.url);element.appendChild(text);node.appendChild(element);for(_j=0,_len1=props.length;_j<_len1;_j++){prop=props[_j];text=((_ref1=event.data)!=null?_ref1[prop.value]:void 0)||((_ref2=this.config.data)!=null?_ref2[prop.value]:void 0);if((text!=null)&&text!==""){element=xml.createElement("property");element.setAttribute("key",prop.key);text=XMLUtils.createTextContent(xml,text);element.appendChild(text);node.appendChild(element)}}}}}return xml};function ComscoreAdStartCommand(){ComscoreAdStartCommand.__super__.constructor.call(this)}__extends(ComscoreAdStartCommand,puremvc.SimpleCommand);ComscoreAdStartCommand.prototype.execute=function(notification){var comscore;comscore=this.facade.retrieveProxy(ComscoreProxy.NAME);comscore.adStart()};function ComscoreStartCommand(){ComscoreStartCommand.__super__.constructor.call(this)}__extends(ComscoreStartCommand,puremvc.SimpleCommand);ComscoreStartCommand.prototype.execute=function(notification){var comscore;comscore=this.facade.retrieveProxy(ComscoreProxy.NAME);comscore.videoStart()};function ComscoreStreamsensePlugin(){ComscoreStreamsensePlugin.__super__.constructor.call(this)}__extends(ComscoreStreamsensePlugin,Plugin);ComscoreStreamsensePlugin.prototype.moduleName="comscorestreamsense";ComscoreStreamsensePlugin.prototype.createModel=function(){this.registerProxy(new ComscoreStreamsenseProxy(this.config))};ComscoreStreamsensePlugin.prototype.createController=function(){this.registerCommand(Notifications.MEDIA_CHANGE,ComscoreStreamsenseChangeMediaCommand);this.registerCommand(AdNotifications.AD_STARTED,ComscoreStreamsenseAdStartedCommand);this.registerCommand(AdNotifications.AD_RESUME,ComscoreStreamsenseAdStartedCommand);this.registerCommand(AdNotifications.AD_PAUSED,ComscoreStreamsenseStopCommand);this.registerCommand(AdNotifications.AD_ENDED,ComscoreStreamsenseStopCommand);this.registerCommand(AdNotifications.AD_ERROR,ComscoreStreamsenseAdErrorCommand);this.registerCommand(Notifications.PLAYING,ComscoreStreamsenseStartedCommand);this.registerCommand(Notifications.PAUSED,ComscoreStreamsenseStopCommand);this.registerCommand(Notifications.ENDED,ComscoreStreamsenseEndedCommand)};ComscoreStreamsensePlugin.prototype.listNotificationInterests=function(){return[Notifications.MEDIA_CHANGE,AdNotifications.AD_STARTED,AdNotifications.AD_RESUME,AdNotifications.AD_PAUSED,AdNotifications.AD_ENDED,AdNotifications.AD_ERROR,Notifications.PLAYING,Notifications.PAUSED,Notifications.ENDED]};AMP.registerPlugin("comscorestreamsense","html",ComscoreStreamsensePlugin);AMP.registerPlugin("comscorestreamsense","flash",ComscoreStreamsenseWrapper);function OmnitureAdProxy(proxy){this.proxy=proxy;OmnitureAdProxy.__super__.constructor.call(this);this.plugin=this.proxy.plugin;this.error=this.proxy.error}__extends(OmnitureAdProxy,puremvc.Proxy);OmnitureAdProxy.NAME="OmnitureAdProxy";OmnitureAdProxy.prototype.proxy=null;OmnitureAdProxy.prototype.plugin=null;OmnitureAdProxy.prototype.error=null;OmnitureAdProxy.prototype.currentTime=null;OmnitureAdProxy.prototype.started=false;OmnitureAdProxy.prototype.ad=null;OmnitureAdProxy.prototype.getAd=function(){return this.ad};OmnitureAdProxy.prototype.setAd=function(value){this.started=false;this.currentTime=0;return this.ad=value};OmnitureAdProxy.prototype.setTimeRemaining=function(time){if(!(this.ad!=null)){return}this.currentTime=this.ad.duration-time;return time};OmnitureAdProxy.prototype.start=function(){try{this.plugin.Media.openAd(this.ad.title,this.ad.duration,this.proxy.value.playerName,this.proxy.getMediaName(),this.ad.type,this.ad.position,this.ad.cpm);this.started=true}catch(error){this.error("open",error)}};OmnitureAdProxy.prototype.play=function(){if(this.started!==true){this.start()}try{this.plugin.Media.play(this.ad.title,this.currentTime||0)}catch(error){this.error("ad play",error)}};OmnitureAdProxy.prototype.pause=function(){try{this.plugin.Media.stop(this.ad.title,this.currentTime)}catch(error){this.error("ad pause",error)}};OmnitureAdProxy.prototype.ended=function(){if(this.started===false){return}try{this.started=false;this.plugin.Media.stop(this.ad.title,this.ad.duration);this.plugin.Media.close(this.ad.title)}catch(error){this.error("ad end",error)}};function OmnitureAdLoadedCommand(){OmnitureAdLoadedCommand.__super__.constructor.call(this)}__extends(OmnitureAdLoadedCommand,PluginCommand);OmnitureAdLoadedCommand.prototype.execute=function(notification){this.config.ads.setAd(notification.getBody())};function HeartbeatProxy(config){HeartbeatProxy.__super__.constructor.call(this,config)}__extends(HeartbeatProxy,PluginProxy);HeartbeatProxy.NAME=ModuleProxy.NAME;HeartbeatProxy.prototype.defaults={main:"s",heartbeat:null,account:null,playerName:null,mediaName:null,trackingServer:null,visitorNamespace:null};HeartbeatProxy.prototype.heartbeatConfig=null;HeartbeatProxy.prototype.delegate=null;HeartbeatProxy.prototype.media=null;HeartbeatProxy.prototype.started=false;HeartbeatProxy.prototype.ads=null;HeartbeatProxy.prototype.getMedia=function(){return this.media};HeartbeatProxy.prototype.setMedia=function(value){this.started=false;return this.media=value};HeartbeatProxy.prototype.setAd=function(value){this.adVO=value};HeartbeatProxy.prototype.getMediaName=function(){return this.getConfigurationData().mediaName||this.media.title};HeartbeatProxy.prototype.initialize=function(){var aaPlugin,appMeasurement,config,heartbeatConfig,visitor;HeartbeatProxy.__super__.initialize.call(this);this.delegate=this.createDelegate();config=this.getConfigurationData();appMeasurement=new AppMeasurement();appMeasurement.account=config.account;appMeasurement.trackingServer=config.trackingServer;if((config.visitorNamespace!=null)&&(typeof Visitor!=="undefined"&&Visitor!==null)){appMeasurement.visitorNamespace=config.visitorNamespace;visitor=new Visitor("2B8D246452DD9FBF0A490D45");visitor.trackingServer=config.trackingServer;appMeasurement.visitor=visitor}aaPlugin=new ADB.va.plugins.AdobeAnalyticsPlugin(appMeasurement);this.plugin=new ADB.va.VideoHeartbeat(this.delegate,[aaPlugin]);heartbeatConfig=new ADB.va.ConfigData();heartbeatConfig.trackingServer="http://heartbeats.omtrdc.net";heartbeatConfig.jobId="sc_va";heartbeatConfig.debugLogging=this.facade.logger.enabled;heartbeatConfig.publisher=this.getConfigurationData().heartbeat.publisher;this.plugin.configure(heartbeatConfig)};HeartbeatProxy.prototype.createPlugin=function(){return ADB.va.VideoHeartbeat};HeartbeatProxy.prototype.createDelegate=function(){var delegate,_this=this;delegate=new ADB.va.PlayerDelegate();delegate.getVideoInfo=function(){var playbackCore,videoInfo;playbackCore=_this.facade.player.retrieveProxy(PlayerProxy.NAME).getActivePlaybackCore();videoInfo=new ADB.va.VideoInfo();videoInfo.id=_this.media.guid||_this.media.title;videoInfo.playerName=_this.media.title;videoInfo.length=_this.media.temporalType==="live"?-1:playbackCore.getDuration();videoInfo.streamType=_this.media.temporalType||ADB.va.ASSET_TYPE_VOD;videoInfo.playhead=playbackCore.getCurrentTime();return videoInfo};delegate.getAdInfo=function(){var adInfo;if(!(_this.adVO!=null)){return null}adInfo=new ADB.va.AdInfo();adInfo.id=_this.adVO.id;adInfo.length=_this.adVO.duration;adInfo.position=_this.adVO.position;adInfo.name=_this.adVO.title;adInfo.cpm="";return adInfo};delegate.getChapterInfo=function(){var chapterInfo;if(!(_this.media.scenes!=null)){return null}chapterInfo=new ADB.va.ChapterInfo();chapterInfo.name="";chapterInfo.length=-1;chapterInfo.position="1";chapterInfo.startTime=-1;return chapterInfo};delegate.onError=function(error){_this.facade.logger.error("Heartbeat Error:",error)};delegate.getQoSInfo=function(){return null};return delegate};HeartbeatProxy.prototype.start=function(){try{this.plugin.trackVideoLoad();this.started=true}catch(error){this.error(error)}};HeartbeatProxy.prototype.play=function(){if(this.started!==true){this.start()}try{this.plugin.trackPlay()}catch(error){this.error(error)}};HeartbeatProxy.prototype.pause=function(){try{this.plugin.trackPause()}catch(error){this.error(error)}};HeartbeatProxy.prototype.seeking=function(){try{this.plugin.trackSeekStart()}catch(error){this.error(error)}};HeartbeatProxy.prototype.seeked=function(){try{this.plugin.trackSeekComplete()}catch(error){this.error(error)}};HeartbeatProxy.prototype.ended=function(){try{this.plugin.trackComplete();this.plugin.trackVideoUnload();this.started=false}catch(error){this.error(error)}};function OmniturePlayCommand(){OmniturePlayCommand.__super__.constructor.call(this)}__extends(OmniturePlayCommand,PluginCommand);OmniturePlayCommand.prototype.execute=function(notification){this.config.play()};function OmnitureChangeMediaCommand(){OmnitureChangeMediaCommand.__super__.constructor.call(this)}__extends(OmnitureChangeMediaCommand,PluginCommand);OmnitureChangeMediaCommand.prototype.execute=function(notification){this.config.setMedia(notification.getBody());this.facade.removeCommand(Notifications.PLAY)};function OmniturePauseCommand(){OmniturePauseCommand.__super__.constructor.call(this)}__extends(OmniturePauseCommand,PluginCommand);OmniturePauseCommand.prototype.execute=function(notification){this.config.pause()};function OmnitureSeekingCommand(){OmnitureSeekingCommand.__super__.constructor.call(this)}__extends(OmnitureSeekingCommand,PluginCommand);OmnitureSeekingCommand.prototype.execute=function(notification){this.config.seeking()};function OmnitureSeekedCommand(){OmnitureSeekedCommand.__super__.constructor.call(this)}__extends(OmnitureSeekedCommand,PluginCommand);OmnitureSeekedCommand.prototype.execute=function(notification){this.config.seeked()};function OmnitureEndedCommand(){OmnitureEndedCommand.__super__.constructor.call(this)}__extends(OmnitureEndedCommand,PluginCommand);OmnitureEndedCommand.prototype.execute=function(notification){this.config.ended()};function OmnitureContentChangedCommand(){OmnitureContentChangedCommand.__super__.constructor.call(this)}__extends(OmnitureContentChangedCommand,PluginCommand);OmnitureContentChangedCommand.prototype.execute=function(notification){this.config.setMedia(notification.getBody());this.config.start()};function OmnitureStartCommand(){OmnitureStartCommand.__super__.constructor.call(this)}__extends(OmnitureStartCommand,PluginCommand);OmnitureStartCommand.prototype.execute=function(notification){this.config.start();this.facade.registerCommand(Notifications.PLAY,OmniturePlayCommand)};function OmnitureAdStartedCommand(){OmnitureAdStartedCommand.__super__.constructor.call(this)}__extends(OmnitureAdStartedCommand,PluginCommand);OmnitureAdStartedCommand.prototype.execute=function(notification){this.config.ads.start()};function OmnitureAdPlayCommand(){OmnitureAdPlayCommand.__super__.constructor.call(this)}__extends(OmnitureAdPlayCommand,PluginCommand);OmnitureAdPlayCommand.prototype.execute=function(notification){this.config.ads.play()};function OmnitureAdPauseCommand(){OmnitureAdPauseCommand.__super__.constructor.call(this)}__extends(OmnitureAdPauseCommand,PluginCommand);OmnitureAdPauseCommand.prototype.execute=function(notification){this.config.ads.pause()};function OmnitureAdBreakEndCommand(){OmnitureAdBreakEndCommand.__super__.constructor.call(this)}__extends(OmnitureAdBreakEndCommand,PluginCommand);OmnitureAdBreakEndCommand.prototype.execute=function(notification){this.config.ads.ended()};function OmnitureAdTimeRemainingCommand(){OmnitureAdTimeRemainingCommand.__super__.constructor.call(this)}__extends(OmnitureAdTimeRemainingCommand,PluginCommand);OmnitureAdTimeRemainingCommand.prototype.execute=function(notification){this.config.ads.setTimeRemaining(notification.getBody())};function OmnitureWrapper(){return OmnitureWrapper.__super__.constructor.apply(this,arguments)}__extends(OmnitureWrapper,PluginWrapper);OmnitureWrapper.NAME="OmnitureWrapper";OmnitureWrapper.prototype.createXML=function(xml){var application,contextData,contextDataMapping,event,events,intervalProp,intervalReached,intervals,key,linkTracking,linkTrackingData,media,metrics,milestone,milestones,prop,property,props,trackMilestone,trackMilestones,type,value,vendor,_i,_j,_k,_l,_len,_len1,_len2,_len3,_len4,_len5,_len6,_m,_n,_o,_ref,_ref1,_ref2;application=xml.firstChild;metrics=xml.getElementsByTagName("metrics")[0];if(!(metrics!=null)){metrics=xml.createElement("metrics");application.appendChild(metrics)}vendor=xml.createElement("vendor");vendor.setAttribute("id","omniture");metrics.appendChild(vendor);props=[{value:this.config.channel,key:"OMNITURE_CHANNEL"},{value:this.config.account,key:"OMNITURE_ACCOUNT"},{value:this.config.debugTracking,key:"OMNITURE_DEBUG_TRACKING"},{value:this.config.trackLocal,key:"OMNITURE_TRACK_LOCAL"},{value:this.config.visitorNamespace,key:"OMNITURE_VISITOR_NAMESPACE"},{value:this.config.trackingServer,key:"OMNITURE_TRACKING_SERVER"},{value:this.config.trackingServerSecure,key:"OMNITURE_TRACKING_SERVER_SECURE"},{value:this.config.currencyCode,key:"OMNITURE_CURRENCY_CODE"},{value:this.config.trackWhilePlaying,key:"OMNITURE_TRACK_WHILE_PLAYING"},{value:this.config.trackMediaMethods,key:"OMNITURE_TRACK_MEDIA_METHODS"},{value:this.config.mediaName,key:"OMNITURE_MEDIA_NAME"},{value:this.config.playerName,key:"OMNITURE_PLAYER_NAME"}];for(_i=0,_len=props.length;_i<_len;_i++){prop=props[_i];if(prop.value!=null){this.createProperty(xml,prop.key,prop.value,vendor)}}media=this.config.Media;if(media!=null){props=[{value:media.autoTrack,key:"OMNITURE_AUTO_TRACK"},{value:media.segmentByMilestones,key:"OMNITURE_SEGMENT_MILESTONES"},{value:media.trackVars,key:"OMNITURE_TRACKVARS"},{value:media.trackEvents,key:"OMNITURE_TRACKEVENTS"},{value:media.trackUsingContextData,key:"OMNITURE_TRACK_CONTEXT_DATA"},{value:media.trackSecondIntervals,key:"OMNITURE_TRACKSECOND_INTERVALS"}];for(_j=0,_len1=props.length;_j<_len1;_j++){prop=props[_j];if(prop.value!=null){this.createProperty(xml,prop.key,prop.value,vendor)}}if(media.trackMilestones!=null){trackMilestones=this.createProperty(xml,"OMNITURE_TRACK_MILESTONES",null,vendor);milestones=media.trackMilestones;for(_k=0,_len2=milestones.length;_k<_len2;_k++){milestone=milestones[_k];trackMilestone=this.createProperty(xml,milestone.percent,null,trackMilestones);for(key in milestone){value=milestone[key];if(key!=="percent"){this.createProperty(xml,key,value,trackMilestone)}}}}contextDataMapping=media.contextDataMapping;if(contextDataMapping!=null){contextData=this.createProperty(xml,"OMNITURE_CONTEXT_DATA",null,vendor);for(key in contextDataMapping){value=contextDataMapping[key];if(typeof value==="string"){this.createProperty(xml,key,value,contextData)}if(value instanceof Array){property=this.createProperty(xml,key,null,contextData);for(_l=0,_len3=value.length;_l<_len3;_l++){milestone=value[_l];this.createProperty(xml,milestone.percent,milestone.events,property)}}}}}linkTracking=this.config.customLinkTracking;if(linkTracking!=null){linkTrackingData=this.createProperty(xml,"OMNITURE_CUSTOM_LINK_TRACKING",null,vendor);for(key in linkTracking){if(key==="intervalReached"){intervalReached=this.createProperty(xml,key,null,linkTrackingData);_ref=linkTracking[key];for(_m=0,_len4=_ref.length;_m<_len4;_m++){intervals=_ref[_m];intervalProp=this.createProperty(xml,intervals.interval,null,intervalReached);for(key in intervals){if(key!=="interval"){this.createProperty(xml,key,intervals[key],intervalProp)}}}}else{this.createProperty(xml,key,linkTracking[key],linkTrackingData)}}}events=(_ref1=this.config.events)!=null?_ref1.video:void 0;if(events!=null){for(_n=0,_len5=events.length;_n<_len5;_n++){event=events[_n];switch(event.type){case"started":type="videoStart";break;case"ended":type="videoComplete";break;case"play":type="videoResume";break;case"pause":type="videoPause";break;default:type=event.type}this.createProperty(xml,type,event.data,vendor)}}events=(_ref2=this.config.events)!=null?_ref2.ads:void 0;if(events!=null){for(_o=0,_len6=events.length;_o<_len6;_o++){event=events[_o];type=event.type==="started"?"adStart":event.type==="ended"?"adComplete":event.type;this.createProperty(xml,type,event.data,vendor)}}};function CaptionCue(startTime,endTime,id){this.startTime=startTime;this.endTime=endTime;this.id=id}CaptionCue.prototype.id=null;CaptionCue.prototype.startTime=null;CaptionCue.prototype.endTime=null;CaptionCue.prototype.text=null;CaptionCue.prototype.html=null;CaptionCue.prototype.align=null;function OmnitureProxy(config){OmnitureProxy.__super__.constructor.call(this,config)}__extends(OmnitureProxy,PluginProxy);OmnitureProxy.NAME=ModuleProxy.NAME;OmnitureProxy.prototype.defaults={account:null,playerName:null,mediaName:null,main:"s"};OmnitureProxy.prototype.media=null;OmnitureProxy.prototype.started=false;OmnitureProxy.prototype.video=null;OmnitureProxy.prototype.ads=null;OmnitureProxy.prototype.getMedia=function(){return this.media};OmnitureProxy.prototype.setMedia=function(value){this.started=false;return this.media=value};OmnitureProxy.prototype.getMediaName=function(){return this.getConfigurationData().mediaName||this.media.title};OmnitureProxy.prototype.initialize=function(){var _ref;OmnitureProxy.__super__.initialize.call(this);if(this.plugin!=null){try{if(!(this.plugin.Media!=null)){this.plugin.loadModule("Media")}}catch(error){this.error("initialize",error)}if(((_ref=this.plugin.Media)!=null?_ref.openAd:void 0)!=null){this.ads=new OmnitureAdProxy(this);this.facade.registerProxy(this.ads);this.facade.registerCommand(AdNotifications.AD_LOADED,OmnitureAdLoadedCommand);this.facade.registerCommand(AdNotifications.AD_STARTED,OmnitureAdStartedCommand);this.facade.registerCommand(AdNotifications.AD_PLAY,OmnitureAdPlayCommand);this.facade.registerCommand(AdNotifications.AD_PAUSE,OmnitureAdPauseCommand);this.facade.registerCommand(AdNotifications.AD_TIME_REMAINING,OmnitureAdTimeRemainingCommand);this.facade.registerCommand(AdNotifications.BREAK_END,OmnitureAdBreakEndCommand)}this.video=this.facade.player.getMediaElement()}};OmnitureProxy.prototype.createPlugin=function(){return window[this.getConfigurationData().main]};OmnitureProxy.prototype.start=function(){try{this.plugin.Media.open(this.getMediaName(),this.media.duration,this.getConfigurationData().playerName);this.started=true;this.play()}catch(error){this.error(error)}};OmnitureProxy.prototype.play=function(){if(this.started!==true){this.start()}try{this.plugin.Media.play(this.getMediaName(),this.video.currentTime||0)}catch(error){this.error(error)}};OmnitureProxy.prototype.pause=function(){try{this.plugin.Media.stop(this.getMediaName(),this.video.currentTime)}catch(error){this.error(error)}};OmnitureProxy.prototype.seeking=function(){try{this.plugin.Media.stop(this.getMediaName(),this.video.currentTime)}catch(error){this.error(error)}};OmnitureProxy.prototype.seeked=function(){try{this.plugin.Media.play(this.getMediaName(),this.video.currentTime)}catch(error){this.error(error)}};OmnitureProxy.prototype.ended=function(){try{this.plugin.Media.stop(this.getMediaName(),this.video.currentTime);this.plugin.Media.close(this.getMediaName());this.started=false}catch(error){this.error(error)}};function SRTParser(){}SRTParser.prototype.parse=function(track,txt){var caption,captions,cue,end,index,parts,start,text,times,_i,_len;txt=txt.replace(/\r/g,"");captions=txt.split("\n\n");for(_i=0,_len=captions.length;_i<_len;_i++){caption=captions[_i];parts=caption.split("\n");try{index=parts[0];times=parts[1].match(/([0-9:\,]+)\s*-->\s*([0-9:\,]+)/).slice(1);start=Utils.flattenTimecode(times[0]);end=Utils.flattenTimecode(times[1]);text=parts.slice(2)}catch(err){Logger.warn("SRT Parsing Warning")}cue=new CaptionCue(start,end,"cue_"+index);cue.html="<p>"+text.join("<br />")+"</p>";cue.text=text.join("\n");track.cues.push(cue)}return track};function SMPTETTParser(){}SMPTETTParser.prototype.parse=function(track,xml){var captions,lang,styledElements,styles,tt,_this=this;if(typeof xml==="string"){xml=XMLUtils.parse(xml)}styles=Array.prototype.slice.call(xml.querySelectorAll("styling style"));styles.forEach(function(item,index,list){var attributes,id,style;style="";id=item.getAttribute("id")||item.getAttribute("xml:id");attributes=Array.prototype.slice.call(item.attributes);attributes.forEach(function(item,index,array){if(item.prefix==="tts"){return style+=Utils.formatStyleName(item.localName)+":"+item.nodeValue+";"}});track.styles[id]=style});styledElements=Array.prototype.slice.call(xml.querySelectorAll("body [style]"));styledElements.forEach(function(item,index,array){var id;id=item.getAttribute("style");item.setAttribute("style",track.styles[id])});tt=xml.querySelector("tt");lang=tt.getAttribute("lang")||tt.getAttribute("xml:lang");if(track.language===void 0||track.language===null){track.language=lang}captions=Array.prototype.slice.call(xml.querySelectorAll("body p[begin]"));captions.forEach(function(item,index,array){var align,cue,end,start,text;start=item.getAttribute("begin");item.removeAttribute("begin");if(item.getAttribute("end")!=null){end=item.getAttribute("end");item.removeAttribute("end")}else{if(captions[index+1]!=null){end=captions[index+1].getAttribute("begin")}}cue=new CaptionCue(Utils.flattenTimecode(start),Utils.flattenTimecode(end),"cue_"+index);align=item.getAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign");if(align!=null){cue.align=align==="center"?"middle":align;item.removeAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign")}text=XMLUtils.serialize(item);text=text.replace(/\s*xmlns="[^"]*"/,"");cue.html=text;text=text.replace(/^<p[^>]*>/,"");text=text.replace(/<\/p>$/,"");text=text.replace(/<br\/>/,"\n");text=text.replace(/<span style="([^"]*)"/,"<c.$1");text=text.replace(/<\/span>/,"</c>");cue.text=text;track.cues.push(cue)});return track};function ComscorePlugin(){ComscorePlugin.__super__.constructor.call(this)}__extends(ComscorePlugin,Plugin);ComscorePlugin.prototype.moduleName="comscore";ComscorePlugin.prototype.createController=function(){this.registerCommand(Notifications.STARTED,ComscoreStartCommand);this.registerCommand(Notifications.CONTENT_CHANGED,ComscoreStartCommand);this.registerCommand(AdNotifications.AD_STARTED,ComscoreAdStartCommand)};ComscorePlugin.prototype.createModel=function(){this.registerProxy(new ComscoreProxy(this.config))};ComscorePlugin.prototype.listNotificationInterests=function(){return[Notifications.STARTED,AdNotifications.AD_STARTED,Notifications.CONTENT_CHANGED]};AMP.registerPlugin("comscore","html",ComscorePlugin);AMP.registerPlugin("comscore","flash",ComscoreWrapper);function LiveCaptionProxy(){var com,_this=this;this.captions=[];this.head=document.getElementsByTagName("head")[0];com=window.com||{};com.akamai=com.akamai||{};com.akamai.amp=com.akamai.amp||{};com.akamai.amp.plugins=com.akamai.amp.plugins||{};com.akamai.amp.plugins.subply=com.akamai.amp.plugins.subply||{};com.akamai.amp.plugins.subply.response=function(json){_this.parse(json);_this.poll()};if(!(window.com!=null)){window.com=com}LiveCaptionProxy.__super__.constructor.call(this,this.constructor.NAME)}__extends(LiveCaptionProxy,puremvc.Proxy);LiveCaptionProxy.NAME="LiveCaptionProxy";LiveCaptionProxy.prototype.data={base:"http://test.plymedia.com.s3.amazonaws.com/online/Akamai_",interval:1000};LiveCaptionProxy.prototype.caption=null;LiveCaptionProxy.prototype.head=null;LiveCaptionProxy.prototype.script=null;LiveCaptionProxy.prototype.timeout=null;LiveCaptionProxy.prototype.getURL=function(){return this.data.url};LiveCaptionProxy.prototype.setURL=function(value){this.data.url=value;return value};LiveCaptionProxy.prototype.start=function(){this.send()};LiveCaptionProxy.prototype.poll=function(){var timeout,_this=this;timeout=setTimeout(function(){_this.send()},this.data.interval||1000)};LiveCaptionProxy.prototype.send=function(){if(this.script!=null){this.head.removeChild(this.script)}this.script=Utils.loadScript(this.data.base+this.data.url+".js?nocache="+Date.now())};LiveCaptionProxy.prototype.stop=function(){clearTimeout(timeout)};LiveCaptionProxy.prototype.parse=function(response){var html,text,_i,_len,_ref;if(response.Stream!==this.data.url){return}if((this.caption!=null)&&this.caption.id>=response.Ticks){return}this.caption=new CaptionCue(Utils.flattenTimecode(response.From),Utils.flattenTimecode(response.To),response.Ticks);this.caption.text=response.Text;html="";_ref=response.Text.split("\n");for(_i=0,_len=_ref.length;_i<_len;_i++){text=_ref[_i];if(html!==""){html+="<br />"}html+="<span>"+text+"</span>"}this.caption.html="<p>"+html+"</p>";this.sendNotification(CaptioningNotifications.CUE_CHANGE,[this.caption]);return this.caption};CaptionParsers={"application/ttml+xml":new SMPTETTParser(),"application/x-subrip":new SRTParser(),undefined:new SMPTETTParser()};function CaptioningTimeUpdateCommand(){CaptioningTimeUpdateCommand.__super__.constructor.call(this)}__extends(CaptioningTimeUpdateCommand,puremvc.SimpleCommand);CaptioningTimeUpdateCommand.prototype.execute=function(notification){var active,changed,cue,cues,index,proxy,time,track,_i,_len;time=notification.getBody();proxy=this.facade.retrieveProxy(CaptioningProxy.NAME);track=proxy.getTrack();if(!(track!=null)){return}active=track.activeCues;cues=track.cues;changed=false;for(_i=0,_len=cues.length;_i<_len;_i++){cue=cues[_i];if(time>=cue.startTime&&time<cue.endTime){if(!(__indexOf.call(active,cue)>=0)){active.push(cue);changed=true}}else{index=active.indexOf(cue);if(index!==-1){active.splice(index,1);changed=true}}}if(changed===true){this.sendNotification(CaptioningNotifications.CUE_CHANGE,active)}};function CaptioningChangeMediaCommand(){CaptioningChangeMediaCommand.__super__.constructor.call(this)}__extends(CaptioningChangeMediaCommand,puremvc.SimpleCommand);CaptioningChangeMediaCommand.prototype.execute=function(notification){var media,proxy;media=notification.getBody();proxy=this.facade.retrieveProxy(CaptioningProxy.NAME);if(media.track!=null){proxy.setTracks(media.track)}if(media.track!=null){this.sendNotification(CaptioningNotifications.ENABLED,true)}};function CaptioningVisibilityChangeCommand(){CaptioningVisibilityChangeCommand.__super__.constructor.call(this)}__extends(CaptioningVisibilityChangeCommand,puremvc.SimpleCommand);CaptioningVisibilityChangeCommand.prototype.execute=function(notification){var configProxy;configProxy=this.facade.retrieveProxy(CaptioningProxy.NAME);configProxy.setHidden(!notification.getBody())};var UserSettingsNotifications={SETTING_CHANGE:"settingchange",UPDATE_SETTINGS:"updatesettings"};function CaptioningStartedCommand(){CaptioningStartedCommand.__super__.constructor.call(this)}__extends(CaptioningStartedCommand,puremvc.SimpleCommand);CaptioningStartedCommand.prototype.execute=function(notification){var proxy,track,_ref;proxy=this.facade.retrieveProxy(CaptioningProxy.NAME);track=proxy.getTrack();if(!(track!=null)&&((_ref=proxy.getTracks())!=null?_ref.length:void 0)>0){track=proxy.autoSelectTrack()}if((track!=null?track.isLive:void 0)===true){this.facade.removeCommand(Notifications.TIME_UPDATE);proxy=this.facade.retrieveProxy(LiveCaptionProxy.NAME);if(!(proxy!=null)){proxy=new LiveCaptionProxy();this.facade.registerProxy(proxy)}proxy.setURL(track.src);proxy.start()}};function CaptioningWrapper(player,config){CaptioningWrapper.__super__.constructor.call(this,player,config)}__extends(CaptioningWrapper,PluginWrapper);CaptioningWrapper.NAME="CaptioningWrapper";CaptioningWrapper.prototype.hidden=true;CaptioningWrapper.prototype.createXML=function(xml){var application,player,subply,_ref;subply=(_ref=this.config.flash)!=null?_ref.subply:void 0;if(subply!=null){try{if(subply.timeMethod!=null){player=xml.getElementsByTagName("player")[0];player.setAttribute("subply_time_method",subply.timeMethod)}if(subply.plugin!=null){application=xml.firstChild;subply=xml.getElementsByTagName("subply")[0];if(!(subply!=null)){subply=xml.createElement("subply");application.appendChild(subply)}this.createProperty(xml,"SUBPLY_URL",this.config.flash.subply.plugin,subply)}}catch(error){this.facade.logger.error("[AMP CAPTIONING ERROR]",error)}}};CaptioningWrapper.prototype.createFlashVars=function(flashvars){var captionLangArr,captionUrlArr,config,track,_i,_len,_ref,_ref1;config=this.player.config;if(((_ref=config.media)!=null?_ref.track:void 0)!=null){track=Utils.selectTrack(config.media.track,"captions");if((track.src!=null)&&track.src!==""){flashvars.caption_url=track.src}if(config.media.track.length>1){captionUrlArr=[];captionLangArr=[];_ref1=config.media.track;for(_i=0,_len=_ref1.length;_i<_len;_i++){track=_ref1[_i];captionUrlArr.push(track.src);captionLangArr.push(track.srclang)}flashvars.caption_url=captionUrlArr.join(",");flashvars.caption_language=captionLangArr.join(",")}flashvars.caption_type=track.type!=null?encodeURIComponent(track.type):"application/ttml+xml"}};CaptioningWrapper.prototype.listNotificationInterests=function(){return CaptioningWrapper.__super__.listNotificationInterests.apply(this,arguments).concat([Notifications.MEDIA_CHANGE,FlashNotifications.CAPTIONING_REQUEST,FlashNotifications.CAPTION_LANG_CHANGE])};CaptioningWrapper.prototype.handleNotification=function(notification){var body,media,name,track,type;CaptioningWrapper.__super__.handleNotification.call(this,notification);name=notification.getName();body=notification.getBody();switch(name){case FlashNotifications.CAPTION_LANG_CHANGE:type="";break;case FlashNotifications.CAPTIONING_REQUEST:type="visibilitychange";body=body.enabled;this.hidden=!body;break;case Notifications.MEDIA_CHANGE:media=body;if(media.track!=null){track=Utils.selectTrack(media.track,"captions");if(((track!=null?track.src:void 0)!=null)&&track.src!==""){media.captioningUrl=track.src}media.captioningType=track.type||"application/ttml+xml"}}if((type!=null)&&type!==""){this.dispatchEvent(new Event(type,body))}};CaptioningWrapper.prototype.getHidden=function(){return this.hidden};CaptioningWrapper.prototype.setHidden=function(value){this.hidden=value;this.facade.getMediaElement().setPlayerProperty("captionDisplay",{visible:!value});return value};AMP.registerPlugin("captioning","flash",CaptioningWrapper);function CaptionTrack(track,onload){var xhr,_this=this;this.kind=track.kind;this.type=track.type;this.src=track.src;this.language=track.srclang;this.label=track.label||this.srclang||this.kind;this.cues=track.cues||[];this.styles=track.styles||{};this.activeCues=[];this.isLive=/live-subply/.test(this.type);if((this.src!=null)&&this.src!==""&&!this.isLive){xhr=Utils.get(this.src,{onload:function(){try{CaptionParsers[_this.type].parse(_this,xhr.response)}catch(error){Logger.error("Could not parse caption track: "+_this.src);return}if(typeof onload==="function"){onload()}},onerror:function(){Logger.error("Could not load caption track: "+_this.src)}})}else{setTimeout(onload,1)}}CaptionTrack.prototype.kind=null;CaptionTrack.prototype.src=null;CaptionTrack.prototype.language=null;CaptionTrack.prototype.cues=null;CaptionTrack.prototype.label=null;CaptionTrack.prototype.activeCues=null;CaptionTrack.prototype.type=null;CaptionTrack.prototype.styles=null;CaptionTrack.prototype.isLive=false;var CaptioningNotifications={VISIBILITY_CHANGE:"captioningvisibilitychange",ENABLED:"captioningEnabled",TRACKS_LOADED:"captioningTracksLoaded",TRACK_SELECTED:"captioningTrackSelected",CUE_CHANGE:"captioningCueChange",SETTINGS_VISIBILITY_CHANGE:"captioningsettingsvisibility",TOGGLE_SETTINGS_VISIBILITY:"togglesettingsvisibility",SETTINGS_CHANGE:"captioningsettingschange"};function CaptioningProxy(config){this.activeCaptions=[];this.providers={};this.tracks=[];CaptioningProxy.__super__.constructor.call(this,config)}__extends(CaptioningProxy,PluginProxy);CaptioningProxy.NAME=ModuleProxy.NAME;CaptioningProxy.prototype.defaults={};CaptioningProxy.prototype.hidden=true;CaptioningProxy.prototype.tracks=null;CaptioningProxy.prototype.track=null;CaptioningProxy.prototype.activeCaptions=null;CaptioningProxy.prototype.captions=null;CaptioningProxy.prototype.loaded=true;CaptioningProxy.prototype.useNative=function(){var _ref;return(this.facade.player.mediaElement.textTracks!=null)&&((_ref=window.TextTrackCue)!=null?_ref.length:void 0)===3};CaptioningProxy.prototype.getTracks=function(){return this.tracks};CaptioningProxy.prototype.setTracks=function(value){var count,item,loaded,track,trackLoaded,_i,_len,_this=this;this.tracks=[];this.track=null;count=value.length;loaded=0;trackLoaded=function(){loaded++;if(loaded===count){_this.sendNotification(CaptioningNotifications.TRACKS_LOADED,_this.tracks);_this.autoSelectTrack()}};for(_i=0,_len=value.length;_i<_len;_i++){item=value[_i];track=new CaptionTrack(item,trackLoaded);this.tracks.push(track)}return value};CaptioningProxy.prototype.getTrack=function(){return this.track};CaptioningProxy.prototype.setTrack=function(value){this.track=value;this.captions=this.track.cues;this.activeCaptions=[];this.sendNotification(CaptioningNotifications.TRACK_SELECTED,this.track);return value};CaptioningProxy.prototype.selectTrackByIndex=function(index){var track;if((0<=index&&index<this.tracks.length)){track=this.tracks[index];this.setTrack(track)}return track};CaptioningProxy.prototype.selectTrackByLanguage=function(lang){var item,track,_i,_len,_ref;_ref=this.tracks;for(_i=0,_len=_ref.length;_i<_len;_i++){item=_ref[_i];if(!(item.language===lang)){continue}track=item;break}if(track!=null){this.setTrack(track)}return track};CaptioningProxy.prototype.getHidden=function(){return this.hidden};CaptioningProxy.prototype.setHidden=function(value){this.hidden=value;return value};CaptioningProxy.prototype.autoSelectTrack=function(){var lang,track,_ref;lang=(_ref=this.facade.player.retrieveProxy(LocalizationProxy.NAME))!=null?_ref.getLanguage():void 0;if(lang!=null){lang=lang.split("-").shift();track=this.selectTrackByLanguage(lang)}if(!(track!=null)){track=this.tracks[0];this.setTrack(track)}return track};function CaptioningHTMLMediator(viewComponent){CaptioningHTMLMediator.__super__.constructor.call(this,null,null,viewComponent,null)}__extends(CaptioningHTMLMediator,ComponentMediator);CaptioningHTMLMediator.prototype.componentName="captioning-settings";CaptioningHTMLMediator.prototype.captioningObject={"default":{fontFamily:"Arial,sans-serif",size:"1.3em",scroll:"popout",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},appliedStyleText:"",selected:{fontFamily:null,size:null,fontColor:null,edgeType:null,edgeColor:null,backgroundColor:null,windowColor:null},preset1:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset2:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,0,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset3:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,1)",windowColor:"rgba(0,0,0,0)"},preset4:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,0,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},instance:null};CaptioningHTMLMediator.prototype.captionText=null;CaptioningHTMLMediator.prototype.settingsUiVisible=false;CaptioningHTMLMediator.prototype.captionningStyle=null;CaptioningHTMLMediator.prototype.swatchColorCurr=null;CaptioningHTMLMediator.prototype.swatchOpacityCurr=null;CaptioningHTMLMediator.prototype.colorPicker=null;CaptioningHTMLMediator.prototype.colorPickerOpacity=null;CaptioningHTMLMediator.prototype.advancedSettingContainer=null;CaptioningHTMLMediator.prototype.list={font:null,language:null,edge:null,size:null,scroll:null};CaptioningHTMLMediator.prototype.picker={color:null,background:null,edge:null,window:null};CaptioningHTMLMediator.prototype.toggle={ON:null,OFF:null,disabled:false};CaptioningHTMLMediator.prototype.scroll={type:"popout",typeSpeed:5,lines:2,scrollTimer:[],speed:10,popout:null,rollup:null,painton:null};CaptioningHTMLMediator.prototype.onRegister=function(){var applyButton,cancelButton,captionContainer,captionLabel,clonedSwatch,color,colorArray,isDefault,listOptions,preset1,preset2,preset3,preset4,previewContainer,previewPara,resetButton,swatch,titleBar,titleText,toggleAdvancedButton,_i,_len,_this=this;this.captionText=this.create("caption-text",this.viewComponent.parentElement);titleBar=this.create("captioning-titlebar");titleText=this.create("captioning-title",titleBar,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_TITLE));this.toggle.OFF=this.create("captioning-toggle-btn",titleBar,"div","OFF");this.toggle.ON=this.create("captioning-toggle-btn",titleBar,"div","ON");EventHandler.create(this.toggle.ON,EventHandler.CLICK,function(event){event.stopImmediatePropagation();if(!_this.toggle.disabled){_this.toggleButtonHandler(true)}return false});if(!this.toggle.disabled){this.classList.add("captioning-floater-btnselected",this.toggle.OFF)}EventHandler.create(this.toggle.OFF,EventHandler.CLICK,function(event){event.stopImmediatePropagation();if(!_this.toggle.disabled){_this.toggleButtonHandler(false)}return false});captionContainer=this.create("captioning-row");captionLabel=this.create("captioning-label",captionContainer,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_LANGUAGE));this.list.language=this.create("captioning-dropdown",captionContainer,"select");this.languageListPopulate();EventHandler.create(this.list.language,"change",function(event){var langIsSelected;event.stopImmediatePropagation();langIsSelected=event.target.selectedValue!=="None";_this.sendNotification(CaptioningNotifications.VISIBILITY_CHANGE,langIsSelected);if(langIsSelected){_this.facade.setTrack(_this.facade.selectTrackByIndex(event.target.selectedIndex))}return false});captionLabel=this.create("captioning-label",captionContainer,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_PRESETS));preset1=this.create(["captioning-preset","captioning-preset1"],captionContainer,null,"Aa");preset2=this.create(["captioning-preset","captioning-preset2"],captionContainer,null,"Aa");preset3=this.create(["captioning-preset","captioning-preset3"],captionContainer,null,"Aa");preset4=this.create(["captioning-preset","captioning-preset4"],captionContainer,null,"Aa");EventHandler.create(preset1,EventHandler.CLICK,function(event){event.stopImmediatePropagation();_this.captioningObject.selected=_this.cloneObject(_this.captioningObject.preset1);_this.applyCaptioningStyle();return false});EventHandler.create(preset2,EventHandler.CLICK,function(event){event.stopImmediatePropagation();_this.captioningObject.selected=_this.cloneObject(_this.captioningObject.preset2);_this.applyCaptioningStyle();return false});EventHandler.create(preset3,EventHandler.CLICK,function(event){event.stopImmediatePropagation();_this.captioningObject.selected=_this.cloneObject(_this.captioningObject.preset3);_this.applyCaptioningStyle();return false});EventHandler.create(preset4,EventHandler.CLICK,function(event){event.stopImmediatePropagation();_this.captioningObject.selected=_this.cloneObject(_this.captioningObject.preset4);_this.applyCaptioningStyle();return false});this.advancedSettingContainer=this.create("captioning-advanced-container");captionContainer=this.create("captioning-row",this.advancedSettingContainer);captionLabel=this.create("captioning-label",captionContainer,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_FONT));this.list.font=this.create("captioning-dropdown",captionContainer,"select");listOptions=this.create(null,this.list.font,"option","Arial");listOptions.value="Arial,sans-serif";this.create(null,this.list.font,"option","Times New Roman");this.create(null,this.list.font,"option","Courier");this.create(null,this.list.font,"option","Georgia");this.create(null,this.list.font,"option","Helvetica");this.create(null,this.list.font,"option","Verdana");this.create(null,this.list.font,"option","Impact");this.create(null,this.list.font,"option","Comic Sans Serif");this.create(null,this.list.font,"option","Times New Roman");EventHandler.create(this.list.font,"change",function(event){event.stopImmediatePropagation();_this.captioningObject.selected.fontFamily=event.target.value;_this.applyCaptioningStyle(false);return false});captionContainer.appendChild(this.list.font);captionLabel=this.create("captioning-label",captionContainer,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_EDGE));this.list.edge=this.create("captioning-dropdown",captionContainer,"select");this.create(null,this.list.edge,"option","none").value="none";this.create(null,this.list.edge,"option","Depressed").value="text-shadow: 0px 1px 0px";this.create(null,this.list.edge,"option","Left drop shadow").value="text-shadow: -3px 3px 2px";this.create(null,this.list.edge,"option","Raised").value="text-shadow: 0px 1px 1px";this.create(null,this.list.edge,"option","Right drop shadow").value="text-shadow: 3px 3px 2px";this.create(null,this.list.edge,"option","Uniform").value="text-shadow: 0px 0px 4px";EventHandler.create(this.list.edge,"change",function(event){event.stopImmediatePropagation();_this.captioningObject.selected.edgeType=event.target.value;_this.applyCaptioningStyle(false);return false});captionContainer=this.create("captioning-row",this.advancedSettingContainer);this.create("captioning-label",captionContainer,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_SIZE));this.list.size=this.create("captioning-dropdown",captionContainer,"select");this.create(null,this.list.size,"option","Small").value=".8em";this.create(null,this.list.size,"option","Medium").value="1.3em";this.create(null,this.list.size,"option","Large").value="2.3em";this.list.size.selectedIndex=1;EventHandler.create(this.list.size,"change",function(event){event.stopImmediatePropagation();_this.captioningObject.selected.size=event.target.value;_this.applyCaptioningStyle(false);return false});this.create("captioning-label",captionContainer,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_SCROLL));this.list.scroll=this.create("captioning-dropdown",captionContainer,"select");this.create(null,this.list.scroll,"option","Pop out").value="popout";this.create(null,this.list.scroll,"option","Roll on").value="rollon";this.create(null,this.list.scroll,"option","Paint on").value="painton";EventHandler.create(this.list.scroll,"change",function(event){event.stopImmediatePropagation();_this.scroll.type=event.target.value;if(event.target.value==="painton"){_this.captionText.classList.add("akamai-captioning-typed")}else{_this.captionText.classList.remove("akamai-captioning-typed")}return false});captionContainer=this.create("captioning-row",this.advancedSettingContainer);this.create("captioning-label-small",captionContainer,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_COLOR));this.picker.color=this.create("captioning-color-picker",captionContainer);this.picker.color.style.backgroundColor=this.captioningObject["default"].fontColor;EventHandler.create(this.picker.color,EventHandler.CLICK,function(event){var alpha,_ref;event.stopImmediatePropagation();_this.colorPicker.style.display=_this.colorPicker.style.display==="block"?"none":"block";if(_this.colorPicker.style.display==="block"){if((_ref=_this.swatchColorCurr)!=null){_ref.style.borderColor="rgba(0,0,0,0.3)"}_this.colorPicker.style.left="152px";_this.colorPicker.name="fontColor";_this.captioningObject.instance=_this.picker.color;if(_this.picker.color.style.backgroundColor.indexOf("rgba")!==-1){alpha=_this.picker.color.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]}_this.colorPickerOpacity.value=alpha!=null?alpha:1}return false});this.create("captioning-label-small",captionContainer,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_BACKGROUND));this.picker.background=this.create("captioning-color-picker",captionContainer);this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor;EventHandler.create(this.picker.background,EventHandler.CLICK,function(event){var alpha,_ref;event.stopImmediatePropagation();_this.colorPicker.style.display=_this.colorPicker.style.display==="block"?"none":"block";if(_this.colorPicker.style.display==="block"){if((_ref=_this.swatchColorCurr)!=null){_ref.style.borderColor="rgba(0,0,0,0.3)"}_this.colorPicker.style.left="264px";_this.colorPicker.name="backgroundColor";_this.captioningObject.instance=_this.picker.background;if(_this.picker.background.style.backgroundColor.indexOf("rgba")!==-1){alpha=_this.picker.background.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]}_this.colorPickerOpacity.value=alpha!=null?alpha:1}return false});this.create("captioning-label-small",captionContainer,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_EDGE));this.picker.edge=this.create("captioning-color-picker",captionContainer);this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor;EventHandler.create(this.picker.edge,EventHandler.CLICK,function(event){var alpha,_ref;event.stopImmediatePropagation();_this.colorPicker.style.display=_this.colorPicker.style.display==="block"?"none":"block";if(_this.colorPicker.style.display==="block"){if((_ref=_this.swatchColorCurr)!=null){_ref.style.borderColor="rgba(0,0,0,0.3)"}_this.colorPicker.style.left="212px";_this.colorPicker.name="edgeColor";_this.captioningObject.instance=_this.picker.edge;if(_this.picker.edge.style.backgroundColor.indexOf("rgba")!==-1){alpha=_this.picker.edge.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]}_this.colorPickerOpacity.value=alpha!=null?alpha:1}return false});this.create("captioning-label-small",captionContainer,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_WINDOW));this.picker.window=this.create("captioning-color-picker",captionContainer);this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor;EventHandler.create(this.picker.window,EventHandler.CLICK,function(event){var alpha,_ref;event.stopImmediatePropagation();_this.colorPicker.style.display=_this.colorPicker.style.display==="block"?"none":"block";if(_this.colorPicker.style.display==="block"){if((_ref=_this.swatchColorCurr)!=null){_ref.style.borderColor="rgba(0,0,0,0.3)"}_this.colorPicker.style.left="300px";_this.colorPicker.name="windowColor";_this.captioningObject.instance=_this.picker.window;if(_this.picker.window.style.backgroundColor.indexOf("rgba")!==-1){alpha=_this.picker.window.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]}_this.colorPickerOpacity.value=alpha!=null?alpha:1}return false});previewContainer=this.create(["caption-text","caption-text-preview"]);previewPara=this.create(null,previewContainer,"p","Lorem ipsum dolor sit amet");captionContainer=this.create("captioning-footer-container");applyButton=this.create("captioning-footer-button",captionContainer,"div",this.localizationManager.getString(LocalizationConstants.MSG_CC_APPLY));cancelButton=this.create("captioning-footer-button",captionContainer,"div",this.localizationManager.getString(LocalizationConstants.MSG_CC_CANCEL));resetButton=this.create("captioning-footer-button",captionContainer,"div",this.localizationManager.getString(LocalizationConstants.MSG_CC_RESET));if(this.facade.getViewComponent().clientWidth>=0){toggleAdvancedButton=this.create("captioning-advanced-button",captionContainer,"div",this.localizationManager.getString(LocalizationConstants.MSG_CC_SHOW_ADVANCED));EventHandler.create(toggleAdvancedButton,EventHandler.CLICK,function(event){event.stopImmediatePropagation();if(_this.advancedSettingContainer.style.display==="block"){event.target.innerHTML=_this.localizationManager.getString(LocalizationConstants.MSG_CC_SHOW_ADVANCED);_this.advancedSettingContainer.style.display="none";_this.colorPicker.style.display="none"}else{event.target.innerHTML=_this.localizationManager.getString(LocalizationConstants.MSG_CC_HIDE_ADVANCED);_this.advancedSettingContainer.style.display="block"}return false})}EventHandler.create(applyButton,EventHandler.CLICK,function(event){event.stopImmediatePropagation();try{localStorage.setItem(Namespace.PREFIX+"captioningDefault",JSON.stringify(_this.captioningObject.selected))}catch(localStorageError){_this.facade.logger.error("LocalStorage Not Supported on this Browser",localStorageError)}_this.sendNotification(CaptioningNotifications.SETTINGS_VISIBILITY_CHANGE,_this.settingsUiVisible);_this.applyCaptioningStyle(false,true);_this.sendNotification(CaptioningNotifications.SETTINGS_CHANGE,_this.captioningObject.selected);return false});EventHandler.create(cancelButton,EventHandler.CLICK,function(event){event.stopImmediatePropagation();_this.sendNotification(CaptioningNotifications.SETTINGS_VISIBILITY_CHANGE,_this.settingsUiVisible);return false});EventHandler.create(resetButton,EventHandler.CLICK,function(event){event.stopImmediatePropagation();_this.colorPicker.style.display="none";_this.applyCaptioningStyle(true);return false});this.captionningStyle=this.create(null,document.getElementsByTagName("head")[0],"style");this.captionningStyle.type="text/css";colorArray=["#000000","#660000","#990000","#ff0000","#000066","#660066","#990066","#ff0066","#006600","#666600","#996600","#ff6600","#006666","#666666","#996666","#ff6666","#009900","#669966","#999900","#ff9900","#009966","#669966","#999966","#ff9966","#00ff00","#66ff00","#99ff00","#ffff00","#00ff66","#66ff66","#99ff66","#ffff66","#000099","#660099","#990099","#ff0099","#0000ff","#6600ff","#9900ff","#ff00ff","#006699","#666699","#996699","#ff6699","#0066ff","#6666ff","#9966ff","#ff66ff","#009999","#669999","#999999","#ff9999","#0099ff","#6699ff","#9999ff","#ff99ff","#0099ff","#66ff99","#99ff99","#ffff99","#00ffff","#66ffff","#99ffff","#ffffff"];this.colorPicker=this.create("colorpicker-palette",this.viewComponent.parentElement);swatch=this.create("colorpicker-swatch",false,null,"&nbsp;");for(_i=0,_len=colorArray.length;_i<_len;_i++){color=colorArray[_i];swatch.style.backgroundColor=color;clonedSwatch=swatch.cloneNode();EventHandler.create(clonedSwatch,EventHandler.CLICK,function(event){event.stopImmediatePropagation();if(_this.swatchColorCurr!==null){_this.swatchColorCurr.style.borderColor="rgba(0,0,0,0.3)"}_this.swatchColorCurr=event.target;_this.swatchColorCurr.style.borderColor="rgba(255, 50, 50, 1)";_this.captioningObject.instance.style.backgroundColor=_this.captioningObject.selected[_this.colorPicker.name]=_this.toRGBA(event.target.style.backgroundColor);_this.applyCaptioningStyle(false);return false});this.colorPicker.appendChild(clonedSwatch)}this.create("opacity-label",this.colorPicker,"span",this.localizationManager.getString(LocalizationConstants.MSG_CC_OPACITY));this.colorPickerOpacity=this.create("colorpicker-slider",this.colorPicker,"input");this.colorPickerOpacity.type="range";this.colorPickerOpacity.min=0;this.colorPickerOpacity.max=1;this.colorPickerOpacity.step=0.1;this.colorPickerOpacity.value=1;EventHandler.create(this.colorPickerOpacity,"change",function(event){event.stopImmediatePropagation();_this.captioningObject.instance.style.backgroundColor=_this.captioningObject.selected[_this.colorPicker.name]=_this.toRGBA(_this.captioningObject.instance.style.backgroundColor);_this.applyCaptioningStyle(false);return false});this.swatchOpacityCurr=this.colorPickerOpacity;EventHandler.create(document,EventHandler.CLICK,function(event){event.stopImmediatePropagation();if(event.target.className!=="akamai-colorpicker-palette"&&event.target.className!=="akamai-opacity-label"&&event.target.className!=="akamai-colorpicker-slider"&&_this.colorPicker.style.display!=="none"){_this.colorPicker.style.display="none"}return false});if(localStorage.getItem(Namespace.PREFIX+"captioningDefault")!=null){this.captioningObject.selected=JSON.parse(localStorage.getItem(Namespace.PREFIX+"captioningDefault"));this.applyCaptioningStyle(false)}else{isDefault=!((this.facade.config.style!=null)||this.facade.config.style!=="undefined");if(!isDefault){this.captioningObject.selected=this.cloneObject(this.facade.config.style)}this.applyCaptioningStyle(isDefault)}CaptioningHTMLMediator.__super__.onRegister.call(this)};CaptioningHTMLMediator.prototype.toRGBA=function(colorCode){var rbga,rgb;rgb=colorCode.replace(/^rgba?\(|\s+|\)$/g,"").split(",");rbga="rgba("+rgb[0]+","+rgb[1]+","+rgb[2]+","+this.swatchOpacityCurr.value+")";return rbga};CaptioningHTMLMediator.prototype.languageListPopulate=function(){var language,track,tracks,_i,_len;tracks=this.facade.getTracks();if(!(tracks!=null)){return}this.list.language.innerHTML="";for(_i=0,_len=tracks.length;_i<_len;_i++){track=tracks[_i];language=track.language;language=this.facade.player.retrieveProxy(LocalizationProxy.NAME).getLanguageString(language);if((language!=null)&&language!==""){this.create(null,this.list.language,"option",language)}}this.toggle.disabled=this.list.language.childElementCount===0;if(this.toggle.disabled){this.create(null,this.list.language,"option","None")}};CaptioningHTMLMediator.prototype.cloneObject=function(clone){var cloned,key;cloned={};for(key in clone){cloned[key]=clone[key]}return cloned};CaptioningHTMLMediator.prototype.applyCaptioningStyle=function(isDefault,isApply){var backgroundColor,color,edgeType,fontFamily,fontSize,windowColor;if(isDefault==null){isDefault=false}if(isApply==null){isApply=false}if(isDefault){this.captioningObject.selected=this.cloneObject(this.captioningObject["default"]);this.list.font.value=this.captioningObject["default"].fontFamily;this.list.edge.value=this.captioningObject["default"].edgeType!=null?this.captioningObject["default"].edgeType:"none";this.list.size.value=this.captioningObject["default"].size;this.list.scroll.value=this.captioningObject["default"].scroll;this.picker.color.style.backgroundColor=this.captioningObject["default"].fontColor;this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor;this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor;this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor}else{if(this.captioningObject.selected.fontFamily!=null){this.list.font.value=this.captioningObject.selected.fontFamily}this.list.edge.value=this.captioningObject.selected.edgeType!=null?this.captioningObject.selected.edgeType:"none";if(this.captioningObject.selected.size!=null){this.list.size.value=this.captioningObject.selected.size}this.picker.color.style.backgroundColor=this.captioningObject.selected.fontColor;if(this.captioningObject.selected.backgroundColor!=null){this.picker.background.style.backgroundColor=this.captioningObject.selected.backgroundColor}if(this.captioningObject.selected.edgeColor!=null){this.picker.edge.style.backgroundColor=this.captioningObject.selected.edgeColor}if(this.captioningObject.selected.windowColor!=null){this.picker.window.style.backgroundColor=this.captioningObject.selected.windowColor}}fontFamily="font-family: "+(isDefault?this.captioningObject["default"].fontFamily:this.list.font.value)+" !important;";edgeType=(isDefault?this.captioningObject["default"].edgeType+this.captioningObject["default"].edgeColor:this.list.edge.value+" "+this.picker.edge.style.backgroundColor)+" !important;";fontSize="font-size: "+(isDefault?this.captioningObject["default"].size:this.list.size.value)+" !important;";color="color: "+(isDefault?this.captioningObject["default"].fontColor:this.picker.color.style.backgroundColor)+" !important;";backgroundColor="background-color: "+(isDefault?this.captioningObject["default"].backgroundColor:this.picker.background.style.backgroundColor)+" !important;";windowColor="background-color: "+(isDefault?this.captioningObject["default"].windowColor:this.picker.window.style.backgroundColor)+" !important;";if(isApply){this.captionningStyle.innerHTML=this.captioningObject.appliedStyleText=".akamai-caption-text { "+fontFamily+fontSize+edgeType+windowColor+" }.akamai-caption-text p { "+color+backgroundColor+" }"}else{this.captionningStyle.innerHTML=this.captioningObject.appliedStyleText+".akamai-caption-text-preview { "+fontFamily+fontSize+edgeType+windowColor+" }.akamai-caption-text-preview p { "+color+backgroundColor+" }"}};CaptioningHTMLMediator.prototype.toggleButtonHandler=function(isON){if(isON==null){isON=false}if(isON){this.classList.add("captioning-floater-btnselected",this.toggle.ON);this.classList.remove("captioning-floater-btnselected",this.toggle.OFF)}else{this.classList.add("captioning-floater-btnselected",this.toggle.OFF);this.classList.remove("captioning-floater-btnselected",this.toggle.ON)}this.sendNotification(CaptioningNotifications.VISIBILITY_CHANGE,isON);this.sendNotification(UserSettingsNotifications.UPDATE_SETTINGS,{captioning:{hidden:!isON}})};CaptioningHTMLMediator.prototype.getCaptionDisplayHeight=function(){var height,i,length;height=0;i=length=this.captionText.childNodes.length;while(i){--i;if(length===3&&i===0){break}height+=Utils.getActualSize(this.captionText.childNodes[i]).height}return height+"px"};CaptioningHTMLMediator.prototype.scrollCaptions=function(scrollHeight,scrollTop,steps){var captionTextInstance,scroll,stepSize;if(scrollHeight==null){scrollHeight=this.captionText.scrollHeight}if(scrollTop==null){scrollTop=this.captionText.scrollTop}if(steps==null){steps=20}stepSize=(scrollHeight-scrollTop)/steps;captionTextInstance=this.captionText;scroll=function(){var _results;if(scrollTop<scrollHeight){captionTextInstance.scrollTop=scrollTop+=stepSize;return setTimeout(scroll,20)}else{_results=[];while(captionTextInstance.childNodes.length>2){_results.push(captionTextInstance.removeChild(captionTextInstance.firstChild))}return _results}};scroll()};CaptioningHTMLMediator.prototype.listNotificationInterests=function(){return[CaptioningNotifications.CUE_CHANGE,CaptioningNotifications.SETTINGS_VISIBILITY_CHANGE,CaptioningNotifications.TOGGLE_SETTINGS_VISIBILITY,CaptioningNotifications.SETTINGS_CHANGE]};CaptioningHTMLMediator.prototype.handleNotification=function(notification){var body,captions,childNode,cue,i,name,note,state,temp,_i,_j,_len,_len1,_ref;name=notification.getName();body=notification.getBody();switch(name){case CaptioningNotifications.CUE_CHANGE:captions="";for(_i=0,_len=body.length;_i<_len;_i++){cue=body[_i];captions+=cue.html}switch(this.scroll.type){case"popout":this.captionText.innerHTML=captions;break;case"rollon":case"painton":temp=document.createElement("div");temp.innerHTML=captions;_ref=temp.childNodes;for(i=_j=0,_len1=_ref.length;_j<_len1;i=++_j){childNode=_ref[i];this.captionText.appendChild(childNode)}this.captionText.style.maxHeight=this.getCaptionDisplayHeight();this.scrollCaptions()}break;case CaptioningNotifications.SETTINGS_VISIBILITY_CHANGE:case CaptioningNotifications.TOGGLE_SETTINGS_VISIBILITY:if(this.settingsUiVisible){this.colorPicker.style.display="none"}this.settingsUiVisible=!this.settingsUiVisible;if(this.settingsUiVisible&&this.list.language.length===1){this.languageListPopulate()}note=this.settingsUiVisible?Notifications.ADD_APPLICATION_STATE:Notifications.REMOVE_APPLICATION_STATE;state="cc-setting-active";this.sendNotification(note,state);break;case CaptioningNotifications.SETTINGS_CHANGE:this.captioningObject.selected=body;this.applyCaptioningStyle(false,true)}};function CaptioningNativeMediator(viewComponent){CaptioningNativeMediator.__super__.constructor.call(this,CaptioningNativeMediator.NAME,viewComponent)}__extends(CaptioningNativeMediator,LocalizedMediator);CaptioningNativeMediator.NAME="CaptioningNativeMediator";CaptioningNativeMediator.prototype.video=null;CaptioningNativeMediator.prototype.index=-1;CaptioningNativeMediator.prototype.plugin=null;CaptioningNativeMediator.prototype.onRegister=function(){this.video=this.facade.player.mediaElement;this.plugin=this.facade.retrieveProxy(CaptioningProxy.NAME)};CaptioningNativeMediator.prototype.listNotificationInterests=function(){return[CaptioningNotifications.VISIBILITY_CHANGE,CaptioningNotifications.TRACK_SELECTED,CaptioningNotifications.TRACKS_LOADED]};CaptioningNativeMediator.prototype.handleNotification=function(notification){var body,cue,textTrack,textTrackCue,track,_i,_j,_len,_len1,_ref;body=notification.getBody();switch(notification.getName()){case CaptioningNotifications.TRACKS_LOADED:for(_i=0,_len=body.length;_i<_len;_i++){track=body[_i];if(!(track.kind==="captions"||track.kind==="subtitles")){continue}textTrack=this.video.addTextTrack(track.kind,track.label,track.srclang);_ref=track.cues;for(_j=0,_len1=_ref.length;_j<_len1;_j++){cue=_ref[_j];textTrackCue=new TextTrackCue(cue.startTime,cue.endTime,cue.text);cue.id=cue.id;textTrack.addCue(textTrackCue)}}break;case CaptioningNotifications.TRACK_SELECTED:if(this.index>-1){this.video.textTracks[this.index].mode="hidden"}this.index=this.plugin.getTracks().indexOf(body);if(!this.plugin.getHidden()){this.video.textTracks[this.index].mode="showing"}break;case CaptioningNotifications.VISIBILITY_CHANGE:this.video.textTracks[this.index].mode=this.plugin.getHidden()?"hidden":"showing"}};function PluginMediator(){PluginMediator.__super__.constructor.call(this)}__extends(PluginMediator,OverlayMediator);PluginMediator.prototype.initializeNotifier=function(key){PluginMediator.__super__.initializeNotifier.call(this,key);this.plugin=this.facade.retrieveProxy(ModuleProxy.NAME);this.media=this.facade.player.retrieveProxy(MediaProxy.NAME)};PluginMediator.prototype.onRegister=function(){PluginMediator.__super__.onRegister.call(this);this.facade.viewComponent=this.viewComponent};function CaptioningMediator(viewComponent){CaptioningMediator.__super__.constructor.call(this,viewComponent)}__extends(CaptioningMediator,PluginMediator);CaptioningMediator.prototype.componentName="captioning";CaptioningMediator.prototype.captionButton=null;CaptioningMediator.prototype.onRegister=function(){var button;button=new ButtonMediator(this.localizationManager.getString(LocalizationConstants.MSG_CC),this.viewComponent,null,"caption",this.onclick.bind(this));this.facade.registerMediator(button);this.captionButton=button.getViewComponent();this.sendNotification(Notifications.ADD_CONTROL,this.captionButton);CaptioningMediator.__super__.onRegister.call(this)};CaptioningMediator.prototype.onclick=function(event){var _ref;event.stopImmediatePropagation();if(((_ref=this.plugin.getTrack())!=null?_ref.type:void 0)==="embedded"){this.sendNotification(CaptioningNotifications.VISIBILITY_CHANGE,this.plugin.getHidden())}else{if(event.currentTarget===this.captionButton){this.sendNotification(CaptioningNotifications.SETTINGS_VISIBILITY_CHANGE,this.plugin.getHidden())}}return false};CaptioningMediator.prototype.listNotificationInterests=function(){return[CaptioningNotifications.VISIBILITY_CHANGE,CaptioningNotifications.ENABLED,CaptioningNotifications.TRACK_SELECTED]};CaptioningMediator.prototype.handleNotification=function(notification){var body,note,state;body=notification.getBody();note=body?Notifications.ADD_APPLICATION_STATE:Notifications.REMOVE_APPLICATION_STATE;switch(notification.getName()){case CaptioningNotifications.TRACK_SELECTED:state="cc-embedded";note=body.type==="embedded"?Notifications.ADD_APPLICATION_STATE:Notifications.REMOVE_APPLICATION_STATE;break;case CaptioningNotifications.VISIBILITY_CHANGE:state="cc-active";break;case CaptioningNotifications.ENABLED:note=body?Notifications.ADD_CONTROL_STATE:Notifications.REMOVE_CONTROL_STATE;state="cc-enabled"}this.sendNotification(note,state)};function OmniturePlugin(){OmniturePlugin.__super__.constructor.call(this)}__extends(OmniturePlugin,Plugin);OmniturePlugin.prototype.moduleName="omniture";OmniturePlugin.prototype.createController=function(){this.registerCommand(Notifications.CHANGE_MEDIA,OmnitureChangeMediaCommand);this.registerCommand(Notifications.ENDED,OmnitureEndedCommand);this.registerCommand(Notifications.STARTED,OmnitureStartCommand);this.registerCommand(Notifications.PAUSE,OmniturePauseCommand);this.registerCommand(Notifications.SEEKING,OmnitureSeekingCommand);this.registerCommand(Notifications.SEEKED,OmnitureSeekedCommand);this.registerCommand(Notifications.CHANGE_CONTENT,OmnitureEndedCommand);this.registerCommand(Notifications.CONTENT_CHANGED,OmnitureContentChangedCommand)};OmniturePlugin.prototype.createModel=function(){if((this.config.heartbeat!=null)&&this.config.heartbeat.enabled===true){this.registerProxy(new HeartbeatProxy(this.config))}else{this.registerProxy(new OmnitureProxy(this.config))}};OmniturePlugin.prototype.listNotificationInterests=function(){return[Notifications.CHANGE_MEDIA,Notifications.CHANGE_CONTENT,Notifications.CONTENT_CHANGED,Notifications.TIME_UPDATE,Notifications.ENDED,Notifications.STARTED,Notifications.PLAY,Notifications.PAUSE,Notifications.SEEKING,Notifications.SEEKED,AdNotifications.AD_LOADED,AdNotifications.AD_STARTED,AdNotifications.AD_PLAY,AdNotifications.AD_PAUSE,AdNotifications.AD_TIME_REMAINING,AdNotifications.BREAK_END]};AMP.registerPlugin("omniture","html",OmniturePlugin);AMP.registerPlugin("omniture","flash",OmnitureWrapper);function InfoWrapper(player,config){if(config==null){config={}}InfoWrapper.__super__.constructor.call(this,player,config)}__extends(InfoWrapper,PluginWrapper);InfoWrapper.NAME="InfoWrapper";InfoWrapper.prototype.listNotificationInterests=function(){return[FlashNotifications.CREATE_FLASH_VARS,FlashNotifications.CREATE_XML,FlashNotifications.SHARE,FlashNotifications.SHARE_REQUEST]};InfoWrapper.prototype.handleNotification=function(notification){var application,body,data,element,elements,flashvars,info,name,property,provider,text,type,view,xml,_i,_len;name=notification.getName();body=notification.getBody();switch(name){case FlashNotifications.CREATE_FLASH_VARS:flashvars=body.flashvars;break;case FlashNotifications.CREATE_XML:xml=body.xml;application=xml.firstChild;view=xml.getElementsByTagName("view")[0];elements=xml.getElementsByTagName("element");for(_i=0,_len=elements.length;_i<_len;_i++){element=elements[_i];if(!(element.getAttribute("id")==="infoOverlayAdvanced")){continue}info=element;break}if(!(view!=null)){return}if(!(info!=null)){info=xml.createElement("element");info.setAttribute("id","infoOverlayAdvanced");info.setAttribute("displayStates","preplay,paused,ns,fs,mouseover");view.insertBefore(info,view.childNodes[0])}data=xml.createElement("data");info.appendChild(data);if(this.config.title!=null){property=xml.createElement("property");property.setAttribute("key","title");text=XMLUtils.createTextContent(xml,this.config.title);property.appendChild(text);data.appendChild(property)}if(this.config.description!=null){property=xml.createElement("property");property.setAttribute("key","description");text=XMLUtils.createTextContent(xml,this.config.description);property.appendChild(text);data.appendChild(property)}if(this.config.more!=null){property=xml.createElement("property");property.setAttribute("key","more");text=XMLUtils.createTextContent(xml,this.config.more);property.appendChild(text);data.appendChild(property)}if(this.config.less!=null){property=xml.createElement("property");property.setAttribute("key","less");text=XMLUtils.createTextContent(xml,this.config.less);property.appendChild(text);data.appendChild(property)}if(this.config.provider!=null){provider=xml.createElement("property");provider.setAttribute("key","provider");data.appendChild(provider);if(this.config.provider.name!=null){property=xml.createElement("property");property.setAttribute("key","name");text=XMLUtils.createTextContent(xml,this.config.provider.name);property.appendChild(text);provider.appendChild(property)}if(this.config.provider.image!=null){property=xml.createElement("property");property.setAttribute("key","image");text=XMLUtils.createTextContent(xml,this.config.provider.image);property.appendChild(text);provider.appendChild(property)}}break;case FlashNotifications.SHARE:case FlashNotifications.SHARE_REQUEST:type="share"}if(type!=null){return this.dispatchEvent(new Event(type,body))}};AMP.registerPlugin("info","flash",InfoWrapper);function InfoMediator(){InfoMediator.__super__.constructor.call(this)}__extends(InfoMediator,PluginMediator);InfoMediator.prototype.componentName="info";InfoMediator.prototype.title=null;InfoMediator.prototype.shortDescription=null;InfoMediator.prototype.icon=null;InfoMediator.prototype.provider=null;InfoMediator.prototype.onRegister=function(){this.title=this.create("info-title");this.provider=this.create("info-provider");this.shortDescription=this.create("info-short-description");this.icon=this.create("info-icon",this,"img");this.dataChangedHandler();InfoMediator.__super__.onRegister.call(this)};InfoMediator.prototype.listNotificationInterests=function(){return[Notifications.MEDIA_CHANGE]};InfoMediator.prototype.handleNotification=function(notification){var body,name;name=notification.getName();body=notification.getBody();switch(name){case Notifications.MEDIA_CHANGE:this.dataChangedHandler()}};InfoMediator.prototype.moreClicked=function(event){return this.classList.add("open")};InfoMediator.prototype.closeClicked=function(event){return this.classList.remove("open")};InfoMediator.prototype.dataChangedHandler=function(){var styles,_ref;if(this.plugin.value.title!=null){this.title.textContent=this.plugin.value.title}if(((_ref=this.plugin.value.provider)!=null?_ref.image:void 0)!=null){this.icon.src=this.plugin.value.provider.image}styles=getComputedStyle(this.title);if(this.title.clientHeight>parseInt(styles.lineHeight)){this.classList.add("info-small");this.shortDescription.innerHTML=this.provider.innerHTML="";return}else{this.classList.remove("info-small")}this.truncateDescription(this.plugin.value.description,this.plugin.value.more);this.provider.textContent=this.plugin.value.provider.name!=null?""+this.plugin.value.provider.name:""};InfoMediator.prototype.truncateDescription=function(desc){var character,ellp,index,text,tf,_i,_len;ellp="...";text="";tf=this.shortDescription;tf.textContent="";if(!(desc!=null)){return}for(index=_i=0,_len=desc.length;_i<_len;index=++_i){character=desc[index];tf.textContent=text+character+ellp;if(tf.scrollHeight>tf.clientHeight){tf.textContent=text+ellp;break}else{text+=character}}};function InfoProxy(data){InfoProxy.__super__.constructor.call(this,data)}__extends(InfoProxy,DataBoundConfigurationProxy);InfoProxy.prototype.configurationName="info";InfoProxy.NAME=ModuleProxy.NAME;InfoProxy.prototype.defaults={title:"#{media.title}",description:"#{media.description}",provider:{},more:"read more",less:"less"};function CaptioningPlugin(){CaptioningPlugin.__super__.constructor.call(this)}__extends(CaptioningPlugin,Feature);CaptioningPlugin.prototype.featureName="captioning";CaptioningPlugin.prototype.moduleName="captioning";CaptioningPlugin.prototype.createController=function(){this.registerCommand(Notifications.CHANGE_MEDIA,CaptioningChangeMediaCommand);this.registerCommand(Notifications.STARTED,CaptioningStartedCommand);this.registerCommand(Notifications.TIME_UPDATE,CaptioningTimeUpdateCommand);this.registerCommand(CaptioningNotifications.VISIBILITY_CHANGE,CaptioningVisibilityChangeCommand)};CaptioningPlugin.prototype.createModel=function(){this.proxy=new CaptioningProxy(this.config);this.registerProxy(this.proxy)};CaptioningPlugin.prototype.createView=function(){var mediator;mediator=new CaptioningMediator();this.registerMediator(mediator);this.registerMediator(new CaptioningHTMLMediator(mediator.viewComponent))};CaptioningPlugin.prototype.createAPI=function(){return new CaptioningAPI(this)};CaptioningPlugin.prototype.listNotificationInterests=function(){return[Notifications.CHANGE_MEDIA,Notifications.STARTED,Notifications.TIME_UPDATE,CaptioningNotifications.TOGGLE_SETTINGS_VISIBILITY]};CaptioningPlugin.prototype.listNotificationPublications=function(){var key,value;return CaptioningPlugin.__super__.listNotificationPublications.call(this).concat((function(){var _results;_results=[];for(key in CaptioningNotifications){value=CaptioningNotifications[key];if(value!==CaptioningNotifications.TOGGLE_SETTINGS_VISIBILITY){_results.push(value)}}return _results})()).concat([Notifications.ADD_CONTROL,Notifications.REMOVE_CONTROL,UserSettingsNotifications.UPDATE_SETTINGS,Notifications.ADD_CONTROL_STATE,Notifications.REMOVE_CONTROL_STATE])};CaptioningPlugin.prototype.listNotificationEvents=function(){return[CaptioningNotifications.VISIBILITY_CHANGE,CaptioningNotifications.ENABLED]};CaptioningPlugin.prototype.getHidden=function(){return this.proxy.getHidden()};CaptioningPlugin.prototype.setHidden=function(value){this.sendNotification(CaptioningNotifications.VISIBILITY_CHANGE,!value);return value};CaptioningPlugin.prototype.getTracks=function(){return this.proxy.getTracks()};CaptioningPlugin.prototype.getTrack=function(){return this.proxy.getTrack()};CaptioningPlugin.prototype.setTrack=function(value){this.proxy.setTrack(value);return value};CaptioningPlugin.prototype.selectTrackByIndex=function(index){return this.proxy.selectTrackByIndex(index)};CaptioningPlugin.prototype.selectTrackByLanguage=function(lang){return this.proxy.selectTrackByLanguage(lang)};CaptioningPlugin.prototype.changeSettings=function(object){this.sendNotification(CaptioningNotifications.SETTINGS_CHANGE,object);return object};AMP.registerPlugin("captioning","html",CaptioningPlugin);function IMAWrapper(){return IMAWrapper.__super__.constructor.apply(this,arguments)}__extends(IMAWrapper,AdWrapper);IMAWrapper.NAME="IMAWrapper";IMAWrapper.prototype.createXML=function(xml){var admedia,application,companion,companions,ids,overlay,prop,props,vendor,_i,_j,_k,_len,_len1,_len2,_ref;application=xml.firstChild;admedia=xml.getElementsByTagName("admedia")[0];if(!(admedia!=null)){admedia=xml.createElement("admedia");application.appendChild(admedia)}vendor=xml.createElement("vendor");vendor.setAttribute("id","dfp");admedia.appendChild(vendor);props=[{value:this.config.adTagUrl,key:"DFP_AD_TAG_URL"},{value:this.config.maxBitrate,key:"DFP_MAX_BITRATE"},{value:this.config.sceneMarkers,key:"displaySceneMarkers"},{value:this.config.ppid,key:"DFP_PPID"}];for(_i=0,_len=props.length;_i<_len;_i++){prop=props[_i];if(prop.value!=null){this.createProperty(xml,prop.key,prop.value,vendor)}}if(this.config.position!=null){vendor.setAttribute("position",this.config.position)}if(this.config.params!=null){if(this.config.params.adTag!=null){this.createProperty(xml,"DFP_AD_TAG_PARAMS",this.config.params.adTag,vendor)}if(this.config.params.manual!=null){this.createProperty(xml,"DFP_MANUAL_PARAMS",this.config.params.manual,vendor)}}if(this.config.companions!=null){companions=[];ids=[];_ref=this.config.companions;for(_j=0,_len1=_ref.length;_j<_len1;_j++){companion=_ref[_j];companions.push(companion.width+"x"+companion.height);ids.push(companion.id)}this.createProperty(xml,"DFP_SIZE",companions.join(","),vendor);this.createProperty(xml,"COMPANION_ID",ids.join(","),vendor)}if(this.config.disableCompanionAds!=null){this.createProperty(xml,"disableCompanionAds",this.config.disableCompanionAds,vendor)}if(this.config.overlay!=null){if(this.config.overlay.enabled===true){overlay=xml.createElement("overlay");admedia.appendChild(overlay)}props=[{value:"dfp",key:"OVERLAY_AD_PARTNER"},{value:this.config.overlay.adTagUrl,key:"OVERLAY_AD_BASE_URL"},{value:this.config.overlay.delay,key:"OVERLAY_AD_DELAY"},{value:this.config.overlay.interval,key:"OVERLAY_AD_INTERVAL"},{value:this.config.overlay.duration,key:"OVERLAY_AD_DURATION"},{value:""+this.config.overlay.width+"x"+this.config.overlay.height,key:"OVERLAY_AD_SIZE"}];for(_k=0,_len2=props.length;_k<_len2;_k++){prop=props[_k];if(prop.value!=null){this.createProperty(xml,prop.key,prop.value,overlay)}}}return xml};function IMAFullscreenProxy(config){IMAFullscreenProxy.__super__.constructor.call(this,config)}__extends(IMAFullscreenProxy,IMAProxy);IMAFullscreenProxy.NAME=IMAProxy.NAME;IMAFullscreenProxy.prototype.createPlugin=function(){return new google.ima.AdDisplayContainer(this.facade.getViewComponent().container,this.facade.player.getMediaElement(),this.facade.getViewComponent().container)};IMAFullscreenProxy.prototype.engage=function(media){IMAFullscreenProxy.__super__.engage.call(this,media);this.sendNotification(Notifications.DISABLE_VIDEO_EVENTS,["paused","ended","durationchange","error"])};IMAFullscreenProxy.prototype.reset=function(media){IMAFullscreenProxy.__super__.reset.call(this,media);this.sendNotification(Notifications.ENABLE_VIDEO_EVENTS,["paused","ended","durationchange","error"])};IMAFullscreenProxy.prototype.breakStart=function(){this.playbackCore=this.facade.player.retrieveProxy(PlayerProxy.NAME).getActivePlaybackCore();this.playbackCore.setEnabled(false)};IMAFullscreenProxy.prototype.breakEnd=function(){IMAFullscreenProxy.__super__.breakEnd.call(this);this.playbackCore.setEnabled(true)};function IMAAddOverlayCommand(){IMAAddOverlayCommand.__super__.constructor.call(this)}__extends(IMAAddOverlayCommand,puremvc.SimpleCommand);IMAAddOverlayCommand.prototype.execute=function(notification){this.facade.sendNotification(Notifications.ADD_APPLICATION_STATE,"ad-overlay-mode")};function IMARemoveOverlayCommand(){IMARemoveOverlayCommand.__super__.constructor.call(this)}__extends(IMARemoveOverlayCommand,puremvc.SimpleCommand);IMARemoveOverlayCommand.prototype.execute=function(notification){var proxy;proxy=this.facade.retrieveProxy(IMAOverlayProxy.NAME);proxy.stop();this.facade.player.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"ad-overlay-mode")};function IMAOverlayMediator(){IMAOverlayMediator.__super__.constructor.call(this)}__extends(IMAOverlayMediator,OverlayMediator);IMAOverlayMediator.prototype.componentName="ad-overlay";IMAOverlayMediator.prototype.anchor=null;IMAOverlayMediator.prototype.image=null;IMAOverlayMediator.prototype.tracker=null;IMAOverlayMediator.prototype.tracker2=null;IMAOverlayMediator.prototype.closeButton=null;IMAOverlayMediator.prototype.closeText=null;IMAOverlayMediator.prototype.onRegister=function(){var _this=this;this.anchor=this.create("ad-overlay-anchor");this.anchor.target="_blank";this.image=this.create("ad-overlay-img",this.anchor,"img");this.tracker=this.create();this.tracker.width=0;this.tracker.height=0;this.tracker2=this.create(null,this,"img");this.tracker2.width=0;this.tracker2.height=0;this.closeButton=this.create("ad-close-button",this.anchor);this.closeButton.onclick=function(event){event.stopImmediatePropagation();_this.sendNotification(IMANotifications.REMOVE_OVERLAY);return false};this.closeText=this.createText("ad-close-text","x",this.closeButton);IMAOverlayMediator.__super__.onRegister.call(this)};IMAOverlayMediator.prototype.listNotificationInterests=function(){return[IMANotifications.ADD_OVERLAY,IMANotifications.REMOVE_OVERLAY]};IMAOverlayMediator.prototype.handleNotification=function(notification){var ad;switch(notification.getName()){case IMANotifications.ADD_OVERLAY:ad=notification.getBody();this.image.src=ad.src;this.anchor.href=ad.href;this.tracker.src=ad.tracking[0];this.tracker2.src=ad.tracking[1]}};function IMAReadyCommand(){IMAReadyCommand.__super__.constructor.call(this)}__extends(IMAReadyCommand,puremvc.SimpleCommand);IMAReadyCommand.prototype.execute=function(notification){this.facade.retrieveProxy(IMAProxy.NAME).ready()};function IMADisplayStateChangeCommand(){IMADisplayStateChangeCommand.__super__.constructor.call(this)}__extends(IMADisplayStateChangeCommand,puremvc.SimpleCommand);IMADisplayStateChangeCommand.prototype.execute=function(notification){this.facade.retrieveProxy(IMAProxy.NAME).resize(notification.getBody())};function InfoPlugin(){InfoPlugin.__super__.constructor.call(this)}__extends(InfoPlugin,Plugin);InfoPlugin.prototype.moduleName="info";InfoPlugin.prototype.createModel=function(){this.registerProxy(new InfoProxy(this.config))};InfoPlugin.prototype.createView=function(){this.registerMediator(new InfoMediator())};InfoPlugin.prototype.listNotificationInterests=function(){return[Notifications.MEDIA_CHANGE]};AMP.registerPlugin("info","html",InfoPlugin);AMP.registerPlugin("info","external",InfoPlugin);function ShareWrapper(player,config){if(config==null){config={}}ShareWrapper.__super__.constructor.call(this,player,config)}__extends(ShareWrapper,PluginWrapper);ShareWrapper.NAME="ShareWrapper";ShareWrapper.prototype.controls=["share","facebook","twitter"];ShareWrapper.prototype.createFlashVars=function(flashvars){if(flashvars.share_mode==null){flashvars.share_mode=2}return flashvars};ShareWrapper.prototype.createXML=function(xml){this.createControls(xml);return xml};ShareWrapper.prototype.createControls=function(xml){var id,key,_i,_len,_ref;if(this.hasControls(xml)===false){return}this.config.share=true;this.controls=this.getControls(xml);_ref=this.controls;for(_i=0,_len=_ref.length;_i<_len;_i++){key=_ref[_i];id=""+key+"Btn";if(!(controls[id]!=null)&&this.config[key]===true){this.createElement(xml,id)}}};ShareWrapper.prototype.listNotificationInterests=function(){return ShareWrapper.__super__.listNotificationInterests.call(this).concat([FlashNotifications.SHARE,FlashNotifications.SHARE_REQUEST])};ShareWrapper.prototype.handleNotification=function(notification){var body,name,type;ShareWrapper.__super__.handleNotification.call(this,notification);name=notification.getName();body=notification.getBody();switch(name){case FlashNotifications.SHARE:case FlashNotifications.SHARE_REQUEST:type="share"}if(type!=null){this.dispatchEvent(new Event(type,body))}};AMP.registerPlugin("share","flash",ShareWrapper);function ShareMediator(){ShareMediator.__super__.constructor.call(this)}__extends(ShareMediator,PluginMediator);ShareMediator.prototype.componentName="share";ShareMediator.prototype.shareControl=null;ShareMediator.prototype.shareSeparator=null;ShareMediator.prototype.embed=null;ShareMediator.prototype.onRegister=function(){this.sendNotification(Notifications.ADD_CONTROL_STATE,"share-enabled");this.shareControl=this.create(["share","control"],false);this.shareSeparator=this.create(["share","separator"],this.shareControl);this.createButton("share");if(this.plugin.getFacebook()===true){this.createButton("facebook")}if(this.plugin.getTwitter()===true){this.createButton("twitter")}this.sendNotification(Notifications.ADD_CONTROL,this.shareControl);ShareMediator.__super__.onRegister.call(this)};ShareMediator.prototype.createButton=function(id){var button;button=new ButtonMediator(null,this.shareControl,null,id,this.clickHandler.bind(this,id));this.facade.registerMediator(button)};ShareMediator.prototype.clickHandler=function(provider,event){event.stopImmediatePropagation();this.sendNotification(Notifications.DISPATCH_EVENT,new Event("share",{provider:provider,link:this.plugin.getLink(),embed:this.plugin.getEmbed()}));return false};ShareMediator.prototype.listNotificationInterests=function(){return[Notifications.MEDIA_CHANGE]};ShareMediator.prototype.handleNotification=function(notification){var body,media,name;name=notification.getName();body=notification.getBody();switch(name){case Notifications.MEDIA_CHANGE:media=body;if(media.embed!=null){this.sendNotification(Notifications.ADD_CONTROL_STATE,"share-enabled")}else{this.sendNotification(Notifications.REMOVE_CONTROL_STATE,"share-enabled")}}};function ShareProxy(config){ShareProxy.__super__.constructor.call(this,config)}__extends(ShareProxy,PluginProxy);ShareProxy.NAME=ModuleProxy.NAME;ShareProxy.prototype.defaults={facebook:false,twitter:false};ShareProxy.prototype.loaded=true;ShareProxy.prototype.link=null;ShareProxy.prototype.embed=null;ShareProxy.prototype.getEmbed=function(){return this.embed};ShareProxy.prototype.setEmbed=function(value){return this.embed=value};ShareProxy.prototype.getLink=function(){return this.link};ShareProxy.prototype.setLink=function(value){return this.link=value};ShareProxy.prototype.getFacebook=function(){return this.getConfigurationData().facebook};ShareProxy.prototype.setFacebook=function(value){return this.data.facebook=value};ShareProxy.prototype.getTwitter=function(){return this.getConfigurationData().twitter};ShareProxy.prototype.setTwitter=function(value){return this.data.twitter=value};function ShareMediaChangeCommand(){ShareMediaChangeCommand.__super__.constructor.call(this)}__extends(ShareMediaChangeCommand,puremvc.SimpleCommand);ShareMediaChangeCommand.prototype.execute=function(notification){var media,proxy;media=notification.getBody();proxy=this.facade.retrieveProxy(ShareProxy.NAME);proxy.setEmbed(media.embed);proxy.setLink(media.link)};var StatsNotifications={VISIBILITY_CHANGE:"statsvisibilitychange",BITRATES_UPDATE:"bitratesUpdate"};function IMAPlugin(){IMAPlugin.__super__.constructor.call(this)}__extends(IMAPlugin,AdPlugin);IMAPlugin.prototype.moduleName="ima";IMAPlugin.prototype.createFullscreenProxy=function(){return new IMAFullscreenProxy(this.config)};IMAPlugin.prototype.createProxy=function(){return new IMAProxy(this.config)};IMAPlugin.prototype.isFullscreenDevice=function(){var ua;ua=navigator.userAgent;return Utils.isFullscreenDevice()||/Android 4\.[0-1]/.test(ua)||/CrKey/.test(ua)};IMAPlugin.prototype.createModel=function(){IMAPlugin.__super__.createModel.call(this);if(this.config.overlay!=null){this.registerProxy(new IMAOverlayProxy(this.config.overlay))}};IMAPlugin.prototype.createController=function(){IMAPlugin.__super__.createController.call(this);if(this.config.overlay!=null){this.registerCommand(IMANotifications.ADD_OVERLAY,IMAAddOverlayCommand);this.registerCommand(IMANotifications.REMOVE_OVERLAY,IMARemoveOverlayCommand)}this.registerCommand(Notifications.READY,IMAReadyCommand);this.registerCommand(Notifications.FULL_SCREEN_CHANGE,IMADisplayStateChangeCommand)};IMAPlugin.prototype.createView=function(){IMAPlugin.__super__.createView.call(this);if(this.config.overlay!=null){this.registerMediator(new IMAOverlayMediator())}};AMP.registerPlugin("ima","html",IMAPlugin);AMP.registerPlugin("ima","flash",IMAWrapper);function StatsProxy(config){StatsProxy.__super__.constructor.call(this,config)}__extends(StatsProxy,ModuleProxy);StatsProxy.NAME=ModuleProxy.NAME;StatsProxy.prototype.defaults={url:null};StatsProxy.prototype.hidden=true;StatsProxy.prototype.getURL=function(){return this.data.url};StatsProxy.prototype.setURL=function(value){return this.data.url=value};StatsProxy.prototype.getHidden=function(){return this.hidden};StatsProxy.prototype.setHidden=function(value){return this.hidden=value};StatsProxy.prototype.invoke=function(){var xhr,_this=this;if(this.data.url!=null){return xhr=Utils.get(this.data.url,{onload:function(){if(xhr.response!=null){_this.sendNotification(StatsNotifications.BITRATES_UPDATE,xhr.response)}},onerror:function(error){return _this.sendNotification(StatsNotifications.BITRATES_UPDATE,null)}})}};function StatsVisibilityChangeCommand(){StatsVisibilityChangeCommand.__super__.constructor.call(this)}__extends(StatsVisibilityChangeCommand,puremvc.SimpleCommand);StatsVisibilityChangeCommand.prototype.execute=function(notification){var statsProxy;statsProxy=this.facade.retrieveProxy(StatsProxy.NAME);statsProxy.setHidden(notification.getBody());statsProxy.setURL(""+(this.facade.player.getSrc()));if(notification.getBody()===false){statsProxy.invoke()}};function StatsMediator(){StatsMediator.__super__.constructor.call(this)}__extends(StatsMediator,PluginMediator);StatsMediator.prototype.componentName="stats";StatsMediator.prototype.statsText=null;StatsMediator.prototype.statsButton=null;StatsMediator.prototype.bitrateText=null;StatsMediator.prototype.bitrateArr=null;StatsMediator.prototype.onRegister=function(){var _this=this;this.sendNotification(Notifications.ADD_CONTROL_STATE,"stats-enabled");this.classList.add("hidden");this.statsFormat=this.create("stats-text");this.statsBitRate=this.create("stats-text");this.statsPlayBack=this.create("stats-text");this.statsAnalytics=this.create("stats-text");this.statsButton=this.create("stats-button",false);this.statsButton.onclick=function(event){event.stopImmediatePropagation();_this.sendNotification(StatsNotifications.VISIBILITY_CHANGE,!_this.plugin.getHidden());return false};this.sendNotification(Notifications.ADD_CONTROL,this.statsButton);StatsMediator.__super__.onRegister.call(this)};StatsMediator.prototype.listNotificationInterests=function(){return[StatsNotifications.VISIBILITY_CHANGE,StatsNotifications.BITRATES_UPDATE]};StatsMediator.prototype.handleNotification=function(notification){var body,name;name=notification.getName();body=notification.getBody();switch(name){case StatsNotifications.VISIBILITY_CHANGE:if(this.plugin.getHidden()){this.classList.add("hidden")}else{this.classList.remove("hidden");this.statsBitRate.innerHTML="<p><b class='"+this.classList.prefix+"stats-header'>Adaptive Bitrate Renditions</b></p><p>Loading...</p>";this.renderStats()}break;case StatsNotifications.BITRATES_UPDATE:if(body!=null){this.checkContentType(body)}else{this.statsBitRate.innerHTML="<p><b class='"+this.classList.prefix+"stats-header'>Adaptive Bitrate Renditions</b></p><p>Not Available</p>"}}};StatsMediator.prototype.renderStats=function(){var analyticsVal,device,formatVal,isDash,playbackVal,player,urlVal,_ref;try{player=this.facade.player;formatVal=player.getMedia()===void 0?"Not Available":player.getMedia().type;urlVal=player.getSrc()===""||player.getSrc()===null?"Not Available":player.getSrc();device=Utils.getDevice();if(device==null){device=""}playbackVal=this.facade.player.getConfig().mode!==""&&this.facade.player.getConfig().mode!==null&&this.facade.player.getConfig().mode.indexOf("html")!==-1?this.facade.player.getVersion()+", HTML5 Video: "+device:"Not Available";isDash=(_ref=this.facade.player.retrieveProxy(PlayerProxy.NAME).getActivePlaybackCore())!=null?_ref.proxyName.indexOf("dash"):void 0;if(isDash>-1){playbackVal+=", dash.js"}analyticsVal=this.facade.player.getConfig().mediaanalytics.config===""||this.facade.player.getConfig().mediaanalytics.config===null?"Not Available":this.facade.player.getConfig().mediaanalytics.config;this.statsFormat.innerHTML="<p><b class='"+this.classList.prefix+"stats-header'>Stream</b></p><p>Format: "+formatVal+"</p><p>URL: "+urlVal+"</p>";this.statsPlayBack.innerHTML="<p><b class='"+this.classList.prefix+"stats-header'>Playback</b></p>"+playbackVal;this.statsAnalytics.innerHTML="<p><b class='"+this.classList.prefix+"stats-header'>Analytics</b></p>"+analyticsVal}catch(error){this.facade.logger.error("[AMP Stats Render Error]:",error)}};StatsMediator.prototype.checkContentType=function(items){var item,xhr,_i,_len,_ref,_this=this;this.bitrateArr=[];if(typeof items==="object"&&this.facade.player.getMedia().type.indexOf("dash")!==-1){xhr=Utils.get(items.URL,{onload:function(event){var bitrateArray,bitrateStr,item,resStr,xml,_i,_len;xml=XMLUtils.parse(event.detail.responseText);bitrateArray=xml.querySelectorAll("AdaptationSet[mimeType*='video']")[0].querySelectorAll("Representation");for(_i=0,_len=bitrateArray.length;_i<_len;_i++){item=bitrateArray[_i];bitrateStr=(parseInt(item.getAttribute("bandwidth"))/1000).toFixed(0);resStr=item.getAttribute("width")+"x"+item.getAttribute("height");_this.bitrateArr.push({bitrate:bitrateStr,res:resStr})}return _this.constructBitrateText(_this.bitrateArr)},onerror:function(event){return _this.facade.logger.error("[AMP Stats ERROR]",event)}})}else{_ref=items.split("#");for(_i=0,_len=_ref.length;_i<_len;_i++){item=_ref[_i];if(item.indexOf("BANDWIDTH")!==-1&&item.indexOf("RESOLUTION")!==-1){this.bitrateArr.push(this.parseBitrate(item))}}this.constructBitrateText(this.bitrateArr)}};StatsMediator.prototype.constructBitrateText=function(bitrateArr){var bitrateSlNo,item,_i,_len,_ref;this.bitrateArr=bitrateArr;this.bitrateText="";this.bitrateArr.sort(function(a,b){var aBitrate,bBitrate;aBitrate=parseInt(a.bitrate);bBitrate=parseInt(b.bitrate);if(aBitrate<bBitrate){return -1}else{if(aBitrate>bBitrate){return 1}else{return 0}}});_ref=this.bitrateArr;for(bitrateSlNo=_i=0,_len=_ref.length;_i<_len;bitrateSlNo=++_i){item=_ref[bitrateSlNo];this.bitrateText+="<p>"+(bitrateSlNo+1)+". "+item.bitrate+" kbps "+item.res+"</p>"}if(this.bitrateText===""){this.bitrateText="<p>Not Available</p>"}this.statsBitRate.innerHTML="<p><b class='"+this.classList.prefix+"stats-header'>Adaptive Bitrate Renditions</b></p>"+this.bitrateText};StatsMediator.prototype.parseBitrate=function(item){var bandwidthEndIndex,bandwidthStartIndex,bandwidthStr,resolutionEndIndex,resolutionStartIndex,resolutionStr;bandwidthStartIndex=item.indexOf("BANDWIDTH");bandwidthEndIndex=item.indexOf(",",bandwidthStartIndex+10);bandwidthStr=item.slice(bandwidthStartIndex+10,bandwidthEndIndex);resolutionStartIndex=item.indexOf("RESOLUTION");resolutionEndIndex=item.indexOf(",",resolutionStartIndex+10);if(resolutionEndIndex-resolutionStartIndex>20||resolutionEndIndex===-1){resolutionEndIndex=item.indexOf("x",resolutionStartIndex+10)+4}resolutionStr=item.slice(resolutionStartIndex+11,resolutionEndIndex);return{bitrate:parseInt(bandwidthStr)/1000,res:resolutionStr}};function AISLaunchIDPLoginCommand(){AISLaunchIDPLoginCommand.__super__.constructor.call(this)}__extends(AISLaunchIDPLoginCommand,AISCommand);AISLaunchIDPLoginCommand.prototype.execute=function(notification){this.getProxy().launchIDPLogin(notification.getBody())};function AISChooserMediator(parent){AISChooserMediator.__super__.constructor.call(this,null,null,parent)}__extends(AISChooserMediator,ComponentMediator);AISChooserMediator.prototype.componentName="ais-chooser";AISChooserMediator.prototype.menu=null;AISChooserMediator.prototype.label=null;AISChooserMediator.prototype.grid=null;AISChooserMediator.prototype.select=null;AISChooserMediator.prototype.login=null;AISChooserMediator.prototype.title=null;AISChooserMediator.prototype.onRegister=function(){var _this=this;this.classList.add("hidden");this.title=this.createText("ais-chooser-title","Choose your provider");this.grid=this.create("ais-chooser-grid");this.menu=this.create("ais-chooser-menu");this.label=this.createText("ais-chooser-label","Providers: ",this.menu);this.select=this.create("ais-chooser-select",this.menu,"select");this.login=this.create("ais-chooser-login",false,"input");this.login.type="button";this.login.value="Login";EventHandler.create(this.login,EventHandler.CLICK,function(event){var idpID;if(typeof event.stopImmediatePropagation==="function"){event.stopImmediatePropagation()}idpID=_this.select.options[_this.select.selectedIndex].value;_this.sendNotification(AISNotifications.LAUNCH_IDP_LOGIN,idpID);return false});this.menu.appendChild(this.login);AISChooserMediator.__super__.onRegister.call(this)};AISChooserMediator.prototype.listNotificationInterests=function(){return[AISNotifications.CHOOSE_AUTH_PROVIDER,AISNotifications.AUTHENTICATING]};AISChooserMediator.prototype.handleNotification=function(notification){var baseURL,div,featuredGroup,footprints,group,groups,idp,idps,img,index,key,logos,member,option,options,proxy,resp,span,src,value,_i,_j,_k,_l,_len,_len1,_len2,_len3,_ref,_ref1,_this=this;switch(notification.getName()){case AISNotifications.CHOOSE_AUTH_PROVIDER:resp=notification.getBody();idps=resp.possible_idps;footprints=resp.footprints||[];groups=resp.grouped_idps||[];proxy=this.facade.retrieveProxy(ModuleProxy.NAME);logos=proxy.value.logos;baseURL=logos!=null?logos.base:void 0;this.grid.innerHTML="";if((groups!=null)&&((logos!=null?logos.group:void 0)!=null)){for(_i=0,_len=groups.length;_i<_len;_i++){group=groups[_i];if(!(group.name===logos.group)){continue}featuredGroup=group;break}if(featuredGroup!=null){_ref=featuredGroup.members;for(index=_j=0,_len1=_ref.length;_j<_len1;index=++_j){member=_ref[index];idp=idps[member];div=this.create(["ais-chooser-grid-item","ais-chooser-grid-index-"+(index+1)],this.grid);if(div.dataset==null){div.dataset={}}div.dataset.key=member;div.onclick=function(event){var idpID,target;if(typeof event.stopImmediatePropagation==="function"){event.stopImmediatePropagation()}target=(event.currentTarget!=null)?event.currentTarget:event.srcElement;idpID=target.dataset.key;_this.sendNotification(AISNotifications.LAUNCH_IDP_LOGIN,idpID);return false};if(((_ref1=idps[member].logos)!=null?_ref1[logos.key]:void 0)!=null){img=this.create("ais-chooser-grid-cell-img",div,"img");img.alt=idp.display_name;src=idp.logos[logos.key];if(src.indexOf("http")===-1){src=baseURL+src}img.src=src;if(img.dataset==null){img.dataset={}}img.dataset.key=member;span=this.create("ais-chooser-grid-cell-label",div,"span");span.innerHTML=idp.display_name}else{div.innerHTML=idp.display_name}}}}if(this.grid.innerHTML!==""){this.classList.add("ais-chooser-featured");this.label.textContent="Other "}options=this.select.options;for(index=_k=0,_len2=options.length;_k<_len2;index=++_k){option=options[index];this.select.options.remove(index)}if(footprints.length>0){for(_l=0,_len3=footprints.length;_l<_len3;_l++){key=footprints[_l];options[options.length]=new Option(""+idps[key].display_name,""+key)}}for(key in idps){value=idps[key];options[options.length]=new Option(""+value.display_name,""+key)}this.classList.remove("hidden");break;case AISNotifications.AUTHENTICATING:this.classList.add("hidden")}};function AISPlayMediator(parent){AISPlayMediator.__super__.constructor.call(this,null,null,parent)}__extends(AISPlayMediator,ComponentMediator);AISPlayMediator.prototype.componentName="ais-play";AISPlayMediator.prototype.menu=null;AISPlayMediator.prototype.restart=null;AISPlayMediator.prototype.resume=null;AISPlayMediator.prototype.resumeTime=null;AISPlayMediator.prototype.onRegister=function(){var _this=this;this.classList.add("hidden");this.menu=this.create("ais-play-menu");this.restart=this.create("ais-play-restart",this.menu);this.restart.type="button";this.restart.textContent="Restart";this.restart.onclick=function(event){if(typeof event.stopImmediatePropagation==="function"){event.stopImmediatePropagation()}_this.play();return false};this.resume=this.create("ais-play-resume",this.menu);this.resume.type="button";this.resume.value="Resume";this.restart.onclick=function(event){if(typeof event.stopImmediatePropagation==="function"){event.stopImmediatePropagation()}_this.play(_this.resumeTime);return false};AISPlayMediator.__super__.onRegister.call(this)};AISPlayMediator.prototype.play=function(time){var proxy;proxy=this.facade.retrieveProxy(AISProxy.NAME);proxy.play(time)};AISPlayMediator.prototype.listNotificationInterests=function(){return[AISNotifications.CHOOSE_PLAY_OPTIONS]};AISPlayMediator.prototype.handleNotification=function(notification){switch(notification.getName()){case AISNotifications.CHOOSE_PLAY_OPTIONS:this.resumeTime=notification.getBody();this.classList.remove("hidden")}};function AISAuthorizeCommand(){AISAuthorizeCommand.__super__.constructor.call(this)}__extends(AISAuthorizeCommand,AISCommand);AISAuthorizeCommand.prototype.execute=function(notification){var media,reason;media=this.facade.player.retrieveProxy(MediaProxy.NAME).getData();reason=media.status.reason;if(reason==="ais"||reason==="token"){this.getProxy().authorize()}};function AISAuthenticatingMediator(parent){AISAuthenticatingMediator.__super__.constructor.call(this,null,null,parent)}__extends(AISAuthenticatingMediator,ComponentMediator);AISAuthenticatingMediator.prototype.componentName="ais-authenticating";AISAuthenticatingMediator.prototype.retry=null;AISAuthenticatingMediator.prototype.onRegister=function(){this.classList.add("hidden");this.retry=this.create("ais-authenticating-button");this.retry.type="button";this.retry.value="Back to Providers";this.retry.onclick=this.onclick.bind(this);AISAuthenticatingMediator.__super__.onRegister.call(this)};AISAuthenticatingMediator.prototype.onclick=function(event){if(typeof event.stopImmediatePropagation==="function"){event.stopImmediatePropagation()}this.classList.add("hidden");this.sendNotification(AISNotifications.START_AUTHENTICATION);return false};AISAuthenticatingMediator.prototype.listNotificationInterests=function(){return[AISNotifications.AUTHENTICATING]};AISAuthenticatingMediator.prototype.handleNotification=function(notification){switch(notification.getName()){case AISNotifications.AUTHENTICATING:if(notification.getBody()===true){this.classList.remove("hidden")}else{this.classList.add("hidden")}}};function AISStartAuthenticationCommand(){AISStartAuthenticationCommand.__super__.constructor.call(this)}__extends(AISStartAuthenticationCommand,AISCommand);AISStartAuthenticationCommand.prototype.execute=function(notification){this.getProxy().bounce()};function AISMediator(){AISMediator.__super__.constructor.call(this)}__extends(AISMediator,OverlayMediator);AISMediator.prototype.componentName="ais";AISMediator.prototype.chooser=null;AISMediator.prototype.auth=null;AISMediator.prototype.play=null;AISMediator.prototype.onRegister=function(){var _this=this;this.classList.add("hidden");setTimeout(function(){_this.chooser=new AISChooserMediator(_this);_this.facade.registerMediator(_this.chooser);_this.auth=new AISAuthenticatingMediator(_this);_this.facade.registerMediator(_this.auth);_this.play=new AISPlayMediator(_this);return _this.facade.registerMediator(_this.play)},20);AISMediator.__super__.onRegister.call(this)};AISMediator.prototype.listNotificationInterests=function(){return[AISNotifications.START_AUTHENTICATION,AISNotifications.AUTHENTICATION_COMPLETE,AISNotifications.CHOOSE_PLAY_OPTIONS,Notifications.MEDIA_CHANGE]};AISMediator.prototype.handleNotification=function(notification){switch(notification.getName()){case AISNotifications.CHOOSE_PLAY_OPTIONS:case AISNotifications.START_AUTHENTICATION:this.classList.remove("hidden");break;case AISNotifications.AUTHENTICATION_COMPLETE:case Notifications.MEDIA_CHANGE:this.classList.add("hidden");this.facade.player.sendNotification(Notifications.REMOVE_APPLICATION_STATE,"authenticating")}};function AISPlugin(){AISPlugin.__super__.constructor.call(this)}__extends(AISPlugin,Feature);AISPlugin.NAME="AISPlugin";AISPlugin.prototype.moduleName="ais";AISPlugin.prototype.featureName="auth";AISPlugin.prototype.idps=null;AISPlugin.prototype.createController=function(){this.registerCommand(SecurityNotifications.AUTHORIZE,AISAuthorizeCommand);this.registerCommand(AISNotifications.LAUNCH_IDP_LOGIN,AISLaunchIDPLoginCommand);this.registerCommand(AISNotifications.START_AUTHENTICATION,AISStartAuthenticationCommand)};AISPlugin.prototype.createModel=function(){this.proxy=new AISProxy(this.config);this.registerProxy(this.proxy)};AISPlugin.prototype.createView=function(){this.registerMediator(new AISMediator())};AISPlugin.prototype.listNotificationInterests=function(){return AISPlugin.__super__.listNotificationInterests.call(this).concat([Notifications.MEDIA_CHANGE,SecurityNotifications.AUTHORIZE])};AISPlugin.prototype.listNotificationPublications=function(){return AISPlugin.__super__.listNotificationPublications.call(this).concat([SecurityNotifications.AUTHORIZATION_FAILED,SecurityNotifications.AUTHORIZED,SecurityNotifications.SET_TOKEN,SecurityNotifications.SET_KEY,Notifications.INITIALIZED,Notifications.PLAY,Notifications.SEEK])};AISPlugin.prototype.listNotificationEvents=function(){return AISPlugin.__super__.listNotificationEvents.call(this).concat([AISNotifications.AUTHENTICATED])};AISPlugin.prototype.authorize=function(media){this.proxy.authorize(media);return media};AISPlugin.prototype.logout=function(){this.proxy.logout()};AISPlugin.prototype.getIdps=function(){return this.idps};AMP.registerPlugin("ais","html",AISPlugin);function AISFlashPlugin(){AISFlashPlugin.__super__.constructor.call(this)}__extends(AISFlashPlugin,AISPlugin);AISFlashPlugin.NAME="AISFlashPlugin";AISFlashPlugin.prototype.proxy=null;AISFlashPlugin.prototype.startTime=null;AISFlashPlugin.prototype.createController=function(){this.registerCommand(AISNotifications.LAUNCH_IDP_LOGIN,AISLaunchIDPLoginCommand);this.registerCommand(AISNotifications.START_AUTHENTICATION,AISStartAuthenticationCommand)};AISFlashPlugin.prototype.setData=function(data){var proxy;proxy=this.retrieveProxy(AISProxy.NAME);proxy.data.platformID=data.platformID;proxy.data.resourceID=data.resourceID;proxy.data.contentID=data.contentID};AISFlashPlugin.prototype.authorize=function(media){this.retrieveProxy(AISProxy.NAME).authorize(media)};function SharePlugin(){SharePlugin.__super__.constructor.call(this)}__extends(SharePlugin,Feature);SharePlugin.prototype.moduleName="share";SharePlugin.prototype.featureName="share";SharePlugin.prototype.createModel=function(){this.registerProxy(new ShareProxy(this.config))};SharePlugin.prototype.createController=function(){this.registerCommand(Notifications.MEDIA_CHANGE,ShareMediaChangeCommand)};SharePlugin.prototype.createView=function(){this.registerMediator(new ShareMediator())};SharePlugin.prototype.listNotificationInterests=function(){return[Notifications.MEDIA_CHANGE]};SharePlugin.prototype.listNotificationPublications=function(){return SharePlugin.__super__.listNotificationPublications.apply(this,arguments).concat([Notifications.ADD_CONTROL,Notifications.REMOVE_CONTROL,Notifications.ADD_CONTROL_STATE,Notifications.REMOVE_CONTROL_STATE])};AMP.registerPlugin("share","html",SharePlugin);AMP.registerPlugin("share","external",SharePlugin);function AISWrapper(player,init){var _this=this;AISWrapper.__super__.constructor.call(this,player,init);this.plugin=new AISFlashPlugin();this.plugin.addEventListener("loggedin",function(event){_this.facade.dispatcher.dispatchEvent(event)});this.plugin.oninitialized=player.registerModule.bind(player,this.plugin);this.plugin.initialize(init,this.player)}__extends(AISWrapper,PluginWrapper);AISWrapper.NAME="AISWrapper";AISWrapper.prototype.plugin=null;AISWrapper.prototype.getFeatureName=function(){return"auth"};AISWrapper.prototype.createXML=function(xml){var application,auth,element,prop,props,text,vendor,_i,_len;application=xml.firstChild;auth=xml.getElementsByTagName("authentication");if(!(auth!=null)||auth.length===0){auth=xml.createElement("authentication");application.appendChild(auth)}else{auth=auth[0]}vendor=xml.createElement("vendor");vendor.setAttribute("id","ais");auth.appendChild(vendor);props=[{value:this.config.platformID,key:"platformID"},{value:this.config.resourceID,key:"resourceID"},{value:this.config.contentID,key:"contentID"}];for(_i=0,_len=props.length;_i<_len;_i++){prop=props[_i];if(!(prop.value!=null)){continue}element=xml.createElement("property");element.setAttribute("key",prop.key);text=XMLUtils.createTextContent(xml,prop.value);element.appendChild(text);vendor.appendChild(element)}return xml};AISWrapper.prototype.listNotificationInterests=function(){return AISWrapper.__super__.listNotificationInterests.apply(this,arguments).concat([FlashNotifications.AUTHORIZE,FlashNotifications.TIME_UPDATE,FlashNotifications.ENDED,FlashNotifications.PAUSED,FlashNotifications.CAPABILITY_CHANGE,FlashNotifications.RESET])};AISWrapper.prototype.handleNotification=function(notification){var body,mediaProxy,name;AISWrapper.__super__.handleNotification.call(this,notification);name=notification.getName();body=notification.getBody();switch(name){case FlashNotifications.AUTHORIZE:this.plugin.startTime=null;this.plugin.setData(body);mediaProxy=this.player.retrieveProxy(MediaProxy.NAME);if(!(mediaProxy.getSrc()!=null)){mediaProxy.setSrc(body.media.src)}this.plugin.authorize();break;case FlashNotifications.TIME_UPDATE:this.plugin.sendNotification(Notifications.TIME_UPDATE,body);break;case FlashNotifications.ENDED:this.plugin.sendNotification(Notifications.ENDED,body);break;case FlashNotifications.PAUSED:this.plugin.sendNotification(Notifications.PAUSE,body);break;case FlashNotifications.RESET:this.plugin.sendNotification(Notifications.MEDIA_CHANGE,body);break;case FlashNotifications.CAPABILITY_CHANGE:if((this.plugin.startTime!=null)&&body.type==="canSeekChange"&&body.enabled){this.player.setCurrentTime(this.plugin.startTime)}}};AMP.registerPlugin("ais","flash",AISWrapper);function FreeWheelProxy(config){this.media={};this.adtimeupdate=this.adTimeupdate.bind(this);this.timeupdate=this.midrollCheck.bind(this);FreeWheelProxy.__super__.constructor.call(this,config)}__extends(FreeWheelProxy,AdProxy);FreeWheelProxy.NAME=AdProxy.NAME;FreeWheelProxy.prototype.context=null;FreeWheelProxy.prototype.prerollSlots=null;FreeWheelProxy.prototype.midrollSlots=null;FreeWheelProxy.prototype.postrollSlots=null;FreeWheelProxy.prototype.initialized=false;FreeWheelProxy.prototype.playWhenLoaded=false;FreeWheelProxy.prototype.timeupdate=null;FreeWheelProxy.prototype.adtimeupdate=null;FreeWheelProxy.prototype.slot=null;FreeWheelProxy.prototype.playbackCore=null;FreeWheelProxy.prototype.nextMidroll=null;FreeWheelProxy.prototype.midrollEngaged=false;FreeWheelProxy.prototype.defaults={networkId:"96749",serverUrl:"http://demo.v.fwmrm.net/ad/g/1",profileId:"global-js",siteSectionId:"DemoSiteGroup.01",siteSectionFallbackId:null,videoAssetId:"#{media.guid}",videoAssetFallbackId:null,prerollSlotId:null,midrollSlotId:null,postrollSlotId:null,visitorId:null,keyValues:null,keyValuesString:null,renderers:null};FreeWheelProxy.prototype.initialize=function(){this.plugin=this.createPlugin();this.plugin.setNetwork(this.value.networkId);this.plugin.setServer(this.value.serverUrl)};FreeWheelProxy.prototype.createPlugin=function(){return new tv.freewheel.SDK.AdManager()};FreeWheelProxy.prototype.engage=function(media){var cuePoints,index,key,keyValue,pair,pairs,renderer,renderers,scene,time,value,_i,_j,_k,_len,_len1,_len2,_ref,_ref1,_ref2;FreeWheelProxy.__super__.engage.call(this,media);this.prerollSlots=[];this.midrollSlots=[];this.postrollSlots=[];this.context=this.plugin.newContext();this.context.registerVideoDisplayBase(this.facade.player.viewComponent.id);this.context.setProfile(this.value.profileId);this.context.setVideoAsset(this.value.videoAssetId,media.duration,this.value.networkId,null,null,null,null,this.value.videoAssetFallbackId);this.context.setSiteSection(this.value.siteSectionId,this.value.networkId,null,null,this.value.siteSectionFallbackId);if(this.value.visitorId!=null){this.context.setVisitor(this.value.visitorId)}if(this.value.keyValues!=null){_ref=this.value.keyValues;for(key in _ref){value=_ref[key];if(value!=null){this.context.addKeyValue(key,value)}}}if(this.value.keyValuesString!=null){pairs=this.value.keyValuesString.split("&");for(_i=0,_len=pairs.length;_i<_len;_i++){pair=pairs[_i];if(!(pair!=="")){continue}keyValue=pair.split("=");this.context.addKeyValue(keyValue[0],keyValue[1])}}this.context.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.onRequestComplete.bind(this));this.context.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.onSlotStarted.bind(this));this.context.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.onSlotEnded.bind(this));this.context.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.onAdImpression.bind(this));this.context.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.onAdImpressionEnd.bind(this));this.context.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT,10000,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);this.context.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT,10000,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);if(this.value.prerollSlotId!=null){this.context.addTemporalSlot(this.value.prerollSlotId,tv.freewheel.SDK.ADUNIT_PREROLL,0)}if(((_ref1=media.scenes)!=null?_ref1.length:void 0)>0&&(this.value.midrollSlotId!=null)){cuePoints=[];_ref2=media.scenes;for(index=_j=0,_len1=_ref2.length;_j<_len1;index=++_j){scene=_ref2[index];if(!(index>0)){continue}time=Utils.flattenTimecode(scene.sceneStartTime);cuePoints.push(time);this.context.addTemporalSlot(this.value.midrollSlotId,tv.freewheel.SDK.ADUNIT_MIDROLL,time)}this.facade.player.sendNotification(Notifications.ADD_CUE_POINTS,cuePoints)}if(this.value.postrollSlotId!=null){this.context.addTemporalSlot(this.value.postrollSlotId,tv.freewheel.SDK.ADUNIT_POSTROLL,media.duration)}renderers=this.value.renderers;if((renderers!=null?renderers.length:void 0)>0){for(_k=0,_len2=renderers.length;_k<_len2;_k++){renderer=renderers[_k];this.context.addRenderer(renderer.url,renderer.baseUnit,renderer.contentType,renderer.slotType,renderer.soAdUnit,renderer.creativeApi,renderer.parameters)}}this.initialized=false;this.context.submitRequest()};FreeWheelProxy.prototype.onRequestComplete=function(event){var cues,slot,slots,_i,_len;cues=[];if(event.success){slots=this.context.getTemporalSlots();for(_i=0,_len=slots.length;_i<_len;_i++){slot=slots[_i];switch(slot.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL:if(this.value.prerollSlotId!=null){this.prerollSlots.push(slot)}break;case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:if(this.value.midrollSlotId!=null){cues.push(slot.getTimePosition());this.midrollSlots.push(slot)}break;case tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL:if(this.value.postrollSlotId!=null){this.postrollSlots.push(slot)}}}}if(cues.length>0){this.sendNotification(Notifications.ADD_CUE_POINTS,cues)}this.initialized=true;if(this.playWhenLoaded===true){this.startAd()}};FreeWheelProxy.prototype.breakStart=function(){var video;this.playbackCore=this.facade.player.retrieveProxy(PlayerProxy.NAME).getActivePlaybackCore();this.playbackCore.setEnabled(false);video=this.facade.player.getMediaElement();video.addEventListener("playing",this.playbackCore.handlers.playing);video.addEventListener("pause",this.playbackCore.handlers.pause);video.addEventListener("waiting",this.playbackCore.handlers.waiting)};FreeWheelProxy.prototype.onAdImpression=function(event){this.sendNotification(AdNotifications.AD_STARTED,this.adVO)};FreeWheelProxy.prototype.onAdImpressionEnd=function(event){this.sendNotification(AdNotifications.AD_ENDED,this.adVO)};FreeWheelProxy.prototype.midrollCheck=function(event){var video;video=event.currentTarget;if(this.playbackCore.getCurrentTime()>=this.nextMidroll.getTimePosition()){video.removeEventListener("timeupdate",this.timeupdate);this.engageAds();this.midrollEngaged=false;this.playAd(this.nextMidroll)}};FreeWheelProxy.prototype.adTimeupdate=function(event){try{if(this.slot){this.sendNotification(AdNotifications.AD_TIME_REMAINING,this.slot.getTotalDuration()-this.slot.getPlayheadTime())}}catch(error){this.facade.logger.error("[AMP FREEWHEEL ERROR]",error)}};FreeWheelProxy.prototype.onSlotStarted=function(event){this.slot=event.slot;this.facade.player.getMediaElement().addEventListener("timeupdate",this.adtimeupdate)};FreeWheelProxy.prototype.onSlotEnded=function(event){var index,slotTimePositionClass;this.facade.player.getMediaElement().removeEventListener("timeupdate",this.adtimeupdate);slotTimePositionClass=event.slot.getTimePositionClass();this.slot=null;switch(slotTimePositionClass){case tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL:if(this.prerollSlots.length){this.prerollSlots.shift();if(this.prerollSlots.length){this.playAd(this.prerollSlots[0])}else{this.sendNotification(AdNotifications.BREAK_END)}}break;case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:index=this.midrollSlots.indexOf(this.nextMidroll);if(index>-1){this.midrollSlots.splice(index,1)}this.facade.player.getMediaElement().addEventListener("canplaythrough",this.canplaythrough);this.sendNotification(AdNotifications.BREAK_END);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL:if(this.postrollSlots.length){this.postrollSlots.shift();if(this.postrollSlots.length){this.playAd(this.postrollSlots[0])}else{this.sendNotification(AdNotifications.BREAK_END)}}}};FreeWheelProxy.prototype.playAd=function(ad){this.adVO=new AdVO(ad.getCustomId(),ad.getCustomId(),ad.getTotalDuration(),ad.getTimePosition(),ad.getTimePositionClass().toLowerCase(),"freewheel",null,null,null,ad);this.sendNotification(AdNotifications.BREAK_START,this.adVO);this.sendNotification(AdNotifications.AD_LOADED,this.adVO);try{ad.play()}catch(error){this.error(error)}};FreeWheelProxy.prototype.start=function(){if(FreeWheelProxy.__super__.start.call(this)===false){return false}if(this.canPlay()===true){this.startAd()}else{this.playWhenLoaded=true}return true};FreeWheelProxy.prototype.canPlay=function(){return this.initialized===true};FreeWheelProxy.prototype.startAd=function(){this.playWhenLoaded=false;if(this.prerollSlots.length){this.playAd(this.prerollSlots[0])}else{this.sendNotification(AdNotifications.BREAK_END,this.adVO)}};FreeWheelProxy.prototype.play=function(){FreeWheelProxy.__super__.play.call(this);this.facade.player.getMediaElement().play()};FreeWheelProxy.prototype.pause=function(){var video;FreeWheelProxy.__super__.pause.call(this);video=this.facade.player.getMediaElement();video.pause();setTimeout(function(){return video.controls=false},0)};FreeWheelProxy.prototype.breakEnd=function(){var video;FreeWheelProxy.__super__.breakEnd.call(this);if(this.playbackCore==null){this.playbackCore=this.facade.player.retrieveProxy(PlayerProxy.NAME).getActivePlaybackCore()}video=this.facade.player.getMediaElement();video.removeEventListener("playing",this.playbackCore.handlers.playing);video.removeEventListener("pause",this.playbackCore.handlers.pause);video.removeEventListener("waiting",this.playbackCore.handlers.waiting);if(this.playbackCore.getEnded()){this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_COMPLETED)}else{this.playbackCore.setEnabled(true);this.facade.player.sendNotification(Notifications.PLAY,true);this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_PLAYING);this.engageMidrollCheck()}};FreeWheelProxy.prototype.contentStarted=function(){this.engageMidrollCheck()};FreeWheelProxy.prototype.contentSeek=function(time){var midroll;midroll=this.getNextMidroll(time);if(!(midroll!=null)){return}if(!(this.nextMidroll!=null)||midroll.getTimePosition()<this.nextMidroll.getTimePosition()){if(this.midrollEngaged){this.nextMidroll=midroll}else{this.engageMidrollCheck()}}};FreeWheelProxy.prototype.engageMidrollCheck=function(){var _ref;if(((_ref=this.midrollSlots)!=null?_ref.length:void 0)===0||this.midrollEngaged===true){return}this.nextMidroll=this.getNextMidroll(this.playbackCore.getCurrentTime());if(!(this.nextMidroll!=null)){return}this.midrollEngaged=true;this.facade.player.getMediaElement().addEventListener("timeupdate",this.timeupdate)};FreeWheelProxy.prototype.getNextMidroll=function(time){var midroll,nextMidroll,_i,_len,_ref;_ref=this.midrollSlots;for(_i=0,_len=_ref.length;_i<_len;_i++){midroll=_ref[_i];if(time<midroll.getTimePosition()){nextMidroll=midroll;break}}return nextMidroll};FreeWheelProxy.prototype.contentEnded=function(){var _ref;this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);if(((_ref=this.postrollSlots)!=null?_ref.length:void 0)){this.playAd(this.postrollSlots[0])}else{this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_COMPLETED)}};function FreeWheelWrapper(){return FreeWheelWrapper.__super__.constructor.apply(this,arguments)}__extends(FreeWheelWrapper,AdWrapper);FreeWheelWrapper.NAME="FreeWheelWrapper";FreeWheelWrapper.prototype.createXML=function(xml){var admedia,application,key,keyValue,prop,props,value,vendor,_i,_len,_ref;application=xml.firstChild;admedia=xml.getElementsByTagName("admedia")[0];if(!(admedia!=null)){admedia=xml.createElement("admedia");application.appendChild(admedia)}vendor=xml.createElement("vendor");vendor.setAttribute("id","freewheel");admedia.appendChild(vendor);props=[{value:this.config.plugin.swf,key:"FREEWHEEL_AD_MANAGER_URL"},{value:this.config.serverUrl,key:"FREEWHEEL_SERVER_URL"},{value:this.config.networkId,key:"FREEWHEEL_NETWORK_ID"},{value:this.config.profileId,key:"FREEWHEEL_PROFILE"},{value:this.config.siteSectionId,key:"FREEWHEEL_SITE_SECTION_ID"},{value:this.config.siteSectionFallbackId,key:"FREEWHEEL_SITE_SECTION_FALLBACK_ID"},{value:this.config.prerollSlotId,key:"FREEWHEEL_PREROLL_SLOT_ID"},{value:this.config.midrollSlotId,key:"FREEWHEEL_MIDROLL_SLOT_ID"},{value:this.config.postrollSlotId,key:"FREEWHEEL_POSTROLL_SLOT_ID"},{value:this.config.videoAssetId,key:"FREEWHEEL_VIDEO_ASSET_ID"},{value:this.config.videoAssetFallbackId,key:"FREEWHEEL_VIDEO_ASSET_FALLBACK_ID"},{value:this.config.videoAssetVideoPlayRandom,key:"FREEWHEEL_VIDEO_ASSET_VIDEO_PLAY_RANDOM"},{value:this.config.visitorId,key:"FREEWHEEL_VISITOR_ID"},{value:this.config.keyValuesString,key:"FREEWHEEL_KEY_VALUES_STRING"},{value:"30898",key:"FREEWHEEL_SITE_SECTION_PAGE_VIEW_RANDOM"},{value:"EXACT",key:"FREEWHEEL_VIDEO_ASSET_DURATION_TYPE"},{value:this.config.visitorHeader,key:"FREEWHEEL_VISITOR_HTTP_HEADER_KEY_VALUE"}];for(_i=0,_len=props.length;_i<_len;_i++){prop=props[_i];if(prop.value!=null){this.createProperty(xml,prop.key,prop.value,vendor)}}if(this.config.position!=null){vendor.setAttribute("position",this.config.position)}if(this.config.keyValues!=null){keyValue=xml.createElement("property");keyValue.setAttribute("key","FREEWHEEL_KEY_VALUE");_ref=this.config.keyValues;for(key in _ref){value=_ref[key];if(value!=null){this.createProperty(xml,key,value,keyValue)}}vendor.appendChild(keyValue)}};function DASHPlaybackProxy(data){DASHPlaybackProxy.__super__.constructor.call(this,data.types);this.buffer=data.buffer}__extends(DASHPlaybackProxy,PlaybackCoreProxy);DASHPlaybackProxy.prototype.initialized=true;DASHPlaybackProxy.prototype.playbackCoreName="dash";DASHPlaybackProxy.prototype.context=null;DASHPlaybackProxy.prototype.player=null;DASHPlaybackProxy.prototype.buffer=null;DASHPlaybackProxy.prototype.isDVR=false;DASHPlaybackProxy.prototype.resumecomplete=function(){this.applyHandlers(true);this.play()};DASHPlaybackProxy.prototype.load=function(){var video,_this=this;video=this.getMediaElement();video.addEventListener("loadedmetadata",this.resumeHandlers.canplay);this.context=new Dash.di.DashContext();this.player=new MediaPlayer(this.context);if(this.buffer!=null){MediaPlayer.dependencies.BufferController.DEFAULT_MIN_BUFFER_TIME=this.buffer}this.player.startup();this.player.addEventListener("error",this.onError.bind(this));this.player.debug.setLogToBrowserConsole(this.facade.logger.enabled);this.player.attachView(video);this.player.setAutoPlay(false);this.player.attachSource(this.getSrc());this.isDVR=this.facade.retrieveProxy(MediaProxy.NAME).getTemporalType()==="dvr";if(this.isDVR===true){video.addEventListener("timeupdate",function(event){var duration,time;try{time=_this.player.time();duration=_this.player.duration();_this.sendNotification(Notifications.DISPLAY_TIME,{value:time/duration,currentTime:time,duration:duration})}catch(error){_this.facade.logger.error(error)}})}};DASHPlaybackProxy.prototype.seek=function(value){DASHPlaybackProxy.__super__.seek.call(this,this.isDVR===true?this.player.getDVRSeekOffset(value):value)};DASHPlaybackProxy.prototype.getDuration=function(){if(this.isDVR===true){return this.player.duration()}else{return DASHPlaybackProxy.__super__.getDuration.call(this)}};DASHPlaybackProxy.prototype.getStats=function(){return{}};DASHPlaybackProxy.prototype.onError=function(event){this.facade.logger.error("DASH JS Playback Error:",event)};function StatsPlugin(){StatsPlugin.__super__.constructor.call(this)}__extends(StatsPlugin,Plugin);StatsPlugin.prototype.moduleName="stats";StatsPlugin.prototype.createModel=function(){this.proxy=new StatsProxy(this.config);this.registerProxy(this.proxy)};StatsPlugin.prototype.createController=function(){this.registerCommand(StatsNotifications.VISIBILITY_CHANGE,StatsVisibilityChangeCommand)};StatsPlugin.prototype.createView=function(){this.registerMediator(new StatsMediator())};StatsPlugin.prototype.listNotificationPublications=function(){return StatsPlugin.__super__.listNotificationPublications.call(this).concat([Notifications.ADD_CONTROL,Notifications.REMOVE_CONTROL,Notifications.ADD_CONTROL_STATE,Notifications.REMOVE_CONTROL_STATE,StatsNotifications.VISIBILITY_CHANGE])};StatsPlugin.prototype.getHidden=function(){return this.proxy.getHidden()};StatsPlugin.prototype.setHidden=function(value){this.sendNotification(StatsNotifications.VISIBILITY_CHANGE,value);return value};AMP.registerPlugin("stats","html",StatsPlugin);function DASHChangeDisplayStateCommand(){DASHChangeDisplayStateCommand.__super__.constructor.call(this)}__extends(DASHChangeDisplayStateCommand,puremvc.SimpleCommand);DASHChangeDisplayStateCommand.prototype.execute=function(notification){var core,fullscreen,playback,proxy,state,target,_this=this;state=notification.getBody();playback=this.facade.retrieveProxy(PlaybackProxy.NAME);core=this.facade.getMediaElement();if(!(core!=null)||!core.webkitSupportsFullscreen){return}proxy=this.facade.retrieveProxy(ApplicationStateProxy.NAME);proxy.setDisplayState(state);fullscreen={};target=this.facade.viewComponent;if(target.requestFullscreen!=null){fullscreen.enter=function(){return target.requestFullscreen()};fullscreen.exit=function(){return document.cancelFullscreen()};fullscreen.event="onfullscreenchange";fullscreen.element="fullscreenElement"}else{if(target.webkitRequestFullScreen!=null){fullscreen.enter=function(){return target.webkitRequestFullScreen()};fullscreen.exit=function(){return document.webkitCancelFullScreen()};fullscreen.event="onwebkitfullscreenchange";fullscreen.element="webkitFullscreenElement"}else{if(target.mozRequestFullScreen!=null){fullscreen.enter=function(){return target.mozRequestFullscreen()};fullscreen.exit=function(){return document.mozCancelFullScreen()};fullscreen.event="onmozfullscreenchange";fullscreen.element="mozFullscreenElement"}else{if(target.msRequestFullScreen!=null){fullscreen.enter=function(){return target.msRequestFullscreen()};fullscreen.exit=function(){return document.msCancelFullScreen()};fullscreen.event="onmozfullscreenchange";fullscreen.element="mozFullscreenElement"}}}}if(state===DisplayState.FULL_SCREEN){fullscreen.enter();if(fullscreen.event!=null){core[fullscreen.event]=function(event){if(!(document[fullscreen.element]!=null)){return _this.sendNotification(Notifications.CHANGE_DISPLAY_STATE,DisplayState.NORMAL)}}}}else{if(state===DisplayState.NORMAL){fullscreen.exit();core[fullscreen.event]=null}}this.facade.dispatchEvent(new Event("fullscreenchange",state===DisplayState.FULL_SCREEN))};function DASHProxy(config){DASHProxy.__super__.constructor.call(this,config)}__extends(DASHProxy,PluginProxy);DASHProxy.NAME=ModuleProxy.NAME;DASHProxy.prototype.defaults={types:["application/dash+xml"],buffer:null};DASHProxy.prototype.initialize=function(){var core,player;window.MediaSource=window.MediaSource||window.WebKitMediaSource;if(window.MediaSource!=null){this.sendNotification(Notifications.INITIALIZED);core=new DASHPlaybackProxy(this.getConfigurationData());player=this.facade.player.retrieveProxy(PlayerProxy.NAME);player.registerPlaybackCore(core)}};function ChromeCastPlayer(shim){var index,rule,sheet,style;this.shim=shim;ChromeCastPlayer.__super__.constructor.call(this);this.state=cast.receiver.media.PlayerState.IDLE;try{style=document.createElement("style");style.type="text/css";style.appendChild(document.createTextNode(""));document.head.appendChild(style);sheet=style.sheet;rule=".akamai-html5.akamai-video::cue {color: #FFFFFF; background: #000000; visibility: hidden;}";index=sheet.insertRule(rule,0);this.cssRule=sheet.rules[index]}catch(error){Logger.error(error)}}__extends(ChromeCastPlayer,EventDispatcher);ChromeCastPlayer.prototype.player=null;ChromeCastPlayer.prototype.callbackMap=null;ChromeCastPlayer.prototype.state=null;ChromeCastPlayer.prototype.activeTrackId=null;ChromeCastPlayer.prototype.cssRule=null;ChromeCastPlayer.prototype.textTrackStyle=null;ChromeCastPlayer.prototype.ccHandler=null;ChromeCastPlayer.prototype.feed=null;ChromeCastPlayer.prototype.media=null;ChromeCastPlayer.prototype.tracks=null;ChromeCastPlayer.prototype.registerPlayer=function(player){var events,listener,readyHandler,_this=this;this.player=player;events=["loadedmetadata","ended","error"];listener=this.dispatchEvent.bind(this);events.forEach(function(type){return player.addEventListener(type,listener)});readyHandler=function(){_this.player.removeEventListener("ready",readyHandler);_this.applyMedia();_this.applyFeed();_this.applyClassName()};this.player.addEventListener("ready",readyHandler);this.player.addEventListener("playing",this.setState.bind(this,cast.receiver.media.PlayerState.PLAYING));this.player.addEventListener("pause",this.setState.bind(this,cast.receiver.media.PlayerState.PAUSED));this.player.addEventListener("waiting",this.setState.bind(this,cast.receiver.media.PlayerState.BUFFERING))};ChromeCastPlayer.prototype.setState=function(state){if(state===this.state){return}this.state=state;this.shim.mediaManager.broadcastStatus(true);return state};ChromeCastPlayer.prototype.registerErrorCallback=function(errorCallback){this.onerror=errorCallback};ChromeCastPlayer.prototype.registerEndedCallback=function(endedCallback){this.onended=endedCallback};ChromeCastPlayer.prototype.registerLoadCallback=function(loadCallback){this.onloadedmetadata=loadCallback};ChromeCastPlayer.prototype.unregisterErrorCallback=function(){this.onerror=null};ChromeCastPlayer.prototype.unregisterEndedCallback=function(){this.onended=null};ChromeCastPlayer.prototype.unregisterLoadCallback=function(){this.onloadedmetadata=null};ChromeCastPlayer.prototype.load=function(contentId,autoplay,opt_time,opt_tracksInfo){var customData,info,key,media,metadata,value,_ref,_ref1,_ref2,_ref3;info=this.shim.mediaManager.getMediaInformation();customData=info.customData||{};metadata=info.metadata||{};if(opt_tracksInfo!=null){this.editTracksInfo(opt_tracksInfo)}else{this.activeTrackId=null}if((customData.feed!=null)&&(((_ref=this.player)!=null?_ref.feed:void 0)!=null)){this.feed=customData.feed;this.media=null;this.applyFeed();return}this.feed=null;media={src:contentId,type:info.contentType,title:metadata.title,poster:(_ref1=metadata.images)!=null?_ref1.url:void 0,description:metadata.subtitle,pubDate:new Date(info.releaseDate),metadata:customData,duration:info.duration,startTime:opt_time||((_ref2=customData.media)!=null?_ref2.startTime:void 0),autoplay:autoplay};if(customData.media!=null){_ref3=customData.media;for(key in _ref3){value=_ref3[key];if(!(media[key]!=null)){media[key]=value}}}this.tracks=info.tracks;this.media=media;this.applyMedia()};ChromeCastPlayer.prototype.applyMedia=function(){if(!(this.player!=null)||!(this.media!=null)){return}this.player.setMedia(this.media);this.setState(cast.receiver.media.PlayerState.BUFFERING)};ChromeCastPlayer.prototype.loadTracks=function(tracks,event){var track,type;this.player.removeEventListener("loadedmetadata",this.ccHandler);if((tracks!=null?tracks.length:void 0)>0){track=this.getTrack(0);if(track!=null){type=/ttml/.test(track.trackContentType)?"ttml":track.trackContentType}}};ChromeCastPlayer.prototype.applyFeed=function(){if(!(this.player!=null)||!(this.feed!=null)){return}this.player.addEventListener("mediachange",this.mediachangeHandler.bind(this));if(feed.data!=null){this.player.feed.setData(feed.data)}else{if(feed.url!=null){this.player.feed.setURL(feed.url)}}};ChromeCastPlayer.prototype.mediachangeHandler=function(event){var media,mediaInfo;this.removeHandler("mediachange");media=this.player.getMedia();mediaInfo=new cast.receiver.media.MediaInformation();mediaInfo.contentId=media.src;mediaInfo.contentType=media.type;mediaInfo.customData=media.metadata;mediaInfo.duration=media.duration;mediaInfo.metadata={title:media.title,subtitle:media.description,images:[{url:media.poster}],releaseDate:media.pubDate.toISOString()};this.media=media;this.shim.mediaManager.setMediaInformation(mediaInfo,true)};ChromeCastPlayer.prototype.reset=function(){};ChromeCastPlayer.prototype.play=function(){this.player.play()};ChromeCastPlayer.prototype.seek=function(time,opt_resumeState){this.player.setCurrentTime(time);switch(opt_resumeState){case cast.receiver.media.SeekResumeState.PLAYBACK_PAUSE:this.player.pause();break;case cast.receiver.media.SeekResumeState.PLAYBACK_START:this.player.play()}};ChromeCastPlayer.prototype.pause=function(){return this.player.pause()};ChromeCastPlayer.prototype.getState=function(){return this.state};ChromeCastPlayer.prototype.getCurrentTimeSec=function(){if(this.player!=null){return this.player.getCurrentTime()}else{return 0}};ChromeCastPlayer.prototype.getDurationSec=function(){if(this.player!=null){return this.player.getDuration()}else{return 0}};ChromeCastPlayer.prototype.getVolume=function(){var volume;volume=new cast.receiver.media.Volume();volume.level=this.player.getVolume();volume.muted=this.player.getMuted();return volume};ChromeCastPlayer.prototype.setVolume=function(volume){if(volume.level!=null){this.player.setVolume(volume.level)}if(volume.muted===true){this.player.setMuted(true)}else{if(this.player.getMuted()===true){this.player.setMuted(false)}}return volume};ChromeCastPlayer.prototype.editTracksInfo=function(data){var activeTrack,style;if(data.activeTrackIds!=null){activeTrack=data.activeTrackIds[0];if(this.activeTrackId!==activeTrack){this.activeTrackId=activeTrack;this.applyClassName()}}style=data.textTrackStyle;if((style!=null)&&(this.cssRule!=null)){this.textTrackStyle=style;if(style.foregroundColor!=null){this.cssRule.style.color=this.hexToRgba(style.foregroundColor)}if(style.backgroundColor!=null){this.cssRule.style.backgroundColor=this.hexToRgba(style.backgroundColor)}if(style.windowType===cast.receiver.media.TextTrackWindowType.ROUNDED_CORNERS){this.cssRule.style.borderRadius=style.windowRoundedCornerRadius+"px"}if(style.fontScale!=null){this.cssRule.style.fontSize=style.fontScale+"em"}if(style.fontFamily!=null){this.cssRule.style.fontFamily=style.fontFamily}}};ChromeCastPlayer.prototype.applyClassName=function(hex){var classList,className;if(!(this.player!=null)){return}className="akamai-cc";classList=this.player.getMediaElement().classList;if(this.activeTrackId!=null){classList.add(className)}else{classList.remove(className)}};ChromeCastPlayer.prototype.hexToRgba=function(hex){var a,b,g,r;if(!/^#[A-Fa-f0-9]{6}([A-Fa-f0-9]{2})?$/.test(hex)){return hex}r=parseInt(hex.substring(1,3),16);g=parseInt(hex.substring(3,5),16);b=parseInt(hex.substring(5,7),16);a=hex.length===9?parseInt(hex.substring(7,9),16)/256:1;return"rgba("+r+","+g+","+b+","+a+")"};ChromeCastPlayer.prototype.getTrack=function(id){var track;if(!(id!=null)){id=this.activeTrackId}track=this.tracks.filter(function(item){return item.trackId===id})[0];if(track!=null){if(!(track.trackContentType!=null)){track.trackContentType=cast.player.api.CaptionsType.CEA608}}return track};var ChromeCastConstants={CHANNEL_ID:"urn:x-cast:com.akamai.amp.cast",APPLICATION_ID:"CC1AD845",SUPPORTED_TYPES:[Utils.mimeTypes.m3u8,Utils.mimeTypes.mp4,Utils.mimeTypes.mpd,Utils.mimeTypes.ism,Utils.mimeTypes.webm,Utils.mimeTypes.mp3]};function ChromeCastSenderProxy(config){this.messageBus=config.messageBus||ChromeCastConstants.CHANNEL_ID;ChromeCastSenderProxy.__super__.constructor.call(this,config.sender)}__extends(ChromeCastSenderProxy,PluginProxy);ChromeCastSenderProxy.NAME=ModuleProxy.NAME;ChromeCastSenderProxy.prototype.defaults={applicationID:ChromeCastConstants.APPLICATION_ID};ChromeCastSenderProxy.prototype.session=null;ChromeCastSenderProxy.prototype.media=null;ChromeCastSenderProxy.prototype.messageBus=null;ChromeCastSenderProxy.prototype.feed=null;ChromeCastSenderProxy.prototype.currentTime=null;ChromeCastSenderProxy.prototype.duration=null;ChromeCastSenderProxy.prototype.receiverAvailable=false;ChromeCastSenderProxy.prototype.currentTime=0;ChromeCastSenderProxy.prototype.duration=0;ChromeCastSenderProxy.prototype.playerState=null;ChromeCastSenderProxy.prototype.displayTimeTimeout=null;ChromeCastSenderProxy.prototype.initialize=function(){var _ref,_this=this;if(typeof chrome!=="undefined"&&chrome!==null?(_ref=chrome.cast)!=null?_ref.isAvailable:void 0:void 0){this.initializeCastApi()}else{window.__onGCastApiAvailable=function(loaded,errorInfo){if(loaded===true){_this.initializeCastApi()}else{_this.logError("cast load error",errorInfo)}}}};ChromeCastSenderProxy.prototype.initializeCastApi=function(){var apiConfig,applicationID,sessionRequest;applicationID=this.getConfigurationData().applicationID;sessionRequest=new chrome.cast.SessionRequest(applicationID);apiConfig=new chrome.cast.ApiConfig(sessionRequest,this.sessionListener.bind(this),this.receiverListener.bind(this),chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED);chrome.cast.initialize(apiConfig,this.onInitSuccess.bind(this),this.onInitError.bind(this))};ChromeCastSenderProxy.prototype.onInitSuccess=function(event){this.logEvent("init success",event)};ChromeCastSenderProxy.prototype.onInitError=function(event){this.logError("init error",event)};ChromeCastSenderProxy.prototype.receiverListener=function(event){this.receiverAvailable=event==="available";this.sendNotification(ChromeCastNotifications.AVAILABILITY_CHANGE,this.receiverAvailable);this.logEvent("receiver "+(this.receiverAvailable?"found":"list empty"))};ChromeCastSenderProxy.prototype.sessionListener=function(event){var session;this.logEvent("session listener",event);session=event;if(session.media.length!==0){this.onMediaDiscovered(session.media[0])}else{this.onRequestSessionSuccess(event)}};ChromeCastSenderProxy.prototype.launch=function(){chrome.cast.requestSession(this.onRequestSessionSuccess.bind(this),this.onLaunchError.bind(this))};ChromeCastSenderProxy.prototype.send=function(msg){this.session.sendMessage(this.messageBus,msg,this.onMessageSuccess.bind(this),this.onMessageError.bind(this))};ChromeCastSenderProxy.prototype.onLaunchError=function(event){this.logError("launch error.",event)};ChromeCastSenderProxy.prototype.onRequestSessionSuccess=function(event){var playbackProxy;this.logEvent("request session success.",event);this.session=event;this.session.addMessageListener(this.messageBus,this.onMessage.bind(this));this.session.addUpdateListener(this.onUpdate.bind(this));playbackProxy=this.facade.player.retrieveProxy(PlaybackProxy.NAME);if(this.session.media.length===0){this.loadMedia(playbackProxy.getCurrentTime())}};ChromeCastSenderProxy.prototype.onUpdate=function(isAlive){if(!isAlive){this.sendNotification(Notifications.PLAYBACK_TARGET_CHANGE,{target:"amp"});this.stopDisplayTimeUpdate()}};ChromeCastSenderProxy.prototype.onMessageSuccess=function(event){this.logEvent("message sent",event)};ChromeCastSenderProxy.prototype.onMessageError=function(event){this.logError("message error",event)};ChromeCastSenderProxy.prototype.onMessage=function(namespace,message){var detail,target,type;message=JSON.parse(message);type=message.type;detail=message.detail||{};switch(type){case"dispatchevent":target=detail.target==="player"?this.facade.player.parent:this.facade.player.parent[detail.target];if(target!=null){target.dispatchEvent(detail.event)}}this.sendNotification(Notifications.DISPATCH_EVENT,{type:"message",message:message})};ChromeCastSenderProxy.prototype.onStop=function(event){this.logEvent("stop");this.session.stop(this.onStopSuccess.bind(this),this.onStopError.bind(this))};ChromeCastSenderProxy.prototype.onStopSuccess=function(event){this.logEvent("stop success",event)};ChromeCastSenderProxy.prototype.onStopError=function(event){this.logError("stop error",event)};ChromeCastSenderProxy.prototype.logEvent=function(message,data){if(message==null){message=data.type||""}this.facade.logger.log("[AMP CHROMECAST] "+message,data)};ChromeCastSenderProxy.prototype.logError=function(message,data){this.facade.logger.error("[AMP CHROMECAST ERROR] "+message,data)};ChromeCastSenderProxy.prototype.getFeed=function(){return this.feed};ChromeCastSenderProxy.prototype.setFeed=function(value){if(this.feed===value){return}this.feed=value;if(this.session!=null){this.loadMedia()}};ChromeCastSenderProxy.prototype.loadMedia=function(startTime){var customData,feed,media,receiverCanPlay,request,source,_ref;if(startTime==null){startTime=0}media=this.facade.player.retrieveProxy(MediaProxy.NAME).getData();if(!(media!=null)){return}receiverCanPlay=function(type){if(ChromeCastConstants.SUPPORTED_TYPES.indexOf(type)>-1){return"maybe"}else{return""}};source=Utils.selectSource(media.source,receiverCanPlay);if(!(source!=null)){return}customData={media:media};feed=(_ref=this.facade.player.getModules())!=null?_ref.feed:void 0;if(feed!=null){customData.feed={data:feed.getData(),url:feed.getURL()}}request=this.mediaToLoadRequest(media,source,startTime,customData);this.session.loadMedia(request,this.onMediaDiscovered.bind(this),this.onMediaError.bind(this))};ChromeCastSenderProxy.prototype.mediaToLoadRequest=function(media,source,startTime,customData){var index,mediaInfo,metadata,request,track,value,_i,_len,_ref,_ref1,_ref2;metadata=new chrome.cast.media.GenericMediaMetadata();metadata.title=media.title;metadata.subtitle=media.description;metadata.image=[new chrome.cast.Image(media.poster)];metadata.releaseDate=(_ref=media.pubDate)!=null?typeof _ref.toISOString==="function"?_ref.toISOString():void 0:void 0;mediaInfo=new chrome.cast.media.MediaInfo(source.src,source.type);mediaInfo.duration=media.duration;mediaInfo.customData=customData;mediaInfo.metadata=metadata;if(((_ref1=media.track)!=null?_ref1.length:void 0)>0){mediaInfo.tracks=[];_ref2=media.track;for(index=_i=0,_len=_ref2.length;_i<_len;index=++_i){value=_ref2[index];track=new chrome.cast.media.Track(index,chrome.cast.media.TrackType.TEXT);track.subtype=chrome.cast.media.TextTrackType.CAPTIONS;track.name="Closed Captions";track.language=value.srclang;track.customData=value;track.trackContentId=value.src;track.trackContentType=value.type;mediaInfo.tracks.push(track)}}request=new chrome.cast.media.LoadRequest(mediaInfo);request.currentTime=startTime;return request};ChromeCastSenderProxy.prototype.onMediaDiscovered=function(media){if(this.media!=null){this.media.removeUpdateListener(this.mediaStatusUpdate)}this.media=media;this.mediaStatusUpdate=this.onMediaStatusUpdate.bind(this);this.media.addUpdateListener(this.mediaStatusUpdate);this.sendNotification(Notifications.PLAYBACK_TARGET_CHANGE,{target:"chromecast"})};ChromeCastSenderProxy.prototype.onMediaStatusUpdate=function(status){this.logEvent("mediastatusupdate",status);this.updatePlayerState(this.media.playerState);this.updateDisplayTime();if(status===false){this.stopDisplayTimeUpdate()}};ChromeCastSenderProxy.prototype.updatePlayerState=function(playerState){var state;if(playerState===this.playerState){return}this.playerState=playerState;switch(this.playerState){case chrome.cast.media.PlayerState.BUFFERING:state=PlayState.WAITING;break;case chrome.cast.media.PlayerState.PLAYING:state=PlayState.PLAYING;break;case chrome.cast.media.PlayerState.PAUSED:state=PlayState.PAUSED}this.sendNotification(Notifications.CHANGE_PLAY_STATE,state);if(this.playerState===chrome.cast.media.PlayerState.PLAYING){this.startDisplayTimeUpdate()}else{this.stopDisplayTimeUpdate()}};ChromeCastSenderProxy.prototype.startDisplayTimeUpdate=function(){this.stopDisplayTimeUpdate();this.displayTimeTimeout=setInterval(this.updateDisplayTime.bind(this),100)};ChromeCastSenderProxy.prototype.stopDisplayTimeUpdate=function(){clearInterval(this.displayTimeTimeout);this.displayTimeTimeout=null};ChromeCastSenderProxy.prototype.updateDisplayTime=function(){var currentTime,duration,_ref;currentTime=this.media.getEstimatedTime()||0;duration=((_ref=this.media.media)!=null?_ref.duration:void 0)||currentTime;if(duration!==this.duration){this.duration=duration;this.sendNotification(Notifications.CHANGE_DURATION,this.duration);return}if(currentTime!==this.currentTime){this.currentTime=currentTime;this.sendNotification(Notifications.DISPLAY_TIME,{currentTime:this.currentTime,duration:this.duration})}};ChromeCastSenderProxy.prototype.onMediaError=function(error){this.logError("media error",error);this.stopDisplayTimeUpdate()};ChromeCastSenderProxy.prototype.play=function(){this.media.play()};ChromeCastSenderProxy.prototype.pause=function(){this.media.pause()};ChromeCastSenderProxy.prototype.setCurrentTime=function(time){var request;request=new chrome.cast.media.SeekRequest();request.currentTime=time;this.media.seek(request)};ChromeCastSenderProxy.prototype.getCurrentTime=function(){return this.currentTime};ChromeCastSenderProxy.prototype.isReceiverAvailable=function(){return this.receiverAvailable};function ChromeCastLaunchCommand(){ChromeCastLaunchCommand.__super__.constructor.call(this)}__extends(ChromeCastLaunchCommand,PluginCommand);ChromeCastLaunchCommand.prototype.execute=function(notification){this.config.launch()};function ChromeCastCaptioningVisibilityChangeCommand(){ChromeCastCaptioningVisibilityChangeCommand.__super__.constructor.call(this)}__extends(ChromeCastCaptioningVisibilityChangeCommand,PluginCommand);ChromeCastCaptioningVisibilityChangeCommand.prototype.execute=function(notification){this.config.send({type:"captioning.visibilitychange",detail:{visibility:notification.getBody()}})};function ChromeCastCaptioningSettingsChangeCommand(){ChromeCastCaptioningSettingsChangeCommand.__super__.constructor.call(this)}__extends(ChromeCastCaptioningSettingsChangeCommand,PluginCommand);ChromeCastCaptioningSettingsChangeCommand.prototype.execute=function(notification){this.config.send({type:"captioning.settingschange",detail:notification.getBody()})};function ChromeCastReceiverReadyCommand(){ChromeCastReceiverReadyCommand.__super__.constructor.call(this)}__extends(ChromeCastReceiverReadyCommand,PluginCommand);ChromeCastReceiverReadyCommand.prototype.execute=function(notification){this.facade.player.getViewComponent().hidden=false;this.plugin.ready()};function ChromeCastPlaybackProxy(types,receiver){this.receiver=receiver;ChromeCastPlaybackProxy.__super__.constructor.call(this,types)}__extends(ChromeCastPlaybackProxy,PlaybackCoreProxy);ChromeCastPlaybackProxy.prototype.initialized=true;ChromeCastPlaybackProxy.prototype.player=null;ChromeCastPlaybackProxy.prototype.host=null;ChromeCastPlaybackProxy.prototype.protocol=null;ChromeCastPlaybackProxy.prototype.playbackCoreName="chromecast";ChromeCastPlaybackProxy.prototype.manifest=null;ChromeCastPlaybackProxy.prototype.xhr=null;ChromeCastPlaybackProxy.prototype.trackInfo=null;ChromeCastPlaybackProxy.prototype.receiver=null;ChromeCastPlaybackProxy.prototype.reset=function(){ChromeCastPlaybackProxy.__super__.reset.call(this);this.xhr=null;this.manifest=null};ChromeCastPlaybackProxy.prototype.unload=function(){if(this.player!=null){this.trackInfo={activeTrackIds:[this.receiver.chromecastPlayer.activeTrackId],textTrackStyle:this.receiver.chromecastPlayer.textTrackStyle};this.receiver.chromecastPlayer.activeTrackId=null;this.receiver.chromecastPlayer.textTrackStyle=null;this.player.unload();this.player=null}};ChromeCastPlaybackProxy.prototype.load=function(){var _this=this;if(this.xhr!=null){if(this.manifest!=null){this.loadMediaPlayer()}}else{this.xhr=new XMLHttpRequest();this.xhr.onload=function(event){if(_this.xhr.status===200){_this.manifest=_this.xhr.responseText;_this.loadMediaPlayer()}};this.xhr.onerror=function(event){_this.facade.logger.error(event);_this.player.unload()};this.xhr.open("GET",this.getSrc());this.xhr.send()}};ChromeCastPlaybackProxy.prototype.loadMediaPlayer=function(){var initStart,mediaProxy,type,types,video,_this=this;this.data.loading=true;this.playWhenLoaded=true;this.unload();video=this.facade.getMediaElement();video.addEventListener("canplay",this.resumeHandlers.canplay);video.addEventListener("loadedmetadata",this.handlers.loadedmetadata);video.addEventListener("durationchange",this.handlers.durationchange);video.addEventListener("canplaythrough",this.handlers.canplaythrough);if(video.src!=null){video.src=null}initStart=0;if(Logger.enabled===true){cast.player.api.setLoggerLevel(cast.player.api.LoggerLevel.DEBUG)}this.host=new cast.player.api.Host({mediaElement:video,url:this.getSrc()});this.host.updateManifestRequestInfo=function(requestInfo){if(requestInfo.url===_this.getSrc()){requestInfo.skipRequest=true;requestInfo.setResponse(_this.manifest)}};this.host.onError=function(errorCode){_this.facade.logger.error("Google Media Player Fatal Error - "+errorCode);_this.player.unload()};mediaProxy=this.facade.retrieveProxy(MediaProxy.NAME);type=mediaProxy.getType();types=Utils.mimeTypes;switch(type){case types.m3u8:this.protocol=cast.player.api.CreateHlsStreamingProtocol(this.host);break;case types.mpd:this.protocol=cast.player.api.CreateDashStreamingProtocol(this.host);break;case types.ism:this.protocol=cast.player.api.CreateSmoothStreamingProtocol(this.host)}if(this.protocol!=null){this.player=new cast.player.api.Player(this.host);this.player.load(this.protocol,initStart)}else{this.facade.logger.error("Google Media Player Error: Could not create protocol")}};ChromeCastPlaybackProxy.prototype.resumecomplete=function(){ChromeCastPlaybackProxy.__super__.resumecomplete.call(this)};function ChromeCastBreakStartCommand(){ChromeCastBreakStartCommand.__super__.constructor.call(this)}__extends(ChromeCastBreakStartCommand,PluginCommand);ChromeCastBreakStartCommand.prototype.execute=function(notification){var playbackCore;this.facade.logger.debug("ChromeCastBreakStartCommand");playbackCore=this.facade.player.retrieveProxy(PlayerProxy.NAME).getActivePlaybackCore();if(playbackCore.getPlaybackCoreName()==="chromecast"){playbackCore.unload();playbackCore.src=null}};function ChromeCastReceiverMediator(){ChromeCastReceiverMediator.__super__.constructor.call(this)}__extends(ChromeCastReceiverMediator,PluginMediator);ChromeCastReceiverMediator.prototype.onRegister=function(){this.sendNotification(Notifications.ADD_APPLICATION_STATE,"chromecast-receiver");ChromeCastReceiverMediator.__super__.onRegister.call(this)};function ChromeCastSenderMediator(){ChromeCastSenderMediator.__super__.constructor.call(this)}__extends(ChromeCastSenderMediator,PluginMediator);ChromeCastSenderMediator.prototype.componentName="chromecast";ChromeCastSenderMediator.prototype.controls=null;ChromeCastSenderMediator.prototype.onRegister=function(){this.controls=new ChromeCastControlsMediator();ChromeCastSenderMediator.__super__.onRegister.call(this)};ChromeCastSenderMediator.prototype.registerOverlay=function(){};ChromeCastSenderMediator.prototype.listNotificationInterests=function(){return[Notifications.PLAYBACK_TARGET_CHANGE,Notifications.CHANGE_PLAY_STATE]};ChromeCastSenderMediator.prototype.handleNotification=function(notification){var body,name,target;name=notification.getName();body=notification.getBody();switch(name){case Notifications.PLAYBACK_TARGET_CHANGE:target=body.target;if(target==="chromecast"){this.facade.registerMediator(this.controls)}else{this.facade.removeMediator(this.controls.getMediatorName())}break;case Notifications.CHANGE_PLAY_STATE:this.controls.setState(body)}};function ChromeCastHTMLSenderMediator(){ChromeCastHTMLSenderMediator.__super__.constructor.call(this)}__extends(ChromeCastHTMLSenderMediator,ChromeCastSenderMediator);ChromeCastHTMLSenderMediator.prototype.chromeCastButton=null;ChromeCastHTMLSenderMediator.prototype.onRegister=function(){this.chromeCastButton=new ChromeCastButtonMediator();this.facade.registerMediator(this.chromeCastButton);ChromeCastHTMLSenderMediator.__super__.onRegister.call(this)};ChromeCastHTMLSenderMediator.prototype.listNotificationInterests=function(){return ChromeCastHTMLSenderMediator.__super__.listNotificationInterests.call(this).concat([ChromeCastNotifications.AVAILABILITY_CHANGE])};ChromeCastHTMLSenderMediator.prototype.handleNotification=function(notification){var body,name;ChromeCastHTMLSenderMediator.__super__.handleNotification.call(this,notification);name=notification.getName();body=notification.getBody();switch(name){case ChromeCastNotifications.AVAILABILITY_CHANGE:if(body===true){this.sendNotification(Notifications.ADD_CONTROL_STATE,"chromecast");this.facade.player.sendNotification(Notifications.ADD_CONTROL,this.chromeCastButton.getViewComponent())}else{this.sendNotification(Notifications.REMOVE_CONTROL_STATE,"chromecast");this.facade.player.sendNotification(Notifications.REMOVE_CONTROL,this.chromeCastButton.getViewComponent())}}};function ChromeCastReceiverProxy(config){this.messageBus=config.messageBus||ChromeCastConstants.CHANNEL_ID;ChromeCastReceiverProxy.__super__.constructor.call(this,config.receiver)}__extends(ChromeCastReceiverProxy,PluginProxy);ChromeCastReceiverProxy.NAME=ModuleProxy.NAME;ChromeCastReceiverProxy.prototype.defaults={shim:null,types:["application/x-mpegURL","application/dash+xml","application/vnd.ms-sstr+xml"]};ChromeCastReceiverProxy.prototype.messageBus=null;ChromeCastReceiverProxy.prototype.castReceiverManager=null;ChromeCastReceiverProxy.prototype.castMessageBus=null;ChromeCastReceiverProxy.prototype.startTime=0;ChromeCastReceiverProxy.prototype.currentTime=0;ChromeCastReceiverProxy.prototype.boundHandler=null;ChromeCastReceiverProxy.prototype.amp=null;ChromeCastReceiverProxy.prototype.mediaManager=null;ChromeCastReceiverProxy.prototype.playbackCore=null;ChromeCastReceiverProxy.prototype.teardownTimeout=null;ChromeCastReceiverProxy.prototype.chromecastPlayer=null;ChromeCastReceiverProxy.prototype.initialize=function(){var core,player;ChromeCastReceiverProxy.__super__.initialize.call(this);this.sendNotification(Notifications.INITIALIZED);core=new ChromeCastPlaybackProxy(this.getConfigurationData().types,this);player=this.facade.player.retrieveProxy(PlayerProxy.NAME);player.registerPlaybackCore(core)};ChromeCastReceiverProxy.prototype.ready=function(){if(this.facade.logger.enabled===true){cast.receiver.logger.setLevelValue(cast.receiver.LoggerLevel.DEBUG)}this.shim=ChromeCastShim.getInstance();this.castReceiverManager=this.shim.castReceiverManager;this.castReceiverManager.onReady=this.castReceiverManager.onSystemVolumeChanged=this.castReceiverManager.onVisibilityChanged=this.logEvent.bind(this);this.castReceiverManager.onSenderConnected=this.onSenderConnected.bind(this);this.castReceiverManager.onSenderDisconnected=this.onSenderDisconnected.bind(this);this.amp=this.facade.player;this.chromecastPlayer=this.shim.player;this.chromecastPlayer.registerPlayer(this.amp);this.mediaManager=this.shim.mediaManager;this.castMessageBus=this.shim.castMessageBuses[this.messageBus];this.castMessageBus.onMessage=this.onMessage.bind(this);this.amp.addEventListener("seeking",this.eventHandler.bind(this));this.amp.addEventListener("seeked",this.eventHandler.bind(this));this.amp.addEventListener("pause",this.startTeardownTimeout.bind(this,20*60));this.amp.addEventListener("ended",this.startTeardownTimeout.bind(this,5*60));this.amp.addEventListener("error",this.startTeardownTimeout.bind(this,5*60));this.amp.addEventListener("playing",this.stopTeardownTimeout.bind(this));this.amp.addEventListener("loadedmetadata",this.stopTeardownTimeout.bind(this));if(this.amp.ads!=null){this["amp"].ads.addEventListener("breakstart",this.dispatchEvent.bind(this,"ads"));this["amp"].ads.addEventListener("breakend",this.dispatchEvent.bind(this,"ads"));this["amp"].ads.addEventListener("started",this.dispatchEvent.bind(this,"ads"));this["amp"].ads.addEventListener("ended",this.dispatchEvent.bind(this,"ads"));this["amp"].ads.addEventListener("companion",this.dispatchEvent.bind(this,"ads"))}this.startTeardownTimeout(5*60)};ChromeCastReceiverProxy.prototype.logEvent=function(message,data){if(!(message!=null)){message=data.type||""}else{if(!(data!=null)){data=message.data;message=data.type}}this.facade.logger.log("[CHROMECAST] ",message,data)};ChromeCastReceiverProxy.prototype.onSenderConnected=function(event){this.logEvent("senderconnected",event);setTimeout(this.sendNotification.bind(this,Notifications.DISPATCH_EVENT,new Event("senderconnected",event)),0)};ChromeCastReceiverProxy.prototype.onSenderDisconnected=function(event){this.logEvent("sender disconnected",event);if(this.castReceiverManager.getSenders().length===0&&event.reason===cast.receiver.system.DisconnectReason.REQUESTED_BY_SENDER){this.teardown()}setTimeout(this.sendNotification.bind(this,Notifications.DISPATCH_EVENT,new Event("senderdisconnected",event)),0)};ChromeCastReceiverProxy.prototype.onMessage=function(event){var detail,ids,message,textTrackStyle,type;this.logEvent("message from sender",event);try{message=event.data||event.message;if(!(message!=null)){return}type=message.type;detail=message.detail;if(typeof detail==="string"){detail=JSON.parse(detail)}if(!(detail!=null)){return}switch(type){case"captioning.visibilitychange":ids=[];if(detail.visibility===true){ids.push(0)}this.chromecastPlayer.editTracksInfo({activeTrackIds:ids});break;case"captioning.settingschange":textTrackStyle=new cast.receiver.media.TextTrackStyle();textTrackStyle.foregroundColor=detail.fontColor;textTrackStyle.backgroundColor=detail.backgroundColor;textTrackStyle.fontScale=detail.size;textTrackStyle.windowColor=detail.windowColor;textTrackStyle.fontFamily=detail.fontFamily;textTrackStyle.edgeColor=detail.edgeColor;textTrackStyle.edgeType=detail.edgeType;this.chromecastPlayer.editTracksInfo({textTrackStyle:textTrackStyle});break;case"stats.visibilitychange":this["amp"].stats.setHidden(!detail.visibility)}this.sendNotification(Notifications.DISPATCH_EVENT,event)}catch(error){this.error(error)}};ChromeCastReceiverProxy.prototype.onClose=function(event){this.logEvent("message channel closed",event)};ChromeCastReceiverProxy.prototype.eventHandler=function(event){var msg;msg={type:event.type};if(event.detail!=null){msg.detail=event.detail}this.send(msg)};ChromeCastReceiverProxy.prototype.dispatchEvent=function(target,event){this.send({type:"dispatchevent",detail:{target:target,event:event}})};ChromeCastReceiverProxy.prototype.send=function(message){this.castMessageBus.broadcast(message)};ChromeCastReceiverProxy.prototype.startTeardownTimeout=function(seconds){this.stopTeardownTimeout();this.teardownTimeout=setTimeout(this.teardown.bind(this),seconds*1000)};ChromeCastReceiverProxy.prototype.stopTeardownTimeout=function(){clearTimeout(this.teardownTimeout)};ChromeCastReceiverProxy.prototype.teardown=function(){window.close()};function ChromeCastFeedChangedCommand(){ChromeCastFeedChangedCommand.__super__.constructor.call(this)}__extends(ChromeCastFeedChangedCommand,PluginCommand);ChromeCastFeedChangedCommand.prototype.execute=function(notification){this.config.setFeed(notification.getBody())};function ChromeCastSeekCommand(){ChromeCastSeekCommand.__super__.constructor.call(this)}__extends(ChromeCastSeekCommand,PluginCommand);ChromeCastSeekCommand.prototype.execute=function(notification){this.facade.logger.debug("ChromeCastSeekCommand");this.plugin.setCurrentTime(notification.getBody())};function ChromeCastButtonMediator(){ChromeCastButtonMediator.__super__.constructor.call(this)}__extends(ChromeCastButtonMediator,ButtonMediator);ChromeCastButtonMediator.prototype.componentName="chromecast";ChromeCastButtonMediator.prototype.onclick=function(event){event.stopImmediatePropagation();this.sendNotification(ChromeCastNotifications.LAUNCH);return false};function ChromeCastTogglePlayPauseCommand(){ChromeCastTogglePlayPauseCommand.__super__.constructor.call(this)}__extends(ChromeCastTogglePlayPauseCommand,PluginCommand);ChromeCastTogglePlayPauseCommand.prototype.execute=function(notification){var appStateProxy;appStateProxy=this.facade.player.retrieveProxy(ApplicationStateProxy.NAME);switch(appStateProxy.getPlayState()){case PlayState.ENDED:this.plugin.setCurrentTime(0);this.plugin.play();break;case PlayState.PAUSED:case PlayState.READY:this.plugin.play();break;case PlayState.PLAYING:case PlayState.WAITING:this.plugin.pause()}};function ChromeCastControlsMediator(){ChromeCastControlsMediator.__super__.constructor.call(this)}__extends(ChromeCastControlsMediator,ControlsMediator);ChromeCastControlsMediator.prototype.componentName="chromecast-controls";ChromeCastControlsMediator.prototype.message=null;ChromeCastControlsMediator.prototype.messageContainer=null;ChromeCastControlsMediator.prototype.button=null;ChromeCastControlsMediator.prototype.captioningActive=false;ChromeCastControlsMediator.prototype.initializeNotifier=function(key){ChromeCastControlsMediator.__super__.initializeNotifier.call(this,key);this.viewComponent.innerHTML="";this.messageContainer=this.create("chromecast-message-container");this.message=this.createText("chromecast-message",this.localizationManager.getString("MSG_CHROMECAST_MESSAGE"),this.messageContainer);this.button=new ChromeCastButtonMediator()};ChromeCastControlsMediator.prototype.onRegister=function(){var button,fullscreen,_ref,_ref1;this.facade.registerMediator(this.button);ChromeCastControlsMediator.__super__.onRegister.call(this);fullscreen=new FullScreenMediator(this.controlBar);fullscreen.setDisabled(true);this.facade.registerMediator(fullscreen);this.sendNotification(Notifications.ADD_CONTROL,this.button.getViewComponent());if(!this.viewComponent.getElementsByClassName("akamai-caption akamai-button").length&&((_ref=this.facade.player.captioning)!=null?(_ref1=_ref.config)!=null?_ref1.enabled:void 0:void 0)===true){button=new ButtonMediator(this.localizationManager.getString(LocalizationConstants.MSG_CC),this.viewComponent.getElementsByClassName("akamai-control-bar")[0],null,"caption",this.captionButtonClick.bind(this));this.facade.registerMediator(button);this.captionButton=button.getViewComponent();this.sendNotification(Notifications.ADD_CONTROL,this.captionButton);this.sendNotification(Notifications.ADD_CONTROL_STATE,"cc-enabled")}};ChromeCastControlsMediator.prototype.captionButtonClick=function(){var note;this.captioningActive=!this.captioningActive;try{this.facade.player.parent.chromecast.postMessage({type:"captioning.visibilitychange",detail:{visibility:this.captioningActive}})}catch(error){this.facade.logger.error("[AMP Chromecast Captioning Error]",error)}note=this.captioningActive?Notifications.ADD_APPLICATION_STATE:Notifications.REMOVE_APPLICATION_STATE;this.sendNotification(note,"cc-active")};function ChromeCastPlaybackTargetChangeCommand(){ChromeCastPlaybackTargetChangeCommand.__super__.constructor.call(this)}__extends(ChromeCastPlaybackTargetChangeCommand,PluginCommand);ChromeCastPlaybackTargetChangeCommand.prototype.execute=function(notification){var body,currentTime,duration,target;body=notification.getBody();target=body.target;if(target==="chromecast"){this.facade.player.pause()}else{if(target==="amp"){currentTime=this.plugin.getCurrentTime();duration=this.facade.player.getDuration();if(currentTime!==0){if(currentTime!==duration){this.seekedHandler=this.seeked.bind(this);this.facade.player.addEventListener("seeked",this.seekedHandler)}this.facade.player.setCurrentTime(currentTime)}}}};ChromeCastPlaybackTargetChangeCommand.prototype.seeked=function(event){this.facade.player.removeEventListener("seeked",this.seekedHandler);this.facade.player.play()};ChromeCastPlaybackTargetChangeCommand.prototype.seekedHandler=null;function ChromeCastPlugin(){ChromeCastPlugin.__super__.constructor.call(this)}__extends(ChromeCastPlugin,Plugin);ChromeCastPlugin.prototype.moduleName="chromecast";ChromeCastPlugin.prototype.isAvailable=function(){return this.isSender()||this.isReceiver()};ChromeCastPlugin.prototype.loadResources=function(){if(!this.isAvailable()){this.resourcesLoaded();return}ChromeCastPlugin.__super__.loadResources.call(this)};ChromeCastPlugin.prototype.onRegister=function(){if(!this.isAvailable()){this.sendNotification(PluginNotifications.PLUGIN_REGISTERED,this)}else{ChromeCastPlugin.__super__.onRegister.call(this)}};ChromeCastPlugin.prototype.createModel=function(){this.proxy=this.isSender()?new ChromeCastSenderProxy(this.config):new ChromeCastReceiverProxy(this.config);this.registerProxy(this.proxy)};ChromeCastPlugin.prototype.createController=function(){if(this.isSender()){this.registerCommand(Notifications.PLAYBACK_TARGET_CHANGE,ChromeCastPlaybackTargetChangeCommand);this.registerCommand(ChromeCastNotifications.LAUNCH,ChromeCastLaunchCommand);this.registerCommand(UserNotifications.TOGGLE_PLAY_PAUSE,ChromeCastTogglePlayPauseCommand);this.registerCommand(UserNotifications.SEEK,ChromeCastSeekCommand);this.registerCommand(CaptioningNotifications.VISIBILITY_CHANGE,ChromeCastCaptioningVisibilityChangeCommand);this.registerCommand(CaptioningNotifications.SETTINGS_CHANGE,ChromeCastCaptioningSettingsChangeCommand)}else{if(this.isReceiver()){this.registerCommand(Notifications.READY,ChromeCastReceiverReadyCommand);this.registerCommand(AdNotifications.BREAK_START,ChromeCastBreakStartCommand)}}};ChromeCastPlugin.prototype.createView=function(){if(this.isSender()){this.registerMediator(new ChromeCastHTMLSenderMediator())}else{if(this.isReceiver()){this.registerMediator(new ChromeCastReceiverMediator())}}};ChromeCastPlugin.prototype.isSender=function(){return !this.isReceiver()&&/Chrome/.test(navigator.userAgent)};ChromeCastPlugin.prototype.isReceiver=function(){return/CrKey/.test(navigator.userAgent)};ChromeCastPlugin.prototype.listNotificationInterests=function(){return[Notifications.READY,CaptioningNotifications.VISIBILITY_CHANGE,CaptioningNotifications.SETTINGS_CHANGE,AdNotifications.BREAK_START]};ChromeCastPlugin.prototype.listNotificationEvents=function(){return ChromeCastPlugin.__super__.listNotificationEvents.call(this).concat([ChromeCastNotifications.AVAILABILITY_CHANGE])};ChromeCastPlugin.prototype.listNotificationPublications=function(){return ChromeCastPlugin.__super__.listNotificationPublications.apply(this,arguments).concat([Notifications.INITIALIZED,Notifications.ADD_CONTROL,Notifications.REMOVE_CONTROL,Notifications.ADD_CONTROL_STATE,Notifications.REMOVE_CONTROL_STATE,Notifications.PLAYBACK_TARGET_CHANGE,ChromeCastNotifications.AVAILABILITY_CHANGE,Notifications.MEDIA_CHANGE,Notifications.CHANGE_PLAY_STATE,Notifications.CHANGE_DURATION,Notifications.DISPLAY_TIME])};ChromeCastPlugin.prototype.play=function(){var _base;if(typeof(_base=this.proxy).play==="function"){_base.play()}};ChromeCastPlugin.prototype.pause=function(){var _base;if(typeof(_base=this.proxy).pause==="function"){_base.pause()}};ChromeCastPlugin.prototype.setCurrentTime=function(value){this.proxy.setCurrentTime(value);return value};ChromeCastPlugin.prototype.isReceiverAvailable=function(){var _ref;return((_ref=this.proxy)!=null?typeof _ref.isReceiverAvailable==="function"?_ref.isReceiverAvailable():void 0:void 0)||false};ChromeCastPlugin.prototype.getMedia=function(){return this.proxy.media};ChromeCastPlugin.prototype.getSession=function(){return this.proxy.session};ChromeCastPlugin.prototype.getMediaManager=function(){return this.proxy.mediaManager};ChromeCastPlugin.prototype.getCastReceiverManager=function(){return this.proxy.castReceiverManager};ChromeCastPlugin.prototype.getCastMessageBus=function(){return this.proxy.castMessageBuses[this.proxy.messageBus]};ChromeCastPlugin.prototype.postMessage=function(msg){this.proxy.send(msg)};AMP.registerPlugin("chromecast","html",ChromeCastPlugin);function ChromeCastFlashPlugin(){ChromeCastFlashPlugin.__super__.constructor.call(this)}__extends(ChromeCastFlashPlugin,ChromeCastPlugin);ChromeCastFlashPlugin.NAME="ChromeCastFlashPlugin";ChromeCastFlashPlugin.prototype.createModel=function(){this.proxy=new ChromeCastSenderProxy(this.config);this.registerProxy(this.proxy)};ChromeCastFlashPlugin.prototype.createController=function(){this.registerCommand(Notifications.PLAYBACK_TARGET_CHANGE,ChromeCastPlaybackTargetChangeCommand);this.registerCommand(ChromeCastNotifications.LAUNCH,ChromeCastLaunchCommand);this.registerCommand(FeedNotifications.FEED_CHANGED,ChromeCastFeedChangedCommand);this.registerCommand(UserNotifications.TOGGLE_PLAY_PAUSE,ChromeCastTogglePlayPauseCommand);this.registerCommand(UserNotifications.SEEK,ChromeCastSeekCommand)};ChromeCastFlashPlugin.prototype.createView=function(){this.registerMediator(new ChromeCastSenderMediator())};ChromeCastFlashPlugin.prototype.listNotificationInterests=function(){return[FeedNotifications.FEED_CHANGED,Notifications.CHANGE_MEDIA]};var ChromeCastNotifications={LAUNCH:"launch",AVAILABILITY_CHANGE:"availabilitychange"};function ChromeCastWrapper(player,init){ChromeCastWrapper.__super__.constructor.call(this,player,init);this.plugin=new ChromeCastFlashPlugin();this.plugin.initialize(init,this.player);player.registerModule(this.plugin)}__extends(ChromeCastWrapper,PluginWrapper);ChromeCastWrapper.NAME="ChromeCastWrapper";ChromeCastWrapper.prototype.buttonId="chromecastBtn";ChromeCastWrapper.prototype.plugin=null;ChromeCastWrapper.prototype.createXML=function(xml){var controls;if(this.hasControls(xml)===false){return xml}controls=this.getControls(xml);if(!(controls[this.buttonId]!=null)){this.createElement(xml,this.buttonId)}return xml};ChromeCastWrapper.prototype.listNotificationInterests=function(){return ChromeCastWrapper.__super__.listNotificationInterests.call(this).concat([FlashNotifications.ELEMENT_EVENT,FlashNotifications.LOAD_STATE_READY,FlashNotifications.LOAD_STATE_LOADING,FlashNotifications.APPLICATION_STATE_CHANGE,ChromeCastNotifications.AVAILABILITY_CHANGE])};ChromeCastWrapper.prototype.handleNotification=function(notification){var body,isReceiverAvailable,name,_ref;ChromeCastWrapper.__super__.handleNotification.call(this,notification);name=notification.getName();body=notification.getBody();switch(name){case FlashNotifications.ELEMENT_EVENT:if(body.type==="click"&&body.element===this.buttonId){this.plugin.sendNotification(ChromeCastNotifications.LAUNCH)}break;case ChromeCastNotifications.AVAILABILITY_CHANGE:if(((_ref=this.player.mediaElement)!=null?_ref.setPlayerProperty:void 0)!=null){this.player.mediaElement.setPlayerProperty(this.buttonId,{visible:body})}break;case FlashNotifications.APPLICATION_STATE_CHANGE:case FlashNotifications.LOAD_STATE_READY:case FlashNotifications.LOAD_STATE_LOADING:isReceiverAvailable=this.plugin.isReceiverAvailable();if(isReceiverAvailable){this.player.mediaElement.setPlayerProperty(this.buttonId,{state:1})}this.player.mediaElement.setPlayerProperty(this.buttonId,{visible:isReceiverAvailable})}};ChromeCastWrapper.prototype.play=function(){this.plugin.play()};ChromeCastWrapper.prototype.pause=function(){this.plugin.pause()};ChromeCastWrapper.prototype.setCurrentTime=function(value){this.plugin.setCurrentTime(value);return value};ChromeCastWrapper.prototype.getMedia=function(){return this.plugin.getMedia()};ChromeCastWrapper.prototype.getSession=function(){return this.plugin.getSession()};ChromeCastWrapper.prototype.getMediaManager=function(){return this.plugin.getMediaManager()};ChromeCastWrapper.prototype.getCastReceiverManager=function(){return this.plugin.getCastReceiverManager()};ChromeCastWrapper.prototype.getCastMessageBus=function(){return this.plugin.getCastMessageBuses()};ChromeCastWrapper.prototype.postMessage=function(msg){this.plugin.postMessage(msg)};AMP.registerPlugin("chromecast","flash",ChromeCastWrapper);function FreeWheelPlugin(){FreeWheelPlugin.__super__.constructor.call(this)}__extends(FreeWheelPlugin,AdPlugin);FreeWheelPlugin.prototype.moduleName="freewheel";FreeWheelPlugin.prototype.featureName="ads";FreeWheelPlugin.prototype.createProxy=function(){return new FreeWheelProxy(this.config)};FreeWheelPlugin.prototype.isFullscreenDevice=function(){return false};AMP.registerPlugin("freewheel","html",FreeWheelPlugin);AMP.registerPlugin("freewheel","flash",FreeWheelWrapper);function ChromeCastShim(config,messageBuses){var key,value;if(!/CrKey/.test(navigator.userAgent)||!(typeof cast!=="undefined"&&cast!==null)){return}ChromeCastShim.__super__.constructor.call(this);this.castReceiverManager=cast.receiver.CastReceiverManager.getInstance();this.castReceiverManager.onReady=this.dispatchEvent.bind(this,{type:"ready"});this.castReceiverManager.onSenderConnected=this.dispatchEvent.bind(this,{type:"senderconnected"});this.castReceiverManager.onSenderDisconnected=this.dispatchEvent.bind(this,{type:"senderdisconnected"});this.castReceiverManager.onShutdown=this.dispatchEvent.bind(this,{type:"shutdown"});this.castReceiverManager.onStandbyChanged=this.dispatchEvent.bind(this,{type:"standbychange"});this.castReceiverManager.onSystemVolumeChanged=this.dispatchEvent.bind(this,{type:"systemvolumechanged"});this.castReceiverManager.onVisibilityChanged=this.dispatchEvent.bind(this,{type:"visibilitychanged"});this.player=new ChromeCastPlayer(this);this.mediaManager=new cast.receiver.MediaManager(this.player);if(!(messageBuses!=null)){messageBuses={}}messageBuses[ChromeCastConstants.CHANNEL_ID]=cast.receiver.CastMessageBus.MessageType.JSON;this.castMessageBuses={};for(key in messageBuses){value=messageBuses[key];this.castMessageBuses[key]=this.castReceiverManager.getCastMessageBus(key,value)}this.castReceiverManager.start(config);return}__extends(ChromeCastShim,EventDispatcher);ChromeCastShim.prototype.castReceiverManager=null;ChromeCastShim.prototype.mediaManager=null;ChromeCastShim.prototype.castMessageBuses=null;ChromeCastShim.prototype.player=null;ChromeCastShim.getInstance=function(){return this.instance};ChromeCastShim.instance=new ChromeCastShim();function DASHPlugin(){DASHPlugin.__super__.constructor.call(this)}__extends(DASHPlugin,Plugin);DASHPlugin.prototype.moduleName="dash";DASHPlugin.prototype.createModel=function(){this.registerProxy(new DASHProxy(this.config))};DASHPlugin.prototype.registered=function(){this.player.registerCommand(Notifications.CHANGE_DISPLAY_STATE,DASHChangeDisplayStateCommand);DASHPlugin.__super__.registered.call(this)};AMP.registerPlugin("dash","html",DASHPlugin);function ControlPlugin(){ControlPlugin.__super__.constructor.call(this)}__extends(ControlPlugin,Plugin);ControlPlugin.prototype.listNotificationPublications=function(){return ControlPlugin.__super__.listNotificationPublications.apply(this,arguments).concat([Notifications.ADD_CONTROL,Notifications.REMOVE_CONTROL,Notifications.ADD_CONTROL_STATE,Notifications.REMOVE_CONTROL_STATE])};function PanelControlMediator(componentName){PanelControlMediator.__super__.constructor.call(this,null,null,null,componentName,onclick)}__extends(PanelControlMediator,ButtonMediator);PanelControlMediator.prototype.panel=null;PanelControlMediator.prototype.timeout=null;PanelControlMediator.prototype.closePanelDelayed=null;PanelControlMediator.prototype.onRegister=function(){this.closePanelDelayed=this.delayedClosePanel.bind(this);if(Utils.getDevice()==="desktop"){this.onmouseleave=this.closePanelDelayed;this.onmouseenter=this.openPanel;this.onclick=this.clickHandler}else{this.onclick=this.togglePanel}PanelControlMediator.__super__.onRegister.call(this);this.sendNotification(Notifications.ADD_CONTROL_STATE,""+this.componentName+"-enabled");this.sendNotification(Notifications.ADD_CONTROL,this.viewComponent)};PanelControlMediator.prototype.openPanel=function(){clearTimeout(this.timeout);this.sendNotification(PanelNotifications.OPEN_PANEL,this.panel);this.panel.viewComponent.addEventListener("mouseleave",this.closePanelDelayed)};PanelControlMediator.prototype.closePanel=function(){if(Utils.isMouseOverElement(this.panel.viewComponent)||Utils.isMouseOverElement(this.viewComponent)||this.facade.player.retrieveProxy(ApplicationStateProxy.NAME).getIsUserActive()){return}this.panel.viewComponent.addEventListener("mouseleave",this.closePanelDelayed);this.sendNotification(PanelNotifications.CLOSE_PANEL,this.panel)};PanelControlMediator.prototype.delayedClosePanel=function(){this.timeout=setTimeout(this.closePanel.bind(this),350)};PanelControlMediator.prototype.togglePanel=function(){this.sendNotification(PanelNotifications.TOGGLE_PANEL,this.panel)};PanelControlMediator.prototype.clickPanel=function(){};function PanelMediator(componentName){PanelMediator.__super__.constructor.call(this,componentName,null,null,null)}__extends(PanelMediator,ComponentMediator);PanelMediator.prototype.componentType="panel";PanelMediator.prototype.control=null;PanelMediator.prototype.onRegister=function(){PanelMediator.__super__.onRegister.call(this);this.sendNotification(PanelNotifications.ADD_PANEL,this)};function ControlProxy(config){ControlProxy.__super__.constructor.call(this,config)}__extends(ControlProxy,PluginProxy);ControlProxy.NAME=ModuleProxy.NAME;ControlProxy.prototype.loaded=true;ControlProxy.prototype.controlName=null;ControlProxy.prototype.getControlName=function(){return this.controlName};ControlProxy.prototype.setControlName=function(value){return this.controlName=value};function ControlPanelProxy(config){ControlPanelProxy.__super__.constructor.call(this,config)}__extends(ControlPanelProxy,ControlProxy);ControlPanelProxy.NAME=ModuleProxy.NAME;ControlPanelProxy.prototype.hidden=true;ControlPanelProxy.prototype.getHidden=function(){return this.hidden};ControlPanelProxy.prototype.setHidden=function(value){this.hidden=value;return value};function VolumePanelProxy(config){VolumePanelProxy.__super__.constructor.call(this,config)}__extends(VolumePanelProxy,ControlPanelProxy);VolumePanelProxy.NAME=ModuleProxy.NAME;VolumePanelProxy.prototype.controlName="volume";VolumePanelProxy.prototype.defaults={direction:"vertical"};VolumePanelProxy.prototype.getDirection=function(){return this.data.direction};function VolumePanelWrapper(player,config){if(config==null){config={}}VolumePanelWrapper.__super__.constructor.call(this,player,config)}__extends(VolumePanelWrapper,PluginWrapper);VolumePanelWrapper.NAME="VolumePanelWrapper";AMP.registerPlugin("volumepanel","flash",VolumePanelWrapper);function VolumePanelControlMediator(componentName){VolumePanelControlMediator.__super__.constructor.call(this,componentName)}__extends(VolumePanelControlMediator,PanelControlMediator);VolumePanelControlMediator.prototype.clickHandler=function(){this.sendNotification(Notifications.TOGGLE_MUTED)};function VolumeMediator(parent,direction){VolumeMediator.__super__.constructor.call(this,parent,direction)}__extends(VolumeMediator,SliderMediator);VolumeMediator.prototype.componentName="volume";VolumeMediator.prototype.setValue=function(percent){VolumeMediator.__super__.setValue.call(this,percent);this.sendNotification(Notifications.CHANGE_VOLUME,percent);this.sendNotification(UserSettingsNotifications.UPDATE_SETTINGS,{volume:percent});return percent};VolumeMediator.prototype.listNotificationInterests=function(){return[Notifications.VOLUME_CHANGE,Notifications.READY]};VolumeMediator.prototype.handleNotification=function(notification){switch(notification.getName()){case Notifications.READY:this.updateValue(this.facade.player.retrieveProxy(PlaybackProxy.NAME).getVolume());break;case Notifications.VOLUME_CHANGE:this.updateValue(notification.getBody())}};function ControlPanelMediator(){ControlPanelMediator.__super__.constructor.call(this);this.controls={}}__extends(ControlPanelMediator,PluginMediator);ControlPanelMediator.prototype.panel=null;ControlPanelMediator.prototype.control=null;ControlPanelMediator.prototype.separator=null;ControlPanelMediator.prototype.controls=null;ControlPanelMediator.prototype.labels=null;ControlPanelMediator.prototype.closed=true;ControlPanelMediator.prototype.panelClass=PanelMediator;ControlPanelMediator.prototype.controlClass=PanelControlMediator;ControlPanelMediator.prototype.onRegister=function(){this.panel=this.createPanel(this.componentName);this.control=this.createControl(this.componentName);this.separator=this.createSeparator(this.componentName);this.panel.control=this.control;this.control.panel=this.panel;if(this.labels==null){this.labels={}}this.createPanelControls(name)};ControlPanelMediator.prototype.createControl=function(name){var control;control=new this.controlClass(name);this.facade.registerMediator(control);return control};ControlPanelMediator.prototype.createPanel=function(name){var panel;panel=new this.panelClass(name);this.facade.registerMediator(panel);return panel};ControlPanelMediator.prototype.createSeparator=function(name){return this.create(["separator","icon"],this.panel)};ControlPanelMediator.prototype.createPanelControls=function(name){var data,key,value,_ref;data=this.plugin.getConfigurationData();for(key in data){value=data[key];if(value===true){this.controls[key]=this.addPanelControl(new ButtonMediator(this.localizationManager.getString(this.labels[key]),null,null,key,(_ref=this.panelButtonClickHandler)!=null?typeof _ref.bind==="function"?_ref.bind(this,key):void 0:void 0))}}};ControlPanelMediator.prototype.addPanelControl=function(control){this.facade.registerMediator(control);this.panel.getViewComponent().appendChild(control.getViewComponent());return control};ControlPanelMediator.prototype.panelButtonClickHandler=function(){this.sendNotification(PanelNotifications.CLOSE_PANEL,this.panel)};function VolumePanelMediator(){VolumePanelMediator.__super__.constructor.call(this)}__extends(VolumePanelMediator,ControlPanelMediator);VolumePanelMediator.prototype.componentName="volume";VolumePanelMediator.prototype.slider=null;VolumePanelMediator.prototype.level=null;VolumePanelMediator.prototype.controlClass=VolumePanelControlMediator;VolumePanelMediator.prototype.onRegister=function(){VolumePanelMediator.__super__.onRegister.call(this);this.slider=new VolumeMediator(this.panel,this.plugin.getDirection());this.facade.registerMediator(this.slider)};VolumePanelMediator.prototype.updateVolumeButton=function(percent){var level;level=Math.ceil(percent*10);if(level===this.level){return}if(this.level!=null){this.sendNotification(Notifications.REMOVE_CONTROL_STATE,"volume-"+this.level)}this.level=level;this.sendNotification(Notifications.ADD_CONTROL_STATE,"volume-"+this.level)};VolumePanelMediator.prototype.listNotificationInterests=function(){return VolumePanelMediator.__super__.listNotificationInterests.apply(this,arguments).concat([Notifications.VOLUME_CHANGE])};VolumePanelMediator.prototype.handleNotification=function(notification){VolumePanelMediator.__super__.handleNotification.call(this,notification);switch(notification.getName()){case Notifications.VOLUME_CHANGE:this.updateVolumeButton(notification.body)}};function ControlPanelPlugin(){ControlPanelPlugin.__super__.constructor.call(this)}__extends(ControlPanelPlugin,ControlPlugin);ControlPanelPlugin.prototype.listNotificationPublications=function(){var key,value;return ControlPanelPlugin.__super__.listNotificationPublications.call(this).concat((function(){var _results;_results=[];for(key in PanelNotifications){value=PanelNotifications[key];_results.push(value)}return _results})())};function PlaylistMediator(viewComponent){PlaylistMediator.__super__.constructor.call(this,viewComponent)}__extends(PlaylistMediator,PluginMediator);PlaylistMediator.prototype.componentName="playlist";PlaylistMediator.prototype.playlistButton=null;PlaylistMediator.prototype.onRegister=function(){var button;button=new ButtonMediator(null,this.viewComponent,null,"playlist",this.playlistOnClick.bind(this));this.facade.registerMediator(button);this.playlistButton=button.getViewComponent();this.sendNotification(Notifications.ADD_CONTROL,this.playlistButton);this.sendNotification(Notifications.ADD_CONTROL_STATE,"playlist-enabled");PlaylistMediator.__super__.onRegister.call(this)};PlaylistMediator.prototype.playlistOnClick=function(event){this.facade.logger.debug("AMP Event: Playlist Clicked")};function VolumePanelPlugin(){VolumePanelPlugin.__super__.constructor.call(this)}__extends(VolumePanelPlugin,ControlPanelPlugin);VolumePanelPlugin.prototype.moduleName="volumepanel";VolumePanelPlugin.prototype.isVolumeSettable=function(){var newVolume,oldVolume,settable,video;settable=false;video=this.player.getMediaElement();oldVolume=video.volume;newVolume=Math.random();video.volume=newVolume;if(video.volume===newVolume){settable=true}video.volume=oldVolume;return settable};VolumePanelPlugin.prototype.createFramework=function(){if(!this.isVolumeSettable()){return}else{VolumePanelPlugin.__super__.createFramework.call(this)}};VolumePanelPlugin.prototype.createModel=function(){this.registerProxy(new VolumePanelProxy(this.config))};VolumePanelPlugin.prototype.createView=function(){if(!this.isVolumeSettable()){return}this.registerMediator(new VolumePanelMediator())};VolumePanelPlugin.prototype.listNotificationPublications=function(){return VolumePanelPlugin.__super__.listNotificationPublications.apply(this,arguments).concat([Notifications.CHANGE_VOLUME,Notifications.TOGGLE_MUTED,UserSettingsNotifications.UPDATE_SETTINGS])};VolumePanelPlugin.prototype.listNotificationInterests=function(){return VolumePanelPlugin.__super__.listNotificationInterests.apply(this,arguments).concat([Notifications.VOLUME_CHANGE,Notifications.READY])};AMP.registerPlugin("volumepanel","html",VolumePanelPlugin);function OutbrainProxy(config){OutbrainProxy.__super__.constructor.call(this,config)}__extends(OutbrainProxy,RecommendationsProxy);OutbrainProxy.NAME=ModuleProxy.NAME;OutbrainProxy.prototype.data={url:null,target:null,apiKey:null,jsWidgetId:null};OutbrainProxy.prototype.createRecommendations=function(feed){var item,rec,recs,_i,_len,_ref;recs=[];_ref=feed.documents.doc;for(_i=0,_len=_ref.length;_i<_len;_i++){item=_ref[_i];rec=new RecommendationVO(item.video.id,item.url,item.video.title,item.video.title,item.thumbnail.url,0,null,this.getTarget(),item);recs.push(rec)}return recs};OutbrainProxy.prototype.getURL=function(){var format,href,key,url,widgetJSId;format="json";widgetJSId=encodeURIComponent(this.data.jsWidgetId);key=encodeURIComponent(this.data.apiKey);href=encodeURIComponent(document.location.href);url=this.data.url+"?format="+format+"&widgetJSId="+widgetJSId+"&settings=false&url="+href+"&idx=0&key="+key+"&rand="+Date.now()+"&recs=true";return url};function OutbrainWrapper(player,config){if(config==null){config={}}OutbrainWrapper.__super__.constructor.call(this,player,config)}__extends(OutbrainWrapper,RecommendationsWrapper);OutbrainWrapper.NAME="OutbrainWrapper";OutbrainWrapper.prototype.createFlashVars=function(flashvars){OutbrainWrapper.__super__.createFlashVars.call(this,flashvars);flashvars.recommendations_partner="outbrain";return flashvars};OutbrainWrapper.prototype.createXML=function(xml){var application,prop,props,recommendations,vendor,_i,_len;application=xml.firstChild;recommendations=xml.getElementsByTagName("recommendations")[0];if(!(recommendations!=null)){recommendations=xml.createElement("recommendations");application.appendChild(recommendations)}vendor=xml.createElement("vendor");vendor.setAttribute("id","outbrain");recommendations.appendChild(vendor);props=[{value:this.config.url,key:"OUTBRAIN_BASE_URL"},{value:this.config.apiKey,key:"OUTBRAIN_API_KEY"},{value:this.config.jsWidgetId,key:"OUTBRAIN_WIDGET_JS_ID"},{value:this.config.mode,key:"OUTBRAIN_MODE"},{value:this.config.playerSrcId,key:"OUTBRAIN_PLAYER_SRC_ID"},{value:"internal",key:"OUTBRAIN_VIEW_PROVIDER"},{value:this.config.videoData,key:"videoData"}];for(_i=0,_len=props.length;_i<_len;_i++){prop=props[_i];if(prop.value!=null){this.createProperty(xml,prop.key,prop.value,vendor)}}return xml};function PlaylistPlugin(){PlaylistPlugin.__super__.constructor.call(this)}__extends(PlaylistPlugin,Plugin);PlaylistPlugin.prototype.moduleName="playlist";PlaylistPlugin.prototype.createView=function(){this.registerMediator(new PlaylistMediator())};PlaylistPlugin.prototype.listNotificationPublications=function(){return PlaylistPlugin.__super__.listNotificationPublications.call(this).concat([Notifications.ADD_CONTROL,Notifications.REMOVE_CONTROL,Notifications.ADD_CONTROL_STATE,Notifications.REMOVE_CONTROL_STATE])};AMP.registerPlugin("playlist","html",PlaylistPlugin);function AdChoicesWrapper(){return AdChoicesWrapper.__super__.constructor.apply(this,arguments)}__extends(AdChoicesWrapper,PluginWrapper);AdChoicesWrapper.NAME="AdChoicesWrapper";AdChoicesWrapper.prototype.createXML=function(xml){var element,options,view;view=xml.getElementsByTagName("view")[0];options=xml.createElement("element");options.setAttribute("id","adOptions");view.appendChild(options);element=xml.createElement("element");element.setAttribute("id","adChoices");element.setAttribute("target",this.config.target);options.appendChild(element);element=xml.createElement("element");element.setAttribute("id","adCountdown");options.appendChild(element);return xml};function AdChoicesMediator(){AdChoicesMediator.__super__.constructor.call(this)}__extends(AdChoicesMediator,ComponentMediator);AdChoicesMediator.prototype.componentName="ad-choices";AdChoicesMediator.prototype.icon=null;AdChoicesMediator.prototype.text=null;AdChoicesMediator.prototype.container=null;AdChoicesMediator.prototype.onRegister=function(){var data;data=this.facade.retrieveProxy(ModuleProxy.NAME);this.container=this.create("ad-choices-link",this,"a");this.container.target="_blank";this.container.href=data.getTarget();this.text=this.createText("ad-choices-text","AdChoices",this.container);this.icon=this.create("ad-choices-icon",this.container);AdChoicesMediator.__super__.onRegister.call(this)};AdChoicesMediator.prototype.listNotificationInterests=function(){return[AdNotifications.AD_CONTAINER_CREATED]};AdChoicesMediator.prototype.handleNotification=function(notification){var container;switch(notification.getName()){case AdNotifications.AD_CONTAINER_CREATED:container=notification.getBody();if(container!=null){container.appendChild(this.viewComponent)}}};function AdChoicesProxy(config){AdChoicesProxy.__super__.constructor.call(this,config)}__extends(AdChoicesProxy,ModuleProxy);AdChoicesProxy.NAME=ModuleProxy.NAME;AdChoicesProxy.prototype.defaults={target:null};AdChoicesProxy.prototype.getTarget=function(){return this.data.target};AdChoicesProxy.prototype.setTarget=function(value){return this.data.target=value};function OutbrainPlugin(){OutbrainPlugin.__super__.constructor.call(this)}__extends(OutbrainPlugin,RecommendationsPlugin);OutbrainPlugin.prototype.moduleName="outbrain";OutbrainPlugin.prototype.createModel=function(){OutbrainPlugin.__super__.createModel.call(this);this.registerProxy(new OutbrainProxy(this.config))};AMP.registerPlugin("outbrain","html",OutbrainPlugin);AMP.registerPlugin("outbrain","flash",OutbrainWrapper);function AdChoicesPlugin(){AdChoicesPlugin.__super__.constructor.call(this)}__extends(AdChoicesPlugin,Plugin);AdChoicesPlugin.prototype.moduleName="adchoices";AdChoicesPlugin.prototype.createModel=function(){this.registerProxy(new AdChoicesProxy(this.config))};AdChoicesPlugin.prototype.createView=function(){this.registerMediator(new AdChoicesMediator())};AdChoicesPlugin.prototype.listNotificationInterests=function(){return[AdNotifications.AD_CONTAINER_CREATED]};AMP.registerPlugin("adchoices","html",AdChoicesPlugin);AMP.registerPlugin("adchoices","flash",AdChoicesWrapper);global.akamai={amp:{AMP:AMP,utils:{Utils:Utils,QueryString:QueryString,Logger:Logger}}};window.AKAMAI_MEDIA_PLAYER.saveSDK(version,global)}window.AKAMAI_MEDIA_PLAYER.setVersion(version)})();var objVideoPopup;var nativeWin=null;var WNVIDEO_WMV_POPPLAYERURL="/global/video/popup/pop_player.asp?";var WNVIDEO_FLV_POPPLAYERURL="/global/video/flash/popupplayer.asp?";function playVideoClip(b){if(document.getElementById){var c=document.getElementById(b);var d="ClipID1="+c.getAttribute("ClipID")+"&";d+="h1="+escape(c.getAttribute("headline"))+"&";d+="vt1="+c.getAttribute("videoType")+"&";d+="at1="+escape(c.getAttribute("adTag"))+"&";d+="d1="+(c.getAttribute("duration")!=""?c.getAttribute("duration"):"0")+"&";d+=(c.getAttribute("launchPageAdTag")!=""?"LaunchPageAdTag="+c.getAttribute("launchPageAdTag"):"");d+="&activePane=info";var a=c.getAttribute("hostDomain")!=""?c.getAttribute("hostDomain"):"";objVideoPopup=selectVideoPlayer(d,null,a)}else{setVideoHelpPage()}}function playVideo(d,h,a,b,n,k,f,c,m){if(document.getElementById&&d!=""){var g="ClipID1="+d+"&";g+="h1="+(h!=""?escape(h):"Video Clip")+"&";g+="vt1="+(a!=""?a:"V")+"&";g+="at1="+(b!=""?b:"Video Player")+"&";g+="d1="+(n!=""?n:"0")+"&";g+="LaunchPageAdTag="+(k!=""?k:"");if(f!=""){g+="&"+f}g+="&activePane=info";selectVideoPlayer(g,null,c,m)}else{setVideoHelpPage()}}function playVideoClips(m){if(document.getElementById){var n;var h="";var k=1;var a=false;var c="activePane=playlist";var f=document.getElementById(m);if(f.elements.length>1){try{h+="LaunchPageAdTag="+f.LaunchPageAdTag.value+"&";h+=f.qsArgs.value+"&"}catch(g){}for(var b=0;b<f.elements.length;b++){n=f.elements[b];if(n.type=="checkbox"&&n.checked){h+="ClipID"+k+"="+n.getAttribute("ClipID")+"&";h+="h"+k+"="+escape(n.getAttribute("headline"))+"&";h+="vt"+k+"="+n.getAttribute("videoType")+"&";h+="at"+k+"="+escape(n.getAttribute("adTag"))+"&";h+="d"+k+"="+(n.getAttribute("duration")!=""?n.getAttribute("duration"):"0")+"&";k+=1;a=true;if((h.length+100)>1024){var d=h.indexOf("ClipID"+(k-2));h=h.substr(0,d);break}}}if(a){h+=c;selectVideoPlayer(h,null,null)}else{alert("You must select at least one video.")}}}else{setVideoHelpPage()}}function playLiveVideo(g,h,d,b,c,k,m,n,a){var f="vt1=l&d1=0&ClipId1="+escape(g)+"&LiveURI="+escape(g)+"&h1="+h+"&at1="+escape(d)+"&LiveURITitle="+escape(h)+"&LaunchPageAdTag="+d+"&fvCatNo="+k+"&secure="+m+"&akPort="+n+"&akProfile="+a;if(m=="1"){f=f+"&cbust="+parseInt(Math.random()*10000000000)}selectVideoPlayer(f,"",b,c)}function selectVideoPlayer(f,d,b,c){try{if(wnSiteDefaultVideoFormat.toLowerCase()=="flv"){c="flv"}}catch(g){}if(c=="flv"){launchPopupPlayer(f,b,c)}else{var d=detectWMP();switch(d){case"6":f+="&playerVersion=6";if(b==""||b==null){var a="http://"+document.domain+"/global/video/WorldNowASX.asp?playerType=native&"+f}else{var a="http://"+b+"/global/video/WorldNowASX.asp?playerType=native&"+f}if(!window.GeckoActiveXObject){location.href=a}else{var h=document.createElement("iframe");h.id="nsPlayer";h.width="0";h.height="0";h.style.visibility="";h.src=a;document.body.appendChild(h)}setVideoHelpPage();break;case"null":setVideoHelpPage();break;case"mac":f+="&playerVersion=7";if(b==""||b==null){var a="http://"+document.domain+"/global/video/WorldNowASX.asp?playerType=native&os=mac&"+f}else{var a="http://"+b+"/global/video/WorldNowASX.asp?playerType=native&os=mac&"+f}location.href=a;break;case"mac-noPlugin":setVideoHelpPage("mac-noPlugin");break;case"gecko":f+="&playerVersion=7";if(b==""||b==null){var a="http://"+document.domain+"/global/video/WorldNowASX.asp?playerType=native&"+f}else{var a="http://"+b+"/global/video/WorldNowASX.asp?playerType=native&"+f}var h=document.createElement("iframe");h.id="nsPlayer";h.width="0";h.height="0";h.style.visibility="";h.src=a;document.body.appendChild(h);setVideoHelpPage();break;case".NetServer":f+="&playerVersion=7";if(b==""||b==null){var a="http://"+document.domain+"/global/video/WorldNowASX.asp?playerType=native&"+f}else{var a="http://"+b+"/global/video/WorldNowASX.asp?playerType=native&"+f}location=a;break;default:f+="&playerVersion="+d+"&hostPageUrl="+escape(document.location);launchPopupPlayer(f,b);break}}}function launchPopupPlayer(n,m,s){var g;var b;var d;if(s=="flv"){g=WNVIDEO_FLV_POPPLAYERURL;b=790;d=605}else{g=WNVIDEO_WMV_POPPLAYERURL;b=788;d=568}var c="";if(m==""||m==null){c="http://"+document.domain}else{c="http://"+m}var r=self.name;if(r==""||r!="CONTENT"){r="CONTENT";self.window.name=r}var o=new Number(Math.floor(99999999*Math.random())+1);var f=(screen.availHeight-d)/2;var p=(screen.availWidth-b)/2;var q="width="+b+",height="+d+"menubar=no,location=no,resizable=no,scrollbars=no,status=no,toolbar=no,top="+f+",left="+p;var h=c+g+n+"&rnd="+o;var a=null;a=window.open(h,"WNVideoPlayer",q);try{if(a!=null){a.focus()}}catch(k){self.blur()}return a}function detectWMP(){var f;var g="MediaPlayer.MediaPlayer.1";var c="WMPlayer.OCX.7";var b="null";try{if((window.ActiveXObject&&navigator.userAgent.indexOf("Windows")!=-1)){f=createActiveXObject(c);if(f){var a=f.versionInfo;b=a.substr(0,1)}else{f=createActiveXObject(g);if(f){b="6"}}}else{if(navigator.userAgent.indexOf("Mac")!=-1){if(navigator.plugins["Windows Media Plugin"]){b="mac"}else{b="mac-noPlugin"}}else{if(navigator.mimeTypes["application/x-mplayer2"]){b="gecko"}}}}catch(d){b="6"}return b}function createActiveXObject(c){var a;var b=null;if(window.ActiveXObject){b=new ActiveXObject(c)}else{if(window.GeckoActiveXObject){b=new GeckoActiveXObject(c)}}return b}function setVideoHelpPage(a){if(a=="mac-noPlugin"){displayVideoHelp("mac-noPlugin")}else{if(wnvideo_getCookie("ShowWNVideoHelpPage")==null){displayVideoHelp()}}}function wnvideo_getCookie(d){if(document.cookie.length>0){var b=d+"=";var g=b.length;var a=document.cookie.length;var f=0;while(f<a){var c=f+g;if(document.cookie.substring(f,c)==b){return wmvideo_getCookieVal(c)}f=document.cookie.indexOf(" ",f)+1;if(f==0){break}}return null}}function wmvideo_getCookieVal(b){var a=document.cookie.indexOf(";",b);if(a==-1){a=document.cookie.length}return unescape(document.cookie.substring(b,a))}var CANVAS_SKINS={flat:{ash:{"#menuBar":{bgGradientTop:"#646869",bgGradientBottom:"#646869",borderColor:"#585b5b"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#383636",bgColorOver:"#8d9292"},".galleryButton":{iconColorOver:"#8d9292"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#656868"},"#progressBar, #volumeBar":{thumbBgColor:"#5d5555",thumbStrokeColor:"#484a4a",thumbStrokeWidth:"1",bufferedColor:"#7b7b7b",playedColor:"#383636"},"#progressBar":{trackBgColor:"#5f5e5e"},"#volumeBar":{trackBgColor:"#7b7b7b",volumeLevelColor:"#383636"},"#volumeBarVertical":{thumbBgColor:"#5d5555",thumbStrokeColor:"#484a4a",thumbStrokeWidth:"1",trackBgColor:"#5f5e5e",volumeLevelColor:"#383636"},"#progressTimer":{color:"#b4aeae",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#444444",rightColor:"#797c7c"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#646869"},"#overlayEmail":{iconColorOver:"#646869"},"#overlayGetLink":{iconColorOver:"#646869"},"#overlayShare":{iconColorOver:"#646869"},"#overlayHelp":{iconColorOver:"#646869"}},bubblegum:{"#menuBar":{bgGradientTop:"#fc4aa6",bgGradientBottom:"#fc4aa6",borderColor:"#c70067"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#951657",bgColorOver:"#c32f7b"},".galleryButton":{iconColorOver:"#c32f7b"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#951657"},"#progressBar, #volumeBar":{thumbBgColor:"#fa1c8f",thumbStrokeColor:"#cd0e71",thumbStrokeWidth:"2",bufferedColor:"#f97abd",playedColor:"#951657"},"#progressBar":{trackBgColor:"#dd4b96"},"#volumeBar":{trackBgColor:"#f97abd",volumeLevelColor:"#951657"},"#volumeBarVertical":{thumbBgColor:"#fa1c8f",thumbStrokeColor:"#cd0e71",thumbStrokeWidth:"1",trackBgColor:"#f97abd",volumeLevelColor:"#951657"},"#progressTimer":{color:"#fb96ca",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#c70067",rightColor:"#fc69b5"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#fc4aa6"},"#overlayEmail":{iconColorOver:"#fc4aa6"},"#overlayGetLink":{iconColorOver:"#fc4aa6"},"#overlayShare":{iconColorOver:"#fc4aa6"},"#overlayHelp":{iconColorOver:"#fc4aa6"}},chili:{"#menuBar":{bgGradientTop:"#e20606",bgGradientBottom:"#e20606",borderColor:"#c21805"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#821003",bgColorOver:"#f37a76"},".galleryButton":{iconColorOver:"#f37a76"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#821003"},"#progressBar, #volumeBar":{thumbBgColor:"#821003",thumbStrokeColor:"#730614",thumbStrokeWidth:"2",bufferedColor:"#f37774",playedColor:"#821003"},"#progressBar":{trackBgColor:"#f52121"},"#volumeBar":{trackBgColor:"#f37774",volumeLevelColor:"#821003"},"#volumeBarVertical":{thumbBgColor:"#821003",thumbStrokeColor:"#730614",thumbStrokeWidth:"1",trackBgColor:"#f37774",volumeLevelColor:"#821003"},"#progressTimer":{color:"#fd8d8e",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#a41100",rightColor:"#f52121"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#e20606"},"#overlayEmail":{iconColorOver:"#e20606"},"#overlayGetLink":{iconColorOver:"#e20606"},"#overlayShare":{iconColorOver:"#e20606"},"#overlayHelp":{iconColorOver:"#e20606"}},cocoa:{"#menuBar":{bgGradientTop:"#7f4a38",bgGradientBottom:"#7f4a38",borderColor:"#853212"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#523020",bgColorOver:"#b4664c"},".galleryButton":{iconColorOver:"#b4664c"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#7f4a38"},"#progressBar, #volumeBar":{thumbBgColor:"#523020",thumbStrokeColor:"#553729",thumbStrokeWidth:"2",bufferedColor:"#af664a",playedColor:"#523020"},"#progressBar":{trackBgColor:"#93533e"},"#volumeBar":{trackBgColor:"#af664a",volumeLevelColor:"#523020"},"#volumeBarVertical":{thumbBgColor:"#523020",thumbStrokeColor:"#553729",thumbStrokeWidth:"1",trackBgColor:"#af664a",volumeLevelColor:"#523020"},"#progressTimer":{color:"#523020",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#523020",rightColor:"#a7573d"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#7f4a38"},"#overlayEmail":{iconColorOver:"#7f4a38"},"#overlayGetLink":{iconColorOver:"#7f4a38"},"#overlayShare":{iconColorOver:"#7f4a38"},"#overlayHelp":{iconColorOver:"#7f4a38"}},cobalt:{"#menuBar":{bgGradientTop:"#294e96",bgGradientBottom:"#294e96",borderColor:"#254488"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#7b98d3",bgColorOver:"#4f70b0"},".galleryButton":{iconColorOver:"#4f70b0"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#7b98d3"},"#progressBar, #volumeBar":{thumbBgColor:"#2c529d",thumbStrokeColor:"#214082",thumbStrokeWidth:"2",bufferedColor:"#7b99d3",playedColor:"#1e3b7b"},"#progressBar":{trackBgColor:"#4166b1"},"#volumeBar":{trackBgColor:"#7b99d3",volumeLevelColor:"#0c204a"},"#volumeBarVertical":{thumbBgColor:"#2c529d",thumbStrokeColor:"#214082",thumbStrokeWidth:"1",trackBgColor:"#7b99d3",volumeLevelColor:"#0c204a"},"#progressTimer":{color:"#5a79b8",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#1f3a76",rightColor:"#345baa"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#294e96"},"#overlayEmail":{iconColorOver:"#294e96"},"#overlayGetLink":{iconColorOver:"#294e96"},"#overlayShare":{iconColorOver:"#294e96"},"#overlayHelp":{iconColorOver:"#294e96"}},ebony:{"#menuBar":{bgGradientTop:"#000000",bgGradientBottom:"#000000",borderColor:"#1e1e1e"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#565555",bgColorOver:"#3d3d3d"},".galleryButton":{iconColorOver:"#3d3d3d"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#454444"},"#progressBar, #volumeBar":{thumbBgColor:"#5d5555",thumbStrokeColor:"#484a4a",thumbStrokeWidth:"1",bufferedColor:"#7b7b7b",playedColor:"#383636"},"#progressBar":{trackBgColor:"#5f5e5e"},"#volumeBar":{trackBgColor:"#7b7b7b",volumeLevelColor:"#d27d00"},"#volumeBarVertical":{thumbBgColor:"#5d5555",thumbStrokeColor:"#484a4a",thumbStrokeWidth:"1",trackBgColor:"#817e7e",volumeLevelColor:"#363434"},"#progressTimer":{color:"#b4aeae",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#131313",rightColor:"#1b1d1f"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#3d3d3d"},"#overlayEmail":{iconColorOver:"#3d3d3d"},"#overlayGetLink":{iconColorOver:"#3d3d3d"},"#overlayShare":{iconColorOver:"#3d3d3d"},"#overlayHelp":{iconColorOver:"#3d3d3d"}},frost:{"#menuBar":{bgGradientTop:"#cde8ee",bgGradientBottom:"#cde8ee",borderColor:"#b2d9e3"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#44acca",bgColorOver:"#55c6e7"},".galleryButton":{iconColorOver:"#55c6e7"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#44acca"},"#progressBar, #volumeBar":{thumbBgColor:"#ededed",thumbStrokeColor:"#88daf2",thumbStrokeWidth:"2",bufferedColor:"#afd5df",playedColor:"#44acca"},"#progressBar":{trackBgColor:"#badce5"},"#volumeBar":{trackBgColor:"#afd5df",volumeLevelColor:"#44acca"},"#volumeBarVertical":{thumbBgColor:"#ededed",thumbStrokeColor:"#88daf2",thumbStrokeWidth:"1",trackBgColor:"#afd5df",volumeLevelColor:"#44acca"},"#progressTimer":{color:"#44acca",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#aacdd6",rightColor:"#fafcfd"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#44acca"},"#overlayEmail":{iconColorOver:"#44acca"},"#overlayGetLink":{iconColorOver:"#44acca"},"#overlayShare":{iconColorOver:"#44acca"},"#overlayHelp":{iconColorOver:"#44acca"}},keylime:{"#menuBar":{bgGradientTop:"#a7c35b",bgGradientBottom:"#a7c35b",borderColor:"#90a559"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#346329",bgColorOver:"#4e943e"},".galleryButton":{iconColorOver:"#4e943e"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#346329"},"#progressBar, #volumeBar":{thumbBgColor:"#78a642",thumbStrokeColor:"#54913c",thumbStrokeWidth:"2",bufferedColor:"#6b9c3a",playedColor:"#346329"},"#progressBar":{trackBgColor:"#9ab74b"},"#volumeBar":{trackBgColor:"#6b9c3a",volumeLevelColor:"#346329"},"#volumeBarVertical":{thumbBgColor:"#78a642",thumbStrokeColor:"#54913c",thumbStrokeWidth:"1",trackBgColor:"#6b9c3a",volumeLevelColor:"#346329"},"#progressTimer":{color:"#cdea7b",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#478b38",rightColor:"#bad177"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#a7c35b"},"#overlayEmail":{iconColorOver:"#a7c35b"},"#overlayGetLink":{iconColorOver:"#a7c35b"},"#overlayShare":{iconColorOver:"#a7c35b"},"#overlayHelp":{iconColorOver:"#a7c35b"}},latte:{"#menuBar":{bgGradientTop:"#ddc49d",bgGradientBottom:"#ddc49d",borderColor:"#d0ad77"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#523020",bgColorOver:"#b4664c"},".galleryButton":{iconColorOver:"#b4664c"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#804f3a"},"#progressBar, #volumeBar":{thumbBgColor:"#523020",thumbStrokeColor:"#553729",thumbStrokeWidth:"2",bufferedColor:"#af664a",playedColor:"#523020"},"#progressBar":{trackBgColor:"#93533e"},"#volumeBar":{trackBgColor:"#af664a",volumeLevelColor:"#523020"},"#volumeBarVertical":{thumbBgColor:"#523020",thumbStrokeColor:"#553729",thumbStrokeWidth:"1",trackBgColor:"#af664a",volumeLevelColor:"#523020"},"#progressTimer":{color:"#523020",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#b38c4f",rightColor:"#e9dac1"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#b4664c"},"#overlayEmail":{iconColorOver:"#b4664c"},"#overlayGetLink":{iconColorOver:"#b4664c"},"#overlayShare":{iconColorOver:"#b4664c"},"#overlayHelp":{iconColorOver:"#b4664c"}},midnight:{"#menuBar":{bgGradientTop:"#20232c",bgGradientBottom:"#20232c",borderColor:"#323645"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#515e74",bgColorOver:"#62738e"},".galleryButton":{iconColorOver:"#62738e"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#434e61"},"#progressBar, #volumeBar":{thumbBgColor:"#20232c",thumbStrokeColor:"#14171f",thumbStrokeWidth:"2",bufferedColor:"#6D7D9C",playedColor:"#434E61"},"#progressBar":{trackBgColor:"#536078"},"#volumeBar":{trackBgColor:"#6D7D9C",volumeLevelColor:"#434E61"},"#volumeBarVertical":{thumbBgColor:"#20232c",thumbStrokeColor:"#14171f",thumbStrokeWidth:"1",trackBgColor:"#6D7D9C",volumeLevelColor:"#434E61"},"#progressTimer":{color:"#434e61",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#0e0f13",rightColor:"#2d3340"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#62738e"},"#overlayEmail":{iconColorOver:"#62738e"},"#overlayGetLink":{iconColorOver:"#62738e"},"#overlayShare":{iconColorOver:"#62738e"},"#overlayHelp":{iconColorOver:"#62738e"}},plum:{"#menuBar":{bgGradientTop:"#4e31a5",bgGradientBottom:"#4e31a5",borderColor:"#1a2777"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#9944e7",bgColorOver:"#151F61"},".galleryButton":{iconColorOver:"#151F61"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#151F61"},"#progressBar, #volumeBar":{thumbBgColor:"#1a287a",thumbStrokeColor:"#101a54",thumbStrokeWidth:"2",bufferedColor:"#762abd",playedColor:"#151f61"},"#progressBar":{trackBgColor:"#8843d7"},"#volumeBar":{trackBgColor:"#762abd",volumeLevelColor:"#151f61"},"#volumeBarVertical":{thumbBgColor:"#1a287a",thumbStrokeColor:"#101a54",thumbStrokeWidth:"1",trackBgColor:"#762abd",volumeLevelColor:"#151f61"},"#progressTimer":{color:"#9944e7",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#1a2777",rightColor:"#7a27ca"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#4e31a5"},"#overlayEmail":{iconColorOver:"#4e31a5"},"#overlayGetLink":{iconColorOver:"#4e31a5"},"#overlayShare":{iconColorOver:"#4e31a5"},"#overlayHelp":{iconColorOver:"#4e31a5"}},sapphire:{"#menuBar":{bgGradientTop:"#192772",bgGradientBottom:"#192772",borderColor:"#131e5a"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#040929",bgColorOver:"#616eb4"},".galleryButton":{iconColorOver:"#616eb4"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#1a3070"},"#progressBar, #volumeBar":{thumbBgColor:"#192772",thumbStrokeColor:"#1a2150",thumbStrokeWidth:"2",bufferedColor:"#616eb4",playedColor:"#040929"},"#progressBar":{trackBgColor:"#404e99"},"#volumeBar":{trackBgColor:"#616eb4",volumeLevelColor:"#040929"},"#volumeBarVertical":{thumbBgColor:"#192772",thumbStrokeColor:"#1a2150",thumbStrokeWidth:"1",trackBgColor:"#1e3b7b",volumeLevelColor:"#040929"},"#progressTimer":{color:"#404e99",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#101a51",rightColor:"#2e3d8e"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#404e99"},"#overlayEmail":{iconColorOver:"#404e99"},"#overlayGetLink":{iconColorOver:"#404e99"},"#overlayShare":{iconColorOver:"#404e99"},"#overlayHelp":{iconColorOver:"#404e99"}},silver:{"#menuBar":{bgGradientTop:"#ededed",bgGradientBottom:"#ededed",borderColor:"#c6c6c6"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#8b8b8b",bgColorOver:"#098aaf"},".galleryButton":{iconColorOver:"#098aaf"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#afafaf"},"#progressBar, #volumeBar":{thumbBgColor:"#e9e9e9",thumbStrokeColor:"#c6c6c6",thumbStrokeWidth:"2",bufferedColor:"#b9b9b9",playedColor:"#2ba9c5"},"#progressBar":{trackBgColor:"#e2e2e2"},"#volumeBar":{trackBgColor:"#b9b9b9",volumeLevelColor:"#2ba9c5"},"#volumeBarVertical":{thumbBgColor:"#e9e9e9",thumbStrokeColor:"#c6c6c6",thumbStrokeWidth:"1",trackBgColor:"#b9b9b9",volumeLevelColor:"#2ba9c5"},"#progressTimer":{color:"#7f7f7f",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#d2d1d1",rightColor:"#fdfdfd"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#098aaf"},"#overlayEmail":{iconColorOver:"#098aaf"},"#overlayGetLink":{iconColorOver:"#098aaf"},"#overlayShare":{iconColorOver:"#098aaf"},"#overlayHelp":{iconColorOver:"#098aaf"}},sunshine:{"#menuBar":{bgGradientTop:"#fdef00",bgGradientBottom:"#fdef00",borderColor:"#ddda24"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#d27d00",bgColorOver:"#f7a42b"},".galleryButton":{iconColorOver:"#f7a42b"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#f0a92d"},"#progressBar, #volumeBar":{thumbBgColor:"#d27d00",thumbStrokeColor:"#ba6f01",thumbStrokeWidth:"2",bufferedColor:"#e4a548",playedColor:"#d27d00"},"#progressBar":{trackBgColor:"#FFF98F"},"#volumeBar":{trackBgColor:"#e4a548",volumeLevelColor:"#d27d00"},"#volumeBarVertical":{thumbBgColor:"#d27d00",thumbStrokeColor:"#ba6f01",thumbStrokeWidth:"1",trackBgColor:"#fcf955",volumeLevelColor:"#d27d00"},"#progressTimer":{color:"#d27d00",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#ee961b",rightColor:"#fff773"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#fdef00"},"#overlayEmail":{iconColorOver:"#fdef00"},"#overlayGetLink":{iconColorOver:"#fdef00"},"#overlayShare":{iconColorOver:"#fdef00"},"#overlayHelp":{iconColorOver:"#fdef00"}},tangerine:{"#menuBar":{bgGradientTop:"#f5be2f",bgGradientBottom:"#f5be2f",borderColor:"#e2ae26"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#d27d00",bgColorOver:"#ee981a"},".galleryButton":{iconColorOver:"#ee981a"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#d27d00"},"#progressBar, #volumeBar":{thumbBgColor:"#d27d00",thumbStrokeColor:"#ba6f01",thumbStrokeWidth:"2",bufferedColor:"#f3e0a0",playedColor:"#d27d00"},"#progressBar":{trackBgColor:"#f89c14"},"#volumeBar":{trackBgColor:"#f3e0a0",volumeLevelColor:"#d27d00"},"#volumeBarVertical":{thumbBgColor:"#d27d00",thumbStrokeColor:"#ba6f01",thumbStrokeWidth:"1",trackBgColor:"#f3e0a0",volumeLevelColor:"#d27d00"},"#progressTimer":{color:"#d27d00",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#ee961b",rightColor:"#f8ce5f"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#f5be2f"},"#overlayEmail":{iconColorOver:"#f5be2f"},"#overlayGetLink":{iconColorOver:"#f5be2f"},"#overlayShare":{iconColorOver:"#f5be2f"},"#overlayHelp":{iconColorOver:"#f5be2f"}},wheat:{"#menuBar":{bgGradientTop:"#d8cd6d",bgGradientBottom:"#d8cd6d",borderColor:"#e0d78a"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#86791e",bgColorOver:"#ad9e33"},".galleryButton":{iconColorOver:"#ad9e33"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#86791e"},"#progressBar, #volumeBar":{thumbBgColor:"#86791e",thumbStrokeColor:"#756b24",thumbStrokeWidth:"2",bufferedColor:"#e4d67d",playedColor:"#86791e"},"#progressBar":{trackBgColor:"#ccc053"},"#volumeBar":{trackBgColor:"#e4d67d",volumeLevelColor:"#86791e"},"#volumeBarVertical":{thumbBgColor:"#86791e",thumbStrokeColor:"#756b24",thumbStrokeWidth:"1",trackBgColor:"#e4d67d",volumeLevelColor:"#86791e"},"#progressTimer":{color:"#523020",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#8b8030",rightColor:"#e9e298"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#ad9e33"},"#overlayEmail":{iconColorOver:"#ad9e33"},"#overlayGetLink":{iconColorOver:"#ad9e33"},"#overlayShare":{iconColorOver:"#ad9e33"},"#overlayHelp":{iconColorOver:"#ad9e33"}},wine:{"#menuBar":{bgGradientTop:"#9d0121",bgGradientBottom:"#9d0121",borderColor:"#74001a"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#e45763",bgColorOver:"#ca0516"},".galleryButton":{iconColorOver:"#ca0516"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#9d0121"},"#progressBar, #volumeBar":{thumbBgColor:"#7f011e",thumbStrokeColor:"#74001a",thumbStrokeWidth:"2",bufferedColor:"#e45b62",playedColor:"#5b131e"},"#progressBar":{trackBgColor:"#b01623"},"#volumeBar":{trackBgColor:"#e45b62",volumeLevelColor:"#5b131e"},"#volumeBarVertical":{thumbBgColor:"#7f011e",thumbStrokeColor:"#74001a",thumbStrokeWidth:"1",trackBgColor:"#e45b62",volumeLevelColor:"#5b131e"},"#progressTimer":{color:"#e45763",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#71001a",rightColor:"#d10229"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#ca0516"},"#overlayEmail":{iconColorOver:"#ca0516"},"#overlayGetLink":{iconColorOver:"#ca0516"},"#overlayShare":{iconColorOver:"#ca0516"},"#overlayHelp":{iconColorOver:"#ca0516"}}},satin:{ash:{"#menuBar":{bgGradientTop:"#999e9e",bgGradientBottom:"#3a3b3b",borderColor:"#828686"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#383636",bgColorOver:"#8d9292"},".galleryButton":{iconColorOver:"#8d9292"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#656868"},"#progressBar, #volumeBar":{thumbBgColor:"#5d5555",thumbStrokeColor:"#484a4a",thumbStrokeWidth:"1",bufferedColor:"#7b7b7b",playedColor:"#383636"},"#progressBar":{trackBgColor:"#5f5e5e"},"#volumeBar":{trackBgColor:"#7b7b7b",volumeLevelColor:"#383636"},"#volumeBarVertical":{thumbBgColor:"#5d5555",thumbStrokeColor:"#484a4a",thumbStrokeWidth:"1",trackBgColor:"#5f5e5e",volumeLevelColor:"#383636"},"#progressTimer":{color:"#b4aeae",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#444444",rightColor:"#797c7c"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#383636"},"#overlayEmail":{iconColorOver:"#383636"},"#overlayGetLink":{iconColorOver:"#383636"},"#overlayShare":{iconColorOver:"#383636"},"#overlayHelp":{iconColorOver:"#383636"}},bubblegum:{"#menuBar":{bgGradientTop:"#fe59af",bgGradientBottom:"#f0047e",borderColor:"#c70067"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#951657",bgColorOver:"#c32f7b"},".galleryButton":{iconColorOver:"#c32f7b"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#951657"},"#progressBar, #volumeBar":{thumbBgColor:"#fa1c8f",thumbStrokeColor:"#cd0e71",thumbStrokeWidth:"2",bufferedColor:"#f97abd",playedColor:"#951657"},"#progressBar":{trackBgColor:"#fe59af"},"#volumeBar":{trackBgColor:"#f97abd",volumeLevelColor:"#951657"},"#volumeBarVertical":{thumbBgColor:"#fa1c8f",thumbStrokeColor:"#cd0e71",thumbStrokeWidth:"1",trackBgColor:"#f97abd",volumeLevelColor:"#951657"},"#progressTimer":{color:"#fb96ca",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#c70067",rightColor:"#fc69b5"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#951657"},"#overlayEmail":{iconColorOver:"#951657"},"#overlayGetLink":{iconColorOver:"#951657"},"#overlayShare":{iconColorOver:"#951657"},"#overlayHelp":{iconColorOver:"#951657"}},chili:{"#menuBar":{bgGradientTop:"#e63e23",bgGradientBottom:"#b91c0a",borderColor:"#a41100"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#821003",bgColorOver:"#f37a76"},".galleryButton":{iconColorOver:"#f37a76"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#821003"},"#progressBar, #volumeBar":{thumbBgColor:"#821003",thumbStrokeColor:"#730614",thumbStrokeWidth:"1",bufferedColor:"#f37774",playedColor:"#821003"},"#progressBar":{trackBgColor:"#b91c0a"},"#volumeBar":{trackBgColor:"#f37774",volumeLevelColor:"#821003"},"#volumeBarVertical":{thumbBgColor:"#821003",thumbStrokeColor:"#730614",thumbStrokeWidth:"1",trackBgColor:"#f37774",volumeLevelColor:"#821003"},"#progressTimer":{color:"#fd8d8e",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#a41100",rightColor:"#e63e24"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#b91c0a"},"#overlayEmail":{iconColorOver:"#b91c0a"},"#overlayGetLink":{iconColorOver:"#b91c0a"},"#overlayShare":{iconColorOver:"#b91c0a"},"#overlayHelp":{iconColorOver:"#b91c0a"}},cocoa:{"#menuBar":{bgGradientTop:"#ac583e",bgGradientBottom:"#5f4133",borderColor:"#853212"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#523020",bgColorOver:"#b4664c"},".galleryButton":{iconColorOver:"#b4664c"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#7f4a38"},"#progressBar, #volumeBar":{thumbBgColor:"#523020",thumbStrokeColor:"#553729",thumbStrokeWidth:"1",bufferedColor:"#af664a",playedColor:"#523020"},"#progressBar":{trackBgColor:"#93533e"},"#volumeBar":{trackBgColor:"#af664a",volumeLevelColor:"#821003"},"#volumeBarVertical":{thumbBgColor:"#523020",thumbStrokeColor:"#553729",thumbStrokeWidth:"1",trackBgColor:"#af664a",volumeLevelColor:"#523020"},"#progressTimer":{color:"#523020",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#523020",rightColor:"#a7573d"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#ac583e"},"#overlayEmail":{iconColorOver:"#ac583e"},"#overlayGetLink":{iconColorOver:"#ac583e"},"#overlayShare":{iconColorOver:"#ac583e"},"#overlayHelp":{iconColorOver:"#ac583e"}},cobalt:{"#menuBar":{bgGradientTop:"#3159a8",bgGradientBottom:"#254488",borderColor:"#27488e"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#7b98d3",bgColorOver:"#4f70b0"},".galleryButton":{iconColorOver:"#4f70b0"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#7b98d3"},"#progressBar, #volumeBar":{thumbBgColor:"#2c529d",thumbStrokeColor:"#214082",thumbStrokeWidth:"1",bufferedColor:"#7b99d3",playedColor:"#1e3b7b"},"#progressBar":{trackBgColor:"#4166b1"},"#volumeBar":{trackBgColor:"#7b99d3",volumeLevelColor:"#0c204a"},"#volumeBarVertical":{thumbBgColor:"#2c529d",thumbStrokeColor:"#214082",thumbStrokeWidth:"1",trackBgColor:"#4166b1",volumeLevelColor:"#0c204a"},"#progressTimer":{color:"#5a79b8",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#1f3a76",rightColor:"#345baa"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#3159a8"},"#overlayEmail":{iconColorOver:"#3159a8"},"#overlayGetLink":{iconColorOver:"#3159a8"},"#overlayShare":{iconColorOver:"#3159a8"},"#overlayHelp":{iconColorOver:"#3159a8"}},ebony:{"#menuBar":{bgGradientTop:"#43464a",bgGradientBottom:"#000000",borderColor:"#333333"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#565555",bgColorOver:"#000000"},".galleryButton":{iconColorOver:"#000000"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#454444"},"#progressBar, #volumeBar":{thumbBgColor:"#5d5555",thumbStrokeColor:"#484a4a",thumbStrokeWidth:"1",bufferedColor:"#7b7b7b",playedColor:"#383636"},"#progressBar":{trackBgColor:"#5f5e5e"},"#volumeBar":{trackBgColor:"#7b7b7b",volumeLevelColor:"#363434"},"#volumeBarVertical":{thumbBgColor:"#5d5555",thumbStrokeColor:"#484a4a",thumbStrokeWidth:"1",trackBgColor:"#817e7e",volumeLevelColor:"#363434"},"#progressTimer":{color:"#b4aeae",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#131313",rightColor:"#1b1d1f"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#43464a"},"#overlayEmail":{iconColorOver:"#43464a"},"#overlayGetLink":{iconColorOver:"#43464a"},"#overlayShare":{iconColorOver:"#43464a"},"#overlayHelp":{iconColorOver:"#43464a"}},frost:{"#menuBar":{bgGradientTop:"#f2f9fa",bgGradientBottom:"#aed9e4",borderColor:"#aaced8"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#44acca",bgColorOver:"#55c6e7"},".galleryButton":{iconColorOver:"#55c6e7"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#44acca"},"#progressBar, #volumeBar":{thumbBgColor:"#ededed",thumbStrokeColor:"#a2d2d9",thumbStrokeWidth:"2",bufferedColor:"#afd5df",playedColor:"#44acca"},"#progressBar":{trackBgColor:"#badce5"},"#volumeBar":{trackBgColor:"#afd5df",volumeLevelColor:"#44acca"},"#volumeBarVertical":{thumbBgColor:"#ededed",thumbStrokeColor:"#6cc7e1",thumbStrokeWidth:"1",trackBgColor:"#afd5df",volumeLevelColor:"#44acca"},"#progressTimer":{color:"#44acca",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#aacdd6",rightColor:"#fafcfd"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#55c6e7"},"#overlayEmail":{iconColorOver:"#55c6e7"},"#overlayGetLink":{iconColorOver:"#55c6e7"},"#overlayShare":{iconColorOver:"#55c6e7"},"#overlayHelp":{iconColorOver:"#55c6e7"}},keylime:{"#menuBar":{bgGradientTop:"#c6db91",bgGradientBottom:"#408737",borderColor:"#6ea34c"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#346329",bgColorOver:"#4e943e"},".galleryButton":{iconColorOver:"#4e943e"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#346329"},"#progressBar, #volumeBar":{thumbBgColor:"#78a642",thumbStrokeColor:"#54913c",thumbStrokeWidth:"2",bufferedColor:"#6b9c3a",playedColor:"#346329"},"#progressBar":{trackBgColor:"#9ab74b"},"#volumeBar":{trackBgColor:"#6b9c3a",volumeLevelColor:"#346329"},"#volumeBarVertical":{thumbBgColor:"#78a642",thumbStrokeColor:"#54913c",thumbStrokeWidth:"1",trackBgColor:"#6b9c3a",volumeLevelColor:"#346329"},"#progressTimer":{color:"#cdea7b",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#478b38",rightColor:"#bad177"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#408737"},"#overlayEmail":{iconColorOver:"#408737"},"#overlayGetLink":{iconColorOver:"#408737"},"#overlayShare":{iconColorOver:"#408737"},"#overlayHelp":{iconColorOver:"#408737"}},latte:{"#menuBar":{bgGradientTop:"#e7d1af",bgGradientBottom:"#b89051",borderColor:"#ba955b"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#523020",bgColorOver:"#97543e"},".galleryButton":{iconColorOver:"#97543e"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#804f3a"},"#progressBar, #volumeBar":{thumbBgColor:"#523020",thumbStrokeColor:"#553729",thumbStrokeWidth:"2",bufferedColor:"#af664a",playedColor:"#523020"},"#progressBar":{trackBgColor:"#93533e"},"#volumeBar":{trackBgColor:"#af664a",volumeLevelColor:"#523020"},"#volumeBarVertical":{thumbBgColor:"#523020",thumbStrokeColor:"#553729",thumbStrokeWidth:"1",trackBgColor:"#af664a",volumeLevelColor:"#523020"},"#progressTimer":{color:"#523020",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#b38c4f",rightColor:"#e9dac1"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#97543e"},"#overlayEmail":{iconColorOver:"#97543e"},"#overlayGetLink":{iconColorOver:"#97543e"},"#overlayShare":{iconColorOver:"#97543e"},"#overlayHelp":{iconColorOver:"#97543e"}},midnight:{"#menuBar":{bgGradientTop:"#272f3a",bgGradientBottom:"#0a080b",borderColor:"#0a080b"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#515e74",bgColorOver:"#62738e"},".galleryButton":{iconColorOver:"#62738e"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#434e61"},"#progressBar, #volumeBar":{thumbBgColor:"#20232c",thumbStrokeColor:"#14171f",thumbStrokeWidth:"2",bufferedColor:"#6D7D9C",playedColor:"#434E61"},"#progressBar":{trackBgColor:"#536078"},"#volumeBar":{trackBgColor:"#6D7D9C",volumeLevelColor:"#434E61"},"#volumeBarVertical":{thumbBgColor:"#20232c",thumbStrokeColor:"#14171f",thumbStrokeWidth:"1",trackBgColor:"#6D7D9C",volumeLevelColor:"#434E61"},"#progressTimer":{color:"#434e61",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#0e0f13",rightColor:"#2d3340"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#62738e"},"#overlayEmail":{iconColorOver:"#62738e"},"#overlayGetLink":{iconColorOver:"#62738e"},"#overlayShare":{iconColorOver:"#62738e"},"#overlayHelp":{iconColorOver:"#62738e"}},plum:{"#menuBar":{bgGradientTop:"#7a27ca",bgGradientBottom:"#2a3987",borderColor:"#1a2777"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#9944e7",bgColorOver:"#151F61"},".galleryButton":{iconColorOver:"#151F61"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#151F61"},"#progressBar, #volumeBar":{thumbBgColor:"#7a27ca",thumbStrokeColor:"#2a3987",thumbStrokeWidth:"1",bufferedColor:"#8843d7",playedColor:"#151f61"},"#progressBar":{trackBgColor:"#762abd"},"#volumeBar":{trackBgColor:"#8843d7",volumeLevelColor:"#151f61"},"#volumeBarVertical":{thumbBgColor:"#7a27ca",thumbStrokeColor:"#2a3987",thumbStrokeWidth:"2",trackBgColor:"#762abd",volumeLevelColor:"#151f61"},"#progressTimer":{color:"#9944e7",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#1a2777",rightColor:"#7a27ca"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#7a27ca"},"#overlayEmail":{iconColorOver:"#7a27ca"},"#overlayGetLink":{iconColorOver:"#7a27ca"},"#overlayShare":{iconColorOver:"#7a27ca"},"#overlayHelp":{iconColorOver:"#7a27ca"}},sapphire:{"#menuBar":{bgGradientTop:"#324695",bgGradientBottom:"#101c7a",borderColor:"#101c7a"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#040929",bgColorOver:"#7b88dd"},".galleryButton":{iconColorOver:"#7b88dd"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#1a3070"},"#progressBar, #volumeBar":{thumbBgColor:"#324695",thumbStrokeColor:"#101c7a",thumbStrokeWidth:"1",bufferedColor:"#7b88dd",playedColor:"#101c7a"},"#progressBar":{trackBgColor:"#324695"},"#volumeBar":{trackBgColor:"#7b88dd",volumeLevelColor:"#101c7a"},"#volumeBarVertical":{thumbBgColor:"#324695",thumbStrokeColor:"#101c7a",thumbStrokeWidth:"1",trackBgColor:"#324695",volumeLevelColor:"#101c7a"},"#progressTimer":{color:"#5a79b8",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#101c7a",rightColor:"#324695"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#324695"},"#overlayEmail":{iconColorOver:"#324695"},"#overlayGetLink":{iconColorOver:"#324695"},"#overlayShare":{iconColorOver:"#324695"},"#overlayHelp":{iconColorOver:"#324695"}},silver:{"#menuBar":{bgGradientTop:"#fefefe",bgGradientBottom:"#cccccc",borderColor:"#b2b2b2"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#8b8b8b",bgColorOver:"#098aaf"},".galleryButton":{iconColorOver:"#098aaf"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#afafaf"},"#progressBar, #volumeBar":{thumbBgColor:"#e9e9e9",thumbStrokeColor:"#c6c6c6",thumbStrokeWidth:"2",bufferedColor:"#b9b9b9",playedColor:"#2ba9c5"},"#progressBar":{trackBgColor:"#d8d8d8"},"#volumeBar":{trackBgColor:"#b9b9b9",volumeLevelColor:"#2ba9c5"},"#volumeBarVertical":{thumbBgColor:"#e9e9e9",thumbStrokeColor:"#c6c6c6",thumbStrokeWidth:"1",trackBgColor:"#b9b9b9",volumeLevelColor:"#2ba9c5"},"#progressTimer":{color:"#7f7f7f",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#d2d1d1",rightColor:"#fdfdfd"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#098aaf"},"#overlayEmail":{iconColorOver:"#098aaf"},"#overlayGetLink":{iconColorOver:"#098aaf"},"#overlayShare":{iconColorOver:"#098aaf"},"#overlayHelp":{iconColorOver:"#098aaf"}},sunshine:{"#menuBar":{bgGradientTop:"#fffd00",bgGradientBottom:"#f7c628",borderColor:"#e0d708"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#d27d00",bgColorOver:"#f7a42b"},".galleryButton":{iconColorOver:"#f7a42b"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#f0a92d"},"#progressBar, #volumeBar":{thumbBgColor:"#d27d00",thumbStrokeColor:"#ba6f01",thumbStrokeWidth:"2",bufferedColor:"#fcf955",playedColor:"#d27d00"},"#progressBar":{trackBgColor:"#f0a92d"},"#volumeBar":{trackBgColor:"#fcf955",volumeLevelColor:"#d27d00"},"#volumeBarVertical":{thumbBgColor:"#d27d00",thumbStrokeColor:"#ba6f01",thumbStrokeWidth:"1",trackBgColor:"#fcf955",volumeLevelColor:"#d27d00"},"#progressTimer":{color:"#d27d00",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#ee961b",rightColor:"#fcf955"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#fffd00"},"#overlayEmail":{iconColorOver:"#fffd00"},"#overlayGetLink":{iconColorOver:"#fffd00"},"#overlayShare":{iconColorOver:"#fffd00"},"#overlayHelp":{iconColorOver:"#fffd00"}},tangerine:{"#menuBar":{bgGradientTop:"#f6e5ac",bgGradientBottom:"#ee961b",borderColor:"#ee961b"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#d27d00",bgColorOver:"#ee981a"},".galleryButton":{iconColorOver:"#ee981a"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#d27d00"},"#progressBar, #volumeBar":{thumbBgColor:"#d27d00",thumbStrokeColor:"#ba6f01",thumbStrokeWidth:"1",bufferedColor:"#f3e0a0",playedColor:"#d27d00"},"#progressBar":{trackBgColor:"#f89c14"},"#volumeBar":{trackBgColor:"#f3e0a0",volumeLevelColor:"#d27d00"},"#volumeBarVertical":{thumbBgColor:"#d27d00",thumbStrokeColor:"#ba6f01",thumbStrokeWidth:"1",trackBgColor:"#f3e0a0",volumeLevelColor:"#d27d00"},"#progressTimer":{color:"#d27d00",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#ee961b",rightColor:"#f8ce5f"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#ee961b"},"#overlayEmail":{iconColorOver:"#ee961b"},"#overlayGetLink":{iconColorOver:"#ee961b"},"#overlayShare":{iconColorOver:"#ee961b"},"#overlayHelp":{iconColorOver:"#ee961b"}},wheat:{"#menuBar":{bgGradientTop:"#e3da7d",bgGradientBottom:"#bbac44",borderColor:"#bcad45"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#86791e",bgColorOver:"#ad9e33"},".galleryButton":{iconColorOver:"#ad9e33"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#86791e"},"#progressBar, #volumeBar":{thumbBgColor:"#86791e",thumbStrokeColor:"#756b24",thumbStrokeWidth:"2",bufferedColor:"#e4d67d",playedColor:"#86791e"},"#progressBar":{trackBgColor:"#f0e494"},"#volumeBar":{trackBgColor:"#e4d67d",volumeLevelColor:"#86791e"},"#volumeBarVertical":{thumbBgColor:"#86791e",thumbStrokeColor:"#756b24",thumbStrokeWidth:"1",trackBgColor:"#e4d67d",volumeLevelColor:"#86791e"},"#progressTimer":{color:"#523020",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#8b8030",rightColor:"#e9e298"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#bbac44"},"#overlayEmail":{iconColorOver:"#bbac44"},"#overlayGetLink":{iconColorOver:"#bbac44"},"#overlayShare":{iconColorOver:"#bbac44"},"#overlayHelp":{iconColorOver:"#bbac44"}},wine:{"#menuBar":{bgGradientTop:"#d10229",bgGradientBottom:"#71001a",borderColor:"#8d011e"},"#fullScreenButton, #transportEmailButton, #transportLinkButton, #transportShareButton, #transportHelpButton, #transportCcButton, #transportMobDubButton, #transportSummaryButton, #playPauseButton, #volumeButton, #volumeBarVertical, #toolBar":{bgColor:"#e45763",bgColorOver:"#ca0516"},".galleryButton":{iconColorOver:"#ca0516"},"#screenPlayButton":{bgColor:"#777777",bgColorOver:"#9d0121"},"#progressBar, #volumeBar":{thumbBgColor:"#7f011e",thumbStrokeColor:"#74001a",thumbStrokeWidth:"2",bufferedColor:"#e45b62",playedColor:"#5b131e"},"#progressBar":{trackBgColor:"#b01623"},"#volumeBar":{trackBgColor:"#e45b62",volumeLevelColor:"#d10229"},"#volumeBarVertical":{thumbBgColor:"#7f011e",thumbStrokeColor:"#74001a",thumbStrokeWidth:"1",trackBgColor:"#e45b62",volumeLevelColor:"#d10229"},"#progressTimer":{color:"#e45763",fontFamily:"Arial, Verdana, Times",fontSize:"10",fontWeight:"normal"},".divider":{leftColor:"#71001a",rightColor:"#d10229"},"#getLinkPane":{iconColor:"#8ec314"},"#emailPane":{iconColor:"#32a6dc"},"#sharePane":{iconColor:"#8a6dd6"},"#toolBarEmailButton":{iconColorOver:"#32a6dc"},"#toolBarLinkButton":{iconColorOver:"#8ec314"},"#toolBarShareButton":{iconColorOver:"#8a6dd6"},"#toolBarHelpButton":{iconColorOver:"#f1c600"},"#overlayPlayPauseButton, #overlayVolumeButton, #overlayFullScreenButton, #overlayCcButton":{iconColorOver:"#d10229"},"#overlayEmail":{iconColorOver:"#d10229"},"#overlayGetLink":{iconColorOver:"#d10229"},"#overlayShare":{iconColorOver:"#d10229"},"#overlayHelp":{iconColorOver:"#d10229"}}}};var wnDefaultPackage=new Object();wnDefaultPackage.WNUserUpload=new Object();wnDefaultPackage.WNUserUpload["dark"]=new Object();wnDefaultPackage.WNUserUpload["dark"].backgroundColors="595959";wnDefaultPackage.WNUserUpload["dark"].backgroundAlphas="100";wnDefaultPackage.WNUserUpload["dark"].backgroundRatios="0";wnDefaultPackage.WNUserUpload["dark"].backgroundRotation="90";wnDefaultPackage.WNUserUpload["dark"].dropShadowColor="212121";wnDefaultPackage.WNUserUpload["dark"].fontSize="10";wnDefaultPackage.WNUserUpload["dark"].highlightBorderColor="767676";wnDefaultPackage.WNUserUpload["dark"].shadowBorderColor="3c3c3c";wnDefaultPackage.WNUserUpload["dark"].hasBorder="false";wnDefaultPackage.WNUserUpload["dark"].hasBevel="true";wnDefaultPackage.WNUserUpload["dark"].hasDropShadow="false";wnDefaultPackage.WNUserUpload["dark"].borderColor="2d2d2d";wnDefaultPackage.WNUserUpload["dark"].shadowColor="333333";wnDefaultPackage.WNUserUpload["dark"].offFaceColor="dcdbdb";wnDefaultPackage.WNUserUpload["dark"].overFaceColor="ffffff";wnDefaultPackage.WNUserUpload["dark"].headerBarFontColor="ffffff";wnDefaultPackage.WNUserUpload["dark"].headerBarHasBevel="true";wnDefaultPackage.WNUserUpload["dark"].headerBarHasDropShadow="true";wnDefaultPackage.WNUserUpload["dark"].headerBarBackgroundColors="888888,383838";wnDefaultPackage.WNUserUpload["dark"].headerBarBackgroundAlphas="100,100";wnDefaultPackage.WNUserUpload["dark"].headerBarBackgroundRatios="0,250";wnDefaultPackage.WNUserUpload["dark"].headerBarBackgroundRotation="90";wnDefaultPackage.WNUserUpload["dark"].headerBarHeight="25";wnDefaultPackage.WNUserUpload["dark"].headerDropShadowColor="212121";wnDefaultPackage.WNUserUpload["dark"].helpBarBorderColor="212121";wnDefaultPackage.WNUserUpload["dark"].helpBarHasBevel="true";wnDefaultPackage.WNUserUpload["dark"].helpBarHasDropShadow="false";wnDefaultPackage.WNUserUpload["dark"].helpBarHasBorder="false";wnDefaultPackage.WNUserUpload["dark"].helpBarBackgroundColors="888888,383838";wnDefaultPackage.WNUserUpload["dark"].helpBarBackgroundAlphas="100,100";wnDefaultPackage.WNUserUpload["dark"].helpBarBackgroundRatios="0,250";wnDefaultPackage.WNUserUpload["dark"].helpBarBackgroundRotation="90";wnDefaultPackage.WNUserUpload["dark"].headerDropShadowColor="212121";wnDefaultPackage.WNUserUpload["dark"].helpBarBorderAlpha="100";wnDefaultPackage.WNUserUpload["dark"].helpBarBorderWidth="1";wnDefaultPackage.WNUserUpload["dark"].helpBarHeight="40";wnDefaultPackage.WNUserUpload["dark"].formFieldColors="393939";wnDefaultPackage.WNUserUpload["dark"].formFieldAlphas="100";wnDefaultPackage.WNUserUpload["dark"].formFieldRatios="0";wnDefaultPackage.WNUserUpload["dark"].formFieldHasBorder="true";wnDefaultPackage.WNUserUpload["dark"].formFieldBorderColor="6c6c6c";wnDefaultPackage.WNUserUpload["dark"].formFieldBorderWidth="1";wnDefaultPackage.WNUserUpload["dark"].formFieldBorderAlpha="100";wnDefaultPackage.WNUserUpload["dark"].formTextColor="ffffff";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonBackgroundColors="888888,383838";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonOverBorderColor="212121";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonBackgroundAlphas="100,100";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonBackgroundRatios="75,255";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonBackgroundRotation="90";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonBackgroundSelectedColors="595959,212121";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonBackgroundSelectedAlphas="100,100";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonBackgroundSelectedRatios="0,100";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonBackgroundSelectedHasBevel="true";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonBackgroundSelectedHasBorder="false";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonBackgroundSelectedBorderAlpha="100";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonBackgroundSelectedBorderWidth="1";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonBackgroundSelectedBorderColor="595959";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonBackgroundSelectedHasDropShadow="true";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonBackgroundOverColors="888888,383838";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonBackgroundOverAlphas="100,100";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonBackgroundOverRatios="75,255";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonOverHasDropBevel="true";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonOverHasDropShadow="true";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonOffFaceColor="dcdbdb";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonOverFaceColor="ffffff";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonLeftBorderColor="a7a6a6";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonRightBorderColor="404040";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonHasBevel="true";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonHasDropShadow="true";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonHasBorder="false";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonBorderWidth="1";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonBorderAlpha="100";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonBorderColor="212121";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonShadowColor="333333";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonOverHasBevel="true";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonOverHasBorder="false";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonOverBorderAlpha="100";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonOverBorderWidth="1";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonLeftInnerBorderColor="444444";wnDefaultPackage.WNUserUpload["dark"].dropDownButtonRightInnerBorderColor="6d6d6d";wnDefaultPackage.WNUserUpload["dark"].dropDownListBackgroundColors="212121,676767,676767,212121";wnDefaultPackage.WNUserUpload["dark"].dropDownListBackgroundAlphas="100,100,100,100";wnDefaultPackage.WNUserUpload["dark"].dropDownListBackgroundRatios="0,90,150,255";wnDefaultPackage.WNUserUpload["dark"].dropDownListHasBorder="false";wnDefaultPackage.WNUserUpload["dark"].dropDownListBorderColor="212121";wnDefaultPackage.WNUserUpload["dark"].dropDownListDropShadowColor="212121";wnDefaultPackage.WNUserUpload["dark"].dropDownListOffFaceColor="afaeae";wnDefaultPackage.WNUserUpload["dark"].dropDownListOverFaceColor="ffffff";wnDefaultPackage.WNUserUpload["dark"].dropDownListSelectedFaceColor="dbdbdb";wnDefaultPackage.WNUserUpload["dark"].dropDownListTopBorderColor="7d7d7d";wnDefaultPackage.WNUserUpload["dark"].dropDownListBottomBorderColor="434242";wnDefaultPackage.WNUserUpload["dark"].dropDownListBorderAlpha="100";wnDefaultPackage.WNUserUpload["dark"].dropDownListBorderWidth="1";wnDefaultPackage.WNUserUpload["dark"].dropDownListHasDropShadow="true";wnDefaultPackage.WNUserUpload["dark"].checkBoxWidth="13";wnDefaultPackage.WNUserUpload["dark"].checkBoxHeight="13";wnDefaultPackage.WNUserUpload["dark"].checkBoxBgColor="ffffff";wnDefaultPackage.WNUserUpload["dark"].checkBoxBorderColor="5ca4fe";wnDefaultPackage.WNUserUpload["dark"].checkColor="fe0101";wnDefaultPackage.WNUserUpload["dark"].checkBoxText="";wnDefaultPackage.WNUserUpload["dark"].checkBoxHyperlinkText="";wnDefaultPackage.WNUserUpload["dark"].checkBoxHyperlinkOffColor="5ca4fe";wnDefaultPackage.WNUserUpload["dark"].checkBoxHyperlinkOverColor="ffffff";wnDefaultPackage.WNVideoCanvas=new Object();wnDefaultPackage.WNVideoCanvas["dark"]=new Object();wnDefaultPackage.WNVideoCanvas["dark"].offFaceColor="afaeae";wnDefaultPackage.WNVideoCanvas["dark"].overFaceColor="ffffff";wnDefaultPackage.WNVideoCanvas["dark"].backgroundColors="212121,676767,676767,212121";wnDefaultPackage.WNVideoCanvas["dark"].backgroundAlphas="100,100,100,100";wnDefaultPackage.WNVideoCanvas["dark"].backgroundRatios="0,25,130,255";wnDefaultPackage.WNVideoCanvas["dark"].backgroundRotation="270";wnDefaultPackage.WNVideoCanvas["dark"].borderColor="212121";wnDefaultPackage.WNVideoCanvas["dark"].borderWidth="1";wnDefaultPackage.WNVideoCanvas["dark"].borderAlpha="100";wnDefaultPackage.WNVideoCanvas["dark"].sidePadding="3";wnDefaultPackage.WNVideoCanvas["dark"].topPadding="3";wnDefaultPackage.WNVideoCanvas["dark"].controlsHeight="40";wnDefaultPackage.WNVideoCanvas["dark"].controlsBackgroundColors="212121,676767";wnDefaultPackage.WNVideoCanvas["dark"].controlsBackgroundAlphas="100,100";wnDefaultPackage.WNVideoCanvas["dark"].controlsBackgroundRatios="0,255";wnDefaultPackage.WNVideoCanvas["dark"].controlsBackgroundRotation="270";wnDefaultPackage.WNVideoCanvas["dark"].controlsBorderColor="212121";wnDefaultPackage.WNVideoCanvas["dark"].controlsButtonLeftBorderColor="616161";wnDefaultPackage.WNVideoCanvas["dark"].controlsButtonRightBorderColor="232323";wnDefaultPackage.WNVideoCanvas["dark"].controlsOverFaceColor="ffffff";wnDefaultPackage.WNVideoCanvas["dark"].controlsOffFaceColor="9c9c9c";wnDefaultPackage.WNVideoCanvas["dark"].controlsBottomPadding="8";wnDefaultPackage.WNVideoCanvas["dark"].controlsSidePadding="8";wnDefaultPackage.WNVideoCanvas["dark"].volumeSliderOffColor="5a5a5a";wnDefaultPackage.WNVideoCanvas["dark"].volumeSliderOverColor="828282";wnDefaultPackage.WNVideoCanvas["dark"].videoSliderBackgroundColor="828282";wnDefaultPackage.WNVideoCanvas["dark"].videoSliderLoadIndicatorColor="b2b2b2";wnDefaultPackage.WNVideoCanvas["dark"].videoSliderProgressIndicatorColor="212121";wnDefaultPackage.WNVideoCanvas["dark"].videoSliderKnobBackgroundColors="828282,828282";wnDefaultPackage.WNVideoCanvas["dark"].videoSliderKnobBackgroundAlphas="100,100";wnDefaultPackage.WNVideoCanvas["dark"].videoSliderKnobBackgroundRatios="0,255";wnDefaultPackage.WNVideoCanvas["dark"].videoSliderKnobBackgroundRotation="90";wnDefaultPackage.WNVideoCanvas["dark"].videoSliderKnobBorderColor="5a5a5a";wnDefaultPackage.WNVideoCanvas["dark"].videoSliderKnobShadowColor="5a5a5a";wnDefaultPackage.WNVideoCanvas["dark"].videoSliderKnobOffFaceColor="444444";wnDefaultPackage.WNVideoCanvas["dark"].videoSliderKnobOverFaceColor="212121";wnDefaultPackage.WNVideoCanvas["dark"].overlayBackgroundColors="676767";wnDefaultPackage.WNVideoCanvas["dark"].overlayBackgroundAlphas="92";wnDefaultPackage.WNVideoCanvas["dark"].overlayBackgroundRatios="0";wnDefaultPackage.WNVideoCanvas["dark"].overlayBackgroundRotation="90";wnDefaultPackage.WNVideoCanvas["dark"].overlayOffFaceColor="9c9c9c";wnDefaultPackage.WNVideoCanvas["dark"].overlayOverFaceColor="ffffff";wnDefaultPackage.WNVideoCanvas["dark"].emailInputFaceColor="9c9c9c";wnDefaultPackage.WNVideoCanvas["dark"].emailFormFieldColors="212121";wnDefaultPackage.WNVideoCanvas["dark"].emailFormFieldAlphas="80";wnDefaultPackage.WNVideoCanvas["dark"].emailFormFieldRatios="0";wnDefaultPackage.WNVideoCanvas["dark"].emailFormFieldRotation="90";wnDefaultPackage.WNVideoCanvas["dark"].emailErrorMessageFaceColor="ae1a01";wnDefaultPackage.WNVideoCanvas["dark"].emailErrorBorderColor="ae1a01";wnDefaultPackage.WNVideoCanvas["dark"].hasBorder="false";wnDefaultPackage.WNVideoCanvas["dark"].hasTopBorder="true";wnDefaultPackage.WNVideoCanvas["dark"].hasBottomBorder="true";wnDefaultPackage.WNVideoCanvas["dark"].hasLeftBorder="true";wnDefaultPackage.WNVideoCanvas["dark"].hasRightBorder="true";wnDefaultPackage.WNVideoCanvas["dark"].hasBevel="true";wnDefaultPackage.WNVideoCanvas["dark"].shareListItemOffFaceColor="afaeae";wnDefaultPackage.WNVideoCanvas["dark"].shareListListItemOverFaceColor="afaeae";wnDefaultPackage.WNVideoCanvas["dark"].shareListItemHighlightBorderColor="767676";wnDefaultPackage.WNVideoCanvas["dark"].shareListItemShadowBorderColor="3c3c3c";wnDefaultPackage.WNVideoCanvas["dark"].tabBackgroundColors="888888,383838";wnDefaultPackage.WNVideoCanvas["dark"].tabBackgroundAlphas="100,100";wnDefaultPackage.WNVideoCanvas["dark"].tabBackgroundRatios="75,255";wnDefaultPackage.WNVideoCanvas["dark"].tabBackgroundRotation="90";wnDefaultPackage.WNVideoCanvas["dark"].tabBackgroundSelectedColors="595959";wnDefaultPackage.WNVideoCanvas["dark"].tabBackgroundSelectedAlphas="100";wnDefaultPackage.WNVideoCanvas["dark"].tabBackgroundSelectedRatios="0";wnDefaultPackage.WNVideoCanvas["dark"].tabBackgroundSelectedHasBevel="true";wnDefaultPackage.WNVideoCanvas["dark"].tabBackgroundSelectedHasBorder="false";wnDefaultPackage.WNVideoCanvas["dark"].tabBackgroundSelectedBorderAlpha="100";wnDefaultPackage.WNVideoCanvas["dark"].tabBackgroundSelectedBorderWidth="1";wnDefaultPackage.WNVideoCanvas["dark"].tabBackgroundSelectedBorderColor="595959";wnDefaultPackage.WNVideoCanvas["dark"].tabBackgroundSelectedHasDropShadow="true";wnDefaultPackage.WNVideoCanvas["dark"].tabBackgroundOverColors="595959,212121";wnDefaultPackage.WNVideoCanvas["dark"].tabBackgroundOverAlphas="100,100";wnDefaultPackage.WNVideoCanvas["dark"].tabBackgroundOverRatios="0,100";wnDefaultPackage.WNVideoCanvas["dark"].tabOffFaceColor="dcdbdb";wnDefaultPackage.WNVideoCanvas["dark"].tabOverFaceColor="ffffff";wnDefaultPackage.WNVideoCanvas["dark"].tabLeftBorderColor="a7a6a6";wnDefaultPackage.WNVideoCanvas["dark"].tabRightBorderColor="404040";wnDefaultPackage.WNVideoCanvas["dark"].tabHasBevel="true";wnDefaultPackage.WNVideoCanvas["dark"].tabHasDropShadow="true";wnDefaultPackage.WNVideoCanvas["dark"].tabHasBorder="false";wnDefaultPackage.WNVideoCanvas["dark"].tabBorderWidth="1";wnDefaultPackage.WNVideoCanvas["dark"].tabBorderAlpha="100";wnDefaultPackage.WNVideoCanvas["dark"].tabBorderColor="212121";wnDefaultPackage.WNVideoCanvas["dark"].tabShadowColor="333333";wnDefaultPackage.WNVideoCanvas["dark"].tabOverHasBevel="true";wnDefaultPackage.WNVideoCanvas["dark"].tabOverHasBorder="false";wnDefaultPackage.WNVideoCanvas["dark"].tabOverBorderAlpha="100";wnDefaultPackage.WNVideoCanvas["dark"].tabOverBorderWidth="1";wnDefaultPackage.WNVideoCanvas["light"]=new Object();wnDefaultPackage.WNVideoCanvas["light"].offFaceColor="747373";wnDefaultPackage.WNVideoCanvas["light"].overFaceColor="ffffff";wnDefaultPackage.WNVideoCanvas["light"].backgroundColors="797978,cdcdcd,cdcdcd,797978";wnDefaultPackage.WNVideoCanvas["light"].backgroundAlphas="100,100,100,100";wnDefaultPackage.WNVideoCanvas["light"].backgroundRatios="0,25,130,255";wnDefaultPackage.WNVideoCanvas["light"].backgroundRotation="270";wnDefaultPackage.WNVideoCanvas["light"].borderColor="797978";wnDefaultPackage.WNVideoCanvas["light"].borderWidth="1";wnDefaultPackage.WNVideoCanvas["light"].borderAlpha="100";wnDefaultPackage.WNVideoCanvas["light"].sidePadding="3";wnDefaultPackage.WNVideoCanvas["light"].topPadding="3";wnDefaultPackage.WNVideoCanvas["light"].controlsHeight="40";wnDefaultPackage.WNVideoCanvas["light"].controlsBackgroundColors="797978,cdcdcd";wnDefaultPackage.WNVideoCanvas["light"].controlsBackgroundAlphas="100,100";wnDefaultPackage.WNVideoCanvas["light"].controlsBackgroundRatios="0,255";wnDefaultPackage.WNVideoCanvas["light"].controlsBackgroundRotation="270";wnDefaultPackage.WNVideoCanvas["light"].controlsButtonLeftBorderColor="c7c7c7";wnDefaultPackage.WNVideoCanvas["light"].controlsButtonRightBorderColor="656464";wnDefaultPackage.WNVideoCanvas["light"].controlsOverFaceColor="ffffff";wnDefaultPackage.WNVideoCanvas["light"].controlsOffFaceColor="454444";wnDefaultPackage.WNVideoCanvas["light"].controlsBottomPadding="8";wnDefaultPackage.WNVideoCanvas["light"].controlsSidePadding="8";wnDefaultPackage.WNVideoCanvas["light"].volumeSliderOffColor="828282";wnDefaultPackage.WNVideoCanvas["light"].volumeSliderOverColor="555454";wnDefaultPackage.WNVideoCanvas["light"].videoSliderBackgroundColor="929292";wnDefaultPackage.WNVideoCanvas["light"].videoSliderLoadIndicatorColor="6a6a6a";wnDefaultPackage.WNVideoCanvas["light"].videoSliderProgressIndicatorColor="454444";wnDefaultPackage.WNVideoCanvas["light"].videoSliderKnobBackgroundColors="a6a5a7,a6a5a7";wnDefaultPackage.WNVideoCanvas["light"].videoSliderKnobBackgroundAlphas="100,100";wnDefaultPackage.WNVideoCanvas["light"].videoSliderKnobBackgroundRatios="0,255";wnDefaultPackage.WNVideoCanvas["light"].videoSliderKnobBackgroundRotation="90";wnDefaultPackage.WNVideoCanvas["light"].videoSliderKnobBorderColor="959495";wnDefaultPackage.WNVideoCanvas["light"].videoSliderKnobShadowColor="5a5a5a";wnDefaultPackage.WNVideoCanvas["light"].videoSliderKnobOffFaceColor="444444";wnDefaultPackage.WNVideoCanvas["light"].videoSliderKnobOverFaceColor="212121";wnDefaultPackage.WNVideoCanvas["light"].overlayBackgroundColors="b6b6b5";wnDefaultPackage.WNVideoCanvas["light"].overlayBackgroundAlphas="92";wnDefaultPackage.WNVideoCanvas["light"].overlayBackgroundRatios="0";wnDefaultPackage.WNVideoCanvas["light"].overlayBackgroundRotation="90";wnDefaultPackage.WNVideoCanvas["light"].overlayOffFaceColor="454444";wnDefaultPackage.WNVideoCanvas["light"].overlayOverFaceColor="ffffff";wnDefaultPackage.WNVideoCanvas["light"].emailInputFaceColor="454444";wnDefaultPackage.WNVideoCanvas["light"].emailFormFieldColors="dddee0";wnDefaultPackage.WNVideoCanvas["light"].emailFormFieldAlphas="80";wnDefaultPackage.WNVideoCanvas["light"].emailFormFieldRatios="0";wnDefaultPackage.WNVideoCanvas["light"].emailFormFieldRotation="90";wnDefaultPackage.WNVideoCanvas["light"].emailErrorMessageFaceColor="ae1a01";wnDefaultPackage.WNVideoCanvas["light"].emailErrorBorderColor="ae1a01";wnDefaultPackage.WNVideoCanvas["light"].hasBorder="false";wnDefaultPackage.WNVideoCanvas["light"].hasTopBorder="true";wnDefaultPackage.WNVideoCanvas["light"].hasBottomBorder="true";wnDefaultPackage.WNVideoCanvas["light"].hasLeftBorder="true";wnDefaultPackage.WNVideoCanvas["light"].hasRightBorder="true";wnDefaultPackage.WNVideoCanvas["light"].hasBevel="true";wnDefaultPackage.WNVideoCanvas["light"].shareListItemOffFaceColor="3d3d3d";wnDefaultPackage.WNVideoCanvas["light"].shareListListItemOverFaceColor="3d3d3d";wnDefaultPackage.WNVideoCanvas["light"].shareListItemHighlightBorderColor="eeeeee";wnDefaultPackage.WNVideoCanvas["light"].shareListItemShadowBorderColor="b1b0b0";wnDefaultPackage.WNVideoCanvas["light"].tabBackgroundColors="d9d9d9,959494";wnDefaultPackage.WNVideoCanvas["light"].tabBackgroundAlphas="100,100";wnDefaultPackage.WNVideoCanvas["light"].tabBackgroundRatios="75,255";wnDefaultPackage.WNVideoCanvas["light"].tabBackgroundRotation="90";wnDefaultPackage.WNVideoCanvas["light"].tabBackgroundSelectedColors="e0e0e0";wnDefaultPackage.WNVideoCanvas["light"].tabBackgroundSelectedAlphas="100";wnDefaultPackage.WNVideoCanvas["light"].tabBackgroundSelectedRatios="0";wnDefaultPackage.WNVideoCanvas["light"].tabBackgroundSelectedHasBevel="true";wnDefaultPackage.WNVideoCanvas["light"].tabBackgroundSelectedHasBorder="false";wnDefaultPackage.WNVideoCanvas["light"].tabBackgroundSelectedBorderAlpha="100";wnDefaultPackage.WNVideoCanvas["light"].tabBackgroundSelectedBorderWidth="1";wnDefaultPackage.WNVideoCanvas["light"].tabBackgroundSelectedBorderColor="e0e0e0";wnDefaultPackage.WNVideoCanvas["light"].tabBackgroundSelectedHasDropShadow="true";wnDefaultPackage.WNVideoCanvas["light"].tabBackgroundOverColors="929291,9c9c9b";wnDefaultPackage.WNVideoCanvas["light"].tabBackgroundOverAlphas="100,100";wnDefaultPackage.WNVideoCanvas["light"].tabBackgroundOverRatios="0,100";wnDefaultPackage.WNVideoCanvas["light"].tabOffFaceColor="3d3d3d";wnDefaultPackage.WNVideoCanvas["light"].tabOverFaceColor="ffffff";wnDefaultPackage.WNVideoCanvas["light"].tabLeftBorderColor="e5e5e5";wnDefaultPackage.WNVideoCanvas["light"].tabRightBorderColor="868686";wnDefaultPackage.WNVideoCanvas["light"].tabHasBevel="true";wnDefaultPackage.WNVideoCanvas["light"].tabHasDropShadow="true";wnDefaultPackage.WNVideoCanvas["light"].tabHasBorder="false";wnDefaultPackage.WNVideoCanvas["light"].tabBorderWidth="1";wnDefaultPackage.WNVideoCanvas["light"].tabBorderAlpha="100";wnDefaultPackage.WNVideoCanvas["light"].tabBorderColor="959494";wnDefaultPackage.WNVideoCanvas["light"].tabShadowColor="333333";wnDefaultPackage.WNVideoCanvas["light"].tabOverHasBevel="true";wnDefaultPackage.WNVideoCanvas["light"].tabOverHasBorder="false";wnDefaultPackage.WNVideoCanvas["light"].tabOverBorderAlpha="100";wnDefaultPackage.WNVideoCanvas["light"].tabOverBorderWidth="1";wnDefaultPackage.WNVideoCanvas["flatlight"]=new Object();wnDefaultPackage.WNVideoCanvas["flatlight"].offFaceColor="828282";wnDefaultPackage.WNVideoCanvas["flatlight"].overFaceColor="454444";wnDefaultPackage.WNVideoCanvas["flatlight"].backgroundColors="eeeeee,eeeeee,eeeeee,eeeeee";wnDefaultPackage.WNVideoCanvas["flatlight"].backgroundAlphas="100,100,100,100";wnDefaultPackage.WNVideoCanvas["flatlight"].backgroundRatios="0,25,130,255";wnDefaultPackage.WNVideoCanvas["flatlight"].backgroundRotation="270";wnDefaultPackage.WNVideoCanvas["flatlight"].borderColor="aaaaaa";wnDefaultPackage.WNVideoCanvas["flatlight"].borderWidth="1";wnDefaultPackage.WNVideoCanvas["flatlight"].borderAlpha="100";wnDefaultPackage.WNVideoCanvas["flatlight"].sidePadding="3";wnDefaultPackage.WNVideoCanvas["flatlight"].topPadding="3";wnDefaultPackage.WNVideoCanvas["flatlight"].controlsHeight="40";wnDefaultPackage.WNVideoCanvas["flatlight"].controlsBackgroundColors="eeeeee,eeeeee";wnDefaultPackage.WNVideoCanvas["flatlight"].controlsBackgroundAlphas="100,100";wnDefaultPackage.WNVideoCanvas["flatlight"].controlsBackgroundRatios="0,255";wnDefaultPackage.WNVideoCanvas["flatlight"].controlsBackgroundRotation="270";wnDefaultPackage.WNVideoCanvas["flatlight"].controlsButtonLeftBorderColor="c7c7c7";wnDefaultPackage.WNVideoCanvas["flatlight"].controlsButtonRightBorderColor="656464";wnDefaultPackage.WNVideoCanvas["flatlight"].controlsOverFaceColor="454444";wnDefaultPackage.WNVideoCanvas["flatlight"].controlsOffFaceColor="828282";wnDefaultPackage.WNVideoCanvas["flatlight"].controlsBottomPadding="8";wnDefaultPackage.WNVideoCanvas["flatlight"].controlsSidePadding="8";wnDefaultPackage.WNVideoCanvas["flatlight"].volumeSliderOffColor="cccccc";wnDefaultPackage.WNVideoCanvas["flatlight"].volumeSliderOverColor="828282";wnDefaultPackage.WNVideoCanvas["flatlight"].videoSliderBackgroundColor="cccccc";wnDefaultPackage.WNVideoCanvas["flatlight"].videoSliderLoadIndicatorColor="828282";wnDefaultPackage.WNVideoCanvas["flatlight"].videoSliderProgressIndicatorColor="454444";wnDefaultPackage.WNVideoCanvas["flatlight"].videoSliderKnobBackgroundColors="cccccc,cccccc";wnDefaultPackage.WNVideoCanvas["flatlight"].videoSliderKnobBackgroundAlphas="100,100";wnDefaultPackage.WNVideoCanvas["flatlight"].videoSliderKnobBackgroundRatios="0,255";wnDefaultPackage.WNVideoCanvas["flatlight"].videoSliderKnobBackgroundRotation="90";wnDefaultPackage.WNVideoCanvas["flatlight"].videoSliderKnobBorderColor="959495";wnDefaultPackage.WNVideoCanvas["flatlight"].videoSliderKnobShadowColor="5a5a5a";wnDefaultPackage.WNVideoCanvas["flatlight"].videoSliderKnobOffFaceColor="444444";wnDefaultPackage.WNVideoCanvas["flatlight"].videoSliderKnobOverFaceColor="212121";wnDefaultPackage.WNVideoCanvas["flatlight"].overlayBackgroundColors="b6b6b5";wnDefaultPackage.WNVideoCanvas["flatlight"].overlayBackgroundAlphas="92";wnDefaultPackage.WNVideoCanvas["flatlight"].overlayBackgroundRatios="0";wnDefaultPackage.WNVideoCanvas["flatlight"].overlayBackgroundRotation="90";wnDefaultPackage.WNVideoCanvas["flatlight"].overlayOffFaceColor="454444";wnDefaultPackage.WNVideoCanvas["flatlight"].overlayOverFaceColor="ffffff";wnDefaultPackage.WNVideoCanvas["flatlight"].emailInputFaceColor="454444";wnDefaultPackage.WNVideoCanvas["flatlight"].emailFormFieldColors="dddee0";wnDefaultPackage.WNVideoCanvas["flatlight"].emailFormFieldAlphas="80";wnDefaultPackage.WNVideoCanvas["flatlight"].emailFormFieldRatios="0";wnDefaultPackage.WNVideoCanvas["flatlight"].emailFormFieldRotation="90";wnDefaultPackage.WNVideoCanvas["flatlight"].emailErrorMessageFaceColor="ae1a01";wnDefaultPackage.WNVideoCanvas["flatlight"].emailErrorBorderColor="ae1a01";wnDefaultPackage.WNVideoCanvas["flatlight"].hasBorder="true";wnDefaultPackage.WNVideoCanvas["flatlight"].hasTopBorder="true";wnDefaultPackage.WNVideoCanvas["flatlight"].hasBottomBorder="true";wnDefaultPackage.WNVideoCanvas["flatlight"].hasLeftBorder="true";wnDefaultPackage.WNVideoCanvas["flatlight"].hasRightBorder="true";wnDefaultPackage.WNVideoCanvas["flatlight"].hasBevel="false";wnDefaultPackage.WNVideoCanvas["flatlight"].shareListItemOffFaceColor="828282";wnDefaultPackage.WNVideoCanvas["flatlight"].shareListListItemOverFaceColor="828282";wnDefaultPackage.WNVideoCanvas["flatlight"].shareListItemHighlightBorderColor="ffffff";wnDefaultPackage.WNVideoCanvas["flatlight"].shareListItemShadowBorderColor="b1b0b0";wnDefaultPackage.WNVideoCanvas["flatlight"].tabBackgroundColors="e6e6e6,e6e6e6";wnDefaultPackage.WNVideoCanvas["flatlight"].tabBackgroundAlphas="100,100";wnDefaultPackage.WNVideoCanvas["flatlight"].tabBackgroundRatios="75,255";wnDefaultPackage.WNVideoCanvas["flatlight"].tabBackgroundRotation="90";wnDefaultPackage.WNVideoCanvas["flatlight"].tabBackgroundSelectedColors="eeeeee";wnDefaultPackage.WNVideoCanvas["flatlight"].tabBackgroundSelectedAlphas="100";wnDefaultPackage.WNVideoCanvas["flatlight"].tabBackgroundSelectedRatios="0";wnDefaultPackage.WNVideoCanvas["flatlight"].tabBackgroundSelectedHasBevel="false";wnDefaultPackage.WNVideoCanvas["flatlight"].tabBackgroundSelectedHasBorder="true";wnDefaultPackage.WNVideoCanvas["flatlight"].tabBackgroundSelectedBorderAlpha="100";wnDefaultPackage.WNVideoCanvas["flatlight"].tabBackgroundSelectedBorderWidth="1";wnDefaultPackage.WNVideoCanvas["flatlight"].tabBackgroundSelectedBorderColor="aaaaaa";wnDefaultPackage.WNVideoCanvas["flatlight"].tabBackgroundSelectedHasDropShadow="false";wnDefaultPackage.WNVideoCanvas["flatlight"].tabBackgroundOverColors="eeeeee,eeeeee";wnDefaultPackage.WNVideoCanvas["flatlight"].tabBackgroundOverAlphas="100,100";wnDefaultPackage.WNVideoCanvas["flatlight"].tabBackgroundOverRatios="0,100";wnDefaultPackage.WNVideoCanvas["flatlight"].tabOffFaceColor="828282";wnDefaultPackage.WNVideoCanvas["flatlight"].tabOverFaceColor="454444";wnDefaultPackage.WNVideoCanvas["flatlight"].tabLeftBorderColor="e5e5e5";wnDefaultPackage.WNVideoCanvas["flatlight"].tabRightBorderColor="868686";wnDefaultPackage.WNVideoCanvas["flatlight"].tabHasBevel="false";wnDefaultPackage.WNVideoCanvas["flatlight"].tabHasDropShadow="false";wnDefaultPackage.WNVideoCanvas["flatlight"].tabHasBorder="true";wnDefaultPackage.WNVideoCanvas["flatlight"].tabBorderWidth="1";wnDefaultPackage.WNVideoCanvas["flatlight"].tabBorderAlpha="100";wnDefaultPackage.WNVideoCanvas["flatlight"].tabBorderColor="aaaaaa";wnDefaultPackage.WNVideoCanvas["flatlight"].tabShadowColor="333333";wnDefaultPackage.WNVideoCanvas["flatlight"].tabOverHasBevel="false";wnDefaultPackage.WNVideoCanvas["flatlight"].tabOverHasBorder="true";wnDefaultPackage.WNVideoCanvas["flatlight"].tabOverBorderAlpha="100";wnDefaultPackage.WNVideoCanvas["flatlight"].tabOverBorderWidth="1";wnDefaultPackage.WNGallery=new Object();wnDefaultPackage.WNGallery["dark"]=new Object();wnDefaultPackage.WNGallery["dark"].offFaceColor="afaeae";wnDefaultPackage.WNGallery["dark"].overFaceColor="ffffff";wnDefaultPackage.WNGallery["dark"].selectedFaceColor="dcdbdb";wnDefaultPackage.WNGallery["dark"].tabBackgroundColors="888888,383838";wnDefaultPackage.WNGallery["dark"].dropDownTabOverBorderColor="212121";wnDefaultPackage.WNGallery["dark"].tabBackgroundAlphas="100,100";wnDefaultPackage.WNGallery["dark"].tabBackgroundRatios="75,255";wnDefaultPackage.WNGallery["dark"].tabBackgroundRotation="90";wnDefaultPackage.WNGallery["dark"].tabBackgroundSelectedColors="595959";wnDefaultPackage.WNGallery["dark"].tabBackgroundSelectedAlphas="100";wnDefaultPackage.WNGallery["dark"].tabBackgroundSelectedRatios="0";wnDefaultPackage.WNGallery["dark"].tabBackgroundSelectedHasBevel="true";wnDefaultPackage.WNGallery["dark"].tabBackgroundSelectedHasBorder="false";wnDefaultPackage.WNGallery["dark"].tabBackgroundSelectedBorderAlpha="100";wnDefaultPackage.WNGallery["dark"].tabBackgroundSelectedBorderWidth="1";wnDefaultPackage.WNGallery["dark"].tabBackgroundSelectedBorderColor="595959";wnDefaultPackage.WNGallery["dark"].tabBackgroundSelectedHasDropShadow="true";wnDefaultPackage.WNGallery["dark"].tabBackgroundOverColors="595959,212121";wnDefaultPackage.WNGallery["dark"].tabBackgroundOverAlphas="100,100";wnDefaultPackage.WNGallery["dark"].tabBackgroundOverRatios="0,100";wnDefaultPackage.WNGallery["dark"].tabOffFaceColor="dcdbdb";wnDefaultPackage.WNGallery["dark"].tabOverFaceColor="ffffff";wnDefaultPackage.WNGallery["dark"].tabLeftBorderColor="a7a6a6";wnDefaultPackage.WNGallery["dark"].tabRightBorderColor="404040";wnDefaultPackage.WNGallery["dark"].tabHasBevel="true";wnDefaultPackage.WNGallery["dark"].tabHasDropShadow="true";wnDefaultPackage.WNGallery["dark"].tabHasBorder="false";wnDefaultPackage.WNGallery["dark"].tabBorderWidth="1";wnDefaultPackage.WNGallery["dark"].tabBorderAlpha="100";wnDefaultPackage.WNGallery["dark"].tabBorderColor="212121";wnDefaultPackage.WNGallery["dark"].tabShadowColor="333333";wnDefaultPackage.WNGallery["dark"].tabOverHasBevel="true";wnDefaultPackage.WNGallery["dark"].tabOverHasBorder="false";wnDefaultPackage.WNGallery["dark"].tabOverBorderAlpha="100";wnDefaultPackage.WNGallery["dark"].tabOverBorderWidth="1";wnDefaultPackage.WNGallery["dark"].dropDownBackgroundColors="212121,676767,676767,212121";wnDefaultPackage.WNGallery["dark"].dropDownBackgroundAlphas="100,100,100,100";wnDefaultPackage.WNGallery["dark"].dropDownBackgroundRatios="0,90,150,255";wnDefaultPackage.WNGallery["dark"].dropDownHasBorder="false";wnDefaultPackage.WNGallery["dark"].dropDownBorderColor="212121";wnDefaultPackage.WNGallery["dark"].dropDownDropShadowColor="212121";wnDefaultPackage.WNGallery["dark"].dropDownOffFaceColor="afaeae";wnDefaultPackage.WNGallery["dark"].dropDownOverFaceColor="ffffff";wnDefaultPackage.WNGallery["dark"].dropDownSelectedFaceColor="dbdbdb";wnDefaultPackage.WNGallery["dark"].dropDownTopBorderColor="7d7d7d";wnDefaultPackage.WNGallery["dark"].dropDownBottomBorderColor="434242";wnDefaultPackage.WNGallery["dark"].dropDownBorderAlpha="100";wnDefaultPackage.WNGallery["dark"].dropDownBorderWidth="1";wnDefaultPackage.WNGallery["dark"].dropDownHasDropShadow="true";wnDefaultPackage.WNGallery["dark"].videoListBackgroundColors="595959,666666";wnDefaultPackage.WNGallery["dark"].videoListBackgroundAlphas="100,100";wnDefaultPackage.WNGallery["dark"].videoListBackgroundRatios="75,255";wnDefaultPackage.WNGallery["dark"].videoListBackgroundRotation="90";wnDefaultPackage.WNGallery["dark"].videoListHasBevel="true";wnDefaultPackage.WNGallery["dark"].videoListHasBorder="false";wnDefaultPackage.WNGallery["dark"].videoListHasDropShadow="true";wnDefaultPackage.WNGallery["dark"].videoListBorderAlpha="100";wnDefaultPackage.WNGallery["dark"].videoListBorderWidth="1";wnDefaultPackage.WNGallery["dark"].videoListBorderColor="595959";wnDefaultPackage.WNGallery["dark"].videoListBackgroundDropShadowColor="333333";wnDefaultPackage.WNGallery["dark"].videoListItemOffFaceColor="afaeae";wnDefaultPackage.WNGallery["dark"].videoListItemOverFaceColor="afaeae";wnDefaultPackage.WNGallery["dark"].videoListItemImageIconOverColor="ffffff";wnDefaultPackage.WNGallery["dark"].videoListItemHighlightBorderColor="767676";wnDefaultPackage.WNGallery["dark"].videoListItemShadowBorderColor="3c3c3c";wnDefaultPackage.WNGallery["dark"].videoListNavigationBackgroundColors="666666,1a1a1a";wnDefaultPackage.WNGallery["dark"].videoListNavigationBackgroundAlphas="100,100";wnDefaultPackage.WNGallery["dark"].videoListNavigationBackgroundRatios="75,255";wnDefaultPackage.WNGallery["dark"].videoListNavigationBackgroundRotation="90";wnDefaultPackage.WNGallery["dark"].videoListNavigationHasBevel="true";wnDefaultPackage.WNGallery["dark"].videoListNavigationHasBorder="true";wnDefaultPackage.WNGallery["dark"].videoListNavigationHasDropShadow="true";wnDefaultPackage.WNGallery["dark"].videoListNavigationBorderColor="212121";wnDefaultPackage.WNGallery["dark"].videoListNavigationBorderWidth="1";wnDefaultPackage.WNGallery["dark"].videoListNavigationBorderAlpha="100";wnDefaultPackage.WNGallery["dark"].videoListNavigationDropShadowColor="333333";wnDefaultPackage.WNGallery["dark"].videoListNavigationOffFaceColor="282828";wnDefaultPackage.WNGallery["dark"].videoListNavigationOverFaceColor="ffffff";wnDefaultPackage.WNGallery["dark"].videoListNavigationSelectedFaceColor="9c9c9c";wnDefaultPackage.WNGallery["dark"].videoListNavigationHighlightBorderColor="7d7d7d";wnDefaultPackage.WNGallery["dark"].videoListNavigationShadowBorderColor="434242";wnDefaultPackage.WNGallery["dark"].videoListPageNumberOffColor="282828";wnDefaultPackage.WNGallery["dark"].videoListPageNumberOverColor="ffffff";wnDefaultPackage.WNGallery["dark"].videoListPageNumberSelectedColor="9c9c9c";wnDefaultPackage.WNGallery["dark"].searchBackgroundColors="656464,252525";wnDefaultPackage.WNGallery["dark"].searchBackgroundAlphas="100,100";wnDefaultPackage.WNGallery["dark"].searchBackgroundRatios="0,255";wnDefaultPackage.WNGallery["dark"].searchBackgroundRotation="90";wnDefaultPackage.WNGallery["dark"].searchOffFaceColor="afaeae";wnDefaultPackage.WNGallery["dark"].searchOverFaceColor="ffffff";wnDefaultPackage.WNGallery["dark"].searchLeftBorderColor="a7a6a6";wnDefaultPackage.WNGallery["dark"].searchRightBorderColor="404040";wnDefaultPackage.WNGallery["dark"].searchFormFaceColor="454444";wnDefaultPackage.WNGallery["dark"].searchFormBorderColor="b3b3b3";wnDefaultPackage.WNGallery["dark"].searchBorderColor="656464";wnDefaultPackage.WNGallery["dark"].searchHasBorder="false";wnDefaultPackage.WNGallery["dark"].searchHasBevel="true";wnDefaultPackage.WNGallery["dark"].searchHasDropShadow="false";wnDefaultPackage.WNGallery["dark"].searchDropShadowColor="333333";wnDefaultPackage.WNGallery["light"]=new Object();wnDefaultPackage.WNGallery["light"].offFaceColor="747373";wnDefaultPackage.WNGallery["light"].overFaceColor="ffffff";wnDefaultPackage.WNGallery["light"].selectedFaceColor="3d3d3d";wnDefaultPackage.WNGallery["light"].tabBackgroundColors="d9d9d9,959494";wnDefaultPackage.WNGallery["light"].dropDownTabOverBorderColor="e0e0e0";wnDefaultPackage.WNGallery["light"].tabBackgroundAlphas="100,100";wnDefaultPackage.WNGallery["light"].tabBackgroundRatios="75,255";wnDefaultPackage.WNGallery["light"].tabBackgroundRotation="90";wnDefaultPackage.WNGallery["light"].tabBackgroundSelectedColors="e0e0e0";wnDefaultPackage.WNGallery["light"].tabBackgroundSelectedAlphas="100";wnDefaultPackage.WNGallery["light"].tabBackgroundSelectedRatios="0";wnDefaultPackage.WNGallery["light"].tabBackgroundSelectedHasBevel="true";wnDefaultPackage.WNGallery["light"].tabBackgroundSelectedHasBorder="false";wnDefaultPackage.WNGallery["light"].tabBackgroundSelectedBorderAlpha="100";wnDefaultPackage.WNGallery["light"].tabBackgroundSelectedBorderWidth="1";wnDefaultPackage.WNGallery["light"].tabBackgroundSelectedBorderColor="e0e0e0";wnDefaultPackage.WNGallery["light"].tabBackgroundSelectedHasDropShadow="true";wnDefaultPackage.WNGallery["light"].tabBackgroundOverColors="929291,9c9c9b";wnDefaultPackage.WNGallery["light"].tabBackgroundOverAlphas="100,100";wnDefaultPackage.WNGallery["light"].tabBackgroundOverRatios="0,100";wnDefaultPackage.WNGallery["light"].tabOffFaceColor="3d3d3d";wnDefaultPackage.WNGallery["light"].tabOverFaceColor="ffffff";wnDefaultPackage.WNGallery["light"].tabLeftBorderColor="e5e5e5";wnDefaultPackage.WNGallery["light"].tabRightBorderColor="868686";wnDefaultPackage.WNGallery["light"].tabHasBevel="true";wnDefaultPackage.WNGallery["light"].tabHasDropShadow="true";wnDefaultPackage.WNGallery["light"].tabHasBorder="false";wnDefaultPackage.WNGallery["light"].tabBorderWidth="1";wnDefaultPackage.WNGallery["light"].tabBorderAlpha="100";wnDefaultPackage.WNGallery["light"].tabBorderColor="959494";wnDefaultPackage.WNGallery["light"].tabShadowColor="333333";wnDefaultPackage.WNGallery["light"].tabOverHasBevel="true";wnDefaultPackage.WNGallery["light"].tabOverHasBorder="false";wnDefaultPackage.WNGallery["light"].tabOverBorderAlpha="100";wnDefaultPackage.WNGallery["light"].tabOverBorderWidth="1";wnDefaultPackage.WNGallery["light"].dropDownBackgroundColors="9c9c9b,c4c3c3,afaeaf,9c9c9b";wnDefaultPackage.WNGallery["light"].dropDownBackgroundAlphas="100,100,100,100";wnDefaultPackage.WNGallery["light"].dropDownBackgroundRatios="0,90,150,255";wnDefaultPackage.WNGallery["light"].dropDownHasBorder="false";wnDefaultPackage.WNGallery["light"].dropDownBorderColor="9c9c9b";wnDefaultPackage.WNGallery["light"].dropDownDropShadowColor="7b7b7b";wnDefaultPackage.WNGallery["light"].dropDownOffFaceColor="3d3d3d";wnDefaultPackage.WNGallery["light"].dropDownOverFaceColor="ffffff";wnDefaultPackage.WNGallery["light"].dropDownSelectedFaceColor="ffffff";wnDefaultPackage.WNGallery["light"].dropDownTopBorderColor="d3d2d3";wnDefaultPackage.WNGallery["light"].dropDownBottomBorderColor="919091";wnDefaultPackage.WNGallery["light"].dropDownBorderAlpha="100";wnDefaultPackage.WNGallery["light"].dropDownBorderWidth="1";wnDefaultPackage.WNGallery["light"].dropDownHasDropShadow="true";wnDefaultPackage.WNGallery["light"].videoListBackgroundColors="e0e0e0,dcdcdc";wnDefaultPackage.WNGallery["light"].videoListBackgroundAlphas="100,100";wnDefaultPackage.WNGallery["light"].videoListBackgroundRatios="75,255";wnDefaultPackage.WNGallery["light"].videoListBackgroundRotation="90";wnDefaultPackage.WNGallery["light"].videoListHasBevel="true";wnDefaultPackage.WNGallery["light"].videoListHasBorder="false";wnDefaultPackage.WNGallery["light"].videoListHasDropShadow="true";wnDefaultPackage.WNGallery["light"].videoListBorderAlpha="100";wnDefaultPackage.WNGallery["light"].videoListBorderWidth="1";wnDefaultPackage.WNGallery["light"].videoListBorderColor="e0e0e0";wnDefaultPackage.WNGallery["light"].videoListBackgroundDropShadowColor="333333";wnDefaultPackage.WNGallery["light"].videoListNavigationHasBevel="true";wnDefaultPackage.WNGallery["light"].videoListNavigationHasBorder="true";wnDefaultPackage.WNGallery["light"].videoListNavigationHasDropShadow="true";wnDefaultPackage.WNGallery["light"].videoListItemOffFaceColor="3d3d3d";wnDefaultPackage.WNGallery["light"].videoListItemOverFaceColor="3d3d3d";wnDefaultPackage.WNGallery["light"].videoListItemImageIconOverColor="ffffff";wnDefaultPackage.WNGallery["light"].videoListItemHighlightBorderColor="eeeeee";wnDefaultPackage.WNGallery["light"].videoListItemShadowBorderColor="b1b0b0";wnDefaultPackage.WNGallery["light"].videoListNavigationBackgroundColors="d9d9d9,959494";wnDefaultPackage.WNGallery["light"].videoListNavigationBackgroundAlphas="100,100";wnDefaultPackage.WNGallery["light"].videoListNavigationBackgroundRatios="75,255";wnDefaultPackage.WNGallery["light"].videoListNavigationBackgroundRotation="90";wnDefaultPackage.WNGallery["light"].videoListNavigationBorderColor="b9b9b9";wnDefaultPackage.WNGallery["light"].videoListNavigationBorderWidth="1";wnDefaultPackage.WNGallery["light"].videoListNavigationBorderAlpha="100";wnDefaultPackage.WNGallery["light"].videoListNavigationDropShadowColor="333333";wnDefaultPackage.WNGallery["light"].videoListNavigationOffFaceColor="3d3d3d";wnDefaultPackage.WNGallery["light"].videoListNavigationOverFaceColor="ffffff";wnDefaultPackage.WNGallery["light"].videoListNavigationSelectedFaceColor="454444";wnDefaultPackage.WNGallery["light"].videoListNavigationHighlightBorderColor="e3e3e3";wnDefaultPackage.WNGallery["light"].videoListNavigationShadowBorderColor="858484";wnDefaultPackage.WNGallery["light"].videoListPageNumberOffColor="858484";wnDefaultPackage.WNGallery["light"].videoListPageNumberOverColor="ffffff";wnDefaultPackage.WNGallery["light"].videoListPageNumberSelectedColor="454444";wnDefaultPackage.WNGallery["light"].searchBackgroundColors="cdcdcd,797978";wnDefaultPackage.WNGallery["light"].searchBackgroundAlphas="100,100";wnDefaultPackage.WNGallery["light"].searchBackgroundRatios="0,255";wnDefaultPackage.WNGallery["light"].searchBackgroundRotation="90";wnDefaultPackage.WNGallery["light"].searchOffFaceColor="3d3d3d";wnDefaultPackage.WNGallery["light"].searchOverFaceColor="ffffff";wnDefaultPackage.WNGallery["light"].searchLeftBorderColor="d3d3d3";wnDefaultPackage.WNGallery["light"].searchRightBorderColor="6f6f6f";wnDefaultPackage.WNGallery["light"].searchFormFaceColor="454444";wnDefaultPackage.WNGallery["light"].searchFormBorderColor="949393";wnDefaultPackage.WNGallery["light"].searchBorderColor="b9b9b9";wnDefaultPackage.WNGallery["light"].searchHasBorder="false";wnDefaultPackage.WNGallery["light"].searchHasBevel="true";wnDefaultPackage.WNGallery["light"].searchHasDropShadow="false";wnDefaultPackage.WNGallery["light"].searchDropShadowColor="333333";wnDefaultPackage.WNGallery["flatlight"]=new Object();wnDefaultPackage.WNGallery["flatlight"].offFaceColor="828282";wnDefaultPackage.WNGallery["flatlight"].overFaceColor="454444";wnDefaultPackage.WNGallery["flatlight"].selectedFaceColor="828282";wnDefaultPackage.WNGallery["flatlight"].tabBackgroundColors="e6e6e6,e6e6e6";wnDefaultPackage.WNGallery["flatlight"].dropDownTabOverBorderColor="aaaaaa";wnDefaultPackage.WNGallery["flatlight"].tabBackgroundAlphas="100,100";wnDefaultPackage.WNGallery["flatlight"].tabBackgroundRatios="75,255";wnDefaultPackage.WNGallery["flatlight"].tabBackgroundRotation="90";wnDefaultPackage.WNGallery["flatlight"].tabBackgroundSelectedColors="eeeeee";wnDefaultPackage.WNGallery["flatlight"].tabBackgroundSelectedAlphas="100";wnDefaultPackage.WNGallery["flatlight"].tabBackgroundSelectedRatios="0";wnDefaultPackage.WNGallery["flatlight"].tabBackgroundSelectedHasBevel="false";wnDefaultPackage.WNGallery["flatlight"].tabBackgroundSelectedHasBorder="true";wnDefaultPackage.WNGallery["flatlight"].tabBackgroundSelectedBorderAlpha="100";wnDefaultPackage.WNGallery["flatlight"].tabBackgroundSelectedBorderWidth="1";wnDefaultPackage.WNGallery["flatlight"].tabBackgroundSelectedBorderColor="aaaaaa";wnDefaultPackage.WNGallery["flatlight"].tabBackgroundSelectedHasDropShadow="false";wnDefaultPackage.WNGallery["flatlight"].tabBackgroundOverColors="eeeeee,eeeeee";wnDefaultPackage.WNGallery["flatlight"].tabBackgroundOverAlphas="100,100";wnDefaultPackage.WNGallery["flatlight"].tabBackgroundOverRatios="0,100";wnDefaultPackage.WNGallery["flatlight"].tabOffFaceColor="828282";wnDefaultPackage.WNGallery["flatlight"].tabOverFaceColor="454444";wnDefaultPackage.WNGallery["flatlight"].tabLeftBorderColor="e5e5e5";wnDefaultPackage.WNGallery["flatlight"].tabRightBorderColor="868686";wnDefaultPackage.WNGallery["flatlight"].tabHasBevel="false";wnDefaultPackage.WNGallery["flatlight"].tabHasDropShadow="false";wnDefaultPackage.WNGallery["flatlight"].tabHasBorder="true";wnDefaultPackage.WNGallery["flatlight"].tabBorderWidth="1";wnDefaultPackage.WNGallery["flatlight"].tabBorderAlpha="100";wnDefaultPackage.WNGallery["flatlight"].tabBorderColor="aaaaaa";wnDefaultPackage.WNGallery["flatlight"].tabShadowColor="333333";wnDefaultPackage.WNGallery["flatlight"].tabOverHasBevel="false";wnDefaultPackage.WNGallery["flatlight"].tabOverHasBorder="true";wnDefaultPackage.WNGallery["flatlight"].tabOverBorderAlpha="100";wnDefaultPackage.WNGallery["flatlight"].tabOverBorderWidth="1";wnDefaultPackage.WNGallery["flatlight"].dropDownBackgroundColors="eeeeee,eeeeee,eeeeee,eeeeee";wnDefaultPackage.WNGallery["flatlight"].dropDownBackgroundAlphas="100,100,100,100";wnDefaultPackage.WNGallery["flatlight"].dropDownBackgroundRatios="0,90,150,255";wnDefaultPackage.WNGallery["flatlight"].dropDownHasBorder="true";wnDefaultPackage.WNGallery["flatlight"].dropDownBorderColor="aaaaaa";wnDefaultPackage.WNGallery["flatlight"].dropDownDropShadowColor="7b7b7b";wnDefaultPackage.WNGallery["flatlight"].dropDownOffFaceColor="828282";wnDefaultPackage.WNGallery["flatlight"].dropDownOverFaceColor="454444";wnDefaultPackage.WNGallery["flatlight"].dropDownSelectedFaceColor="454444";wnDefaultPackage.WNGallery["flatlight"].dropDownTopBorderColor="ffffff";wnDefaultPackage.WNGallery["flatlight"].dropDownBottomBorderColor="b1b0b0";wnDefaultPackage.WNGallery["flatlight"].dropDownBorderAlpha="100";wnDefaultPackage.WNGallery["flatlight"].dropDownBorderWidth="1";wnDefaultPackage.WNGallery["flatlight"].dropDownHasDropShadow="false";wnDefaultPackage.WNGallery["flatlight"].videoListBackgroundColors="eeeeee,eeeeee";wnDefaultPackage.WNGallery["flatlight"].videoListBackgroundAlphas="100,100";wnDefaultPackage.WNGallery["flatlight"].videoListBackgroundRatios="75,255";wnDefaultPackage.WNGallery["flatlight"].videoListBackgroundRotation="90";wnDefaultPackage.WNGallery["flatlight"].videoListHasBevel="false";wnDefaultPackage.WNGallery["flatlight"].videoListHasBorder="true";wnDefaultPackage.WNGallery["flatlight"].videoListHasDropShadow="false";wnDefaultPackage.WNGallery["flatlight"].videoListBorderAlpha="100";wnDefaultPackage.WNGallery["flatlight"].videoListBorderWidth="1";wnDefaultPackage.WNGallery["flatlight"].videoListBorderColor="aaaaaa";wnDefaultPackage.WNGallery["flatlight"].videoListBackgroundDropShadowColor="333333";wnDefaultPackage.WNGallery["flatlight"].videoListNavigationHasBevel="false";wnDefaultPackage.WNGallery["flatlight"].videoListNavigationHasBorder="true";wnDefaultPackage.WNGallery["flatlight"].videoListNavigationHasDropShadow="false";wnDefaultPackage.WNGallery["flatlight"].videoListItemOffFaceColor="828282";wnDefaultPackage.WNGallery["flatlight"].videoListItemOverFaceColor="828282";wnDefaultPackage.WNGallery["flatlight"].videoListItemImageIconOverColor="ffffff";wnDefaultPackage.WNGallery["flatlight"].videoListItemHighlightBorderColor="ffffff";wnDefaultPackage.WNGallery["flatlight"].videoListItemShadowBorderColor="b1b0b0";wnDefaultPackage.WNGallery["flatlight"].videoListNavigationBackgroundColors="eeeeee,eeeeee";wnDefaultPackage.WNGallery["flatlight"].videoListNavigationBackgroundAlphas="100,100";wnDefaultPackage.WNGallery["flatlight"].videoListNavigationBackgroundRatios="75,255";wnDefaultPackage.WNGallery["flatlight"].videoListNavigationBackgroundRotation="90";wnDefaultPackage.WNGallery["flatlight"].videoListNavigationBorderColor="b9b9b9";wnDefaultPackage.WNGallery["flatlight"].videoListNavigationBorderWidth="1";wnDefaultPackage.WNGallery["flatlight"].videoListNavigationBorderAlpha="100";wnDefaultPackage.WNGallery["flatlight"].videoListNavigationDropShadowColor="333333";wnDefaultPackage.WNGallery["flatlight"].videoListNavigationOffFaceColor="828282";wnDefaultPackage.WNGallery["flatlight"].videoListNavigationOverFaceColor="454444";wnDefaultPackage.WNGallery["flatlight"].videoListNavigationSelectedFaceColor="454444";wnDefaultPackage.WNGallery["flatlight"].videoListNavigationHighlightBorderColor="e3e3e3";wnDefaultPackage.WNGallery["flatlight"].videoListNavigationShadowBorderColor="858484";wnDefaultPackage.WNGallery["flatlight"].videoListPageNumberOffColor="858484";wnDefaultPackage.WNGallery["flatlight"].videoListPageNumberOverColor="454444";wnDefaultPackage.WNGallery["flatlight"].videoListPageNumberSelectedColor="454444";wnDefaultPackage.WNGallery["flatlight"].searchBackgroundColors="eeeeee,eeeeee";wnDefaultPackage.WNGallery["flatlight"].searchBackgroundAlphas="100,100";wnDefaultPackage.WNGallery["flatlight"].searchBackgroundRatios="0,255";wnDefaultPackage.WNGallery["flatlight"].searchBackgroundRotation="90";wnDefaultPackage.WNGallery["flatlight"].searchOffFaceColor="828282";wnDefaultPackage.WNGallery["flatlight"].searchOverFaceColor="454444";wnDefaultPackage.WNGallery["flatlight"].searchLeftBorderColor="d3d3d3";wnDefaultPackage.WNGallery["flatlight"].searchRightBorderColor="6f6f6f";wnDefaultPackage.WNGallery["flatlight"].searchFormFaceColor="454444";wnDefaultPackage.WNGallery["flatlight"].searchFormBorderColor="949393";wnDefaultPackage.WNGallery["flatlight"].searchBorderColor="aaaaaa";wnDefaultPackage.WNGallery["flatlight"].searchHasBorder="true";wnDefaultPackage.WNGallery["flatlight"].searchHasBevel="false";wnDefaultPackage.WNGallery["flatlight"].searchHasDropShadow="false";wnDefaultPackage.WNGallery["flatlight"].searchDropShadowColor="333333";wnDefaultPackage.WNGallery["flatlight"].searchBorderWidth="1";wnDefaultPackage.WNGallery["flatlight"].searchBorderAlpha="100";wnDefaultPackage.WNHeadline=new Object();wnDefaultPackage.WNHeadline["dark"]=new Object();wnDefaultPackage.WNHeadline["dark"].backgroundColors=wn.video.widgets.headline.background.dark.colors;wnDefaultPackage.WNHeadline["dark"].backgroundAlphas=wn.video.widgets.headline.background.dark.alphas;wnDefaultPackage.WNHeadline["dark"].backgroundRatios=wn.video.widgets.headline.background.dark.ratios;wnDefaultPackage.WNHeadline["dark"].borderColor=wn.video.widgets.headline.background.dark.bordercolor;wnDefaultPackage.WNHeadline["dark"].backgroundRotation=wn.video.widgets.headline.background.dark.rotation;wnDefaultPackage.WNHeadline["dark"].dropShadowColor=wn.video.widgets.headline.background.dark.dropshadowcolor;wnDefaultPackage.WNHeadline["dark"].offFaceColor=wn.video.widgets.headline.background.dark.offfacecolor;wnDefaultPackage.WNHeadline["dark"].hasBevel="true";wnDefaultPackage.WNHeadline["dark"].hasBorder="false";wnDefaultPackage.WNHeadline["dark"].borderAlpha="100";wnDefaultPackage.WNHeadline["dark"].borderWidth="1";wnDefaultPackage.WNHeadline["dark"].hasDropShadow="true";wnDefaultPackage.WNHeadline["light"]=new Object();wnDefaultPackage.WNHeadline["light"].backgroundColors=wn.video.widgets.headline.background.light.colors;wnDefaultPackage.WNHeadline["light"].backgroundAlphas=wn.video.widgets.headline.background.light.alphas;wnDefaultPackage.WNHeadline["light"].backgroundRatios=wn.video.widgets.headline.background.light.ratios;wnDefaultPackage.WNHeadline["light"].borderColor=wn.video.widgets.headline.background.light.bordercolor;wnDefaultPackage.WNHeadline["light"].backgroundRotation=wn.video.widgets.headline.background.light.rotation;wnDefaultPackage.WNHeadline["light"].dropShadowColor=wn.video.widgets.headline.background.light.dropshadowcolor;wnDefaultPackage.WNHeadline["light"].offFaceColor=wn.video.widgets.headline.background.light.offfacecolor;wnDefaultPackage.WNHeadline["light"].hasBevel="true";wnDefaultPackage.WNHeadline["light"].hasBorder="false";wnDefaultPackage.WNHeadline["light"].borderAlpha="100";wnDefaultPackage.WNHeadline["light"].borderWidth="1";wnDefaultPackage.WNHeadline["light"].hasDropShadow="true";wnDefaultPackage.WNHeadline["flatlight"]=new Object();wnDefaultPackage.WNHeadline["flatlight"].backgroundColors="eeeeee,eeeeee";wnDefaultPackage.WNHeadline["flatlight"].backgroundAlphas="100,100";wnDefaultPackage.WNHeadline["flatlight"].backgroundRatios="0,255";wnDefaultPackage.WNHeadline["flatlight"].borderColor="aaaaaa";wnDefaultPackage.WNHeadline["flatlight"].backgroundRotation=wn.video.widgets.headline.background.light.ratios;wnDefaultPackage.WNHeadline["flatlight"].dropShadowColor=wn.video.widgets.headline.background.light.dropshadowcolor;wnDefaultPackage.WNHeadline["flatlight"].offFaceColor="454444";wnDefaultPackage.WNHeadline["flatlight"].hasBevel="false";wnDefaultPackage.WNHeadline["flatlight"].hasBorder="true";wnDefaultPackage.WNHeadline["flatlight"].borderAlpha="100";wnDefaultPackage.WNHeadline["flatlight"].borderWidth="1";wnDefaultPackage.WNHeadline["flatlight"].hasDropShadow="false";wnDefaultPackage.WNTicker=new Object();wnDefaultPackage.WNTicker["dark"]=new Object();wnDefaultPackage.WNTicker["dark"].backgroundColors="383838";wnDefaultPackage.WNTicker["dark"].backgroundAlphas="100";wnDefaultPackage.WNTicker["dark"].backgroundRatios="0";wnDefaultPackage.WNTicker["dark"].backgroundRotation="90";wnDefaultPackage.WNTicker["dark"].borderColor="2d2d2d";wnDefaultPackage.WNTicker["dark"].shadowColor="333333";wnDefaultPackage.WNTicker["dark"].offFaceColor="dcdbdb";wnDefaultPackage.WNTicker["dark"].overFaceColor="ffffff";wnDefaultPackage.WNTicker["dark"].hasBorder="false";wnDefaultPackage.WNTicker["dark"].hasBevel="true";wnDefaultPackage.WNTicker["dark"].borderAlpha="100";wnDefaultPackage.WNTicker["dark"].borderWidth="1";wnDefaultPackage.WNTicker["dark"].hasTopBorder="true";wnDefaultPackage.WNTicker["dark"].hasBottomBorder="true";wnDefaultPackage.WNTicker["dark"].hasLeftBorder="true";wnDefaultPackage.WNTicker["dark"].hasRightBorder="true";wnDefaultPackage.WNTicker["light"]=new Object();wnDefaultPackage.WNTicker["light"].backgroundColors="878786";wnDefaultPackage.WNTicker["light"].backgroundAlphas="100";wnDefaultPackage.WNTicker["light"].backgroundRatios="0";wnDefaultPackage.WNTicker["light"].backgroundRotation="90";wnDefaultPackage.WNTicker["light"].borderColor="b9b9b8";wnDefaultPackage.WNTicker["light"].shadowColor="888888";wnDefaultPackage.WNTicker["light"].offFaceColor="3d3d3d";wnDefaultPackage.WNTicker["light"].overFaceColor="ffffff";wnDefaultPackage.WNTicker["light"].hasBorder="false";wnDefaultPackage.WNTicker["light"].hasBevel="true";wnDefaultPackage.WNTicker["light"].borderAlpha="100";wnDefaultPackage.WNTicker["light"].borderWidth="1";wnDefaultPackage.WNTicker["light"].hasTopBorder="true";wnDefaultPackage.WNTicker["light"].hasBottomBorder="true";wnDefaultPackage.WNTicker["light"].hasLeftBorder="true";wnDefaultPackage.WNTicker["light"].hasRightBorder="true";wnDefaultPackage.WNTicker["flatlight"]=new Object();wnDefaultPackage.WNTicker["flatlight"].backgroundColors="eeeeee";wnDefaultPackage.WNTicker["flatlight"].backgroundAlphas="100";wnDefaultPackage.WNTicker["flatlight"].backgroundRatios="0";wnDefaultPackage.WNTicker["flatlight"].backgroundRotation="90";wnDefaultPackage.WNTicker["flatlight"].borderColor="aaaaaa";wnDefaultPackage.WNTicker["flatlight"].shadowColor="888888";wnDefaultPackage.WNTicker["flatlight"].offFaceColor="828282";wnDefaultPackage.WNTicker["flatlight"].overFaceColor="454444";wnDefaultPackage.WNTicker["flatlight"].hasBorder="true";wnDefaultPackage.WNTicker["flatlight"].hasBevel="false";wnDefaultPackage.WNTicker["flatlight"].borderAlpha="100";wnDefaultPackage.WNTicker["flatlight"].borderWidth="1";wnDefaultPackage.WNTicker["flatlight"].hasTopBorder="true";wnDefaultPackage.WNTicker["flatlight"].hasBottomBorder="true";wnDefaultPackage.WNTicker["flatlight"].hasLeftBorder="true";wnDefaultPackage.WNTicker["flatlight"].hasRightBorder="true";wnDefaultPackage.WNInfoPane=new Object();wnDefaultPackage.WNInfoPane["dark"]=new Object();wnDefaultPackage.WNInfoPane["dark"].backgroundColors="656464,252525";wnDefaultPackage.WNInfoPane["dark"].backgroundAlphas="100,100";wnDefaultPackage.WNInfoPane["dark"].backgroundRatios="0,255";wnDefaultPackage.WNInfoPane["dark"].backgroundRotation="90";wnDefaultPackage.WNInfoPane["dark"].borderColor="595959";wnDefaultPackage.WNInfoPane["dark"].dropShadowColor="333333";wnDefaultPackage.WNInfoPane["dark"].durationColor="afaeae";wnDefaultPackage.WNInfoPane["dark"].headlineColor="afaeae";wnDefaultPackage.WNInfoPane["dark"].summaryColor="afaeae";wnDefaultPackage.WNInfoPane["dark"].hasBorder="false";wnDefaultPackage.WNInfoPane["dark"].hasBevel="true";wnDefaultPackage.WNInfoPane["dark"].hasDropShadow="true";wnDefaultPackage.WNInfoPane["dark"].hasTopBorder="true";wnDefaultPackage.WNInfoPane["dark"].hasBottomBorder="true";wnDefaultPackage.WNInfoPane["dark"].hasLeftBorder="true";wnDefaultPackage.WNInfoPane["dark"].hasRightBorder="true";wnDefaultPackage.WNInfoPane["dark"].borderColor="333333";wnDefaultPackage.WNInfoPane["dark"].borderWidth="1";wnDefaultPackage.WNInfoPane["dark"].borderAlpha="100";wnDefaultPackage.WNInfoPane["light"]=new Object();wnDefaultPackage.WNInfoPane["light"].backgroundColors="cdcdcd,797978";wnDefaultPackage.WNInfoPane["light"].backgroundAlphas="100,100";wnDefaultPackage.WNInfoPane["light"].backgroundRatios="0,255";wnDefaultPackage.WNInfoPane["light"].backgroundRotation="90";wnDefaultPackage.WNInfoPane["light"].borderColor="e0e0e0";wnDefaultPackage.WNInfoPane["light"].dropShadowColor="333333";wnDefaultPackage.WNInfoPane["light"].durationColor="3d3d3d";wnDefaultPackage.WNInfoPane["light"].headlineColor="3d3d3d";wnDefaultPackage.WNInfoPane["light"].summaryColor="3d3d3d";wnDefaultPackage.WNInfoPane["light"].hasBorder="false";wnDefaultPackage.WNInfoPane["light"].hasBevel="true";wnDefaultPackage.WNInfoPane["light"].hasDropShadow="true";wnDefaultPackage.WNInfoPane["light"].hasTopBorder="true";wnDefaultPackage.WNInfoPane["light"].hasBottomBorder="true";wnDefaultPackage.WNInfoPane["light"].hasLeftBorder="true";wnDefaultPackage.WNInfoPane["light"].hasRightBorder="true";wnDefaultPackage.WNInfoPane["light"].borderColor="333333";wnDefaultPackage.WNInfoPane["light"].borderWidth="1";wnDefaultPackage.WNInfoPane["light"].borderAlpha="100";wnDefaultPackage.WNInfoPane["flatlight"]=new Object();wnDefaultPackage.WNInfoPane["flatlight"].backgroundColors="eeeeee,eeeeee";wnDefaultPackage.WNInfoPane["flatlight"].backgroundAlphas="100,100";wnDefaultPackage.WNInfoPane["flatlight"].backgroundRatios="0,255";wnDefaultPackage.WNInfoPane["flatlight"].backgroundRotation="90";wnDefaultPackage.WNInfoPane["flatlight"].borderColor="aaaaaa";wnDefaultPackage.WNInfoPane["flatlight"].dropShadowColor="333333";wnDefaultPackage.WNInfoPane["flatlight"].durationColor="454444";wnDefaultPackage.WNInfoPane["flatlight"].headlineColor="454444";wnDefaultPackage.WNInfoPane["flatlight"].summaryColor="454444";wnDefaultPackage.WNInfoPane["flatlight"].hasBorder="true";wnDefaultPackage.WNInfoPane["flatlight"].hasBevel="false";wnDefaultPackage.WNInfoPane["flatlight"].hasDropShadow="false";wnDefaultPackage.WNInfoPane["flatlight"].hasTopBorder="true";wnDefaultPackage.WNInfoPane["flatlight"].hasBottomBorder="true";wnDefaultPackage.WNInfoPane["flatlight"].hasLeftBorder="true";wnDefaultPackage.WNInfoPane["flatlight"].hasRightBorder="true";wnDefaultPackage.WNInfoPane["flatlight"].borderColor="aaaaaa";wnDefaultPackage.WNInfoPane["flatlight"].borderWidth="1";wnDefaultPackage.WNInfoPane["flatlight"].borderAlpha="100";wnDefaultPackage.WNGraphicsHeader=new Object();wnDefaultPackage.WNGraphicsHeader["dark"]=new Object();wnDefaultPackage.WNGraphicsHeader["dark"].backgroundAlphas="100";wnDefaultPackage.WNGraphicsHeader["light"]=new Object();wnDefaultPackage.WNGraphicsHeader["light"].backgroundAlphas="100";wnDefaultPackage.WNGraphicsHeader["flatlight"]=new Object();wnDefaultPackage.WNGraphicsHeader["flatlight"].backgroundAlphas="100";wnDefaultPackage.WNGraphicsFooter=new Object();wnDefaultPackage.WNGraphicsFooter["dark"]=new Object();wnDefaultPackage.WNGraphicsFooter["dark"].backgroundAlphas="100";wnDefaultPackage.WNGraphicsFooter["light"]=new Object();wnDefaultPackage.WNGraphicsFooter["light"].backgroundAlphas="100";wnDefaultPackage.WNGraphicsFooter["flatlight"]=new Object();wnDefaultPackage.WNGraphicsFooter["flatlight"].backgroundAlphas="100";wnDefaultPackage.WNImageCanvas=new Object();wnDefaultPackage.WNImageCanvas["dark"]=new Object();wnDefaultPackage.WNImageCanvas["dark"].backgroundAlphas="100";wnDefaultPackage.WNImageCanvas["light"]=new Object();wnDefaultPackage.WNImageCanvas["light"].backgroundAlphas="100";wnDefaultPackage.WNImageCanvas["flatlight"]=new Object();wnDefaultPackage.WNImageCanvas["flatlight"].backgroundAlphas="100";wnDefaultPackage.WNImageGallery=new Object();wnDefaultPackage.WNImageGallery["dark"]=new Object();wnDefaultPackage.WNImageGallery["dark"].backgroundAlphas="100";wnDefaultPackage.WNImageGallery["light"]=new Object();wnDefaultPackage.WNImageGallery["light"].backgroundAlphas="100";wnDefaultPackage.WNImageGallery["flatlight"]=new Object();wnDefaultPackage.WNImageGallery["flatlight"].backgroundAlphas="100";wnDefaultPackage.WNVideoCanvas1=wnDefaultPackage.WNVideoCanvas;var wnUserAgentParser=new UAParser();var wnVideoUtils={hasHtmlVideo:!!document.createElement("video").canPlayType,getTimeAsHHMMSS:function(f){var c="";f=parseInt(f,10);if(typeof(f)=="number"&&!isNaN(f)){f=f/1000;f=Math.floor(f);var a=Math.floor(f/3600);var b=Math.floor((f-(a*3600))/60);var d=f-(a*3600)-(b*60);if(b<10){b="0"+b}if(d<10){d="0"+d}c=(a>0?a+":":"")+b+":"+d}return c},parseQuery:function(f){var h={};if(!f){return h}var d=f.split(/[;&]/);for(var c=0;c<d.length;c++){var a=d[c].split("=");if(!a||a.length!=2){continue}var b=unescape(a[0]);var g=unescape(a[1]);g=g.replace(/\+/g," ");h[b]=g}return h},validateString:function(a){if(a){if(typeof(a)==="string"){a=wnVideoUtils.trim(a);if(a===""||a==="undefined"||a==="null"){return false}else{return true}}else{return true}}else{return false}},stringToBoolean:function(a){if(a=="true"||a=="True"){return true}else{return false}},getResponsiveWidth:function(b){var a=$wn(window).width();if(a<b){return a}else{return b}},get:function(b){try{if(typeof b!=="undefined"){return b}else{return""}}catch(a){return""}},loadScript:function(d,f){var a=document.getElementById(d);if(a!=null){a.parentNode.removeChild(a);delete a}var c=document.getElementsByTagName("head")[0];var b=document.createElement("script");b.id=d;b.type="text/javascript";b.src=f;c.appendChild(b)},getQS:function(d){var a=[];var b=location.search.substr(1);var g=b.split("&");for(var c=0;c<g.length;c++){var f=g[c].split("=");a[f[0].toLowerCase()]=f[1]}return a[d.toLowerCase()]},trim:function(c){var b=c.replace(/^\s+/,"");return b.replace(/\s+$/,"")},getVideoFormatByUrl:function(b){var c,d,a=b.match(/(.*)[\/\\]([^\/\\]+)\.(\w+)$/);if(a){c={path:a[1],file:a[2],ext:a[3]}}else{c={path:"",file:"",ext:""}}switch(c.ext){case"mp4":d="video/mp4";break;case"flv":d="video/x-flv";break;case"f4m":d="video/f4m";break;case"smil":d="application/smil";break;case"m3u8":d="application/x-mpegURL";break;case"mp3":d="audio/mpeg";break;case"ogv":d="video/ogg";break;case"webm":d="video/webm";break;default:d=""}return d}};function wnLog(a){if(wnShowConsoleLog){if(window.console){console.log(a)}}}if(wn.analytics.local&&wn.analytics.local.google&&wnVideoUtils.get(wn.analytics.local.google.enabled)===true){var wn_gaAccountId=wnVideoUtils.get(wn.analytics.local.google.variables.accountid);var _gaq=_gaq||[];_gaq.push(["_setAccount",wn_gaAccountId]);_gaq.push(["_setDomainName","none"]);_gaq.push(["_setAllowLinker",true]);if(wnVideoUtils.get(wn.analytics.local.google.enabledpageviews)===true){_gaq.push(["_trackPageview"])}if(wnVideoUtils.get(wn.analytics.local.google.enabledaddthis)===true){if(typeof(addthis_config)=="undefined"){addthis_config={}}addthis_config={data_ga_property:wn_gaAccountId}}(function(){var b=document.createElement("script");b.type="text/javascript";b.async=true;b.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)})()}var wnTempMrss3rdUrl="";var wnTempMrssRegEx="";if(wn.video.mrss){wnTempMrss3rdUrl=wnVideoUtils.get(wn.video.mrss.thirdpartytemplatemrssurl);wnTempMrssRegEx=wnVideoUtils.get(wn.video.mrss.regexpmrssid)}var wnTempEnableCommentsWidget=false;if(wn.socialtools.comments.video){wnTempEnableCommentsWidget=wnVideoUtils.get(wn.socialtools.comments.video.enable)}var wnTempMDPartnerId="";var wnTempMDPartnerDomain="";if(wn.socialtools.mobdub){wnTempMDPartnerId=wnVideoUtils.get(wn.socialtools.mobdub.partnerid);wnTempMDPartnerDomain=wnVideoUtils.get(wn.socialtools.mobdub.partnerdomain)}var wnSiteConfigGeneral={baseUrl:wnVideoUtils.get(wn.baseurl),contentDomain:wnVideoUtils.get(wn.contentdomain),feedsApiDomain:wnVideoUtils.get(wn.feedsapidomain),affiliateName:wnVideoUtils.get(wn.affiliatename),affiliateNumber:wnVideoUtils.get(wn.affiliateno),staticFarmImagePrefix:wnVideoUtils.get(wn.staticimagefarmprefix),enableCommentsWidget:wnTempEnableCommentsWidget,cacheVersionBuster:wnVideoUtils.get(wn.jsincludesversion2)};var wnSiteConfigVideo={wmode:"transparent",getFlashUrl:"http://www.macromedia.com/go/getflashplayer",imagePath:wnVideoUtils.get(wn.staticimagefarmprefix)+"/images/static/video/flash/",flashPath:"http://"+wnVideoUtils.get(wn.baseurl)+"/global/video/flash/widgets",defaultThumb:wnVideoUtils.get(wn.staticimagefarmprefix)+"/gfx_defaultThumb.jpg",helpPageUrl:wnVideoUtils.get(wn.video.general.helppage),landingPageUrl:wnVideoUtils.get(wn.video.general.landingpage),slideShowLandingPageUrl:wnVideoUtils.get(wn.video.widgets.imagecanvas.slideshowlandingpage),slideShowInCanvasAdFreq:wnVideoUtils.get(wn.video.widgets.slideshow.incanvasadfrequency),slideShowCompanionAdFreq:wnVideoUtils.get(wn.video.widgets.slideshow.companionadfrequency),enableSlideShowPageViewReports:wnVideoUtils.get(wn.video.widgets.slideshow.enableslideshowpageviewreporting),renderSlideShowAsHtml:wnVideoUtils.get(wn.video.widgets.slideshow.renderslideshowashtml),defaultSummaryText:"",siteDefaultFormat:wnVideoUtils.get(wn.video.site.defaultformat),useUAF:wnVideoUtils.get(wn.video.site.useuaf),usePreRollMaster:wnVideoUtils.get(wn.video.site.companionads.useprerollmaster),companionAdSizes:wnVideoUtils.get(wn.video.site.companionads.companionadsizes),mobileCompanionAdSizes:wnVideoUtils.get(wn.video.site.companionads.mobilecompanionadsizes),adOwnerAffiliateXML:"",defaultEmbedCodeFormat:wnVideoUtils.get(wn.video.site.defaultembedcodeformat),defaultPlaybackFormat:wnVideoUtils.get(wn.video.site.playbackformatorder),defaultMaxBitrate:wnVideoUtils.get(wn.video.site.playbackmaxbitrate),dynamicStreamingEnabled:wnVideoUtils.get(wn.video.site.dynamicstreamingenabled),dynamicStreamingBaseUrl:wnVideoUtils.get(wn.video.site.dynamicstreamingbaseurl),dynamicStreamingCPCode:"",thirdPartyMrssTemplateurl:wnTempMrss3rdUrl,thirdPartyRegexMrssId:wnTempMrssRegEx,enableExpressReports:wnVideoUtils.get(wn.video.reporting.enableexpressreporting),enableAdvertisingZone:wnVideoUtils.get(wn.video.widgets.enableadvertisingzone),pageTitleTag:wnVideoUtils.get(wn.pagetitletag),disableGoogleSDKAdCallOverwrite:wnVideoUtils.get(wn.video.site.googleadsdkdisableadcalloverwrite),googleSDKVideoAdBandwidth:wnVideoUtils.get(wn.video.site.googlesdkvideoadbandwidth),closeCaptionBackgroundTransparency:wnVideoUtils.get(wn.video.site.closecaptionbackgroundtransparency),enableHDSLivestreaming:wnVideoUtils.get(wn.video.site.hdslivestreaming),mobileForceFlash:wnVideoUtils.get(wn.video.site.mobileforceflash),enableSingleClipPage:wnVideoUtils.get(wn.video.site.enablesingleclippage),enableLivestreamCC:wnVideoUtils.get(wn.video.site.enablelivesreamcc),enableCcEnhancementsForVOD:wnVideoUtils.get(wn.video.site.enableccenhancementsforvod),enableCcEnhancementsForLivestream:wnVideoUtils.get(wn.video.site.enableccenhancementsforlivestream),enableAkamaiPlayer:wnVideoUtils.get(wn.video.site.enableakamaiplayer),enableABRStreaming:wnVideoUtils.get(wn.video.site.enableabrstreaming),social:{enableVideoComments:wnTempEnableCommentsWidget,mdPartnerId:wnTempMDPartnerId,mdPartnerDomain:wnTempMDPartnerDomain,enableStoryComments:wnVideoUtils.get(wn.socialtools.comments.story.enable),displayStoryCommentsByDefault:wnVideoUtils.get(wn.socialtools.comments.story.display),numberOfCommentsToDisplay:3,pubId:wnVideoUtils.get(wn.socialtools.addthistools.pubid)},uploadWidget:{headerText:"",browseBtnText:"",browseBtnLabelText:"",emailLabelText:"",titleLabelText:"",dropDownLabelText:"",dropDownBtnText:"",uploadBtnText:"",uploadUrl:"",uploadTerms:"",progressLoadedKB:"",progressTotalKB:"",chkBoxText:"",chkBoxLinkText:"",completedText:"",fileFailedText:"",fileTooLargeText:"",invalidEmailText:"",missingTitleText:"",missingTermsText:"",missingFileText:"",fileUploadedText:""},canvasWidget:{defaultVersion:wnVideoUtils.get(wn.video.defaults.playerversion),defaultType:wnVideoUtils.get(wn.video.defaults.playertype),defaultSkin:wnVideoUtils.get(wn.video.defaults.canvasskin),defaultStylePackage:"",loadingMsg:"",width:wnVideoUtils.get(wn.video.widgets.canvas.width),height:wnVideoUtils.get(wn.video.widgets.canvas.height),windowMode:wnVideoUtils.get(wn.video.widgets.canvas.ui.windowmode),playBtnText:"",pauseBtnText:"",summaryLongBtnText:"",summaryShortBtnText:"",emailLongBtnText:"",emailShortBtnText:"",helpLongBtnText:"",helpShortBtnText:"",CCLongBtnText:"",CCShortBtnText:"",hasEmail:wnVideoUtils.get(wn.video.widgets.canvas.ui.email.hasemail),hasHelp:wnVideoUtils.get(wn.video.widgets.canvas.ui.help.hashelp),openAdPreRollPos:"",openAdPostRollPos:"",openAdLeaderboardPos:"",playAtActualSize:wnVideoUtils.get(wn.video.widgets.canvas.playatactualsize),smoothingMode:wnVideoUtils.get(wn.video.widgets.canvas.smoothingmode),scaleStyle:wnVideoUtils.get(wn.video.widgets.canvas.scalestyle),videoLoadingMsg:"",summaryGfxMsg:"",errorMsg:"",commercialHeadlinePrefix:wnVideoUtils.get(wn.video.widgets.canvas.ui.commercialheadlineprefix),summaryPaneLabelText:"",CCPanelLabelText:"",emailPanelLabelText:"",closePanelLabelText:"",recipientEmailLabelText:"",senderEmailLabelText:"",senderNameLabelText:"",emailMsgLabelText:"",sendEmailBtnText:"",sentEmailMsg:"",invalidEmailMsg:"",invalidSenderEmailMsg:""},galleryWidget:{hasSearch:wnVideoUtils.get(wn.video.widgets.canvas.hassearch),defaultStylePackage:"",catXMLPath:"",width:wnVideoUtils.get(wn.video.widgets.gallery.width),height:wnVideoUtils.get(wn.video.widgets.gallery.height),topCatHeadline:"",isContinousPlay:wnVideoUtils.get(wn.video.widgets.gallery.iscontinousplay),catUnavailableText:"",listItemGfxPos:wnVideoUtils.get(wn.video.widgets.gallery.listitemgraphicposition),listItemScaleStyle:wnVideoUtils.get(wn.video.widgets.gallery.listitemscalestyle),rows:wnVideoUtils.get(wn.video.widgets.gallery.rows),cols:wnVideoUtils.get(wn.video.widgets.gallery.columns),nextBtnText:"",prevBtnText:"",searchBtnText:"",searchLabelText:"",hideResultsText:"",showResultsText:"",moreTabText:"",searchDisplayMsg:"",searchNotFoundMsg:"",searchFoundMsg:"",searchResultsSeparatorDisplayMsg:"",searchNoResultsMainWinMsg:"",catNoResultsWinMsg:""},headlineWidget:{defaultStylePackage:wnVideoUtils.get(wn.video.widgets.headline.defaultstylepackage),defaultTitleText:"",width:wnVideoUtils.get(wn.video.widgets.headline.width),height:wnVideoUtils.get(wn.video.widgets.headline.height),fontSize:wnVideoUtils.get(wn.video.widgets.headline.fontsize),darkBGColors:wnVideoUtils.get(wn.video.widgets.headline.background.dark.colors),darkBGAlphas:wnVideoUtils.get(wn.video.widgets.headline.background.dark.alphas),darkBGRatios:wnVideoUtils.get(wn.video.widgets.headline.background.dark.ratios),darkBGBorderColor:wnVideoUtils.get(wn.video.widgets.headline.background.dark.bordercolor),darkBGRotation:wnVideoUtils.get(wn.video.widgets.headline.background.dark.rotation),darkDropShadowColor:wnVideoUtils.get(wn.video.widgets.headline.background.dark.dropshadowcolor),darkOffFaceColor:wnVideoUtils.get(wn.video.widgets.headline.background.dark.offfacecolor),lightBGColors:wnVideoUtils.get(wn.video.widgets.headline.background.light.colors),lightBGAlphas:wnVideoUtils.get(wn.video.widgets.headline.background.light.alphas),lightBGRatios:wnVideoUtils.get(wn.video.widgets.headline.background.light.ratios),lightBGBorderColor:wnVideoUtils.get(wn.video.widgets.headline.background.light.bordercolor),lightBGRotation:wnVideoUtils.get(wn.video.widgets.headline.background.light.rotation),lightDropShadowColor:wnVideoUtils.get(wn.video.widgets.headline.background.light.dropshadowcolor),lightOffFaceColor:wnVideoUtils.get(wn.video.widgets.headline.background.light.offfacecolor)},tickerWidget:{defaultStylePackage:"",width:wnVideoUtils.get(wn.video.widgets.ticker.width),height:wnVideoUtils.get(wn.video.widgets.ticker.height)},infoWidget:{defaultStylePackage:"",width:wnVideoUtils.get(wn.video.widgets.infopane.width),height:wnVideoUtils.get(wn.video.widgets.infopane.height)},imageCanvasWidget:{defaultStylePackage:"",width:wnVideoUtils.get(wn.video.widgets.imagecanvas.width),height:wnVideoUtils.get(wn.video.widgets.imagecanvas.height),slideTime:wnVideoUtils.get(wn.video.widgets.imagecanvas.slidetime)},imageGalleryWidget:{defaultStylePackage:"",width:wnVideoUtils.get(wn.video.widgets.imagegallery.width),height:wnVideoUtils.get(wn.video.widgets.imagegallery.height)}};var wn_debug_widgets=wnVideoUtils.getQS("wnDebugWidgets");var wn_widget_mode=wnVideoUtils.getQS("wnWidgetMode");var videoCanvasId="WNVideoCanvas";var wnWidgetsFlashVars={};var wnWidgetsInstallFlashVars={};var wnWidgetsAttributes={};var wnInstallFlashVarsTemplate={};var wnFeedObject={};var wnHelpPageUrl=wnSiteConfigVideo.helpPageUrl;var wnImagePath=wnSiteConfigVideo.imagePath;var wnPreferredVideoFormat="FLV";var wnSilverlightBaseUrl=wnSiteConfigVideo.flashPathSLMediaFiles;wnWidgetsFlashVars.landingPage=wnSiteConfigVideo.landingPageUrl;wnWidgetsFlashVars.baseUrl=wnSiteConfigGeneral.baseUrl;wnFeedObject.feeds=[];wnFeedObject.hasFeeds=false;wnSiteDefaultVideoFormat=wnSiteConfigVideo.siteDefaultFormat;var renderSlideShowAsHtml=wnSiteConfigVideo.renderSlideShowAsHtml;var enableSlideshowPageViewReporting=wnSiteConfigVideo.enableSlideShowPageViewReports;var enableVideoComments=wnSiteConfigGeneral.enableCommentsWidget;var wnUsePrerollMaster=wnSiteConfigVideo.usePreRollMaster;var wnShowConsoleLog=wnVideoUtils.validateString(wnVideoUtils.getQS("wnShowConsoleLog"))&&wnVideoUtils.getQS("wnShowConsoleLog")=="true";var wnCompanionAds=wnSiteConfigVideo.companionAdSizes;wnInstallFlashVarsTemplate.imgPath=wnSiteConfigVideo.imagePath;wnInstallFlashVarsTemplate.getFlash=wnSiteConfigVideo.flashPath+"/gfx_getFlash.jpg";wnInstallFlashVarsTemplate.getFlashUrl=wnSiteConfigVideo.getFlashUrl;wnInstallFlashVarsTemplate.helpPage=wnSiteConfigVideo.helpPageUrl;wnInstallFlashVarsTemplate.cancelCopy="You have cancelled the download process.  You will need to install the flash player to view videos.  Click the help button below if you need assistance.";wnInstallFlashVarsTemplate.failedCopy="Flash Player failed to download.  Please click the help button below for assistance.";var wn_isPlatformSite=false;var wn_isPlatformSiteMobile=false;if(typeof(wng_pageInfo)==="object"&&wng_pageInfo!=null&&wng_pageInfo!=undefined){wn_isPlatformSite=true;wn_isPlatformSiteMobile=wng_pageInfo.isMobile}var wn_isMobile=false;if(wnVideoUtils.getQS("wnhtml5")=="true"||(/iphone|ipad|ipod|Android|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent.toLowerCase()))){wn_isMobile=true}else{if(wn_isPlatformSite){wn_isMobile=wng_pageInfo.isMobile}}if(typeof(CANVAS_SKINS)!="object"){var CANVAS_SKINS={flat:{},satin:{}}}if(wn_isMobile){document.write('<script id="WNGoogleJSAPI" type="text/javascript" src="http://www.google.com/jsapi"><\/script>');if(wn_debug_widgets=="true"){document.write('<script type="text/javascript" src="http://imasdk.googleapis.com/js/sdkloader/ima3_debug.js"><\/script>')}else{document.write('<script type="text/javascript" src="http://s0.2mdn.net/instream/html5/ima3.js"><\/script>')}wnCompanionAds=wnSiteConfigVideo.mobileCompanionAdSizes}var WNisProducerRegExp=new RegExp("://manage[A-Za-z0-9.]*.worldnow.com");var platform=window.PLATFORM||"";if(platform=="off-platform"&&WNisProducerRegExp.test(document.location.href)==false&&typeof(window.addthis)!="object"){try{var wnAddThisPubId=(wnSiteConfigVideo.social.pubId&&wnSiteConfigVideo.social.pubId.length>0?wnSiteConfigVideo.social.pubId:"xa-4bbcc485014c0ab2");if(wn_isMobile){wnVideoUtils.loadScript("wnAddThisScript","http://s7.addthis.com/js/300/addthis_widget.js?pubid="+wnAddThisPubId)}else{wnVideoUtils.loadScript("wnAddThisScript","http://s7.addthis.com/js/250/addthis_widget.js?pubid="+wnAddThisPubId)}}catch(e){}}var wnPageType="none";try{if(wng_pageInfo&&wng_pageInfo.containerType=="S"){wnPageType="videostorypage"}if(($wn("meta[name='wn-rootname']").attr("content")=="video")||($wn("meta[name='wnreadableurl']").attr("content")=="video")){wnPageType="videolandingpage"}if($wn("meta[name='wn-rootname']").attr("content")=="slideshow"||($wn("meta[name='wnreadableurl']").attr("content")=="slideshow")){wnPageType="slideshowlandingpage"}}catch(e){}if(!wnSiteConfigVideo.canvasWidget.defaultStylePackage){wnSiteConfigVideo.canvasWidget.defaultStylePackage="dark"}if(!wnSiteConfigVideo.galleryWidget.defaultStylePackage){wnSiteConfigVideo.galleryWidget.defaultStylePackage="dark"}try{if(wnSiteConfigVideo.canvasWidget.defaultVersion=="1"||wnSiteConfigVideo.canvasWidget.defaultVersion==""){wnSiteConfigVideo.canvasWidget.defaultPlayerSWF="WNVideoCanvas.swf"}else{if(wnSiteConfigVideo.canvasWidget.defaultVersion=="2"){wnSiteConfigVideo.canvasWidget.defaultPlayerSWF="WNVideoCanvas2.swf"}else{wnSiteConfigVideo.canvasWidget.defaultPlayerSWF="WNVideoCanvas.swf"}}}catch(e){wnSiteConfigVideo.canvasWidget.defaultPlayerSWF="WNVideoCanvas.swf"}var canvasDefaultSkinPackage="satin";var canvasDefaultSkin="silver";try{if(wnSiteConfigVideo.canvasWidget.defaultSkin!=""){var skinPkg=wnSiteConfigVideo.canvasWidget.defaultSkin.split(".");canvasDefaultSkinPackage=skinPkg[0].toLowerCase();canvasDefaultSkin=skinPkg[1].toLowerCase()}}catch(e){}try{if(wnSiteConfigVideo.canvasWidget.defaultType!=""){wnSiteConfigVideo.canvasWidget.defaultType=wnSiteConfigVideo.canvasWidget.defaultType.toLowerCase()}}catch(e){}var wnFeedsApiDomain="http://api.worldnow.com";if(wnVideoUtils.validateString(wnSiteConfigGeneral.feedsApiDomain)){wnFeedsApiDomain=wnSiteConfigGeneral.feedsApiDomain}wnWidgetsAttributes.WNUserUpload={};wnWidgetsAttributes.WNUserUpload.uri=wnSiteConfigVideo.flashPath+"/WNUserUpload.swf";wnWidgetsAttributes.WNUserUpload.installUri=wnSiteConfigVideo.flashPath+"/WNWidgetInstaller.swf";wnWidgetsInstallFlashVars.WNUserUpload={};wnWidgetsInstallFlashVars.WNUserUpload=wnInstallFlashVarsTemplate;wnWidgetsFlashVars.WNUserUpload={};wnWidgetsFlashVars.WNUserUpload.headerBarFontSize="10";wnWidgetsFlashVars.WNUserUpload.headerText=wnSiteConfigVideo.uploadWidget.headerText;wnWidgetsFlashVars.WNUserUpload.fieldHeight="23";wnWidgetsFlashVars.WNUserUpload.fieldLeft="62";wnWidgetsFlashVars.WNUserUpload.fieldRight="24";wnWidgetsFlashVars.WNUserUpload.browseButtonText=wnSiteConfigVideo.uploadWidget.browseBtnText;wnWidgetsFlashVars.WNUserUpload.browseLabelText=wnSiteConfigVideo.uploadWidget.browseBtnLabelText;wnWidgetsFlashVars.WNUserUpload.formTextSize="10";wnWidgetsFlashVars.WNUserUpload.padding="8";wnWidgetsFlashVars.WNUserUpload.emailLabelText=wnSiteConfigVideo.uploadWidget.emailLabelText;wnWidgetsFlashVars.WNUserUpload.titleLabelText=wnSiteConfigVideo.uploadWidget.titleLabelText;wnWidgetsFlashVars.WNUserUpload.dropDownButtonFontSize="10";wnWidgetsFlashVars.WNUserUpload.dropDownLabelText=wnSiteConfigVideo.uploadWidget.dropDownLabelText;wnWidgetsFlashVars.WNUserUpload.dropDownButtonTextMessage=wnSiteConfigVideo.uploadWidget.dropDownBtnText;wnWidgetsFlashVars.WNUserUpload.dropDownListFontSize="10";wnWidgetsFlashVars.WNUserUpload.uploadButtonText=wnSiteConfigVideo.uploadWidget.uploadBtnText;wnWidgetsFlashVars.WNUserUpload.uploadUrl=wnSiteConfigVideo.uploadWidget.uploadUrl;wnWidgetsFlashVars.WNUserUpload.affiliate=wnSiteConfigGeneral.affiliateName;wnWidgetsFlashVars.WNUserUpload.termsAndConditionsLink=wnSiteConfigVideo.uploadWidget.uploadTerms;wnWidgetsFlashVars.WNUserUpload.uploadFileSizeMaxBytes="100000000";wnWidgetsFlashVars.WNUserUpload.progressMsgLoadedKBText=wnSiteConfigVideo.uploadWidget.progressLoadedKB;wnWidgetsFlashVars.WNUserUpload.progressMsgTotalKBText=wnSiteConfigVideo.uploadWidget.progressTotalKB;wnWidgetsFlashVars.WNUserUpload.progressMsgCompletedText=wnSiteConfigVideo.uploadWidget.completedText;wnWidgetsFlashVars.WNUserUpload.loadingMessage=wnSiteConfigVideo.canvasWidget.loadingMsg;wnWidgetsFlashVars.WNUserUpload.fileDialogFailText=wnSiteConfigVideo.uploadWidget.fileFailedText;wnWidgetsFlashVars.WNUserUpload.fileTooLargeText=wnSiteConfigVideo.uploadWidget.fileTooLargeText;wnWidgetsFlashVars.WNUserUpload.missingValidEmailAddressText=wnSiteConfigVideo.uploadWidget.invalidEmailText;wnWidgetsFlashVars.WNUserUpload.missingTitleText=wnSiteConfigVideo.uploadWidget.missingTitleText;wnWidgetsFlashVars.WNUserUpload.missingConfirmationOfTermsText=wnSiteConfigVideo.uploadWidget.missingTermsText;wnWidgetsFlashVars.WNUserUpload.missingFileText=wnSiteConfigVideo.uploadWidget.missingFileText;wnWidgetsFlashVars.WNUserUpload.fileJustUploadedText=wnSiteConfigVideo.uploadWidget.fileUploadedText;wnWidgetsAttributes.WNVideoCanvas={};wnWidgetsAttributes.WNVideoCanvas.uri=wnSiteConfigVideo.flashPath+"/"+wnSiteConfigVideo.canvasWidget.defaultPlayerSWF;wnWidgetsAttributes.WNVideoCanvas.installUri=wnSiteConfigVideo.flashPath+"/WNWidgetInstaller.swf";wnWidgetsAttributes.WNVideoCanvas.wmode=wnSiteConfigVideo.canvasWidget.windowMode;wnWidgetsAttributes.WNVideoCanvas.silverlightUri=wnSiteConfigVideo.flashPath+"/";wnWidgetsFlashVars.WNVideoCanvas={};wnWidgetsFlashVars.WNVideoCanvas.playerWidth=wnSiteConfigVideo.canvasWidget.width;wnWidgetsFlashVars.WNVideoCanvas.playerHeight=wnSiteConfigVideo.canvasWidget.height;wnWidgetsFlashVars.WNVideoCanvas.affiliateNumber=wnSiteConfigGeneral.affiliateNumber;wnWidgetsFlashVars.WNVideoCanvas.playButtonText=wnSiteConfigVideo.canvasWidget.playBtnText;wnWidgetsFlashVars.WNVideoCanvas.pauseButtonText=wnSiteConfigVideo.canvasWidget.pauseBtnText;wnWidgetsFlashVars.WNVideoCanvas.summaryLongButtonText=wnSiteConfigVideo.canvasWidget.summaryLongBtnText;wnWidgetsFlashVars.WNVideoCanvas.summaryShortButtonText=wnSiteConfigVideo.canvasWidget.summaryShortBtnText;wnWidgetsFlashVars.WNVideoCanvas.emailLongButtonText=wnSiteConfigVideo.canvasWidget.emailLongBtnText;wnWidgetsFlashVars.WNVideoCanvas.emailShortButtonText=wnSiteConfigVideo.canvasWidget.emailShortBtnText;wnWidgetsFlashVars.WNVideoCanvas.helpLongButtonText=wnSiteConfigVideo.canvasWidget.helpLongBtnText;wnWidgetsFlashVars.WNVideoCanvas.helpShortButtonText=wnSiteConfigVideo.canvasWidget.helpShortBtnText;wnWidgetsFlashVars.WNVideoCanvas.closecaptionLongButtonText=wnSiteConfigVideo.canvasWidget.CCLongBtnText;wnWidgetsFlashVars.WNVideoCanvas.closecaptionShortButtonText=wnSiteConfigVideo.canvasWidget.CCShortBtnText;wnWidgetsFlashVars.WNVideoCanvas.hasEmail=wnSiteConfigVideo.canvasWidget.hasEmail;wnWidgetsFlashVars.WNVideoCanvas.hostDomain=wnSiteConfigGeneral.baseUrl;wnWidgetsFlashVars.WNVideoCanvas.affiliate=wnSiteConfigGeneral.affiliateName;wnWidgetsFlashVars.WNVideoCanvas.imgPath=wnSiteConfigVideo.imagePath;wnWidgetsFlashVars.WNVideoCanvas.emailSubmitURL="";wnWidgetsFlashVars.WNVideoCanvas.addRedirectBase="";wnWidgetsFlashVars.WNVideoCanvas.clipBaseXMLPath="";wnWidgetsFlashVars.WNVideoCanvas.helpPage=wnSiteConfigVideo.helpPageUrl;wnWidgetsFlashVars.WNVideoCanvas.clipId="";wnWidgetsFlashVars.WNVideoCanvas.isMute="";wnWidgetsFlashVars.WNVideoCanvas.playAtActualSize=wnSiteConfigVideo.canvasWidget.playAtActualSize;wnWidgetsFlashVars.WNVideoCanvas.hasHelp=wnSiteConfigVideo.canvasWidget.hasHelp;wnWidgetsFlashVars.WNVideoCanvas.smoothingMode=wnSiteConfigVideo.canvasWidget.smoothingMode;wnWidgetsFlashVars.WNVideoCanvas.staticImgPath=wnSiteConfigGeneral.staticFarmImagePrefix;wnWidgetsFlashVars.WNVideoCanvas.openAdPrerollPosition=wnSiteConfigVideo.canvasWidget.openAdPreRollPos;wnWidgetsFlashVars.WNVideoCanvas.openAdPostrollPosition=wnSiteConfigVideo.canvasWidget.openAdPostRollPos;wnWidgetsFlashVars.WNVideoCanvas.openAdLeaderboardPosition=wnSiteConfigVideo.canvasWidget.openAdLeaderboardPos;wnWidgetsFlashVars.WNVideoCanvas.playerIncludeType="";wnWidgetsFlashVars.WNVideoCanvas.videoLoadingMessage=wnSiteConfigVideo.canvasWidget.videoLoadingMsg;wnWidgetsFlashVars.WNVideoCanvas.summaryGraphicScaleStyle=wnSiteConfigVideo.canvasWidget.scaleStyle;wnWidgetsFlashVars.WNVideoCanvas.isAutoStart="";wnWidgetsFlashVars.WNVideoCanvas.hasFullScreen="true";wnWidgetsFlashVars.WNVideoCanvas.fullScreenControlType="none";wnWidgetsFlashVars.WNVideoCanvas.adOwnerAffiliatesXML=wnSiteConfigVideo.adOwnerAffiliateXML;wnWidgetsFlashVars.WNVideoCanvas.summaryGraphicMessage=wnSiteConfigVideo.canvasWidget.summaryGfxMsg;wnWidgetsFlashVars.WNVideoCanvas.errorMessage=wnSiteConfigVideo.canvasWidget.errorMsg;wnWidgetsFlashVars.WNVideoCanvas.loadingMessage=wnSiteConfigVideo.canvasWidget.loadingMsg;wnWidgetsFlashVars.WNVideoCanvas.defaultStyle=wnSiteConfigVideo.canvasWidget.defaultStylePackage;wnWidgetsFlashVars.WNVideoCanvas.commercialHeadlinePrefix=wnSiteConfigVideo.canvasWidget.commercialHeadlinePrefix;wnWidgetsFlashVars.WNVideoCanvas.summaryPaneLabelText=wnSiteConfigVideo.canvasWidget.summaryPaneLabelText;wnWidgetsFlashVars.WNVideoCanvas.closecaptionPaneLabelText=wnSiteConfigVideo.canvasWidget.CCPanelLabelText;wnWidgetsFlashVars.WNVideoCanvas.emailPaneLabelText=wnSiteConfigVideo.canvasWidget.emailPanelLabelText;wnWidgetsFlashVars.WNVideoCanvas.closePaneLabelText=wnSiteConfigVideo.canvasWidget.closePanelLabelText;wnWidgetsFlashVars.WNVideoCanvas.recipientEmailLabelText=wnSiteConfigVideo.canvasWidget.recipientEmailLabelText;wnWidgetsFlashVars.WNVideoCanvas.senderEmailLabelText=wnSiteConfigVideo.canvasWidget.senderEmailLabelText;wnWidgetsFlashVars.WNVideoCanvas.senderNameLabelText=wnSiteConfigVideo.canvasWidget.senderNameLabelText;wnWidgetsFlashVars.WNVideoCanvas.emailMessageLabelText=wnSiteConfigVideo.canvasWidget.emailMsgLabelText;wnWidgetsFlashVars.WNVideoCanvas.sendEmailButtonText=wnSiteConfigVideo.canvasWidget.sendEmailBtnText;wnWidgetsFlashVars.WNVideoCanvas.emailSentConfirmationMessage=wnSiteConfigVideo.canvasWidget.sentEmailMsg;wnWidgetsFlashVars.WNVideoCanvas.invalidRecipientFieldMessage=wnSiteConfigVideo.canvasWidget.invalidEmailMsg;wnWidgetsFlashVars.WNVideoCanvas.invalidSenderFieldMessage=wnSiteConfigVideo.canvasWidget.invalidSenderEmailMsg;wnWidgetsFlashVars.WNVideoCanvas.disableTransport="false";wnWidgetsFlashVars.WNVideoCanvas.landingPage=wnSiteConfigVideo.landingPageUrl;wnWidgetsFlashVars.WNVideoCanvas.tabHeight=26;wnWidgetsFlashVars.WNVideoCanvas.tabFontSize=10;wnWidgetsFlashVars.WNVideoCanvas.siteDefaultFormat=wnSiteConfigVideo.siteDefaultFormat;wnWidgetsFlashVars.WNVideoCanvas.siteDefaultEmbedCodeFormat=wnSiteConfigVideo.defaultEmbedCodeFormat;wnWidgetsFlashVars.WNVideoCanvas.playbackFormat=wnSiteConfigVideo.defaultPlaybackFormat;wnWidgetsFlashVars.WNVideoCanvas.playbackMaxBitrate=wnSiteConfigVideo.defaultMaxBitrate;wnWidgetsFlashVars.WNVideoCanvas.thirdpartytemplatemrssurl=wnSiteConfigVideo.thirdPartyMrssTemplateurl;wnWidgetsFlashVars.WNVideoCanvas.regexpmrssid=wnSiteConfigVideo.thirdPartyRegexMrssId;wnWidgetsFlashVars.WNVideoCanvas.useUAF=wnSiteConfigVideo.useUAF;wnWidgetsFlashVars.WNVideoCanvas.playerType="STANDARD";wnWidgetsFlashVars.WNVideoCanvas.controlPanelButtonsType="auto";wnWidgetsFlashVars.WNVideoCanvas.enableExpressReport=wnSiteConfigVideo.enableExpressReports;wnWidgetsFlashVars.WNVideoCanvas.hasComments="false";wnWidgetsFlashVars.WNVideoCanvas.usePrerollMaster=wnUsePrerollMaster;wnWidgetsFlashVars.WNVideoCanvas.companionAds=wnCompanionAds;wnWidgetsFlashVars.WNVideoCanvas.playerAdvertisingType=wnPageType;wnWidgetsFlashVars.WNVideoCanvas.advertisingZone="";wnWidgetsFlashVars.WNVideoCanvas.controlsType=wnSiteConfigVideo.canvasWidget.defaultType;wnWidgetsFlashVars.WNVideoCanvas.volumeControlsType="vertical";wnWidgetsFlashVars.WNVideoCanvas.skinPackage=canvasDefaultSkinPackage;wnWidgetsFlashVars.WNVideoCanvas.skinName=canvasDefaultSkin;wnWidgetsFlashVars.WNVideoCanvas.hasEmbed="true";wnWidgetsFlashVars.WNVideoCanvas.hasVideoShare="true";wnWidgetsFlashVars.WNVideoCanvas.hasCc="false";wnWidgetsFlashVars.WNVideoCanvas.hasVideoSummary="false";wnWidgetsFlashVars.WNVideoCanvas.hasMobdub="false";wnWidgetsFlashVars.WNVideoCanvas.dynamicStreamingEnabled=wnSiteConfigVideo.dynamicStreamingEnabled;wnWidgetsFlashVars.WNVideoCanvas.dynamicStreamingBaseUrl=wnSiteConfigVideo.dynamicStreamingBaseUrl;wnWidgetsFlashVars.WNVideoCanvas.dynamicStreamingCPCode=wnSiteConfigVideo.dynamicStreamingCPCode;wnWidgetsFlashVars.WNVideoCanvas.galleryId="";wnWidgetsFlashVars.WNVideoCanvas.hasEmbeddedGallery="false";wnWidgetsFlashVars.WNVideoCanvas.videoType="On Demand Clip";wnWidgetsFlashVars.WNVideoCanvas.contentClassification="About Us";wnWidgetsFlashVars.WNVideoCanvas.streamHasPreroll="no";wnWidgetsFlashVars.WNVideoCanvas.streamingUrl="";wnWidgetsFlashVars.WNVideoCanvas.streamHeadline="";wnWidgetsFlashVars.WNVideoCanvas.liveStreamGraphicUrl="";wnWidgetsFlashVars.WNVideoCanvas.mobileStreamCcUrl="";wnWidgetsFlashVars.WNVideoCanvas.mobileStream1="";wnWidgetsFlashVars.WNVideoCanvas.mobileStream2="";wnWidgetsFlashVars.WNVideoCanvas.mobileStream3="";wnWidgetsFlashVars.WNVideoCanvas.pageTitleTag=wnSiteConfigVideo.pageTitleTag;wnWidgetsFlashVars.WNVideoCanvas.disableGoogleSDKAdCallOverwrite=wnSiteConfigVideo.disableGoogleSDKAdCallOverwrite;wnWidgetsFlashVars.WNVideoCanvas.videoAdBandwidth=wnSiteConfigVideo.googleSDKVideoAdBandwidth;wnWidgetsFlashVars.WNVideoCanvas.closeCaptionBackgroundTransparency=wnSiteConfigVideo.closeCaptionBackgroundTransparency;wnWidgetsFlashVars.WNVideoCanvas.enableHDSLivestreaming=wnSiteConfigVideo.enableHDSLivestreaming;wnWidgetsFlashVars.WNVideoCanvas.mobileForceFlash=wnSiteConfigVideo.mobileForceFlash;wnWidgetsFlashVars.WNVideoCanvas.enableSingleClipPage=wnSiteConfigVideo.enableSingleClipPage;wnWidgetsFlashVars.WNVideoCanvas.enableLivestreamCC=wnSiteConfigVideo.enableLivestreamCC;wnWidgetsFlashVars.WNVideoCanvas.enableCcEnhancementsForVOD=wnSiteConfigVideo.enableCcEnhancementsForVOD;wnWidgetsFlashVars.WNVideoCanvas.enableCcEnhancementsForLivestream=wnSiteConfigVideo.enableCcEnhancementsForLivestream;wnWidgetsInstallFlashVars.WNVideoCanvas={};wnWidgetsInstallFlashVars.WNVideoCanvas=wnInstallFlashVarsTemplate;wnWidgetsInstallFlashVars.WNVideoCanvas.playerWidth=wnSiteConfigVideo.canvasWidget.width;wnWidgetsInstallFlashVars.WNVideoCanvas.playerHeight=wnSiteConfigVideo.canvasWidget.height;wnWidgetsAttributes.WNVideoCanvas1={};wnWidgetsAttributes.WNVideoCanvas1.uri=wnSiteConfigVideo.flashPath+"/WNVideoCanvas.swf";wnWidgetsAttributes.WNVideoCanvas1.installUri=wnSiteConfigVideo.flashPath+"/WNWidgetInstaller.swf";wnWidgetsAttributes.WNVideoCanvas1.wmode=wnSiteConfigVideo.canvasWidget.windowMode;wnWidgetsAttributes.WNVideoCanvas1.silverlightUri=wnSiteConfigVideo.flashPath+"";wnWidgetsInstallFlashVars.WNVideoCanvas1={};wnWidgetsInstallFlashVars.WNVideoCanvas1=wnInstallFlashVarsTemplate;wnWidgetsInstallFlashVars.WNVideoCanvas1.playerWidth=wnSiteConfigVideo.canvasWidget.width;wnWidgetsInstallFlashVars.WNVideoCanvas1.playerHeight=wnSiteConfigVideo.canvasWidget.height;wnWidgetsFlashVars.WNVideoCanvas1=wnWidgetsFlashVars.WNVideoCanvas;wnWidgetsFlashVars.WNVideoCanvas1.playerWidth=wnSiteConfigVideo.canvasWidget.width;wnWidgetsFlashVars.WNVideoCanvas1.playerHeight=wnSiteConfigVideo.canvasWidget.height;wnWidgetsAttributes.WNVideoCanvas2={};wnWidgetsAttributes.WNVideoCanvas2.uri=wnSiteConfigVideo.flashPath+"/WNVideoCanvas2.swf";wnWidgetsAttributes.WNVideoCanvas2.installUri=wnSiteConfigVideo.flashPath+"/WNWidgetInstaller.swf";wnWidgetsAttributes.WNVideoCanvas2.wmode=wnSiteConfigVideo.canvasWidget.windowMode;wnWidgetsAttributes.WNVideoCanvas2.silverlightUri=wnSiteConfigVideo.flashPath+"";wnWidgetsInstallFlashVars.WNVideoCanvas2={};wnWidgetsInstallFlashVars.WNVideoCanvas2=wnInstallFlashVarsTemplate;wnWidgetsInstallFlashVars.WNVideoCanvas2.playerWidth=wnSiteConfigVideo.canvasWidget.width;wnWidgetsInstallFlashVars.WNVideoCanvas2.playerHeight=wnSiteConfigVideo.canvasWidget.height;wnWidgetsFlashVars.WNVideoCanvas2=wnWidgetsFlashVars.WNVideoCanvas;wnWidgetsFlashVars.WNVideoCanvas2.playerWidth=wnSiteConfigVideo.canvasWidget.width;wnWidgetsFlashVars.WNVideoCanvas2.playerHeight=wnSiteConfigVideo.canvasWidget.height;wnWidgetsAttributes.WNGallery={};wnWidgetsAttributes.WNGallery.uri=wnSiteConfigVideo.flashPath+"/WNGallery.swf";wnWidgetsAttributes.WNGallery.installUri=wnSiteConfigVideo.flashPath+"/WNWidgetInstaller.swf";wnWidgetsAttributes.WNGallery.wmode=wnSiteConfigVideo.wmode;wnWidgetsFlashVars.WNGallery={};wnWidgetsFlashVars.WNGallery.affiliateNumber=wnSiteConfigGeneral.affiliateNumber;wnWidgetsFlashVars.WNGallery.isContinuousPlay=wnSiteConfigVideo.galleryWidget.isContinousPlay;wnWidgetsFlashVars.WNGallery.hasSearch=wnSiteConfigVideo.galleryWidget.hasSearch;wnWidgetsFlashVars.WNGallery.failSafeSummaryImageText=wnSiteConfigVideo.defaultSummaryText;wnWidgetsFlashVars.WNGallery.categoryUnavailableText=wnSiteConfigVideo.galleryWidget.catUnavailableText;wnWidgetsFlashVars.WNGallery.searchDisplayMessage=wnSiteConfigVideo.galleryWidget.searchDisplayMsg;wnWidgetsFlashVars.WNGallery.searchNotFoundDisplayMessage=wnSiteConfigVideo.galleryWidget.searchNotFoundMsg;wnWidgetsFlashVars.WNGallery.searchFoundDisplayMessage=wnSiteConfigVideo.galleryWidget.searchFoundMsg;wnWidgetsFlashVars.WNGallery.resultsSeparatorDisplayMessage=wnSiteConfigVideo.galleryWidget.searchResultsSeparatorDisplayMsg;wnWidgetsFlashVars.WNGallery.searchNoResultsMainWindowMessage=wnSiteConfigVideo.galleryWidget.searchNoResultsMainWinMsg;wnWidgetsFlashVars.WNGallery.categoryNoResultsMainWindowMessage=wnSiteConfigVideo.galleryWidget.catNoResultsWinMsg;wnWidgetsFlashVars.WNGallery.searchButtonText=wnSiteConfigVideo.galleryWidget.searchBtnText;wnWidgetsFlashVars.WNGallery.searchLabelText=wnSiteConfigVideo.galleryWidget.searchLabelText;wnWidgetsFlashVars.WNGallery.hideResultsLabelText=wnSiteConfigVideo.galleryWidget.hideResultsText;wnWidgetsFlashVars.WNGallery.showResultsLabelText=wnSiteConfigVideo.galleryWidget.showResultsText;wnWidgetsFlashVars.WNGallery.moreTabLabelText=wnSiteConfigVideo.galleryWidget.moreTabText;wnWidgetsFlashVars.WNGallery.strCat="";wnWidgetsFlashVars.WNGallery.hostDomain=wnSiteConfigGeneral.baseUrl;wnWidgetsFlashVars.WNGallery.affiliate=wnSiteConfigGeneral.affiliateName;wnWidgetsFlashVars.WNGallery.imgPath=wnSiteConfigVideo.imagePath;wnWidgetsFlashVars.WNGallery.topCategoryHeadline=wnSiteConfigVideo.galleryWidget.topCatHeadline;wnWidgetsFlashVars.WNGallery.categoryXMLPath=wnSiteConfigVideo.galleryWidget.catXMLPath;wnWidgetsFlashVars.WNGallery.clipBaseXMLPath="";wnWidgetsFlashVars.WNGallery.clipId="";wnWidgetsFlashVars.WNGallery.listItemGraphicPosition=wnSiteConfigVideo.galleryWidget.listItemGfxPos;wnWidgetsFlashVars.WNGallery.staticImgPath=wnSiteConfigGeneral.staticFarmImagePrefix;wnWidgetsFlashVars.WNGallery.playerWidth=wnSiteConfigVideo.galleryWidget.width;wnWidgetsFlashVars.WNGallery.playerHeight=wnSiteConfigVideo.galleryWidget.height;wnWidgetsFlashVars.WNGallery.listItemGraphicScaleStyle=wnSiteConfigVideo.galleryWidget.listItemScaleStyle;wnWidgetsFlashVars.WNGallery.rows=wnSiteConfigVideo.galleryWidget.rows;wnWidgetsFlashVars.WNGallery.columns=wnSiteConfigVideo.galleryWidget.cols;wnWidgetsFlashVars.WNGallery.nextButtonText=wnSiteConfigVideo.galleryWidget.nextBtnText;wnWidgetsFlashVars.WNGallery.previousButtonText=wnSiteConfigVideo.galleryWidget.prevBtnText;wnWidgetsFlashVars.WNGallery.loadingMessage=wnSiteConfigVideo.canvasWidget.loadingMsg;wnWidgetsFlashVars.WNGallery.landingPage=wnSiteConfigVideo.landingPageUrl;wnWidgetsFlashVars.WNGallery.siteDefaultFormat=wnSiteConfigVideo.siteDefaultFormat;wnWidgetsFlashVars.WNGallery.playbackFormat=wnSiteConfigVideo.defaultPlaybackFormat;wnWidgetsFlashVars.WNGallery.playbackMaxBitrate=wnSiteConfigVideo.defaultMaxBitrate;wnWidgetsFlashVars.WNGallery.thirdpartytemplatemrssurl=wnSiteConfigVideo.thirdPartyMrssTemplateurl;wnWidgetsFlashVars.WNGallery.regexpmrssid=wnSiteConfigVideo.thirdPartyRegexMrssId;wnWidgetsFlashVars.WNGallery.useUAF=wnSiteConfigVideo.useUAF;wnWidgetsFlashVars.WNGallery.topVideoCatNo="";wnWidgetsFlashVars.WNGallery.tabHeight=26;wnWidgetsFlashVars.WNGallery.tabFontSize=10;wnWidgetsFlashVars.WNGallery.dropDownFontSize=10;wnWidgetsFlashVars.WNGallery.videoListNavigationHeight=25;wnWidgetsFlashVars.WNGallery.videoListPageNumberFontSize=10;wnWidgetsFlashVars.WNGallery.videoListItemTopPadding=14;wnWidgetsFlashVars.WNGallery.videoListItemSidePadding=10;wnWidgetsFlashVars.WNGallery.videoListImageWidth=83;wnWidgetsFlashVars.WNGallery.videoListItemTopPaddingPct=15;wnWidgetsFlashVars.WNGallery.videoListItemSidePaddingPct=5;wnWidgetsFlashVars.WNGallery.videoListImageHeight=63;wnWidgetsFlashVars.WNGallery.videoListImagePosition="left";wnWidgetsFlashVars.WNGallery.videoListItemHeadlineFontSize=10;wnWidgetsFlashVars.WNGallery.videoListItemDurationFontSize=10;wnWidgetsFlashVars.WNGallery.videoListItemPositionStyle="auto";wnWidgetsFlashVars.WNGallery.isPrimaryGallery="true";wnWidgetsFlashVars.WNGallery.defaultStyle=wnSiteConfigVideo.galleryWidget.defaultStylePackage;wnWidgetsFlashVars.WNGallery.showTooltip="false";wnWidgetsFlashVars.WNGallery.popupLandingPage="false";wnWidgetsFlashVars.WNGallery.leftAlignTabText="false";wnWidgetsFlashVars.WNGallery.showHeadline="true";wnWidgetsFlashVars.WNGallery.dynamicStreamingEnabled=wnSiteConfigVideo.dynamicStreamingEnabled;wnWidgetsFlashVars.WNGallery.enableSingleClipPage=wnSiteConfigVideo.enableSingleClipPage;wnWidgetsInstallFlashVars.WNGallery={};wnWidgetsInstallFlashVars.WNGallery=wnInstallFlashVarsTemplate;wnWidgetsInstallFlashVars.WNGallery.playerWidth=wnSiteConfigVideo.galleryWidget.width;wnWidgetsInstallFlashVars.WNGallery.playerHeight=wnSiteConfigVideo.galleryWidget.height;wnWidgetsAttributes.WNHeadline={};wnWidgetsAttributes.WNHeadline.uri=wnSiteConfigVideo.flashPath+"/WNHeadline.swf";wnWidgetsAttributes.WNHeadline.installUri=wnSiteConfigVideo.flashPath+"/WNWidgetInstaller.swf";wnWidgetsAttributes.WNHeadline.wmode=wnSiteConfigVideo.wmode;wnWidgetsFlashVars.WNHeadline={};wnWidgetsFlashVars.WNHeadline.playerWidth=wnSiteConfigVideo.headlineWidget.width;wnWidgetsFlashVars.WNHeadline.playerHeight=wnSiteConfigVideo.headlineWidget.height;wnWidgetsFlashVars.WNHeadline.fontSize=wnSiteConfigVideo.headlineWidget.fontSize;wnWidgetsFlashVars.WNHeadline.defaultStyle=wnSiteConfigVideo.headlineWidget.defaultStylePackage;wnWidgetsFlashVars.WNHeadline.loadingMessage=wnSiteConfigVideo.canvasWidget.loadingMsg;wnWidgetsFlashVars.WNHeadline.defaultTitleText=wnSiteConfigVideo.headlineWidget.defaultTitleText;wnWidgetsFlashVars.WNHeadline.slideshowHeadline="";wnWidgetsFlashVars.WNHeadline.hasImageCount="true";wnWidgetsInstallFlashVars.WNHeadline={};wnWidgetsInstallFlashVars.WNHeadline=wnInstallFlashVarsTemplate;wnWidgetsInstallFlashVars.WNHeadline.playerWidth=wnSiteConfigVideo.headlineWidget.width;wnWidgetsInstallFlashVars.WNHeadline.playerHeight=wnSiteConfigVideo.headlineWidget.height;wnWidgetsAttributes.WNTicker={};wnWidgetsAttributes.WNTicker.uri=wnSiteConfigVideo.flashPath+"/WNTicker.swf";wnWidgetsAttributes.WNTicker.installUri=wnSiteConfigVideo.flashPath+"/WNWidgetInstaller.swf";wnWidgetsAttributes.WNTicker.wmode=wnSiteConfigVideo.wmode;wnWidgetsFlashVars.WNTicker={};wnWidgetsFlashVars.WNTicker.playerWidth=wnSiteConfigVideo.tickerWidget.width;wnWidgetsFlashVars.WNTicker.playerHeight=wnSiteConfigVideo.tickerWidget.height;wnWidgetsFlashVars.WNTicker.fontSize="10";wnWidgetsFlashVars.WNTicker.defaultStyle=wnSiteConfigVideo.tickerWidget.defaultStylePackage;wnWidgetsFlashVars.WNTicker.loadingMessage=wnSiteConfigVideo.canvasWidget.loadingMsg;wnWidgetsInstallFlashVars.WNTicker={};wnWidgetsInstallFlashVars.WNTicker=wnInstallFlashVarsTemplate;wnWidgetsInstallFlashVars.WNTicker.playerWidth=wnSiteConfigVideo.tickerWidget.width;wnWidgetsInstallFlashVars.WNTicker.playerHeight=wnSiteConfigVideo.tickerWidget.height;wnWidgetsInstallFlashVars.WNInfoPane={};wnWidgetsInstallFlashVars.WNInfoPane=wnInstallFlashVarsTemplate;wnWidgetsInstallFlashVars.WNInfoPane.playerWidth=wnSiteConfigVideo.infoWidget.width;wnWidgetsInstallFlashVars.WNInfoPane.playerHeight=wnSiteConfigVideo.infoWidget.height;wnWidgetsInstallFlashVars.WNInfoPane.failSafeSummaryImageText=wnSiteConfigVideo.defaultSummaryText;wnWidgetsFlashVars.WNInfoPane={};wnWidgetsFlashVars.WNInfoPane.playerWidth=wnSiteConfigVideo.infoWidget.width;wnWidgetsFlashVars.WNInfoPane.playerHeight=wnSiteConfigVideo.infoWidget.height;wnWidgetsFlashVars.WNInfoPane.summaryFontSize="8";wnWidgetsFlashVars.WNInfoPane.headlineFontSize="10";wnWidgetsFlashVars.WNInfoPane.durationFontSize="8";wnWidgetsFlashVars.WNInfoPane.hasDuration="true";wnWidgetsFlashVars.WNInfoPane.hasSummary="true";wnWidgetsFlashVars.WNInfoPane.hasImage="true";wnWidgetsFlashVars.WNInfoPane.hasHeadline="true";wnWidgetsFlashVars.WNInfoPane.hasDateStamp="true";wnWidgetsFlashVars.WNInfoPane.hasPhotoCredit="true";wnWidgetsFlashVars.WNInfoPane.imageWidth="83";wnWidgetsFlashVars.WNInfoPane.imageHeight="63";wnWidgetsFlashVars.WNInfoPane.sidePadding="3";wnWidgetsFlashVars.WNInfoPane.topPadding="3";wnWidgetsFlashVars.WNInfoPane.imagePosition="left";wnWidgetsFlashVars.WNInfoPane.positionStyle="auto";wnWidgetsFlashVars.WNInfoPane.topPaddingPct="8";wnWidgetsFlashVars.WNInfoPane.sidePaddingPct="1";wnWidgetsFlashVars.WNInfoPane.defaultStyle=wnSiteConfigVideo.infoWidget.defaultStylePackage;wnWidgetsFlashVars.WNInfoPane.loadingMessage=wnSiteConfigVideo.canvasWidget.loadingMsg;wnWidgetsAttributes.WNInfoPane={};wnWidgetsAttributes.WNInfoPane.uri=wnSiteConfigVideo.flashPath+"/WNInfoPane.swf";wnWidgetsAttributes.WNInfoPane.installUri=wnSiteConfigVideo.flashPath+"/WNWidgetInstaller.swf";wnWidgetsAttributes.WNInfoPane.wmode=wnSiteConfigVideo.wmode;wnWidgetsFlashVars.WNGraphicsHeader={};wnWidgetsFlashVars.WNGraphicsHeader.playerWidth="";wnWidgetsFlashVars.WNGraphicsHeader.playerHeight="";wnWidgetsFlashVars.WNGraphicsHeader.graphicsHeaderImageUrl="/contentmgmt/images/videoHEADER_graphic.jpg";wnWidgetsFlashVars.WNGraphicsHeader.graphicsHeaderClickUrl="";wnWidgetsInstallFlashVars.WNGraphicsHeader={};wnWidgetsInstallFlashVars.WNGraphicsHeader=wnInstallFlashVarsTemplate;wnWidgetsInstallFlashVars.WNGraphicsHeader.playerWidth="";wnWidgetsInstallFlashVars.WNGraphicsHeader.playerHeight="";wnWidgetsFlashVars.WNGraphicsFooter={};wnWidgetsFlashVars.WNGraphicsFooter.playerWidth="";wnWidgetsFlashVars.WNGraphicsFooter.playerHeight="";wnWidgetsFlashVars.WNGraphicsFooter.graphicsFooterImageUrl="/contentmgmt/images/videoFOOTER_graphic.jpg";wnWidgetsFlashVars.WNGraphicsFooter.graphicsFooterClickUrl="";wnWidgetsInstallFlashVars.WNGraphicsFooter={};wnWidgetsInstallFlashVars.WNGraphicsFooter=wnInstallFlashVarsTemplate;wnWidgetsInstallFlashVars.WNGraphicsFooter.playerWidth="";wnWidgetsInstallFlashVars.WNGraphicsFooter.playerHeight="";wnWidgetsAttributes.WNImageCanvas={};wnWidgetsAttributes.WNImageCanvas.uri=wnSiteConfigVideo.flashPath+"/WNImageCanvas.swf";wnWidgetsAttributes.WNImageCanvas.installUri=wnSiteConfigVideo.flashPath+"/WNWidgetInstaller.swf";wnWidgetsAttributes.WNImageCanvas.wmode=wnSiteConfigVideo.wmode;wnWidgetsFlashVars.WNImageCanvas={};wnWidgetsFlashVars.WNImageCanvas.playerWidth=wnSiteConfigVideo.imageCanvasWidget.width;wnWidgetsFlashVars.WNImageCanvas.playerHeight=wnSiteConfigVideo.imageCanvasWidget.height;wnWidgetsFlashVars.WNImageCanvas.defaultStyle=wnSiteConfigVideo.imageCanvasWidget.defaultStylePackage;wnWidgetsFlashVars.WNImageCanvas.affiliate=wnSiteConfigGeneral.affiliateName;wnWidgetsFlashVars.WNImageCanvas.enableSummaryPane="false";wnWidgetsFlashVars.WNImageCanvas.hasSummary="true";wnWidgetsFlashVars.WNImageCanvas.hasDateStamp="true";wnWidgetsFlashVars.WNImageCanvas.hasPhotoCredit="true";wnWidgetsFlashVars.WNImageCanvas.landingPage=wnSiteConfigVideo.slideShowLandingPageUrl;wnWidgetsFlashVars.WNImageCanvas.hostDomain=wnSiteConfigGeneral.baseUrl;wnWidgetsFlashVars.WNImageCanvas.isInCanvasAdModeEnabled="false";wnWidgetsFlashVars.WNImageCanvas.inCanvasAdFrequency=wnSiteConfigVideo.slideShowInCanvasAdFreq;wnWidgetsFlashVars.WNImageCanvas.companionAdFrequency=wnSiteConfigVideo.slideShowCompanionAdFreq;wnWidgetsInstallFlashVars.WNImageCanvas={};wnWidgetsInstallFlashVars.WNImageCanvas=wnInstallFlashVarsTemplate;wnWidgetsInstallFlashVars.WNImageCanvas.playerWidth=wnSiteConfigVideo.imageCanvasWidget.width;wnWidgetsInstallFlashVars.WNImageCanvas.playerHeight=wnSiteConfigVideo.imageCanvasWidget.height;wnWidgetsAttributes.WNImageGallery={};wnWidgetsAttributes.WNImageGallery.uri=wnSiteConfigVideo.flashPath+"/WNImageGallery.swf";wnWidgetsAttributes.WNImageGallery.installUri=wnSiteConfigVideo.flashPath+"/WNWidgetInstaller.swf";wnWidgetsAttributes.WNImageGallery.wmode=wnSiteConfigVideo.wmode;wnWidgetsFlashVars.WNImageGallery={};wnWidgetsFlashVars.WNImageGallery.playerWidth=wnSiteConfigVideo.imageGalleryWidget.width;wnWidgetsFlashVars.WNImageGallery.playerHeight=wnSiteConfigVideo.imageGalleryWidget.height;wnWidgetsFlashVars.WNImageGallery.defaultStyle=wnSiteConfigVideo.imageGalleryWidget.defaultStylePackage;wnWidgetsFlashVars.WNImageGallery.helpPage=wnSiteConfigVideo.helpPageUrl;wnWidgetsFlashVars.WNImageGallery.landingPage=wnSiteConfigVideo.slideShowLandingPageUrl;wnWidgetsFlashVars.WNImageGallery.isPrimaryGallery="true";wnWidgetsFlashVars.WNImageGallery.hostDomain=wnSiteConfigGeneral.baseUrl;wnWidgetsFlashVars.WNImageGallery.hasShare="true";wnWidgetsFlashVars.WNImageGallery.popupLandingPage="false";wnWidgetsFlashVars.WNImageGallery.isSingleImageGallery="false";wnWidgetsInstallFlashVars.WNImageGallery={};wnWidgetsInstallFlashVars.WNImageGallery=wnInstallFlashVarsTemplate;wnWidgetsInstallFlashVars.WNImageGallery.playerWidth=wnSiteConfigVideo.imageGalleryWidget.width;wnWidgetsInstallFlashVars.WNImageGallery.playerHeight=wnSiteConfigVideo.imageGalleryWidget.height;if(typeof $wn=="undefined"){$wn=jQuery}var WNVideoWidgets=function(){var f=wnUserAgentParser.getOS();var h=window.location;var b=document.title.slice(0,47)+" - Flash Player Installation";this.installParams="?MMredirectURL="+h+"&MMdoctitle="+b+"&MMplayerType=";this.isIE=(navigator.appVersion.indexOf("MSIE")!=-1)?true:false;this.isMac=(navigator.appVersion.toLowerCase().indexOf("mac")!=-1)?true:false;this.isOpera=(navigator.userAgent.indexOf("Opera")!=-1)?true:false;if(!wn_isMobile&&window.opener!=null){try{if(typeof(window.opener.wng_pageInfo)!="undefined"){wn_isMobile=window.opener.wng_pageInfo.isMobile}}catch(g){wnLog("Error: Permission denied to access property 'wng_pageInfo'. window.opener properties aren't accessable from the child window.")}}this.useHtml5=navigator.userAgent.match(/(iPhone|iPod|iPad)/)||wnVideoUtils.getQS("wnHtml5")=="true"||wn_isMobile;this.useAmpPlayer=wnVideoUtils.getQS("wnampplayer")=="true"||wnSiteConfigVideo.enableAkamaiPlayer;try{if(f.name.toLowerCase()=="android"&&(wn.contentaddons.betalist.indexOf("enableampandroid")>=0)){this.useAmpPlayer=true}}catch(g){}this.landingPage=wnWidgetsFlashVars.landingPage;this.objClip={};this.canvasObjectFlashVars="";var d=this.landingPage.lastIndexOf("?");var c=this.landingPage.lastIndexOf("&");var a=this.landingPage.length;if(wnVideoUtils.validateString(this.landingPage)){if(d>0){if(d==a||c==a){this.landingPage+=""}else{this.landingPage+="&"}}else{this.landingPage+="?"}}this.canvasObject={};if(wn_isMobile){$wn(window).resize(function(){for(var q in pageWidgets){var k=null;var n=null;for(var m in pageWidgets[q]){if(pageWidgets[q][m].widgetClassType=="WNGallery"){k=pageWidgets[q][m]}if(pageWidgets[q][m].widgetClassType=="WNVideoCanvas"||pageWidgets[q][m].widgetClassType=="WNVideoCanvas2"){n=pageWidgets[q][m]}}if(n!=null&&!wnVideoUtils.stringToBoolean(n.forceFlash)){if(typeof n.htmlVersion!=="undefined"){if(k!=null){var p=$wn("#"+k.htmlVersion.parentDivId);var o=$wn("#"+n.htmlVersion.parentDivId);if(o.parent()==p.parent()){if(p.position().top>(o.height()-10)){n.htmlVersion.resizeOnScreenFlip()}}else{n.htmlVersion.resizeOnScreenFlip()}}else{n.htmlVersion.resizeOnScreenFlip()}}if(typeof n.ampVersion!=="undefined"){if(k!=null){var p=$wn("#"+k.htmlVersion.parentDivId);var o=$wn("#"+n.ampVersion.parentDivId);if(o.parent()==p.parent()){if(p.position().top>(o.height()-10)){n.ampVersion.resizeOnScreenFlip()}}else{n.ampVersion.resizeOnScreenFlip()}}else{n.ampVersion.resizeOnScreenFlip()}}}}})}};WNVideoWidgets.prototype.GetEmbedCodeClipId=function(){if(wnVideoWidgets.objClip.objClip){return wnVideoWidgets.objClip.objClip.id}};WNVideoWidgets.prototype.GetEmbedCodeFlvUri=function(){if(wnVideoWidgets.objClip.objClip){return wnVideoWidgets.objClip.objClip.flvUri}};WNVideoWidgets.prototype.GetEmbedCodeThirdPartyMrssUrl=function(){if(wnVideoWidgets.objClip.objClip){return wnVideoWidgets.objClip.objClip.thirdpartymrssurl}};WNVideoWidgets.prototype.GetEmbedCodePartnerClipId=function(){if(wnVideoWidgets.objClip.objClip){return wnVideoWidgets.objClip.objClip.partnerclipid}};WNVideoWidgets.prototype.GetEmbedAdTag=function(){if(wnVideoWidgets.objClip.objClip){return wnVideoWidgets.objClip.objClip.adTag}};WNVideoWidgets.prototype.GetEmbedCodeLandingPage=function(){if(wnVideoWidgets.objClip.objClip){return wnVideoWidgets.objClip.objClip.landingPage}};WNVideoWidgets.prototype.GetEmbedCodeIsLandingPageOverride=function(){if(wnVideoWidgets.objClip.objClip){return wnVideoWidgets.objClip.objClip.islandingPageoverride}};WNVideoWidgets.prototype.StripWhitespace=function(a){var b=a.replace(/\s{3,}/g,"  ");return b};WNVideoWidgets.prototype.Strip=function(c,f){var b,a;var d="";for(b=0;b<f.length;b++){a=f.charAt(b);if(c.indexOf(a)<0){d+=a}}return d};WNVideoWidgets.prototype.WNEncodeURIComponent=function(b,a){if(a!=parseInt(a)){a=1}else{if(a==0){return b}}if(a==1){return encodeURIComponent(b)}else{return encodeURIComponent(this.WNEncodeURIComponent(b,a-1))}};WNVideoWidgets.prototype.WNDecodeURIComponent=function(b,a){if(a!=parseInt(a)){a=1}else{if(a==0){return b}}if(a==1){return decodeURIComponent(b)}else{return decodeURIComponent(this.WNDecodeURIComponent(b,a-1))}};WNVideoWidgets.prototype.RegExpExtractDigit=function(k,h){h=unescape(h);var g="";var f=new RegExp(h);if(f.test(k)){var d=f.exec(k);var a=d[0];var b=/\d+/;var c=b.exec(a);g=c[0]}return g};WNVideoWidgets.prototype.ValidateEmail=function(a,f){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;var d=[];if(f){a=a.replace(/,/g,";");d=a.split(";")}if(d.length>=1){for(var c=0;c<d.length;c++){if(!b.test(this.Strip(" ",d[c]))){return false}}}else{if(!b.test(a)){return false}}return true};WNVideoWidgets.prototype.handleEvent=function(a){if(a.valid==true){switch(a.event.type.toLowerCase()){case"newclip":case"play":case"duration":case"resume":case"ended":case"fullscreen":case"volumechange":case"mute":case"unmute":case"email":case"embed":case"start":case"stop":case"next":case"previous":case"gallerynext":case"galleryprevious":wnVideoWidgets.reportAnalytics(a);case"pause":if(a.clip.hostPlayer=="html"){wnVideoWidgets.reportAnalytics(a)}break;case"user_pause":a.event.type="pause";wnVideoWidgets.reportAnalytics(a);break;case"clipended":a.event.type="mediaended";wnVideoWidgets.reportAnalytics(a);break;default:}}};WNVideoWidgets.prototype.reportAnalytics=function(g){var f=g.event;var d=g.clip;var b=false;if(d.isPreRoll||d.isPostRoll){b=true}if(!d.currentTime){d.currentTime=0;d.currentTimePct=0}var h=1;if(d.hostPlayer=="flash"){h=1000}d.currentTimePct=parseFloat((d.currentTime/d.duration)*h);d.currentTime=parseFloat(d.currentTime);d.duration=parseFloat(d.duration/h);if(typeof(g.system)=="undefined"||g.system=="video"){var c=Namespace_VideoReporting_Worldnow.logVideoEventParameters(f.type,d.headline,d.currentTime,d.id,d.adTag,"FlashPlayer.wnfl",d.affiliateName,d.ownerAffiliateName,b,"","","","",d.url,d.duration,d.currentTimePct,"","","","STANDARD - HTML",wnSiteConfigVideo.enableExpressReports,"","","",d.taxonomy1,d.taxonomy2,d.taxonomy3)}else{var a=Namespace_VideoReporting_Worldnow.logSlideShowEventParameters(f.type,encodeURIComponent(escape(d.headline)),encodeURIComponent(escape(d.slideshowHeadline)),d.widgetId,d.url,d.adTag,"",d.ownerAffiliateName,"",d.index)}};WNVideoWidgets.prototype.GetTimeString=function(d){var a=Math.floor(d/3600);var c=Math.floor((d%3600)/60);var h=Math.floor(d%60);var g=a.toString();var f=c.toString();var b=h.toString();if(a<10){g="0"+g}if(c<10){f="0"+f}if(h<10){b="0"+b}if(g=="00"){return f+":"+b}else{return g+":"+f+":"+b}};WNVideoWidgets.prototype.ConfirmReupload=function(b,a){return confirm('"'+b+'" '+a)};WNVideoWidgets.prototype.GetElementPosX=function(a){var b=0;if(a.offsetParent){while(1){b+=a.offsetLeft;if(!a.offsetParent){break}a=a.offsetParent}}else{if(a.x){b+=a.x}}return b};WNVideoWidgets.prototype.GetElementPosY=function(b){var a=0;if(b.offsetParent){while(1){a+=b.offsetTop;if(!b.offsetParent){break}b=b.offsetParent}}else{if(b.y){a+=b.y}}return a};WNVideoWidgets.prototype.SetVASTCompanions=function(b){var d=b.companions;var m=b.adProps;var c={"490x25":["WNAd22"],"120x240":["WNAd23"],"120x60":["WNAd28"],"120x600":["WNAd14"],"180x150":["WNAd20"],"468x60":["WNAd40","WNAd104"],"728x90":["WNAd41","WNAd46","WNAd105","WNAd106"],"160x600":["WNAd42"],"300x250":["WNAd43","WNAd103"],"300x150":["WNAd101"],"300x75":["WNAd44"],"500x300":["WNAd49"]};var f,a,h=[];for(var n=0;n<d.length;n++){a=wnGetVastAdHtml(d[n],this);f=d[n].width+"x"+d[n].height;if(c[f]){for(var g=0;g<c[f].length;g++){if(wnVideoUtils.validateString(d[n].htmlResource)&&d[n].htmlResource.toString().toLowerCase().indexOf("<iframe")<0&&d[n].htmlResource.toString().toLowerCase().indexOf("<script")>-1){Worldnow.AdMan.loadVastHtmlAd(c[f][g],a,d[n]);Worldnow.AdMan.loadVastHtmlAd(c[f][g],a,d[n])}else{Worldnow.AdMan.loadVastAd(c[f][g],a,d[n])}h.push(c[f][g])}}}var k={wncc:m.wncc,apptype:m.apptype,owner:m.owner};var o=wnCompanionAds.split(",");for(var g=0;g<o.length;g++){o[g]=wnVideoUtils.trim(o[g]);if(h.join().length==0||h.join().indexOf(o[g])<0){Worldnow.AdMan.reloadAd(o[g],k)}}};WNVideoWidgets.prototype.DisplaySilverlightScreen=function(m){var f="WNVideoCanvas";var h=m.domId.split("div");var g=h[0].substr(f.length);if(g==undefined||g==""){return false}var k="div"+h[1];var c;for(var b in this.canvasObject){if(b==g){c=this.canvasObject[b]}}if(c==undefined||c==""){return false}var a=c+"WNSilverlight";var d=document.getElementById(a);if(d==undefined){this.RenderSilverlightScreen(m,k,c,a)}else{WNSilverlightTrigger(m,c,a)}};WNVideoWidgets.prototype.RenderSilverlightScreen=function(m,k,d,c){var b=document.getElementById(k);var h=document.createElement("div");h.setAttribute("id",c);b.appendChild(h);var f=c+"InstallerPrompt";var g=document.createElement("div");g.setAttribute("id",f);b.appendChild(g);if(Silverlight.isInstalled("1.0")){m[WNConstFlashLayerDivNameKey.toString()]=d;m[WNConstSilverlightLayerDivNameKey.toString()]=c;WNRenderSilverlight(m)}else{var a=document.getElementById(d);g.innerHTML='<a href="http://go.microsoft.com/fwlink/?linkid=124807"><img src="'+wnSilverlightBaseUrl+'/getSilverlight.jpg" border="0" alt="Get Silverlight" title="Get Silverlight" width="'+a.width+'" height="'+a.height+'"/></a>';a.width=1;a.height=1;g.style.display="block";g.style.top=0}};WNVideoWidgets.prototype.FireReportingBeacon=function(){try{var a=wnVideoWidgets.canvasObject;for(var b in a){document.getElementById(a[b]).FireBeacon()}}catch(c){}};WNVideoWidgets.prototype.getSkin=function(a,b){return pageWidgets[a][b].skin};WNVideoWidgets.prototype.closeAddThisPane=function(a){var b=document.getElementById(a+"_addthis_button");if(b!=null){b.style.visibility="hidden";b.style.zIndex="-1"}};WNVideoWidgets.prototype.openAddThisPane=function(d,o,p,k,b){var a=document.getElementById(p);var c=b?20:a.offsetWidth/2-120;var g=b?20:(a.offsetHeight-32)/2-120;if(c<0){c=15}if(g<0){g=0}var n=(/ipad/i.test(navigator.userAgent.toLowerCase())||wnVideoWidgets.useAmpPlayer);var h=document.getElementById(p+"_addthis_button");if(h!=null){a.removeChild(h)}if(!n&&wn_isMobile){h=document.createElement("div")}else{h=document.createElement("a")}h.setAttribute("id",p+"_addthis_button");h.style.position="absolute";h.style.marginLeft=c+"px";h.style.marginTop=g+"px";a.insertBefore(h,a.childNodes[0]);if(!n&&wn_isMobile){var m='<div id="'+p+'_addthis_toolbox" class="addthis_toolbox addthis_default_style addthis_16x16_style"addthis:url="'+unescape(d)+'" addthis:title="'+unescape(o)+'" addthis:description="'+unescape(k)+'" style="width: 110px;"><a class="addthis_button_facebook"></a><a class="addthis_button_twitter"></a><a class="addthis_button_gmail"></a><a class="addthis_button_reddit"></a><a class="addthis_button_more"></a></div>';$wn(h).html(m);addthis.toolbox("#"+p+"_addthis_toolbox")}else{var f={url:unescape(d),title:unescape(o),description:unescape(k)};addthis.button("#"+p+"_addthis_button",{},f)}h.style.visibility=b?"visible":"hidden";h.style.zIndex="200";if(!b){document.getElementById(p+"_addthis_button").onmouseover()}};WNVideoWidgets.prototype.getClipPageUrl=function(c){var b="";var a=new RegExp("://manage[A-Za-z0-9.]*.worldnow.com");if(a.test(document.location.href)==false){b=wnSiteConfigGeneral.baseUrl}else{b=document.location.href.substr(0,document.location.href.indexOf("worldnow.com")+12)}if(b.indexOf("http:")<0&&b.indexOf("https:")<0){b="http://"+b}if(wnVideoUtils.validateString(c.id)){b+="/clip/"+c.id+"/"+c.pageUrl}return b};WNVideoWidgets.prototype.getLinkToVideo=function(c,f){var b="";var d=wnVideoUtils.stringToBoolean(f.enableSingleClipPage);var a=decodeURIComponent(f.landingPage);if(!wnVideoUtils.validateString(a)&&!d){b="http://"+f.hostDomain+"/global/video/popup/pop_playerLaunch.asp?vt1=v&clipFormat="+f.siteDefaultFormat+"&clipId1="+c.id+"&at1="+c.adTag+"&h1="+c.headline+"&flvUri=&partnerclipid="}else{if(d){b=wnVideoWidgets.getClipPageUrl(c);if(c.isLiveStream){b+="?"}}else{if(a.indexOf("?")>0){b=a+"&autoStart=true&topVideoCatNo=default"}else{b=a+"?autoStart=true&topVideoCatNo=default"}if(wnVideoUtils.validateString(c.id)){b+="&clipId="+c.id}}if(c.isLiveStream){b=document.location.href}}return b};WNVideoWidgets.prototype.getAmpParams=function(a){return $wn("#"+a).data("widget").canvas.getParams()};WNVideoWidget=function(p_id,p_target,p_key){this.widgetClassType=p_id;this.wnFeedObject={};this.wnFeedObject.feeds=[];for(var i in wnWidgetsAttributes[p_id]){this[i]=wnWidgetsAttributes[p_id][i]}if(typeof p_key=="undefined"){p_key=""}this.idKey=wnVideoUtils.validateString(p_key)?p_key:"DEFAULT";this.widgetType=p_id;this.id=p_id+this.idKey;if(p_target.toLowerCase().indexOf("gallery")>-1){eval("document."+this.id+p_target+"_copy = this")}this.flashVars={};for(var i in wnWidgetsFlashVars[p_id]){this.flashVars[i]=wnWidgetsFlashVars[p_id][i]}this.flashVars.domId=this.id+p_target;this.flashVars.idKey=this.idKey;this.installFlashVars=wnWidgetsInstallFlashVars[p_id];this.uri;this.installUri;this.wmode;this.targetDiv=wnVideoUtils.validateString(p_target)?p_target:"div"+this.id;this.SetStylePackage(this.flashVars.defaultStyle);if(this.widgetClassType.indexOf(videoCanvasId)!=-1){wnVideoWidgets.canvasObject[this.idKey]=this.flashVars.domId}};WNVideoWidget.prototype.SetPreferredVideoFormat=function(a){switch(wnVideoUtils.trim(a).toUpperCase()){case"WMV":case"FLV":case"BOTH":wnPreferredVideoFormat=a;break}};WNVideoWidget.prototype.SetLiveStream=function(g,f,b,c,d,a){this.flashVars.videoType="livestream";this.flashVars.preferredFormat="WMV";this.flashVars.liveStreamUrl=g;this.flashVars.liveStreamUrlMobile=a;this.flashVars.liveStreamHeadline=f;this.flashVars.liveStreamAdTag=b;this.flashVars.liveStreamSummaryImgUrl=c;this.flashVars.liveStreamSecure=d};WNVideoWidget.prototype.SetFlashLiveStream=function(b){this.flashVars.videoType="livestream";this.flashVars.liveStreamUrl=b.strUrl;this.flashVars.StreamType="live";this.flashVars.liveStreamHeadline=b.strHeadline;this.flashVars.liveStreamAdTag=b.strAdTag;this.flashVars.liveStreamHasPreroll=b.hasPreroll;this.flashVars.liveStreamSummaryImgUrl=b.strSummaryImageUrl;this.flashVars.liveStreams=b.mobileStreams;if(typeof b.mobileStreams!=="undefined"&&b.mobileStreams!=null){for(var a=0;a<b.mobileStreams.length;a++){if(typeof b.mobileStreams[a]!=="undefined"&&b.mobileStreams[a]!=null){this.flashVars["wnms"+(a+1)]=b.mobileStreams[a].url}}}};WNVideoWidget.prototype.SetEmbeddedGallery=function(a,b){switch(a){case"wncategory":this.flashVars.hasEmbeddedGallery=true;this.flashVars.gallerySourceType="wncategory";if(parseInt(b)>0){this.flashVars.galleryId=parseInt(b)}break;case"wnstory":this.flashVars.hasEmbeddedGallery=true;this.flashVars.gallerySourceType="wnstory";if(parseInt(b)>0){this.flashVars.galleryId=parseInt(b)}break;case"mrss":this.flashVars.hasEmbeddedGallery=true;this.flashVars.gallerySourceType="mrss";this.flashVars.galleryDataUrl=b;break;case"feedsapi":this.flashVars.hasEmbeddedGallery=true;this.flashVars.gallerySourceType="feedsapi";this.flashVars.galleryDataUrl=b;break}};WNVideoWidget.prototype.SetStylePackage=function(c){var d={};try{d=wnDefaultPackage[this.widgetType][c];for(var a in d){this.flashVars[a]=d[a]}this.flashVars.defaultStyle=c}catch(b){}};WNVideoWidget.prototype.SetPlayerType=function(a){this.flashVars.playerType=a};WNVideoWidget.prototype.SetWidth=function(a){this.flashVars.playerWidth=a;this.installFlashVars.playerWidth=a};WNVideoWidget.prototype.SetHeight=function(a){this.flashVars.playerHeight=a;this.installFlashVars.playerHeight=a};WNVideoWidget.prototype.SetVariable=function(b,c){this.flashVars[b]=c;for(var a in this.installFlashVars){if(a==b){this.installFlashVars[a]=c}}};WNVideoWidget.prototype.SetVideoUrl=function(c,g,f,b,k,a,h){this.flashVars.partnerclipid=(h==undefined)?"":h;if(this.flashVars.partnerclipid!=""){c=""}this.flashVars.flvUri=(c==undefined)?"":c;this.flashVars.enableAds=(g==undefined)?true:g;this.flashVars.headline=(f==undefined)?"":f;this.flashVars.summary=(b==undefined)?"":b;this.flashVars.summaryImageUrl=(k==undefined)?"":k;this.flashVars.adTag=(a==undefined)?"":a;for(var d in this.installFlashVars){if(d=="flvUri"){this.installFlashVars[d]=this.flashVars.flvUri}if(d=="enableAds"){this.installFlashVars[d]=this.flashVars.enableAds}if(d=="headline"){this.installFlashVars[d]=this.flashVars.headline}if(d=="summary"){this.installFlashVars[d]=this.flashVars.summary}if(d=="summaryImageUrl"){this.installFlashVars[d]=this.flashVars.summaryImageUrl}if(d=="adTag"){this.installFlashVars[d]=this.flashVars.adTag}if(d=="partnerclipid"){this.installFlashVars[d]=this.flashVars.partnerclipid}}};WNVideoWidget.prototype.SetLandingPageUrl=function(a){this.flashVars.islandingPageoverride=true;this.flashVars.landingPage=a};WNVideoWidget.prototype.addImage=function(k,c,d,g,f,h,a,b){if(this.flashVars.images==undefined){this.flashVars.images="[]"}this.images=JSON.parse(this.flashVars.images);this.images.push({id:k,url:c,headline:d,description:g,credits:f,publishingDate:h,href:a,adTag:b});this.flashVars.images=JSON.stringify(this.images)};WNVideoWidgets.prototype.loadPrimarySlideshowData=function(c){for(var b in pageWidgets){for(var a in pageWidgets[b]){if(pageWidgets[b][a].widgetClassType=="WNImageGallery"&&pageWidgets[b][a].isPrimaryGallery!=undefined&&pageWidgets[b][a].isPrimaryGallery=="true"){pageWidgets[b][a].htmlVersion.renderFromJson(c);return 0}}}};WNVideoWidgets.prototype.isImageLoaded=function(a){if(typeof a.complete!="undefined"&&!a.complete){return false}if(typeof a.naturalWidth!="undefined"&&a.naturalWidth==0){return false}return true};WNVideoWidget.prototype.RenderWidget=function(){var f=document.getElementById(this.targetDiv);var n=this.flashVars.domId;var b;var d;var o=this.flashVars.playerWidth;var c=this.flashVars.playerHeight;var t="";if(this.widgetClassType=="WNGraphicsHeader"){f.innerHTML="<a href='"+this.flashVars.graphicsHeaderClickUrl+"' target='_blank'><img src='"+this.flashVars.graphicsHeaderImageUrl+"' style='border: 0px; width: "+this.flashVars.playerWidth+"px; height: "+this.flashVars.playerHeight+"px;'/></a>";return}if(this.widgetClassType=="WNGraphicsFooter"){f.innerHTML="<a href='"+this.flashVars.graphicsFooterClickUrl+"' target='_blank'><img src='"+this.flashVars.graphicsFooterImageUrl+"' style='border: 0px; width: "+this.flashVars.playerWidth+"px; height: "+this.flashVars.playerHeight+"px;'/></a>";return}d=this.uri+"?ver="+wnSiteConfigGeneral.cacheVersionBuster;autoInstallUri=this.installUri+wnVideoWidgets.installParams;t=this.flashVars;if(this.widgetClassType=="WNVideoCanvas"||this.widgetClassType=="WNVideoCanvas2"){if(wnVideoUtils.getQS("clipid")!=undefined){t.clipId=wnVideoUtils.getQS("clipid")}if(wnVideoUtils.getQS("autostart")!=undefined){t.isAutoStart=wnVideoUtils.getQS("autostart")}if(t.flvUri!=undefined){t.clipId=""}if(t.regexpmrssid!=undefined){t.regexpmrssid=encodeURIComponent(encodeURIComponent(encodeURIComponent(t.regexpmrssid)))}if(t.thirdpartytemplatemrssurl!=undefined){t.thirdpartytemplatemrssurl=encodeURIComponent(encodeURIComponent(t.thirdpartytemplatemrssurl))}if(t.landingPage!=undefined){t.landingPage=encodeURIComponent(encodeURIComponent(t.landingPage))}t.isSafaiOnMac=wnVideoWidgets.isMac&&(/WebKit/i.test(navigator.userAgent));if(wnVideoUtils.getQS("streamType")!=undefined&&wnVideoUtils.getQS("clipid")==undefined){t.clipId="";var g={strUrl:wnVideoUtils.getQS("flvUri"),streamType:wnVideoUtils.getQS("streamType"),strHeadline:wnVideoUtils.getQS("headline"),strAdTag:wnVideoUtils.getQS("adTag"),hasPreroll:wnVideoUtils.getQS("enableAds"),mobileStreams:[]};var w=wnVideoUtils.getQS("wnms1");var v=wnVideoUtils.getQS("wnms2");var s=wnVideoUtils.getQS("wnms3");if(typeof w!=="undefined"&&w!=""||typeof v!=="undefined"&&v!=""||typeof s!=="undefined"&&s!=""){if(typeof w!=="undefined"&&w!=""){g.mobileStreams.push({url:w,type:"video/mp4"})}if(typeof v!=="undefined"&&v!=""){g.mobileStreams.push({url:v,type:"video/mp4"})}if(typeof s!=="undefined"&&s!=""){g.mobileStreams.push({url:s,type:"video/mp4"})}}this.SetFlashLiveStream(g)}try{if(!this.skin){this.SetSkin(CANVAS_SKINS[canvasDefaultSkinPackage][canvasDefaultSkin])}}catch(u){}try{if(parseInt(t.playerHeight)<300){if(!t.overlayShareButtons){t.overlayShareButtons="email,link,share"}}}catch(u){}}if(this.widgetClassType=="WNGallery"){if(t.regexpmrssid!=undefined){t.regexpmrssid=encodeURIComponent(encodeURIComponent(encodeURIComponent(t.regexpmrssid)))}if(t.thirdpartytemplatemrssurl!=undefined){t.thirdpartytemplatemrssurl=encodeURIComponent(encodeURIComponent(t.thirdpartytemplatemrssurl))}if(t.landingPage!=undefined){t.landingPage=encodeURIComponent(encodeURIComponent(t.landingPage))}}if(this.widgetClassType=="WNImageGallery"){if(wnVideoUtils.getQS("widgetId")!=undefined&&(this.flashVars.isPrimaryGallery=="true"||this.flashVars.isPrimaryGallery==true)){t.urlWidgetId=wnVideoUtils.getQS("widgetId")}if(wnVideoUtils.getQS("slideshowImageId")!=undefined){t.imageId=wnVideoUtils.getQS("slideshowImageId")}if(wnVideoUtils.getQS("slideshowImageUrl")!=undefined){t.imageUrl=wnVideoUtils.getQS("slideShowimageUrl")}if(wnVideoUtils.getQS("slideshowFeedUrl")!=undefined){t.feedUrl=wnVideoUtils.getQS("slideshowFeedUrl")}}if(this.widgetClassType=="WNImageCanvas"&&wnVideoUtils.getQS("widgetId")!=undefined){t.urlWidgetId=wnVideoUtils.getQS("widgetId")}var x={allowFullScreen:true,wmode:this.wmode,movie:d,quality:"high",allowScriptAccess:"always",bgcolor:"#FFFFFF"};var h={id:n,name:n};var m="10.1.0";forceFlash=false;if(wn_isMobile&&(this.widgetClassType=="WNVideoCanvas"||this.widgetClassType=="WNVideoCanvas2"||this.widgetClassType=="WNGallery")){var z=swfobject.getFlashPlayerVersion();if(wnSiteConfigVideo.mobileForceFlash==true){if(z.major>=10){forceFlash=true}}else{if(!wnVideoWidgets.useHtml5){if(z.major>=10){forceFlash=true}}}}if(wnVideoUtils.getQS("wnhtml5")=="true"){forceFlash=false}this.flashVars.forceFlash=forceFlash;var a=c>30?15:Math.floor(c/2);var r='<div style="text-align:center;font-family:Arial, Verdana;font-size:13px; font-weight: bold;background-color:#eee;overflow: hidden;';if(c>2&&o>2){r+="border: 1px solid #000;"}if(c>2){r+="height:"+(c-2)}else{r+="height:"+c}if(o>2){r+=";width:"+(o-2)}else{r+=";width:"+o}r+='px;"><div style="margin:'+a+'px;">';if(this.widgetClassType=="WNVideoCanvas"||this.widgetClassType=="WNGallery"||this.widgetClassType=="WNVideoCanvas2"||this.widgetClassType=="WNImageCanvas"||this.widgetClassType=="WNImageGallery"){r+='<a style="color:#333;text-decoration:none;" href="http://www.macromedia.com/go/getflash/" target="_blank">You need to download the latest version of flash player to use this player</a><br/><br/>';r+='<a style="color:#333;text-decoration:none;" href="'+wnHelpPageUrl+'" target="_blank">Need Help?</a>'}r+="</div></div>";if(wnVideoWidgets.useHtml5){r=""}f.innerHTML='<div class="wn-share-pane"></div>';f.innerHTML+='<div id="OverLay" style="display:none;"></div>';f.innerHTML+='<div id="'+n+'_swfObject">'+r+"</div>";if(!wnVideoWidgets.useHtml5&&!wnVideoWidgets.useAmpPlayer){$wn("#"+n+"_swfObject").hide()}if(wnVideoUtils.validateString(t.toolsShareButtons)){if(t.toolsShareButtons.indexOf("email")>-1){toolsShareButtons=t.toolsShareButtons.split(",");toolsShareButtons.splice($wn.inArray("email",toolsShareButtons),1);if(toolsShareButtons.length>0){t.toolsShareButtons=toolsShareButtons.join(",")}else{t.toolsShareButtons="disabled"}}}else{t.toolsShareButtons="link,share,help"}if(wnVideoUtils.validateString(t.overlayShareButtons)){if(t.overlayShareButtons.indexOf("email")>-1){overlayShareButtons=t.overlayShareButtons.split(",");overlayShareButtons.splice($wn.inArray("email",overlayShareButtons),1);if(overlayShareButtons.length>0){t.overlayShareButtons=overlayShareButtons.join(",")}else{t.overlayShareButtons="disabled"}}}else{t.overlayShareButtons="link,share,help"}for(var p in t){if(this.widgetClassType=="WNImageGallery"&&p=="images"){t.images=escape(t.images)}else{if(typeof t[p]!="object"&&p!="debugAdUrl"){t[p]=unescape(t[p])}}}if(pageWidgets[this.flashVars.idKey]==undefined){pageWidgets[this.flashVars.idKey]={}}if(this.flashVars.isPrimaryGallery!=null){this.flashVars.isPrimaryGallery=this.flashVars.isPrimaryGallery.toString().toLowerCase()}pageWidgets[this.flashVars.idKey][this.flashVars.domId]=this.flashVars;pageWidgets[this.flashVars.idKey][this.flashVars.domId].parentObject=this;pageWidgets[this.flashVars.idKey][this.flashVars.domId].widgetClassType=this.widgetClassType;pageWidgets[this.flashVars.idKey][this.flashVars.domId].isLoaded=false;pageWidgets[this.flashVars.idKey][this.flashVars.domId].isReady=false;pageWidgets[this.flashVars.idKey][this.flashVars.domId].skin=this.skin;var y=wnSiteConfigVideo.renderSlideShowAsHtml;var k=(this.flashVars.isSingleImageGallery&&this.flashVars.isSingleImageGallery.toLowerCase()=="true");var q=(getWigdetByType(this.idKey,"ic").htmlVersion!=undefined&&getWigdetByType(this.idKey,"c").widgetClassType==undefined&&getWigdetByType(this.idKey,"c2").widgetClassType==undefined);if(wnVideoWidgets.useAmpPlayer&&(this.widgetClassType=="WNVideoCanvas"||this.widgetClassType=="WNVideoCanvas2")){this.ampVersion=this.flashVars.ampVersion=new WNAmpVideoCanvas(this.targetDiv,this.flashVars)}else{if(wn_isMobile||wnVideoWidgets.useHtml5||k&&this.widgetClassType=="WNImageGallery"||y&&(this.widgetClassType=="WNImageGallery"||this.widgetClassType=="WNImageCanvas")||q&&(this.widgetClassType=="WNHeadline"||this.widgetClassType=="WNInfoPane")){if(typeof $wn==="undefined"){wnLog("no jquery")}else{switch(this.widgetClassType){case"WNVideoCanvas":case"WNVideoCanvas2":if(forceFlash){swfobject.embedSWF(d,n+"_swfObject",o,c,m,autoInstallUri,t,x,h,this.onRenderWidgetCallback)}else{this.htmlVersion=this.flashVars.htmlVersion=new WNVideoCanvas(this.targetDiv,this.flashVars)}break;case"WNGallery":if(forceFlash){swfobject.embedSWF(d,n+"_swfObject",o,c,m,autoInstallUri,t,x,h,this.onRenderWidgetCallback)}else{this.htmlVersion=this.flashVars.htmlVersion=new WNVideoGallery(this.targetDiv,this.flashVars)}break;case"WNImageGallery":this.htmlVersion=this.flashVars.htmlVersion=new WNImageGallery(this.targetDiv,this.flashVars,this.images);break;case"WNImageCanvas":this.htmlVersion=this.flashVars.htmlVersion=new WNImageCanvas(this.targetDiv,this.flashVars);break;case"WNHeadline":this.htmlVersion=this.flashVars.htmlVersion=new WNHeadline(this.targetDiv,this.flashVars);break;case"WNInfoPane":this.htmlVersion=this.flashVars.htmlVersion=new WNInfoPane(this.targetDiv,this.flashVars);break}}}else{swfobject.embedSWF(d,n+"_swfObject",o,c,m,autoInstallUri,t,x,h,this.onRenderWidgetCallback)}}if(this.widgetClassType=="WNVideoCanvas"||this.widgetClassType=="WNVideoCanvas2"){for(var p in this.flashVars){wnVideoWidgets.canvasObjectFlashVars+=p;wnVideoWidgets.canvasObjectFlashVars+="=";wnVideoWidgets.canvasObjectFlashVars+=this.flashVars[p];wnVideoWidgets.canvasObjectFlashVars+="&"}wnVideoWidgets.canvasObjectFlashVars=unescape(wnVideoWidgets.canvasObjectFlashVars);if(this.flashVars.videoType=="livestream"){WNSilverlightWidgetClass=this}}};WNVideoWidget.prototype.onRenderWidgetCallback=function(a){if(!a.success){$wn("#"+a.id).show()}};WNVideoWidget.prototype.SetGalleryTabHeight=function(a){this.flashVars.tabHeight=a};WNVideoWidget.prototype.SetGalleryTabBackground=function(b,a){this.flashVars.tabBackgroundColors=b+","+a};WNVideoWidget.prototype.SetGalleryTabSelectedBackground=function(a){this.flashVars.tabBackgroundSelectedColors=a};WNVideoWidget.prototype.SetGalleryTabSelectedBorderColor=function(a){this.flashVars.tabBackgroundSelectedBorderColor=a};WNVideoWidget.prototype.SetGalleryTabFontColors=function(a,b){this.flashVars.tabOffFaceColor=a;this.flashVars.tabOverFaceColor=b};WNVideoWidget.prototype.SetGalleryTabFontSize=function(a){this.flashVars.tabFontSize=a};WNVideoWidget.prototype.SetGalleryTabInnerBorderColors=function(b,a){this.flashVars.tabLeftBorderColor=b;this.flashVars.tabRightBorderColor=a};WNVideoWidget.prototype.SetGalleryDropDownTabOverBorderColor=function(a){this.flashVars.dropDownTabOverBorderColor=a};WNVideoWidget.prototype.SetGalleryDropDownBackground=function(b,a,d,c){this.flashVars.dropDownBackgroundColors=b+","+a+","+d+","+c};WNVideoWidget.prototype.SetGalleryDropDownBorderColor=function(a){this.flashVars.dropDownBorderColor=a};WNVideoWidget.prototype.SetGalleryDropDownShadowColor=function(a){this.flashVars.dropDownDropShadowColor=a};WNVideoWidget.prototype.SetGalleryDropDownInnerBorderColors=function(a,b){this.flashVars.dropDownTopBorderColor=a;this.flashVars.dropDownBottomBorderColor=b};WNVideoWidget.prototype.SetGalleryDropDownFontColors=function(b,c,a){this.flashVars.dropDownOffFaceColor=b;this.flashVars.dropDownOverFaceColor=c;this.flashVars.dropDownSelectedFaceColor=a};WNVideoWidget.prototype.SetGalleryDropDownFontSize=function(a){this.flashVars.dropDownFontSize=a};WNVideoWidget.prototype.SetVideoListBackground=function(b,a){this.flashVars.videoListBackgroundColors=b+","+a};WNVideoWidget.prototype.SetVideoListBorderColor=function(a){this.flashVars.videoListBorderColor=a};WNVideoWidget.prototype.SetVideoListItemInnerBorders=function(b,a){this.flashVars.videoListItemHighlightBorderColor=b;this.flashVars.videoListItemShadowBorderColor=a};WNVideoWidget.prototype.SetVideoListItemFontColors=function(a,b){this.flashVars.videoListItemOffFaceColor=a;this.flashVars.videoListItemOverFaceColor=b};WNVideoWidget.prototype.SetVideoListItemFontSizes=function(a,b){this.flashVars.videoListItemHeadlineFontSize=a;this.flashVars.videoListItemDurationFontSize=b};WNVideoWidget.prototype.SetVideoListItemImageSize=function(b,a){this.flashVars.videoListImageWidth=b;this.flashVars.videoListImageHeight=a};WNVideoWidget.prototype.SetVideoListNavigationHeight=function(a){this.flashVars.videoListNavigationHeight=a};WNVideoWidget.prototype.SetVideoListNavigationBackground=function(b,a){this.flashVars.videoListNavigationBackgroundColors=b+","+a};WNVideoWidget.prototype.SetVideoListNavigationBorderColor=function(a){this.flashVars.videoListNavigationBorderColor=a};WNVideoWidget.prototype.SetVideoListNavigationColors=function(a,b){this.flashVars.videoListNavigationOffFaceColor=a;this.flashVars.videoListNavigationOverFaceColor=b};WNVideoWidget.prototype.SetVideoListNavigationPageNumberColors=function(b,c,a){this.flashVars.videoListPageNumberOffColor=b;this.flashVars.videoListPageNumberOverColor=c;this.flashVars.videoListPageNumberSelectedColor=a};WNVideoWidget.prototype.SetVideoListNavigationPageNumberFontSize=function(a){this.flashVars.videoListPageNumberFontSize=a};WNVideoWidget.prototype.SetGallerySearchHeight=function(a){this.flashVars.gallerySearchFormHeight=a};WNVideoWidget.prototype.SetGallerySearchBackground=function(b,a){this.flashVars.searchBackgroundColors=b+","+a};WNVideoWidget.prototype.SetGallerySearchFontColors=function(a,b){this.flashVars.searchOffFaceColor=a;this.flashVars.searchOverFaceColor=b};WNVideoWidget.prototype.SetGallerySearchFormBorderColor=function(a){this.flashVars.searchFormBorderColor=a};WNVideoWidget.prototype.SetGallerySearchFormFontColor=function(a){this.flashVars.searchFormFaceColor=a};WNVideoWidget.prototype.SetGalleryCategory=function(a){this.flashVars.topVideoCatNo=a};WNVideoWidget.prototype.SetGalleryLeadClip=function(a){this.flashVars.clipId=a};WNVideoWidget.prototype.EnableControls=function(b){var c=this.widgetClassType;switch(c){case"WNGallery":var a=document.getElementById(this.flashVars.domId);if(a.EnableControls){a.EnableControls(b)}else{this.htmlVersion.enableControls(b)}break}};WNVideoWidget.prototype.SetReportingKeywords=function(a){this.flashVars.reportingKeywords=a};WNVideoWidget.prototype.SetAdvertisingKeywords=function(a){this.flashVars.advertisingKeywords=a};WNVideoWidget.prototype.AddUploadCategory=function(a){this.flashVars.categories=a};WNVideoWidget.prototype.AddUploadTitlePrefix=function(a){this.flashVars.titlePrefix=a};WNVideoWidget.prototype.SetAdvertisingZone=function(a){this.flashVars.advertisingZone=a};WNVideoWidget.prototype.EnableEmail=function(a){this.flashVars.hasEmail=a};WNVideoWidget.prototype.EnableHelp=function(a){this.flashVars.hasHelp=a};WNVideoWidget.prototype.EnableClosedCaption=function(a){this.flashVars.hasCC=a};WNVideoWidget.prototype.EnableFullScreen=function(a){this.flashVars.hasFullScreen=a};WNVideoWidget.prototype.SetErrorMessage=function(a){this.flashVars.errorMessage=a};WNVideoWidget.prototype.SetVideoScaleStyle=function(a){if(a.toLowerCase=="scaletofit"){a="0"}this.flashVars.playAtActualSize=a};WNVideoWidget.prototype.SetVideoSmoothingMode=function(a){this.flashVars.smoothingMode=a};WNVideoWidget.prototype.EnableAutoStart=function(a){this.flashVars.isAutoStart=a};WNVideoWidget.prototype.EnableMute=function(a){this.flashVars.isMute=a};WNVideoWidget.prototype.SetSummaryGraphicScaleStyle=function(a){this.flashVars.summaryGraphicScaleStyle=a};WNVideoWidget.prototype.SetCanvasBackgroundColors=function(a,b){this.flashVars.backgroundColors=a+","+b+","+b+","+a;this.flashVars.controlsBackgroundColors=a+","+b};WNVideoWidget.prototype.SetVideoControlsInnerBorderColors=function(a,b){this.flashVars.controlsButtonLeftBorderColor=a;this.flashVars.controlsButtonRightBorderColor=b};WNVideoWidget.prototype.SetVideoControlsColors=function(a,b){this.flashVars.controlsOffFaceColor=a;this.flashVars.controlsOverFaceColor=b};WNVideoWidget.prototype.SetVolumeSliderColors=function(a,b){this.flashVars.volumeSliderOffColor=a;this.flashVars.volumeSliderOverColor=b};WNVideoWidget.prototype.SetVideoSliderColors=function(b,a,c){this.flashVars.videoSliderBackgroundColor=b;this.flashVars.videoSliderLoadIndicatorColor=a;this.flashVars.videoSliderProgressIndicatorColor=c};WNVideoWidget.prototype.SetVideoSliderKnobColors=function(a,d,b,c){this.flashVars.videoSliderKnobBackgroundColors=a;this.flashVars.videoSliderKnobBorderColor=d;this.flashVars.videoSliderKnobOffFaceColor=b;this.flashVars.videoSliderKnobOverFaceColor=c};WNVideoWidget.prototype.SetCanvasOverlayBackgroundColor=function(a){this.flashVars.overlayBackgroundColors=a};WNVideoWidget.prototype.SetCanvasOverlayFontColors=function(b,c,a){this.flashVars.overlayOffFaceColor=b;this.flashVars.overlayOverFaceColor=c;this.flashVars.emailInputFaceColor=a};WNVideoWidget.prototype.SetCanvasFormFieldBackgroundColor=function(a){this.flashVars.emailFormFieldColors=a};WNVideoWidget.prototype.SetCanvasOverlayErrorColors=function(a,b){this.flashVars.emailErrorMessageFaceColor=a;this.flashVars.emailErrorBorderColor=b};WNVideoWidget.prototype.SetInfoPaneFontSizes=function(a,c,b){this.flashVars.headlineFontSize=a;this.flashVars.summaryFontSize=c;this.flashVars.durationFontSize=b};WNVideoWidget.prototype.SetInfoPaneFontColors=function(c,b,a){this.flashVars.headlineColor=c;this.flashVars.summaryColor=b;this.flashVars.durationColor=a};WNVideoWidget.prototype.EnableInfoPaneHeadline=function(a){this.flashVars.hasHeadline=a};WNVideoWidget.prototype.EnableInfoPaneSummary=function(a){this.flashVars.hasSummary=a};WNVideoWidget.prototype.EnableInfoPaneDuration=function(a){this.flashVars.hasDuration=a};WNVideoWidget.prototype.EnableInfoPaneImage=function(a){this.flashVars.hasImage=a};WNVideoWidget.prototype.SetInfoPaneImageProperties=function(b,a,c){this.flashVars.imageWidth=b;this.flashVars.imageHeight=a;this.flashVars.imagePosition=c};WNVideoWidget.prototype.SetInfoPaneBackgroundColors=function(a,b){this.flashVars.backgroundColors=a+","+b+","+b+","+a};WNVideoWidget.prototype.SetHeadlineFontSize=function(a){this.flashVars.fontSize=a};WNVideoWidget.prototype.SetHeadlineFontColor=function(a){this.flashVars.offFaceColor=a};WNVideoWidget.prototype.SetHeadlineBackgroundColors=function(b,a){this.flashVars.backgroundColors=b+","+a};WNVideoWidget.prototype.NewCategory=function(a,b){document.getElementById(this.flashVars.domId).wnNewCategory({catId:a,clipId:b})};WNVideoWidget.prototype.PlayPause=function(){document.getElementById(this.flashVars.domId).playPause()};WNVideoWidget.prototype.Play=function(){document.getElementById(this.flashVars.domId).playMedia()};WNVideoWidget.prototype.Pause=function(){document.getElementById(this.flashVars.domId).pauseMedia()};WNVideoWidget.prototype.ShowEmail=function(){document.getElementById(this.flashVars.domId).showEmail()};WNVideoWidget.prototype.ShowSummary=function(){document.getElementById(this.flashVars.domId).showSummary()};WNVideoWidget.prototype.ShowClosedCaption=function(){document.getElementById(this.flashVars.domId).showClosedCaption()};WNVideoWidget.prototype.Mute=function(){document.getElementById(this.flashVars.domId).muteToggle()};WNVideoWidget.prototype.LaunchHelp=function(){document.getElementById(this.flashVars.domId).launchHelp()};WNVideoWidget.prototype.SetVolume=function(a){document.getElementById(this.flashVars.domId).setVolume(a)};WNVideoWidget.prototype.disableDefaultTransport=function(){this.flashVars.disableTransport="true";for(var a in this.installFlashVars){if(a=="disableTransport"){this.installFlashVars.disableTransport="true"}}};WNVideoWidget.prototype.showVideoIcons=function(b){this.flashVars.isShowIcon=b;for(var a in this.installFlashVars){if(a=="isShowIcon"){this.installFlashVars.isShowIcon=b}}};WNVideoWidget.prototype.setVideoTime=function(a){document.getElementById(this.flashVars.domId).ExternalSetVideoTime(a)};WNVideoWidget.prototype.setVideoPosition=function(a){document.getElementById(this.flashVars.domId).ExternalSetVideoPosition(a)};WNVideoWidget.prototype.getTimerObject=function(){return document.getElementById(this.flashVars.domId).ExternalGetTimerObject()};WNVideoWidget.prototype.ValidateURL=function(b){var a=/^[A-Za-z]+:\/\/+[A-Za-z0-9-_]+\.[A-Za-z0-9-_%&\?\/.=:]+$/;if(a.test(b)){return true}else{return false}};WNVideoWidget.prototype.AddFeed=function(b,a,h,c,m,f,d,k,o,g){if(!this.wnFeedObject.hasFeeds){this.wnFeedObject.hasFeeds=true}var n={};n.name=b;n.source=a;n.type=h;n.url=c;n.priority=m;n.contentClass=f;n.adOwner=d;n.adSplit=k;n.policyFile=o;n.providerType=g;this.wnFeedObject.feeds.push(n)};WNVideoWidget.prototype.SendFeedObject=function(){tmpFeedObject=new Object;tmpFeedObject.hasFeeds=this.wnFeedObject.hasFeeds;tmpFeedObject.feeds=new Array();for(i=0;i<this.wnFeedObject.feeds.length;i++){tmpFeedObject.feeds.push(this.wnFeedObject.feeds[i])}delete this.wnFeedObject;return tmpFeedObject};WNVideoWidget.prototype.SetSkin=function(a){this.skin=a;this.flashVars.jsSkinIsSet=true};WNAdWidget=function(c,b,a){this.widgetClassType="WNAdWidget";this.idKey=wnVideoUtils.validateString(a)?a:"DEFAULT";this.widgetName=c;this.size=c;this.id=c+this.idKey;this.isInCanvas=false;if(pageAds[this.idKey]==undefined){pageAds[this.idKey]={}}pageAds[this.idKey][this.id]=this;this.uafAd({type:"dom",id:this.size.replace("wnsz_",""),ownerinfo:{local:{share:1}},delayinit:true});evntMgr.Register({lstnr:this,evnt:"NewClip",func:b,idKey:this.idKey});evntMgr.Register({lstnr:this,evnt:"NewMedia",func:b,idKey:this.idKey});evntMgr.Register({lstnr:this,evnt:"MediaEnded",func:b,idKey:this.idKey});evntMgr.Register({lstnr:this,evnt:"NewCompanionAd",func:"SetWNCompanionAd",idKey:this.idKey});evntMgr.Register({lstnr:this,evnt:"UAFLoadCompanions",func:b,idKey:this.idKey});evntMgr.Register({lstnr:this,evnt:"UAFLoadVastCompanions",func:b,idKey:this.idKey})};WNAdWidget.prototype.uafAd=function(a){this.ad=new Worldnow.Ad(a)};WNAdWidget.prototype.SetSeqNum=function(a){this.seqNum=a};WNAdWidget.prototype.SetTarget=function(a){this.targetElement=a;this.ad.set("parent",a)};WNAdWidget.prototype.SetTransitional=function(a){this.isTransitional=a};WNAdWidget.prototype.SetHeight=function(a){this.height=a;this.ad.set("height",a)};WNAdWidget.prototype.SetWidth=function(a){this.width=a;this.ad.set("width",a)};WNAdWidget.prototype.SetWNAdsize=function(a){this.isTransitional=a};WNAdWidget.prototype.setIsInCanvas=function(a){this.isInCanvas=a};WNAdWidget.prototype.setApplication=function(a){this.application=a.toLowerCase();this.ad.set("application",a.toLowerCase())};WNVideoWidgets.prototype.clipObjCallback=function(c,b){var a=c.clips[0];if(a.uri!=undefined&&a.uri[0]&&a.uri[0].url){$wn("#"+c.callbackParams).data("widget").checkAutostartAndPlay(a)}else{wnLog("Clip does not have a valid url to play.")}};WNVideoWidgets.prototype.ampObjCallback=function(d,c){var b=d.feed;if(d.callbackParams.indexOf("|")>-1){var a=d.callbackParams.split("|");$wn("#"+a[0]).data("widget").loadClip(b,wnVideoUtils.stringToBoolean(a[1]))}else{$wn("#"+d.callbackParams).data("widget").loadClip(b)}};WNVideoWidgets.prototype.loadGallery=function(a){$wn("#"+a.callbackParams).data("widget").loadGallery(a)};WNVideoWidgets.prototype.loadGalleryClip=function(a){$wn("#"+a.callbackParams).data("widget").loadGalleryClip(a)};WNVideoWidgets.prototype.getPlayableClipUrl=function(f){var b;var d;for(var a=0;a<f.uri.length;a++){if(f.uri[a].type=="video/mp4"){wnLog(f.uri[a].type);b=f.uri[a].url}if(f.uri[a].type=="video/3gpp"){wnLog(f.uri[a].type);d=f.uri[a].url}}var c=(/blackberry|RIM/i.test(navigator.userAgent.toLowerCase()));if((typeof d!="undefined")&&c){return d}else{return b}};WNVideoWidgets.prototype.masterAdExists=function(f){var d=false;try{var a=pageAds[f.idKey];for(var b in a){if(a[b].seqNum==1){d=true}}}catch(c){}return d};WNVideoWidgets.prototype.UAFHelper=function(h,m,g){h.id="wnad"+h.wnsz;h.wncc=m.adTag;h.ownerinfo={owner:m.preRollOwner,pct:m.preRollSplitPct};try{if(wn_isMobile&&wn_isPlatformSiteMobile){h.apptype="mob";if(h.wnsz=="30"){h.ownerinfo={owner:m.mobile_preRollOwner,pct:m.mobile_preRollSplitPct};h.wnsz="130"}else{if(h.wnsz=="31"){h.ownerinfo={owner:m.mobile_postRollOwner,pct:m.mobile_postRollSplitPct};h.wnsz="131"}}h.id="wnad"+h.wnsz}else{if(typeof(m.apptype)==="undefined"){h.apptype="video"}else{h.apptype=m.apptype}}}catch(d){wnLog("Did not complete setting ad info")}try{if(h.sequence==1){Worldnow.AdMan.resetCounters()}}catch(d){}if(!g){g="raw"}var k=Worldnow.AdMan.getAdCall(h,g);k.set("requestingurl",true);var f=k.load();var a=k.get("owner");if(m.apptype=="videopopup"){var b=["wnad41=","wnad43=","wnad53=","wnad31="];for(var c=0;c<b.length;c++){if(f.toLowerCase().indexOf(b[c])<0){f=f.replace("wnad30=",b[c]+a+";wnad30=")}}}return{url:f,owner:a}};WNAdWidget.prototype.HandleWorldnowAd=function(b){var c;var f={};var d=b.objClip;var h=d.adCallDomain;if(b.evnt=="UAFLoadCompanions"&&wnSiteConfigVideo.useUAF==true){f=b.adProps;f.wnsz=this.size.replace("wnsz_","");f.width=this.width;f.height=this.height;f.sequence=null;k=wnVideoWidgets.UAFHelper(f,d,"iframe");c=k.url;if(this.isTransitional){videoGallery.EnableControls(false)}var g="<iframe id='"+this.size+"' src='"+c+"' width='"+this.width+"' height='"+this.height+"' frameborder='0' scrolling='no' allowTransparency='true' marginwidth='0' marginheight='0'></iframe>";this.targetElement.innerHTML=g}if(b.evnt=="UAFLoadVastCompanions"&&wnSiteConfigVideo.useUAF){var n=b.vastAd;if(this.isTransitional){videoGallery.EnableControls(false)}if(this.width==n.width&&this.height==n.height){var a=wnGetVastAdHtml(n,this);this.targetElement.innerHTML=a}}if(b.evnt=="NewClip"&&(!(d.isFlashVideoBookend)||!(this.isTransitional))){if(this.ad){var m={wnccx:wnWidgetsFlashVars.WNVideoCanvas.advertisingZone,wncc:d.adTag},k=this.ad;this.seqNum==1&&Worldnow.AdMan.resetCounters();if(wnUsePrerollMaster||(d.slideshowHeadline!=undefined)){if(this.isInCanvas){if(!d.disableInCanvasAd&&this.targetElement!=null){k.load.call(k,m)}}else{if(!d.disableCampaignAd){k.load.call(k,m)}}if(this.isTransitional){videoGallery.EnableControls(false)}}}else{if(wnSiteConfigVideo.useUAF==true){f.width=this.width;f.height=this.height;this.size=this.size.replace("wnsz_","");f.wnsz=this.size;f.wnccx=wnWidgetsFlashVars.WNVideoCanvas.advertisingZone;f.sequence=this.seqNum;if(wnVideoUtils.validateString(this.application)){f.application=this.application}if(wnUsePrerollMaster||(d.slideshowHeadline!=undefined)){k=wnVideoWidgets.UAFHelper(f,d,"iframe");c=k.url}}else{c="http://"+h+"/global/ad.asp?type=single&src1="+d.preRollOwner+"&spct1="+d.preRollSplitPct+"&sz1="+this.size+"&cls1="+d.adTag+"&rndNumOverride="+d.rndNum+"&adZoneOverride="+d.advertisingZone+"&contentOwner="+d.ownerAffiliateName}var g="<iframe id='"+this.size+"' src='"+c+"' width='"+this.width+"' height='"+this.height+"' frameborder='0' scrolling='no' allowTransparency='true' marginwidth='0' marginheight='0'></iframe>";if(wnUsePrerollMaster||(d.slideshowHeadline!=undefined)){if(this.isInCanvas){if(!d.disableInCanvasAd&&this.targetElement!=null){this.targetElement.innerHTML=g}}else{if(!d.disableCampaignAd){this.targetElement.innerHTML=g}}if(this.isTransitional){videoGallery.EnableControls(false)}}}}if(b.evnt=="MediaEnded"){if((d.isPreRoll||d.isPostRoll||d.isFlashVideoBookend)&&this.isTransitional){this.targetElement.innerHTML="";videoGallery.EnableControls(true)}}if(b.evnt=="NewMedia"){if(!(d.isPreRoll||d.isPostRoll||d.isFlashVideoBookend)&&this.isTransitional){this.targetElement.innerHTML="";videoGallery.EnableControls(true)}}};WNAdWidget.prototype.SetWNCompanionAd=function(a){var b=a.objClip;if(b.size==this.widgetName){if(this.isTransitional){videoGallery.EnableControls(false)}if(b.useRedirect=="true"){if(b.redirectHtml!="null"){this.targetElement.innerHTML=b.redirectHtml}}else{this.targetElement.innerHTML="<a href='"+b.clickUrl+"' target='new'><img src='"+b.url+"' width='"+this.width+"' height='"+this.height+"' border='0'></a>"}}};WNEventListenerWidget=function(c,b,a){this.widgetClassType="WNEventListenerWidget";this.idKey=wnVideoUtils.validateString(a)?a:"DEFAULT";this.widgetName=c;this.id=c+this.idKey;evntMgr.Register({lstnr:this,evnt:"NewClip",func:b,idKey:this.idKey});evntMgr.Register({lstnr:this,evnt:"NewMedia",func:b,idKey:this.idKey});evntMgr.Register({lstnr:this,evnt:"MediaEnded",func:b,idKey:this.idKey});evntMgr.Register({lstnr:this,evnt:"OpenPane",func:b,idKey:this.idKey});evntMgr.Register({lstnr:this,evnt:"PaneClosed",func:b,idKey:this.idKey})};var mdVideoSettingsObject;var mdVideoCommentsObject;var mdCommentsLoaded=false;function onMobdubSmilLoad(a){if(mdCommentsLoaded){Mobdub.Comments.loadComments(a);mdVideoCommentsObject=null}else{mdVideoCommentsObject=a}}function onMobdubCommentsReady(){mdCommentsLoaded=true}WNCommentsWidget=function(c,d,b){this.widgetClassType="WNCommentsWidget";this.idKey=wnVideoUtils.validateString(b)?b:"DEFAULT";this.widgetName=c;this.id=c+this.idKey;this.targetDiv=d;this.codebaseDomain="http://partner.mobdub.com";this.params="";this.videoWidth="";this.videoHeight="";this.videoMarginTop="";this.videoMarginleft="";this.enableVideoAnnotations=1;var a="HandleComments";evntMgr.Register({lstnr:this,evnt:"NewClip",func:a,idKey:this.idKey});evntMgr.Register({lstnr:this,evnt:"NewMedia",func:a,idKey:this.idKey});evntMgr.Register({lstnr:this,evnt:"MediaEnded",func:a,idKey:this.idKey});evntMgr.Register({lstnr:this,evnt:"OpenPane",func:a,idKey:this.idKey});evntMgr.Register({lstnr:this,evnt:"PaneClosed",func:a,idKey:this.idKey});evntMgr.Register({lstnr:this,evnt:"PaneOpening",func:a,idKey:this.idKey})};WNCommentsWidget.prototype.SetHeight=function(a){document.getElementById(this.targetDiv).style.height=a+"px";this.height=a};WNCommentsWidget.prototype.SetWidth=function(a){document.getElementById(this.targetDiv).style.width=a+"px";this.width=a};WNCommentsWidget.prototype.SetCanvasDivName=function(a){this.canvasDivName=a};WNCommentsWidget.prototype.SetPartnerId=function(a){this.mdAffiliateNo=a};WNCommentsWidget.prototype.SetCodebaseDomain=function(a){this.codebaseDomain=a};WNCommentsWidget.prototype.SetTwtFeedUrl=function(c){try{mdTwtFeedUrl=c}catch(b){var a=b}};var wnEnableAnnotations;WNCommentsWidget.prototype.EnableVideoAnnotations=function(a){if(a){this.enableVideoAnnotations=1}else{this.enableVideoAnnotations=0}this.ShowVideoAnnotations(a)};WNCommentsWidget.prototype.ShowVideoAnnotations=function(a){wnLog("ShowVideoAnnotations: "+a);try{if(this.enableVideoAnnotations==1&&_mdVideoOptions.dubs_display=="1"){mdPartnerShowDubs(a)}else{mdPartnerShowDubs(false)}}catch(b){}};function wnMdEnableVideoAnnotations(a){if(a){mdPartnerShowDubs(true);_mdVideoOptions.dubs_display="1";wnLog("wnMdEnableVideoAnnotations: "+a)}else{if(!a){mdPartnerShowDubs(false);_mdVideoOptions.dubs_display="0";wnLog("wnMdEnableVideoAnnotations: "+a)}}}WNCommentsWidget.prototype.AnnotationsActive=function(){try{if(_mdVideoOptions.dubs_display=="1"){return true}else{return false}}catch(a){}};WNCommentsWidget.prototype.EnableVideoCommentsBox=function(a){this.enableVideoCommentsBox=a;if(a){wnVideoUtils.loadScript("mobdubScriptComments","http://scripts.mobdub.com/videocomments.js")}};WNCommentsWidget.prototype.SetParams=function(a){this.params=a};WNCommentsWidget.prototype.SetVideoAnnotationDimension=function(b,a){this.videoWidth=b;this.videoHeight=a};WNCommentsWidget.prototype.SetVideoAnnotationMargins=function(b,a){this.videoMarginTop=b;this.videoMarginleft=a};WNCommentsWidget.prototype.SetVideoId=function(a){this.useVideoId=true;this.videoId=a};var wnClipObj;var wnIsCanvasOverlayActive=false;WNCommentsWidget.prototype.HandleComments=function(f){if(f.evnt=="NewClip"){try{Mobdub.Comments.clearCommentsPanel()}catch(g){}var d=wnVideoWidgets.canvasObject[this.idKey];var h=f.objClip;wnClipObj=f.objClip;var c=h.id;if(c==null||c=="null"||c==undefined||c==""){c=h.partnerclipid}if(c==null||c=="null"||c==undefined||c==""){c=h.flvUri}var a="&";if(this.videoWidth!=""){a=a+"player_width="+this.videoWidth}if(this.videoHeight!=""){a=a+"&player_height="+this.videoHeight}if(this.videoMarginTop!=""){a=a+"&player_margin_top="+this.videoMarginTop}if(this.videoMarginleft!=""){a=a+"&player_margin_left="+this.videoMarginleft}if(this.videoId){var b=this.codebaseDomain+"/partners/"+this.mdAffiliateNo+"/script.js?video_id="+this.videoId+"&player_id="+d+"&player_div="+this.canvasDivName+"&title="+encodeURIComponent(unescape(h.headline))+a+"&enable_dubs="+this.enableVideoAnnotations+"&"+this.params}else{var b=this.codebaseDomain+"/partners/"+this.mdAffiliateNo+"/script.js?uri="+c+"&player_id="+d+"&player_div="+this.canvasDivName+"&title="+encodeURIComponent(unescape(h.headline))+a+"&enable_dubs="+this.enableVideoAnnotations+"&"+this.params}wnVideoUtils.loadScript("mobdubScriptPlayer",b)}if(f.evnt=="NewMedia"){var h=f.objClip;wnClipObj=f.objClip;if(h.isPreRoll||h.isPostRoll||h.isFlashVideoBookend){this.ShowVideoAnnotations(false);try{Mobdub.Comments.stopScrolling();mdPartnerShowMobdubSwitch("disabled")}catch(g){}}else{if(wnIsCanvasOverlayActive!=true){this.ShowVideoAnnotations(true);try{Mobdub.Comments.startScrolling();mdPartnerShowMobdubSwitch("enabled")}catch(g){}}}}if(f.evnt=="PaneOpening"){wnIsCanvasOverlayActive=true;this.ShowVideoAnnotations(false);try{mdPartnerShowMobdubSwitch("disabled")}catch(g){}}if(f.evnt=="PaneClosed"){wnIsCanvasOverlayActive=false;try{if(wnClipObj.isPreRoll||wnClipObj.isPostRoll||wnClipObj.isFlashVideoBookend){this.ShowVideoAnnotations(false);mdPartnerShowMobdubSwitch("disabled")}else{this.ShowVideoAnnotations(true);mdPartnerShowMobdubSwitch("enabled")}}catch(g){}}};WNEventManager=function(){this.listeners={}};WNEventManager.prototype.Register=function(c){var h=c.lstnr;var f=c.func;var g=c.evnt;var b=c.idKey;if(typeof this.listeners[b]=="undefined"){this.listeners[b]=new Array()}var a=this.listeners[b].length;for(var d=0;d<a;d++){if(this.listeners[b][d].lstnr==h&&this.listeners[b][d].evnt==g){return false}}this.listeners[b].push({lstnr:h,evnt:g,func:f});return true};WNEventManager.prototype.Notify=function(n,d){var p=n.evnt;var o=n.idKey;if(typeof n.system=="undefined"){n.system=="video"}n.objClip.hostPlayer="flash";var f={event:{type:n.evnt},system:n.system,clip:n.objClip,valid:true};wnVideoWidgets.handleEvent(f);var g=this.listeners[o].length;var m=this.listeners;var a=false;if(wnVideoWidgets.useHtml5||renderSlideShowAsHtml){a=true}for(var c=0;c<g;c++){if(this.listeners[o][c].evnt==p){var k=this.listeners[o][c].lstnr;var b=this.listeners[o][c].func;if(k.widgetClassType=="WNAdWidget"||k.widgetClassType=="WNVideoListener"||k.widgetClassType=="WNEventListenerWidget"||k.widgetClassType=="WNCommentsWidget"){k[b](n)}else{if(k.toString().indexOf("WNVideoCanvas")>-1&&wnVideoWidgets.useAmpPlayer||(wnVideoWidgets.useHtml5&&(k.toString().indexOf("WNVideoCanvas")>-1||k.toString().indexOf("WNGallery")>-1))||k.toString().indexOf("WNImageCanvas")>-1&&a||k.toString().indexOf("WNImageGallery")>-1&&a){$wn("#"+k).data("widget")[b](n)}else{if((k.toString().indexOf("WNHeadline")>-1||k.toString().indexOf("WNInfoPane")>-1)&&$wn("#"+k).data("widget")!=undefined&&$wn("#"+k).data("widget")[b]!=null){$wn("#"+k).data("widget")[b](n)}else{try{if(document.getElementById(k)[b]){document.getElementById(k)[b](n)}}catch(h){wnLog("Target SWF element '"+k+"' is missing on the page. '"+b+"' handler for the '"+p+"' event is not defined.")}}}}}}if(p=="NewClip"&&getWigdetByType(o,"c")!=null){getWigdetByType(o,"c").clipObj=n.objClip}};WNCanvasListener=function(b,a){this.widgetClassType="WNVideoListener";this.idKey=wnVideoUtils.validateString(a)?a:"DEFAULT";evntMgr.Register({lstnr:this,evnt:"ModelInitiated",func:b,idKey:this.idKey})};WNPlayClipObject=function(){};WNPlayClipObject.prototype.PopVideoPlayer=function(a){var c=wnVideoWidgets.landingPage;if(wnVideoUtils.validateString(c)){var f="clipId="+a.objClip.id+"&topVideoCatNo="+a.topCatId+"&autoStart=true";if(a.objClip.popupLandingPage=="true"){var b=window.open(c+f,"WNFlashLandingPage")}else{window.location=c+f;return}try{if(b!=null){b.focus()}}catch(d){self.blur()}}else{playVideo(a.objClip.id,a.objClip.headline,a.objClip.vt,a.objClip.strAdTarget,a.objClip.duration,a.objClip.adTag,a.objClip.strQueryStringParams,wnVideoWidgets.objClip.objClip.domain.replace("http://",""),a.objClip.siteDefaultFormat)}};WNPlayClipObject.prototype.NewClipObject=function(d){wnVideoWidgets.objClip=d;for(var a in wnVideoWidgets.canvasObject){if(a==d.idKey){var f=wnVideoWidgets.canvasObject[a]}}var b=document.getElementById(f);if(b!=null){var g=f+"WNSilverlight";var c=document.getElementById(g);if(c!=undefined&&c.style.display!="none"){WNSilverlightStopClip();c.style.display="none";b.width=WNSilverlightCanvasWidth;b.height=WNSilverlightCanvasHeight}if(wnVideoWidgets.useAmpPlayer){$wn("#"+f).data("widget")["loadClip"](d.objClip,true)}else{b.wnFlashVideoCanvas_PlayClip(d.objClip)}}else{if(d.objClip.isUserInitiated){this.PopVideoPlayer(d)}}return true};WNPlayClipObject.prototype.NewClipId=function(a,m,o,c,g,q,p,k,f,n){var m=wnVideoUtils.validateString(m)?m:"DEFAULT";for(var h in wnVideoWidgets.canvasObject){if(h==m){var b=wnVideoWidgets.canvasObject[h]}}var r=document.getElementById(b);if(r!=null){if(wnVideoWidgets.useHtml5){$wn("#"+lstnr).data("widget")[func](evntObj)}else{r.wnFlashVideoCanvas_PlayClip({id:a,isUserInitiated:true})}}else{var d={};if(a!=""){d.id=a}if(o!=""){d.headline=o}if(c!=""){d.vt=c}if(g!=""){d.strAdTarget=g}if(q!=""){d.duration=q}if(p!=""){d.adTag=p}if(k!=""){d.strQueryStringParams=k}if(f!=""){d.ownerAffiliateBaseUrl=f}if(n!=""){d.siteDefaultFormat=n}this.PopVideoPlayer({objClip:d})}return true};WNSlideshowImage=function(){};WNSlideshowImage.prototype.NewSlideshowImage=function(obj){var slideShowCanvas={};for(var wdgt in pageWidgets[obj.groupId]){if(pageWidgets[obj.groupId][wdgt].widgetClassType=="WNImageCanvas"){slideShowCanvas=pageWidgets[obj.groupId][wdgt]}if(pageWidgets[obj.groupId][wdgt].widgetClassType=="WNImageGallery"){imageGallery=pageWidgets[obj.groupId][wdgt];var nextImageDelay=wnSiteConfigVideo.imageCanvasWidget.slideTime*1;if(nextImageDelay<1){nextImageDelay=3}landingPage=pageWidgets[obj.groupId][wdgt].landingPage;if(!wnVideoUtils.validateString(landingPage)){landingPage="http://"+pageWidgets[obj.groupId][wdgt].hostDomain+"/global/slideshow.asp?"}else{var q=landingPage.lastIndexOf("?");var amp=landingPage.lastIndexOf("&");var len=landingPage.length;if(q>0){if(q==len||amp==len){landingPage+=""}else{landingPage+="&"}}else{landingPage+="?"}}}}if(document.getElementById(slideShowCanvas.domId)!=null){this.hideInCanvasAd({groupId:obj.groupId});if((slideShowCanvas.isInCanvasAdModeEnabled=="true"||slideShowCanvas.isInCanvasAdModeEnabled==true)&&slideShowCanvas.playerWidth>=300&&slideShowCanvas.playerHeight>=250){if(slideShowCanvas.inCanvasAdIterator==undefined){if(slideShowCanvas.inCanvasAdFrequency==0){slideShowCanvas.inCanvasAdIterator=-1}else{slideShowCanvas.inCanvasAdIterator=0}}slideShowCanvas.inCanvasAdIterator++;if(slideShowCanvas.inCanvasAdIterator==slideShowCanvas.inCanvasAdFrequency&&slideShowCanvas.inCanvasAdFrequency>-1){obj.disableInCanvasAd=false;slideShowCanvas.inCanvasAdIterator=0;var slideshowAdDivName=slideShowCanvas.domId+"_adDiv";var patern="WNImageCanvas"+slideShowCanvas.idKey;slideshowAdDivName=slideshowAdDivName.replace("WNImageCanvas"+slideShowCanvas.idKey,"");if(document.getElementById(slideshowAdDivName)!=null){document.getElementById(slideshowAdDivName).style.zIndex=150;document.getElementById(slideshowAdDivName).style.visibility="visible";document.getElementById(slideShowCanvas.domId).style.zIndex=-1;document.getElementById(slideshowAdDivName+"_close").onclick=function(){document.getElementById(slideshowAdDivName).style.zIndex=-1;document.getElementById(slideShowCanvas.domId).style.zIndex=4;document.getElementById(slideshowAdDivName+"_ad").innerHTML="";wnSlideshowImage.hideInCanvasAd({groupId:obj.groupId,byTimer:true})};document.getElementById(slideshowAdDivName+"_close").onmouseover=function(){document.body.style.cursor="pointer"};document.getElementById(slideshowAdDivName+"_close").onmouseout=function(){document.body.style.cursor="auto"}}evntMgr.Notify({evnt:"NewInCanvasAd",idKey:obj.groupId,objClip:obj});if(slideShowCanvas.htmlVersion!=null&&slideShowCanvas.htmlVersion.resumeAfterAd){if(slideShowCanvas.adTimer!=null){clearTimeout(slideShowCanvas.adTimer)}slideShowCanvas.adTimer=setTimeout("wnSlideshowImage.hideInCanvasAd({groupId: '"+obj.groupId+"', byTimer:true})",nextImageDelay*1000)}}else{obj.disableInCanvasAd=true}}if(slideShowCanvas.companionAdIterator==undefined){if(slideShowCanvas.companionAdFrequency==0){slideShowCanvas.companionAdIterator=-1}else{slideShowCanvas.companionAdIterator=0}}slideShowCanvas.companionAdIterator++;if(slideShowCanvas.companionAdIterator==slideShowCanvas.companionAdFrequency&&slideShowCanvas.companionAdFrequency>-1){obj.disableCampaignAd=false;slideShowCanvas.companionAdIterator=0;Worldnow.AdMan.getAds("43",function(ad){var owner=ad.get("owner");if(ad.manager.eventsHistory.hasOwnProperty(owner)&&ad.manager.eventsHistory[owner].indexOf("pageready")>-1){ad.load()}})}else{obj.disableCampaignAd=true}try{var slidreport=Namespace_VideoReporting_Worldnow.logSlideShowEventParameters("ImageView",encodeURIComponent(escape(obj.headline)),encodeURIComponent(escape(obj.slideshowHeadline)),obj.widgetId,obj.url,obj.adTag,slideShowCanvas.hostDomain,slideShowCanvas.affiliate,slideShowCanvas.isInCanvasAdModeEnabled,obj.index)}catch(e){}try{eval("addThisWNDynamicWidgetId = "+obj.widgetId)}catch(e){}obj.preRollSplitPct=100;obj.preRollOwner="loc";evntMgr.Notify({evnt:"NewClip",idKey:obj.groupId,objClip:obj,system:"slidedhow"})}else{if(!obj.onGalleryLoad){var index=(obj.index!=undefined)?(obj.index+1):obj.id;var params="widgetId="+obj.widgetId+"&slideshowImageId="+index;if(imageGallery.popupLandingPage=="true"||imageGallery.popupLandingPage==true){window.open(landingPage+params,"WNFlashLandingPage")}else{window.location=landingPage+params}}}};WNSlideshowImage.prototype.hideInCanvasAd=function(f){var g=false;var b={};var d;for(var a in pageWidgets[f.groupId]){if(pageWidgets[f.groupId][a].widgetClassType=="WNImageCanvas"){b=pageWidgets[f.groupId][a];d=pageWidgets[f.groupId][a].domId}}if(document.getElementById(d)!=null){var c=d+"_adDiv";c=c.replace("WNImageCanvas"+f.groupId,"");if(document.getElementById(c)!=null){if(document.getElementById(c).style.zIndex!=-1){g=true}document.getElementById(c).style.zIndex=-1;document.getElementById(c).style.visibility="hidden";document.getElementById(d).style.zIndex=100;document.getElementById(c+"_ad").innerHTML=""}}if(b.adTimer!=null){clearTimeout(b.adTimer)}if(f.byTimer){evntMgr.Notify({evnt:"InCanvasAdOver",idKey:f.groupId,objClip:f})}return g};var wnPlayClip=new WNPlayClipObject();var wnSlideshowImage=new WNSlideshowImage();var evntMgr=new WNEventManager();var wnVideoWidgets=new WNVideoWidgets();try{for(var i in wnCallBackFunctions){wnCallBackFunctions[i]()}}catch(e){}function syncRoadBlock(a){}if(pageWidgets==undefined){var pageWidgets=new Array()}if(pageAds==undefined){var pageAds=new Array()}function getWigdetByType(b,c){var d=new Array();d.c="WNVideoCanvas";d.g="WNGallery";d.h="WNHeadline";d.i="WNInfoPane";d.t="WNTicker";d.ic="WNImageCanvas";d.ig="WNImageGallery";d.c2="WNVideoCanvas2";var c=d[c];if(c=="WNGallery"){for(var a in pageWidgets[b]){if(pageWidgets[b][a].widgetClassType==c&&pageWidgets[b][a].isPrimaryGallery!=undefined&&(pageWidgets[b][a].isPrimaryGallery=="true"||pageWidgets[b][a].isPrimaryGallery==true)){return pageWidgets[b][a]}}}else{for(var a in pageWidgets[b]){if(pageWidgets[b][a].widgetClassType==c){return pageWidgets[b][a]}}if(c=="WNVideoCanvas"){for(var a in pageWidgets[b]){if(pageWidgets[b][a].widgetClassType=="WNVideoCanvas2"){return pageWidgets[b][a]}}}}return{}}function onWidgetLoad(f,c,a,b,d){pageWidgets[c][f].callBackName=a;pageWidgets[c][f].intDependsOn=wnVideoUtils.validateString(b)?b:"";pageWidgets[c][f].data=d;pageWidgets[c][f].isLoaded=true;wnLog(pageWidgets[c][f].widgetClassType+" is Loaded");executeCallBack(c,f);executeAllCallBacks(c)}function executeCallBack(groupId,domId){if(pageWidgets[groupId][domId].isLoaded&&pageWidgets[groupId][domId].callBackName!=undefined&&pageWidgets[groupId][domId].isReady==false){var readyToBeCalled=true;var chr=0;var dependsOn=pageWidgets[groupId][domId].intDependsOn;for(chr=0;chr<dependsOn.length;chr++){type=dependsOn.charAt(chr);if(getWigdetByType(groupId,type).isReady==false){readyToBeCalled=false;break}}if(readyToBeCalled){eval(pageWidgets[groupId][domId].callBackName+"('"+domId+"', '"+groupId+"')");pageWidgets[groupId][domId].isReady=true;wnLog(pageWidgets[groupId][domId].widgetClassType+" calling isReady() -  ready!")}}}function executeAllCallBacks(c){for(var a in pageWidgets[c]){executeCallBack(c,a)}var d=true;var b=true;for(var a in pageWidgets[c]){if(pageWidgets[c][a].isLoaded==false){d=false}if(pageWidgets[c][a].isReady==false){b=false}}if(d&&!b){wnLog("Not all the widgets are ready yet. Run again.");callBacks(c)}}function galleryIsReady(b,a){if(wnVideoWidgets.useAmpPlayer){var c=getWigdetByType(a,"g");var d=c.data.objClip;if(d.flvUri){d.isUserInitiated=false;d.ordinance=0;evntMgr.Notify({evnt:"NewGalleryClip",idKey:a,objClip:d})}}}function canvasIsReady(b,a){if(!wnVideoUtils.validateString(pageWidgets[a][b].clipId)){var c=getWigdetByType(a,pageWidgets[a][b].intDependsOn);pageWidgets[a][b].clipObj=c.data.clipObj;wnPlayClip.NewClipObject(c.data)}}function headlineIsReady(b,a){var c=getWigdetByType(a,pageWidgets[a][b].intDependsOn);clipObj=c.clipObj;if(!clipObj){c=getWigdetByType(a,"ic").htmlVersion;if(c!=undefined){clipObj=c.currentImgObj}}document.getElementById(b).wnSetHeadline({objClip:clipObj})}function infoPaneIsReady(b,a){var c=getWigdetByType(a,pageWidgets[a][b].intDependsOn);clipObj=c.clipObj;if(!clipObj){c=getWigdetByType(a,"ic").htmlVersion;if(c!=undefined){clipObj=c.currentImgObj}}document.getElementById(b).wnShowInfo({objClip:clipObj})}function tickerIsReady(b,a){var c=getWigdetByType(a,pageWidgets[a][b].intDependsOn);document.getElementById(b).wnDisplayText({tickerItems:c.data.tickerItems})}function imageCanvasIsReady(f,d){var b=getWigdetByType(d,"ic");var c=document.getElementById(b.addThisDivId);var a=document.getElementById(b.incanvasAdDivId);if(c){c.style.visibility="visible"}if(a){a.style.visibility="visible"}}function canvas2IsReady(d,b){var a=pageWidgets[b][d];if(!wnVideoUtils.validateString(a.clipId)){var f=getWigdetByType(b,a.intDependsOn);if(a.autostart){a.clipObj=f.data.clipObj;wnPlayClip.NewClipObject(f.data)}else{var c=document.getElementById(d);c.wnFlashVideoCanvas2_FetchGalleryClip(f.data.objClip)}}}function wnVideoReloadCompanionAds(a,f){var d={wncc:f.adTag,apptype:f.apptype,owner:a.owner};if(wn_isMobile&&wn_isPlatformSiteMobile){d.apptype="mob"}var c;var b=wnCompanionAds.split(",");for(c=0;c<b.length;c++){b[c]=wnVideoUtils.trim(b[c]);Worldnow.AdMan.reloadAd(b[c],d)}}function wnGetVastAdHtml(a,c){var b="";if(a.iframeResource){b="<iframe id='vastAdId' src='"+a.iframeResource+"' width='"+a.width+"' height='"+a.height+"' frameborder='0' scrolling='no' allowTransparency='true' marginwidth='0' marginheight='0'></iframe>"}else{if(a.htmlResource){b=a.htmlResource}else{if(a.staticResource){if(a.staticResourceCreativeType.indexOf("image")>=0){b="<a href='"+a.companionClickThrough+"'><img id='vastAdId' src='"+a.staticResource+"' width='"+a.width+"' height='"+a.height+"' border='0' /></a>"}if(a.staticResourceCreativeType.indexOf("flash")>=0){b='<object data="'+a.staticResource+'" type="application/x-shockwave-flash" id="vastCompanion'+a.width+"x"+a.height+'" width="'+a.width+'" height="'+a.height+'"><param name="movie" value="'+a.staticResource+'" /><param name="bgcolor" value="#ffffff" /><param name="height" value="'+a.height+'" /><param name="width" value="'+a.width+'" /><param name="quality" value="high" /><param name="menu" value="false" /><param name="allowscriptaccess" value="samedomain" /><embed src="'+a.staticResource+'" quality="high" width="'+a.width+'"   height="'+a.height+'" name="vastCompanion'+a.width+"x"+a.height+'" align=""   type="application/x-shockwave-flash"   plug inspage="http://www.macromedia.com/go/getflashplayer"> </object>'}}}}return b}WNVideoGallery=function(h,g){this.fV=g;this.widgetClassType="WNGallery";this.parentDivId=h;this.parentJSName=this.widgetClassType+this.fV.widgetId;this.groupId=this.fV.idKey;this.categoryId=this.fV.topVideoCatNo,this.currentPage=1;this.tabsLoaded=false;this.hasClipAssigned=(this.fV.clipId*1>0);this.assignedClipIsLoaded=false;this.categoryCache={};if(this.fV.isPrimaryGallery!==true){if(wnVideoUtils.validateString(this.fV.isPrimaryGallery)&&this.fV.isPrimaryGallery.toLowerCase()=="true"){this.fV.isPrimaryGallery=true}else{this.fV.isPrimaryGallery=false}}if(this.fV.isContinuousPlay!==true){if(wnVideoUtils.validateString(this.fV.isContinuousPlay)&&this.fV.isContinuousPlay.toLowerCase()=="true"){this.fV.isContinuousPlay=true}else{this.fV.isContinuousPlay=false}}if(wn_isMobile){var a=$wn("#"+this.parentDivId);this.fV.widgetsContainer=a.parent();var b=parseInt(a.position().left);var d=parseInt(this.fV.playerWidth)+b;var f=a.parent().parent().width()-b;if(f<d){var m=Math.floor(this.fV.columns*f/d);m=(m>1)?m:1;this.fV.columns=m;this.fV.playerWidth=f}containerWidth=a.parent().parent().width();d=a.parent().width();if(containerWidth<d){a.parent().width(containerWidth)}var c=getWigdetByType(this.groupId,"c");if(c!={}&&c.playerHeight<c.originalHeight&&c.widgetsContainer.attr("id")==a.parent().attr("id")&&a.position().top>=(c.top+c.originalHeight-10)&&a.position().left<(c.left+c.originalWidth-10)){var k=c.originalHeight-c.playerHeight;a.css("top",Math.floor(a.position().top-k));if(c.originalContainerHeight==a.parent().height()){a.parent().height(a.parent().height()-k)}}this.fV.top=a.position().top;this.fV.left=a.position().left}this.render()};WNVideoGallery.prototype.render=function(){var a,d,c="";this.tabsLoaded=false;this.isStoryVideo=false;if(this.categoryId&&this.categoryId!=""){a=this.categoryId;d="categories"}else{if(this.fV.storyId&&this.fV.storyId!=""){a=this.fV.storyId;d="stories";this.contentType="stories";this.isStoryVideo=true}else{try{a=wn.rootassociations.pop_video_top}catch(b){a="0"}d="categories"}}if(this.contentType!="stories"){c='<ul class="categories"><li class="more"><select id="moreCategorySelect"><option> More </option></select></li></ul>'}this.context="#"+this.fV.domId+"_swfObject";$wn(this.context).width(this.fV.playerWidth);$wn(this.context).html('<div id="'+this.fV.domId+'" class="wn-gallery">'+c+'<div class="video-page-container"><div id="wnVideoLoadingMsg">Loading Videos...</div></div><div class="clear"></div><div class="pager"><a href="#" class="prev">Previous</a><div class="page-numbers-container"><ul class="page-numbers"></ul></div><a href="#" class="next">Next</a><div></div></div><div class="wn-controls-cover"></div>');this.controlsCover=$wn("#"+this.fV.domId).find(".wn-controls-cover");this.controlsCover.width(this.fV.playerWidth).height(this.fV.playerHeight).hide();this.contentType="categories";this.categoryId=a;$wn("#"+this.fV.domId).data("widget",this);evntMgr.Register({evnt:"ClipEnded",func:"onClipEnded",idKey:this.groupId,lstnr:this.fV.domId});this.getContentJSON(a,d)};WNVideoGallery.prototype.enableControls=function(a){if(a){this.controlsCover.hide()}else{this.controlsCover.show()}};WNVideoGallery.prototype.loadGallery=function(a){if(!this.categoryCache[a.categories[0].id]){this.categoryCache[a.categories[0].id]=a}this.loadGalleryTabs(a);this.loadGalleryClips(a,null)};WNVideoGallery.prototype.loadGalleryClip=function(a){this.loadGalleryClips(null,a)};WNVideoGallery.prototype.prependClip=function(a,c){var d=a.clips;var b=c.clips[0];for(i=0;i<a.clips.length;i++){if(d[i].id==b.id){d.splice(i,1)}}d.unshift(b)};WNVideoGallery.prototype.loadGalleryTabs=function(c){if(this.tabsLoaded){return false}this.totalTabs=Math.floor((this.fV.playerWidth-80)/130);if(this.fV.rows<1){this.fV.rows=1}if(this.fV.columns<1){this.fV.columns=1}this.clipsPerPage=this.fV.rows*this.fV.columns;this.totalCategories=c.categories.length-1;this.totalClips=c.clips.length-1;this.totalPages=Math.ceil(this.totalClips/this.clipsPerPage);var b=this;var a="";var d="";$wn.each(c.categories,function(f,h){var g=c.categories[f];if(g.headline!=null){if(f<b.totalTabs){if(f==0){a=a+'<li><a categoryId="'+g.id+'" href="#" class="tabs active">'+g.headline+"</a></li>"}else{a=a+'<li><a categoryId="'+g.id+'" class="tabs" href="#">'+g.headline+"</a></li>"}}else{d=d+'<option value="'+g.id+'">'+g.headline+"</option>";$wn(".categories .more",b.context).show()}}});$wn("ul.categories",b.context).append(a);$wn("ul.categories select",b.context).append(d);if($wn("ul.categories select",b.context).width()>(this.fV.playerWidth-10)){$wn("ul.categories select",b.context).css("width",(this.fV.playerWidth-10))}$wn(".categories .tabs",b.context).click(function(){$wn(".categories .tabs").removeClass("active");$wn(this).addClass("active");b.getContentJSON($wn(this).attr("categoryId"),"categories");return false});$wn(".categories #moreCategorySelect",b.context).change(function(){$wn(".categories .tabs").removeClass("active");b.getContentJSON($wn(this).val(),"categories");return false});$wn(this.context).show();this.tabsLoaded=true};WNVideoGallery.prototype.loadGalleryClips=function(c,a){if(this.hasClipAssigned){if(a){this.clipJSON=a;if(this.galleryJSON){this.prependClip(this.galleryJSON,this.clipJSON)}}if(c){this.galleryJSON=c;if(this.clipJSON&&this.galleryJSON.categories[0].id==this.categoryId){this.prependClip(this.galleryJSON,this.clipJSON)}}if(this.galleryJSON&&(this.clipJSON||this.galleryJSON.categories[0].id==this.categoryId)){c=this.galleryJSON}else{return false}}$wn(".video-page-container",this.context).empty();$wn(".video-page-container",this.context).html("loading...");this.clips=c.clips;this.totalTabs=Math.floor((this.fV.playerWidth-70)/130);this.clipsPerPage=this.fV.rows*this.fV.columns;this.totalCategories=c.categories.length-1;this.totalClips=c.clips.length-1;this.totalPages=Math.ceil(this.totalClips/this.clipsPerPage);if(this.totalPages<1){this.totalPages=1}var g=this;output="";$wn.each(c.clips,function(s,w){var o=$wn(this);var x=0;var p=false;if(c.clips[s].mainHeadline!=null){var q=c.clips[s];if(s%g.clipsPerPage==0){p=true}else{p=false}x=Math.floor(s/g.clipsPerPage)+1;if(p){if(x>1){output=output+"</div>"}output=output+'<div class="video-page video-page-'+x+'"><ul>'}var y=96,r=54,n=104;if(g.fV.videoListImageWidth){y=g.fV.videoListImageWidth}if(g.fV.videoListImageHeight){r=g.fV.videoListImageHeight}try{n=parseInt(y)+6}catch(t){}var u=wnVideoWidgets.getPlayableClipUrl(q);var u=unescape(q.uri[0].url);var v='<a href="'+u+'"><li class="video-thumb" clipIndex="'+s+'" id="clipid_'+q.id+'"><img class="thumb" style="width:'+y+"px;height:"+r+'px;" src="'+q.thumb+'"/><span class="title" style="margin-left:'+n+'px">'+q.mainHeadline+'</span><span class="length" style="margin-left:'+n+'px">'+wnVideoUtils.getTimeAsHHMMSS(q.duration)+"</span></li></a>";output=output+v}});if(c.clips.length<2){output='<div class="video-page video-page-1"><div class="wn-gallery-message">There are no videos in the selected category</div></div>'}$wn("div.video-page-container",this.context).html(output+"</div>");if(wnVideoUtils.hasHtmlVideo){$wn("div.video-page ul li",this.context).click(function(){var o=c.clips[$wn(this).attr("clipIndex")];o.domId=g.fV.domId;o.ordinance=parseInt($wn(this).attr("clipIndex"));o.isUserInitiated=true;if(wnVideoUtils.stringToBoolean(g.fV.enableSingleClipPage)){document.location.href=wnVideoWidgets.getClipPageUrl(o)}else{if($wn("#wnVideoHTML","#wn_html_video_"+g.groupId).length){evntMgr.Notify({evnt:"NewGalleryClip",idKey:g.groupId,objClip:o})}else{var n=wnVideoWidgets.landingPage+"&clipId="+c.clips[$wn(this).attr("clipIndex")].id+"&autostart=true";document.location.href=n}}return false})}$wn("div.video-page ul li",this.context).mouseover(function(){$wn(this).addClass("wn-highlight");return false});$wn("div.video-page ul li",this.context).mouseout(function(){$wn(this).removeClass("wn-highlight");return false});$wn("div.pager ul.page-numbers",this.context).empty();for(var d=1;d<=this.totalPages;d++){var h='<li><a href="#" class="page-'+d;if(d==1){h+=" active"}h+='" rel="'+this.fV.playerWidth*(d-1)+'">'+d+"</a></li>";$wn("div.pager ul",this.context).append(h)}var b=$wn("div.pager div.page-numbers-container",this.context);var f=this.fV.playerWidth-128;b.css("width",f);$wn("div.pager ul.page-numbers",this.context).css("width",26*this.totalPages);$wn("div.pager ul li a",this.context).click(function(){var o=$wn(this).attr("rel");$wn("div.video-page-container",g.context).animate({left:(0-o)+"px"});var n=$wn(this).parent()[0].offsetLeft;n-=(f/2-26/2);b.animate({scrollLeft:n+"px"});$wn(this).parent().parent().find(".active").removeClass("active");$wn(this).addClass("active");return false});$wn("div.video-page-container",this.context).css("left","0px");$wn(this.context).css({width:this.fV.playerWidth+"px"});$wn("div.video-page-container",this.context).css("width",(this.fV.playerWidth*this.totalPages)+"px");var k=70;if(this.isStoryVideo==true){k=37}$wn("div.video-page-container, div.wn-gallery div.video-page",this.context).css({height:(this.fV.playerHeight-k)+"px"});$wn("div.video-page div.wn-gallery-message",this.context).css({marginTop:((this.fV.playerHeight-k)/2-10)+"px"});$wn("div.video-page",this.context).css({width:this.fV.playerWidth+"px"});$wn("div.video-page ul li",this.context).width(this.fV.playerWidth/this.fV.columns);$wn("div.video-page ul li",this.context).height((this.fV.playerHeight-k)/this.fV.rows);$wn("div.pager a.next",this.context).click(function(){var p=$wn("div.video-page-container",g.context).position();if(p.left<=0-(g.fV.playerWidth*(g.totalPages-1))){}else{var n=parseInt(p.left)-parseInt(g.fV.playerWidth);var o=(-1)*Math.round(n/parseInt(g.fV.playerWidth));$wn("div.pager ul li:eq("+o+") a",g.context).trigger("click")}return false});$wn("div.pager a.prev",this.context).click(function(){var p=$wn("div.video-page-container",g.context).position();if(p.left>=0){}else{var n=parseInt(p.left)+parseInt(g.fV.playerWidth);var o=(-1)*Math.round(n/parseInt(g.fV.playerWidth));$wn("div.pager ul li:eq("+o+") a",g.context).trigger("click")}return false});$wn(this.context).show();var m=c.clips[0];if(m.uri&&this.fV.isPrimaryGallery){m.isUserInitiated=false;m.domId=this.fV.domId;m.ordinance=0;onWidgetLoad(this.fV.domId,this.fV.idKey,"","",{objClip:m});evntMgr.Notify({evnt:"NewGalleryClip",idKey:g.groupId,objClip:m})}};WNVideoGallery.prototype.getContentJSON=function(d,c){if(d&&c){var a=new Date().getTime();var b=wnFeedsApiDomain+"/feed/v3.0/"+c+"/"+d+"/all?alt=json&callbackparams="+this.fV.domId+"&callback=wnVideoWidgets.loadGallery";if(this.categoryCache[d]){this.loadGallery(this.categoryCache[d])}else{wnVideoUtils.loadScript("wnGalleryScript"+a,b)}if(this.hasClipAssigned&&d==this.categoryId){var b=wnFeedsApiDomain+"/feed/v3.0/clips/"+this.fV.clipId+"?alt=json&callbackparams="+this.fV.domId+"&callback=wnVideoWidgets.loadGalleryClip";wnVideoUtils.loadScript("wnGalleryClipScript"+a,b)}}};WNVideoGallery.prototype.onClipEnded=function(b){var c=b.objClip;if(this.fV.isContinuousPlay){if(this.fV.domId==c.domId){if((c.ordinance+1)<this.totalClips){var a=this.clips[c.ordinance+1];a.isUserInitiated=true;a.domId=this.fV.domId;a.ordinance=c.ordinance+1;evntMgr.Notify({evnt:"NewGalleryClip",idKey:this.groupId,objClip:a})}}else{if(c.domId==undefined&&this.fV.isPrimaryGallery&&this.totalClips>1){var a=this.clips[0];a.isUserInitiated=true;a.domId=this.fV.domId;a.ordinance=0;evntMgr.Notify({evnt:"NewGalleryClip",idKey:this.groupId,objClip:a})}}}};WNVideoCanvasPlayBackControl=function(a,c,b){this.fV=c;this.widgetClassType="WNVideoCanvasPlayBackControl";this.parentDivId=a;this.groupId=this.fV.idKey;this.video=$wn("#wnVideoHTML","#wn_html_video_"+this.groupId)[0];this.options=b;this.options=$wn.extend({overlay_elem_class:"",overlay_elem_id:""},b);this.needShowHideControl=true;this.timeoutId=0;this.isVisible=true;if(this.options.overlay_elem_id.length>0){this.elementOverlay=$wn("#"+this.options.overlay_elem_id,"#"+this.fV.domId)}else{if(this.options.overlay_elem_class.length>0){this.elementOverlay=$wn("."+this.options.overlay_elem_class,"#"+this.fV.domId)}else{this.elementOverlay=null}}if(this.elementOverlay){this.elementOverlayHeight=$wn(this.elementOverlay).outerHeight(true)}else{this.elementOverlayHeight=0}this.render();this.show()};WNVideoCanvasPlayBackControl.prototype.render=function(){var k=this,b=null;isPlaying=false;var h='<div class="wn-video-controls-container">';var f=wnUserAgentParser.getOS();if(f.name.toLowerCase()!="ios"||f.name.toLowerCase()=="ios"&&parseFloat(f.version)>=8){h+='   <div class="wn-canvas-player-play-control">       <span class="'+(this.video.autoplay?"wn-canvas-player-paused":"wn-canvas-player-playing")+'"></span>   </div>'}h+='   <div class="wn-canvas-player-loading-control">       <span class="wn-canvas-player-loading"></span>       <span class="wn-canvas-player-loading-spinner"></span>   </div>   <div class="wn-canvas-player-mute-control">       <span class="wn-canvas-player-mute"></span>   </div>   <div class="wn-canvas-player-fullscreen-control"><span class="wn-canvas-player-fullscreen"></span></div></div>';$wn("#"+this.parentDivId).append(h);this.elementContainer=$wn("div.wn-video-controls-container","#"+this.fV.domId);this.elementPlayPauseWrapper=$wn("div.wn-canvas-player-play-control","#"+this.fV.domId);this.elementPlayPause=$wn("div.wn-canvas-player-play-control > span","#"+this.fV.domId);this.elementProgressMessage=$wn(".wn-canvas-player-loading","#"+this.fV.domId);this.elementProgressSpinner=$wn(".wn-canvas-player-loading-spinner","#"+this.fV.domId);this.elementProgressWrapper=$wn("div.wn-canvas-player-loading-control","#"+this.fV.domId);this.elementFullScreen=$wn("div.wn-canvas-player-fullscreen-control > span","#"+this.fV.domId);this.elementFullScreenWrapper=$wn("div.wn-canvas-player-fullscreen-control","#"+this.fV.domId);this.elementMute=$wn("div.wn-canvas-player-mute-control > span","#"+this.fV.domId);this.elementMuteWrapper=$wn("div.wn-canvas-player-mute-control","#"+this.fV.domId);var g=$wn(this.elementPlayPauseWrapper).outerWidth(true);var c=$wn(this.elementFullScreenWrapper).outerWidth(true);var a=$wn(this.elementMuteWrapper).outerWidth(true);var d=(g+c+a)+7;this.elementProgressWrapper.css("width",(this.fV.playerWidth-d)+"px !important");this.elementOverlayCurrentHeight=30;$wn(this.elementContainer).css("display","none").css("position","relative").css("clear","none").css("width",this.fV.playerWidth+"px").css("height",this.elementOverlayCurrentHeight+"px").css("top",(this.fV.playerHeight-(this.elementOverlayCurrentHeight))+"px");if(wnVideoWidgets.useHtml5){this.elementFullScreenWrapper.hide();this.elementMuteWrapper.hide()}this.bindControlInternalEvents()};WNVideoCanvasPlayBackControl.prototype.bindControlInternalEvents=function(){var a=this;$wn(a.elementPlayPause).bind("click",function(){if(a.isPlaying){wnLog("Playback control: Pause button clicked");a.adsManager.pause()}else{wnLog("Playback control: Play button clicked");a.adsManager.resume()}});$wn(a.elementMute).bind("click",function(){if(a.video.readyState<a.video.HAVE_CURRENT_DATA){return false}a.video.muted=!a.video.muted;try{a.video.prop("muted",a.video.muted)}catch(b){a.video.attr("muted",a.video.muted)}a.setMuteCtrl();wnLog("Playback control: Mute button clicked")});$wn(a.elementFullScreen).bind("click",function(){if(a.video.readyState<a.video.HAVE_CURRENT_DATA){return false}if($wn.browser.webkit){a.video.webkitEnterFullscreen()}else{if($wn.browser.mozilla){a.video.mozRequestFullScreen()}else{}}wnLog("Playback control: Full-screen button clicked")})};WNVideoCanvasPlayBackControl.prototype.bindVideoPlayerEvents=function(){var a=this;a.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,function(b){wnLog("g: on PAUSED");a.isPlaying=false;a.setPlayPauseCtrl()});a.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,function(b){wnLog("g: on RESUMED");a.isPlaying=true;a.setPlayPauseCtrl()})};WNVideoCanvasPlayBackControl.prototype.setPlayPauseCtrl=function(){if(this.isPlaying){$wn(this.elementPlayPause).removeClass("wn-canvas-player-paused").addClass("wn-canvas-player-playing");$wn(this.elementProgressSpinner).empty()}else{$wn(this.elementPlayPause).removeClass("wn-canvas-player-playing").addClass("wn-canvas-player-paused");var a=wnUserAgentParser.getOS();if(a.name.toLowerCase()=="ios"&&parseFloat(a.version)<8){$wn(this.elementProgressSpinner).html("&nbsp; &nbsp; &nbsp; Click PLAY to continue. After the commercial finishes, your video will begin.");$wn(this.elementProgressSpinner).css("overflow","hidden").css("height","16px").css("position","relative").css("top","-15px")}else{$wn(this.elementProgressSpinner).html("Click Play to continue")}}this.setProgressCtrl()};WNVideoCanvasPlayBackControl.prototype.onVideoEnded=function(){$wn(this.elementPlayPause).removeClass("wn-canvas-player-playing").addClass("wn-canvas-player-paused");$wn(this.elementProgressSpinner).empty();this.hide()};WNVideoCanvasPlayBackControl.prototype.setMuteCtrl=function(){if(this.video.muted){$wn(this.elementMute).addClass("vol-0")}else{$wn(this.elementMute).removeClass("vol-0")}};WNVideoCanvasPlayBackControl.prototype.setProgressCtrl=function(){};WNVideoCanvasPlayBackControl.prototype.setCurrentTimeCtrl=function(){};WNVideoCanvasPlayBackControl.prototype.show=function(a){this.adsManager=a;this.isPlaying=true;this.setPlayPauseCtrl();if(typeof a!="undefined"){this.bindVideoPlayerEvents()}$wn(this.elementContainer).show();try{$wn(this.video).prop("controls","")}catch(b){$wn(this.video).attr("controls","")}this.isVisible=true;if(this.elementOverlay&&this.elementOverlayCurrentHeight){$wn(this.elementOverlay).css("height",(this.fV.playerHeight-(this.elementOverlayCurrentHeight+2))+"px");$wn(this.elementOverlay).show()}wnLog("Canvas PlayBackControl was displayed")};WNVideoCanvasPlayBackControl.prototype.hide=function(){if(this.elementOverlay){$wn(this.elementOverlay).css("height",0).hide()}$wn(this.elementContainer).hide();try{$wn(this.video).prop("controls","controls")}catch(a){$wn(this.video).attr("controls","controls")}this.isVisible=false;wnLog("Canvas PlayBackControl was hidden")};WNAmpVideoCanvas=function(m,k){this.fV=k;this.amp_config={resources:[{src:wn.contentdomain+"/global/vendor/amp.premier/amp.premier.min.css",type:"text/css"}],params:{wnadcall:""},target:"_top",fullscreen:{"native":true,enabled:(this.fV.hasFullScreen.toLowerCase()=="true")},controls:{mode:"auto",autoHide:2},flash:{swf:wn.contentdomain+"/global/vendor/amp.premier/AkamaiPremierPlayer.swf",debug:wn.contentdomain+"/global/vendor/amp.premier/AkamaiPremierPlayer-debug.swf",vars:{context_menu_mode:"short",core_ads_enabled:true},"static":{swf:wn.contentdomain+"/global/vendor/amp.premier/AkamaiPremierPlayer-static.swf",debug:wn.contentdomain+"/global/vendor/amp.premier/AkamaiPremierPlayer-static-debug.swf",plugins:{AkamaiAdvancedStreamingPlugin:"com.akamai.osmf.AkamaiAdvancedStreamingPluginInfo",CaptioningPlugin:"org.osmf.captioning.CaptioningPluginInfo"}}},captioning:{enabled:(wnVideoUtils.validateString(this.fV.transportShareButtons)&&this.fV.transportShareButtons.indexOf("cc")>-1)},mediaanalytics:{},share:{facebook:false,twitter:false,enabled:(typeof this.fV.toolsShareButtons=="undefined"&&typeof this.fV.overlayShareButtons=="undefined"||wnVideoUtils.validateString(this.fV.toolsShareButtons)&&this.fV.toolsShareButtons.indexOf("share")>-1||wnVideoUtils.validateString(this.fV.overlayShareButtons)&&this.fV.overlayShareButtons.indexOf("share")>-1)},ima:{enabled:true,version:3,resources:[{type:"text/javascript",src:"http://imasdk.googleapis.com/js/sdkloader/ima3.js"}],adTagUrl:"#{window.wnVideoWidgets.getAmpParams('"+this.fV.domId+"').wnadcall}",disableCompanionAds:"false",maxBitrate:100000,vpaidAllowed:true},autoplay:this.fV.isAutoStart.toLowerCase()=="true",branding:{},locales:{en:{MSG_NEXT_VIDEO:"Content starts in",MSG_SECONDS:"sec"}},volume:(wnVideoUtils.stringToBoolean(this.fV.isMute)?0:1),volumepanel:{direction:"vertical"},rules:{android_4_gets_m3u8:{regexp:"Android 4"}},playoverlay:{enabled:true}};if(!wn_isMobile){var a=wnSiteConfigVideo.landingPageUrl;if(a.indexOf("://")>-1){a=a.substr(a.indexOf("://")+3)}this.amp_config.domain=a}if(typeof this.fV.producerMode!=="undefined"&&this.fV.producerMode=="clip-edit"){this.amp_config.mode="html"}var d={WNAd1:{id:"WNAd1",width:468,height:60},WNAd14:{id:"WNAd14",width:120,height:600},WNAd16:{id:"WNAd16",width:1,height:1},WNAd17:{id:"WNAd17",width:1,height:1},WNAd18:{id:"WNAd18",width:120,height:240},WNAd20:{id:"WNAd20",width:180,height:150},WNAd21:{id:"WNAd21",width:88,height:31},WNAd22:{id:"WNAd22",width:490,height:25},WNAd23:{id:"WNAd23",width:120,height:240},WNAd24:{id:"WNAd24",width:120,height:15},WNAd26:{id:"WNAd26",width:120,height:60},WNAd27:{id:"WNAd27",width:120,height:60},WNAd28:{id:"WNAd28",width:120,height:60},WNAd30:{id:"WNAd30",width:10,height:10},WNAd31:{id:"WNAd31",width:11,height:11},WNAd35:{id:"WNAd35",width:180,height:150},WNAd36:{id:"WNAd36",width:468,height:60},WNAd37:{id:"WNAd37",width:0,height:0},WNAd38:{id:"WNAd38",width:0,height:0},WNAd39:{id:"WNAd39",width:0,height:0},WNAd40:{id:"WNAd40",width:468,height:60},WNAd41:{id:"WNAd41",width:728,height:90},WNAd42:{id:"WNAd42",width:160,height:600},WNAd43:{id:"WNAd43",width:300,height:250},WNAd44:{id:"WNAd44",width:300,height:75},WNAd45:{id:"WNAd44",width:1,height:1},WNAd46:{id:"WNAd46",width:728,height:90},WNAd47:{id:"WNAd47",width:300,height:150},WNAd48:{id:"WNAd48",width:0,height:0},WNAd49:{id:"WNAd49",width:500,height:300},WNAd50:{id:"WNAd50",width:300,height:175},WNAd52:{id:"WNAd52",width:300,height:250},WNAd54:{id:"WNAd54",width:645,height:300},WNAd63:{id:"WNAd63",width:300,height:600},WNAd85:{id:"WNAd85",width:850,height:30},WNAd86:{id:"WNAd86",width:980,height:30},WNAd88:{id:"WNAd88",width:94,height:19},WNAd101:{id:"WNAd101",width:300,height:150},WNAd103:{id:"WNAd103",width:300,height:250},WNAd104:{id:"WNAd104",width:468,height:60},WNAd105:{id:"WNAd105",width:728,height:90},WNAd106:{id:"WNAd106",width:728,height:90},WNAd130:{id:"WNAd130",width:10,height:10},WNAd131:{id:"WNAd131",width:11,height:11}};var h=wnCompanionAds.split(",");this.amp_config.ima.companions=new Array();for(j=0;j<h.length;j++){this.amp_config.ima.companions.push(d[h[j]])}this.amp_config.flash.xml="<application>   <player        core_player_name='worldnow-player'        volume='"+(wnVideoUtils.stringToBoolean(this.fV.isMute)?0:1)+"'        branding_preload='none'        mbr_start_index='2'        use_last_known_bitrate='false'        use_netsession_client='false'       netsession_install_prompt_frequency_secs='-1'        ad_server_timeout='20'        ad_control_enabled='true'        dvr_enabled='1'        hds_live_low_latency='true'        fullscreen_enabled = '"+this.fV.hasFullScreen.toLowerCase()+"'       show_feature_bar='false'        hds_fragment_retry_data_gap_threshold= '20'        >    </player>    <plugins>        <plugin host='osmf' type='dynamic' absolute='true' id='AkamaiAdvancedStreamingPlugin'>http://players.edgesuite.net/flash/plugins/osmf/advanced-streaming-plugin/v3.5/osmf2.0/AkamaiAdvancedStreamingPlugin.swf</plugin>        <plugin host='osmf' type='dynamic' id='CaptioningPlugin'>"+wn.contentdomain+"/global/vendor/amp.premier/plugins/CaptioningPlugin.swf</plugin>        <plugin host='osmf' type='dynamic' id='onCaptionInfoPlugin'>"+wn.contentdomain+"/global/vendor/amp.premier/plugins/onCaptionInfoPlugin.swf</plugin>    </plugins>    <view skin='"+wn.contentdomain+"/global/vendor/amp.premier/premier.assets.swf'>        <element id='adOptions' style=\"backgroundColor: 'rgba(0, 0, 0, 1)'\">           <element id='adCountdown' />        </element>        <element id='infoOverlay' style='top: 0px;' />        <element id='recommendationSlate' viewMode='grid' items='5' />        <element id='captionDisplay' initState='cookie|off' position='relative' style='bottom: 0px; windowColor:0x000000; windowOpacity:0; font:Arial; fontColor:0xffffff; fontOpacity:1; fontBGColor:0x000000; fontBGOpacity:0; edgeType:none; edgeColor:0x000000; edgeOpacity:1; scroll:popOut; fontSize:12;' settingsEnabled='true' />        <element id='logoOverlay' style='width: 180px; height: 46px; right: 15px; top: 15px; opacity: 1;' />        <element id='controls' autoHide='5' height='25' backgroundAlpha='.8' >            <element id='replayBtn' />            <element id='playPauseBtn' />            <element id='rewindBtn' />            <element id='scrubBar' collapsedHeight='5'  style='background: linear-gradient(90deg, "+this.fV.skin["#progressBar"]["trackBgColor"]+", "+this.fV.skin["#progressBar"]["trackBgColor"]+"); height: 9px;' />            <element id='progressBar' style='background: linear-gradient(90deg, "+this.fV.skin["#progressBar, #volumeBar"]["bufferedColor"]+", "+this.fV.skin["#progressBar, #volumeBar"]["bufferedColor"]+");' />            <element id='loadedBar' style='background: linear-gradient(90deg, "+this.fV.skin["#progressBar, #volumeBar"]["playedColor"]+", "+this.fV.skin["#progressBar, #volumeBar"]["playedColor"]+");' />            <element id='liveIndicator' />            <element id='streamTimeIndicator' position='right' exclude='live'>               <element id='streamTime' />               <element id='streamDuration' color='#666666' />             </element>            <element id='timeLocationIndicator' type='arrow' color='#FFFFFF' />            <element id='goLiveBtn' />";if(typeof this.fV.toolsShareButtons=="undefined"&&typeof this.fV.overlayShareButtons=="undefined"||wnVideoUtils.validateString(this.fV.toolsShareButtons)&&this.fV.toolsShareButtons.indexOf("share")>-1||wnVideoUtils.validateString(this.fV.overlayShareButtons)&&this.fV.overlayShareButtons.indexOf("share")>-1){this.amp_config.flash.xml+="            <element id='shareBtn' />"}if(wnVideoUtils.validateString(this.fV.transportShareButtons)&&this.fV.transportShareButtons.indexOf("cc")>-1){this.amp_config.flash.xml+="            <element id='captionBtn' />"}this.amp_config.flash.xml+="            <element id='hdClientBtn'/>            <element id='volumeBar' backgroundColor='#111111' trackColor='"+this.fV.skin["#volumeBarVertical"]["trackBgColor"]+"'              color='"+this.fV.skin["#volumeBarVertical"]["volumeLevelColor"]+"' position='top' width='25' />            <element id='volumeBtn' />";if(this.fV.hasFullScreen.toLowerCase()=="true"){this.amp_config.flash.xml+="            <element id='fullscreenBtn'/>"}this.amp_config.flash.xml+="        </element>        <element id='bufferingView' mode='default' tether='true' />        <element id='loadingView' increments='30' radius='15' curve='0' height='2' width='15'/>        <element id='replayView' />    </view></application>";this.widgetClassType="WNVideoCanvas";this.parentDivId=m;this.parentJSName=this.widgetClassType+this.fV.widgetId;this.groupId=this.fV.idKey;if(wn_isMobile){var b=$wn("#"+this.parentDivId);this.fV.widgetsContainer=b.parent();var n=this.fV.playerHeight/this.fV.playerWidth;var c=parseInt(b.position().left);var f=parseInt(this.fV.playerWidth)+c;var g=b.parent().parent().width()-c;if(g<f){this.fV.playerWidth=g;this.fV.originalHeight=parseInt(this.fV.playerHeight);this.fV.originalWidth=f;this.fV.top=b.position().top;this.fV.left=b.position().left;this.fV.originalContainerHeight=b.parent().height();this.fV.playerHeight=Math.round(this.fV.playerWidth*n);var o=this.fV.originalHeight-this.fV.playerHeight;b.parent().height(b.parent().height()-o);containerWidth=b.parent().parent().width();f=b.parent().width();if(containerWidth<f){b.parent().width(containerWidth)}}}evntMgr.Register({evnt:"NewGalleryClip",func:"onNewGalleryClip",idKey:this.groupId,lstnr:this.fV.domId});this.render();$wn("#"+this.fV.domId).data("widget",this)};WNAmpVideoCanvas.prototype.resizeOnScreenFlip=function(){var a=$wn("#"+this.parentDivId);var d=parseInt(a.position().left);var k=parseInt(this.fV.playerWidth)+d;var b=parseInt(this.fV.playerHeight);var c=a.parent().parent().width()-d;var h=a.parent().width();var m=getWigdetByType(this.groupId,"g");if(m.hasOwnProperty("widgetsContainer")&&m.widgetsContainer.attr("id")==a.parent().attr("id")){var g=a.position().top+parseInt(this.fV.playerHeight);if(m.top<=g&&m.left>=k){c=(c<m.left)?c:m.left;h=m.left}}if(c>h){c=h}var f=c;a.width(f);a.height(b);a.find(".wn-embed-code").width(f-160);a.find(".share-link").width(f-160)};WNAmpVideoCanvas.prototype.render=function(){var b=this;var a;var c='<div id="'+this.fV.domId+'">    <div id="wn_html_video_'+this.groupId+'" >        <div id="wnVideoHTML"></div></div></div>';$wn("#"+this.fV.domId+"_swfObject").html(c);style="<style type='text/css'>#"+this.fV.domId+" {width: 100%; height: 100%;} ";if(wn_isMobile){style+="#"+this.fV.domId+"_swfObject {width: 140%; height: 140%; -webkit-transform: scale(0.715,0.715); -webkit-transform-origin: top left; } "}else{style+="#"+this.fV.domId+"_swfObject {width: 100%; height: 100%; } "}style+="#"+this.parentDivId+" {width: "+this.fV.playerWidth+"px; height:"+this.fV.playerHeight+"px;} </style>";$wn("#"+this.parentDivId).append(style);if(typeof akamai.amp.AMP.defaults!=="undefined"&&akamai.amp.AMP.defaults.loaded){this.createAmpPlayerObj()}else{akamai.amp.AMP.loadDefaults(this.amp_config,function(){b.createAmpPlayerObj()})}};WNAmpVideoCanvas.prototype.createAmpPlayerObj=function(){var a={feed:{}};this.canvas=akamai.amp.AMP.create(this.fV.domId,a);$wn("#"+this.fV.domId).data("amp",this.canvas);this.canvas.widget=this;this.canvas.addEventListener("ready",this.renderComplete)};WNAmpVideoCanvas.prototype.companionHandler=function(c){var b=c.data.companions;var a=c.target.player.widget;if(b.length<1){a.setUAFCompanions(a.wnAdProps)}else{for(i=0;i<b.length;i++){b[i].htmlResource=b[i].data;evntMgr.Notify({evnt:"UAFLoadVastCompanions",idKey:a.groupId,objClip:{},adProps:{},vastAd:b[i]})}wnVideoWidgets.SetVASTCompanions({companions:b,adProps:a.wnAdProps})}};WNAmpVideoCanvas.prototype.setUAFCompanions=function(a){wnVideoReloadCompanionAds(a,this.currentClip);evntMgr.Notify({evnt:"UAFLoadCompanions",idKey:this.groupId,objClip:this.currentClip,adProps:a})};WNAmpVideoCanvas.prototype.renderComplete=function(d){this.isRendered=true;if(this.widget.fV.videoType=="livestream"){var n=new Array;if(this.widget.fV.liveStreamUrl){n.push({url:this.widget.fV.liveStreamUrl,type:"video/f4m"})}if(this.widget.fV.liveStreams){for(i=0;i<this.widget.fV.liveStreams.length;i++){strm=this.widget.fV.liveStreams[i];if(strm.url!=""){var f=(strm.url.indexOf(".m3u8")!=-1)?"application/x-mpegURL":strm.type;n.push({url:strm.url,type:f})}}}var b={videoType:"livestream",isLiveStream:true,id:"0",uri:n,headline:this.widget.fV.liveStreamHeadline,mainHeadline:this.widget.fV.liveStreamHeadline,graphic:this.widget.fV.liveStreamSummaryImgUrl,adTag:this.widget.fV.liveStreamAdTag,ownerAffiliateNumber:this.widget.fV.affiliateNumber,ownerAffiliateName:this.widget.fV.affiliate,ownerAffiliateBaseUrl:"",isMilliseconds:"true",vt:"V",hasCC:"0",duration:"",summary:"",creationdate:" ",isAd:"False",serveAdsFromContentOwner:"False",displaysize:"20",hasAdPreRoll:this.widget.fV.liveStreamHasPreroll=="true"?"true":"false",preRollSplitPct:"100",preRollOwner:"loc",hasAdPostRoll:this.widget.fV.liveStreamHasPostroll=="true"?"true":"false",postRollSplitPct:"100",postRollOwner:"loc",mobile_hasAdPreRoll:this.widget.fV.liveStreamHasPreroll=="true"?"true":"false",mobile_preRollSplitPct:"100",mobile_preRollOwner:"loc",mobile_hasAdPostRoll:this.widget.fV.liveStreamHasPostroll=="true"?"true":"false",mobile_postRollSplitPct:"100",mobile_postRollOwner:"loc"};this.widget.loadClip(b)}else{if(this.widget.fV.clipId>0){var h=wnVideoWidgets.getClipPageUrl({id:this.widget.fV.clipId,pageUrl:"videoclip"});var a=h+"?clienttype=mrssjson&callback=wnVideoWidgets.ampObjCallback&callbackparams="+this.widget.fV.domId;wnVideoUtils.loadScript("wnmrssjson",a)}else{if(this.widget.fV.flvUri){var n=new Array({url:this.widget.fV.flvUri,type:wnVideoUtils.getVideoFormatByUrl(this.widget.fV.flvUri)});var k={id:"0",uri:n,headline:"",mainHeadline:"",graphic:"",adTag:"",ownerAffiliateNumber:"",ownerAffiliateName:"",ownerAffiliateBaseUrl:"",isMilliseconds:"true",vt:"V",hasCC:"0",summary:"",creationdate:" ",isAd:"False"};if(this.widget.fV.enableAds==false){k.hasAdPreRoll="false";k.hasAdPostRoll="false";k.mobile_hasAdPreRoll="false";k.mobile_hasAdPostRoll="false"}this.widget.loadClip(k)}else{var g=getWigdetByType(this.widget.groupId,"g");if(g.data){var m=g.data.objClip;if(m){m.isUserInitiated=false;m.domId=this.widget.fV.domId;m.ordinance=0;this.widget.loadClip(m)}}}}}if(this.widget.canvas.share!=null){var c=this;this.widget.canvas.share.addEventListener("share",c.widget.shareHandler)}if(this.widget.canvas.ads!=null){this.widget.canvas.ads.addEventListener("companion",this.widget.companionHandler)}this.widget.canvas.addEventListener("started",this.widget.reportEvent);this.widget.canvas.addEventListener("pause",this.widget.reportEvent);this.widget.canvas.addEventListener("ended",this.widget.reportEvent);this.widget.canvas.addEventListener("emptied",this.widget.reportEvent);this.widget.canvas.addEventListener("loadstart",this.widget.reportEvent);this.widget.canvas.addEventListener("progress",this.widget.reportEvent);this.widget.canvas.addEventListener("suspend",this.widget.reportEvent);this.widget.canvas.addEventListener("abort",this.widget.reportEvent);this.widget.canvas.addEventListener("error",this.widget.reportEvent);this.widget.canvas.addEventListener("emptied",this.widget.reportEvent);this.widget.canvas.addEventListener("stalled",this.widget.reportEvent);this.widget.canvas.addEventListener("loadedmetadata",this.widget.reportEvent);this.widget.canvas.addEventListener("loadeddata",this.widget.reportEvent);this.widget.canvas.addEventListener("canplay",this.widget.reportEvent);this.widget.canvas.addEventListener("canplaythrough",this.widget.reportEvent);this.widget.canvas.addEventListener("play",this.widget.reportEvent);this.widget.canvas.addEventListener("waiting",this.widget.reportEvent);this.widget.canvas.addEventListener("seeking",this.widget.reportEvent);this.widget.canvas.addEventListener("seeked",this.widget.reportEvent);this.widget.canvas.addEventListener("durationchange",this.widget.reportEvent);this.widget.canvas.addEventListener("ratechange",this.widget.reportEvent);this.widget.canvas.addEventListener("volumechange",this.widget.reportEvent);this.widget.canvas.addEventListener("mediaPlayerFullscreenChange",this.widget.reportEvent);this.widget.canvas.addEventListener("fullscreenchange",this.widget.reportEvent);gamp=this.widget.canvas};var gamp;WNAmpVideoCanvas.prototype.reportEvent=function(d){if(d.target.ads.getInProgress()){return false}var c=d.target.feed.getData();var b={};for(i in d.target.widget.currentClip){b[i]=d.target.widget.currentClip[i]}b.url=b.landingPageURL;b.currentTime=d.target.getCurrentTime()*1000;b.currentTimePct=Math.round(b.currentTime/b.duration*100);var a=d.type;switch(a){case"started":a="duration";break;case"pause":a="user_pause";break;case"ended":a="clipended";break;case"volumechange":if(d.data.requestSource!="user"){if(d.target.getVolume()==0){a="mute"}else{if(typeof this.volume_level!=="undefined"&&this.volume_level==0){a="unmute"}else{a=""}}}this.volume_level=d.target.getVolume();break;case"fullscreenchange":if(d.data){a="fullscreen"}else{a=""}break}if(a!=""){wnVideoWidgets.handleEvent({event:{type:a},system:"video",clip:b,valid:true})}};WNAmpVideoCanvas.prototype.MrssJsonToWNClip=function(a){var b=a.channel.item;var c={ownerAffiliateNumber:this.fV.affiliateNumber,ownerAffiliateName:this.fV.affiliate,affiliateName:wnSiteConfigGeneral.affiliateName,id:b.guid,headline:b.title,mainHeadline:b.title,pageUrl:b.link.substring(b.link.lastIndexOf("/")+1),autostart:false,graphic:b["media-group"]["media-thumbnail"]["@attributes"].url,HasGraphic:(b["media-group"]["media-thumbnail"]["@attributes"].url!=""),summary:b.description,creationDate:b.pubDate,lasteditedDate:b.pubDate,duration:b["media-group"]["media-content"][0]["@attributes"].duration*1000,isMilliseconds:false,isFlash:false,isAd:false,isAdIntro:false,isAdExit:false,isAdFrame:false,isASX:false};c.adTag=(typeof b["wn-contentclassification"]!=="undefined")?b["wn-contentclassification"]:"";if(typeof b["wn-ads"]!=="undefined"){c.hasAdPreRoll=b["wn-ads"].wnsz_30.show;c.preRollOwner=b["wn-ads"].wnsz_30.owner;c.preRollSplitPct=b["wn-ads"].wnsz_30.splitpct;c.hasAdPostRoll=b["wn-ads"].wnsz_31.show;c.postRollOwner=b["wn-ads"].wnsz_31.owner;c.postRollSplitPct=b["wn-ads"].wnsz_31.splitpct;c.mobile_hasAdPreRoll=b["wn-ads"].wnsz_130.show;c.mobile_preRollOwner=b["wn-ads"].wnsz_130.owner;c.mobile_preRollSplitPct=b["wn-ads"].wnsz_130.splitpct;c.mobile_hasAdPostRoll=b["wn-ads"].wnsz_131.show;c.mobile_postRollOwner=b["wn-ads"].wnsz_131.owner;c.mobile_postRollSplitPct=b["wn-ads"].wnsz_131.splitpct}else{c.hasAdPreRoll="false";c.preRollOwner="nat";c.preRollSplitPct="100";c.hasAdPostRoll="false";c.postRollOwner="nat";c.postRollSplitPct="100";c.mobile_hasAdPreRoll="false";c.mobile_preRollOwner="nat";c.mobile_preRollSplitPct="100";c.mobile_hasAdPostRoll="false";c.mobile_postRollOwner="nat";c.mobile_postRollSplitPct="100"}if(typeof b["wn-taxonomy"]!=="undefined"){c.taxonomy1=b["wn-taxonomy"].level1;c.taxonomy2=b["wn-taxonomy"].level2;c.taxonomy3=b["wn-taxonomy"].level3}else{c.taxonomy1="";c.taxonomy2="";c.taxonomy3=""}return c};WNAmpVideoCanvas.prototype.WNClipToMrssJson=function(a){mrssJson={"@attributes":{version:"2.0"},channel:{category:"",pubDate:(a.creationdate!=undefined)?a.creationdate:a.creationDate,language:"en",ttl:"10",item:{title:a.headline,link:wnVideoWidgets.getLinkToVideo(a,this.fV),description:a.summary,category:"",pubDate:(a.creationdate!=undefined)?a.creationdate:a.creationDate,guid:a.id,"media-group":{"media-title":a.headline,"media-description":a.summary,"media-subTitle":[{"@attributes":{type:"application/ttml+xml",lang:"en-us",href:wn.staticimagefarmprefix+"/metadata/"+a.id+".ttml"}}],"media-embed":{"@attributes":{url:"http://player.js",width:"604",height:"341"},"media-param":{"@attributes":{name:"type"},"#text":"text/javascript"}}}}}};if(a.graphic){mrssJson.channel.item["media-group"]["media-thumbnail"]={"@attributes":{url:a.graphic}}}else{mrssJson.channel.item["media-group"]["media-thumbnail"]={"@attributes":{url:" "}}}mrssJson.channel.item["media-group"]["media-content"]=new Array();if(a.videoType=="livestream"||a.uri){for(j in a.uri){if(a.uri[j].type&&a.uri[j].url){mrssJson.channel.item["media-group"]["media-content"].push({"@attributes":{isDefault:(j=="0"),url:decodeURIComponent(a.uri[j].url),type:a.uri[j].type,medium:"video",duration:Math.floor(a.duration/1000)}})}}}else{if(a.flvUri){mrssJson.channel.item["media-group"]["media-content"].push({"@attributes":{isDefault:"true",url:a.flvUri,type:"video/mp4",medium:"video",duration:Math.floor(a.duration/1000)}})}else{wnLog("Unexpected video source format")}}return mrssJson};WNAmpVideoCanvas.prototype.loadClip=function(g,n){if(typeof n==="undefined"){n=false}if(g.hasOwnProperty("channel")){var q=g;var p=q.channel.item;var c={owner:"loc",splitpct:"100",show:"false"};if(!p["wn-ads"]){p["wn-ads"]={}}if(!p["wn-ads"]["wnsz_30"]){p["wn-ads"]["wnsz_30"]=c}if(!p["wn-ads"]["wnsz_31"]){p["wn-ads"]["wnsz_31"]=c}if(!p["wn-ads"]["wnsz_130"]){p["wn-ads"]["wnsz_130"]=c}if(!p["wn-ads"]["wnsz_131"]){p["wn-ads"]["wnsz_131"]=c}var h=this.MrssJsonToWNClip(q)}else{if(g.id>0){var a="http://"+wn.baseurl+"/clip/"+g.id+"/videoclip?clienttype=mrssjson&callback=wnVideoWidgets.ampObjCallback&callbackparams="+this.fV.domId+"|"+n;wnVideoUtils.loadScript("wnmrssjson",a);return}else{var h={};for(f in g){h[f]=g[f]}h.headline=unescape(g.headline);h.HasThumb=(g.thumb&&g.thumb.length>0)?true:false;h.isMilliseconds=false;h.isFlash=false;h.isAd=false;h.isAdIntro=false;h.isAdExit=false;h.isAdFrame=false;h.isASX=false;h.affiliateName=wnSiteConfigGeneral.affiliateName;if(wn_isMobile&&wn_isPlatformSiteMobile){h.mobile_hasAdPreRoll=(typeof g.mobile_hasAdPreRoll=="boolean")?g.mobile_hasAdPreRoll.toString():g.mobile_hasAdPreRoll;h.mobile_hasAdPostRoll=(typeof g.mobile_hasAdPostRoll=="boolean")?g.mobile_hasAdPostRoll.toString():g.mobile_hasAdPostRoll}else{h.hasAdPreRoll=(typeof h.hasAdPreRoll=="boolean")?h.hasAdPreRoll.toString():g.hasAdPreRoll;h.hasAdPostRoll=(typeof h.hasAdPostRoll=="boolean")?h.hasAdPostRoll.toString():g.hasAdPostRoll}h.preRollSplitPct=parseInt(g.preRollSplitPct);h.preRollOwner=g.preRollOwner;h.postRollSplitPct=parseInt(g.postRollSplitPct);h.postRollOwner=g.postRollOwner;h.mobile_preRollSplitPct=parseInt(g.mobile_preRollSplitPct);h.mobile_preRollOwner=g.mobile_preRollOwner;h.mobile_postRollSplitPct=parseInt(g.mobile_postRollSplitPct);h.mobile_postRollOwner=g.mobile_postRollOwner;var q=this.WNClipToMrssJson(h)}}this.currentClip={};for(f in h){this.currentClip[f]=h[f]}if(wn_isMobile&&wn_isPlatformSiteMobile&&(wnVideoUtils.stringToBoolean(this.currentClip.mobile_hasAdPreRoll))||!(wn_isMobile&&wn_isPlatformSiteMobile)&&wnVideoUtils.stringToBoolean(this.currentClip.hasAdPreRoll)){this.canvas.ima.config.enabled=true;this.canvas.setParams({wnadcall:this.getAdUrl()})}else{this.canvas.ima.config.enabled=false;this.canvas.setParams({wnadcall:""})}if(this.currentClip.videoType!="livestream"){var b=q.channel.item;var d=wnUserAgentParser.getOS().name.toLowerCase();var k=wnUserAgentParser.getOS().version;if(typeof(k)==="string"&&k.match("[.]([^.]+)[.]")){k=k.substr(0,k.lastIndexOf("."))}k=Number(k);var m=[];var o;var r=0;for(var f=0;f<b["media-group"]["media-content"].length;f++){o=wnVideoUtils.getVideoFormatByUrl(b["media-group"]["media-content"][f]["@attributes"].url);if(!wnSiteConfigVideo.enableABRStreaming){if(o=="video/f4m"||o=="application/x-mpegURL"){}else{m[r]=b["media-group"]["media-content"][f];r=r+1}}else{if(d=="ios"||d=="android"){if(o=="video/f4m"){}else{if(o=="application/x-mpegURL"&&d=="android"&&wnVideoUtils.validateString(wn.contentaddons.betalist)&&wn.contentaddons.betalist.indexOf("videodisableabrandroid")>-1&&!isNaN(k)&&k<=3.7){}else{m[r]=b["media-group"]["media-content"][f];r=r+1}}}else{if(o=="application/x-mpegURL"){}else{if(o=="video/f4m"&&wnVideoUtils.validateString(wn.contentaddons.betalist)&&wn.contentaddons.betalist.indexOf("videodisablehdschrome")>-1&&d=="mac os x"&&!isNaN(k)&&k>=10.1&&wnUserAgentParser.getBrowser().name=="Chrome"){}else{m[r]=b["media-group"]["media-content"][f];r=r+1}}}}}q.channel.item["media-group"]["media-content"]=m}if(q.channel.item["media-group"]["media-thumbnail"]["@attributes"]["url"]==""){q.channel.item["media-group"]["media-thumbnail"]["@attributes"]["url"]=" "}if(n){this.canvas.setAutoplay(true)}else{this.canvas.setAutoplay(this.fV.isAutoStart.toLowerCase()=="true")}evntMgr.Notify({evnt:"NewClip",idKey:this.groupId,objClip:h});this.canvas.feed.setData(q)};WNAmpVideoCanvas.prototype.onNewGalleryClip=function(a){if(!this.canvas.isRendered){return}wnLog("onNewGalleryClip()");var b=a.objClip;if(b.isUserInitiated){this.loadClip(b,true)}else{if((!wnVideoUtils.validateString(this.fV.clipId)||parseInt(this.fV.clipId)<1)&&this.fV.videoType!="livestream"){this.loadClip(b,false)}}};WNAmpVideoCanvas.prototype.getAdUrl=function(){var b=new Object();b.wncc=this.currentClip.adTag;b.wnccx=this.fV.advertisingZone;if(this.fV.playerAdvertisingType!="none"){b.apptype=this.fV.playerAdvertisingType}else{switch(this.fV.playerType.toLowerCase()){case"popup":b.apptype="videopopup";break;case"standard":b.apptype="videostandard";break;case"embedded":b.apptype="videoembedded";break;case"landingpage":b.apptype="videolandingpage";break;default:b.apptype="video"}}this.currentClip.apptype=b.apptype;this.currentClip.idKey=this.idKey;b.width=b.height="10";b.wnsz="30";if(this.fV.usePrerollMaster.toLowerCase()=="true"){b.sequence=1}else{var a=false;a=wnVideoWidgets.masterAdExists(this.currentClip);if(a!=true){b.sequence=1}}var d="";var c=wnVideoWidgets.UAFHelper(b,this.currentClip,"raw");if(c!=null){d=c.url;if(wn_debug_widgets=="true"&&wnVideoUtils.validateString(this.fV.debugAdUrl)){d=this.fV.debugAdUrl}b.owner=c.owner}this.wnAdProps=b;return d};WNAmpVideoCanvas.prototype.shareHandler=function(f){f.target.player.exitFullScreen();var d=f.target.player.widget;var c=wnVideoWidgets.getLinkToVideo(d.currentClip,d.fV);var g=document.getElementById(d.parentDivId);var b=document.getElementById(d.parentDivId+"_addthis_button");if(b!=null){g.removeChild(b)}b=document.createElement("a");b.setAttribute("id",d.parentDivId+"_addthis_button");if(/ipad/i.test(navigator.userAgent.toLowerCase())){b.click=new function(){return false}}b.style.position="absolute";g.insertBefore(b,g.childNodes[0]);var a={url:unescape(c),title:unescape(d.currentClip.headline),description:unescape(d.currentClip.summary)};addthis.button("#"+d.parentDivId+"_addthis_button",{},a);b.style.visibility="hidden";b.style.zIndex="1";document.getElementById(d.parentDivId+"_addthis_button").onclick();return false};WNAmpVideoCanvas.prototype.pauseMedia=function(){this.canvas.pause()};WNAmpVideoCanvas.prototype.playMedia=function(){this.canvas.play()};WNAmpVideoCanvas.prototype.ExternalSetVideoTime=function(a){this.canvas.setCurrentTime(a)};WNAmpVideoCanvas.prototype.ExternalGetTimerObject=function(){return{videoCurrentTime:this.canvas.getCurrentTime()}};WNVideoCanvas=function(b,h){this.labels={SHARE:'<img style="display:inline !important" width="25" height="25" title="Share This Video" alt="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAIAAABLixI0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAXVJREFUeNqsVTGWREAUXDP7RA4wcnIiycg5wMgdgJycCziAHPlmEyA3B3AAkcgBtmb+Pmtps9pTUfvdqn/Xr98tlGX5cRA+d/xTVVVRFDS2LMu27Z1cSZLkeT5+Nk3zeDyCIMD4xEXUtu2UiPD1AjcXTseM13XNzbWGYRj4uLqugzTMqcvlslV7sKRpSqIw4bruHy7sCTmgrqZpKDNtNWWRJOl2u+m6Hscx4vQXgp7n0WKBvDqrNIAV4J2yABiMRcAsKEzTHINPLmTk+z4z+SXLP75fEwLHiaJoCwvhRKIw5yDcdqIfLlKOWT4ulz25xuZcNofjOG+sMMMZ1qC8Zj6E3n3fIzX0B6ZkWZ6mjzre73fMIi6K4m8dR39R00/9haTgLzosSoGNoWAYhjN/0cmELXfhlJGJLMuw95ns/x6qquLIWA1/UhsvYRgGR2/bL6zda4fdOWRDPi50HzN+vV65uRRFgXBrZxd2vGlr75Bw4Pv4LcAASzDOV39SERwAAAAASUVORK5CYII=" />',CLOSE_X:"Close X",EMBED_VIDEO:"Embed Video Code:",LINK_VIDEO:"Link to Video:",CC_OFF:'<img id="wnVideoCCOFF" style="display:inline" width="52" height="25" title="Play Without Closed Captions" alt="Play Without Closed Captions" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAZCAIAAADxKJpUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAt5JREFUeNrkV0FoE0EUrU1oMGmwotE2UI0QKfSkEPHS0nM9J15Deiw0J0HIQdFDRPCUQntL6VHSsz2XHBUKQoWSQLcW0kosCkkXjAR98Wd/f2dnN3vqBpzDsDuZ/f/t+/+9nQRT76sjwzpGR4Z4BJX77lm79WXXPKxfMo5QbPLq3WQ4cd8R3OnO9tfNEvD5RdXNhcXEcoFvA/HMEl2BsPq7wp/fHR/riIp1zfa1B49V5r59qNh3R2cfgvCxW1Otvd1O8/hX80QbFOUYi01iNo1ap3mCWRsqnEj+/Fh1CsIwprN5FZxSzYlH83eyeaTs36dzxK6xVpTRkfLecuF8m1WEo81VCRG4Z16WcBFPLzW2yloi5OMI66hWYE8+KyopCcrs242QtY4WQUqHbWVKwK/ab6PIOILjV6X3vVoJgt5+kqFr1AhU7b/KN7Y2ODq1KaVh1rEB246EnqazK05ZgQz4uN29WgmGRLb3PEfJQHX3rEVoAuHxf9ueAh8h23+dpyL2bMioUwWDkah77ng6N5GaM9bfaHtUD45L0KiUZSNSowQiUTR1b1tqjta/72zL6KR6EsfAwhGFiAzKB4OTjfLjU9UuJRmXLgirHFixL7oMqpUdn9vn6zLdGC4zvN9WLREqODitvfkk/5AYWQmHs780HsQ22SHuA216sF4cDA4G27E8lmXLt1ArJEaaRURrvS9b7kV4JLZh9kIY1AMP8sQcqY/FgQSYkZuQ9SOabSkOmPDMixLRjBnX1nseuyODaD6vZFyko7ESOAhsgsSIZEpxe35bKRNzOMXcWFhkttQ4lm9rCUMdBypaLwiY6qnF34VTg1HDT/xtPVgrahFQsWRunBukH7kTxuMKH9OVcHQABG0By+iRgPtMDhT9emoeJxd+AW1iNAZCOQWRgyGdg8MzaEzfPUU296hy+JG68+UkzMguMMftYh7WfEEWik0pp6+gvYG8m+d//dfwrwADAAUigxLFL+mkAAAAAElFTkSuQmCC" />',CC_ON:'<img id="wnVideoCCON" style="display:inline" width="52" height="25" title="Play With Closed Captions" alt="Play With Closed Captions" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAZCAIAAADxKJpUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAmhJREFUeNrsl7GSAUEQhq260AOQk/MAHoAYOTliJUaMnAcgl1s5DyC3OQ9wX+mqvq7Z2V2n6hBcB1uzu73d//zzd89ssN/vc59q+dwH25dzf7vdjsfj+Xx+MY5isVipVMrlciK43W63XC7B9y6qGo3GaDTyLOvpdJrNZm9Epux4mNtsNnHvWq1WvBvQL5dLFEXeoCxHqVTiih5w86qCUDiEYZgURGH0+30XnMNZvV7HCVj2IRCn06mNTkoWIu62WCwsRGDN53MG3W53vV57ibCfV6vVxGoF1mQycVJifLNarfQ5EiFlkhu47VRlUCgUCM5bR/uPthKCttttGUMSQhwOh0xXozN7TaOs44CbrSd965UB+CTOL1oJ1mq1FFmv15Nk9BcGkg9YXJmADHg+GAxkEaUNyQrK2xQDHIyik6TO5QGnSwAZVogiFFIiautGidno4BuPx1IcmQsnFBLZFmkiOCsUAeGUko0rg8Ph4LiFd3u8g4iK4vjStq9X9jy2h8/dW6/XazY4WmhcfJZ/VCy9Q3mNNwU+xM0qJN1kc8rWXHQ3SQ8UKx1upVpBg+QRvqDnOTVhsdIjBX2z2UyHhQ+wkgSa925w2ktJAwFUqCJTzrbbrR4o2A8EKFfGOs90ZGDqdDoppeNpJXQQcshi1e/mzFUaMswxDTYJy5YT5znCMgqCpqr8WaN18UopIYEXAblZd5sbVdl+lE6YWqDHdCecrBe0aaMnAWzFQ+CAm+6wTMCbWHaUpCDWFNIPOD6Dlbf3FCvuvD1KcPjJ3BD/+iRsjwuB8/eFXF7/A6Eqck5fwf+v4ZP2LcAAHl2NFeObn0UAAAAASUVORK5CYII=" />'};this.fV=h;this.widgetClassType="WNVideoCanvas";this.parentDivId=b;this.parentJSName=this.widgetClassType+this.fV.widgetId;this.groupId=this.fV.idKey;this.showCCButton=false;this.clipPlaySeqTracker={hasPreroll:false,prerollIsOver:false,hasPostroll:false,hasIndependentPostroll:false,postrollIsOver:false,contentClipIsOver:false,whatIsPlaying:"content"};this.clipPlaySeqTracker.reset=function(n,m){this.hasPreroll=n;this.hasPostroll=m;this.prerollIsOver=false;this.postrollIsOver=false;this.hasIndependentPostroll=false;this.contentClipIsOver=false;this.whatIsPlaying="content"};this.clipPlaySeqTracker.prerollPlayable=function(){wnLog("> clip.mobile_hasAdPreRoll = "+this.hasPreroll);return(this.hasPreroll&&!this.prerollIsOver&&(typeof google!="undefined")&&(typeof google.ima!="undefined"))};this.clipPlaySeqTracker.postrollPlayable=function(){wnLog("> clip.mobile_hasAdPostRoll = "+this.hasPostroll);return(this.hasPostroll&&!this.postrollIsOver&&(typeof google!="undefined")&&(typeof google.ima!="undefined"))};if(wn_isMobile){var k=$wn("#"+this.parentDivId);this.fV.widgetsContainer=k.parent();var c=this.fV.playerHeight/this.fV.playerWidth;var f=parseInt(k.position().left);var a=parseInt(this.fV.playerWidth)+f;var d=k.parent().parent().width()-f;if(d<a){this.fV.playerWidth=d;this.fV.originalHeight=parseInt(this.fV.playerHeight);this.fV.originalWidth=a;this.fV.top=k.position().top;this.fV.left=k.position().left;this.fV.originalContainerHeight=k.parent().height();this.fV.playerHeight=Math.round(this.fV.playerWidth*c);var g=this.fV.originalHeight-this.fV.playerHeight;k.parent().height(k.parent().height()-g);containerWidth=k.parent().parent().width();a=k.parent().width();if(containerWidth<a){k.parent().width(containerWidth)}}}evntMgr.Register({evnt:"NewGalleryClip",func:"onNewGalleryClip",idKey:this.groupId,lstnr:this.fV.domId});this.render();$wn("#"+this.fV.domId).data("widget",this)};WNVideoCanvas.prototype.resizeOnScreenFlip=function(){var k=$wn("#"+this.parentDivId);var g=parseInt(k.position().left);var h=parseInt(this.fV.playerWidth)+g;var b=k.parent().parent().width()-g;var f=k.parent().width();var a=getWigdetByType(this.groupId,"g");if(a.hasOwnProperty("widgetsContainer")&&a.widgetsContainer.attr("id")==k.parent().attr("id")){var c=k.position().top+parseInt(this.fV.playerHeight);if(a.top<=c&&a.left>=h){b=(b<a.left)?b:a.left;f=a.left}}if(b>f){b=f}var d=b;$wn(this.canvas).width(d);k.width(d);$wn("#"+this.fV.domId).width(d);k.find(".wn-embed-code").width(d-160);k.find(".share-link").width(d-160)};WNVideoCanvas.prototype.handleCC=function(b,a){if(b){this.videoSources=this.videoSourcesCC;this.liveCCon=true;$wn(".wn-cc-button").html(this.labels.CC_OFF)}else{this.videoSources=this.originalVideoSources;this.liveCCon=false;$wn(".wn-cc-button").html(this.labels.CC_ON)}this.v.find("source").remove();this.v.removeAttr("src");this.v.append(this.videoSources);this.v[0].load();this.v[0].play()};WNVideoCanvas.prototype.render=function(){var p=this;var f="";if(this.fV.isAutoStart=="true"){f='autoplay="true"'}var g;var h=wnUserAgentParser.getOS();if(h.name.toLowerCase()=="android"){g=wn.video.mobile.app.android}else{if(h.name.toLowerCase()=="ios"){g=wn.video.mobile.app.ios}else{g={enablelive:false}}}if(typeof this.fV.transportShareButtons!=="undefined"){var k=this.fV.transportShareButtons.split(",");for(var m=0,d=k.length;m<d;m++){k[m]=wnVideoUtils.trim(k[m]);if(k[m]=="cc"&&!g.enablelive){this.ccButtonEnabled=true}if(k[m]=="share"){this.shareButtonEnabled=true}}}var b='<div id="'+this.fV.domId+'" class="wnVideoCanvas">    <div id="wn_html_video_'+this.groupId+'" class="wn-video-container-div">        <video id="wnVideoHTML" class="wnVideoHtml" controls="controls" '+f+'></video>    </div>    <div class="wn-video-overlay-container"></div>    <div class="wn-controls" style="display:inline">        <div class="wn-cc-button" style="display:inline">'+this.labels.CC_ON+'</div>         <div class="wn-share-button" style="display:inline">'+this.labels.SHARE+'</div>     </div>     <div class="wn-share-pane">       <div class="wn-close_button">'+this.labels.CLOSE_X+'</div>       <div class="wn-embed-fields">          <div class="wn-sh-label">'+this.labels.EMBED_VIDEO+'</div>          <div class="wn-embed-code sh-input"></div>       </div>       <div class="wn-link-fields">          <div class="wn-sh-label">'+this.labels.LINK_VIDEO+'</div>          <input type="text" class="share-link sh-input"/>       </div>    </div></div>';$wn("#"+this.fV.domId+"_swfObject").html(b);style="<style type='text/css'>#"+this.fV.domId+" {width: "+this.fV.playerWidth+"px; height:"+this.fV.playerHeight+"px;}#"+this.fV.domId+" .wnVideoHtml {width: "+this.fV.playerWidth+"px; height:"+(this.fV.playerHeight-20)+"px;}#"+this.fV.domId+" .wn-video-overlay-container {width: "+this.fV.playerWidth+"px; height:"+(this.fV.playerHeight-35-20)+"px; top: 20px;}#"+this.fV.domId+" .wn-share-pane {height: "+this.fV.playerHeight+"px}#"+this.fV.domId+" .wn-share-pane .sh-input {width: "+(this.fV.playerWidth-160)+"px}";embedFieldHeight=(this.fV.playerHeight>170)?(this.fV.playerHeight-150):(this.fV.playerHeight-130);style+="#"+this.fV.domId+" .wn-share-pane .wn-embed-code {height: "+embedFieldHeight+"px}</style>";$wn("#"+this.parentDivId).append(style);this.canvas=$wn("#wnVideoHTML","#wn_html_video_"+this.groupId)[0];var r=$wn("#"+this.fV.domId).find(".wn-cc-button");var o=$wn("#"+this.fV.domId).find(".wn-share-button");this.close_button=$wn("#"+this.fV.domId).find(".wn-close_button");o.add(this.close_button).add(r).mouseover(function(n){$wn(this).css("cursor","pointer")}).mouseout(function(n){$wn(this).css("cursor","default")});r.click(function(){if(p.liveCCon){p.handleCC(false,p.canvas)}else{p.handleCC(true,p.canvas)}});this.close_button.click(function(){if(/iphone/i.test(navigator.userAgent.toLowerCase())){$wn(p.canvas).show()}if(p.clipPlaySeqTracker.whatIsPlaying=="content"){$wn(p.canvas).prop("controls","controls")}$wn(this).parent().fadeOut(300);$wn(this).parent().parent().find(".wn-controls").fadeIn(300);wnVideoWidgets.closeAddThisPane(p.parentDivId)});this.close_button.trigger("click");o.click(function(){$wn(p.canvas).removeAttr("controls");if(/iphone/i.test(navigator.userAgent.toLowerCase())){$wn(p.canvas).hide()}$wn(this).parent().fadeOut(300);$wn(this).parent().parent().find(".wn-share-pane").fadeIn(300);var u=(p.currentClip)?p.currentClip.id*1:0;if(u<1){u=""}var A="";if(p.currentClip!=null){A=wnVideoWidgets.getLinkToVideo(p.currentClip,p.fV)}$wn(".share-link","#"+p.fV.domId).val(A);var t="";u=(p.currentClip)?p.currentClip.id*1:0;if(u<1){u=wnVideoWidgets.GetEmbedCodeClipId()*1}if(isNaN(u)||u<1){t=""}else{t=u.toString()}var w=p.fV.liveStreamUrl;if(!wnVideoUtils.validateString(w)){w=wnVideoWidgets.GetEmbedCodeFlvUri()}if(!wnVideoUtils.validateString(w)){w=""}var v=p.currentClip.thirdpartymrssurl;if(!wnVideoUtils.validateString(v)){v=wnVideoWidgets.GetEmbedCodeThirdPartyMrssUrl()}if(!wnVideoUtils.validateString(v)){v=""}var y=p.currentClip.partnerclipid;if(!wnVideoUtils.validateString(y)){y=wnVideoWidgets.GetEmbedCodePartnerClipId()}if(!wnVideoUtils.validateString(y)){y=""}var x=p.currentClip.adTag;if(!wnVideoUtils.validateString(x)){x=wnVideoWidgets.GetEmbedAdTag()}if(!wnVideoUtils.validateString(x)){x=""}x=wnVideoWidgets.WNDecodeURIComponent(x,2);var n=p.currentClip.landingPage;if(!wnVideoUtils.validateString(n)){n=wnVideoWidgets.GetEmbedCodeLandingPage()}if(!wnVideoUtils.validateString(n)){n=""}var z=p.currentClip.islandingPageoverride;if(!wnVideoUtils.validateString(z)){z=wnVideoWidgets.GetEmbedCodeIsLandingPageOverride()}if(!wnVideoUtils.validateString(z)){z=""}if(t!=""){w="";v=""}if(v!=""){t="";w=""}if(w!=""){t="";v=""}if(v==""&&(p.fV.partnerclipid==undefined||p.fV.partnerclipid=="")){y=""}var s=p.fV.staticImgPath+"/interface/js/WNVideo.js?rnd="+Math.floor(Math.random()*1000000000)+";hostDomain="+p.fV.hostDomain+";playerWidth="+p.fV.playerWidth+";playerHeight="+p.fV.playerHeight+";isShowIcon=true;clipId="+t+";flvUri="+w;if(wnVideoUtils.validateString(p.fV.wnms1)){s+=";wnms1="+p.fV.wnms1}if(wnVideoUtils.validateString(p.fV.wnms2)){s+=";wnms2="+p.fV.wnms2}if(wnVideoUtils.validateString(p.fV.wnms3)){s+=";wnms3="+p.fV.wnms3}s+=";partnerclipid="+y+";adTag="+wnVideoWidgets.WNEncodeURIComponent(x)+";advertisingZone="+wnVideoWidgets.WNEncodeURIComponent(p.fV.advertisingZone,2)+";enableAds="+p.currentClip.hasAdPreRoll+";landingPage="+wnVideoWidgets.WNEncodeURIComponent(n,2)+";islandingPageoverride="+z+";playerType="+p.fV.playerType+"_EMBEDDEDscript;controlsType="+p.fV.controlsType;if(wnVideoUtils.validateString(p.fV.gallerySourceType)){s+=";galleryType="+p.fV.gallerySourceType}if(p.fV.galleryId>0){s+=";galleryId="+p.fV.galleryId}if(p.fV.videoType=="livestream"){s+=";isLiveStream=true";s+=";streamType="+p.fV.StreamType}if(t==""&&p.currentClip!=null){s+=";headline="+wnVideoWidgets.WNEncodeURIComponent(p.currentClip.mainHeadline,2)}var B="&lt;script type='text/javascript' src='"+s+"'&gt;&lt;/script&gt;";B+='&lt;a href="http://'+p.fV.hostDomain+'" title="'+p.fV.pageTitleTag+'"&gt;'+p.fV.pageTitleTag+"&lt;/a&gt;";$wn(".wn-embed-code","#"+p.fV.domId).html(B);wnVideoWidgets.openAddThisPane(A,p.currentClip.headline,p.parentDivId,p.currentClip.summary,true)});this.canvasPlayBackCtrl=new WNVideoCanvasPlayBackControl(p.fV.domId,p.fV,{overlay_elem_class:"wn-video-overlay-container"});this.canvasPlayBackCtrl.hide();$wn(this.canvas).bind("loadedmetadata",function(){p.clipPlaySeqTracker.onStartFired=false});$wn(this.canvas).bind("playing",function(){var n=p.checkMobileApp(p.currentClip.videoType);if(n){p.canvas.pause();return false}if(!p.clipPlaySeqTracker.onStartFired){p.clipPlaySeqTracker.onStartFired=true;p.close_button.trigger("click");switch(p.clipPlaySeqTracker.whatIsPlaying){case"preroll":wnLog("> preroll started");$wn(".wn-cc-button").hide();break;case"content":if(p.isFirstPlay&&p.clipPlaySeqTracker.prerollPlayable()){wnLog("Starting preroll logic");wnLog("Content paused");p.canvas.pause();p.adLogic("preroll")}else{wnLog("> content started: showCCButton="+p.showCCButton);if(p.showCCButton==true){$wn(".wn-cc-button").show()}evntMgr.Notify({evnt:"NewMedia",idKey:p.groupId,objClip:p.currentClip});p.fireReportingBeacon({eventype:"duration",position:"0"})}break;case"postroll":wnLog("> postroll started");$wn(".wn-cc-button").hide();p.clipPlaySeqTracker.postrollIsOver=true;break}}});$wn(this.canvas).bind("ended",function(){switch(p.clipPlaySeqTracker.whatIsPlaying){case"preroll":wnLog("> preroll ended");p.clipPlaySeqTracker.prerollIsOver=true;p.clipPlaySeqTracker.whatIsPlaying="content";break;case"content":wnLog("> content ended");if(p.fV.videoType!="livestream"){p.canvas.currentTime=0}p.canvas.pause();if(p.clipPlaySeqTracker.postrollPlayable()){if(p.clipPlaySeqTracker.hasIndependentPostroll){if(p.adManager!=undefined){p.adManager.destroy()}if(p.adDisplayContainer!=undefined){p.adDisplayContainer.destroy()}p.adLogic("postroll")}else{p.adsLoader.contentComplete()}}else{p.completeSequence()}break;case"postroll":wnLog("> postroll ended");break}});var a="emptied loadstart progress suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange play pause ratechange volumechange";$wn(this.canvas).bind(a,function(){p.currentClip.hostPlayer="html";p.currentClip.currentTime=this.currentTime;p.currentClip.duration=this.duration;var n=true;if(event!=null&&(event.type=="play"||event.type=="pause")&&p.clipPlaySeqTracker.whatIsPlaying=="content"&&p.clipPlaySeqTracker.prerollPlayable()){n=false}if(event!=null&&event.type=="ended"){event.type="clipended"}if(event!=null){wnVideoWidgets.handleEvent({event:event,system:"video",clip:p.currentClip,valid:n})}});$wn(this.canvas).bind("error",function(){wnLog("playback error");$wn(p.canvas).trigger("ended")});$wn(this.canvas).bind("abort",function(){wnLog("playback aborted")});if(this.fV.videoType=="livestream"){var q=new Array;if(this.fV.liveStreams){q=q.concat(this.fV.liveStreams)}if(this.fV.liveStreamUrl){q.push({url:this.fV.liveStreamUrl,type:"video/mp4"})}var c={videoType:"livestream",isLiveStream:true,id:"0",uri:q,headline:this.fV.liveStreamHeadline,mainHeadline:this.fV.liveStreamHeadline,graphic:this.fV.liveStreamSummaryImgUrl,adTag:this.fV.liveStreamAdTag,ownerAffiliateNumber:this.fV.affiliateNumber,ownerAffiliateName:this.fV.affiliate,ownerAffiliateBaseUrl:"",isMilliseconds:"true",vt:"V",hasCC:"0",summary:"",isAd:"False",serveAdsFromContentOwner:"False",displaysize:"20",hasAdPreRoll:this.fV.liveStreamHasPreroll=="true"?"true":"false",preRollSplitPct:"100",preRollOwner:"loc",hasAdPostRoll:this.fV.liveStreamHasPostroll=="true"?"true":"false",postRollSplitPct:"100",postRollOwner:"loc",mobile_hasAdPreRoll:this.fV.liveStreamHasPreroll=="true"?"true":"false",mobile_preRollSplitPct:"100",mobile_preRollOwner:"loc",mobile_hasAdPostRoll:this.fV.liveStreamHasPostroll=="true"?"true":"false",mobile_postRollSplitPct:"100",mobile_postRollOwner:"loc"};this.checkAutostartAndPlay(c)}else{if(this.fV.clipId>0){this.playClipById(this.fV.clipId)}}};WNVideoCanvas.prototype.playClipById=function(b){var a=new Date().getTime();var c=wnFeedsApiDomain+"/feed/v3.0/clips/"+b+"?alt=json&callbackparams="+this.fV.domId+"&callback=wnVideoWidgets.clipObjCallback";if(b){wnVideoUtils.loadScript("wnClipScript"+a,c)}else{wnLog("No ClipId supplied")}};WNVideoCanvas.prototype.checkAutostartAndPlay=function(a){if(this.fV.isAutoStart.toLowerCase()=="true"){a.autoplay=true;this.fV.isAutoStart="false"}this.playClipFromJson(a)};WNVideoCanvas.prototype.playClipFromJson=function(a){if(a.videoType=="livestream"&&this.ccButtonEnabled){this.showCCButton=true;$(".wn-cc-button").show()}else{this.showCCButton=false;$(".wn-cc-button").hide()}wnLog("playClipFromJson();");var f={};for(i in a){f[i]=a[i]}f.headline=unescape(a.headline);f.HasThumb=(a.thumb&&a.thumb.length>0)?true:false;f.isFlash=false;f.isAd=false;f.isAdIntro=false;f.isAdExit=false;f.isAdFrame=false;f.isASX=false;f.affiliateName=wnSiteConfigGeneral.affiliateName;if(wn_isMobile&&wn_isPlatformSiteMobile){f.hasAdPreRoll=(wnVideoUtils.validateString(a.mobile_hasAdPreRoll)&&a.mobile_hasAdPreRoll.toLowerCase()=="true")?true:false;f.hasAdPostRoll=(wnVideoUtils.validateString(a.mobile_hasAdPostRoll)&&a.mobile_hasAdPostRoll.toLowerCase()=="true")?true:false}else{f.hasAdPreRoll=(wnVideoUtils.validateString(a.hasAdPreRoll)&&a.hasAdPreRoll.toLowerCase()=="true")?true:false;f.hasAdPostRoll=(wnVideoUtils.validateString(a.hasAdPostRoll)&&a.hasAdPostRoll.toLowerCase()=="true")?true:false}f.preRollSplitPct=parseInt(a.preRollSplitPct);f.preRollOwner=a.preRollOwner;f.postRollSplitPct=parseInt(a.postRollSplitPct);f.postRollOwner=a.postRollOwner;f.mobile_preRollSplitPct=parseInt(a.mobile_preRollSplitPct);f.mobile_preRollOwner=a.mobile_preRollOwner;f.mobile_postRollSplitPct=parseInt(a.mobile_postRollSplitPct);f.mobile_postRollOwner=a.mobile_postRollOwner;this.clipPlaySeqTracker.reset(f.hasAdPreRoll,f.hasAdPostRoll);this.currentClip=f;evntMgr.Notify({evnt:"NewClip",idKey:this.groupId,objClip:f});if(this.canvasPlayBackCtrl){this.canvasPlayBackCtrl.hide()}this.v=$wn(this.canvas);if(this.currentClip.graphic){this.v.attr("poster",this.currentClip.graphic)}else{this.v.attr("poster","")}this.v.find("source").remove();this.v.removeAttr("src");this.videoSources="";this.videoSourcesCC="";var c=/(^.*\/)([^_@]*)(.*\/)/g;for(j in a.uri){if(a.uri[j].type&&a.uri[j].url&&(a.uri[j].type=="video/mp4"||a.uri[j].type=="video/3gpp")){this.videoSources+='<source src="'+decodeURIComponent(a.uri[j].url)+'" media="all"></source>';this.videoSourcesCC+='<source  src="'+decodeURIComponent(a.uri[j].url).replace(c,"$1$2CC$3")+'" media="all"></source>';var b=document.createElement("source");b.setAttribute("src",decodeURIComponent(a.uri[j].url));b.setAttribute("media","all");this.v[0].appendChild(b)}}this.originalVideoSources=this.videoSources;this.videoSourcesCC=this.videoSourcesCC;if(this.currentClip.autostart){this.v[0].load();if(this.clipPlaySeqTracker.prerollPlayable()){this.adLogic("preroll")}else{this.v[0].play()}}else{this.isFirstPlay=true}try{this.v.prop("controls","controls")}catch(d){this.v.attr("controls","controls")}};WNVideoCanvas.prototype.checkMobileApp=function(f){var b;var d=wnUserAgentParser.getOS();var a=false;if(d.name.toLowerCase()=="android"){b=wn.video.mobile.app.android;b.os="android"}else{if(d.name.toLowerCase()=="ios"){b=wn.video.mobile.app.ios;b.os="ios"}else{wnLog("not a supported mobile os");return false}}if(f=="livestream"){b.video_type="live";if(b.enablelive){a=true}}else{b.video_type="vod";if(b.enablevod){a=true}}if(a&&wnvideo_getCookie("WN_MOBILE_APP_REJECTED")==null){var c=this;if(b.os=="ios"){window.location=c.getAppLaunchLink(b);setTimeout(function(){if(!document.webkitHidden){var g=c.getAppLaunchLink(b);g=g.replace("wnvideo://","http://");window.location=g}},25)}else{setTimeout(function(){window.location=c.getAppLaunchLink(b)},0)}return true}return false};WNVideoCanvas.prototype.getAppLaunchLink=function(c){var d=this.currentClip;var f=wnVideoWidgets.getLinkToVideo(this.currentClip,this.fV);var p=d.uri[0].url;for(j in d.uri){if(d.uri[j].type&&d.uri[j].url&&d.uri[j].type=="application/x-mpegURL"){p=d.uri[j].url}}if(c.video_type=="live"){p=encodeURIComponent(p)}if(c.os=="ios"){var b=p.split("?");p=b[0]}var n={apptype:"video",wncc:d.adTag,wnccx:this.fV.advertisingZone,width:"10",height:"10",wnsz:"30"};var o={url:""};try{o=wnVideoWidgets.UAFHelper(n,this.currentClip,"raw")}catch(h){wnLog("Error in UAFHelper. Can't get ad url.")}var m=wnAddThisPubId;var a="&cs_c2="+6036361+"&cs_ns_st_ci="+d.id+"&cs_ns_st_ge="+encodeURIComponent(d.adTag)+"&cs_ns_st_ci="+d.id+"&cs_ns_jspageurl="+encodeURIComponent(document.location)+"&cs_ns_st_st="+d.affiliateName+"&ga_trackingId="+encodeURIComponent(wn_gaAccountId);var k="stream="+encodeURIComponent(p)+"&video_type="+c.video_type+"&clip_title="+encodeURIComponent(d.headline)+"&clip_date="+encodeURIComponent(d.lastediteddate)+"&addThis_pubid="+encodeURIComponent(m)+a+"&share_url="+encodeURIComponent(f)+"&ad_enable_preroll="+d.mobile_hasAdPreRoll+"&ad_url="+encodeURIComponent(o.url);var g=c.launchlinkprefix+k;return g};WNVideoCanvas.prototype.onNewGalleryClip=function(a){var b=a.objClip;wnLog("onNewGalleryClip()");if(this.adManager!=undefined){wnLog("cleanup...");this.adManager.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested);this.adManager.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested);this.adManager.removeEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdSkipped);this.adManager.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError);this.adManager.destroy()}if(b.isUserInitiated){if(/iphone/i.test(navigator.userAgent.toLowerCase())&&this.currentClip.videoType=="livestream"){this.render();$wn("#"+this.fV.domId).data("widget",this)}b.autostart=true;this.isFirstPlay=false;this.playClipFromJson(b)}else{if((!wnVideoUtils.validateString(this.fV.clipId)||parseInt(this.fV.clipId)<1)&&this.fV.videoType!="livestream"){this.checkAutostartAndPlay(b)}}};WNVideoCanvas.prototype.completeSequence=function(){this.clipPlaySeqTracker.reset(this.currentClip.hasAdPreRoll,this.currentClip.hasAdPostRoll);evntMgr.Notify({evnt:"ClipEnded",idKey:this.groupId,objClip:this.currentClip})};WNVideoCanvas.prototype.adLogic=function(c){wnLog("> adLogic('"+c+"') called");this.clipPlaySeqTracker.whatIsPlaying=c;var b=new Object();b.wncc=this.currentClip.adTag;b.wnccx=this.fV.advertisingZone;if(this.fV.playerAdvertisingType!="none"){b.apptype=this.fV.playerAdvertisingType}else{switch(this.fV.playerType.toLowerCase()){case"popup":b.apptype="videopopup";break;case"standard":b.apptype="videostandard";break;case"embedded":b.apptype="videoembedded";break;case"landingpage":b.apptype="videolandingpage";break;default:b.apptype="video"}}this.currentClip.apptype=b.apptype;this.currentClip.idKey=this.idKey;switch(c){case"preroll":b.width=b.height="10";b.wnsz="30";if(this.fV.usePrerollMaster.toLowerCase()=="true"){b.sequence=1}else{var a=false;a=wnVideoWidgets.masterAdExists(this.currentClip);if(a!=true){b.sequence=1}}break;case"postroll":b.width=b.height="11";b.wnsz="31";break;case"overlay":this.clipPlaySeqTracker.whatIsPlaying="content";break;default:wnLog("Unexpected adPosition = "+c);this.playContentClip()}var f=wnVideoWidgets.UAFHelper(b,this.currentClip,"raw");if(f!=null){var g=f.url;b.owner=f.owner;if(wn_debug_widgets=="true"&&wnVideoUtils.validateString(this.fV.debugAdUrl)){g=this.fV.debugAdUrl}var h=this.canvas;$wn(".wn-video-overlay-container","#"+this.fV.domId+"_swfObject").html("");this.adDisplayContainer=new google.ima.AdDisplayContainer($wn(".wn-video-overlay-container","#"+this.fV.domId+"_swfObject")[0],h);this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer);this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded,false);this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,false);this.adsLoader.wnVideoCanvas=this;this.adsLoader.wnAdProps=b;var d=new google.ima.AdsRequest();d.adTagUrl=g;d.linearAdSlotWidth=this.fV.playerWidth*1;d.linearAdSlotHeight=this.fV.playerHeight-20;d.nonLinearAdSlotWidth=this.fV.playerWidth*1;d.nonLinearAdSlotHeight=this.fV.playerHeight-20;this.adsLoader.requestAds(d,this);wnLog("g: Ad request sent")}else{this.onAdError("Error: UAFHelper returned null")}};WNVideoCanvas.prototype.onAdsManagerLoaded=function(d){wnLog("g: Ad response received");var f=this.wnVideoCanvas.canvas;var b=new google.ima.AdsRenderingSettings();b.restoreCustomPlaybackStateOnAdBreakComplete=true;adManager=this.wnVideoCanvas.adManager=d.getAdsManager(f,b);wnLog("g: isCustomPlaybackUsed = "+adManager.isCustomPlaybackUsed());adManager.wnVideoCanvas=this.wnVideoCanvas;adManager.wnAdProps=this.wnAdProps;adManager.isWNAd=false;wnLog("g: adding event listeners");adManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.wnVideoCanvas.onAdError);adManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.wnVideoCanvas.onAdSkipped);adManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.wnVideoCanvas.onAllAdsCompleted);adManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.wnVideoCanvas.onContentPauseRequested);adManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.wnVideoCanvas.onContentResumeRequested);try{var c=parseInt(this.wnVideoCanvas.fV.playerWidth);var a=parseInt(this.wnVideoCanvas.fV.playerHeight)-20;adManager.init(c,a,google.ima.ViewMode.NORMAL);adManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.wnVideoCanvas.showCompanionAds);wnLog("g: calling adManager.start() to start ad playback");adManager.start()}catch(g){wnLog("Error: "+g)}};WNVideoCanvas.prototype.onAdError=function(a){wnLog("g: onAdError");if(this.wnVideoCanvas.clipPlaySeqTracker.whatIsPlaying=="preroll"){var b=a.getError();if(b.getErrorCode()==3102||b.getErrorCode()==3104){}else{this.wnVideoCanvas.clipPlaySeqTracker.onStartFired=false;this.wnVideoCanvas.clipPlaySeqTracker.prerollIsOver=true;this.wnVideoCanvas.clipPlaySeqTracker.whatIsPlaying="content";this.wnVideoCanvas.canvas.play();this.wnVideoCanvas.setUAFCompanions(this.wnAdProps)}}else{if(this.wnVideoCanvas.clipPlaySeqTracker.whatIsPlaying=="postroll"){var b=a.getError();if(b.getErrorCode()==3102||b.getErrorCode()==3104){}else{this.wnVideoCanvas.completeSequence()}}}if(typeof(a.getError)=="function"){var b=a.getError();if(b){wnLog(b.getMessage()+" See error object below:");wnLog(b)}}else{wnLog(a)}};WNVideoCanvas.prototype.onAdSkipped=function(a){wnLog("g: adSkipped");if(this.wnVideoCanvas.clipPlaySeqTracker.whatIsPlaying=="preroll"){this.wnVideoCanvas.clipPlaySeqTracker.onStartFired=false;this.wnVideoCanvas.clipPlaySeqTracker.prerollIsOver=true;this.wnVideoCanvas.clipPlaySeqTracker.whatIsPlaying="content"}};WNVideoCanvas.prototype.showCompanionAds=function(d){wnLog("g: on AdEvent.Type.STARTED - showCompanionAds");var c=d.getAd();var g=new Array;if(wng_pageInfo){for(var a in wng_pageInfo.ads){ad_container=wng_pageInfo.ads[a];var b=c.getCompanionAds(ad_container.width,ad_container.height,{creativeType:google.ima.CompanionAdSelectionSettings.CreativeType.ALL,resourceType:google.ima.CompanionAdSelectionSettings.ResourceType.ALL,sizeCriteria:google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE});if(b.length>0){g.push(b[0])}}}if(adManager.isWNAd&&g.length<1){this.wnVideoCanvas.setUAFCompanions(this.wnAdProps)}else{try{for(i=0;i<g.length;i++){g[i].htmlResource=g[i].getContent();g[i].width=g[i].getWidth();g[i].height=g[i].getHeight();evntMgr.Notify({evnt:"UAFLoadVastCompanions",idKey:this.wnVideoCanvas.groupId,objClip:{},adProps:{},vastAd:g[i]})}}catch(f){wnLog("Error: Setting Vast Companion Ads")}wnVideoWidgets.SetVASTCompanions({companions:g,adProps:this.wnAdProps})}};WNVideoCanvas.prototype.onContentPauseRequested=function(a){wnLog("g: CONTENT_PAUSE_REQUESTED");this.wnVideoCanvas.canvas.pause();if(this.wnVideoCanvas.canvasPlayBackCtrl){this.wnVideoCanvas.canvasPlayBackCtrl.show(adManager);var b=wnUserAgentParser.getOS();if(b.name.toLowerCase()=="ios"&&parseFloat(b.version)<8){$wn(this.wnVideoCanvas.canvasPlayBackCtrl.elementPlayPause).removeClass("wn-canvas-player-playing").addClass("wn-canvas-player-paused");$wn(this.wnVideoCanvas.canvasPlayBackCtrl.elementProgressSpinner).html("&nbsp; &nbsp; &nbsp; Click PLAY to continue. After the commercial finishes, your video will begin.");$wn(this.wnVideoCanvas.canvasPlayBackCtrl.elementProgressSpinner).css("overflow","hidden").css("height","16px").css("position","relative").css("top","-15px")}}evntMgr.Notify({evnt:"NewMedia",idKey:this.wnVideoCanvas.groupId,objClip:{headline:this.adTitle}})};WNVideoCanvas.prototype.onContentResumeRequested=function(a){wnLog("g: CONTENT_RESUME_REQUESTED")};WNVideoCanvas.prototype.onAllAdsCompleted=function(b){wnLog("g: ALL_ADS_COMPLETED");if(this.wnVideoCanvas.canvasPlayBackCtrl){this.wnVideoCanvas.canvasPlayBackCtrl.hide()}if(this.wnVideoCanvas.clipPlaySeqTracker.whatIsPlaying=="postroll"){this.wnVideoCanvas.ended=false;this.wnVideoCanvas.completeSequence()}else{var a=b.getAd();try{var c=a.getAdPodInfo().getTotalAds();if(c>1){this.wnVideoCanvas.clipPlaySeqTracker.hasIndependentPostroll=false}}catch(d){wnLog("g: adPodInfo is unavailable");this.wnVideoCanvas.clipPlaySeqTracker.hasIndependentPostroll=true}this.wnVideoCanvas.canvas.play()}if(this.wnVideoCanvas.showCCButton==true){$wn(".wn-cc-button").show()}};WNVideoCanvas.prototype.setUAFCompanions=function(a){wnVideoReloadCompanionAds(a,this.currentClip);evntMgr.Notify({evnt:"UAFLoadCompanions",idKey:this.groupId,objClip:this.currentClip,adProps:a})};WNVideoCanvas.prototype.fireReportingBeacon=function(d){var a=false;if(this.currentClip.isPreRoll||this.currentClip.isPostRoll){a=true}try{var b=Namespace_VideoReporting_Worldnow.logVideoEventParameters(d.eventype,this.currentClip.headline,d.position,this.currentClip.id,this.currentClip.adTag,"FlashPlayer.wnfl",this.currentClip.affiliateName,this.currentClip.ownerAffiliateName,a,"","","","",this.currentClip.url,"",0,"","","","STANDARD - HTML",wnSiteConfigVideo.enableExpressReports,"","","",this.currentClip.taxonomy1,this.currentClip.taxonomy2,this.currentClip.taxonomy3);this.currentClip.hasBeaconFired=true}catch(c){wnLog("Analytics beacon fire for clip id = "+this.currentClip.id+" failed: "+c)}};WNImageCanvas=function(m,k){this.fV=k;this.widgetClassType="WNImageCanvas";this.parentDivId=m;this.parentJSName=this.widgetClassType+this.fV.widgetId;this.groupId=this.fV.idKey;this.current_image=false;this.delay=parseInt(wnSiteConfigVideo.imageCanvasWidget.slideTime);if(isNaN(this.delay)||this.delay<1){this.delay=3}$wn("#"+this.parentDivId+"_addThis > div").remove();if(wn_isMobile){var b=parseInt($wn("#"+this.parentDivId).position().left);var f=parseInt(this.fV.playerWidth)+b;var g=$wn("#"+this.parentDivId).parent().parent().width()-b;if(g<f){this.fV.playerWidth=g;$wn("#"+this.parentDivId+"_adDiv").width(g);var o=f-g;$wn("#"+this.parentDivId+"_adDiv_ad").css("left",Math.floor($wn("#"+this.parentDivId+"_adDiv_ad").position().left-o/2));$wn("#"+this.parentDivId+"_adDiv_close").css("left",Math.floor($wn("#"+this.parentDivId+"_adDiv_close").position().left-o/2))}}this.render();if((this.fV.isInCanvasAdModeEnabled=="true"||this.fV.isInCanvasAdModeEnabled==true)&&this.fV.playerWidth>=300&&this.fV.playerHeight>=250){var p=this.parentDivId+"_adDiv";var d="WNImageCanvas"+this.groupId;p=p.replace("WNImageCanvas"+this.groupId,"");var h=new WNAdWidget("53","HandleWorldnowAd",this.groupId);h.SetWidth(300);h.SetHeight(250);h.SetSeqNum(1);h.SetTarget(document.getElementById(p+"_ad"));h.setApplication("slideshow");h.setIsInCanvas(true);var a=h.ad.get("owner");if(!h.ad.manager.eventsHistory.hasOwnProperty(a)||h.ad.manager.eventsHistory.hasOwnProperty(a)&&h.ad.manager.eventsHistory[a].indexOf("pagestart")<0){h.ad.manager.start()}}$wn("#"+this.fV.domId).data("widget",this);evntMgr.Register({evnt:"NewClip",func:"onNewImage",idKey:this.groupId,lstnr:this.fV.domId});evntMgr.Register({evnt:"primaryImageGalleryLoad",func:"onPrimaryImageGalleryLoad",idKey:this.groupId,lstnr:this.fV.domId});evntMgr.Register({evnt:"NewInCanvasAd",func:"onNewInCanvasAd",idKey:this.groupId,lstnr:this.fV.domId});evntMgr.Register({evnt:"InCanvasAdOver",func:"onInCanvasAdOver",idKey:this.groupId,lstnr:this.fV.domId});evntMgr.Register({evnt:"LastImageReached",func:"onLastImageReached",idKey:this.groupId,lstnr:this.fV.domId});var c=getWigdetByType(this.groupId,"h");if(c.widgetClassType!=undefined){c.htmlVersion=new WNHeadline(c.parentObject.targetDiv,c)}var n=getWigdetByType(this.groupId,"i");if(n.widgetClassType!=undefined){n.htmlVersion=new WNInfoPane(n.parentObject.targetDiv,n)}onWidgetLoad(this.fV.domId,this.fV.idKey,"imageCanvasIsReady","",{});evntMgr.Notify({evnt:"imageCanvasLoad",idKey:this.fV.idKey,objClip:{}})};WNImageCanvas.prototype.render=function(){var g=this;var b="";b+="<div id="+this.fV.domId+" class='wn-ad-gallery wnSlideshowCanvas'>";b+="   <div class='wn-ad-image-wrapper'>";b+="      <div class='wn-ad-next'>";b+="         <div class='wn-ad-next-image'/>";b+="      </div>";b+="      <div class='wn-ad-prev'>";b+="         <div class='wn-ad-prev-image'/>";b+="      </div>";b+="   </div>";b+="   <div class='wn-controls ";if(wn_isMobile){b+="wn-mobile"}b+="'>";b+="      <div class='wn-start-pause'>start</div>";b+="      <div class='wn-share-button'>share</div>";b+="      <div class='wn-number'>&nbsp; &nbsp; &nbsp;</div>";b+="   </div>";b+="   <div class='wn-share-pane'>";b+="      <div class='wn-close_button'>Close X</div>";b+="      <div class='wn-embed-fields'>";b+="         <div class='wn-sh-label'>Embed Slideshow Code:</div>";b+="         <div class='wn-embed-code sh-input'></div>";b+="      </div>";b+="      <div class='wn-link-fields'>";b+="         <div class='wn-sh-label'>Link to Slideshow:</div>";b+="         <input type='text' class='share-link sh-input'/>";b+="      </div>";b+="   </div>";b+="</div>";b+="<style type='text/css'>";b+="#"+this.fV.domId+" {width: "+this.fV.playerWidth+"px; height: "+this.fV.playerHeight+"px}";b+="#"+this.fV.domId+" .wn-ad-image-wrapper {height: "+this.fV.playerHeight+"px}";b+="#"+this.fV.domId+" .wn-ad-image-wrapper .wn-ad-image {height: "+this.fV.playerHeight+"px; width: "+this.fV.playerWidth+"px;}";b+="#"+this.fV.domId+" .wn-share-pane {height: "+this.fV.playerHeight+"px}";b+="#"+this.fV.domId+" .wn-share-pane .sh-input {width: "+(this.fV.playerWidth-160)+"px}";b+="#"+this.fV.domId+" .wn-share-pane .wn-embed-code {height: "+(this.fV.playerHeight-150)+"px}";b+="#"+this.fV.domId+" .wn-ad-image-wrapper .wn-ad-prev {top: "+(this.fV.playerHeight/2-26)+"px;}";b+="#"+this.fV.domId+" .wn-ad-image-wrapper .wn-ad-next {top: "+(this.fV.playerHeight/2-26)+"px;}";b+="</style>";$wn("#"+this.parentDivId).empty();$wn("#"+this.parentDivId).append(b);var c=$wn("#"+this.parentDivId).attr("class");if(typeof c!="undefined"){$wn("#"+this.parentDivId).attr("class",c+" WNWidgetsContainer")}else{$wn("#"+this.parentDivId).attr("class","WNWidgetsContainer")}this.prev_link=$wn("#"+this.fV.domId).find(".wn-ad-prev");this.next_link=$wn("#"+this.fV.domId).find(".wn-ad-next");this.prev_link.add(this.next_link).mouseover(function(h){$wn(this).css("height",52);$wn(this).find("div").css("opacity",1)}).mouseout(function(h){$wn(this).find("div").css("opacity",0.2)}).click(function(){g.pauseSlideshow();if($wn(this).is(".wn-ad-next")){if(!wnSlideshowImage.hideInCanvasAd({groupId:g.groupId})){g.nextImage();evntMgr.Notify({evnt:"next",idKey:g.fV.idKey,objClip:g.currentImgObj,system:"slideshow"})}}else{if(!wnSlideshowImage.hideInCanvasAd({groupId:g.groupId})){g.prevImage();evntMgr.Notify({evnt:"previous",idKey:g.fV.idKey,objClip:g.currentImgObj,system:"slideshow"})}}}).find("div").css("opacity",0.2);var f=$wn("#"+this.fV.domId).find(".wn-start-pause");var d=$wn("#"+this.fV.domId).find(".wn-share-button");var a=$wn("#"+this.fV.domId).find(".wn-close_button");f.add(d).add(a).mouseover(function(h){$wn(this).css("cursor","pointer")}).mouseout(function(h){$wn(this).css("cursor","default")});a.click(function(){$wn(this).parent().fadeOut(300);$wn(this).parent().parent().find(".wn-controls").fadeIn(300);$wn(this).parent().parent().find(".wn-ad-image-description").fadeIn(300);wnVideoWidgets.closeAddThisPane(g.parentDivId)});d.click(function(){$wn(this).parent().fadeOut(300);$wn(this).parent().parent().find(".wn-share-pane").fadeIn(300);$wn(this).parent().parent().find(".wn-ad-image-description").fadeOut(300);wnVideoWidgets.openAddThisPane(g.share_link[0].value,"Slideshow",g.parentDivId,"",true)});f.click(function(){if($wn(this).html()=="start"){if((g.currentImgObj.index+1)==g.currentImgObj.total_number){evntMgr.Notify({evnt:"NextImageRequest",idKey:g.fV.idKey,objClip:{index:-1,widgetId:g.currentImgObj.widgetId}})}g.startSlideshow();evntMgr.Notify({evnt:"start",idKey:g.fV.idKey,objClip:g.currentImgObj,system:"slideshow"})}else{g.pauseSlideshow();evntMgr.Notify({evnt:"stop",idKey:g.fV.idKey,objClip:g.currentImgObj,system:"slideshow"})}});if(typeof($wn("#"+this.parentDivId+"_adDiv")[0])!="undefined"){ad_top=$wn("#"+this.parentDivId+"_adDiv").css("top").replace("px","")*1;ad_left=$wn("#"+this.parentDivId+"_adDiv").css("left").replace("px","")*1;ad_width=$wn("#"+this.parentDivId+"_adDiv").css("width").replace("px","")*1;ad_height=$wn("#"+this.parentDivId+"_adDiv").css("height").replace("px","")*1;b="<div id='"+this.parentDivId+"_adDiv_close_x' style='left: 260px; width: 30px;'>X</div>";$wn("#"+this.parentDivId+"_adDiv_close").append(b);$wn("#"+this.parentDivId+"_adDiv").css("top",0);$wn("#"+this.parentDivId+"_adDiv").css("left",(ad_left-1)+"px");$wn("#"+this.parentDivId+"_adDiv").css("width",(ad_width+2)+"px");$wn("#"+this.parentDivId+"_adDiv").css("height",(ad_height+2)+"px");$wn("#"+this.fV.domId+" > div.wn-ad-image-wrapper").append($wn("#"+this.parentDivId+"_adDiv"))}};WNImageCanvas.prototype.onNewInCanvasAd=function(a){if(this.timer){this.pauseSlideshow();this.resumeAfterAd=true}};WNImageCanvas.prototype.onInCanvasAdOver=function(a){if(this.resumeAfterAd){this.startSlideshow()}};WNImageCanvas.prototype.onLastImageReached=function(a){this.pauseSlideshow()};WNImageCanvas.prototype.startSlideshow=function(){var b=$wn("#"+this.fV.domId).find(".wn-start-pause");b.html("pause");var a="pageWidgets['"+this.groupId+"']."+this.widgetClassType+this.groupId+this.parentDivId;this.timer=setInterval(a+".htmlVersion.nextImage()",this.delay*1000)};WNImageCanvas.prototype.pauseSlideshow=function(){var a=$wn("#"+this.fV.domId).find(".wn-start-pause");a.html("start");clearInterval(this.timer);this.timer=false;this.resumeAfterAd=false};WNImageCanvas.prototype.onNewImage=function(b){var t=this;var u=$wn("#"+this.fV.domId);var n=u.find(".wn-ad-image-wrapper");this.currentImgObj=b.objClip;var p=$wn(document.createElement("div")).addClass("wn-ad-image");var A=$wn(new Image()).attr("src",this.currentImgObj.url);if(this.currentImgObj!=undefined&&this.currentImgObj.href!=""){var k=$wn("<a href='"+this.currentImgObj.href+"' target='blank'></a>");k.append(A);p.append(k)}else{p.append(A)}n.prepend(p);if(typeof A!=="undefined"&&!wnVideoWidgets.isImageLoaded(A[0])){A.load(function(){t.resizeAndCenter(p)})}else{this.resizeAndCenter(p)}if(this.fV.enableSummaryPane.toLowerCase()=="true"){var o=this.fV.hasSummary.toLowerCase()=="true"&&this.currentImgObj.summary!="";var a=this.fV.hasDateStamp.toLowerCase()=="true"&&this.currentImgObj.publishingDate!="";var y=this.fV.hasPhotoCredit.toLowerCase()=="true"&&this.currentImgObj.credits!="";var z='<p class="wn-ad-image-description">';if(o){z+=this.currentImgObj.summary}z+="<span>";if(o&&(a||y)){z+=" | "}if(a){z+=this.currentImgObj.publishingDate+" &nbsp;"}if(y){z+="  &nbsp;"+this.currentImgObj.credits}z+="</span></p>";var w=$wn(z);p.append(w);if(p.parent().attr("rel")=="true"){w.show()}else{w.hide()}p.parent().unbind("mouseenter mouseleave");p.parent().hover(function(){w.stop(true,true).fadeIn();p.parent().attr("rel","true")},function(){w.stop(true,true).fadeOut();p.parent().attr("rel","false")})}var q=u.find(".wn-controls");var d=q.find(".wn-number");d.html(this.currentImgObj.index+1+"/"+this.currentImgObj.total_number);var g=u.find(".wn-share-pane");var r=g.find(".wn-embed-code");var f="";f=wnFeedsApiDomain+"/feed/v3.0/widgets/";r.empty();r.append("&lt;script type='text/javascript' src='"+f+this.currentImgObj.widgetId+"?alt=js&contextaffiliate="+wnSiteConfigGeneral.affiliateNumber+"'&gt;&lt;/script&gt;");this.share_link=g.find(".share-link");var h="widgetid="+this.currentImgObj.widgetId+"&slideshowimageid="+(this.currentImgObj.index+1);if(this.fV.landingPage!=undefined&&this.fV.landingPage!=""){var m=(this.fV.landingPage.indexOf("?")>0)?"&":"?";this.share_link[0].value=this.fV.landingPage+m+h}else{this.share_link[0].value="http://"+this.fV.hostDomain+"/global/slideshow.asp?"+h}p.css("opacity",0);var x={old_image:{opacity:0},new_image:{opacity:1}};if(this.current_image){var c=this.current_image;var s=this.current_description;c.animate({opacity:0},400,"swing",function(){c.remove();if(s){s.remove()}})}this.current_image=p;this.current_description=w;p.animate({opacity:1},400,"swing",function(){if(t.currentImgObj.index==(t.currentImgObj.total_number-1)){t.next_link.hide()}else{t.next_link.show()}if(t.currentImgObj.index==0){t.prev_link.hide()}else{t.prev_link.show()}});if(b.objClip.isClicked){var v=$wn("#"+this.fV.domId).find(".wn-start-pause");if(v.html()=="pause"){t.pauseSlideshow()}}};WNImageCanvas.prototype.onPrimaryImageGalleryLoad=function(c){var a=(c.objClip.urlImageIndex>0)?c.objClip.urlImageIndex-1:-1;if(!this.currentImgObj){var b=(parseInt(this.fV.urlWidgetId)>0)?this.fV.urlWidgetId:this.fV.widgetId;evntMgr.Notify({evnt:"NextImageRequest",idKey:this.fV.idKey,objClip:{index:a,widgetId:b}})}};WNImageCanvas.prototype.nextImage=function(){evntMgr.Notify({evnt:"NextImageRequest",idKey:this.fV.idKey,objClip:this.getCurrentImageObj()})};WNImageCanvas.prototype.prevImage=function(){evntMgr.Notify({evnt:"PrevImageRequest",idKey:this.fV.idKey,objClip:this.getCurrentImageObj()})};WNImageCanvas.prototype.getCurrentImageObj=function(){var a=this.currentImgObj;if(!a){a={index:-1,widgetId:this.fV.widgetId}}return a};WNImageCanvas.prototype.resizeAndCenter=function(c){var a=c.find("img:first");if(a.length>0){var b=this.getContainedImageSize(a[0].width,a[0].height);a.attr("width",b.width);a.attr("height",b.height);this.centerImage(c,b.width,b.height)}};WNImageCanvas.prototype.getContainedImageSize=function(b,a){if(a>this.fV.playerHeight){var c=b/a;a=this.fV.playerHeight;b=this.fV.playerHeight*c}if(b>this.fV.playerWidth){var c=a/b;b=this.fV.playerWidth;a=this.fV.playerWidth*c}return{width:b,height:a}};WNImageCanvas.prototype.centerImage=function(d,b,a){d.css("top","0px");if(a<this.fV.playerHeight){var c=this.fV.playerHeight-a;d.find("img").css("top",(c/2)+"px")}d.css("left","0px");if(b<this.fV.playerWidth){var c=this.fV.playerWidth-b;d.find("img").css("left",(c/2)+"px")}};WNImageGallery=function(c,h,a){this.fV=h;this.widgetClassType="WNImageGallery";this.parentDivId=c;this.parentJSName=this.widgetClassType+this.fV.widgetId;this.groupId=this.fV.idKey;this.images=(a!=undefined)?a:[];$wn("#"+this.parentDivId).empty();if(this.fV.isSingleImageGallery.toLowerCase()=="true"){this.renderAsSingleImageGallery()}else{if(this.fV.isPrimaryGallery.toLowerCase()=="true"){this.isPrimaryGallery=true}if(this.fV.urlWidgetId!=undefined&&this.isPrimaryGallery&&(parseInt(this.fV.urlWidgetId)>0)){var g=new Date().getTime();var k=wnFeedsApiDomain+"/feed/v3.0/widgets/"+this.fV.urlWidgetId+"?alt=json&callback=wnVideoWidgets.loadPrimarySlideshowData&contextaffiliate="+wn.affiliateno;wnVideoUtils.loadScript("wnSlideshowScript"+g,k)}else{if(wn_isMobile){var f=parseInt($wn("#"+this.parentDivId).position().left);var b=parseInt(this.fV.playerWidth)+f;var d=$wn("#"+this.parentDivId).parent().parent().width()-f;if(d<b){this.fV.playerWidth=d}}this.render()}}};WNImageGallery.prototype.highlightThumb=function(h){var b=$wn("#"+this.fV.domId).find("a");if(b.length>0){var c=$wn(b[h]);c.parent().parent().find(".wn-ad-active").removeClass("wn-ad-active");c.addClass("wn-ad-active");var g=c.parents(".wn-ad-thumbs");var a=c.parents(".wn-ad-thumb-list");var f=g.siblings(".wn-ad-forward");var d=g.siblings(".wn-ad-back");var k=c.parent()[0].offsetLeft;k-=(c.parent().parent().parent().width()/2)-(c[0].offsetWidth/2);if(((document.location).toString().indexOf("https://manage")>-1||(document.location).toString().indexOf("http://manage")>-1)&&(document.location).toString().indexOf("worldnow.com")>-1){c.parent().parent().parent().scrollLeft(k);WNImageGallery.handleGalleryPrevNextUI(g.width(),g.scrollLeft(),a.width(),f,d)}else{c.parent().parent().parent().animate({scrollLeft:k+"px"},function(){WNImageGallery.handleGalleryPrevNextUI(g.width(),g.scrollLeft(),a.width(),f,d)})}}};WNImageGallery.prototype.renderFromJson=function(b){if(b.widgets!=undefined){for(var a in b.widgets[0].json){if(b.widgets[0].json[a].images!=undefined){this.images=b.widgets[0].json[a].images;this.fV.adTag=b.widgets[0].json[a].adTag;this.fV.slideshowHeadline=b.widgets[0].json[a].slideshowHeadline}}}this.render()};WNImageGallery.prototype.renderAsSingleImageGallery=function(){var k=this;var a="";if(this.fV.landingPage!=undefined&&this.fV.landingPage!=""){var m=(this.fV.landingPage.indexOf("?")>0)?"&":"?";a=this.fV.landingPage+m+"widgetid="+this.fV.widgetId}else{a="http://"+this.fV.hostDomain+"/global/slideshow.asp?widgetid="+this.fV.widgetId}var d=(typeof this.fV.popupLandingPage!="undefined"&&this.fV.popupLandingPage.toLowerCase()=="true");var b="";b+="<div id="+this.fV.domId+">";b+="   <div class='wnSingleImageGallery'>";b+="      <div class='wn-gallery-thumbnail'>";var c=this.images[0];var g=this.fV.slideshowHeadline;var h=this.images.length;if(typeof c=="undefined"){b+="         <div class='wn-single-image-placeholder'>&nbsp;</div>"}else{b+="         <a href='"+a+"' ";if(d){b+="target='blank' "}b+="><img src='"+unescape(c.url)+"' height='80'/></a>"}b+="      </div>";b+="      <div class='wn-gallery-description'>";b+="         <a href='"+a+"'";if(d){b+="target='blank' "}b+=">"+unescape(g)+"</a><br/>";b+="         <span class='photo_number'>"+h+" photo";if(h>1){b+="s"}b+="</span>";b+="      </div>";b+="   </div>";b+="</div>";b+="<style type='text/css'>";b+="#"+this.fV.domId+" .wnSingleImageGallery {width: "+this.fV.playerWidth+"px; height: "+this.fV.playerHeight+"px}";b+="</style>";$wn("#"+this.parentDivId).append(b);var f=$wn("#"+this.parentDivId).attr("class");if(typeof f!="indefined"){$wn("#"+this.parentDivId).attr("class",f+" WNWidgetsContainer")}else{$wn("#"+this.parentDivId).attr("class","WNWidgetsContainer")}};WNImageGallery.prototype.render=function(){var s=this;var h="";h+="<div id="+this.fV.domId+">";h+="   <div class='wn-ad-gallery'>";h+="      <div class='wn-ad-nav'>";h+="         <div class='wn-ad-back'/>";h+="         <div class='wn-ad-thumbs'>";h+="            <ul class='wn-ad-thumb-list'>";var n=this.images;var x=this.fV.playerHeight;$wn.each(n,function(y,z){h+="<li><a><img src='"+unescape(n[y].url);h+="' class='image"+y+"' height='"+(x-20)+"'/></a></li>"});h+="            </ul>";h+="         </div>";h+="         <div class='wn-ad-forward'/>";h+="      </div>";h+="   </div>";h+="</div>";h+="<style type='text/css'>";h+="#"+this.fV.domId+" .wn-ad-gallery {width: "+(this.fV.playerWidth-2)+"px; height: "+(this.fV.playerHeight-2)+"px}";h+="#"+this.fV.domId+" .wn-ad-gallery .wn-ad-nav .wn-ad-thumbs {width: "+(this.fV.playerWidth-80)+"px}";h+="#"+this.fV.domId+" .wn-ad-gallery .wn-ad-thumbs li a img {height:"+(this.fV.playerHeight-20)+"px}";h+="#"+this.fV.domId+" .wn-ad-gallery .wn-ad-forward, ";h+="#"+this.fV.domId+" .wn-ad-gallery .wn-ad-back {top: "+Math.round((this.fV.playerHeight-21)/2)+"px}";h+="</style>";$wn("#"+this.parentDivId).append(h);$wn("#"+this.fV.domId).data("widget",this);evntMgr.Register({evnt:"NextImageRequest",func:"onNextImageRequest",idKey:this.groupId,lstnr:this.fV.domId});evntMgr.Register({evnt:"PrevImageRequest",func:"onPrevImageRequest",idKey:this.groupId,lstnr:this.fV.domId});evntMgr.Register({evnt:"imageCanvasLoad",func:"onImageCanvasLoad",idKey:this.groupId,lstnr:this.fV.domId});var d=$wn("#"+this.parentDivId).attr("class");if(typeof d!="indefined"){$wn("#"+this.parentDivId).attr("class",d+" WNWidgetsContainer")}else{$wn("#"+this.parentDivId).attr("class","WNWidgetsContainer")}var m=$wn("#"+this.fV.domId);var u=0;var p=0;var b=m.find("a");var a=b.length;b.each(function(z){var A=$wn(this);var y=A.find("img");if(!wnVideoWidgets.isImageLoaded(y[0])){y.load(function(){u+=this.parentNode.parentNode.offsetWidth;p++})}else{u+=y[0].parentNode.parentNode.offsetWidth;p++}A.addClass("ad-thumb"+z);A.click(function(){s.showImage(z,true);s.highlightThumb(z)})});var f=setInterval(function(){if(a==p){var B=m.find(".wn-ad-thumb-list");u=u+2;B.css("width",u+"px");var y=false;var A=1;var z=B.height();while(A<201){B.css("width",(u+A)+"px");if(z!=B.height()){y=true;break}z=B.height();A++}if(!y){B.css("width",u+"px")}clearInterval(f)}},100);var g=this;var o=parseInt(this.fV.imageId)-1;var c=(o>0)?o:0;var r=m.find(".wn-ad-thumbs");var q=m.find(".wn-ad-forward");var v=m.find(".wn-ad-back");var w=m.find(".wn-ad-thumb-list");var k=0;var t=false;$wn(v).add(q).click(function(){var y="gallerynext";var A=r.width()-50;if($wn(this).is(".wn-ad-forward")){var B=r.scrollLeft()+A}else{var B=r.scrollLeft()-A;y="galleryprevious"}if(((document.location).toString().indexOf("https://manage")>-1||(document.location).toString().indexOf("http://manage")>-1)&&(document.location).toString().indexOf("worldnow.com")>-1){r.scrollLeft(B);WNImageGallery.handleGalleryPrevNextUI(r.width(),r.scrollLeft(),w.width(),q,v)}else{r.animate({scrollLeft:B+"px"},function(){WNImageGallery.handleGalleryPrevNextUI(r.width(),r.scrollLeft(),w.width(),q,v)})}var z=g.images[c];if(typeof z!=="undefined"){z.slideshowHeadline=g.fV.slideshowHeadline;z.widgetId=g.fV.widgetId;z.ownerAffiliateName="NA";evntMgr.Notify({evnt:y,idKey:g.fV.idKey,objClip:z,system:"slideshow"})}return false});WNImageGallery.handleGalleryPrevNextUI(r.width(),r.scrollLeft(),w.width(),q,v);if(this.isPrimaryGallery){evntMgr.Notify({evnt:"primaryImageGalleryLoad",idKey:this.fV.idKey,objClip:{urlImageIndex:c}})}};WNImageGallery.prototype.showImage=function(c,h){var a=this.images[c];if(a==undefined){return}var g=this.fV;var b=(a.adTag!=undefined&&a.adTag!="")?a.adTag:g.adTag;var f=(this.fV.urlWidgetId!=undefined)?this.fV.urlWidgetId:g.widgetId;var d={id:a.id,url:unescape(a.url),headline:unescape(a.headline),mainHeadline:unescape(a.headline),description:unescape(a.description),summary:unescape(a.description),publishingDate:a.publishingDate,credits:unescape(a.credits),href:unescape(a.href),adTag:unescape(b),widgetId:f,groupId:g.idKey,slideshowHeadline:g.slideshowHeadline,index:c,total_number:this.images.length,imageNumber:"",adCallDomain:g.hostDomain,ownerAffiliateName:wnSiteConfigGeneral.affiliateName,disableAd:true,isClicked:h};if(this.notClickInitiatedLoad){this.notClickInitiatedLoad=false;d.disableAd=false;d.onGalleryLoad=true}wnSlideshowImage.NewSlideshowImage(d)};WNImageGallery.handleGalleryPrevNextUI=function(a,f,d,c,b){$wn(b).show();$wn(c).show();if(f==0){$wn(b).hide()}if(a+f>=d){$wn(c).hide()}};WNImageGallery.prototype.onImageCanvasLoad=function(c){if(this.isPrimaryGallery){this.notClickInitiatedLoad=true;var b=parseInt(this.fV.imageId);var a=(b>0)?b:0;this.showImage(a,false);this.highlightThumb(a)}};WNImageGallery.prototype.onNewImage=function(c){var b=(parseInt(this.fV.urlWidgetId)>0)?this.fV.urlWidgetId:this.fV.widgetId;if(b!=c.objClip.widgetId){var a=$wn("#"+this.fV.domId);a.find(".wn-ad-active").removeClass("wn-ad-active")}};WNImageGallery.prototype.onNextImageRequest=function(c){var b=(parseInt(this.fV.urlWidgetId)>0)?this.fV.urlWidgetId:this.fV.widgetId;if(c.objClip.widgetId==b||this.isPrimaryGallery&&c.objClip.index==-1){var a=c.objClip;if(a.index>=(this.images.length-1)){evntMgr.Notify({evnt:"LastImageReached",idKey:this.fV.idKey,objClip:{}})}else{if(a.index<0){this.showImage(0,false);this.highlightThumb(0)}else{this.showImage(a.index+1,false);this.highlightThumb(a.index+1)}}}};WNImageGallery.prototype.onPrevImageRequest=function(c){var b=(parseInt(this.fV.urlWidgetId)>0)?this.fV.urlWidgetId:this.fV.widgetId;if(c.objClip.widgetId==b||this.isPrimaryGallery&&c.objClip.index==-1){var a=c.objClip;if(a.index<1){}else{this.showImage(a.index-1,false);this.highlightThumb(a.index-1)}}};WNHeadline=function(b,f){this.fV=f;this.widgetClassType="WNHeadline";this.parentDivId=b;this.parentJSName=this.widgetClassType+this.fV.widgetId;this.groupId=this.fV.idKey;this.defaultTitleText="";if(((this.fV.defaultTitleText==undefined)||((this.fV.defaultTitleText.length-1)<0))&&(this.fV.slideshowHeadline=="undefined"||this.fV.slideshowHeadline==undefined||this.fV.slideshowHeadline=="")){this.defaultTitleText="Video Player"}else{if(this.fV.slideshowHeadline!="undefined"&&this.fV.slideshowHeadline!=undefined&&this.fV.slideshowHeadline!=""){this.defaultTitleText=this.fV.slideshowHeadline}else{this.defaultTitleText=this.fV.defaultTitleText}}if(wn_isMobile){var g=$wn("#"+this.parentDivId);this.fV.widgetsContainer=g.parent();var d=parseInt(g.position().left);var a=parseInt(this.fV.playerWidth)+d;var c=g.parent().parent().width()-d;if(c<a){this.fV.playerWidth=c}containerWidth=g.parent().parent().width();a=g.parent().width();if(containerWidth<a){g.parent().width(containerWidth)}}this.render();$wn("#"+this.fV.domId).data("widget",this);evntMgr.Register({evnt:"NewMedia",func:"setHeadline",idKey:this.groupId,lstnr:this.fV.domId});evntMgr.Register({evnt:"NewClip",func:"setHeadline",idKey:this.groupId,lstnr:this.fV.domId});evntMgr.Register({evnt:"ClearHeadlineEvent",func:"setHeadline",idKey:this.groupId,lstnr:this.fV.domId});evntMgr.Register({evnt:"NoMedia",func:"setHeadline",idKey:this.groupId,lstnr:this.fV.domId});evntMgr.Register({evnt:"ClipEnded",func:"setHeadline",idKey:this.groupId,lstnr:this.fV.domId});evntMgr.Register({evnt:"NewClip",func:"setHeadline",idKey:this.groupId,lstnr:this.fV.domId});evntMgr.Register({evnt:"LoadingMedia",func:"showMessage",idKey:this.groupId,lstnr:this.fV.domId})};WNHeadline.prototype.render=function(){var a="";a+="<div id="+this.fV.domId+" class='wn-widget-headline'>";a+="   <div class='wn-widget-headline-title'></div>";a+="   <div class='wn-widget-headline-time'></div>";a+="</div>";a+="<style type='text/css'>";a+="#"+this.fV.domId+" {width: "+(this.fV.playerWidth-2)+"px; height: "+(this.fV.playerHeight-2)+"px}";a+="#"+this.fV.domId+" div {height: "+(this.fV.playerHeight-5)+"px; line-height: "+(this.fV.playerHeight-5)+"px; font-size: "+this.fV.fontSize+"px;}";a+="#"+this.fV.domId+" .wn-widget-headline-title {width: "+(this.fV.playerWidth-14)+"px}";a+="#"+this.fV.domId+" .wn-widget-headline-time {left: "+(this.fV.playerWidth-51)+"px; top: 1px;}";a+="</style>";$wn("#"+this.parentDivId).empty();$wn("#"+this.parentDivId).append(a)};WNHeadline.prototype.setHeadline=function(d){var k=$wn("#"+this.fV.domId);var c=k.find(".wn-widget-headline-title");var h=k.find(".wn-widget-headline-time");var b=d.objClip;var a;if(wnVideoUtils.validateString(b.headline)){a=b.headline}else{if(wnVideoUtils.validateString(b.mainHeadline)){a=b.mainHeadline}else{a=""}}if(wnVideoUtils.validateString(b.slideshowHeadline)){if(wnVideoUtils.validateString(wnVideoUtils.getQS("widgetId"))){a=b.slideshowHeadline}else{a=this.defaultTitleText}}var f=parseInt(b.duration);var g=isNaN(f)?"":wnVideoWidgets.GetTimeString(f);if(b.preferredFormat=="WMV"||b.isThirdPartyAd){g=""}if(wnVideoUtils.validateString(b.imageNumber)){g=b.imageNumber}if(this.fV.hasImageCount!="true"&&this.fV.hasImageCount!=true){g=""}c.empty();h.empty();c.append(a);h.append(g)};WNHeadline.prototype.showMessage=function(c){var b=evntObj.parameters.objClip;if(wnVideoUtils.validateString(b.headline)||wnVideoUtils.validateString(b.mainHeadline)){this.setHeadline(evntObj)}else{var a=evntObj.message;timeDiv.empty();titleDiv.empty();if(wnVideoUtils.validateString(a)){titleDiv.append(headline)}}};WNInfoPane=function(b,h){this.fV=h;this.widgetClassType="WNInfoPane";this.parentDivId=b;this.parentJSName=this.widgetClassType+this.fV.widgetId;this.groupId=this.fV.idKey;this.failSafeSummaryImageText="";if(this.fV.failSafeSummaryImageText==undefined||(this.fV.failSafeSummaryImageText.length-1)<0){this.failSafeSummaryImageText="VIDEO"}else{this.failSafeSummaryImageText=this.fV.failSafeSummaryImageText}this.hasImage=(this.fV.hasImage).toLowerCase()=="false"?false:true;this.hasHeadline=(this.fV.hasHeadline).toLowerCase()=="false"?false:true;this.hasSummary=(this.fV.hasSummary).toLowerCase()=="false"?false:true;this.hasDuration=(this.fV.hasDuration).toLowerCase()=="false"?false:true;this.hasCredit=(this.fV.hasPhotoCredit).toLowerCase()=="false"?false:true;this.hasDateStamp=(this.fV.hasDateStamp).toLowerCase()=="false"?false:true;if(wn_isMobile){var k=$wn("#"+this.parentDivId);this.fV.widgetsContainer=k.parent();var f=parseInt(k.position().left);var a=parseInt(this.fV.playerWidth)+f;var d=k.parent().parent().width()-f;if(d<a){this.fV.playerWidth=d}var c=getWigdetByType(this.groupId,"c");if(c!={}&&c.playerHeight<c.originalHeight&&c.widgetsContainer.attr("id")==k.parent().attr("id")&&k.position().top>=(c.top+c.originalHeight-10)&&k.position().left<(c.left+c.originalWidth-10)){var g=c.originalHeight-c.playerHeight;k.css("top",Math.floor(k.position().top-g))}containerWidth=k.parent().parent().width();a=k.parent().width();if(containerWidth<a){k.parent().width(containerWidth)}}this.render();$wn("#"+this.fV.domId).data("widget",this);evntMgr.Register({evnt:"NewMedia",func:"showInfo",idKey:this.groupId,lstnr:this.fV.domId});evntMgr.Register({evnt:"NewClip",func:"showInfo",idKey:this.groupId,lstnr:this.fV.domId})};WNInfoPane.prototype.render=function(){var c="";c+="<div id="+this.fV.domId+" class='wn-widget-infopane'>";c+="   <div class='wn-widget-infopane-image'></div>";c+="   <div class='wn-widget-infopane-textinfo'>";c+="      <div class='wn-widget-infopane-title'></div>";c+="      <div class='wn-widget-infopane-summary'></div>";c+="      <div class='wn-widget-infopane-time'></div>";c+="   </div>";c+="</div>";var n=7;var k=parseInt(this.fV.playerHeight)-n*2;var b=parseInt(this.fV.playerWidth);var h=(parseInt(this.fV.imageHeight)<=k)?parseInt(this.fV.imageHeight):k;var m=(parseInt(this.fV.imageWidth)<=b)?parseInt(this.fV.imageWidth):b;var d=m+n;if(!this.hasImage){d=0}var g=parseInt(this.fV.headlineFontSize)+6;if(!this.hasHeadline){g=0}var f=parseInt(this.fV.durationFontSize)+6;if(!this.hasDuration){f=0}var a=parseInt(this.fV.playerHeight)-g-f-n*2;c+="<style type='text/css'>";c+="#"+this.fV.domId+" {width: "+(this.fV.playerWidth-2)+"px; height: "+(this.fV.playerHeight-2)+"px}";c+="#"+this.fV.domId+" .wn-widget-infopane-image {top: "+n+"px; left:"+n+"px}";c+="#"+this.fV.domId+" .wn-widget-infopane-image, ";c+="#"+this.fV.domId+" .wn-widget-infopane-image img {width: "+m+"px; height:"+h+"px}";c+="#"+this.fV.domId+" .wn-widget-infopane-image {line-height: "+h+"px; font-size: "+Math.round(h/4)+"px;}";if(!this.hasImage){c+="#"+this.fV.domId+" .wn-widget-infopane-image {display: none;}"}c+="#"+this.fV.domId+" .wn-widget-infopane-textinfo {left: "+(d+n)+"px; top: "+n+"px;}";c+="#"+this.fV.domId+" .wn-widget-infopane-title, ";c+="#"+this.fV.domId+" .wn-widget-infopane-summary {width: "+(this.fV.playerWidth-d-2*n)+"px;}";c+="#"+this.fV.domId+" .wn-widget-infopane-title {height: "+g+"px; font-size: "+this.fV.headlineFontSize+"px;}";c+="#"+this.fV.domId+" .wn-widget-infopane-summary {height: "+a+"px; font-size: "+this.fV.summaryFontSize+"px;}";c+="#"+this.fV.domId+" .wn-widget-infopane-time {height: "+f+"px; font-size: "+this.fV.durationFontSize+"px;}";if(!this.hasHeadline){c+="#"+this.fV.domId+" .wn-widget-infopane-title {display: none;}"}if(!this.hasDuration){c+="#"+this.fV.domId+" .wn-widget-infopane-time {display: none;}"}c+="</style>";$wn("#"+this.parentDivId).empty();$wn("#"+this.parentDivId).append(c)};WNInfoPane.prototype.showInfo=function(h){var b=$wn("#"+this.fV.domId);var s=b.find(".wn-widget-infopane-image");var c=b.find(".wn-widget-infopane-title");var q=b.find(".wn-widget-infopane-summary");var m=b.find(".wn-widget-infopane-time");var d=h.objClip;var a=wnVideoUtils.validateString(d.headline)?d.headline:d.mainHeadline;var n="";var o=wnVideoUtils.validateString(d.summary)?d.summary:"";var p=wnVideoUtils.validateString(d.publishingDate)?d.publishingDate:"";var f=wnVideoUtils.validateString(d.credits)?d.credits:"";if(this.hasDateStamp){n+=p}if(this.hasDateStamp&&this.hasSummary){n+="<br/>"}if(this.hasSummary){n+=o}if((this.hasSummary||this.hasDateStamp)&&this.hasCredit){n+="<br/>"}if(this.hasCredit){n+=f}o=n;var g=parseInt(d.duration);var t=isNaN(g)?"":wnVideoWidgets.GetTimeString(g);if(d.preferredFormat=="WMV"||d.isThirdPartyAd){t=""}if(this.hasImage){var r="";if(typeof(d.thumb)=="string"){r=d.thumb}else{if(typeof(d.graphic)=="string"){r=d.graphic}else{}}s.empty();if(r!=""){var k=$wn(new Image()).attr("src",r);s.append(k)}else{s.append("<div>Video</div>")}}c.empty();q.empty();m.empty();c.append(a);q.append(o);m.append(t)};function wnEmbedPlayer(c){if(c!=""){var E=wnVideoUtils.parseQuery(c);var m=parseInt(E.rnd);if(isNaN(m)||m<1){m=1}var k=E.hostDomain;var B=parseInt(E.playerWidth);var x=parseInt(E.playerHeight);var I=wnVideoUtils.stringToBoolean(E.isShowIcon);if(E.clipId!=undefined&&["clipId"]!=""){var z=parseInt(E.clipId)}if(E.flvUri!=undefined&&E.flvUri!=""){var H=E.flvUri}if(E.partnerclipid!=undefined&&E.partnerclipid!=""){var t=parseInt(E.partnerclipid)}if(E.adTag!=undefined&&E.adTag!=""){var d=decodeURIComponent(decodeURIComponent(E.adTag))}if(E.advertisingZone!=undefined&&E.advertisingZone!=""){var f=decodeURIComponent(decodeURIComponent(E.advertisingZone))}if(E.enableAds!=undefined&&E.enableAds!=""){var g=wnVideoUtils.stringToBoolean(E.enableAds)}if(E.landingPage!=undefined&&E.landingPage!=""){var F=decodeURIComponent(decodeURIComponent(E.landingPage))}if(E.islandingPageoverride!=undefined&&E.islandingPageoverride!=""){var C=wnVideoUtils.stringToBoolean(E.islandingPageoverride)}if(E.playerType!=undefined&&E.playerType!=""){var D=E.playerType}var s=(E.v=="2")?2:"";if(E.controlsType!=undefined&&E.controlsType!=""){var w=(E.controlsType=="overlay")?"overlay":"fixed"}if(E.isLiveStream!=undefined&&E.isLiveStream!=""){var n=wnVideoUtils.stringToBoolean(E.isLiveStream)}if(E.streamType!=undefined&&E.streamType!=""){var v=(E.streamType=="live")?"live":"ondemand"}if(E.headline!=undefined&&E.headline!=""){var G=E.headline}var h="divWNWidgetsContainer"+m;var r="divWNHeadline"+m;var u="divWNVideoCanvas"+m;if(typeof b==="undefined"){var b=document.getElementsByTagName("script")}var a="";for(var A=0,y=b.length;A<y;A++){if(b[A].src.toLowerCase().indexOf("/wnvideo.js?")>-1&&b[A].src.indexOf(c.substr(1))>-1&&document.getElementById(h)==null){a=b[A];break}}$wn(a).after('<div id="'+h+'"></div>');var q='<style type="text/css">#'+u+" {top:25px; left:0px; position:absolute}#"+r+" {top:0px; left:0px; position:absolute}#"+h+" {position:relative;overflow:hidden;height:"+(x+25)+"px;width:"+B+'px;}</style>    <div id="'+r+'"></div>    <div id="'+u+'"></div>';$wn("#"+h).append(q);var p=new WNVideoWidget("WNHeadline",r,m);p.SetWidth(B);p.RenderWidget();var J=new WNVideoWidget("WNVideoCanvas"+s,u,m);J.SetWidth(B);J.SetHeight(x);J.SetVariable("hostDomain",k);J.SetVariable("isShowIcon",I);if(z!=undefined&&!isNaN(z)){J.SetVariable("clipId",z)}else{if(H!=undefined&&!n){J.SetVariable("flvUri",H)}else{if(t!=undefined&&!isNaN(t)){J.SetVariable("partnerclipid",t)}}}if(d!=undefined){J.SetVariable("adTag",d)}if(f!=undefined){J.SetVariable("advertisingZone",f)}if(g!=undefined){J.SetVariable("enableAds",g)}if(F!=undefined){J.SetVariable("landingPage",F)}if(C!=undefined){J.SetVariable("islandingPageoverride",C)}if(D!=undefined){J.SetVariable("playerType",D)}if(s!=undefined){J.SetVariable("v",s)}if(w!=undefined){J.SetVariable("controlsType",w)}J.SetVariable("transportShareButtons","cc");if(n&&(z==undefined||isNaN(z))){var o={strUrl:H,streamType:v,strHeadline:G,strAdTag:d,hasPreroll:g,mobileStreams:[]};if(typeof E.wnms1!=="undefined"&&E.wnms1!=""||typeof E.wnms2!=="undefined"&&E.wnms2!=""||typeof E.wnms3!=="undefined"&&E.wnms3!=""){if(typeof E.wnms1!=="undefined"&&E.wnms1!=""){o.mobileStreams.push({url:E.wnms1,type:"video/mp4"})}if(typeof E.wnms2!=="undefined"&&E.wnms2!=""){o.mobileStreams.push({url:E.wnms2,type:"video/mp4"})}if(typeof E.wnms3!=="undefined"&&E.wnms3!=""){o.mobileStreams.push({url:E.wnms3,type:"video/mp4"})}}J.SetFlashLiveStream(o)}J.RenderWidget()}}var Namespace_VideoReporting_Worldnow=function(){var functionsArray=new Array;var arrIndex=0;var functionsSlideShowArray=new Array;var slArrIndex=0;var isPaused=false;return{getVideoCategory:function(){var category="Video Embedded [Externally]";if(wnPageType=="videostorypage"){category="Video In Story"}if(wnPageType=="videolandingpage"){category="Video Landing Page"}if(wnPageType=="slideshowlandingpage"){category="Video In Slideshow Landing Page"}return category},getSlideshowCategory:function(){var category="Slideshow Embedded [Externally]";if(wnPageType=="videostorypage"){category="Slideshow In Story"}if(wnPageType=="videolandingpage"){category="Slideshow In Video Landing Page"}if(wnPageType=="slideshowlandingpage"){category="Slideshow Landing Page"}return category},getVideoValue:function(p_len,p_pos,p_eventType){var value=p_len;try{value=Math.floor(parseFloat(p_len))}catch(e){}var currentTime=p_pos;try{currentTime=Math.floor(parseFloat(currentTime))}catch(e){}if(p_eventType.toLowerCase()=="play"||p_eventType.toLowerCase()=="pause"||p_eventType.toLowerCase()=="volumechange"||p_eventType.toLowerCase()=="mute"||p_eventType.toLowerCase()=="unmute"){value=currentTime}return value},getVideoEventAction:function(p_eventType){if(typeof p_eventType!=="string"){return p_eventType}var eventAction=p_eventType;if(p_eventType.toLowerCase()=="newclip"){eventAction="Render";isPaused=false}if(p_eventType.toLowerCase()=="start"||p_eventType.toLowerCase()=="duration"){eventAction="Play"}if(p_eventType.toLowerCase()=="play"){if(isPaused){eventAction="Resume"}else{eventAction=""}}if(p_eventType.toLowerCase()=="pause"){eventAction="Pause";isPaused=true}if(p_eventType.toLowerCase()=="ended"){eventAction="Ended"}if(p_eventType.toLowerCase()=="volumechange"){eventAction="Volume Change"}if(p_eventType.toLowerCase()=="mute"){eventAction="Mute"}if(p_eventType.toLowerCase()=="unmute"){eventAction="Unmute"}if(p_eventType.toLowerCase()=="email"){eventAction="Email"}if(p_eventType.toLowerCase()=="fullscreen"){eventAction="Full Screen"}return eventAction},getSlideshowEventAction:function(p_eventType){if(typeof p_eventType!=="string"){return p_eventType}var eventAction=p_eventType;if(p_eventType.toLowerCase()=="start"){eventAction="Start"}if(p_eventType.toLowerCase()=="stop"){eventAction="Pause"}if(p_eventType.toLowerCase()=="next"){eventAction="Next"}if(p_eventType.toLowerCase()=="gallerynext"){eventAction="ClickGalleryNext"}if(p_eventType.toLowerCase()=="previous"){eventAction="Back"}if(p_eventType.toLowerCase()=="galleryprevious"){eventAction="ClickGalleryBack"}if(p_eventType.toLowerCase()=="imageview"){eventAction="ImageView"}if(p_eventType.toLowerCase()=="newclip"){return}return eventAction},getVideoLabel:function(p_clipAdTag,p_title,p_clipId){var label=decodeURIComponent(p_clipAdTag+" - "+p_title+" - "+p_clipId);return label},getSlideshowLabel:function(p_clipAdTag,p_widgetHeadline,p_clipId){var label=decodeURIComponent(p_clipAdTag+" - "+p_widgetHeadline+" - "+p_clipId);return label},logVideoEventParameters:function(p_strEventType,p_strTitle,p_strCurPos,p_strClipId,p_strClipAdTag,p_strHostPage,p_strAffiliateName,p_strOwnerAffiliateNo,p_isAd,p_ciid,p_strReferer,p_baseUrl,p_reportingKeywords,p_uri,p_len,p_pctViewed,p_location,p_contentSource,p_keywords,p_playerType,p_isExpressReport,p_PlayerName,p_PlayerId,p_SiteId,p_taxonomy1,p_taxonomy2,p_taxonomy3){if(p_strClipId!="undefined"){if(p_strTitle==""){p_strTitle="N/A"}var stream_type="vod";var stream_type_number=0;if(typeof wnVideoWidgets.canvasObjectFlashVars==="string"){var fv=wnVideoWidgets.canvasObjectFlashVars.toLowerCase();if(fv.indexOf("&streamtype=live")>=0){stream_type="live";stream_type_number=1}}try{p_len=Math.floor(p_len)}catch(e){}try{p_strCurPos=Math.floor(parseFloat(p_strCurPos))}catch(e){}var currDate=new Date();currDate=currDate.toUTCString();try{currDate=$wn.format.date(new Date(),"yyyy-MM-dd")}catch(e){}var category=this.getVideoCategory();var eventAction=this.getVideoEventAction(p_strEventType);if(eventAction!=""){var eventMeta={affiliate_name:p_strAffiliateName,affiliate_ownerno:p_strOwnerAffiliateNo,contentprovider:p_strOwnerAffiliateNo,baseurl:p_baseUrl,clip_title:escape(p_strTitle),clip_createddate:currDate,clip_length:p_len,clip_position:p_strCurPos,clip_id:p_strClipId,clip_adtag:escape(p_strClipAdTag),clip_uri:p_uri,clip_pctviewed:p_pctViewed,clip_pausecount:0,clip_isad:p_isAd,clip_bufferingtime:0,clip_source:escape(p_contentSource),clip_keywords:escape(p_keywords),event_action:eventAction,hostpage:escape(p_strHostPage),heartbeat_counter:1,reporting_keywords:p_reportingKeywords,page_url:document.location.href,player_type:escape(p_playerType),player_name:escape(p_strHostPage),player_id:p_PlayerId,player_version:"5.2",site_id:p_SiteId,site_useexpressreports:p_isExpressReport,streamtype:stream_type,streamtypenumber:stream_type_number,timestamp:new Date().getTime(),user_bandwidth:0,user_interactionflag:"",windowstate:"norm",category:category};if(wnVideoUtils.validateString(p_taxonomy1)){eventMeta.taxonomy1=p_taxonomy1}if(wnVideoUtils.validateString(p_taxonomy2)){eventMeta.taxonomy2=p_taxonomy2}if(wnVideoUtils.validateString(p_taxonomy3)){eventMeta.taxonomy3=p_taxonomy3}if(!p_isAd){Worldnow.EventMan.event("video_"+p_strEventType.toLowerCase(),eventMeta)}}}if(p_strTitle!=""&&p_strClipId!="undefined"){var strFunctionCall;var strInputParams;p_strTitle=escape(p_strTitle);p_strClipAdTag=escape(p_strClipAdTag);p_strHostPage=escape(p_strHostPage);p_contentSource=escape(p_contentSource);p_keywords=escape(p_keywords);p_playerType=escape(p_playerType);if(p_strEventType.toLowerCase()=="duration"){p_len=parseFloat(p_len/1000)}strInputParams="('"+p_strEventType+"',";strInputParams+="'"+p_strTitle+"',";strInputParams+="'"+p_strCurPos+"',";strInputParams+="'"+p_strClipId+"',";strInputParams+="'"+p_strClipAdTag+"',";strInputParams+="'"+p_strHostPage+"',";strInputParams+="'"+p_strAffiliateName+"',";strInputParams+="'"+p_strOwnerAffiliateNo+"',";strInputParams+="'"+p_isAd+"',";strInputParams+="'"+p_ciid+"',";strInputParams+="'"+p_strReferer+"',";strInputParams+="'"+p_baseUrl+"',";strInputParams+="'"+p_reportingKeywords+"',";strInputParams+="'"+p_uri+"',";strInputParams+="'"+p_len+"',";strInputParams+="'"+p_pctViewed+"',";strInputParams+="'"+p_location+"',";strInputParams+="'"+p_contentSource+"',";strInputParams+="'"+p_keywords+"',";strInputParams+="'"+p_playerType+"',";strInputParams+="'"+p_isExpressReport+"',";strInputParams+="'"+p_PlayerName+"',";strInputParams+="'"+p_PlayerId+"',";strInputParams+="'"+p_SiteId+"')";for(var x=0;x<functionsArray.length;x++){try{strFunctionCall=functionsArray[x]+strInputParams;eval(strFunctionCall)}catch(e){}}}return{eventName:"video_"+p_strEventType.toLowerCase(),eventMeta:eventMeta,evalFuncCall:strFunctionCall}},logSlideShowEventParameters:function(p_strEventType,p_strTitle,p_strWidgetHeadline,p_strClipId,p_strImgId,p_strClipAdTag,p_strBaseUrl,p_strAffiliateName,p_strPlayerType,p_imgIndex){if(p_strTitle!=""&&p_strClipId!="undefined"){var category=this.getSlideshowCategory();var eventAction=this.getSlideshowEventAction(p_strEventType);var count=0;try{var counter=$wn(".wn-number").html();var countArr=counter.split("/");count=parseFloat(countArr[1]);if(isNaN(count)){count=0}}catch(e){}var index=0;if(typeof p_imgIndex!=="undefined"){index=parseFloat(p_imgIndex);index=index+1}var eventMeta={event_action:eventAction,page_url:document.location.href,category:category,slideshow_headline:p_strWidgetHeadline,slideshow_widgetid:p_strClipId,slideshow_widgetheadline:p_strWidgetHeadline,slideshow_adtag:p_strClipAdTag,slideshow_imageid:p_strImgId,slideshow_imageindex:index,slideshow_imagename:p_strTitle,slideshow_count:count};Worldnow.EventMan.event("slideshow_"+p_strEventType.toLowerCase(),eventMeta)}if(p_strTitle!=""&&p_strClipId!="undefined"){var strFunctionCall;var strInputParams;p_strTitle=escape(p_strTitle);p_strClipAdTag=escape(p_strClipAdTag);p_strPlayerType=escape(p_strPlayerType);strInputParams="('"+p_strEventType+"',";strInputParams+="'"+p_strTitle+"',";strInputParams+="'"+p_strWidgetHeadline+"',";strInputParams+="'"+p_strClipId+"',";strInputParams+="'"+p_strImgId+"',";strInputParams+="'"+p_strClipAdTag+"',";strInputParams+="'"+p_strBaseUrl+"',";strInputParams+="'"+p_strAffiliateName+"',";strInputParams+="'"+p_strPlayerType+"',";strInputParams+="'"+p_imgIndex+"')";for(var x=0;x<functionsSlideShowArray.length;x++){try{strFunctionCall=functionsSlideShowArray[x]+strInputParams;eval(strFunctionCall)}catch(e){}}}return{eventName:"slideshow_"+p_strEventType.toLowerCase(),eventMeta:eventMeta,evalFuncCall:strFunctionCall}},getVideoTimeInterval:function(p_pos){var intLowRange,intHighRange,strTimeInterval;var intIntervalDenominator=5;p_pos=Math.floor(p_pos/intIntervalDenominator);intLowRange=p_pos*intIntervalDenominator;intHighRange=intLowRange+intIntervalDenominator;strTimeInterval=intLowRange+"-"+intHighRange+" seconds";return strTimeInterval},registerFunctionName:function(p_strFunctionName){functionsArray[arrIndex]=p_strFunctionName;arrIndex=arrIndex+1},registerSlideShowFunctionName:function(p_strFunctionName){functionsSlideShowArray[slArrIndex]=p_strFunctionName;slArrIndex=slArrIndex+1}}}();$wn(".wnFancyBox").bind("click",function(){try{var a={event_action:"images_enlarge",story_title:wng_pageInfo.headline,container_id:wng_pageInfo.containerId,image_title:$wn(this).children("img").attr("src")};Worldnow.EventMan.event("images_enlarge",a)}catch(b){wnLog("Error on Zoomable Image click")}});if(typeof wnEmbedPickUpList!=="undefined"){for(var i=0;i<wnEmbedPickUpList.length;i++){wnEmbedPlayer(wnEmbedPickUpList[i])}}var PLATFORM=Worldnow;(function(a){a(document).ready(function(){var b=document.getElementById("WNDS40");if(typeof(b)!="undefined"&&b){a("#WNDS40 ul.wnDSItemsList").liScroll({travelocity:0.04});b.style.visibility="visible"}if(WNBrowser.checkUserAgent("msie 7")&&a(".newRow").length){a(".newRow").each(function(){var g=a(this).hasClass(".displaySizeId-4")?a(this).next(".displaySizeId-4"):a(this).next(".wnItem");var c=a(this).height();var d=g.height();var f=c>d?c:d;a(this).height(f);g.height(f)})}Worldnow.EventMan.event("documentready",wng_pageInfo||{});if(typeof wng_pageInfo=="object"&&wng_pageInfo.hasOwnProperty("containerType")){Worldnow.EventMan.event("containertypeloaded-"+wng_pageInfo.containerType)}if(typeof wng_pageInfo=="object"&&wng_pageInfo.hasOwnProperty("isMobile")){Worldnow.EventMan.event("mobilepageloaded")}$wn(".wnFancyBox").bind("click",function(){try{var c={event_action:"images_enlarge",story_title:wng_pageInfo.headline,container_id:wng_pageInfo.containerId,image_title:$wn(this).children("img").attr("src")};Worldnow.EventMan.event("images_enlarge",c)}catch(d){}})});a(window).load(function(){Worldnow.EventMan.event("windowload")})})($wn||jQuery);