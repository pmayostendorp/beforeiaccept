(function($,undefined){$.extend({"lockfixed":function(el,options){var defaults={scrollElm:window,fixedClass:"lockfixed"};var config=$.extend(defaults,options);if(config&&config.offset){config.offset.bottom=parseInt(config.offset.bottom,10);config.offset.top=parseInt(config.offset.top,10)}else config.offset={bottom:100,top:0};var el=$(el);if(el&&el.offset()){var el_position=el.css("position"),el_margin_top=parseInt(el.css("marginTop"),10),el_position_top=el.css("top"),el_top=el.offset().top,pos_not_fixed=
false;if(config.forcemargin===true||navigator.userAgent.match(/\bMSIE (4|5|6)\./)||navigator.userAgent.match(/\bOS ([0-9])_/)||navigator.userAgent.match(/\bAndroid ([0-9])\./i));$(config.scrollElm).bind("scroll resize orientationchange load lockfixed:pageupdate",el,function(e){if(pos_not_fixed&&document.activeElement&&document.activeElement.nodeName==="INPUT")return;var top=0,el_height=el.outerHeight(),el_width=el.parent().outerWidth(),max_height=$(document).height()-config.offset.bottom,scroll_top=
$(config.scrollElm).scrollTop();if(el_width==0)return;if(el.css("position")!=="fixed"&&!pos_not_fixed){el_top=el.offset().top;el_position_top=el.css("top")}if(scroll_top>=el_top-(el_margin_top?el_margin_top:0)-config.offset.top){if(max_height<scroll_top+el_height+el_margin_top+config.offset.top)top=scroll_top+el_height+el_margin_top+config.offset.top-max_height;else top=0;if(pos_not_fixed)el.css({"marginTop":parseInt(scroll_top-el_top-top,10)+2*config.offset.top+"px"});else{el.css({"position":"fixed",
"top":config.offset.top-top+"px","width":el_width+"px"});el.addClass(config.fixClass)}}else{el.css({"position":el_position,"top":el_position_top,"width":el_width+"px","marginTop":(el_margin_top&&!pos_not_fixed?el_margin_top:0)+"px"});el.removeClass(config.fixClass)}})}}})})(jQuery);