(function(c){c.tools=c.tools||{version:"@VERSION"};c.tools.overlay={addEffect:function(e,f,g){b[e]=[f,g];},conf:{close:null,closeOnClick:true,closeOnEsc:true,closeSpeed:"fast",effect:"default",fixed:!c.browser.msie||c.browser.version>6,left:"center",load:false,mask:null,oneInstance:true,speed:"normal",target:null,top:"10%"}};var d=[],b={};c.tools.overlay.addEffect("default",function(h,g){var f=this.getConf(),e=c(window);if(!f.fixed){h.top+=e.scrollTop();h.left+=e.scrollLeft();}h.position=f.fixed?"fixed":"absolute";this.getOverlay().css(h).fadeIn(f.speed,g);},function(e){this.getOverlay().fadeOut(this.getConf().closeSpeed,e);});function a(h,m){var o=this,f=h.add(o),n=c(window),k,j,i,e=c.tools.expose&&(m.mask||m.expose),l=Math.random().toString().slice(10);if(e){if(typeof e=="string"){e={color:e};}e.closeOnClick=e.closeOnEsc=false;}var g=m.target||h.attr("rel");j=g?c(g):null||h;if(!j.length){throw"Could not find Overlay: "+g;}if(h&&h.index(j)==-1){h.click(function(p){o.load(p);return p.preventDefault();});}c.extend(o,{load:function(v){if(o.isOpened()){return o;}var s=b[m.effect];if(!s){throw'Overlay: cannot find effect : "'+m.effect+'"';}if(m.oneInstance){c.each(d,function(){this.close(v);});}v=v||c.Event();v.type="onBeforeLoad";f.trigger(v);if(v.isDefaultPrevented()){return o;}i=true;if(e){c(j).expose(e);}var u=m.top,q=m.bottom,t=m.left,w={},p=j.outerWidth({margin:true}),r=j.outerHeight({margin:true});if(typeof u=="string"){w.top=u=="center"?Math.max((n.height()-r)/2,0):parseInt(u,10)/100*n.height();}if(typeof q=="string"){w.bottom=q=="center"?Math.max((n.height()-r)/2,0):parseInt(q,10)/100*n.height();}if(t=="center"){t=Math.max((n.width()-p)/2,0);}w.left=t;s[0].call(o,w,function(){if(i){v.type="onLoad";f.trigger(v);}});if(e&&m.closeOnClick){c.mask.getMask().one("click",o.close);}if(m.closeOnClick){c(document).on("click."+l,function(x){if(!c(x.target).parents(j).length){o.close(x);}});}if(m.closeOnEsc){c(document).on("keydown."+l,function(x){if(x.keyCode==27){o.close(x);}});}return o;},close:function(p){if(!o.isOpened()){return o;}p=p||c.Event();p.type="onBeforeClose";f.trigger(p);if(p.isDefaultPrevented()){return;}i=false;b[m.effect][1].call(o,function(){p.type="onClose";f.trigger(p);});c(document).off("click."+l+" keydown."+l);if(e){c.mask.close();}return o;},getOverlay:function(){return j;},getTrigger:function(){return h;},getClosers:function(){return k;},isOpened:function(){return i;},getConf:function(){return m;}});c.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),function(q,p){if(c.isFunction(m[p])){c(o).on(p,m[p]);}o[p]=function(r){if(r){c(o).on(p,r);}return o;};});k=j.find(m.close||".close");if(!k.length&&!m.close){k=c('<a class="close"></a>');j.prepend(k);}k.click(function(p){o.close(p);});if(m.load){o.load();}}c.fn.overlay=function(e){var f=this.data("overlay");if(f){return f;}if(c.isFunction(e)){e={onBeforeLoad:e};}e=c.extend(true,{},c.tools.overlay.conf,e);this.each(function(){f=new a(c(this),e);d.push(f);c(this).data("overlay",f);});return e.api?f:this;};})(jQuery);(function(e){var c=e.tools.overlay,a=e(window);e.extend(c.conf,{start:{top:null,left:null},fadeInSpeed:"fast",zIndex:9999});function d(g){var h=g.offset();return{top:h.top+g.height()/2,left:h.left+g.width()/2};}var f=function(r,q){var k=this.getOverlay(),o=this.getConf(),i=this.getTrigger(),s=this,t=k.outerWidth({margin:true}),m=k.data("img"),n=o.fixed?"fixed":"absolute";if(!m){var l=k.css("backgroundImage");if(!l){throw"background-image CSS property not set for overlay";}l=l.slice(l.indexOf("(")+1,l.indexOf(")")).replace(/\"/g,"");k.css("backgroundImage","none");m=e('<img src="'+l+'"/>');m.css({border:0,display:"none"}).width(t);e("body").append(m);k.data("img",m);}var j=o.start.top||Math.round(a.height()/2),h=o.start.left||Math.round(a.width()/2);if(i){var g=d(i);j=g.top;h=g.left;}if(o.fixed){j-=a.scrollTop();h-=a.scrollLeft();}else{r.top+=a.scrollTop();r.left+=a.scrollLeft();}m.css({position:"absolute",top:j,left:h,width:0,zIndex:o.zIndex}).show();r.position=n;k.css(r);m.animate({top:r.top,left:r.left,width:t},o.speed,function(){k.css("zIndex",o.zIndex+1).fadeIn(o.fadeInSpeed,function(){if(s.isOpened()&&!e(this).index(k)){q.call();}else{k.hide();}});}).css("position",n);};var b=function(g){var k=this.getOverlay().hide(),j=this.getConf(),i=this.getTrigger(),h=k.data("img"),l={top:j.start.top,left:j.start.left,width:0};if(i){e.extend(l,d(i));}if(j.fixed){h.css({position:"absolute"}).animate({top:"+="+a.scrollTop(),left:"+="+a.scrollLeft()},0);}h.animate(l,j.closeSpeed,g);};c.addEffect("apple",f,b);})(jQuery);(function(b){b.tools=b.tools||{version:"@VERSION"};var e;e=b.tools.expose={conf:{maskId:"exposeMask",loadSpeed:"slow",closeSpeed:"fast",closeOnClick:true,closeOnEsc:true,zIndex:9998,opacity:0.8,startOpacity:0,color:"#fff",onLoad:null,onClose:null}};function f(){if(b.browser.msie){var k=b(document).height(),j=b(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,k-j<20?j:k];}return[b(document).width(),b(document).height()];}function h(j){if(j){return j.call(b.mask);}}var i,d,c,a,g;b.mask={load:function(j,l){if(c){return this;}if(typeof j=="string"){j={color:j};}j=j||a;a=j=b.extend(b.extend({},e.conf),j);i=b("#"+j.maskId);if(!i.length){i=b("<div/>").attr("id",j.maskId);b("body").append(i);}var k=f();i.css({position:"absolute",top:0,left:0,width:k[0],height:k[1],display:"none",opacity:j.startOpacity,zIndex:j.zIndex});if(j.color){i.css("backgroundColor",j.color);}if(h(j.onBeforeLoad)===false){return this;}if(j.closeOnEsc){b(document).on("keydown.mask",function(m){if(m.keyCode==27){b.mask.close(m);}});}if(j.closeOnClick){i.on("click.mask",function(m){b.mask.close(m);});}b(window).on("resize.mask",function(){b.mask.fit();});if(l&&l.length){g=l.eq(0).css("zIndex");b.each(l,function(){var m=b(this);if(!/relative|absolute|fixed/i.test(m.css("position"))){m.css("position","relative");}});d=l.css({zIndex:Math.max(j.zIndex+1,g=="auto"?0:g)});}i.css({display:"block"}).fadeTo(j.loadSpeed,j.opacity,function(){b.mask.fit();h(j.onLoad);c="full";});c=true;return this;},close:function(){if(c){if(h(a.onBeforeClose)===false){return this;}i.fadeOut(a.closeSpeed,function(){h(a.onClose);if(d){d.css({zIndex:g});}c=false;});b(document).off("keydown.mask");i.off("click.mask");b(window).off("resize.mask");}return this;},fit:function(){if(c){var j=f();i.css({width:j[0],height:j[1]});}},getMask:function(){return i;},isLoaded:function(j){return j?c=="full":c;},getConf:function(){return a;},getExposed:function(){return d;}};b.fn.mask=function(j){b.mask.load(j);return this;};b.fn.expose=function(j){b.mask.load(j,this);return this;};})(jQuery);