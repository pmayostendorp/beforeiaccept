define(["jquery","underscore","backbone","utils","pubsub","state","managers/routemanager","managers/autoplay","managers/abtestmanager"],function(t,e,i,r,a,n,o,s,u){var h=i.View.extend({el:"body",initialize:function(){window.appViewEventProxy=a,window.Utils=r,window.siteManager=this,this.DEBUG=r.get("DEBUG"),this.$win=r.get("win"),this.$top=r.get("scrollEl"),this.pubSub={scrollTop:this.scrollTop},a.attach(this.pubSub,this)},start:function(t,i){this.$win.on("resize."+this.cid,e.throttle(function(){a.trigger("resize:app")},50)).trigger("resize"),this.$el.on("click."+this.cid,"a,area",e.bind(this.triggerRoute,this)),this.$el.on("submit."+this.cid,"form.ui-ajax-form",e.bind(this.triggerForm,this)),t&&(window.header=this.header=new t),o.start(i||void 0===i),n.start(this.header),s.start(),u.start()},getHeader:function(){return this.header},scrollTop:function(t,e){return this.header?this.header.scrollTop(t,e):0},stop:function(){this.$el.off("."+this.cid),this.$win.off("."+this.cid),s.stop(),n.stop(),o.stop(),u.stop()},destroy:function(){this.undelegateEvents(),window.header&&delete window.header,delete window.appViewEventProxy,delete window.Utils,a.unattach(this.pubSub,this)},triggerRoute:function(e){var i=t(e.currentTarget),r=t.trim(i.attr("href"));e.isDefaultPrevented()||this._isMetaKey(e)?a.trigger("track",{event:e,url:r}):i.attr("target")?(a.trigger("track",{event:e,url:r}),this._goPopup(i,r)&&e.preventDefault()):r?(e.preventDefault(),o.goTo(r,i.data("trackLabel")||i.data("uotrack")||i.data("ht"),e)):(a.trigger("track",{event:e}),e.preventDefault())},_isMetaKey:function(t){return t.metaKey||t.ctrlKey||t.altKey||2==t.which},_goPopup:function(t,e){var i=t.attr("target");return"_popup"===i||"_blank"===i&&void 0!==t.data("popup")?(r.openPopup(e,t.data("popup-width"),t.data("popup-height")),!0):void 0},triggerForm:function(i){var r=t(i.currentTarget),a=r.data("mapping"),n={},s=r.attr("action");i.isDefaultPrevented()||(a&&(t.each(r.serializeArray(),function(t,e){n[e.name]=e.value}),s+=e.template(a,n)),i.preventDefault(),o.goTo(s,r.data("trackLabel")||r.data("uotrack")||r.data("ht"),i))}});return new h});
//# sourceMappingURL=sitemanager.js
//# sourceMappingURL=sitemanager.js.map