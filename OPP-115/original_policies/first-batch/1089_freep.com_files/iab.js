define(["jquery","underscore","baseview","adLogger","libs/swfobject/swfobject"],function(e,t,i,r){"use strict";var a=i.extend({destroy:function(t){this.$markup&&this.$markup.remove(),this.$iabThirdParty.remove(),this.adData.cleanUpSelectors&&e(this.adData.cleanUpSelectors).remove(),i.prototype.destroy.call(this,t)},render:function(t){if(this.adData=t,this.$el.addClass("iab-risingstar"),this.$(".ad-slot").hide(),"flash"===t.adCreativeType)this.setupFlash(t);else if("image"===t.adCreativeType)this.setupImage(t);else if("third"===t.adCreativeType)return this.setupThirdParty(t);return e.Deferred().resolve()},setupFlash:function(i){var r={clickTag:i.clickUrl+i.clickThruUrl},a={allowscriptaccess:"always",wmode:"transparent"},s=i.flashAttr||{},n=t.uniqueId("flashiab_");this.$markup=e('<div id="'+n+'"></div>'),this.$el.append(this.$markup),window.swfobject&&window.swfobject.embedSWF(i.flashUrl,n,i.width,i.height,"9.0.0",null,r,a,s)},setupImage:function(t){this.$markup=e('<a href="'+t.clickUrl+t.clickThruUrl+'" target="_blank"><img src="'+t.imageUrl+'"></a>'),this.$el.append(this.$markup)},setupThirdParty:function(i){var a=document.createElement("iframe");if(a.id=a.name="google_ads_"+i.dfp.ecid,a.src="about:blank",a.width=i.width||0,a.height=i.height||0,a.width&&a.height||(a.style.display="none"),a.scrolling="no",a.marginWidth=0,a.marginHeight=0,a.frameBorder=0,a.className="iab-iframe",this.$el.append('<div class="iab-third-party"></div>'),this.$iabThirdParty=this.$(".iab-third-party"),this.$iabThirdParty[0].appendChild(a),a.doc=null,a.contentDocument?a.doc=a.contentDocument:a.contentWindow?a.doc=a.contentWindow.document:a.document&&(a.doc=a.document),!a.doc)return r.logError("IAB iFrame failed creation, container must be inserted into DOM before creating the iFrame"),e.Deferred().reject();var s="<!doctype html><head><script>window.template = "+JSON.stringify(i)+"; var inDapIF = true; var gnEbMinZIndex = 1; "+i.extraVars+'</script></head><body><script src="'+i.thirdPartyScript+'"></script><script>'+i.scriptOverrides+"</script></body></html>";return i.fullDump&&(s="<!doctype html><head><script>var inDapIF = true; var gnEbMinZIndex = 1;</script></head><body>"+i.thirdPartyTag+"</body></html>"),a.doc.open(),a.doc.write(s),this.$markup=e(a),e.Deferred(function(e){t.defer(function(){e.resolve()})}).promise()},onResize:function(){},onStopToClose:function(){}});return a});
//# sourceMappingURL=iab.js
//# sourceMappingURL=iab.js.map