var rjsn=(function(){return typeof define==="function"?function(b,a){define(b,[],function(){return a
})
}:function(){}
}());
var optfn=(function(a){return function(b){return typeof b==="function"?b:a
}
}(function(){}));
rjsn("optfn",optfn);
rjsn("slugfn",optfn);
var domev={getElemAt:function(b){var a=function(){};
if(typeof b==="object"&&b){if("target" in b){a=function(c){return c.target
}
}else{if("srcElement" in b){a=function(c){return c.srcElement
}
}}}return(domev.getElemAt=a)(b)
},stopDefaultAt:function(b){var a=function(){};
if(typeof b==="object"&&b){if(b.preventDefault){a=function(c){return c.preventDefault()
}
}else{a=function(c){return c.returnValue=false
}
}}return(domev.stopDefaultAt=a)(b)
},hasElem:function(b,a,c){c=this.getElemAt(b,a);
return a&&c&&(a.isEqualNode(c)||a.contains(c))
}};
rjsn("domev",domev);
var xhrgo=(function(a){a.factories=[function(){return new ActiveXObject("Microsoft.XMLHTTP")
},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")
},function(){return new ActiveXObject("MSXML2.XMLHTTP")
},function(){return new XMLHttpRequest()
}];
a.getHTTPObj=function(b,c){for(c=a.factories.length;
c--;
){b=a.factories[c];
try{if(b()){return b
}}catch(d){continue
}}throw new Error("XMLHttpRequest not supported")
};
a.newRequest=(function(b){return function(){return(b||(b=a.getHTTPObj()))()
}
}());
a.getUriStrAsArgsObj=function(g){var e,h,c,b,d,f={};
f.vanillaUri=g.replace(/\?.*/,"");
f.hash=g.replace(/[^#]*#?/,"");
g=g.replace(/#.*$/,"");
d=(g.match(/\?/))?g.replace(/^[^?]*\?/,""):null;
if(d&&(d=d.split(/&/))){for(b=d.length;
b--;
){c=d[b].split(/=/);
e=c[0];
h=decodeURIComponent(c[1]);
f[e+""]=isNaN(+h)?h:+h
}}return f
};
a.getArgsObjAsUriStr=function(c){var d=[],b=function(g,f){return g>f
};
if(c){for(var e in c){if(c.hasOwnProperty(e)){d.push(e+"="+encodeURIComponent(c[e]))
}}}return d.sort(b).join("&")
};
a.addKeyVal=(function(){var b=":url:join:key=:value";
return function(g,e,d){var f,c;
if(g.match(/\?$|&$/)){f=""
}else{if(g.match(/\?/)){f="&"
}else{f="?"
}}return b.replace(/:url/,g).replace(/:join/,f).replace(/:key/,e).replace(/:value/,d)
}
}());
a.getUniqueIdNum=(function(b){return function(){return b++
}
}(0));
a.getUriAsUnique=(function(e,c,b){Date.now=Date.now||function(){return +new Date
};
e=Date.now();
return function(d){b=e+a.getUniqueIdNum();
return a.addKeyVal(d,"uid",e)
}
}());
a.constructReadyState=function(c,b){return function(){if(c.readyState===4){b(c)
}}
};
a.getTextHTML=function(b,c){var d=a.newRequest();
d.open("GET",b,true);
d.onreadystatechange=a.constructReadyState(d,function(e){if(e.status===200){c(null,e.responseText)
}else{c(e)
}});
d.setRequestHeader("Content-Type","text/html");
d.send()
};
a.quickJSON=function(h,e,g,f,k,b){var m=a.newRequest(),j=b||30000,l=e.valueOf(),i,c,d=function(o,n){if(typeof k==="function"){k(o,n)
}};
m.open(h,l,true);
m.setRequestHeader("Content-Type","application/json");
m.setRequestHeader("Accept","application/json, text/javascript");
if(h.match(/PUT|POST/)&&typeof g==="object"&&g){i=JSON.stringify(g)
}if(f){m.setRequestHeader("Authorization",f)
}m.onreadystatechange=a.constructReadyState(m,function(q){var o,n="success";
clearTimeout(c);
if(q.status===500){return d("Internal Server Error")
}if(q.responseText){try{n=JSON.parse(q.responseText)
}catch(p){n=q.responseText
}}d((q.status===200)?null:q,n)
});
m.send(i);
c=setTimeout(function(){m.abort();
d(m)
},j)
};
a.quickJSONU=function(e,f,g,c,d,b){a.quickJSON(e,a.getUriAsUnique(f),g,c,d,b)
};
return a
}({}));
rjsn("xhrgo",xhrgo);
var lazyload=function(s,o){function a(e,h){var j=o.createElement(e),i;
for(i in h){h.hasOwnProperty(i)&&j.setAttribute(i,h[i])
}return j
}function f(e){var h=n[e],j,i;
if(h){j=h.callback;
i=h.urls;
i.shift();
d=0;
if(!i.length){j&&j.call(h.context,h.obj);
n[e]=null;
g[e].length&&c(e)
}}}function t(){if(!p){var e=navigator.userAgent;
p={async:o.createElement("script").async===true};
(p.webkit=/AppleWebKit\//.test(e))||(p.ie=/MSIE/.test(e))||(p.opera=/Opera/.test(e))||(p.gecko=/Gecko\//.test(e))||(p.unknown=true)
}}function c(q,r,m,l,v){var i=function(){f(q)
},h=q==="css",k,j,e;
t();
if(r){r=typeof r==="string"?[r]:r.concat();
if(h||p.async||p.gecko||p.opera){g[q].push({urls:r,callback:m,obj:l,context:v})
}else{k=0;
for(j=r.length;
k<j;
++k){g[q].push({urls:[r[k]],callback:k===j-1?m:null,obj:l,context:v})
}}}if(!(n[q]||!(e=n[q]=g[q].shift()))){b||(b=o.head||o.getElementsByTagName("head")[0]);
r=e.urls;
k=0;
for(j=r.length;
k<j;
++k){m=r[k];
if(h){m=a("link",{charset:"utf-8","class":"lazyload",href:m,rel:"stylesheet",type:"text/css"})
}else{m=a("script",{charset:"utf-8","class":"lazyload",src:m});
m.async=false
}var u={Version:function(){var w=999;
if(navigator.appVersion.indexOf("MSIE")!=-1){w=parseFloat(navigator.appVersion.split("MSIE")[1])
}return w
}};
if(p.ie&&u.Version()<10){m.onreadystatechange=function(){var w=this.readyState;
if(w==="loaded"||w==="complete"){this.onreadystatechange=null;
i()
}}
}else{if(h&&(p.gecko||p.webkit)){if(p.webkit){e.urls[k]=m.href;
z()
}else{setTimeout(i,50*j)
}}else{m.onload=m.onerror=i
}}b.appendChild(m)
}}}function z(){var e=n.css,h;
if(e){for(h=y.length;
h&&--h;
){if(y[h].href===e.urls[0]){f("css");
break
}}d+=1;
if(e){d<200?setTimeout(z,50):f("css")
}}}var p,b,n={},d=0,g={css:[],js:[]},y=o.styleSheets;
return{css:function(e,h,j,i){c("css",e,h,j,i)
},js:function(e,h,j,i){c("js",e,h,j,i)
}}
}(this,this.document);
rjsn("lazyload",lazyload);
var elemst={up:function(d,b){var c,a="st-"+b,f=(b||"").match(/(\w*(?:-)|\b)(\w*)/)||[],e=f[2],g=f[1]||"";
if(d&&e){c=d.className;
if(!c.match(a)){f=new RegExp("st-("+g+"\\w*)");
if(c.match(f)){d.className=c.replace(f,a)
}else{d.className=c+" "+a
}}}},rm:function(c,a){var b,d=new RegExp("[\b ]st-"+a+"(-\\w*)?");
if(c){b=c.className;
if(b.match(d)){c.className=b.replace(d,"")
}}},is:function(b,a){return(b&&b.className.match("st-"+a))?true:false
}};
rjsn("elemst",elemst);
var domwh=(function(b,c,a){a=document;
b=function(e){var g,f=e?[e.offsetWidth,e.offsetHeight]:[];
if(!f[0]&&e){g=e.style;
if(g.display==="none"){g.display="block";
f=[e.offsetWidth,e.offsetHeight];
g.display="none"
}else{if(g.display===""){g.display="block";
f=[e.offsetWidth,e.offsetHeight];
g.display=""
}}}return f
};
b.window=function(){if(window&&window.innerHeight){c=[window.innerWidth,window.innerHeight]
}else{if((c=a.documentElement)){c=c.clientWidth?c:a.documentBody;
c=[c.clientWidth,c.clientHeight]
}}c.width=c[0];
c.height=c[1];
return c
};
return b
}());
rjsn("domwh",domwh);
var lsn=(function(e,a,d,c){e=document.documentElement;
a=function(){};
function b(f){return/^(?:function|object|unknown)$/.test(typeof f)?true:false
}d={add:(function(f){if(b(e.addEventListener)){f=function(h,i,g){h.addEventListener(i,g,false)
}
}else{if(b(e.attachEvent)){f=function(h,i,g){h.attachEvent("on"+i,function(j){g(j||window.event)
})
}
}}return f||a
}()),rm:(function(f){if(b(e.removeEventListener)){f=function(h,i,g){h.removeEventListener(i,g,false)
}
}else{if(b(e.detachEvent)){f=function(h,i,g){h.detachEvent("on"+i,g)
}
}}return f||a
}())};
c=d.add;
c.rm=d.rm;
return c
}());
rjsn("lsn",lsn);
var bttn=(function(b,a){b={isAllowEvent:false,onClickHook:null,elem:null,addListener:lsn,stopDefaultEvent:function(c){return domev.stopDefaultAt(c)
},hasElem:function(c){var d=this.elem;
return(c&&(d.contains(c)||d.id===c.id))
},isActive:function(){return elemst.is(this.elem,"bttn-active")
},activate:function(){elemst.up(this.elem,"bttn-active")
},deactivate:function(){elemst.up(this.elem,"bttn-inactive")
},switchactivate:function(){if(this.isActive()){this.deactivate()
}else{this.activate()
}},addClickFn:function(c){this.atClickHook.addFn(c)
},handleEvent:function(f,d,c,e){if(f){if(typeof this.isAllowEvent==="function"){return this.isAllowEvent(f,d,c,e)||this.stopDefaultEvent(f)
}else{return this.isAllowEvent||this.stopDefaultEvent(f)
}}},clickFire:function(c){this.atClickHook.fire(c)
},attach:function(){var d=this,c=d.elem;
if(!elemst.is(c,"bttn-active")){elemst.up(c,"bttn-inactive")
}d.addListener(c,"click",function(e){d.clickFire(e);
return d.handleEvent(e)
});
if(d.onFocus){d.addListener(c,"focus",function(e){return d.clickFire(e)
})
}}};
a=function(c){var d=Object.create(b);
d.name=c.name||"";
if(typeof c.elem==="object"){d.elem=c.elem
}else{if(typeof c.elemId==="string"){d.elem=document.getElementById(c.elemId)
}}if(!d.elem){throw new Error("error initializing button: "+c.name+" "+c.elemId)
}d.atClickHook=eventhook.getNew();
if(c.onClick){d.addClickFn(c.onClick)
}if(c.onFocus){d.onFocus=true
}if(c.isAllowEvent!==false){d.isAllowEvent=c.isAllowEvent
}if(c.isAttach!==false){d.attach()
}return d
};
a.proto=b;
return a
}());
rjsn("bttn",bttn);
var lockfncaching=(function(){var a={val:undefined,isActive:false,funcArr:[],callFuncArr:function(e,f,b){var d=this,c=d.funcArr;
d.isActive=false;
while(c.length){c.pop()(e,f,b)
}},cacheVal:function(e,b){var c=this,d=c.val;
c.funcArr.push(e);
if(c.isActive===false){c.isActive=d===undefined;
if(typeof d==="undefined"){b(function(h,g,f){if(h){return c.callFuncArr(h,g,f)
}c.callFuncArr(h,(c.val=g),(c.valb=f))
})
}else{c.callFuncArr(null,d,c.valb)
}}}};
return{getNew:function(){var b=Object.create(a);
b.isActive=false;
b.funcArr=[];
b.val=undefined;
b.valb=undefined;
return function(d,c){b.cacheVal(d,c)
}
},getNamespaceCache:(function(){var b={};
return function(c){return b[c]||(b[c]=this.getNew())
}
}()),getNamespaceNew:function(){var b=this,c;
return function(e,f,d){c=b.getNamespaceCache(e);
c(f,d)
}
}}
}());
rjsn("lockfncaching",lockfncaching);
var lockfnqueuing=(function(){var a={isActive:false,fnArr:[],getValArr:[],callLimit:function(){var c=this,d=c.fnArr,b=c.getValArr;
(function e(g,h,f){h=b.shift();
f=d.shift();
h(function(j,i,k){if(f){f(j,i,k)
}if(b.length){e(b.length)
}else{c.isActive=false
}})
}(b.length))
},queueAdd:function(c,d){var b=this;
b.fnArr.push(c);
b.getValArr.push(d);
if(b.isActive===false){b.isActive=true;
b.callLimit()
}}};
return{getNew:function(){var b=Object.create(a);
b.isActive=false;
b.fnArr=[];
b.getValArr=[];
return function(c,d){b.queueAdd(c,d)
}
}}
}());
rjsn("lockfnqueuing",lockfnqueuing);
var lockfnrebounding=(function(){var a={flag:false,go:function(c){var d=this,b=d.flag;
if(b===false){d.flag=true;
c(function(){d.flag=false
})
}}};
return{getNew:function(){var b=Object.create(a);
b.flag=false;
return function(c){b.go(c)
}
}}
}());
rjsn("lockfnrebounding",lockfnrebounding);
var lockfnthrottling=(function(){var a={ms:500,timer:null,lastFn:null,throttledFn:function(b){var c=this;
if(c.timer){c.lastFn=b
}else{c.timer=setTimeout(function(){if(c.lastFn){c.lastFn();
c.lastFn=null
}clearTimeout(c.timer);
c.timer=null
},c.ms);
b()
}}};
return{getNew:function(b){var c=Object.create(a);
c.ms=b.ms||500;
c.timer=null;
c.lastFn=null;
return function(d){c.throttledFn(d)
}
}}
}());
rjsn("lockfnthrottling",lockfnthrottling);
var lockfn={Queuing:lockfnqueuing,Caching:lockfncaching,Rebounding:lockfnrebounding,Throttling:lockfnthrottling};
rjsn("lockfn",lockfn);
var eventhook=(function(){var a=0;
var b={fnArr:[],addFn:function(c){if(typeof c==="function"){c.oname="fn"+ ++a;
this.fnArr.push(c)
}},rmFn:function(c){var d=c.oname;
if(typeof c==="function"){this.fnArr=this.fnArr.filter(function(e){return e.oname!==d
})
}},fire:function(d,c,f,e){this.fnArr.map(function(g){g(d,c,f,e)
})
}};
return{proto:b,getNew:function(){var c=Object.create(b);
c.fnArr=[];
return c
}}
}());
rjsn("eventhook",eventhook);
var screenpop=(function(c,b,a){a=function(d){if(typeof d==="function"){d(null,"")
}};
c={count:0,uid:0,hintSize:20,throttlefn:lockfn.Throttling.getNew({ms:500}),elemst:elemst,domwh:domwh,lsn:lsn,onShutHook:a,onOpenHook:a,onRenderHook:a,isOpen:function(){return this.getLayerElem()&&this.elemst.is(this.getLayerElem(),"screen-show")
},isShut:function(){return !this.isOpen()
},onShut:function(d){this.onShutHook=d;
return this
},onOpen:function(d){this.onOpenHook=d;
return this
},onRender:function(d){this.onRenderHook=d;
return this
},createDiv:function(f,d){var e=document.createElement("div");
if(typeof f==="string"){e.className=f;
e.id=(d||"")+f
}return e
},connect:function(){var d=this;
d.lsn(document,"keydown",function(f){if(f&&f.keyCode===27){b.shut()
}});
d.lsn(window,"resize",function(f){d.throttlefn(function(){b.center()
})
});
d.lsn(window,"scroll",function(f){d.throttlefn(function(){b.centerVert()
})
})
},getLoadElemStr:function(){return""
},getLayersElem:function(){var d=this;
return document.getElementById("sp-layers")||(function(f,g){f=d.createDiv("sp-layers");
d.container.appendChild(f);
d.connect();
return f
}())
},createLayerElem:function(){var g=this,e=g.uid,f=g.createDiv("sp-layers-layer",e),h=g.createDiv("sp-layers-layer-screen",e),d=g.createDiv("sp-layers-layer-content",e),i=g.createDiv("sp-layers-layer-load",e);
i.innerHTML=g.getLoadElemStr();
f.appendChild(h);
f.appendChild(i);
f.appendChild(d);
if(typeof $==="function"){$(f).on("click",function(j){if(j.target&&j.target.id){if(j.target.id===f.id||j.target.id===h.id||j.target.id===i.id){g.shut()
}}})
}else{lsn(f,"click",function(k){var j=domev.getElemAt(k);
if(j&&j.id){if(j.id===f.id||j.id===h.id||j.id===i.id){g.shut()
}}})
}return f
},getLayerElem:function(){return document.getElementById(this.uid+"sp-layers-layer")||this.createLayerElem()
},getContentElem:function(){return document.getElementById(this.uid+"sp-layers-layer-content")
},getLoadElem:function(){return document.getElementById(this.uid+"sp-layers-layer-load")
},getScroll:function(){return window.pageYOffset||document.body.scrollTop
},getContentT:function(){var d=this.getContentElem(),e;
if(d){e=d.style.margin.match(/^\d*/);
if(e){e=parseFloat(e[0]);
e=isNaN(e)?null:e
}}return e
},center:function(){var i=this,f=i.getContentElem(),e,h,g,d;
if(f){e=i.domwh(f);
h=i.domwh.window();
g=(h[1]-e[1])/2;
d=(h[0]-e[0])/2;
if(g<0){g=0
}g=g+i.hintSize;
f.style.margin=":tpx :rlpx 0".replace(/:t/,g+i.getScroll()).replace(/:rl/gi,d)
}return i
},centerVert:function(){var g=this,f=g.getContentElem(),d,i,e,h,k,j,l;
if(f){d=g.domwh(f)[1];
i=g.domwh.window()[1];
l=g.getContentT();
k=g.getScroll();
e=(i-d)/2;
if(l+d-g.hintSize<=k){j=k-d+g.hintSize
}else{if(l>=k&&e+k<l){j=(e>0)?e+k:k
}}if(typeof j==="number"){f.style.marginTop=":tpx".replace(/:t/,j)
}}},replaceContent:function(e){var d=this.getContentElem();
if(d){if(typeof e==="string"){d.innerHTML=e
}else{if(typeof e==="object"&&e&&"tagName" in e){d.appendChild(e)
}}}},pop:function(e){var f=this,g,d=function(i,h){if(typeof e==="function"){e(i,h)
}};
b.shut();
b.screenobjLast=this;
g=f.getLayerElem();
f.elemst.up(g,"screen-load");
f.getLayersElem().appendChild(g);
f.onRenderHook(f,function(i,h){if(i){return d(i)
}f.replaceContent(h);
f.center();
f.open()
});
return f
},open:function(){var d=this;
d.center();
d.elemst.up(d.getLayerElem(),"screen-show");
d.onOpenHook(d);
return d
},load:function(){var d=this;
d.center();
d.elemst.up(d.getLayerElem(),"screen-load")
},shut:function(){var d=this;
d.elemst.up(d.getLayerElem(),"screen-hide");
d.onShutHook(d)
},rm:function(){var d=this.getLayerElem();
if(d){d.parentNode.removeChild(d)
}},clear:function(){this.replaceContent("")
}};
b=function(e){var d=Object.create(c);
d.uid=(e&&e.uid)?e.uid:++c.count;
d.onShutHook=a;
d.onOpenHook=a;
d.onRenderHook=a;
d.container=document.body;
if(e){if(typeof e.hintSize==="number"){d.hintSize=e.hintSize
}if(typeof e.loadElemStr==="string"){d.getLoadElemStr=function(){return e.loadElemStr
}
}}return d
};
b.proto=c;
b.screenobjLast=null;
b.shut=function(){var d=this.screenobjLast;
if(d){d.shut()
}};
b.rm=function(){var d=this.screenobjLast;
if(d){d.rm()
}};
b.center=function(){var d=this.screenobjLast;
if(d){d.center()
}};
b.centerVert=function(){var d=this.screenobjLast;
if(d){d.centerVert()
}};
b.isOpen=function(){var d=this.screenobjLast;
return d&&d.isOpen()
};
return b
}());
rjsn("screenpop",screenpop);
var juicycookie=(function(){var a={name:"",value:"",expires:"",path:"/",secure:false,domain:".defaultdomain.com",setDocCookieStr:function(b){document.cookie=b
},getDocCookieStr:function(){return document.cookie
},getUrlAsDomainStr:function(b){var c="",d;
if(b){c=b;
if(b!=="localhost"){if((d=b.match(/\d*\.\d*\.\d*\.\d*$/))){c=d[0]
}else{if((d=b.match(/\w*\.\w*$/))){c="."+d[0]
}}}}return c
},getAsCookieStr:function(){var b=this,c=b.name+"="+escape(b.value);
c+=b.expires?";expires="+(new Date(b.expires)).toGMTString():"";
c+=b.domain?";domain="+b.domain:"";
c+=b.path?";path="+b.path:"";
c+=b.secure?";secure":"";
return c
},setDomain:function(b){var c=this;
if(typeof b==="string"){c.domain=b
}else{if(typeof location==="object"){c.domain=c.getUrlAsDomainStr(location.hostname)
}}},setName:function(b){if(typeof b==="string"){this.name=b
}},getAsCrumbStr:function(b){var d="",c=typeof b;
if(c==="object"){d=JSON.stringify(b)
}else{if(c==="string"){d=b.replace(/,*$/,"")
}else{if(c==="number"){d=b
}}}return d
},setValue:function(b){return this.value=this.getAsCrumbStr(b)
},setExpires:function(d){var b="",c=0;
if(d instanceof Date){b=d
}else{if(typeof d==="number"){b=d
}else{if(typeof d==="object"&&d){if(typeof d.y==="number"){c+=d.hh*22118400000
}if(typeof d.m==="number"){c+=d.m*2592000000
}if(typeof d.d==="number"){c+=d.d*86400000
}if(typeof d.hh==="number"){c+=d.hh*3600000
}if(typeof d.mm==="number"){c+=d.mm*60000
}if(typeof d.ss==="number"){c+=d.ss*1000
}if(typeof d.ms==="number"){c+=d.ms
}b=new Date(Date.now()+c)
}}}return this.expires=b
},persist:function(){var c=this,b=c.getAsCookieStr();
return c.setDocCookieStr(b)
},rm:function(){var b=this;
b.expires=new Date(0);
return b.persist()
}};
return{prototype:a,getNew:function(b,d,e){var c=Object.create(a);
e=e||{};
c.setName(b);
c.setValue(d);
c.setExpires(e.expires);
c.setDomain(e.domain);
c.path=e.path||"/";
c.secure=e.secure||false;
return c
},persist:function(c,d,e){var b=this.getNew(c,d,e);
return b.persist()
},getAllObj:function(){var f=Object.create(a),b,d,e=f.getDocCookieStr().split("; "),c={};
for(b=e.length;
b--;
){d=e[b].split("=");
c[d[0]]=unescape(d[1])
}return c
},getExisting:function(f){var e=Object.create(a),b,c,d=document.cookie.split("; ");
e.name=f||e.name;
for(b=d.length;
b--;
){c=d[b].split("=");
if(c[0]===e.name){e.value=unescape(c[1]);
return e
}}return null
},rm:function(e){var f=this,d,c,b;
f.getNew(e,"",{domain:""}).rm();
if(typeof location==="object"){d=location.hostname;
c=d.split(".");
for(b=c.length;
b-->1;
c=c.slice(1)){f.getNew(e,"",{domain:"."+c.join(".")}).rm()
}}},getValue:function(b){var c=this.getExisting(b),d=null;
if(c){d=c.value
}return d
}}
}());
rjsn("juicycookie",juicycookie);
var pathjoin=(function(a){a=function(){var c=arguments,b=c.length,d=c[b-1].match(/\/$/)?"/":"";
while(b--){d=(!b||c[b].match(/^\//)?"":"/")+c[b].replace(/\/$/,"")+d
}return d
};
a.join=a;
return a
}());
rjsn("pathjoin",pathjoin);
var jrlfconfig=(function(a,b){a=(function(c){return c.origin||c.protocol+"//"+c.hostname+(c.port?":"+c.port:"")
}(window.location)),b=/(msn|www|beta|stg.?)\.foxsports\.com/.test(a)?false:true;
return{baseUrl:a,isStaging:b,isProduction:!b,paths:{JRLFprofileEditPath:"/account/profile-settings#loc=account_settings",JRLFprofileViewPath:"/account/profile-settings#loc=account_settings"},path_jrlf:"/etc/designs/fsdigital/foxsports/scripts/jrlf/source/iframes",urls:{accountlogin:"/account/login",accountsettings:"/account/settings",accountprofile:"/account/profile",backplanesso:"/content/fsdigital/fscom/account/backplane-sso.html",captureClient:"https://d7v0k4dt27zlp.cloudfront.net/assets/capture_client.js",janrainCapture:b?"https://fox-sports.dev.janraincapture.com":"https://signup.foxsports.com"},getOnBaseUrl:function(c){return pathjoin(this.baseUrl,c)
},getOnBaseJRLFUrl:function(c){return this.getOnBaseUrl(pathjoin(this.path_jrlf,c))
},getRedirectHTMLUrl:function(){return this.getOnBaseUrl(jrlfconfig.urls.backplanesso)
},getXdcommHTMLUrl:function(){return this.getOnBaseJRLFUrl("xdcommHTML.html")
},getJRLFProfileEditUrlStr:function(){return pathjoin("http://foxsports.com",this.paths.JRLFprofileEditPath)
},getJRLFProfileViewUrlStr:function(){return pathjoin("http://foxsports.com",this.paths.JRLFprofileViewPath)
},configCacheFn:lockfn.Caching.getNew(),getJanrainConfig:function(c){var d=this;
d.configCacheFn(c,function(e){xhrgo.quickJSON("GET","/bin/platform/janrainconfig",null,null,function(g,f){if(g){return e(g)
}d.urls.ssoserver=f.janrainSSOServer;
d.urls.janrainCapture=f.janrainSiteAccountDomain;
d.busName=f.janrainBusName;
d.sso_server=f.janrainSSOServer;
d.application_id=f.janrainAppId;
d.client_id=f.janrainSiteClientId;
d.redirect_uri=d.getRedirectHTMLUrl();
d.xd_receiver=d.getXdcommHTMLUrl();
e(g,d)
})
})
}}
}());
rjsn("jrlfconfig",jrlfconfig);
var jrlfbackplanesso={backplaneIdentityURL:"http://backplane1.janrainbackplane.com/identity-services.js",backplaneURL:"http://d134l0cdryxgwa.cloudfront.net/backplane.js",ssoURL:"https://d1v9u0bgi1uimx.cloudfront.net/sso.js",ssoIFrameId:"SSOIframeElem",getSSOIFrameElem:function(){return document.getElementById(this.ssoIFrameId)
},baseUrl:(function(a){return a.origin||a.protocol+"//"+a.hostname+(a.port?":"+a.port:"")
}(window.location)),getOnBaseUrl:function(a){return pathjoin(this.baseUrl,a)
},getOnBaseJRLFUrl:function(a){return this.getOnBaseUrl(pathjoin("/etc/designs/fsdigital/foxsports/scripts/jrlf/source/iframes/",a))
},getInitIFrame:function(){return this.getOnBaseUrl(jrlfconfig.urls.backplanesso+"#initiframe")
},getLogoutIFrame:function(){return this.getOnBaseUrl(jrlfconfig.urls.backplanesso+"#logoutiframe")
},loadBackplane:function(a){var b=this;
lazyload.js([b.backplaneURL],function(){lazyload.js([b.backplaneIdentityURL],function(){a(null,Backplane)
})
})
},getJanrainSSO:function(){var b=this.getSSOIFrameElem(),a,c;
try{if(b){a=b.contentWindow;
if(typeof a.JANRAIN==="object"&&typeof a.JANRAIN.SSO==="object"){c=a.JANRAIN.SSO
}}}catch(d){console.log("[!!!] getJanrainSSO: ",d)
}return c
},getRefreshToken:function(a,b){var c=this,d=c.getJanrainSSO();
b=optfn(b);
if(!a){return b("[!!!] getRefreshToken: no refresh token.")
}if(!d){return b("[!!!] getRefreshToken: no janrainSSO.")
}c.onRefreshToken=function(e){if(!e||!e.accessToken){return b(e)
}b(null,e.accessToken)
};
CAPTURE.log("[...] CAPTURE.getRefreshToken()");
d.CAPTURE.refresh_token("window.parent.jrlfbackplanesso.onRefreshToken")
},init:function(b,c){var d=this,a;
a=document.createElement("div"),a.id="SSOElem";
document.body.appendChild(a);
d.initcomplete=function(g,f,e){c(g,f,e)
};
d.loadBackplane(function(){jrlftpl.addIFrame(a,{id:d.ssoIFrameId,src:d.getInitIFrame()})
})
},initiframe:function(){var a=this;
lazyload.js([a.ssoURL],function(){var c=window.top,b=c.Backplane;
jrlfconfig.getJanrainConfig(function(e,d){if(e){return console.log(e)
}if(typeof b==="function"){b.init({serverBaseURL:"http://backplane1.janrainbackplane.com/v1.2",busName:d.busName,initFrameFilter:b.identityServices.init,cacheMax:5});
b(function(){JANRAIN.SSO.CAPTURE.check_login({response_type:"token",sso_server:d.sso_server,client_id:d.client_id,bp_channel:b.getChannelID(),redirect_uri:d.redirect_uri,xd_receiver:d.xd_receiver,logout_uri:a.getLogoutIFrame()});
if(typeof window.top.jrlf==="object"){window.top.jrlfbackplanesso.initcomplete(null,b,d)
}})
}})
})
},logoutiframe:function(){juicycookie.rm("janrainToken");
juicycookie.rm("janrainProfile");
juicycookie.rm("backplane-channel");
juicycookie.rm("janrain_sso_checked__html_janrain_xdcomm.html");
juicycookie.rm("janrainTokenRefresh");
if(/\fantasy\//.test(window.top.location.href)){jrlftopload()
}}};
var jrlftpl={popcache:null,popcontentId:"ContentIFramePopParent",contentId:"ContentIFrameParent",popTPL:'<div class="jrlf-pop pop">  <div class="pop-header">    <a id="CloseLink" class="pop-header-close">      <span class="pop-header-close-sprite"></span>    </a>  </div>  <div class="pop-content">    <div id="ContentPop">:content</div>  </div></div>',TPL:'<div class="jrlf-pop-content pop-content">  <div id="SubHeaderElem" class="header">    <span class="header-label">:title</span>  </div>  <div id="ContentIFrameParent" style="min-width::width;">:content</div>  <div class="jrlf-pop-content-footer">    <ul class="jrlf-pop-content-list">      <li class="jrlf-pop-content-list-item">        <a class="jrlf-pop-content-list-item-link" target="_blank" href="http://foxsports.com/whats-shared">          <span>What\'s Shared</span>        </a>      </li>      <li class="jrlf-pop-content-list-item">|</li>      <li class="jrlf-pop-content-list-item">        <a class="jrlf-pop-content-list-item-link" target="_blank" href="http://foxsports.com/terms-of-use">          <span>Terms of Use</span>        </a> <span class="jrlf-pop-content-list-item-span"> and</span>        <a class="jrlf-pop-content-list-item-link" target="_blank" href="http://foxsports.com/privacy-policy">          <span>Privacy Policy</span>        </a>      </li>      <li class="jrlf-pop-content-list-item" style="visibility:hidden;">|</li>      <li class="jrlf-pop-content-list-item help">        <a class="jrlf-pop-content-list-item-link" target="_blank" href="http://foxsports.custhelp.com/app/answers/list/p/176">          <span>Need Help?</span>        </a>      </li>    </ul>  </div></div>',render:function(a,b){return a.replace(/:width/,b.width||0).replace(/:title/,b.title||"").replace(/:content/,b.content||"")
},getContentElem:function(){return document.getElementById(this.contentId)
},getPopContentElem:function(){return document.getElementById(this.popcontentId)
},getPopHTML:function(){return this.popTPL.replace(/:content/,this.TPL)
},getHTML:function(){return this.TPL
},getRenderedPopHTML:function(a){return this.render(this.getPopHTML(),a)
},getRenderedHTML:function(a){return this.render(this.getHTML(),a)
},close:function(){screenpop.shut()
},center:function(){screenpop.center()
},refresh:function(){screenpop.center()
},remove:function(){screenpop.shut()
},addIFrame:function(d,c,b,e){var a=document.createElement("IFRAME");
if(d){d.innerHTML="";
d.appendChild(a);
optfn(e)();
a.onload=function(){optfn(b)(null,"success")
};
a.id=c.id||"JanrainIFrame";
a.className="appIframe";
a.frameBorder="no";
if(typeof c.height==="string"){a.height=c.height
}if(typeof c.width==="string"){a.width=c.width
}a.setAttribute("src",c.src);
a.setAttribute("frameborder","0");
a.setAttribute("border","0");
a.scrolling="no"
}},pop:function(a,b){var c=this;
if(c.popcache&&c.popcache.getContentElem()){b(null,c.popcache.open())
}else{c.popcache=screenpop({hintSize:80}).onRender(function(d,e){e(null,c.getRenderedPopHTML(a||{}))
}).onOpen(function(d){var e=document.getElementById("CloseLink");
if(e){e.onclick=function(){d.shut()
};
b(null,d)
}}).pop().center()
}},show:function(d,c,a){var b=this;
if(d){d.innerHTML=b.getRenderedHTML(c||{});
b.addIFrame(b.getContentElem(),c,a)
}},showpop:function(d,a){var c=this,b=optfn(a);
screenpop.shut();
c.pop(d,function(f,e){if(f){return null
}e.center();
if(!e.isOpen()){e.open()
}e.center();
b(null,e)
})
},showpopIFrame:function(d,a){var c=this,b=optfn(a);
c.showpop(d,function(g,f){var e=c.getContentElem();
if(e){f.center();
c.addIFrame(e,d,function(){f.center();
b(null,"success")
},function(){f.center()
})
}})
},showpopHTML:function(d,a){var c=this,b=optfn(a);
c.showpop(d,function(g,f){var e=c.getContentElem();
if(e){e.innerHTML=d.content
}f.center()
})
}};
rjsn("jrlftpl",jrlftpl);
var jrlfcapture=(function(){var d="V3",a="V2",b=a;
var c={callbacks:{},config:{},cookieExpireDays:30,jsonpCache:{},onEmailVerifiedHook:{},onUserUpdatedDataHook:{},onUserSigninFinishHook:{},onGetUserDataFinishHook:{},onSessionInvalidatedHook:{},url_signin:"/oauth/signin",url_acct_profile:"/oauth/public_profile",url_acct_settings:"/oauth/profile",url_acct_email:"/oauth/profile_email_preferences_fox_sports",url_reglight:"/oauth/profile_short_fscom",url_pass_recover:"/oauth/recover_password",url_pass_change:"/oauth/profile_change_password",url_terms_of_use:"/oauth/post_login_confirmation",url_resend_verify:"/oauth/resend_verification_email",url_userdata:"/entity",getUserToken:function(){return juicycookie.getValue("janrainToken")||""
},isShowLog:false,log:function(f,e,h,g){if(this.isShowLog){console.log(f,e,h,g)
}},resize:function(e){screenpop.center()
},getBackplaneChannelId:function(){if(typeof Backplane==="function"){return Backplane.getChannelID()
}},getUserDataObj:function(){var h=juicycookie.getValue("janrainProfile"),g=null;
if(h){try{g=JSON.parse(h)
}catch(f){CAPTURE.log("[!!!] PkCapture: could not parse user data.")
}}return g
},isUserValidated:function(f){var e,g=false;
if(f){g=f.emailVerified
}return g
},setJanrainProfileObj:function(e){juicycookie.persist("janrainProfile",JSON.stringify(e),{expires:{d:30}})
},getRefreshToken:function(f){var g=this,e=juicycookie.getValue("janrainTokenRefresh");
jrlfbackplanesso.getRefreshToken(e,function(i,h){if(i){return f(i)
}g.createSession(h,function(k,j){return f(null,h)
})
})
},getSyncToken:function(f){var g=this,h=juicycookie.getValue("janrainToken"),e=g.getWISVal();
f=optfn(f);
if(g.isLoggedIn()){if(h&&e){f(null,h)
}else{g.getRefreshToken(f)
}}else{f("[...] CAPTURE.getSyncToken: session inactive")
}},getSigninUrlParamStr:function(g){var f=this,e=f.config,h;
h={bp_channel:f.getBackplaneChannelId(),client_id:e.client_id,redirect_uri:e.redirect_uri+(g||""),response_type:e.response_type,xd_receiver:e.xd_receiver};
return xhrgo.getArgsObjAsUriStr(h)
},getSigninUrlStr:function(h){var g=this,e=g.config,f=pathjoin(e.capture_server_url,this.url_signin);
return f+"?"+g.getSigninUrlParamStr(h)
},getPublicProfilePageUrlStr:function(g){var e=this.config,f=pathjoin(e.capture_server_url,this.url_acct_profile),h={};
return f+"?"+xhrgo.getArgsObjAsUriStr(h)
},getPrivateProfilePageUrlStr:function(){var e=this.config,f=pathjoin(e.capture_server_url,this.url_acct_settings),g=juicycookie.getValue("janrainToken"),h={};
if(!g){return this.invalidateSession()
}h={client_id:e.client_id,xd_receiver:e.xd_receiver,access_token:g,flags:"stay_in_window",callback:"CAPTURE.userUpdatedData",callback_payload:"1"};
return f+"?"+xhrgo.getArgsObjAsUriStr(h)
},getResetPasswordModalUrl:function(){var g=this,e=g.config,f=pathjoin(e.capture_server_url,this.url_pass_recover),h={};
h={bp_channel:g.getBackplaneChannelId(),client_id:e.client_id,flags:"stay_in_window",redirect_uri:e.redirect_uri,response_type:"token",xd_receiver:e.xd_receiver};
return f+"?"+xhrgo.getArgsObjAsUriStr(h)
},getChangeProfilePasswordModalUrl:function(g){var h=this,e=h.config,f=pathjoin(e.capture_server_url,this.url_pass_change),i={};
i={access_token:g,callback:"CAPTURE.userResetPasswordFinish",callback_payload:1,client_id:e.client_id,flags:"stay_in_window",xd_receiver:e.xd_receiver};
return f+"?"+xhrgo.getArgsObjAsUriStr(i)
},getEmailVerificationURL:function(){var h=this,e=this.config,g="/bin/platform/janrainApi",f=juicycookie.getValue("janrainToken"),i={};
i={apiCall:h.url_resend_verify,access_token:f,callback_payload:"1",redirect_uri:e.redirect_uri,client_id:e.client_id,flags:"stay_in_window",xd_receiver:e.xd_receiver};
return g+"?"+xhrgo.getArgsObjAsUriStr(i)
},getProfileEmailPageUrlStr:function(){var e=this.config,f=pathjoin(e.capture_server_url,this.url_acct_email),g=juicycookie.getValue("janrainToken"),h={};
if(!g){return this.invalidateSession()
}h={access_token:g,callback:"CAPTURE.userUpdatedData",callback_payload:"1",client_id:e.client_id,flags:"stay_in_window",xd_receiver:e.xd_receiver};
return f+"?"+xhrgo.getArgsObjAsUriStr(h)
},setJanrainToken:function(g){var i=this,f=new Date(),h=30*24*60*60*1000,e=i.cookieExpireDays;
f.setTime(f.getTime()+h);
juicycookie.persist("janrainToken",g,{expires:{mm:350}});
if(!juicycookie.getValue("janrainTokenRefresh")){juicycookie.persist("janrainTokenRefresh",f.getTime(),{expires:{d:30}})
}},wiscookiename:(jrlfconfig.isStaging?"q":"p")+"WHATIFSPORTS",getWISVal:function(){return juicycookie.getValue(this.wiscookiename)
},delPartnerCookies:function(){var e=jrlfconfig.isStaging?"q":"p";
juicycookie.rm(e+"LMD");
juicycookie.rm(e+"ALERTED");
juicycookie.rm(e+"ExternalUser");
juicycookie.rm(e+"ENC_EMAIL");
juicycookie.rm(e+"ENC_FNAME");
juicycookie.rm(e+"ENC_LNAME");
juicycookie.rm(e+"FANTASYMOGULS");
juicycookie.rm(e+"WHATIFSPORTS");
juicycookie.rm(e+"OPENSPORTS");
juicycookie.rm(e+"STATS");
juicycookie.rm(e+"CleverTV");
juicycookie.rm(e+"UID");
juicycookie.rm(e+"ONESITE")
},setPartnerCookies:function(m){var k=this,l=k.config,h=l.capture_server_url,n=juicycookie.getValue("janrainToken"),f=l.application_id;
var g="/bin/platform/setPartnerCookie",j,e;
var i=JSON.stringify(["uuid","photos","photo_approval_status","displayName","gender","email","givenName","familyName","lastUpdated","primaryAddress.address1","primaryAddress.address2","primaryAddress.city","primaryAddress.stateAbbreviation","primaryAddress.zip","primaryAddress.country","FSCOM.USER_ID","FSCOM.BIRTH_YEAR","FSCOM.MONTH_CODE","FSCOM.DATE_CODE","FSCOM.PHONE","FSCOM.SCREENNAME","FSCOM.PUID","FSCOM.VERIFIED","FSCOM.REG_REF_CODE"]);
j={capture_server_url:h,access_token:n,application_id:l.application_id,attributes:i,jsonp:"CAPTURE.finishCreateSession"};
e=g+"?"+xhrgo.getArgsObjAsUriStr(j);
xhrgo.quickJSON("POST",e,null,null,optfn(m))
},getCachedPartnerCookies:function(f){var g=this,e=g.getWISVal();
if(e){f(null,e)
}else{g.setPartnerCookies(function(i,h){if(i){return f(i)
}f(null,g.getWISVal())
})
}},checking:false,checkToken:function(){var f=this;
if(!f.checking){f.checking=true;
(function e(){if(f.isLoggedIn()){f.getSyncToken(function(h,g){CAPTURE.log("checkToken: ",h,g)
})
}setTimeout(e,60000)
}())
}},fromRedirectHTMLCreateSession:function(f,e){if(f||!e||!e.accessToken){console.log("[!!!] fromRedirect: ",f||e)
}else{if(typeof e.accessToken==="string"&&e.accessToken){this.createSession(e.accessToken)
}}},getCachedJanrainProfile:function(e){var f=this,g=f.getUserDataObj();
if(g){e(null,g)
}else{f.getUserData(function(i,h){if(i){return e(i)
}f.setJanrainProfileObj(h);
e(null,h)
})
}},createSession:function(g,e){var f=this;
if(!g){throw new Error("no token")
}e=optfn(e);
screenpop.shut();
f.setJanrainToken(g);
f.getCachedPartnerCookies(function(i,h){if(i){return e(i)
}f.getCachedJanrainProfile(function(k,j){if(k){return e(k)
}f.onGetUserDataFinishHook.fire(j);
e(null,j)
})
})
},getUserDataUrlStr:function(){var h=this,e=h.config,j={},g=pathjoin(e.capture_server_url,h.url_userdata),f=h.getUserToken();
var i=JSON.stringify(["uuid","FSCOM.AVATARS","FSCOM.photo_approval_status","birthday","post_login_confirmation","emailVerified","FSCOM.SCREENNAME","FSCOM.VERIFIED","email","givenName"]);
j={access_token:f,application_id:e.application_id,attributes:i};
return g+"?"+xhrgo.getArgsObjAsUriStr(j)
},reqCaptureUserData:function(f){var g=this,e=g.getUserDataUrlStr();
g.jsonp(e,function(h){if(typeof h!=="object"||!h){return f("[!!!] PkCapture.getUserData: invalid janrain response")
}if(h.error){g.invalidateSession()
}if(h.error){return f(h.error)
}if(!h.result){return f("[!!!] PkCapture.getUserData: invalid janrain response")
}f(null,h.result)
})
},getUserData:function(e){var f=this;
f.reqCaptureUserData(function(h,g){if(h){return e(h)
}e(null,f.getCaptureUserObjAsUserObj(g))
})
},userUpdatedData:function(g){var f=CAPTURE,e=juicycookie.getValue("janrainToken");
if(e){f.getUserData(function(i,h){if(i){return CAPTURE.log(i)
}f.onUserUpdatedDataHook.fire(h)
})
}},userResetPasswordFinish:function(){window.top.CAPTURE.invalidateSession();
top.window.location.href=jrlfconfig.baseUrl
},token_expired:function(){},getSelectPhoto:function(g,f){if(g){for(var e=g.length;
e--;
){if(g[e].type==f){return g[e].value
}}}return null
},displayNameFinal:function(g,f,e){if(typeof g==="string"){if(g.match(/null/i)){return f
}else{return g
}}else{return e
}},getCaptureUserObjAsUserObj:function(e){var f=this;
return{uuid:e.uuid,displayName:f.displayNameFinal(e.givenName,e.FSCOM.SCREENNAME,e.email),profilePhoto:f.getSelectPhoto((e.FSCOM.AVATARS||[]),"square_thumbnail"),avatarApprovalStatus:e.FSCOM.photo_approval_status,birthday:e.birthday,verified:e.post_login_confirmation,email:e.email,emailVerified:e.emailVerified,fsLegacyEmailVerified:e.FSCOM.VERIFIED||"",photoApprovalStatus:e.FSCOM.photo_approval_status,fsLiveFyreScreenName:e.FSCOM.SCREENNAME}
},invalidateSession:function(){var e=this,f=jrlfbackplanesso.getJanrainSSO();
juicycookie.rm("backplane-channel");
juicycookie.rm("janrainToken");
juicycookie.rm("janrainProfile");
juicycookie.rm("janrainTokenRefresh");
juicycookie.rm("janrainSSO_session");
juicycookie.rm("janrainSSO_session");
e.delPartnerCookies();
Backplane.resetCookieChannel();
if(f){f.CAPTURE.logout({sso_server:e.config.sso_server},function(h,g){e.onSessionInvalidatedHook.fire()
})
}else{e.onSessionInvalidatedHook.fire()
}},closeModal:function(){screenpop.shut()
},isLoggedIn:function(){return juicycookie.getValue("janrainTokenRefresh")?true:false
},showpop_login:function(e){if(b===d){return janrain.capture.ui.modal.open()
}var f=this,g=f.getSigninUrlStr();
jrlftpl.showpopIFrame({src:g,title:"SIGN IN",width:"320px",height:"550px"})
},showpop_completeEmailVerification:function(){var g=this,f=CAPTURE.getUserDataObj(),e="your email";
if(typeof f==="object"&&f&&f.email){e=f.email
}else{if(typeof f==="object"&&f&&f.displayName){e=f.displayName
}}var i=CAPTURE.getEmailVerificationURL();
var h={jrtoken:juicycookie.getValue("janrainToken")};
xhrgo.quickJSON("GET",i,h,null,function(){CAPTURE.log("emailSent!")
});
jrlftpl.showpopHTML({title:"VERIFY EMAIL",content:'<div class="dialogue ok">  <p>We\'ve sent an email with instructions to <br />  <b class="centered-content">'+e+'</b><br />  Please check your inbox and click the link to complete the verification.</p>  <span class="centered-content"><a id="CaptureDoneElem" class="done" href="#">Done</a></span></div>',width:"320px"},function(){bttn({elemId:"CaptureDoneElem",onClick:function(){screenpop.shut()
}})
})
},showpop_emailIsVerified:function(){CAPTURE.getUserData(function(i,h){if(i){return CAPTURE.log(i)
}juicycookie.persist("janrainProfile",JSON.stringify(h),{expires:{d:30}})
});
var g=this,f=CAPTURE.getUserDataObj(),e="your email";
if(typeof f==="object"&&f&&f.displayName){e=f.displayName
}jrlftpl.showpopHTML({title:"EMAIL VERIFIED",content:'<div class="dialogue ok">\n<p><b>Thank You! Your email has been verified.</b></p><br /><span class="centered-content"><a id="CaptureDoneElem" class="done" href="#">Done</a></span>\n</div>',width:"320px"},function(){bttn({elemId:"CaptureDoneElem",onClick:function(){screenpop.shut()
}})
})
},showpop_emailIsInvalid:function(){this.showpop_emailIsVerified()
},showpop_resetPassword:function(){var g=this,f=CAPTURE.getUserDataObj(),e="your email";
if(typeof f==="object"&&f&&f.displayName){e=f.displayName
}jrlftpl.showpopIFrame({title:"RESET PASSWORD",src:g.getResetPasswordModalUrl(),width:"320px"},function(){bttn({elemId:"CaptureDoneElem",onClick:function(){screenpop.shut()
}})
})
},jsonp:function(f,e){if(typeof e==="function"){this.jsonpCache.callback=e;
f+="&"+xhrgo.getArgsObjAsUriStr({jsonp:"CAPTURE.jsonpCache.callback"})
}lazyload.js([f])
},installNewToken:function(e){if(e&&e.accessToken){CAPTURE.createSession(e.accessToken)
}},beginLogin:function(){var f=this,e=juicycookie.getValue("janrainProfile");
Backplane.expectMessages("identity/login");
juicycookie.persist("fwd_url",window.location.href,{expires:{d:30}});
f.showpop_login()
}};
return{getNew:function(f){var e=Object.create(c);
e.config=f||{};
e.onUserUpdatedDataHook=eventhook.getNew();
e.onUserSigninFinishHook=eventhook.getNew();
e.onGetUserDataFinishHook=eventhook.getNew();
e.onSessionInvalidatedHook=eventhook.getNew();
e.onUserRegistrationFinishHook=eventhook.getNew();
return e
},getNewV3:function(f){var e=Object.create(c);
e.config=f||{};
janrain.events.onCaptureLoginSuccess.addHandler(function(g){janrain.capture.ui.modal.close();
console.log("login success",g)
});
janrain.events.onCaptureSessionFound.addHandler(function(g){janrain.capture.ui.modal.close();
console.log("session found",g)
});
e.onUserUpdatedDataHook=eventhook.getNew();
e.onUserSigninFinishHook=eventhook.getNew();
e.onGetUserDataFinishHook=eventhook.getNew();
e.onSessionInvalidatedHook=eventhook.getNew();
e.onUserRegistrationFinishHook=eventhook.getNew();
return e
}}
}());
rjsn("jrlfcapture",jrlfcapture);
var jrlfV3={url_janrainwidget:"http://widgets-cdn.rpxnow.com/load/fox-sports-dev",url_backplane:"https://d134l0cdryxgwa.cloudfront.net/backplane.js",loadWidget:function(b,c){console.log("load widget opts...",b);
var a={packages:["login","capture"],language:"en",appUrl:"https://fox-sports-dev.rpxnow.com",tokenUrl:jrlfconfig.urls.janrainCapture,tokenAction:"event",borderColor:"#ffffff",fontFamily:"Helvetica, Lucida Grande, Verdana, sans-serif",width:300,actionText:" ",capture:{backplane:true,bus_name:b.busName,backplaneVersion:1.2,appId:b.application_id,captureServer:"https://foxsports-dev.janraincapture.com",redirectUri:b.getRedirectHTMLUrl(),clientId:b.client_id,flowVersion:"HEAD",registerFlow:"socialRegistration",setProfileCookie:true,keepProfileCookieAfterLogout:true,modalCloseHtml:'<span class="janrain-icon-16 janrain-icon-ex2"></span>',noModalBorderInlineCss:true,responseType:"token",returnExperienceUserData:["displayName"],flowName:"standard",stylesheets:[jrlfconfig.getOnBaseJRLFUrl("/../jrlfbundlesignin.css")],federate:true,federateServer:b.sso_server,federateXdReceiver:b.getXdcommHTMLUrl(),federateLogoutUri:jrlfbackplanesso.getLogoutIFrame()}};
if(typeof janrain!=="object"){janrain={ready:true}
}if(typeof janrain.settings!=="object"){janrain.settings={}
}for(var d in a){if(a.hasOwnProperty(d)){janrain.settings[d]=a[d]
}}window.janrainCaptureWidgetOnLoad=function(){c(null,"success")
};
lazyload.js([this.url_janrainwidget])
},addJanrainTemplate:function(b){var c=jrlfconfig.getOnBaseJRLFUrl("/../jrlfbundlesignin.mustache"),a=document.createElement("div");
xhrgo.getTextHTML(c,function(e,d){if(e){return b(e)
}a.id="JanrainTemplate";
a.innerHTML=d;
document.body.appendChild(a);
b(null)
})
},constructCapture:function(){if(window.CAPTURE){return null
}return window.CAPTURE=jrlfcapture.getNewV3({})
},initCacheFn:lockfn.Caching.getNew(),init:function(a){var b=this;
b.initCacheFn(optfn(a),function(c){jrlfconfig.getJanrainConfig(function(e,d){if(e){return c(e)
}b.addJanrainTemplate(function(g,f){if(g){return c(g)
}jrlfbackplanesso.loadBackplane(function(i,h){if(i){return c(i)
}b.loadWidget(d,function(l,j){if(l){return c(l)
}janrain.events.onCaptureLoginSuccess.addHandler(function(n){janrain.capture.ui.modal.close();
console.log("login success",n)
});
janrain.events.onCaptureSessionFound.addHandler(function(n){janrain.capture.ui.modal.close();
console.log("session found",n)
});
janrain.events.onCaptureBackplaneReady.addHandler(function(n){console.log("backplane ready...",n,Backplane)
});
janrain.capture.ui.start();
var m=b.constructCapture();
(function k(){if(typeof Backplane==="undefined"){console.log("again...");
setTimeout(k,500)
}else{console.log("defined...",Backplane);
c(null,Backplane,m)
}}())
})
})
})
})
})
}};
var jrlf=(function(){function d(h,g){if(typeof g==="string"){h.location.href=g
}else{h.location.reload()
}}function c(g){d(window,g)
}function b(g){d(window.top,g)
}var f="V3",a="V2";
var e={version:a,loadCapture:function(g,h){lazyload.js([g.urls.captureClient],function(){h(null,"success")
})
},constructCapture:function(g){if(window.CAPTURE){return window.CAPTURE
}var h=window.CAPTURE=jrlfcapture.getNew({response_type:"token",sso_server:g.urls.ssoserver,client_id:g.client_id,application_id:g.application_id,capture_server_url:g.urls.janrainCapture,redirect_uri:g.getRedirectHTMLUrl(),xd_receiver:g.getXdcommHTMLUrl()});
h.onUserSigninFinishHook.addFn(function(){if(window.top.location.href.match(/account\/login/gi)){c(g.urls.accountlogin)
}else{c(g.baseUrl)
}});
h.onUserUpdatedDataHook.addFn(function(i){b()
});
h.onSessionInvalidatedHook.addFn(function(){if(/reset_password/g.test(window.top.location.href)){return null
}if(window.top.location.href.match(/account\/settings/gi)||window.top.location.href.match(/account\/profile/gi)){c(g.urls.accountlogin)
}else{c()
}});
return h
},renderUrlPromptedModals:function(g,h){if(typeof g==="string"&&g){if(g.match(/invalid-email/)){h.showpop_emailIsInvalid()
}else{if(g.match(/email-verified/)){h.showpop_emailIsVerified()
}else{if(g.match(/launch-user-signin/)){h.showpop_login()
}else{if(g.match(/launch-reset-password/)){h.showpop_resetPassword()
}}}}}},initCacheFn:lockfn.Caching.getNew(),init:function(g){var h=this;
h.initCacheFn(optfn(g),function(i){if(h.version===f){return jrlfV3.init(g)
}jrlfbackplanesso.init(jrlfconfig,function(l,k,j){if(l){return i(l)
}h.loadCapture(jrlfconfig,function(n,m){if(n){return i(n)
}var o=h.constructCapture(j);
o.checkToken();
h.renderUrlPromptedModals(window.location.href,o);
i(null,k,o)
})
})
})
},isStaging:function(){return jrlfconfig.isStaging
},isProduction:function(){return jrlfconfig.isProduction
},getJRLFProfileViewUrlStr:jrlfconfig.getJRLFProfileViewUrlStr,getJRLFProfileEditUrlStr:jrlfconfig.getJRLFProfileEditUrlStr,rendersignin:function(i){var h=this,j=i.elemid,g;
if(typeof j==="string"&&j){g=document.getElementById(j);
if(g){h.init(function(l,k,m){if(l){return console.log(l)
}if(m){if(m.getUserDataObj()){b(jrlfconfig.urls.accountsettings)
}jrlftpl.show(g,{src:m.getSigninUrlStr(),title:"sign in",width:"320px",height:"584px"},function(o,n){console.log("iframe is loaded")
})
}})
}}},renderprofile:function(i){var h=this,j=i.elemid,g;
if(typeof j==="string"&&j){g=document.getElementById(j);
if(g){h.init(function(l,k,m){if(l){return console.log(l)
}if(m){jrlftpl.show(g,{src:m.getPrivateProfilePageUrlStr(),title:"profile",width:"800px",height:"900px"},function(o,n){console.log("iframe is loaded")
})
}})
}}},rendersettings:function(i){var h=this,j=i.elemid,g;
if(typeof j==="string"&&j){g=document.getElementById(j);
if(g){h.init(function(l,k,m){if(l){return console.log(l)
}if(m){jrlftpl.show(g,{src:m.getProfileEmailPageUrlStr(),title:"settings",width:"800px",height:"900px"},function(o,n){console.log("iframe is loaded")
})
}})
}}},renderpasswordreset:function(i){var h=this,j=i.elemid,g;
if(typeof j==="string"&&j){g=document.getElementById(j);
if(g){h.init(function(l,k,n){if(l){return console.log(l)
}var m=xhrgo.getUriStrAsArgsObj(window.location.href);
if(m&&m.access_token){if(n){jrlftpl.show(g,{src:n.getChangeProfilePasswordModalUrl(m.access_token),title:"password reset",width:"322px",height:"600px"},function(p,o){console.log("iframe is loaded")
})
}}})
}}},redirect:function(){var g=this;
jrlfconfig.getJanrainConfig(function(m,k){var s=location.host,i={},r;
var p={ssoLoginUrl:jrlfbackplanesso.getLogoutIFrame(),resetPasswordUrl:"http://:host/content/fsdigital/fscom/admin/fsdigital-account-page.reset_password.html",invalidEmailUrl:"http://:host/#type=invalid-email",verifyEmailUrl:"http://:host/#type=email-verified"};
var n=window,o=location.hash.split(/=/),q=location.hash.match(/access_token=(.*)/)[1];
var h=xhrgo.getUriStrAsArgsObj(location.href);
h=(typeof h==="object"&&h)?h:{};
var l=n.top.CAPTURE;
if(typeof q==="string"){juicycookie.persist("janrainToken",q,{expires:{mm:350}})
}if(l&&q){var j=xhrgo.getUriStrAsArgsObj(window.top.location.href);
i.accessToken=q;
l=g.constructCapture(k);
if(!l.isLoggedIn()){l.onUserSigninFinishHook=eventhook.getNew();
l.onGetUserDataFinishHook.addFn(function(){var t=j.fu||j.vanillaUri;
delete j.fu;
delete j.vanillaUri;
delete j.hash;
if(xhrgo.getArgsObjAsUriStr(j)){t+="?"+xhrgo.getArgsObjAsUriStr(j)
}b(t)
});
l.fromRedirectHTMLCreateSession(null,i)
}}else{if(h.recover_password&&typeof q==="string"){if(h.verification==="invalid"){c(p.invalidEmailUrl.replace(/:host/,s))
}else{if(h.code){c(p.verifyEmailUrl.replace(/:host/,s))
}else{if(h.origin){c(p.ssoLoginUrl.replace(/:host/,s))
}else{if(h.fu){if(l){i.accessToken=q;
l.onUserSigninFinishHook=eventhook.getNew();
l.onGetUserDataFinishHook.addFn(function(){b(h.fu)
});
l.fromRedirectHTMLCreateSession(null,i)
}else{if(typeof l!=="object"&&typeof q==="string"){c(p.resetPasswordUrl.replace(/:host/,s)+"?access_token="+q+"&fu="+encodeURIComponent(h.fu))
}}}else{if(typeof l!=="object"&&typeof q==="string"){c(p.resetPasswordUrl.replace(/:host/,s)+"?access_token="+q)
}}}}}}else{if((r=juicycookie.getValue("fwd_url"))){juicycookie.rm("fwd_url");
juicycookie.persist("ofwd_url",r,{expires:{mm:10}});
if(q){i.accessToken=q;
l=g.constructCapture(k);
l.onUserSigninFinishHook=eventhook.getNew();
l.onGetUserDataFinishHook.addFn(function(){b(r)
});
l.fromRedirectHTMLCreateSession(null,i)
}}else{var j=xhrgo.getUriStrAsArgsObj(window.top.location.href);
if(j.fu&&q){i.accessToken=q;
l=g.constructCapture(k);
l.onUserSigninFinishHook=eventhook.getNew();
l.onGetUserDataFinishHook.addFn(function(){b(j.fu)
});
l.fromRedirectHTMLCreateSession(null,i)
}else{b(jrlfconfig.baseUrl)
}}}}})
}};
return e
}());
rjsn("jrlf",jrlf);