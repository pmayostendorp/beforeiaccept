var Fx=fx={};Fx.Base=function(){};Fx.Base.prototype={setOptions:function(a){this.options=Object.extend({onStart:function(){},onComplete:function(){},transition:Fx.Transitions.sineInOut,duration:500,unit:"px",wait:true,fps:50,supportsPositionFixed:Fool.Util.SupportsPositionFixed()},a||{})},step:function(){var a=new Date().getTime();if(a<this.time+this.options.duration){this.cTime=a-this.time;this.setNow()}else{setTimeout(this.options.onComplete.bind(this,this.element),10);this.clearTimer();this.now=this.to}this.increase();return this},setNow:function(){this.now=this.compute(this.from,this.to);return this},compute:function(c,b){var a=b-c;return this.options.transition(this.cTime,c,a,this.options.duration)},clearTimer:function(){clearInterval(this.timer);this.timer=null;return this},start:function(b,a){if(!this.options.wait){this.clearTimer()}if(this.timer){return this}setTimeout(this.options.onStart.bind(this,this.element),10);if(arguments.length==1){this.to=b;this.from=parseInt(this.getStyle(this.element,this.property))}else{this.to=a;this.from=b}this.time=new Date().getTime();this.timer=setInterval(this.step.bind(this),Math.round(1000/this.options.fps));return this},custom:function(b,a){return this.start(b,a)},set:function(a){this.now=a;this.increase();return this},hide:function(){return this.set(0)},setStyle:function(c,b,a){if(b=="opacity"){if(a==0&&c.style.visibility!="hidden"){c.style.visibility="hidden";c.style.display="none"}else{if(a!=0&&c.style.visibility!="visible"){c.style.visibility="visible";c.style.display=""}}c.style.opacity=a}else{c.style[b]=a+this.options.unit}return this},getStyle:function(c,b){var a;if(c.style[b]!==""){a=c.style}else{a=(document.defaultView)?document.defaultView.getComputedStyle(c,null):c.currentStyle}return a[b]},setElement:function(a){this.element=$(a);return this},getElement:function(){return this.element}};Fx.Style=Class.create();Fx.Style.prototype=Object.extend(new Fx.Base(),{initialize:function(b,c,a){this.setElement(b);this.setOptions(a);this.property=c.camelize()},increase:function(){return this.setStyle(this.element,this.property,this.now)}});Fx.Shield=Class.create();Fx.Shield.prototype=Object.extend(new Fx.Base(),{subject:null,initialize:function(b,a){this.setOptions(a);if(!this.options.className){this.options.className="shield"}var c;if(this.options.id&&document.getElementById(this.options.id)){c=document.getElementById(this.options.id)}else{c=document.createElement("DIV");if(this.options.id){c.id=this.options.id}}c.className=this.options.className;c.style.position="absolute";this.setStyle(c,"opacity",0);this.setElement(c);this.subject=$(b);this.subject.appendChild(this.element);if(this.options.zIndex){c.setStyle({zIndex:this.options.zIndex})}},increase:function(){return this.setStyle(this.element,"opacity",this.now)},matchSubject:function(){if((this.subject==document.body)){this.matchViewport();Event.observe(window,"resize",this.matchViewport.bind(this))}else{Element.clonePosition(this.element,this.subject)}return this},matchViewport:function(){var b=document.viewport.getDimensions();var a={height:b.height+"px",width:b.width+"px",top:0,left:0,position:"fixed"};a=this.options.supportsPositionFixed?a:this._matchViewportNoPositionFixed(a);this.element.setStyle(a)},_matchViewportNoPositionFixed:function(a){var b=document.viewport.getScrollOffsets();Object.extend(a,{top:b.top+"px",position:"absolute"});return a},start:function(b,a){this.matchSubject();Fx.Base.prototype.start.call(this,b,a);return this}});Fx.Overlay=Class.create({element:null,fx:null,options:{opacity:0.75,duration:500,id:"overlay",dismissOnEsc:false,dismissOnClick:false,supportsPositionFixed:null},initialize:function(d,c){this.options.supportsPositionFixed=true;var b=this;this.element=$(d);Object.extend(this.options,c);this.fx=new Fx.Style(this.element,"opacity",{options:this.options.duration,onComplete:function(){if(window.ActiveXObject){this.element.style.filter=""}}});if(this.options.dismissOnEsc){var e=function(f){if(Event.KEY_ESC==f.keyCode){this.hide();f.stop();Event.stopObserving(document,"keypress");Event.stopObserving(document,"keydown")}};Event.observe(document,"keypress",e.bindAsEventListener(this));Event.observe(document,"keydown",e.bindAsEventListener(this))}this.shield=new Fx.Shield(document.body,this.options);this.shield.element.parentNode.appendChild(this.element);if(this.options.dismissOnClick){var a=function(f){this.hide();f.stop()};Event.observe(this.shield.element,"click",a.bindAsEventListener(this))}},show:function(){this._showFix();this.position();this.shield.start(0,this.options.opacity);this.fx.start(0,1);Fx.Overlay.visible=this;return this},_showFix:function(){if(!this.options.supportsPositionFixed){$$("html, body").each(function(c){c.setStyle({height:"100%",overflow:"hidden"})});var a=$(this.shield.element);var b=a.getWidth();a.setStyle({width:(b+20)+"px"});$$("select, embed, object").each(function(c){c.style.visibility="hidden"})}},hide:function(){this.shield.start(this.options.opacity,0);this.fx.start(1,0);Fx.Overlay.visible=null;this._hideFix();return this},_hideFix:function(){if(!this.options.supportsPositionFixed){$$("html, body").each(function(b){b.setStyle({height:"auto",overflow:""})});var a=$(this.shield.element).getWidth();$(this.shield.element).setStyle({width:(a-20)+"px"});$$("select, embed, object").each(function(b){b.style.visibility="visible"})}},destroy:function(){this.element.remove();this.shield.element.remove()},position:function(){var a=Position.viewportSize();var c=this.element.getDimensions();var e=Math.max(((a.height-c.height)/2),10);var d=(a.width-c.width)/2;this.element.setStyle({top:e+"px",left:d+"px",position:"fixed"});var b=!!(c.height>a.height);this._positionFix(e,d,b||!this.options.supportsPositionFixed);return this},_positionFix:function(c,b,a){if(a){if(Prototype.Browser.MobileSafari){this.element.setStyle({top:c+"px",position:"absolute"})}else{var d=document.viewport.getScrollOffsets();this.element.setStyle({top:(c+d.top)+"px",position:"absolute"})}}}});Fx.Overlay.visible=null;Fx.Overlay.hide=function(){if(Fx.Overlay.visible){Fx.Overlay.visible.hide()}};Fx.Overlay.destroy=function(){if(Fx.Overlay.visible){Fx.Overlay.visible.destroy()}};Fx.Overlay.BindOverlayAction=function(b,d,c){var a=b||this;d=d||".lbAction";c=c||"rel";$(this.element).select(d).each(function(e){var f=e.readAttribute(c);if(Object.isFunction(a[f])){Event.observe(e,"click",a[f].bindAsEventListener(a,this))}},this)};Fx.AjaxOverlay=Class.create(Fx.Overlay,{initialize:function($super,a){this.myOptions=Object.extend(this.myOptions,a);var b=$(this.myOptions.id)||new Element("div",{id:this.myOptions.id}).addClassName(this.myOptions.className);b.update(new Element("img",{src:(this.myOptions.isSecure?this.myOptions.progressImageSecure:this.myOptions.progressImage),"class":"spinner"}));$super(b,this.myOptions.overlayOptions)},show:function($super,c){var b=function(e){return function(g){this.element.update(g.responseText);this.position();var f=e.bind(this,g);f()}};var d=b(this.myOptions.onSuccess);var a=b(this.myOptions.onFailure);if(Fx.Overlay.visible!==this){Fx.AjaxOverlay.hide();$super()}this.load(d,a,c)},load:function(c,a,b){new Ajax.Request(this.myOptions.url,{method:this.myOptions.method,parameters:b||this.myOptions.parameters,onSuccess:c.bind(this),onFailure:a.bind(this)})},element:null,myOptions:{url:null,progressImage:"http://g.foolcdn.com/img/progress_spinner.gif",progressImageSecure:"https://g.foolcdn.com/img/progress_spinner.gif",method:"post",parameters:null,id:"overlayMessage",className:"overlayElement",onSuccess:function(){},onFailure:function(){},overlayOptions:{}}});Fx.AjaxOverlay.hide=function(){Fx.Overlay.hide()};Fx.Transitions={linear:function(e,a,g,f){return g*e/f+a},sineIn:function(e,a,g,f){return-g*Math.cos(e/f*(Math.PI/2))+g+a},sineOut:function(e,a,g,f){return g*Math.sin(e/f*(Math.PI/2))+a},sineInOut:function(e,a,g,f){return-g/2*(Math.cos(Math.PI*e/f)-1)+a},bounceIn:function(e,a,g,f){return g-Fx.Transitions.bounceOut(f-e,0,g,f)+a},bounceOut:function(e,a,g,f){if((e/=f)<(1/2.75)){return g*(7.5625*e*e)+a}else{if(e<(2/2.75)){return g*(7.5625*(e-=(1.5/2.75))*e+0.75)+a}else{if(e<(2.5/2.75)){return g*(7.5625*(e-=(2.25/2.75))*e+0.9375)+a}else{return g*(7.5625*(e-=(2.625/2.75))*e+0.984375)+a}}}},bounceInOut:function(e,a,g,f){if(e<f/2){return Fx.Transitions.bounceIn(e*2,0,g,f)*0.5+a}return Fx.Transitions.bounceOut(e*2-f,0,g,f)*0.5+g*0.5+a}};Fool.Interstitial=Class.create({overlay:null,overlayContainer:null,timeout:null,initialized:false,initialize:function(a,c){if(typeof(Fx)=="undefined"){var b=document.createElement("SCRIPT");b.src="/Common/Js/Fx/Fx.min.js";b.type="text/javascript";document.body.appendChild(b)}if($(a)==null){return false}else{this.initialized=true}this.overlayContainer=$(a);this.createCloseLink();this.timeout=c;if(Fx.Overlay.visible!=null){return false}this.overlay=new Fx.Overlay(a,{opacity:0.8,dismiss:true})},createCloseLink:function(){var a=$(document.createElement("A"));a.innerHTML="CLOSE <span>X</span>";a.addClassName("dismiss");a.observe("click",function(b){this.hide();Event.stop(b)}.bind(this));this.overlayContainer.appendChild(a)},show:function(){this.overlay.show()},showAndHide:function(){this.show();this.hide(this.timeout)},hide:function(a){if(!!a){setTimeout(function(){Fx.Overlay.hide()}.bind(this),this.timeout*1000)}else{Fx.Overlay.hide()}}});Fool.onContent(function(){new Fool.Acts();if(Fool.Interstitial){var a=new Fool.Interstitial("interstitial",15);if(a.initialized){a.showAndHide()}else{a=null}Fool.simpleConsole("Live = "+Fool.Env.isLive)}});var Usmf={};Usmf.Tabs=Class.create({hoverOffTimeout:0.75,hoverOnTimeout:0.2,initialize:function(a){this.container=$(a);Event.observe(this.container,"mouseout",this.unHover.bindAsEventListener(this));Event.observe(this.container,"mouseover",this.hover.bindAsEventListener(this));this.defaultTab=this.container.down("li.on");this.defaultTab.removeClassName("on").addClassName("hover");this.hoveredTab=null},unHover:function(a){this.clearTimeouts();if(this.hoveredTab){var b=a.relatedTarget||a.toElement;if(!b||b.descendantOf(this.container)||b==this.container){return a.stop()}this.hoverOutTimeoutId=this.activateTab.bind(this).delay(this.hoverOffTimeout,this.defaultTab)}else{return a.stop()}},hover:function(b){this.clearTimeouts();if(b.target.nodeName!="SPAN"){return b.stop}var a=$(b.target).up("li");if(this.hoveredTab!=null&&a!=null&&this.hoveredTab==a){return b.stop}if(a){hoverOnTimeout=this.hoveredTab?this.hoverOnTimeout:0;this.hoverOnTimeoutId=this.activateTab.bind(this).delay(hoverOnTimeout,a)}},activateTab:function(a){this.deActivateTab();a.addClassName("hover");this.hoveredTab=a},deActivateTab:function(){this.container.select(".hover").each(function(a){a.removeClassName("hover")});this.hoveredTab=null},clearTimeouts:function(){window.clearTimeout(this.hoverOnTimeoutId);window.clearTimeout(this.hoverOutTimeoutId)},insertSubnavElement:function(h,e,g,f){var d=$$("li."+h)[0];var b=$(document.createElement("LI"));var c=$(document.createElement("A"));c.href="http://www.fool.com/adtr.ashx?to="+escape(f);c.className=b.className=d.className;c.removeClassName(h);b.removeClassName(h);b.removeClassName("on");c.innerHTML=e;if(g){c.onclick=function(){var a=confirm(g);if(!a){return false}}}b.appendChild(c);d.insert({after:b})}});Usmf.Search=(function(){var a,b;return{controller:function(c){switch(c.type){case"focus":this.clear();break;case"blur":this.restore();break}},isEmpty:function(){return!!(a.value.trim()=="")},isDefault:function(){return!!(a.value.trim()==a.defaultValue)},clear:function(){a.addClassName("active");if(this.isDefault()){a.value=""}},restore:function(){a.removeClassName("active");if(this.isEmpty()){a.value=a.defaultValue}},prepare:function(c){b=c||"searchForm";b=$(b);if(b){a=$(b.elements.q);if(Usmf.Search.isEmpty()){a.value=a.defaultValue}var d=Usmf.Search.controller.bindAsEventListener(Usmf.Search);a.observe("focus",d);a.observe("blur",d);b.onsubmit=function(){return!(Usmf.Search.isDefault()||Usmf.Search.isEmpty())}}}}})();Usmf.Indices=Class.create({container:null,rows:null,urlBase:null,updatedField:null,transitionUp:"transitionUp",transitionDown:"transitionDown",useTransition:false,data:{indexes:{"^DJI":{displayName:"DOW",ticker:"^DJI",price:"0.00",priceChange:"0.00",percentChange:"0.00",lastTrade:new Date},"^GSPC":{displayName:"S&amp;P 500",ticker:"^GSPC",price:"0.00",priceChange:"0.00",percentChange:"0.00",lastTrade:new Date},"^IXIC":{displayName:"NASD",ticker:"^IXIC",price:"0.00",priceChange:"0.00",percentChange:"0.00",lastTrade:new Date}}},elements:{},initialize:function(a){this.container=$("indices");this.setupCorners();this.rows=this.container.select("tr");this.getTableData();this.container.setStyle({visibility:"visible"});setTimeout(function(){this.startPE()}.bind(this),a*1000||0)},startPE:function(){var a=this;this.useTransition=true;this.PDR=new Fool.Ajax.PeriodicalDecayingRequest("/common/ajax/quote.ashx",{method:"get",parameters:{q:"^DJI,^GSPC,^IXIC"},frequency:1000,decay:2,onSuccess:function(b){a.updateData(b.responseJSON)},onFailure:function(b){a.PDR.stop()}})},updateData:function(b){var a=this;b.each(function(f){var c=new Date(Date.parse(f.LastTrade));var e=c.format("yyyymmddhhnn");var g=this.data.indexes[f.Symbol.toUpperCase()];var d=null;if(parseFloat(f.CurrentPrice)>parseFloat(g.price)){d=a.transitionUp}else{if(parseFloat(f.CurrentPrice)<parseFloat(g.price)){d=a.transitionDown}}g.percentChange=f.PercentChange.toString();g.priceChange=f.PriceChange.toString();g.price=f.CurrentPrice.toString();g.lastTrade=new Date(Date.parse(f.LastTrade));if(f.Symbol=="^DJI"){this.updatedField.update("Updated: "+c.format("mm/dd/yyyy hh:nn a/p"))}this.updateRow(f.Symbol,d)}.bind(this))},rowTemplate:new Template('<tr class="#{cleanTickerClass}"><td class="image #{dailyDirection}">	<img src="//www.fool.com/img/topNav/#{dailyDirectionImage}.gif" width="9" height="6" /></td><td class="index"><a href="	http://#{urlBase}/ticker/#{escapedTicker}.aspx?source=ihpdspmki0000001" class="unvisit qsAdd qs-source-ihpdspmki0000001">#{displayName}</a></td><td class="value">	<div class="shieldContainer">#{price}</div></td><td class="change #{dailyDirection}"><div class="shieldContainer">#{priceChange}</div></td>	<td class="percentChange #{dailyDirection}"><div class="shieldContainer">#{percentChange}%</div></td></tr>'),updateRow:function(d,a){var c="tr."+d.toLowerCase().substr(1);var b=this.container.down(c);templateTickerClass=d=="^IXIC"?c.substr(3)+" last":c.substr(3);dailyDirection=parseFloat(this.data.indexes[d].priceChange)>0?" pos ":" neg ";dailyDirectionImage=parseFloat(this.data.indexes[d].priceChange)>0?"up":"down";escapedTicker=encodeURIComponent(d);tempRowObject={urlBase:this.urlBase,cleanTickerClass:templateTickerClass,dailyDirection:dailyDirection,dailyDirectionImage:dailyDirectionImage,escapedTicker:escapedTicker,displayName:this.data.indexes[d].displayName,price:this.data.indexes[d].price,priceChange:this.data.indexes[d].priceChange,percentChange:this.data.indexes[d].percentChange};string=this.rowTemplate.evaluate(tempRowObject);if(this.useTransition){this.transitionRow(b,a,string)}else{b.replace(string)}},transitionRow:function(c,b,a){c=$(c);c.addClassName(b);c.select("div.shieldContainer").each(function(d){shield=new Fx.Shield(d,{wait:false,duration:250,onComplete:function(){if(d.up("td")!=undefined&&d.up("td").hasClassName("percentChange")){c.replace(a)}}});shield.start(0,1)})},getTableData:function(){var a=new Array;this.rows.each(function(c){if(c.hasClassName("updated")){this.updatedField=$(c.cells[0]);dateText=this.updatedField.getText();lastUpdated=new Date(Date.parse(dateText.substr(8)))}else{var b={};b.Symbol=decodeURIComponent(c.down("td.index a").href.match("ticker/(.*).aspx")[1]).toUpperCase();this.urlBase=c.down("td.index a").href.match("http://(.*?)/ticker")[1];b.CurrentPrice=c.down("td.value").getText();b.PriceChange=c.down("td.change").getText();b.PercentChange=c.down("td.percentChange").getText().replace("%","");b.LastTrade=lastUpdated.format("mm/dd/yyyy hh:nn a/p");a[a.length]=b}}.bind(this));this.updateData(a,false)},setupCorners:function(){Fool.onLoad(function(){var a=[{selector:"#indices .round",cornerType:"all"}];Fool.Util.Corners.prepare(a)})}});Usmf.Png=(function(){})();Usmf.Catfish=Class.create({catfishContainer:null,body:null,bodyContainer:null,viewId:null,classname:null,bodyHeight:null,newContainer:null,closeButton:null,initialize:function(a,b){this.viewId=a;this.classname=b;this.createCatfish()},verifyConditions:function(){if((Fool.Util.Cookies.get("Rookie")!=undefined)&&(Fool.Util.Cookies.get("Rookie").toQueryParams()[this.viewId]=="1")){return false}return true},createCatfish:function(){this.catfishContainer=$(document.createElement("DIV"));this.catfishContainer.id="catfish";this.catfishContainer.addClassName(this.classname+" clearfix transPNG");this.body=$(document.body);new Ajax.Updater(this.catfishContainer,"/Ads/BottomFeeder.aspx",{parameters:{viewId:this.viewId},method:"get",onComplete:this.setupCatfish.bind(this),onFailure:this.removeCatfish});this.body.insert({bottom:this.catfishContainer});this.body.addClassName("showingCatfish")},fillContainer:function(){var b=this.body.childElements();var a=document.createElement("DIV");a.id="container";b.each(function(c){a.appendChild(c)});this.newContainer=a},emptyContainer:function(){var a=this.newContainer.childElements();a.each(function(b){this.body.appendChild(b)});this.newContainer.remove()},setupCatfish:function(){this.closeButton=$("catfishClose");this.closeButton.observe("click",this.close.bind(this,"cls"))},removeCatfish:function(){this.catfishContainer.remove();if(this.isIE6){this.emptyContainer()}this.body.removeClassName("showingCatfish")},close:function(e){var d="iedsitcf0000002";var c="iedsitcf0000001";var a=this;var b="/ads/bottomfeeder.aspx?source=";if(e=="cls"){b+=d}else{if(e=="sbt"){b+=c}else{this.body.removeClassName("showingCatfish");this.catfishContainer.remove()}}b+="&action="+e+"&viewId="+this.viewId;new Ajax.Request(b,{method:"get",onLoaded:function(f){a.removeCatfish.call(a)}})}});var base64={};base64.PADCHAR="=";base64.ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";base64.makeDOMException=function(){var c,b;try{return new DOMException(DOMException.INVALID_CHARACTER_ERR)}catch(b){var a=new Error("DOM Exception 5");a.code=a.number=5;a.name=a.description="INVALID_CHARACTER_ERR";a.toString=function(){return"Error: "+a.name+": "+a.message};return a}};base64.getbyte64=function(c,b){var a=base64.ALPHA.indexOf(c.charAt(b));if(a===-1){throw base64.makeDOMException()}return a};base64.decode=function(d){d=""+d;var g=base64.getbyte64;var f,c,e;var b=d.length;if(b===0){return d}if(b%4!==0){throw base64.makeDOMException()}f=0;if(d.charAt(b-1)===base64.PADCHAR){f=1;if(d.charAt(b-2)===base64.PADCHAR){f=2}b-=4}var a=[];for(c=0;c<b;c+=4){e=(g(d,c)<<18)|(g(d,c+1)<<12)|(g(d,c+2)<<6)|g(d,c+3);a.push(String.fromCharCode(e>>16,(e>>8)&255,e&255))}switch(f){case 1:e=(g(d,c)<<18)|(g(d,c+1)<<12)|(g(d,c+2)<<6);a.push(String.fromCharCode(e>>16,(e>>8)&255));break;case 2:e=(g(d,c)<<18)|(g(d,c+1)<<12);a.push(String.fromCharCode(e>>16));break}return a.join("")};base64.getbyte=function(c,b){var a=c.charCodeAt(b);if(a>255){throw base64.makeDOMException()}return a};base64.encode=function(e){if(arguments.length!==1){throw new SyntaxError("Not enough arguments")}var b=base64.PADCHAR;var g=base64.ALPHA;var f=base64.getbyte;var d,h;var a=[];e=""+e;var c=e.length-e.length%3;if(e.length===0){return e}for(d=0;d<c;d+=3){h=(f(e,d)<<16)|(f(e,d+1)<<8)|f(e,d+2);a.push(g.charAt(h>>18));a.push(g.charAt((h>>12)&63));a.push(g.charAt((h>>6)&63));a.push(g.charAt(h&63))}switch(e.length-c){case 1:h=f(e,d)<<16;a.push(g.charAt(h>>18)+g.charAt((h>>12)&63)+b+b);break;case 2:h=(f(e,d)<<16)|(f(e,d+1)<<8);a.push(g.charAt(h>>18)+g.charAt((h>>12)&63)+g.charAt((h>>6)&63)+b);break}return a.join("")};