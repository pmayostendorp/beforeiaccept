/*! BARNES-BUILDER 2015-06-29 */
BN.Modal.Checkout={},BN.Modal.Checkout.Base=Extend(function(){var a=function(){consoleLog("Instantiating BN.Modal.Checkout.Base")};return a.prototype={defaultOptions:{tplDir:SITE_ROOT+"/modals/checkout/"},initForm:function(a){var b=this,c=$(this.modal),d=c.find("form");c.find("select").selectBox();for(var e=0;e<d.length;e++){var f=$(d[e]);"payPalPayment"!=f.attr("id")&&(consoleLog("Attaching uXHR to form",f),BN.uXHR.Form.apply(f),consoleLog("Listening for Errors"),f.on("amplifiFormError",function(a,c,d,e,f){var g=f.items;consoleError("Unsuccessful Form Submission: Server's response indicated errors occurred"),consoleLog(g),BN.Validate.DisplayErrors(this,g),b.$spinner.remove()}).on("amplifiFormBeforeSubmit",function(){consoleLog("Calling displaySpinner"),b.$spinner&&b.$spinner.length>0&&b.$spinner.remove(),b.displaySpinner()}).on("amplifiFormSuccess",function(c,d){if(a===!1)return void consoleLog("Success!");var e=b.data,g=window.location.toString().split("#")[0];null!=d&&void 0!=d&&d instanceof Object&&d.redirectSuccessUrl&&""!=d.redirectSuccessUrl?g=d.redirectSuccessUrl:null!=e&&void 0!=e&&e instanceof Object&&e.redirectSuccessUrl&&""!=e.redirectSuccessUrl&&(g=e.redirectSuccessUrl);var h=null,i=(h=f.find('input[name="modalRedirect"]')).length>0;if(i){consoleLog("Success! Redirecting modal to "+h.val());{var j=b.getContructorFromString(h.val());new j(null,null,null,b)}}else consoleLog("Success! Redirecting page to "+g),window.location=g}))}}},a}(),BN.Modal.Base,!0),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.PostAddCC=BN.Modal.Checkout.PostAddCC||Extend(function(){var a=function(a,b){consoleLog("Instantiating BN.Modal.Checkout.PostAddCC"),this.defaultOptions.tplParams={orderNumber:b["order-number"],orderId:b["order-number"],postOrderEditRequest:"true"}},b="m-post-add-cc";return $("body").hasClass("anonymous-order-review")&&(b="m-post-add-cc-anonymous"),a.prototype={defaultOptions:{tplParams:null},tplName:b,initView:function(){var a=this.data,b=$(a.target),c=b.attr("href")||"",d=this,e=(this.payment,$(this.modal)),f=e.find("#payWCCLink").attr("href"),g=e.find("form");!a.redirectSuccessUrl&&b.length>-1&&""!=c&&"#"!=c&&("/"==c.substr(0,1)&&(c=SITE_DOMAIN_URL+c),consoleLog(c),a.redirectSuccessUrl=c),setTimeout(function(){window.location.href=f,initPaymentTabs(e)},10),g.find("#addAddress h3 a, #existingAddress h3 a").on("click",function(a){a.preventDefault();var b=$(this).parents(".addressSection").first().attr("id"),c=e.find("#addAddress"),f=c.find("input, select"),g=e.find("#existingAddress"),h=e.find("#useNewAddress");if("addAddress"==b){c.hide();for(var i=0;i<f.length;i++){var j=$(f[i]);"aptSuite"!=j.attr("id")&&"companyName"!=j.attr("id")&&j.removeAttr("required")}g.show(),d.clearForm(c)}else{c.show();for(var i=0;i<f.length;i++){var j=$(f[i]);"aptSuite"!=j.attr("id")&&"companyName"!=j.attr("id")&&j.attr("required","required")}g.hide(),h.click()}d.RefreshPosition()}),e.find(".expand-cvv-container").hide(),e.find("#useShippingAddress").on("click",function(){$(this).prop("checked")?($("#addressInputs").addClass("no-display"),$("#emailAddress").closest("fieldset").css("margin-bottom","10px"),$("#addPaymentSavedAddress").find("input").not("#emailAddress").removeAttr("required")):($("#addressInputs").removeClass("no-display"),$("#emailAddress").closest("fieldset").css("margin-bottom","0"),$("#addPaymentSavedAddress").find("#country, #firstName, #lastName, #phoneNumber, #streetAddress, #city, #state, #zipCode").attr("required","required"))}),e.find(".expand-cvv").on("click",function(){e.find(".expand-cvv-container").toggle(),e.find(".expand-cvv").toggleClass("expandicon-change")}),this.initGenericView(),this.initForm(!0),this.on("display",function(){$("body").hasClass("lt-ie9")&&initPaymentTabs(e)})}},a}(),BN.Modal.Checkout.Base,"after"),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.UseSavedBillingAddr=BN.Modal.Checkout.UseSavedBillingAddr||Extend(function(){var a=function(){consoleLog("Instantiating BN.Modal.Checkout.UseSavedBillingAddr")};return a.prototype={tplName:"m-use-saved-billing",initView:function(){var a=this.data,b=$(a.target),c=b.attr("href")||"";!a.redirectSuccessUrl&&b.length>-1&&""!=c&&"#"!=c&&("/"==c.substr(0,1)&&(c=SITE_DOMAIN_URL+c),consoleLog(c),a.redirectSuccessUrl=c),this.initGenericView(),this.initForm(),this.on("display",function(){BN.Items.Init()})}},a}(),BN.Modal.Checkout.Base,!0),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.AddShipping=BN.Modal.Checkout.AddShipping||Extend(function(){var a=function(){this.defaultOptions.tplParams={editMode:"add"},consoleLog("Instantiating BN.Modal.Checkout.AddShipping")};return a.prototype={defaultOptions:{tplParams:{editMode:"add"}},tplName:"m-add-shipping",initView:function(){var a=this,b=this.data,c=$(this.modal),d=$(b.target),e=d.attr("href")||"",f=c.find("form");!b.redirectSuccessUrl&&d.length>-1&&""!=e&&"#"!=e&&("/"==e.substr(0,1)&&(e=SITE_DOMAIN_URL+e),consoleLog(e),b.redirectSuccessUrl=e),a.initGenericView(),a.initForm(),a.initFocus(),c.find(".use-saved-address").on("click",function(){prevModal=a.flow().get("m-used-saved-address"),prevModal?a.flow().goTo("m-used-saved-address"):new BN.Modal.Checkout.UseSavedAddress(null,this,null,a)}),f.on("result.QAS",function(){}).find('[type="submit"]').on("click",function(){BN.Validate.HasErrors(f)?a.displaySpinner():a.hideSpinner()})}},a}(),BN.Modal.Checkout.Base,!0),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.UseSavedAddress=BN.Modal.Checkout.UseSavedAddress||Extend(function(){var a=function(){consoleLog("Instantiating BN.Modal.Checkout.UseSavedAddress")};return a.prototype={tplName:"m-used-saved-address",initView:function(){var a=this,b=this.data,c=$(this.modal),d=$(b.target),e=d.attr("href")||"";!b.redirectSuccessUrl&&d.length>-1&&""!=e&&"#"!=e&&("/"==e.substr(0,1)&&(e=SITE_DOMAIN_URL+e),consoleLog(e),b.redirectSuccessUrl=e),this.initGenericView(),this.initForm(),this.on("display",function(){BN.Items.Init()}),c.find(".add-shipping-address").on("click",function(){prevModal=a.flow().get("m-add-shipping"),prevModal?a.flow().goTo("m-add-shipping"):new BN.Modal.Checkout.AddShipping(null,this,null,a)})}},a}(),BN.Modal.Checkout.Base,!0),BN.Modal.Checkout.UseSavedAddressForPostOrderEdit=BN.Modal.Checkout.UseSavedAddressForPostOrderEdit||Extend(function(){var a=function(a,b){consoleLog("Instantiating BN.Modal.Checkout.UseSavedAddressForPostOrderEdit"),this.defaultOptions.tplParams={orderNumber:b["order-number"],postOrderEditRequest:"true"}};return a.prototype={tplName:"m-post-order-used-saved-address",initView:function(){var a=this;this.initGenericView(),this.initForm(!1),this.on("display",function(){BN.Items.Init(),$(this.modal).find("form").on("amplifiFormSuccess",function(){return new BN.Modal.Checkout.PostOrderDeliveryOptions(null,a.data,null,a),!0})})}},a}(),BN.Modal.Checkout.Base,!0),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.AddBilling=BN.Modal.Checkout.AddBilling||Extend(function(){var a=function(){consoleLog("Instantiating BN.Modal.Checkout.AddBilling")};return a.prototype={tplName:"m-add-billing",initView:function(){var a=this.data,b=$(a.target),c=b.attr("href")||"",d=this,e=$(this.modal),f=e.find("form");!a.redirectSuccessUrl&&b.length>-1&&""!=c&&"#"!=c&&("/"==c.substr(0,1)&&(c=SITE_DOMAIN_URL+c),consoleLog(c),a.redirectSuccessUrl=c),d.initGenericView(),d.initForm(),f.on("result.QAS",function(){}).find('[type="submit"]').on("click",function(){BN.Validate.HasErrors(f)?(console.log("in display spin"),d.displaySpinner()):(console.log("in hide"),d.hideSpinner())})}},a}(),BN.Modal.Checkout.Base,!0),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.ConfirmSecurityCode=BN.Modal.Checkout.ConfirmSecurityCode||Extend(function(){var a=function(){consoleLog("Instantiating BN.Modal.Checkout.ConfirmSecurityCode")};return a.prototype={tplName:"m-confirm-security-code",initView:function(){var a=this.data,b=$(a.target),c=b.attr("href")||"";b.parent().find(".mini-cart-spinner").remove(),!a.redirectSuccessUrl&&b.length>-1&&""!=c&&"#"!=c&&("/"==c.substr(0,1)&&(c=SITE_DOMAIN_URL+c),consoleLog(c),a.redirectSuccessUrl=c),this.initGenericView(),this.initForm(),this.initFocus()}},a}(),BN.Modal.Checkout.Base,!0),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.PostUseSavedCC=BN.Modal.Checkout.PostUseSavedCC||Extend(function(){var a=function(a,b){consoleLog("Instantiating BN.Modal.Checkout.PostUseSavedCC"),this.defaultOptions.tplParams={orderNumber:b["order-number"],orderId:b["order-number"],postOrderEditRequest:"true"}},b="m-post-use-saved-cc";return $("body").hasClass("anonymous-order-review")&&(b="m-post-use-saved-cc-anonymous"),a.prototype={defaultOptions:{tplParams:null},tplName:b,initView:function(){var a=this.data,b=$(a.target),c=b.attr("href")||"";!a.redirectSuccessUrl&&b.length>-1&&""!=c&&"#"!=c&&("/"==c.substr(0,1)&&(c=SITE_DOMAIN_URL+c),consoleLog(c),a.redirectSuccessUrl=c),this.initGenericView(),this.initForm(!0),this.on("display",function(){BN.Items.Init()})}},a}(),BN.Modal.Checkout.Base,"after"),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.AddCC=BN.Modal.Checkout.AddCC||Extend(function(){var a=function(){consoleLog("Instantiating BN.Modal.Checkout.AddCC")},b="m-add-cc";$("body").hasClass("anonymous-order-review")&&(b="m-add-cc-anonymous");var c={};return"true"==$("#isEgiftLogin").val()&&(c={tplParams:{isEgift:"true"},useCache:!1}),a.prototype={tplName:b,defaultOptions:c,initView:function(){var a=this.data,b=$(a.target),c=b.attr("href")||"",d=this,e=(this.payment,$(this.modal)),f=(e.find("#payWCCLink").attr("href"),e.find("form"));if(!a.redirectSuccessUrl&&b.length>-1&&""!=c&&"#"!=c&&("/"==c.substr(0,1)&&(c=SITE_DOMAIN_URL+c),consoleLog(c),a.redirectSuccessUrl=c),f.find("#addAddress h3 a, #existingAddress h3 a").on("click",function(a){a.preventDefault();var b=$(this).parents(".addressSection").first().attr("id"),c=e.find("#addAddress"),f=c.find("input, select"),g=e.find("#existingAddress"),h=e.find("#useNewAddress");if("addAddress"==b){c.hide();for(var i=0;i<f.length;i++){var j=$(f[i]);"aptSuite"!=j.attr("id")&&"companyName"!=j.attr("id")&&j.removeAttr("required")}g.show(),d.clearForm(c)}else{c.show();for(var i=0;i<f.length;i++){var j=$(f[i]);"aptSuite"!=j.attr("id")&&"companyName"!=j.attr("id")&&j.attr("required","required")}g.hide(),h.click()}d.RefreshPosition()}),e.find(".expand-cvv-container").hide(),e.find("#useShippingAddress").on("click",function(){$(this).prop("checked")?($("#addressInputs").addClass("no-display"),$("#emailAddress").closest("fieldset").css("margin-bottom","10px"),$("#addPaymentSavedAddress").find("input").not("#emailAddress").removeAttr("required")):($("#addressInputs").removeClass("no-display"),$("#emailAddress").closest("fieldset").css("margin-bottom","0"),$("#addPaymentSavedAddress").find("#country, #firstName, #lastName, #phoneNumber, #streetAddress, #city, #state, #zipCode").attr("required","required"))}),e.find(".expand-cvv").on("click",function(){e.find(".expand-cvv-container").toggle(),e.find(".expand-cvv").toggleClass("expandicon-change")}),this.initGenericView(),$("body").hasClass("nook-login-page"))BN.uXHR.Form.apply(f),f.on("amplifiFormSuccess",function(){redirectToNook()});else{this.initForm();var e=$(this.modal),f=$(this.modal).find("#addPaymentSavedAddress");this.on("display",function(){var a=f.find("input[autofocus]");a.length&&a.focus()})}this.on("display",function(){$("body").hasClass("lt-ie9")&&initPaymentTabs(),updateNookForwardUrl(),$("body").hasClass("nook-login-page")?$("select").selectBox():initPaymentTabs(e),f.on("result.QAS",function(){}).find('[type="submit"]').on("click",function(){BN.Validate.HasErrors(f)?(console.log("in display spin"),d.displaySpinner()):(console.log("in hide"),d.hideSpinner())})})}},a}(),BN.Modal.Checkout.Base,!0),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.EditShipping=BN.Modal.Checkout.EditShipping||Extend(function(){var a=function(a){consoleLog("Instantiating BN.Modal.Checkout.EditShipping"),consoleLog("Received address data:",a),consoleLog("Getting address ID..."),a&&a.data&&a.data.id&&(this.address=a),consoleLog("Retrieved Address ID: "+this.address.data.id),this.Display()};return a.prototype={address:null,tplName:"m-edit-shipping",defaultVal:null,defaultOptions:{autoDisplay:!1,manualDisplayDom:!0,modalIsScrollable:!0},initView:function(){var a=this,b=this.address,c=$(this.modal),d=c.find("form");$errors=c.find("#editShippingErrors"),c.find("#addAddressCancel").on("click",function(b){b.preventDefault(),a.Close()}),consoleLog("Attaching success listener"),d.on("amplifiFormSuccess",function(a,c){consoleLog("Updating address using values stored in editor",c),b.setValues(c.data),window.location=window.location}).on("amplifiFormError",function(){a.hideSpinner()}).on("amplifiCountryChange",function(){}).on("result.QAS",function(){}).find('[type="submit"]').on("click",function(){BN.Validate.HasErrors(d)?a.displaySpinner():a.hideSpinner()}),consoleLog("Attempting to add values to editor"),b.fillEditor(this.modal),consoleLog("Initializing Generic View"),this.initGenericView(),consoleLog("Initializing Modal Form"),this.initForm(!1),this.__displayDom();var e=$("#state");e.val(a.address.getDataValue("addressRegion"))}},a}(),BN.Modal.Checkout.Base,!0),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.UseSavedCC=BN.Modal.Checkout.UseSavedCC||Extend(function(){var a=function(){consoleLog("Instantiating BN.Modal.Checkout.UseSavedCC")},b="m-use-saved-cc";$("body").hasClass("anonymous-order-review")&&(b="m-use-saved-cc-anonymous");var c={};return"true"==$("#isEgiftLogin").val()&&(c={tplParams:{isEgift:"true"}}),a.prototype={tplName:b,defaultOptions:c,initView:function(){var a=this.data,b=$(a.target),c=b.attr("href")||"",d=$(this.modal),e=d.find("form");!a.redirectSuccessUrl&&b.length>-1&&""!=c&&"#"!=c&&("/"==c.substr(0,1)&&(c=SITE_DOMAIN_URL+c),consoleLog(c),a.redirectSuccessUrl=c),this.initGenericView(),$("body").hasClass("nook-login-page")?(e.each(function(){BN.uXHR.Form.apply(this)}),e.on("amplifiFormSuccess",function(){redirectToNook()})):this.initForm(),this.on("display",function(){BN.Items.Init(),updateNookForwardUrl()})}},a}(),BN.Modal.Checkout.Base,!0),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.PostOrderEditShipping=BN.Modal.Checkout.PostOrderEditShipping||Extend(function(){var a=function(a,b){consoleLog("Instantiating BN.Modal.Checkout.PostOrderEditShipping"),this.defaultOptions.tplParams={orderNumber:b["order-number"],shippingId:b["shipping-id"],postOrderEditRequest:"true"}};return a.prototype={tplName:"m-post-order-edit-shipping",initView:function(){var a=this;$(this.modal).find("#addAddress").on("amplifiFormSuccess",function(){return new BN.Modal.Checkout.PostOrderDeliveryOptions(null,a.data,null,a),!0}),this.initGenericView(),this.initForm(!1)}},a}(),BN.Modal.Checkout.Base,"after"),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.ExtendedWarrantyDetails=BN.Modal.Checkout.ExtendedWarrantyDetails||Extend(function(){var a=function(){consoleLog("Instantiating BN.Modal.Checkout.ExtendedWarrantyDetails")};return a.prototype={tplName:"m-extended-warranty-details",initView:function(){var a=this.data,b=$(a.target),c=b.attr("href")||"";!a.redirectSuccessUrl&&b.length>-1&&""!=c&&"#"!=c&&("/"==c.substr(0,1)&&(c=SITE_DOMAIN_URL+c),consoleLog(c),a.redirectSuccessUrl=c),this.initGenericView(),this.initForm()}},a}(),BN.Modal.Checkout.Base,!0),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.PostOrderDeliveryOptions=BN.Modal.Checkout.PostOrderDeliveryOptions||Extend(function(){var a=function(){consoleLog("Instantiating BN.Modal.Checkout.PostOrderDeliveryOptions")};return a.prototype={tplName:"m-post-order-delivery-options",initView:function(){this.parentClass.prototype.initView.apply(this,arguments);var a=this,b=$(this.modal);b.find(".btn-submit").on("click",function(){b.find('input.no-display[type="submit"]').click()}),b.find("form").on("amplifiFormSuccess",function(b,c){var d=c.data.cvvRequired;if(d===!0&&"undefined"!=typeof d)return new BN.Modal.Checkout.PostConfirmSecurityCode(null,a.data,null,a),!0;var e=Modal.prototype.openModals;for(var f in e){var g=e[f];g&&g.Close&&g.Close()}window.location.reload(!0)}),this.initGenericView(),this.initForm(!1)}},a}(),BN.Modal.Checkout.PostOrderEditShipping,"after"),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.PostConfirmSecurityCode=BN.Modal.Checkout.PostConfirmSecurityCode||Extend(function(){var a=function(){consoleLog("Instantiating BN.Modal.Checkout.PostConfirmSecurityCode")};return a.prototype={tplName:"m-confirm-security-code",initView:function(){var a=this.data,b=$(a.target),c=b.attr("href")||"",d=$(this.modal);!a.redirectSuccessUrl&&b.length>-1&&""!=c&&"#"!=c&&("/"==c.substr(0,1)&&(c=SITE_DOMAIN_URL+c),consoleLog(c),a.redirectSuccessUrl=c),d.find("#checkCVV").on("amplifiFormSuccess",function(){var a=Modal.prototype.openModals;for(var b in a){var c=a[b];c&&c.Close&&c.Close()}}),this.initGenericView(),this.initForm(!0)}},a}(),BN.Modal.Checkout.Base,"after"),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.EditBilling=BN.Modal.Checkout.EditBilling||Extend(function(){var a=function(a){consoleLog("Instantiating BN.Modal.Checkout.EditBilling"),consoleLog("Received address data:",a),consoleLog("Getting address ID..."),a&&a.data&&a.data.id&&(this.address=a),consoleLog("Retrieved Address ID: "+this.address.data.id),this.Display()};return a.prototype={address:null,tplName:"m-edit-billing",defaultVal:null,defaultOptions:{autoDisplay:!1,manualDisplayDom:!0,modalIsScrollable:!0},initView:function(){var a=this,b=this.address,c=$(this.modal),d=c.find("form");c.find("#addAddressCancel").on("click",function(b){b.preventDefault(),a.Close()}),consoleLog("Attaching success listener"),d.on("amplifiFormSuccess",function(a,c){consoleLog("Updating address using values stored in editor",c),b.setValues(c.data),window.location=window.location}).on("amplifiCountryChange",function(){}).on("result.QAS",function(){}).find('[type="submit"]').on("click",function(){BN.Validate.HasErrors(d)?a.displaySpinner():a.hideSpinner()}),consoleLog("Attempting to add values to editor"),b.fillEditor(this.modal),consoleLog("Initializing Generic View"),this.initGenericView(),consoleLog("Initializing Modal Form"),this.initForm(!1),this.__displayDom();var e=$("#state");e.val(a.address.getDataValue("addressRegion"))}},a}(),BN.Modal.Checkout.Base,!0),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.PostOrderEditCC=BN.Modal.Checkout.PostOrderEditCC||Extend(function(){var a=function(a,b){consoleLog("Instantiating BN.Modal.Checkout.PostOrderEditCC"),this.defaultOptions.tplParams={orderNumber:b["order-number"],orderId:b["order-number"],postOrderEditRequest:"true"}};return a.prototype={defaultOptions:{tplParams:null},tplName:"m-post-order-edit-cc",initView:function(){var a=this;$(this.modal).find("form").on("amplifiFormSuccess",function(){a.Close()}),this.initGenericView(),this.initForm(!0)}},a}(),BN.Modal.Checkout.Base,"after"),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.PaypalUseSavedBillingAddr=BN.Modal.Checkout.PaypalUseSavedBillingAddr||Extend(function(){var a=function(){consoleLog("Instantiating BN.Modal.Checkout.PaypalUseSavedBillingAddr")};return a.prototype={tplName:"m-paypal-use-saved-billing",initView:function(){var a=this.data,b=$(a.target),c=b.attr("href")||"";!a.redirectSuccessUrl&&b.length>-1&&""!=c&&"#"!=c&&("/"==c.substr(0,1)&&(c=SITE_DOMAIN_URL+c),consoleLog(c),a.redirectSuccessUrl=c),this.initGenericView(),this.initForm(),this.on("display",function(){BN.Items.Init()})}},a}(),BN.Modal.Checkout.Base,!0),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.PaypalAddBilling=BN.Modal.Checkout.PaypalAddBilling||Extend(function(){var a=function(){consoleLog("Instantiating BN.Modal.Checkout.PaypalAddBilling")};return a.prototype={tplName:"m-paypal-add-billing",initView:function(){var a=this.data,b=$(a.target),c=b.attr("href")||"",d=this,e=$(this.modal),f=e.find("form");!a.redirectSuccessUrl&&b.length>-1&&""!=c&&"#"!=c&&("/"==c.substr(0,1)&&(c=SITE_DOMAIN_URL+c),consoleLog(c),a.redirectSuccessUrl=c),d.initGenericView(),d.initForm(),f.on("result.QAS",function(){}).find('[type="submit"]').on("click",function(){BN.Validate.HasErrors(f)?d.displaySpinner():d.hideSpinner()})}},a}(),BN.Modal.Checkout.Base,!0),BN.Modal.PrintMag=BN.Modal.PrintMag||{},BN.Modal.PrintMag.Base=BN.Modal.PrintMag.Base||Extend(function(){var a=function(){consoleLog("Instantiating BN.Modal.PrintMag.Base")};return a.prototype={defaultOptions:{tplDir:SITE_ROOT+"/modals/checkout/"},initFrameForm:function(a){var b=this;$(window).on("amplifiFrameFormSuccess",function(c,d){var e=b.data,f=window.location.toString().split("#")[0];return a===!1||e.redirect===!1?(loadDynamicHeaderElements(),void consoleLog("Success!")):(null!=d&&void 0!=d&&d instanceof Object&&d.redirectSuccessUrl&&""!=d.redirectSuccessUrl?f=d.redirectSuccessUrl:null!=d&&void 0!=d&&d instanceof Object&&d.redirect&&""!=d.redirect?f=d.redirect:null!=e&&void 0!=e&&e instanceof Object&&e.redirectSuccessUrl&&""!=e.redirectSuccessUrl&&(f=e.redirectSuccessUrl),consoleLog("Success! Redirecting page to "+f),void(window.location=f))})}},a}(),BN.Modal.Base,!0),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.CheckoutEditCCInformation=BN.Modal.Checkout.CheckoutEditCCInformation||Extend(function(){var a=function(){consoleLog("Instantiating BN.Modal.Checkout.CheckoutEditCCInformation")};return a.prototype={tplName:"m-edit-cc-information",initView:function(){var a=this.data,b=$(a.target),c=b.attr("href")||"";!a.redirectSuccessUrl&&b.length>-1&&""!=c&&"#"!=c&&("/"==c.substr(0,1)&&(c=SITE_DOMAIN_URL+c),consoleLog(c),a.redirectSuccessUrl=c),this.initGenericView(),this.initForm()}},a}(),BN.Modal.Checkout.Base,!0),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.RentalTermsConditions=BN.Modal.Checkout.RentalTermsConditions||Extend(function(){var a=function(){consoleLog("Instantiating BN.Modal.Checkout.RentalTermsConditions")};return a.prototype={defaultOptions:{tplDir:SITE_ROOT+"/modals/checkout/"},tplName:"m-rental-terms-conditions",initView:function(){this.initGenericView(),this.initForm()}},a}(),BN.Modal.Checkout.Base,!0),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.SetDefaultCC=BN.Modal.Checkout.SetDefaultCC||Extend(function(){var a=function(){consoleLog("Instantiating BN.Modal.Checkout.SetDefaultCC")};return a.prototype={tplName:"m-set-default-payment",initView:function(){this.initGenericView(),this.initForm()}},a}(),BN.Modal.Checkout.Base,!0),BN.Modal.Checkout=BN.Modal.Checkout||{},BN.Modal.Checkout.AddDefaultCC=BN.Modal.Checkout.AddDefaultCC||Extend(function(){var a=function(){consoleLog("Instantiating BN.Modal.Checkout.AddDefaultCC")};return a.prototype={tplName:"m-add-default-payment",initView:function(){var a=$(this.modal),b=a.find("form");b.find("#addAddress h3 a, #existingAddress h3 a").on("click",function(a){a.preventDefault();var b=$(this).parents("section").first().attr("id");"addAddress"==b?($("#addAddress").hide(),$("#addAddress").find("input, select").removeAttr("required"),$("#existingAddress").show()):($("#existingAddress").hide(),$("#addAddress").find("input, select").attr("required","required"),$("#aptSuite,#companyName").removeAttr("required"),$("#addAddress").show(),$("#useNewAddress").click()),togglePaymentBillingAddressForm()}),this.initGenericView(),this.initForm()}},a}(),BN.Modal.Checkout.Base,!0),BN.Modal.Textbook=BN.Modal.PrintMag||{},BN.Modal.PrintMag.Terms=BN.Modal.PrintMag.Terms||Extend(function(){var a=function(){consoleLog("Instantiating BN.Modal.PrintMag.Terms")};return a.prototype={tplName:"m-print-mag-terms",initView:function(){var a=this.data,b=$(a.target),c=b.attr("href")||"";!a.redirectSuccessUrl&&b.length>-1&&""!=c&&"#"!=c&&("/"==c.substr(0,1)&&(c=SITE_DOMAIN_URL+c),consoleLog(c),a.redirectSuccessUrl=c),this.initGenericView(),this.initForm()}},a}(),BN.Modal.PrintMag.Base,!0);